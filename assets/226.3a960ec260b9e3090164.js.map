{"version":3,"file":"226.3a960ec260b9e3090164.js","mappings":"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ACED,KAAM48F,GACN92F,KAAM,YACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,eACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,aACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,QACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,SACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,MACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,SACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,OACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,iBACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,SACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,WACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,cACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,YACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,aACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,cACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,OACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,YACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,YACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,QACN7F,MAAO,WAET,CACED,KAAM48F,GACN92F,KAAM,QACN7F,MAAO,YAGP68F,GAhJJ,SAAqBvwE,QACP,IAARA,IACFA,EAAM,IAER,IAEsB5mB,EAFlBo3F,EAAgBL,GAASM,QAAQL,IACjCM,EAAet8F,EAASo8F,GAAiBvqF,KAAKC,MAAMsqF,GAAiB,GAKrEG,EAHS3wE,GADS5mB,EAIJs3F,GAHM/4F,OACR,EAAIyB,EAAKgX,MAAM,EAAG4P,GAAO5mB,EAWrCqJ,EAAS,SAAUmuF,GACrBD,EAAME,OAAOD,EAAK,EACpB,EAIA,MAAO,CACL79F,IAfQ,SAAU2H,IAj4WR,SAAUnD,EAAI3D,GAC1B,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,EAAO,EAAG,GACrBpsB,CACT,GACF,CAuDoBwvB,CAAa3+E,GAAOA,EAAM+7E,EAC5C,GACF,EACI6C,GAAa,SAAUzvB,EAAQp8F,GACjC,OAAO4oH,GAAaxsB,EAAQp8F,GAAM+S,MAAK,SAAUk6B,GAC/C,OAAOo9E,GAASrZ,GAAUnxG,QAAQu8F,GAASnvD,EAAMmvD,EAAO6sB,YAC1D,GACF,EAMI6C,GAAQ,SAAU7rH,EAAOs2C,EAAKhqB,GAChC,IAAIw/F,EAA+B,iBAAV9rH,EAAqB+rB,WAAW/rB,GAASA,EAMlE,OALI8rH,EAAcx/F,EAChBw/F,EAAcx/F,EACLw/F,EAAcx1E,IACvBw1E,EAAcx1E,GAETw1E,CACT,EA8BIC,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEEC,GAAW,SAAUC,EAASC,GAIhC,IAHA,IAEInjH,EAFAq4F,EAAM,GACNx7F,EAAM,IAAIzF,MAAM,IAEX4D,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAImxB,EAAI,EAAGA,EAAI,EAAGA,IACrBksE,EAAIlsE,GAAKg3F,EAAQh3F,EAAQ,EAAJnxB,GAEvB,IAASmxB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1BnsB,EAAM,EACN,IAAK,IAAIgE,EAAI,EAAGA,EA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AYt0J,EAAOA,EAAQA,EAAMs0J,GACpD,IAAKt0J,EAAMs0J,GACT,OAAOt0J,EAIb,OAAOpgB,CACT,CAEA,IADAxH,EAAS7a,EAAKmB,aACA0Z,IAAW3hB,KAAKggF,SAC5B,OAAOr+D,CAEX,CACF,EACO87K,CACT,CApEoB,GAmLhBM,GAAa,SAAU1+L,GACzB,IAAIwyD,EACJ,OAAO,SAAU/qD,GAEf,OADA+qD,EAASA,GA3jFK,SAAU50D,EAAIT,GAE9B,IADA,IAAIU,EAAI,CAAC,EACAC,EAAI,EAAGC,EAAMH,EAAGI,OAAQF,EAAIC,EAAKD,IAAK,CAC7C,IAAI7D,EAAI2D,EAAGE,GACXD,EAAEtD,OAAON,IAAMkD,EAAElD,EAAG6D,EACtB,CACA,OAAOD,CACT,CAojF+Boa,CAAYjY,EAAO5E,GACvC0d,GAAM05C,EAAQl4D,GAAKmN,GAC5B,CACF,EACIk3L,GAAYD,GA/BD,CACb,KACA,KACA,KACA,KACA,KACA,OA0BEE,GAAYF,GArHH,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,YAwEEG,GAAa,SAAUp3L,GACzB,OAAO8vL,GAAY9vL,KAAUm3L,GAAUn3L,EACzC,EACIq3L,GAAS,SAAUr3L,GACrB,OAAO8vL,GAAY9vL,IAAwB,OAAfnN,GAAKmN,EACnC,EACIs3L,GAAgBL,GAnEH,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,WA6CEM,GAASN,GA9BD,CACV,KACA,KACA,OA4BEO,GAAaP,GApCC,CAChB,KACA,KACA,OAkCEQ,GAAiBR,GA3ED,CAClB,QACA,QACA,UAyEES,GAAgBT,GAhFH,CACf,KACA,OA+EEU,GAAsBV,GA7BT,CACf,MACA,SACA,WACA,UAgCEW,GAAO,IAQPC,GATY,SAUZC,GARW,SAAUv9G,GACvB,MAHc,WAGPA,CACT,EAOIw9G,GANa,SAAUpiM,GACzB,OAAOA,EAAEgH,QAAQ,UAAW,GAC9B,EAMIq7L,GAAc9G,GACd+G,GAAWrG,GACXsG,GAA0B,SAAUl4L,GAItC,OAHIi4L,GAASj4L,KACXA,EAAOA,EAAKmB,YAEP62L,GAAYh4L,IAASA,EAAK2c,aAAa,iBAChD,EACIw7K,GAAyB,SAAUn4L,GACrC,OAAOi4L,GAASj4L,IAAS83L,GAAO93L,EAAKzC,KACvC,EACI66L,GAAqB,SAAUp4L,GACjC,OAAOk4L,GAAwBl4L,IAASm4L,GAAuBn4L,EACjE,EACIq4L,GAAa,SAAUr4L,GACzB,OAAOA,EAAK1F,aAAe0F,EAAKswL,YAAcyB,GAAO/xL,EAAK1F,WAC5D,EAmCIg+L,GAAiB,SAAU1oJ,GAC7B,IAAIvY,EAAYuY,EAAIvY,YACpB,QAAKu6J,GAASv6J,KAGPA,EAAU95B,KAAKi9E,OAAO5qC,EAAIx0B,YAAcy8K,IAAUjoJ,EAAI2oJ,aAAeJ,GAAuB9gK,EAAU84J,iBAC/G,EACIqI,GAAgB,SAAU5oJ,GAC5B,IAAIvY,EAAYuY,EAAIvY,YACpB,QAAKu6J,GAASv6J,KAGPA,EAAU95B,KAAKi9E,OAAO5qC,EAAIx0B,SAAW,KAAOy8K,IAAUjoJ,EAAI6oJ,WAAaN,GAAuB9gK,EAAU/U,aACjH,EAwBIo2K,GAA6B,SAAU14L,GACzC,OAAOi4L,GAASj4L,IAASA,EAAKzC,KAAK,KAAOs6L,EAC5C,EACIc,GAA2B,SAAU34L,GACvC,OAAOi4L,GAASj4L,IAASA,EAAKzC,KAAKyC,EAAKzC,KAAKhH,OAAS,KAAOshM,EAC/D,EAQIe,GAA0B,SAAUC,GACtC,OAAIA,GAAkBA,EAAel8K,aAAa,mBAN9Cm8K,GADAC,EAQUF,EARAG,qBAAqB,OAClBD,EAAIxiM,OAAS,GAC1Bi7L,GAAUsH,IACZA,EAAO33L,WAAW6H,YAAY8vL,GAM9BD,EAAeh8K,gBAAgB,kBAC/Bg8K,EAAeh8K,gBAAgB,kBAC/Bg8K,EAAeh8K,gBAAgB,SAC/Bg8K,EAAeh8K,gBAAgB,eACxBg8K,GAEF,KAhBS,IACZE,EACAD,CAeN,EACIG,GAA+B,SAAUn6I,GAC3C,OAAOo5I,GAAwBp5I,EAAMx+C,eACvC,EAEI44L,GAA0BjH,GAC1BkH,GAA2BjH,GAC3BkH,GAASrH,GACTsH,GAAWzH,GACX0H,GAAuBnI,GAAe,CACxC,SACA,QACA,aAEEoI,GAAiBpI,GAAe,CAClC,MACA,QACA,WACA,KACA,SACA,QACA,QACA,SACA,UAEEqI,GAAYrI,GAAe,CAAC,UAC5BsI,GAAqBrB,GACrBsB,GAAqB,SAAU15L,GACjC,OAAIy5L,GAAmBz5L,KAGnBq5L,GAASr5L,IACHs5L,GAAqBt5L,EAAKmB,YAE7Bo4L,GAAev5L,IAASo5L,GAAOp5L,IAASw5L,GAAUx5L,IAAS25L,GAA4B35L,GAChG,EAII25L,GAA8B,SAAU35L,GAC1C,OAAgC,IAJb,SAAUA,GAC7B,OAAOkxL,GAAYlxL,IAA+C,SAAtCA,EAAKnF,aAAa,eAChD,CAES++L,CAAe55L,IAAmBm5L,GAAyBn5L,EACpE,EAuBI65L,GAA6B,SAAU75L,EAAM8tC,GAC/C,OAAO4rJ,GAAmB15L,IAvBT,SAAUA,EAAM8tC,GACjC,IAAK9tC,EAAOA,EAAKmB,WAAYnB,GAAQA,IAAS8tC,EAAM9tC,EAAOA,EAAKmB,WAAY,CAC1E,GAAIw4L,GAA4B35L,GAC9B,OAAO,EAET,GAAIk5L,GAAwBl5L,GAC1B,OAAO,CAEX,CACA,OAAO,CACT,CAaqC85L,CAAa95L,EAAM8tC,EACxD,EAEIisJ,GAAqB,eACrBC,GAAmB,SAAU7hM,GAC/B,OAAO4hM,GAAmBn/L,KAAKzC,EACjC,EAaI8hM,GAAc,SAAUj6L,EAAMk5E,GAChC,OAAOwgH,GAAmB15L,KAA0C,IAPnD,SAAUA,EAAMk5E,GACjC,OAAO04G,GAAS5xL,IAASg6L,GAAiBh6L,EAAKzC,QAAyD,IANxE,SAAUyC,EAAMk5E,GAChD,IA1MyBxmE,EAAiBwe,EA0MtCgpK,EAAc1nL,GAAqB0mE,GAEvC,OA5MyBxmE,EA2MTF,GAAqBxS,GA3MKkxB,EA4MDljB,EAAM2L,GAAIugL,GA3M5C/oK,GAAWze,EA2MW,WA3MMwe,GAAQj9B,QA4M7C,CAE0DkmM,CAA4Bn6L,EAAMk5E,EAC5F,CAKqCa,CAAa/5E,EAAMk5E,IAJpC,SAAUl5E,GAC5B,OAAOkxL,GAAYlxL,IAA2B,MAAlBA,EAAKrG,WAAqBqG,EAAK2c,aAAa,UAAY3c,EAAK2c,aAAa,SAAW3c,EAAK2c,aAAa,MACrI,CAE+Ey9K,CAAcp6L,IAASq6L,GAAWr6L,EACjH,EACIq6L,GAAa19K,GAAa,qBAC1B29K,GAAY39K,GAAa,kBACzB49K,IAA+B,iBAAkB,MAlgD5C,SAAUv6L,GACf,OAAOkxL,GAAYlxL,IAigD8B,QAjgDrBA,EAAKnF,aAigDF,iBAhgDjC,GAmiDE2/L,GAAY,SAAU9gM,EAAK+gM,GAI7B,YAHkB,IAAdA,IACFA,GAAY,GApCE,SAAUtoC,EAAYsoC,GACtC,IAAIC,EAAU,EACd,GAAIT,GAAY9nC,EAAYA,GAC1B,OAAO,EAEP,IAAInyJ,EAAOmyJ,EAAW73J,WACtB,IAAK0F,EACH,OAAO,EAET,IAAI3F,EAAS,IAAIs8L,GAAc32L,EAAMmyJ,GACrC,EAAG,CACD,GAAIsoC,EAAW,CACb,GAAIF,GAAWv6L,GAAO,CACpBA,EAAO3F,EAAOI,MAAK,GACnB,QACF,CACA,GAAI6/L,GAAUt6L,GAAO,CACnBA,EAAO3F,EAAOI,OACd,QACF,CACF,CACA,GAAIs3L,GAAO/xL,GACT06L,IACA16L,EAAO3F,EAAOI,WAFhB,CAKA,GAAIw/L,GAAYj6L,EAAMmyJ,GACpB,OAAO,EAETnyJ,EAAO3F,EAAOI,MAJd,CAKF,OAASuF,GACT,OAAO06L,GAAW,CAEtB,CAKSC,CAAYjhM,EAAIwC,IAAKu+L,EAC9B,EAKIG,GAAkB,SAAU56L,EAAM8tC,GACpC,OAAOxgC,EAActN,KAAUi6L,GAAYj6L,EAAM8tC,IAASspJ,GAAW5kL,GAAqBxS,IAC5F,EAQI66L,GAAmB,SAAU76L,GAC/B,OAdW,SAAUA,GACrB,MAAuC,SAAhCA,EAAKrG,SAASC,aACvB,CAYSkhM,CAAO96L,IAAgD,aAAvCA,EAAKnF,aAAa,gBAC3C,EAUIkgM,GAAW,SAAU7+L,EAAK8D,EAAM8tC,GAClC,IAAIorC,EAAWprC,GAAQ9tC,EACvB,GAAIkxL,GAAYlxL,IAAS66L,GAAiB76L,GACxC,OAAOA,EAGT,IADA,IAAI+a,EAAW/a,EAAK8S,WACXzc,EAAI0kB,EAASxkB,OAAS,EAAGF,GAAK,EAAGA,IACxC0kM,GAAS7+L,EAAK6e,EAAS1kB,GAAI6iF,GAE7B,GAAIg4G,GAAYlxL,GAAO,CACrB,IAAIg7L,EAAkBh7L,EAAK8S,WACI,IAA3BkoL,EAAgBzkM,QAAgBskM,GAAiBG,EAAgB,KACnEh7L,EAAKmB,WAAWC,aAAa45L,EAAgB,GAAIh7L,EAErD,CAIA,OArBe,SAAUA,GACzB,OAAOwT,GAAmBxT,IAAS8xL,GAAa9xL,EAClD,CAgBOuT,CAAWvT,IAAUi6L,GAAYj6L,EAAMk5E,IArB1B,SAAUl5E,GAC5B,QAAOkxL,GAAYlxL,IAAQA,EAAK8S,WAAWvc,OAAS,CACtD,CAmB4D0kM,CAAcj7L,IAxBrD,SAAUA,EAAM8tC,GACnC,OAAO8jJ,GAAS5xL,IAASA,EAAKzC,KAAKhH,OAAS,GAXd,SAAUyJ,EAAM8tC,GAC9C,IAAIuqG,EAAO,IAAIs+C,GAAc32L,EAAM8tC,GAAMuqG,MAAK,GAC1C59I,EAAO,IAAIk8L,GAAc32L,EAAM8tC,GAAMrzC,MAAK,GAC1CygM,EAAe9tL,EAAYirI,IAASuiD,GAAgBviD,EAAMvqG,GAC1DqtJ,EAAe/tL,EAAY3S,IAASmgM,GAAgBngM,EAAMqzC,GAC9D,OAAOotJ,GAAgBC,CACzB,CAKmDC,CAA0Bp7L,EAAM8tC,EACnF,CAsBoFutJ,CAAer7L,EAAMk5E,IACrGh9E,EAAImF,OAAOrB,GAENA,CACT,EAEIs7L,GAAYrpM,GAAMw7I,QAClB8tD,GAAmB,0EACnBC,GAAkB,kEAClBC,GAAiB,aACjBC,GAAe,kCACfC,GAAW,CACb,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAEHC,GAAe,CACjB,IAAK,SACL,IAAM,QACN,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,SAEHC,GAAkB,CACpB,OAAQ,IACR,OAAQ,IACR,QAAS,IACT,SAAU,IACV,SAAU,KAORC,GAAsB,SAAUvjM,EAAOwjM,GACzC,IAAI1lM,EAAG2jF,EAAKgiH,EACRjxI,EAAS,CAAC,EACd,GAAIxyD,EAAO,CAGT,IAFAA,EAAQA,EAAM4C,MAAM,KACpB4gM,EAAQA,GAAS,GACZ1lM,EAAI,EAAGA,EAAIkC,EAAMhC,OAAQF,GAAK,EACjC2jF,EAAMlnF,OAAOmpM,aAAa/jL,SAAS3f,EAAMlC,GAAI0lM,IACxCH,GAAa5hH,KAChBgiH,EAAS,IAAMzjM,EAAMlC,EAAI,GAAK,IAC9B00D,EAAOivB,GAAOgiH,EACdjxI,EAAOixI,GAAUhiH,GAGrB,OAAOjvB,CACT,CACF,EACImxI,GAAgBJ,GAAoB,+rEAAwzE,IAC51EK,GAAY,SAAUhkM,EAAM6lC,GAC9B,OAAO7lC,EAAKwE,QAAQqhC,EAAOu9J,GAAmBC,IAAiB,SAAUxhH,GACvE,OAAO4hH,GAAa5hH,IAAQA,CAC9B,GACF,EAMIoiH,GAAgB,SAAUjkM,EAAM6lC,GAClC,OAAO7lC,EAAKwE,QAAQqhC,EAAOu9J,GAAmBC,IAAiB,SAAUxhH,GACvE,OAAIA,EAAIzjF,OAAS,EACR,MAAsC,MAA7ByjF,EAAImiC,WAAW,GAAK,QAAiBniC,EAAImiC,WAAW,GAAK,OAAS,OAAS,IAEtFy/E,GAAa5hH,IAAQ,KAAOA,EAAImiC,WAAW,GAAK,GACzD,GACF,EACIkgF,GAAc,SAAUlkM,EAAM6lC,EAAMs+J,GAEtC,OADAA,EAAWA,GAAYJ,GAChB/jM,EAAKwE,QAAQqhC,EAAOu9J,GAAmBC,IAAiB,SAAUxhH,GACvE,OAAO4hH,GAAa5hH,IAAQsiH,EAAStiH,IAAQA,CAC/C,GACF,EAoDIuiH,GAAW,CACbJ,UAAWA,GACXz8D,aAxEiB,SAAUvnI,GAC3B,OAAQ,GAAKA,GAAMwE,QAAQ8+L,IAAgB,SAAUzhH,GACnD,OAAO4hH,GAAa5hH,IAAQA,CAC9B,GACF,EAqEEoiH,cAAeA,GACfC,YAAaA,GACbG,cAxDkB,SAAU3pM,EAAMypM,GAClC,IAAIG,EAAcX,GAAoBQ,IAAaJ,GAkB/CQ,EAAUpB,GAAUzoM,EAAK8J,QAAQ,MAAO,MAC5C,OAAI+/L,EAAQC,OAASD,EAAQE,QAlBD,SAAUzkM,EAAM6lC,GAC1C,OAAO7lC,EAAKwE,QAAQqhC,EAAOu9J,GAAmBC,IAAiB,SAAUxhH,GACvE,YAA0BrlF,IAAtBinM,GAAa5hH,GACR4hH,GAAa5hH,QAEGrlF,IAArB8nM,EAAYziH,GACPyiH,EAAYziH,GAEjBA,EAAIzjF,OAAS,EACR,MAAsC,MAA7ByjF,EAAImiC,WAAW,GAAK,QAAiBniC,EAAImiC,WAAW,GAAK,OAAS,OAAS,IAEtF,KAAOniC,EAAImiC,WAAW,GAAK,GACpC,GACF,EAQIugF,EAAQC,MACNL,EARkB,SAAUnkM,EAAM6lC,GACtC,OAAOq+J,GAAYlkM,EAAM6lC,EAAMy+J,EACjC,EASSJ,GAELK,EAAQE,QACHR,GAEFD,EACT,EAwBEU,OAvBW,SAAU1kM,GACrB,OAAOA,EAAKwE,QAAQ++L,IAAc,SAAUttL,EAAKwuL,GAC/C,OAAIA,GAEAA,EADsC,MAApCA,EAAQpiH,OAAO,GAAG5gF,cACVse,SAAS0kL,EAAQ/qL,OAAO,GAAI,IAE5BqG,SAAS0kL,EAAS,KAEhB,OACZA,GAAW,MACJ9pM,OAAOmpM,aAAa,OAASW,GAAW,IAAK,OAAmB,KAAVA,KAExDjB,GAASiB,IAAY9pM,OAAOmpM,aAAaW,GAE3Cf,GAAgBztL,IAAQ8tL,GAAc9tL,IA/F9B,SAAUjW,GAC3B,IAAIuB,EAAM8Y,GAAqB,OAAOtW,IAEtC,OADAxC,EAAIkZ,UAAYza,EACTuB,EAAI8C,aAAe9C,EAAI6C,WAAapE,CAC7C,CA2FyD2kM,CAAa1uL,EACpE,GACF,GAUI2uL,GAAW,CAAC,EAAGC,GAAW,CAAC,EAC3BC,GAAYhrM,GAAMw7I,QAASyvD,GAASjrM,GAAM8C,KAAMooM,GAAWlrM,GAAM88L,OAAQqO,GAAYnrM,GAAM4wI,QAASw6D,GAAYprM,GAAMqJ,QACtHgiM,GAAU,SAAU/kM,EAAOs2L,GAE7B,OADAt2L,EAAQtG,GAAMyJ,KAAKnD,IACJA,EAAM4C,MAAM0zL,GAAS,KAAO,EAC7C,EACI0O,GAAY,SAAUC,EAAcC,GACtC,IAAInrM,EAAQ2qM,GAAUO,EAAc,IAAKP,GAAUO,EAAatxG,cAAe,MAC/E,OAAOixG,GAAS7qM,EAAOmrM,EACzB,EACIC,GAA2B,SAAU1gM,GACvC,OAAOugM,GAAU,oDAAqDvgM,EAAO2gM,uBAC/E,EA6OIC,GAAoB,SAAUtrM,EAAOqX,GACvC,IAAI+xB,EAUJ,OATIppC,IACFopC,EAAS,CAAC,EACW,iBAAVppC,IACTA,EAAQ,CAAE,IAAKA,IAEjB4qM,GAAO5qM,GAAO,SAAUA,EAAOgH,GAC7BoiC,EAAOpiC,GAAOoiC,EAAOpiC,EAAI4yF,eAA0B,QAATviF,EAAiBszL,GAAU3qM,EAAO,QAAU8qM,GAAU9qM,EAAO,OACzG,KAEKopC,CACT,EACImiK,GAAS,SAAUj+L,GACrB,IAAIrF,EAAW,CAAC,EACZwgB,EAAW,CAAC,EACZ+iL,EAAkB,GAClBC,EAAoB,CAAC,EAAGC,EAAkB,CAAC,EAC3CC,EAAoB,SAAU1vK,EAAQivK,EAAcC,GACtD,IAAInrM,EAAQsN,EAAS2uB,GAUrB,OATKj8B,EAOHA,EAAQ2qM,GAAU3qM,EAAO,OAAQ2qM,GAAU3qM,EAAM45F,cAAe,UANhE55F,EAAQyqM,GAASxuK,MAEfj8B,EAAQirM,GAAUC,EAAcC,GAChCV,GAASxuK,GAAUj8B,GAKhBA,CACT,EAEI4rM,EA5Qc,SAAU7rM,GAC5B,IACI8rM,EAAkBC,EAClBC,EAAiBC,EAAaC,EAAmBC,EAFjDxhM,EAAS,CAAC,EAGVrL,EAAM,SAAUkB,EAAM4oC,EAAY1gB,GACpC,IAAI0jL,EAAIC,EAAiBzzL,EACrB0zL,EAAa,SAAUrvL,EAAOjW,GAChC,IACIhD,EAAG0Y,EADHja,EAAM,CAAC,EAEX,IAAKuB,EAAI,EAAG0Y,EAAIO,EAAM/Y,OAAQF,EAAI0Y,EAAG1Y,IACnCvB,EAAIwa,EAAMjZ,IAAMgD,GAAO,CAAC,EAE1B,OAAOvE,CACT,EAEA2mC,EAAaA,GAAc,GACH,iBAFxB1gB,EAAWA,GAAY,MAGrBA,EAAWuiL,GAAQviL,IAErB,IAAIo1C,EAAQmtI,GAAQzqM,GAEpB,IADA4rM,EAAKtuI,EAAM55D,OACJkoM,KAKLxzL,EAAU,CACRwwB,WAAYkjK,EALdD,EAAkBpB,GAAQ,CACxBa,EACA1iK,GACA7/B,KAAK,OAGL8iM,gBAAiBA,EACjB3jL,SAAU4jL,EAAW5jL,EAAUiiL,KAEjChgM,EAAOmzD,EAAMsuI,IAAOxzL,CAExB,EACI2zL,EAAW,SAAU/rM,EAAM4oC,GAC7B,IAAIgjK,EAAII,EAAYxoM,EAAG0Y,EACnBohD,EAAQmtI,GAAQzqM,GACpB4rM,EAAKtuI,EAAM55D,OAEX,IADA,IAAI+K,EAAQg8L,GAAQ7hK,GACbgjK,KAEL,IADAI,EAAa7hM,EAAOmzD,EAAMsuI,IACrBpoM,EAAI,EAAG0Y,EAAIzN,EAAM/K,OAAQF,EAAI0Y,EAAG1Y,IACnCwoM,EAAWpjK,WAAWn6B,EAAMjL,IAAM,CAAC,EACnCwoM,EAAWH,gBAAgBzoM,KAAKqL,EAAMjL,GAG5C,EACA,OAAI0mM,GAAS1qM,GACJ0qM,GAAS1qM,IAElB8rM,EAAmB,wDACnBC,EAAe,sFACfC,EAAkB,wLACL,UAAThsM,IACF8rM,GAAoB,8EACpBC,GAAgB,6EAChBC,GAAmB,oGAER,iBAAThsM,IACF8rM,GAAoB,YAEpBE,EAAkB,CAChBA,EAFFG,EAAuB,8CAIrB5iM,KAAK,KACPshM,GAAOI,GAAQkB,IAAuB,SAAU3rM,GAC9ClB,EAAIkB,EAAM,GAAIwrM,EAChB,IAEAD,EAAe,CACbA,EAFFG,EAAoB,+BAIlB3iM,KAAK,KACP0iM,EAAc,CACZF,EACAC,GACAziM,KAAK,KACPshM,GAAOI,GAAQiB,IAAoB,SAAU1rM,GAC3ClB,EAAIkB,EAAM,GAAIyrM,EAChB,KAEFA,EAAcA,GAAe,CAC3BF,EACAC,GACAziM,KAAK,KACPjK,EAAI,OAAQ,WAAY,aACxBA,EAAI,OAAQ,GAAI,sDAChBA,EAAI,wBACJA,EAAI,OAAQ,eACZA,EAAI,OAAQ,+CACZA,EAAI,OAAQ,mCACZA,EAAI,QAAS,qBACbA,EAAI,SAAU,gCACdA,EAAI,OAAQ,0LAAqM2sM,GACjN3sM,EAAI,4BAA6B,GAAI2sM,GACrC3sM,EAAI,0GAA2G,GAAI0sM,GACnH1sM,EAAI,aAAc,OAAQ2sM,GAC1B3sM,EAAI,KAAM,sBAAuB,MACjCA,EAAI,KAAM,GAAI,MACdA,EAAI,KAAM,QAAS2sM,GACnB3sM,EAAI,KAAM,GAAI,SACdA,EAAI,IAAK,sCAAuC0sM,GAChD1sM,EAAI,IAAK,OAAQ0sM,GACjB1sM,EAAI,UAAW,gBAAiB2sM,GAChC3sM,EAAI,MAAO,kDACXA,EAAI,SAAU,wBAAyB2sM,GACvC3sM,EAAI,QAAS,yBACbA,EAAI,SAAU,wDAAyD,CACrE2sM,EACA,SACA1iM,KAAK,MACPjK,EAAI,QAAS,cACbA,EAAI,MAAO,OAAQ,CACjB2sM,EACA,QACA1iM,KAAK,MACPjK,EAAI,OAAQ,wDACZA,EAAI,QAAS,SAAU,yCAAoD,UAATU,EAAmB,OAAS,KAC9FV,EAAI,WAAY,OAAQ,OACxBA,EAAI,MAAO,QACXA,EAAI,oBAAqB,GAAI,MAC7BA,EAAI,KAAM,GAAI,SACdA,EAAI,KAAM,0BAA2B2sM,GACrC3sM,EAAI,KAAM,qCAAsC2sM,GAChD3sM,EAAI,OAAQ,2EAA4E2sM,GACxF3sM,EAAI,WAAY,qBAAsB,CACpC2sM,EACA,UACA1iM,KAAK,MACPjK,EAAI,QAAS,WAAY0sM,GACzB1sM,EAAI,QAAS,0NACbA,EAAI,SAAU,4FAAsG,UAATU,EAAmBisM,EAAcD,GAC5I1sM,EAAI,SAAU,4CAA6C,mBAC3DA,EAAI,WAAY,iBAAkB,UAClCA,EAAI,SAAU,iCACdA,EAAI,WAAY,yEAChBA,EAAI,OAAQ,aAAc,CACxB2sM,EACA,MACA1iM,KAAK,MACPjK,EAAI,WAAY,GAAI2sM,GACP,UAATjsM,IACFV,EAAI,OACJA,EAAI,OAAQ,GAAI,CACd0sM,EACA,SACAziM,KAAK,MACPjK,EAAI,aAAc,GAAI2sM,GACtB3sM,EAAI,yBAA0B,GAAI0sM,GAClC1sM,EAAI,SAAU,eAAgB2sM,GAC9B3sM,EAAI,QAAS,+FAAqG,CAChH2sM,EACA,gBACA1iM,KAAK,MACPjK,EAAI,QAAS,kFAAwF,CACnG2sM,EACA,gBACA1iM,KAAK,MACPjK,EAAI,UAAW,GAAI,cACnBA,EAAI,SAAU,+BACdA,EAAI,QAAS,kCACbA,EAAI,WAAY,GAAI,CAClB0sM,EACA,UACAziM,KAAK,MACPjK,EAAI,+CAAgD,GAAI2sM,GACxD3sM,EAAI,SAAU,GAAI,qBAClBA,EAAI,SAAU,GAAI,CAChB2sM,EACA,cACA1iM,KAAK,MACPjK,EAAI,OAAQ,WAAY0sM,GACxB1sM,EAAI,SAAU,OAAQ2sM,GACtB3sM,EAAI,UAAW,uDACfA,EAAI,SAAU,gBAAiB0sM,GAC/B1sM,EAAI,WAAY,YAAa0sM,GAC7B1sM,EAAI,QAAS,iCAAkC0sM,GAC/C1sM,EAAI,UAAW,OAAQ,CACrB2sM,EACA,WACA1iM,KAAK,MACPjK,EAAI,SAAU,mDAEH,iBAATU,IACFusM,EAAS,SAAU,sBACnBA,EAAS,QAAS,aAClBA,EAAS,SAAU,qFACnBA,EAAS,QAAS,4BAClBA,EAAS,QAAS,kBAClBA,EAAS,IAAK,iCACdA,EAAS,KAAM,SACfA,EAAS,SAAU,0EACnBA,EAAS,MAAO,4CAChBA,EAAS,SAAU,iEACnBA,EAAS,gBAAiB,mBAC1BA,EAAS,QAAS,gBAClBA,EAAS,UACTA,EAAS,YACTA,EAAS,yCAA0C,SACnDA,EAAS,KAAM,gBACfA,EAAS,KAAM,QACfA,EAAS,iBAAkB,WAC3BA,EAAS,MAAO,mBAChBA,EAAS,KAAM,4BACfA,EAAS,UAAW,UACpBA,EAAS,QAAS,mEAClBA,EAAS,MAAO,mCAChBA,EAAS,WAAY,mCACrBA,EAAS,QAAS,6BAClBA,EAAS,KAAM,qCACfA,EAAS,KAAM,8DACfA,EAAS,OAAQ,UACjBA,EAAS,KAAM,yEACfA,EAAS,QAAS,6BAClBA,EAAS,QAAS,6BAClBA,EAAS,OAAQ,UACjBA,EAAS,OAAQ,6CAEN,UAATvsM,IACFusM,EAAS,+BAAgC,aACzCA,EAAS,iBAAkB,eAC3BA,EAAS,IAAK,YACdA,EAAS,kBAAmB,eAC5BA,EAAS,MAAO,WAChBA,EAAS,SAAU,6CAErB1B,GAAOI,GAAQ,8BAA8B,SAAUzqM,GACjDmK,EAAOnK,WACFmK,EAAOnK,GAAMkoB,SAASloB,EAEjC,WACOmK,EAAO8hM,QAAQ/jL,SAAS4rH,aACxB3pI,EAAO+hM,OACdhC,GAAS1qM,GAAQ2K,EACVA,EACT,CAiCoBgiM,EADlBp/L,EAAWA,GAAY,CAAC,GACiB5C,SACZ,IAAzB4C,EAASq/L,cACXr/L,EAASs/L,eAAiB,QAE5B,IAAIC,EAAcvB,GAAkBh+L,EAASw/L,cACzCC,EAAgBzB,GAAkBh+L,EAAS0/L,eAAgB,OAC3DC,EAAe3B,GAAkBh+L,EAAS4/L,cAAe,OACzDC,EAAwBxB,EAAkB,sBAAuB,qEACjEyB,EAAyBzB,EAAkB,wBAAyB,mDACpE0B,EAAwB1B,EAAkB,uBAAwB,+FAClE2B,EAAc3B,EAAkB,qBAAsB,iIACtD4B,EAAmC,8CACnCC,EAAsB7B,EAAkB,qBAAsB4B,EAAmC,OAAQF,GACzGI,EAAoC9B,EAAkB,sCAAuC4B,EAAmC,SAAUF,GAC1IK,EAAuB/B,EAAkB,sBAAuB,sIAChEgC,EAAmBhC,EAAkB,iBAAkB,iJAA4J+B,GACnNE,EAAwBjC,EAAkB,uBAAwB,4EACtEf,IAAQt9L,EAASkmE,SAAW,oEAAoE3qE,MAAM,MAAM,SAAUtI,GACpHmrM,EAAgBnrM,GAAQ,IAAI63F,OAAO,KAAO73F,EAAO,SAAU,KAC7D,IACA,IAAIstM,EAAkB,SAAUvuL,GAC9B,OAAO,IAAI84E,OAAO,IAAM94E,EAAIjV,QAAQ,WAAY,OAAS,IAC3D,EACIyjM,EAAmB,SAAUC,GAC/B,IAAIC,EAAIz/K,EAAI0/K,EAAIC,EAAI9oL,EAASzM,EAAS+yB,EAAMyiK,EAAUC,EAAanP,EAAUoP,EAAUllK,EAAYijK,EAAiBvmK,EAAQyoK,EAAYzC,EAAkB0C,EAAuBvuM,EAC7KwuM,EAAoB,6DAA8DC,EAAiB,oDAAqDC,EAAoB,QAChL,GAAIX,EAAe,CACjB,IAAIY,EAAmB3D,GAAQ+C,EAAe,KAK9C,IAJI9lM,EAAS,OACX4jM,EAAmB5jM,EAAS,KAAKkhC,WACjColK,EAAwBtmM,EAAS,KAAKmkM,iBAEnC4B,EAAK,EAAGz/K,EAAKogL,EAAiB1qM,OAAQ+pM,EAAKz/K,EAAIy/K,IAElD,GADA5oL,EAAUopL,EAAkBnzG,KAAKszG,EAAiBX,IACrC,CA0BX,GAzBAnoK,EAASzgB,EAAQ,GACjBgpL,EAAchpL,EAAQ,GACtBkpL,EAAalpL,EAAQ,GACrB+oL,EAAW/oL,EAAQ,GAGnBzM,EAAU,CACRwwB,WAHFA,EAAa,CAAC,EAIZijK,gBAHFA,EAAkB,IAKH,MAAXvmK,IACFltB,EAAQi2L,WAAY,GAEP,MAAX/oK,IACFltB,EAAQk2L,aAAc,GAEL,MAAfzpL,EAAQ,KACVzM,EAAQm2L,kBAAmB,GAEzBjD,IACF5R,GAAO4R,GAAkB,SAAU7rM,EAAOgH,GACxCmiC,EAAWniC,GAAOhH,CACpB,IACAosM,EAAgBzoM,KAAKO,MAAMkoM,EAAiBmC,IAE1CJ,EAEF,IAAKF,EAAK,EAAGC,GADbC,EAAWnD,GAAQmD,EAAU,MACFlqM,OAAQgqM,EAAKC,EAAID,IAE1C,GADA7oL,EAAUqpL,EAAepzG,KAAK8yG,EAASF,IAC1B,CAWX,GAVAviK,EAAO,CAAC,EACR2iK,EAAWjpL,EAAQ,GACnB65K,EAAW75K,EAAQ,GAAG/a,QAAQ,UAAW,KACzCw7B,EAASzgB,EAAQ,GACjBplB,EAAQolB,EAAQ,GACC,MAAbipL,IACF11L,EAAQo2L,mBAAqBp2L,EAAQo2L,oBAAsB,GAC3Dp2L,EAAQo2L,mBAAmBprM,KAAKs7L,GAChCvzJ,EAAKoI,UAAW,GAED,MAAbu6J,EAAkB,QACbllK,EAAW81J,GAClBmN,EAAgBjvG,OAAO4tG,GAAUqB,EAAiBnN,GAAW,GAC7D,QACF,CACIp5J,IACa,MAAXA,IACFltB,EAAQq2L,kBAAoBr2L,EAAQq2L,mBAAqB,GACzDr2L,EAAQq2L,kBAAkBrrM,KAAK,CAC7BpD,KAAM0+L,EACNj/L,MAAOA,IAET0rC,EAAKw/J,aAAelrM,GAEP,MAAX6lC,IACFltB,EAAQs2L,iBAAmBt2L,EAAQs2L,kBAAoB,GACvDt2L,EAAQs2L,iBAAiBtrM,KAAK,CAC5BpD,KAAM0+L,EACNj/L,MAAOA,IAET0rC,EAAKwjK,YAAclvM,GAEN,MAAX6lC,IACF6F,EAAKyjK,YAAcxE,GAAU3qM,EAAO,OAGpC0uM,EAAkBpmM,KAAK22L,IACzBtmL,EAAQy2L,kBAAoBz2L,EAAQy2L,mBAAqB,GACzD1jK,EAAKggI,QAAUmiC,EAAgB5O,GAC/BtmL,EAAQy2L,kBAAkBzrM,KAAK+nC,KAE1BvC,EAAW81J,IACdmN,EAAgBzoM,KAAKs7L,GAEvB91J,EAAW81J,GAAYvzJ,EAE3B,CAGCmgK,GAAoC,MAAhBuC,IACvBvC,EAAmB1iK,EACnBolK,EAAwBnC,GAEtBkC,IACF31L,EAAQ21L,WAAaF,EACrBnmM,EAASqmM,GAAc31L,GAErB+1L,EAAkBpmM,KAAK8lM,IACzBz1L,EAAQ+yJ,QAAUmiC,EAAgBO,GAClC5C,EAAgB7nM,KAAKgV,IAErB1Q,EAASmmM,GAAez1L,CAE5B,CAEJ,CACF,EACI02L,EAAmB,SAAUtB,GAC/B9lM,EAAW,CAAC,EACZujM,EAAkB,GAClBsC,EAAiBC,GACjBnD,GAAOgB,GAAa,SAAUjzL,EAASpY,GACrCkoB,EAASloB,GAAQoY,EAAQ8P,QAC3B,GACF,EACI6mL,EAAoB,SAAUC,GAChC,IAAIC,EAAsB,aACtBD,IACF9E,GAASgF,oBAAsBhF,GAASiF,eAAiB,KACzD9E,GAAOI,GAAQuE,EAAgB,MAAM,SAAU5oI,GAC7C,IAAIvhD,EAAUoqL,EAAoBn0G,KAAK10B,GAAOqsB,EAAwB,MAAf5tE,EAAQ,GAAYuqL,EAAY38G,EAAS,OAAS,MAAOzyF,EAAO6kB,EAAQ,GAO/H,GANAqD,EAASloB,GAAQkoB,EAASknL,GAC1BlE,EAAkBlrM,GAAQovM,EACrB38G,IACH26G,EAAiBptM,EAAKq5F,eAAiB,CAAC,EACxC+zG,EAAiBptM,GAAQ,CAAC,IAEvB0H,EAAS1H,GAAO,CACnB,IAAIqvM,EAAa3nM,EAAS0nM,UAC1BC,EAAa/E,GAAS,CAAC,EAAG+E,IACRd,wBACXc,EAAWf,YAClB5mM,EAAS1H,GAAQqvM,CACnB,CACAhF,GAAOniL,GAAU,SAAU9P,EAASk3L,GAC9Bl3L,EAAQg3L,KACVlnL,EAASonL,GAAWl3L,EAAUkyL,GAAS,CAAC,EAAGpiL,EAASonL,IACpDl3L,EAAQpY,GAAQoY,EAAQg3L,GAE5B,GACF,IAEJ,EACIG,EAAmB,SAAUC,GAC/B,IAAIC,EAAkB,+LACtBvF,GAASn9L,EAAS5C,QAAU,KACxBqlM,GACFnF,GAAOI,GAAQ+E,EAAe,MAAM,SAAUppI,GAC5C,IACIp+C,EAAQsd,EADRzgB,EAAU4qL,EAAgB30G,KAAK10B,GAE/BvhD,IACFygB,EAASzgB,EAAQ,GAEfmD,EADEsd,EACOpd,EAASrD,EAAQ,IAEjBqD,EAASrD,EAAQ,IAAM,CAAE,WAAY,CAAC,GAEjDmD,EAASE,EAASrD,EAAQ,IAC1BwlL,GAAOI,GAAQ5lL,EAAQ,GAAI,MAAM,SAAU+qB,GAC1B,MAAXtK,SACKtd,EAAO4nB,GAEd5nB,EAAO4nB,GAAS,CAAC,CAErB,IAEJ,GAEJ,EACI8/J,EAAiB,SAAU1vM,GAC7B,IAA8BwD,EAA1B4U,EAAU1Q,EAAS1H,GACvB,GAAIoY,EACF,OAAOA,EAGT,IADA5U,EAAIynM,EAAgBvnM,OACbF,KAEL,IADA4U,EAAU6yL,EAAgBznM,IACd2nK,QAAQpjK,KAAK/H,GACvB,OAAOoY,CAGb,EACKrL,EAASs/L,eAkCZyC,EAAiB/hM,EAASs/L,iBAjC1BhC,GAAOgB,GAAa,SAAUjzL,EAASpY,GACrC0H,EAAS1H,GAAQ,CACf4oC,WAAYxwB,EAAQwwB,WACpBijK,gBAAiBzzL,EAAQyzL,iBAE3B3jL,EAASloB,GAAQoY,EAAQ8P,QAC3B,IACwB,UAApBnb,EAAS5C,QACXkgM,GAAOI,GAAQ,kBAAkB,SAAUxlM,GACzC,IAAIS,EAAQ+kM,GAAQxlM,EAAM,KAC1ByC,EAAShC,EAAM,IAAIqoM,WAAaroM,EAAM,EACxC,IAEF2kM,GAAOgD,GAAuB,SAAUsC,EAAM3vM,GACxC0H,EAAS1H,KACP+M,EAAS6iM,mCACXloM,EAAS1H,GAAM6vM,kBAAmB,GAEpCnoM,EAAS1H,GAAMsuM,aAAc,EAEjC,IACAjE,GAAOI,GAAQ,mCAAmC,SAAUzqM,GACtD0H,EAAS1H,KACX0H,EAAS1H,GAAMsuM,aAAc,EAEjC,IACAjE,GAAOI,GAAQ,yDAAyD,SAAUzqM,GAChF0H,EAAS1H,GAAMquM,WAAY,CAC7B,IACAhE,GAAOI,GAAQ,SAAS,SAAUzqM,GAChC0H,EAAS1H,GAAMuuM,kBAAmB,CACpC,KAIFQ,EAAkBhiM,EAAS+iM,iBAC3BP,EAAiBxiM,EAASgjM,gBAC1BxC,EAAiBxgM,EAASijM,yBAC1BT,EAAiB,yBACjBlF,GAAO,CACL4F,GAAI,KACJC,GAAI,KACJC,GAAI,QACJl2B,GAAI,KACJm2B,GAAI,KACJC,GAAI,oBACJC,MAAO,QACPC,MAAO,QACPC,MAAO,QACPC,OAAQ,WACRC,KAAM,MACNC,MAAO,uBACN,SAAUv5L,EAASnS,GAChByC,EAASzC,KACXyC,EAASzC,GAAM2rM,gBAAkBnG,GAAQrzL,GAE7C,IACIrK,EAAS8jM,kBACXxG,GAAOE,GAAUx9L,EAAS8jM,mBAAmB,SAAU5rM,GACjDyC,EAASzC,WACJyC,EAASzC,EAEpB,IAEGyqM,EAAe,SAClBnC,EAAiB,0BAEnB,IAAIuD,EAAiBpwM,EAAS4rM,GAC1ByE,EAAmBrwM,EAAS8rM,GAC5BwE,EAAkBtwM,EAASgsM,GAC3BuE,EAAevwM,EAASqsM,GACxBmE,EAAmBxwM,EAAS0sM,GAC5BtC,EAAuBpqM,EAASysM,GAChC/iM,EAAwB1J,EAAS2sM,GACjC8D,EAAwBzwM,EAASosM,GACjCsE,EAAyB1wM,EAASmsM,GAClCwE,EAAsB3wM,EAASusM,GAC/BqE,EAAoC5wM,EAASwsM,GAC7CqE,EAAwB7wM,EAASksM,GACjC4E,EAAqB9wM,EAASyqM,GA4B9BsG,EAAoB/wM,EAASwqM,GACjC,MAAO,CACLhjL,SAAUA,EACVxgB,SAAUA,EACVopM,eAAgBA,EAChBE,gBAAiBA,EACjBE,iBAAkBA,EAClBH,iBAAkBA,EAClBI,sBAAuBA,EACvBrG,qBAAsBA,EACtB1gM,sBAAuBA,EACvB6mM,aAAcA,EACdvB,eAAgBA,EAChB0B,uBAAwBA,EACxBC,oBAAqBA,EACrBC,kCAAmCA,EACnCC,sBAAuBA,EACvBC,mBAAoBA,EACpBE,aA7CiB,SAAU1xM,EAAM4vC,GACjC,IAAI5nB,EAASE,EAASloB,EAAK+G,eAC3B,SAAUihB,IAAUA,EAAO4nB,EAAM7oC,eACnC,EA2CE04F,QA1CY,SAAUz/F,EAAMmrC,GAC5B,IAAIwmK,EAAcnuM,EACd4iE,EAAOspI,EAAe1vM,GAC1B,GAAIomE,EAAM,CACR,IAAIj7B,EAcF,OAAO,EAbP,GAAIi7B,EAAKx9B,WAAWuC,GAClB,OAAO,EAGT,GADAwmK,EAAevrI,EAAKyoI,kBAGlB,IADArrM,EAAImuM,EAAajuM,OACVF,KACL,GAAImuM,EAAanuM,GAAG2nK,QAAQpjK,KAAK/H,GAC/B,OAAO,CAOjB,CACA,OAAO,CACT,EAqBEyxM,kBAAmBA,EACnBlE,iBAAkBA,EAClBuB,iBAAkBA,EAClBC,kBAAmBA,EACnBQ,iBAAkBA,EAEtB,EAEIj2G,GAAQ,SAAUpyE,EAAO3jB,EAAG05D,EAAGr8D,GACjC,IAAIo4F,EAAM,SAAUxwF,GAElB,OADAA,EAAM6c,SAAS7c,EAAK,IAAIhG,SAAS,KACtBkB,OAAS,EAAI8E,EAAM,IAAMA,CACtC,EACA,MAAO,IAAMwwF,EAAIz1F,GAAKy1F,EAAI/7B,GAAK+7B,EAAIp4F,EACrC,EACIgxM,GAAS,SAAU7kM,EAAU5C,GAC/B,IAKI3G,EAEA8oM,EACAE,EARAqF,EAAQxrM,KACRyrM,EAAY,2DACZC,EAAiB,+HACjBC,EAAc,2BACdC,EAAkB,OAElBC,EAAiB,CAAC,EAItBnlM,EAAWA,GAAY,CAAC,EACpB5C,IACFmiM,EAAcniM,EAAO2mM,iBACrBtE,EAAgBriM,EAAO4mM,oBAEzB,IAAIoB,EAAgB,8BAA0C7pM,MAAM,KACpE,IAAK9E,EAAI,EAAGA,EAAI2uM,EAAczuM,OAAQF,IACpC0uM,EAAeC,EAAc3uM,IAllCjB,SAklCuCA,EACnD0uM,EAnlCY,SAmlCmB1uM,GAAK2uM,EAAc3uM,GAEpD,MAAO,CACL81F,MAAO,SAAUpO,GACf,OAAOA,EAAMphF,QAAQgoM,EAAWx4G,GAClC,EACArnF,MAAO,SAAUuY,GACf,IACI3F,EAAS7kB,EAAMP,EAAO2yM,EAwDQ9xM,EAAGM,EAAGupC,EAzDpCtB,EAAS,CAAC,EAEVwpK,EAAetlM,EAASulM,cACxBC,EAAoBxlM,EAASylM,qBAAuBX,EACpDY,EAAW,SAAUntK,EAAQlmB,EAAQszL,GACvC,IAAIlmL,EAAMqc,EAAOvD,EAAS,OAASlmB,GACnC,GAAKoN,EAAL,CAGA,IAAIiE,EAAQoY,EAAOvD,EAAS,SAAWlmB,GACvC,GAAKqR,EAAL,CAGA,IAAIC,EAASmY,EAAOvD,EAAS,UAAYlmB,GACzC,GAAKsR,EAAL,CAGA,IAAIxsB,EAAO2kC,EAAOvD,EAAS,QAAUlmB,GACrC,GAAKlb,EAAL,CAGA,IAAIspB,EAAM,CACRhB,EACAiE,EACAC,EACAxsB,GAGF,IADAV,EAAIgqB,EAAI9pB,OAAS,EACVF,KACDgqB,EAAIhqB,KAAOgqB,EAAIhqB,EAAI,KAIrBA,GAAK,GAAKkvM,IAGd7pK,EAAOvD,EAASlmB,IAAiB,IAAP5b,EAAWgqB,EAAI,GAAKA,EAAIzkB,KAAK,YAChD8/B,EAAOvD,EAAS,OAASlmB,UACzBypB,EAAOvD,EAAS,SAAWlmB,UAC3BypB,EAAOvD,EAAS,UAAYlmB,UAC5BypB,EAAOvD,EAAS,QAAUlmB,GApBjC,CAJA,CAJA,CAJA,CAiCF,EACIuzL,EAAc,SAAUlsM,GAC1B,IAAyBjD,EAArB/D,EAAQopC,EAAOpiC,GACnB,GAAKhH,EAAL,CAKA,IADA+D,GADA/D,EAAQA,EAAM6I,MAAM,MACV5E,OACHF,KACL,GAAI/D,EAAM+D,KAAO/D,EAAM,GACrB,OAAO,EAIX,OADAopC,EAAOpiC,GAAOhH,EAAM,IACb,CATP,CAUF,EAgBIsM,EAAS,SAAUgT,GAErB,OADAqzL,GAAY,EACLF,EAAenzL,EACxB,EACIirL,EAAS,SAAUjrL,EAAK6zL,GAS1B,OARIR,IACFrzL,EAAMA,EAAIjV,QAAQ,gBAAgB,SAAUiV,GAC1C,OAAOmzL,EAAenzL,EACxB,KAEG6zL,IACH7zL,EAAMA,EAAIjV,QAAQ,gBAAiB,OAE9BiV,CACT,EACI8zL,EAA0B,SAAUC,GACtC,OAAO7yM,OAAOmpM,aAAa/jL,SAASytL,EAAO32L,MAAM,GAAI,IACvD,EACI42L,EAAqB,SAAUtzM,GACjC,OAAOA,EAAMqK,QAAQ,gBAAiB+oM,EACxC,EACIG,EAAa,SAAU9rL,EAAOpf,EAAKmrM,EAAMC,EAAMn0L,EAAKo0L,GAEtD,GADAp0L,EAAMA,GAAOo0L,EAGX,MAAO,KADPp0L,EAAMirL,EAAOjrL,IACKjV,QAAQ,MAAO,OAAU,IAG7C,GADAhC,EAAMkiM,EAAOliM,GAAOmrM,GAAQC,IACvBnmM,EAASqmM,kBAAmB,CAC/B,IAAI5/D,EAAY1rI,EAAIgC,QAAQ,aAAc,IAC1C,GAAI,oBAAoB/B,KAAKyrI,GAC3B,MAAO,GAET,IAAKzmI,EAASsmM,qBAAuB,oBAAoBtrM,KAAKyrI,GAC5D,MAAO,EAEX,CAIA,OAHI6+D,IACFvqM,EAAMuqM,EAAarzM,KAAKuzM,EAAmBzqM,EAAK,UAE3C,QAAWA,EAAIgC,QAAQ,MAAO,OAAU,IACjD,EACA,GAAI0gB,EAAK,CAKP,IAHAA,GADAA,EAAMA,EAAI1gB,QAAQ,mBAAoB,KAC5BA,QAAQ,oBAAqBiC,GAAQjC,QAAQ,0BAA0B,SAAUiV,GACzF,OAAOA,EAAIjV,QAAQ,QAASiC,EAC9B,IACO8Y,EAAUmtL,EAAYl3G,KAAKtwE,IAIhC,GAHAwnL,EAAYsB,UAAYzuL,EAAQuD,MAAQvD,EAAQ,GAAGnhB,OACnD1D,EAAO6kB,EAAQ,GAAG/a,QAAQmoM,EAAiB,IAAIlrM,cAC/CtH,EAAQolB,EAAQ,GAAG/a,QAAQmoM,EAAiB,IACxCjyM,GAAQP,EAAO,CAGjB,GAFAO,EAAO+yM,EAAmB/yM,GAC1BP,EAAQszM,EAAmBtzM,IACU,IAAjCO,EAAKkD,QAxtCL,YAwtC6D,IAAvBlD,EAAKkD,QAAQ,KACrD,SAEF,IAAK6J,EAASqmM,oBAA+B,aAATpzM,GAAuB,4BAA4B+H,KAAKtI,IAC1F,SAEW,gBAATO,GAAoC,QAAVP,EAC5BA,EAAQ,OACU,UAATO,GAA6B,qBAATA,IAC7BP,EAAQA,EAAMsH,eAGhBtH,GADAA,EAAQA,EAAMqK,QAAQgoM,EAAWx4G,KACnBxvF,QAAQioM,EAAgBiB,GACtCnqK,EAAO7oC,GAAQoyM,EAAYpI,EAAOvqM,GAAO,GAAQA,CACnD,CAEFgzM,EAAS,SAAU,IAAI,GACvBA,EAAS,SAAU,UACnBA,EAAS,SAAU,UACnBA,EAAS,SAAU,UACnBA,EAAS,UAAW,IACpBA,EAAS,SAAU,IACT,SA3FyB7xM,EA2FC,eA3FEupC,EA2Fc,eA1F/CwoK,EAD2BryM,EA2FZ,iBAvFfqyM,EAAY/xM,IAGZ+xM,EAAYxoK,KAGjBtB,EAAa,OAAIA,EAAOvoC,GAAK,IAAMuoC,EAAOjoC,GAAK,IAAMioC,EAAOsB,UACrDtB,EAAOvoC,UACPuoC,EAAOjoC,UACPioC,EAAOsB,IA+EQ,gBAAlBtB,EAAOk3I,eACFl3I,EAAOk3I,OAEe,SAA3Bl3I,EAAO,wBACFA,EAAO,eAElB,CACA,OAAOA,CACT,EACA0qK,UAAW,SAAU1qK,EAAQglK,GAC3B,IAAIrjL,EAAM,GACNgpL,EAAkB,SAAUxzM,GAC9B,IAAIP,EACAg0M,EAAYnH,EAAYtsM,GAC5B,GAAIyzM,EACF,IAAK,IAAIC,EAAM,EAAGx3L,EAAIu3L,EAAU/vM,OAAQgwM,EAAMx3L,EAAGw3L,IAC/C1zM,EAAOyzM,EAAUC,IACjBj0M,EAAQopC,EAAO7oC,MAEbwqB,IAAQA,EAAI9mB,OAAS,EAAI,IAAM,IAAM1D,EAAO,KAAOP,EAAQ,IAInE,EAmBA,OAVIouM,GAAevB,GACjBkH,EAAgB,KAChBA,EAAgB3F,IAEhBnU,GAAO7wJ,GAAQ,SAAUppC,EAAOO,IAC1BP,GAAW+sM,IAbL,SAAUxsM,EAAM6tM,GAC5B,IAAI8F,EAAWnH,EAAc,KAC7B,QAAImH,GAAYA,EAAS3zM,KAGzB2zM,EAAWnH,EAAcqB,KACJ8F,EAAS3zM,GAChC,CAMoCy/F,CAAQz/F,EAAM6tM,KAC5CrjL,IAAQA,EAAI9mB,OAAS,EAAI,IAAM,IAAM1D,EAAO,KAAOP,EAAQ,IAE/D,IAEK+qB,CACT,EAEJ,EAEIopL,GAAa,CACfC,aAAa,EACbC,QAAQ,EACRC,QAAQ,EACRC,aAAa,EACbC,iBAAiB,EACjBC,iBAAiB,EACjBC,eAAe,EACfC,aAAa,GAEXC,GAAgB,SAAUtmL,GAC5B,OAAOA,aAAiBumL,OAAS9zM,EAAWutB,EAAMwmL,UACpD,EAqBIC,GAAc,SAAUh1M,EAAMi1M,EAAeC,EAAgBhqM,GAC/D,IAAIqK,EACAgZ,EAhBQ,SAAU0mL,EAAe/pM,GACrC,IAAIqjB,EAAQrjB,QAAmCA,EAAO,CAAC,EACvD,IAAK,IAAIkiK,KAAU6nC,EACZj2L,GAAMo1L,GAAYhnC,KACrB7+I,EAAM6+I,GAAU6nC,EAAc7nC,IAQlC,OALInyJ,EAAcsT,EAAMK,gBACtBL,EAAMK,aAAe,WACnB,OAAOqmL,EAAcrmL,cACvB,GAEKL,CACT,CAGc4mL,CAAQF,EAAe/pM,GAkCnC,OAjCAqjB,EAAMvuB,KAAOA,EACTgb,EAAWuT,EAAMjjB,UACnBijB,EAAMjjB,OAAqC,QAA3BiK,EAAKgZ,EAAM6mL,kBAA+B,IAAP7/L,EAAgBA,EAAK2/L,GAtBrD,SAAU3mL,GAC/B,OAAOvT,EAAWuT,EAAM1U,iBAAmBg7L,GAActmL,EAC3D,CAsBM8mL,CAAiBJ,KACnB1mL,EAAM1U,eAAiB,WACrB0U,EAAM+mL,kBAAmB,EACzB/mL,EAAMsvJ,mBAAqBv8K,EACvBN,EAAWi0M,EAAcp7L,gBAC3Bo7L,EAAcp7L,iBACLg7L,GAAcI,KACvBA,EAAcT,aAAc,EAEhC,EACAjmL,EAAMQ,gBAAkB,WACtBR,EAAMgnL,cAAe,EACrBhnL,EAAMuvJ,qBAAuBx8K,EACzBN,EAAWi0M,EAAclmL,iBAC3BkmL,EAAclmL,kBACL8lL,GAAcI,KACvBA,EAAcM,cAAe,EAEjC,EACAhnL,EAAMy4E,yBAA2B,WAC/Bz4E,EAAMinL,8BAAgCl0M,EACtCitB,EAAMQ,iBACR,EAjDwB,SAAUR,GACpC,OAAOA,EAAMsvJ,qBAAuBv8K,GAAUitB,EAAMsvJ,qBAAuBx8K,CAC7E,CAgDSo0M,CAAsBlnL,KACzBA,EAAMsvJ,oBAAgD,IAA3BtvJ,EAAM+mL,iBAA4Bh0M,EAASD,EACtEktB,EAAMuvJ,sBAA8C,IAAvBvvJ,EAAMgnL,aAAwBj0M,EAASD,EACpEktB,EAAMinL,8BAAgCn0M,IAGnCktB,CACT,EAGImnL,GAAe,+BACfC,GAAW,SAAUrqM,EAAQ9K,EAAM6R,EAAUqvC,GAC3Cp2C,EAAOokB,iBACTpkB,EAAOokB,iBAAiBlvB,EAAM6R,EAAUqvC,IAAW,GAC1Cp2C,EAAOsqM,aAChBtqM,EAAOsqM,YAAY,KAAOp1M,EAAM6R,EAEpC,EACIwjM,GAAc,SAAUvqM,EAAQ9K,EAAM6R,EAAUqvC,GAC9Cp2C,EAAOskB,oBACTtkB,EAAOskB,oBAAoBpvB,EAAM6R,EAAUqvC,IAAW,GAC7Cp2C,EAAOwqM,aAChBxqM,EAAOwqM,YAAY,KAAOt1M,EAAM6R,EAEpC,EAII0jM,GAAM,SAAUd,EAAe/pM,GACjC,IAAIqjB,EAAQymL,GAAYC,EAAcj1M,KAAMi1M,EAAe7+L,SAAUlL,GACrE,GALiB,SAAUqjB,GAC3B,OAAOtT,EAAcsT,IAAUmnL,GAAantM,KAAKgmB,EAAMvuB,KACzD,CAGMg2M,CAAaf,IAAkBl6L,EAAYk6L,EAAcllC,SAAWh1J,EAAYk6L,EAAc9lL,SAAU,CAC1G,IAAI8mL,EAAW1nL,EAAMjjB,OAAO6c,eAAiB/R,SACzC0T,EAAMmsL,EAAS3tL,gBACfnT,EAAO8gM,EAAS9gM,KAChBqjG,EAAajqF,EACjBiqF,EAAWu3D,MAAQklC,EAAc9lL,SAAWrF,GAAOA,EAAI6D,YAAcxY,GAAQA,EAAKwY,YAAc,IAAM7D,GAAOA,EAAIgE,YAAc3Y,GAAQA,EAAK2Y,YAAc,GAC1J0qF,EAAWw3D,MAAQilC,EAAc7lL,SAAWtF,GAAOA,EAAI2D,WAAatY,GAAQA,EAAKsY,WAAa,IAAM3D,GAAOA,EAAI+D,WAAa1Y,GAAQA,EAAK0Y,WAAa,EACxJ,CAIA,OAHI9S,EAAYwT,EAAMrU,WACpBqU,EAAMrU,SAAU,GAEXqU,CACT,EACI2nL,GAAc,SAAU5oL,EAAKjb,EAAU8jM,GACzC,IAAIrsL,EAAMwD,EAAIlX,SAAUmY,EAAQ,CAAEvuB,KAAM,SACxC,GAAIm2M,EAAWC,UACb/jM,EAASkc,OADX,CAIA,IAGI8nL,EAAe,WACjBR,GAAYvoL,EAAK,mBAAoB+oL,GACrCR,GAAYvoL,EAAK,OAAQ+oL,GACpBF,EAAWC,YACdD,EAAWC,WAAY,EACvB/jM,EAASkc,IAEXjB,EAAM,IACR,EAV4B,aAAnBxD,EAAIwsL,YAAgD,gBAAnBxsL,EAAIwsL,YAAgCxsL,EAAI3U,KAYhFkhM,IAEAV,GAASroL,EAAK,mBAAoB+oL,GAE/BF,EAAWC,WACdT,GAASroL,EAAK,OAAQ+oL,EAnBxB,CAqBF,EACIE,GAAa,WACf,SAASA,IACP1vM,KAAKuvM,WAAY,EACjBvvM,KAAK8+B,OAAS,CAAC,EACf9+B,KAAK42B,MAAQ,EACb52B,KAAK2vM,QAlEgB,cAkEiB,IAAIxwK,MAAQhjC,SAAS,IAC3D6D,KAAK4vM,mBAAqB,iBAAkBrgM,SAASkS,gBACrDzhB,KAAK6vM,WAAa,cAAetgM,SAASkS,gBAC1CzhB,KAAK42B,MAAQ,CACf,CAsNA,OArNA84K,EAAWl2M,UAAUsC,KAAO,SAAU2I,EAAQwyD,EAAOzrD,EAAUgO,GAC7D,IACI5gB,EAAIk3M,EAAc3yM,EAAGxD,EAAMo2M,EAAUC,EAAen1J,EADpDv+C,EAAO0D,KAEPymB,EAAM7W,OACNqgM,EAAuB,SAAUxgM,GACnCnT,EAAK4zM,gBAAgBhB,GAAIz/L,GAAOgX,EAAIiB,OAAQ9uB,EAC9C,EACA,GAAK6L,GAA8B,IAApBA,EAAOR,UAAsC,IAApBQ,EAAOR,SAA/C,CAGKQ,EAAOnI,EAAKqzM,SAKf/2M,EAAK6L,EAAOnI,EAAKqzM,UAJjB/2M,EAAK0D,EAAKs6B,QACVnyB,EAAOnI,EAAKqzM,SAAW/2M,EACvB0D,EAAKwiC,OAAOlmC,GAAM,CAAC,GAIrB4gB,EAAQA,GAAS/U,EACjB,IAAI0rM,EAAYl5I,EAAMh1D,MAAM,KAE5B,IADA9E,EAAIgzM,EAAU9yM,OACPF,KAEL6yM,EAAgBC,EAChBF,EAAWl1J,GAAU,EACR,sBAHblhD,EAAOw2M,EAAUhzM,MAIfxD,EAAO,SAEL2C,EAAKizM,WAAsB,UAAT51M,GAA0C,aAAtB8K,EAAOgrM,WAC/CjkM,EAAS7S,KAAK6gB,EAAO01L,GAAI,CAAE/1M,KAAMQ,MAG9B2C,EAAKszM,qBACRG,EAAWzzM,EAAK8zM,gBAAgBz2M,MAE9Bq2M,EAAgB,SAAUvgM,GACxB,IAAInO,EAAUmO,EAAI4gM,cACdC,EAAU7gM,EAAI8qK,cAClB,GAAI+1B,GAAWhvM,EAAQsf,SACrB0vL,EAAUhvM,EAAQsf,SAAS0vL,QAE3B,KAAOA,GAAWA,IAAYhvM,GAC5BgvM,EAAUA,EAAQroM,WAGjBqoM,KACH7gM,EAAMy/L,GAAIz/L,GAAOgX,EAAIiB,QACjBvuB,KAAoB,aAAbsW,EAAItW,KAAsB,aAAe,aACpDsW,EAAIhL,OAASnD,EACbhF,EAAK4zM,gBAAgBzgM,EAAK7W,GAE9B,GAGC0D,EAAKuzM,YAAwB,YAATl2M,GAA+B,aAATA,IAC7CkhD,GAAU,EACVk1J,EAAoB,YAATp2M,EAAqB,QAAU,OAC1Cq2M,EAAgB,SAAUvgM,IACxBA,EAAMy/L,GAAIz/L,GAAOgX,EAAIiB,QACjBvuB,KAAoB,UAAbsW,EAAItW,KAAmB,UAAY,WAC9CmD,EAAK4zM,gBAAgBzgM,EAAK7W,EAC5B,IAEFk3M,EAAexzM,EAAKwiC,OAAOlmC,GAAIe,IAehB,UAATA,GAAoB2C,EAAKizM,UAC3B/jM,EAAS0jM,GAAI,CAAE/1M,KAAMQ,KAErBm2M,EAAa/yM,KAAK,CAChBg+L,KAAMvvL,EACNgO,MAAOA,KAlBXld,EAAKwiC,OAAOlmC,GAAIe,GAAQm2M,EAAe,CAAC,CACpC/U,KAAMvvL,EACNgO,MAAOA,IAEXs2L,EAAaC,SAAWA,EACxBD,EAAaj1J,QAAUA,EACvBi1J,EAAaE,cAAgBA,EAChB,UAATr2M,EACF01M,GAAY5qM,EAAQurM,EAAe1zM,GAEnCwyM,GAASrqM,EAAQsrM,GAAYp2M,EAAMq2M,EAAen1J,KAcxD,OADAp2C,EAASqrM,EAAe,KACjBtkM,CA/EP,CAgFF,EACAkkM,EAAWl2M,UAAUsvB,OAAS,SAAUrkB,EAAQwyD,EAAOzrD,GACrD,IAAIskM,EAAc3yM,EAAGozM,EAAI52M,EAAM62M,EAC/B,IAAK/rM,GAA8B,IAApBA,EAAOR,UAAsC,IAApBQ,EAAOR,SAC7C,OAAOjE,KAET,IAAIpH,EAAK6L,EAAOzE,KAAK2vM,SACrB,GAAI/2M,EAAI,CAEN,GADA43M,EAAWxwM,KAAK8+B,OAAOlmC,GACnBq+D,EAAO,CACT,IAAIk5I,EAAYl5I,EAAMh1D,MAAM,KAE5B,IADA9E,EAAIgzM,EAAU9yM,OACPF,KAGL,GADA2yM,EAAeU,EADf72M,EAAOw2M,EAAUhzM,IAEC,CAChB,GAAIqO,EAEF,IADA+kM,EAAKT,EAAazyM,OACXkzM,KACL,GAAIT,EAAaS,GAAIxV,OAASvvL,EAAU,CACtC,IAAIwkM,EAAgBF,EAAaE,cAC7BD,EAAWD,EAAaC,SAAUl1J,EAAUi1J,EAAaj1J,SAC7Di1J,EAAeA,EAAah6L,MAAM,EAAGy6L,GAAIjuM,OAAOwtM,EAAah6L,MAAMy6L,EAAK,KAC3DP,cAAgBA,EAC7BF,EAAaC,SAAWA,EACxBD,EAAaj1J,QAAUA,EACvB21J,EAAS72M,GAAQm2M,CACnB,CAGCtkM,GAAoC,IAAxBskM,EAAazyM,gBACrBmzM,EAAS72M,GAChBq1M,GAAYvqM,EAAQqrM,EAAaC,UAAYp2M,EAAMm2M,EAAaE,cAAeF,EAAaj1J,SAEhG,CAEJ,MACEw4I,GAAOmd,GAAU,SAAUV,EAAcn2M,GACvCq1M,GAAYvqM,EAAQqrM,EAAaC,UAAYp2M,EAAMm2M,EAAaE,cAAeF,EAAaj1J,QAC9F,IACA21J,EAAW,CAAC,EAEd,IAAK72M,KAAQ62M,EACX,GAAIr4L,GAAMq4L,EAAU72M,GAClB,OAAOqG,YAGJA,KAAK8+B,OAAOlmC,GACnB,WACS6L,EAAOzE,KAAK2vM,QAGrB,CAFE,MAAOlmG,GACPhlG,EAAOzE,KAAK2vM,SAAW,IACzB,CACF,CACA,OAAO3vM,IACT,EACA0vM,EAAWl2M,UAAUka,KAAO,SAAUjP,EAAQ9K,EAAM+a,GAClD,IAAI9b,EACJ,IAAK6L,GAA8B,IAApBA,EAAOR,UAAsC,IAApBQ,EAAOR,SAC7C,OAAOjE,KAET,IAAI0nB,EAAQwnL,GAAI,CACd/1M,KAAMQ,EACN8K,OAAQA,GACPiQ,GACH,IACE9b,EAAK6L,EAAOzE,KAAK2vM,WAEf3vM,KAAKkwM,gBAAgBxoL,EAAO9uB,GAE9B6L,EAASA,EAAOwD,YAAcxD,EAAO6c,eAAiB7c,EAAOid,aAAejd,EAAOgsM,mBAC5EhsM,IAAWijB,EAAMuvJ,wBAC1B,OAAOj3K,IACT,EACA0vM,EAAWl2M,UAAUk3M,MAAQ,SAAUjsM,GACrC,IAAItH,EAAG0kB,EACP,IAAKpd,GAA8B,IAApBA,EAAOR,UAAsC,IAApBQ,EAAOR,SAC7C,OAAOjE,KAQT,GANIyE,EAAOzE,KAAK2vM,UACd3vM,KAAK8oB,OAAOrkB,GAETA,EAAOq7L,uBACVr7L,EAASA,EAAO8K,UAEd9K,GAAUA,EAAOq7L,qBAInB,IAHA9/L,KAAK8oB,OAAOrkB,GAEZtH,GADA0kB,EAAWpd,EAAOq7L,qBAAqB,MAC1BziM,OACNF,MACLsH,EAASod,EAAS1kB,IACP6C,KAAK2vM,UACd3vM,KAAK8oB,OAAOrkB,GAIlB,OAAOzE,IACT,EACA0vM,EAAWl2M,UAAUihD,QAAU,WAC7Bz6C,KAAK8+B,OAAS,CAAC,CACjB,EACA4wK,EAAWl2M,UAAUomF,OAAS,SAAU5uE,GAKtC,OAJIA,IACFA,EAAEgC,iBACFhC,EAAEmvF,6BAEG,CACT,EACAuvG,EAAWl2M,UAAU02M,gBAAkB,SAAUzgM,EAAK7W,GACpD,IAAIulC,EAAYn+B,KAAK8+B,OAAOlmC,GACxBk3M,EAAe3xK,GAAaA,EAAU1uB,EAAItW,MAC9C,GAAI22M,EACF,IAAK,IAAI3yM,EAAI,EAAG0Y,EAAIi6L,EAAazyM,OAAQF,EAAI0Y,EAAG1Y,IAAK,CACnD,IAAIqO,EAAWskM,EAAa3yM,GAI5B,GAHIqO,IAAwD,IAA5CA,EAASuvL,KAAKpiM,KAAK6S,EAASgO,MAAO/J,IACjDA,EAAIuD,iBAEFvD,EAAIk/L,gCACN,MAEJ,CAEJ,EACAe,EAAWzB,MAAQ,IAAIyB,EAChBA,CACT,CAhOiB,GAkOyLC,GAAU,UAAY,IAAIxwK,KAAQwxK,GAAe/gM,OAAOL,SAAUqhM,GAAU,EAAGrnG,GAAO,EAAGsnG,GAAaC,KAAeC,GAAaD,KAAeE,GAAgBF,KAAeG,GAAY,SAAUh3M,EAAGM,GAI/Y,OAHIN,IAAMM,IACR4/L,IAAe,GAEV,CACT,EAAG+W,GAAe,YAAkBC,GAAe,GAAK,GAAIvb,GAAS,CAAC,EAAE71L,eAAgBvC,GAAM,GAAIi5F,GAAMj5F,GAAIi5F,IAAK26G,GAAc5zM,GAAIT,KAAMs0M,GAAS7zM,GAAIT,KAAMu0M,GAAU9zM,GAAIsY,MAAOjZ,GAAUW,GAAIX,SAAW,SAAUmO,GAElN,IADA,IAAI7N,EAAI,EAAGC,EAAM4C,KAAK3C,OACfF,EAAIC,EAAKD,IACd,GAAI6C,KAAK7C,KAAO6N,EACd,OAAO7N,EAGX,OAAQ,CACV,EAA4Io0M,GAAa,sBAAuBC,GAAa,mCAAoCjvK,GAAa,2BAA4BivK,GAAa,OAASD,GAAa,gBAAkBA,GAAa,2DAA6DC,GAAa,OAASD,GAAa,OAAQE,GAAU,KAAOD,GAAP,wFAAwHjvK,GAAxH,eAA+JmvK,GAAQ,IAAIlgH,OAAO,uEAAsE,KAAMmgH,GAAS,IAAIngH,OAAO,8CAA6CogH,GAAe,IAAIpgH,OAAO,wEAAsEqgH,GAAmB,IAAIrgH,OAAO,4DAA2D,KAAMsgH,GAAU,IAAItgH,OAAOigH,IAAUM,GAAc,IAAIvgH,OAAO,IAAMggH,GAAa,KAAMQ,GAAY,CACvhCC,GAAI,IAAIzgH,OAAO,MAAQggH,GAAa,KACpCU,MAAO,IAAI1gH,OAAO,QAAUggH,GAAa,KACzCW,IAAK,IAAI3gH,OAAO,KAAOggH,GAAa,SACpCY,KAAM,IAAI5gH,OAAO,IAAMjvD,IACvB8vK,OAAQ,IAAI7gH,OAAO,IAAMigH,IACzBa,MAAO,IAAI9gH,OAAO,4LAAyL,KAC3M+gH,KAAM,IAAI/gH,OAAO,mIAA0B,KAC3CghH,aAAc,IAAIhhH,OAAO,6IAA2I,MACnKihH,GAAU,sCAAuCC,GAAU,SAAUC,GAAU,yBAA0BC,GAAe,mCAAoCC,GAAW,OAAQC,GAAU,QAASC,GAAY,IAAIvhH,OAAO,kEAAiE,MAAOwhH,GAAY,SAAUhnM,EAAGinM,EAASC,GACpU,IAAIC,EAAO,KAAOF,EAAU,MAC5B,OAAOE,GAASA,GAAQD,EAAoBD,EAAUE,EAAO,EAAIv5M,OAAOmpM,aAAaoQ,EAAO,OAASv5M,OAAOmpM,aAAaoQ,GAAQ,GAAK,MAAc,KAAPA,EAAc,MAC7J,EACF,IACE9B,GAAO/zM,MAAME,GAAM8zM,GAAQ34M,KAAKg4M,GAAa/2L,YAAa+2L,GAAa/2L,YACvEpc,GAAImzM,GAAa/2L,WAAWvc,QAAQ4G,QAYtC,CAXE,MAAO+M,GACPqgM,GAAS,CACP/zM,MAAOE,GAAIH,OAAS,SAAUoH,EAAQ2uM,GACpChC,GAAY9zM,MAAMmH,EAAQ6sM,GAAQ34M,KAAKy6M,GACzC,EAAI,SAAU3uM,EAAQ2uM,GAEpB,IADA,IAAI9kL,EAAI7pB,EAAOpH,OAAQF,EAAI,EACpBsH,EAAO6pB,KAAO8kL,EAAIj2M,OAEzBsH,EAAOpH,OAASixB,EAAI,CACtB,EAEJ,CACA,IAAI+kL,GAAS,SAAUlzL,EAAUiiE,EAAS/yD,EAASikL,GACjD,IAAIzyL,EAAO7V,EAAMupF,EAAGtwF,EAAU9G,EAAG65I,EAAQvoH,EAAK8kL,EAAK70G,EAAY80G,EAM/D,IALKpxH,EAAUA,EAAQ9gE,eAAiB8gE,EAAUuuH,MAAkBtW,IAClED,GAAYh4G,GAGd/yD,EAAUA,GAAW,IAChBlP,GAAgC,iBAAbA,EACtB,OAAOkP,EAET,GAAsC,KAAjCprB,GALLm+E,EAAUA,GAAWi4G,IAKGp2L,WAAgC,IAAbA,EACzC,MAAO,GAET,GAAIq2L,KAAmBgZ,EAAM,CAC3B,GAAIzyL,EAAQ+xL,GAAan+G,KAAKt0E,GAC5B,GAAIo0E,EAAI1zE,EAAM,IACZ,GAAiB,IAAb5c,EAAgB,CAElB,KADA+G,EAAOo3E,EAAQ43C,eAAezlC,MAClBvpF,EAAK/C,WAMf,OAAOonB,EALP,GAAIrkB,EAAKpS,KAAO27F,EAEd,OADAllE,EAAQtyB,KAAKiO,GACNqkB,CAKb,MACE,GAAI+yD,EAAQ9gE,gBAAkBtW,EAAOo3E,EAAQ9gE,cAAc04G,eAAezlC,KAAO3zE,GAASwhE,EAASp3E,IAASA,EAAKpS,KAAO27F,EAEtH,OADAllE,EAAQtyB,KAAKiO,GACNqkB,MAGN,IAAIxO,EAAM,GAEf,OADAwwL,GAAO/zM,MAAM+xB,EAAS+yD,EAAQ09G,qBAAqB3/K,IAC5CkP,EACF,IAAKklE,EAAI1zE,EAAM,KAAO84K,GAAQ8Z,uBAEnC,OADApC,GAAO/zM,MAAM+xB,EAAS+yD,EAAQqxH,uBAAuBl/G,IAC9CllE,CACT,CAEF,GAAIsqK,GAAQ+Z,OAASnZ,KAAcA,GAAU74L,KAAKye,IAAY,CAI5D,GAHAozL,EAAM9kL,EAAMkhL,GACZjxG,EAAatc,EACboxH,EAA2B,IAAbvvM,GAAkBkc,EACf,IAAblc,GAAqD,WAAnCm+E,EAAQ3hF,SAASC,cAA4B,CASjE,IARAs2I,EAAS8iD,GAAS35K,IACdsO,EAAM2zD,EAAQzgF,aAAa,OAC7B4xM,EAAM9kL,EAAIhrB,QAAQqvM,GAAS,QAE3B1wH,EAAQj/D,aAAa,KAAMowL,GAE7BA,EAAM,QAAWA,EAAM,MACvBp2M,EAAI65I,EAAO35I,OACJF,KACL65I,EAAO75I,GAAKo2M,EAAMI,GAAW38D,EAAO75I,IAEtCuhG,EAAam0G,GAASnxM,KAAKye,IAAayzL,GAAYxxH,EAAQn6E,aAAem6E,EAC3EoxH,EAAcx8D,EAAOt0I,KAAK,IAC5B,CACA,GAAI8wM,EACF,IAEE,OADAnC,GAAO/zM,MAAM+xB,EAASqvE,EAAWj3C,iBAAiB+rJ,IAC3CnkL,CAMT,CALE,MAAOwkL,GACT,CAAE,QACKplL,GACH2zD,EAAQz+D,gBAAgB,KAE5B,CAEJ,CACF,CACA,OAAOq2K,GAAS75K,EAAS1c,QAAQiuM,GAAO,MAAOtvH,EAAS/yD,EAASikL,EACnE,EACA,SAASxC,KACP,IAAI7wM,EAAO,GAOX,OANA,SAASo2F,EAAMj2F,EAAKhH,GAIlB,OAHI6G,EAAKlD,KAAKqD,EAAM,KAAOw5L,GAAKka,oBACvBz9G,EAAMp2F,EAAK8uF,SAEbsH,EAAMj2F,EAAM,KAAOhH,CAC5B,CAEF,CACA,SAAS26M,GAAah/L,GAEpB,OADAA,EAAG46L,KAAW,EACP56L,CACT,CACA,SAASi/L,GAAa/5M,EAAGM,GACvB,IAAImwL,EAAMnwL,GAAKN,EAAGg6M,EAAOvpB,GAAsB,IAAfzwL,EAAEgK,UAAiC,IAAf1J,EAAE0J,YAAoB1J,EAAE25M,aAAe/C,MAAkBl3M,EAAEi6M,aAAe/C,IAC9H,GAAI8C,EACF,OAAOA,EAET,GAAIvpB,EACF,KAAOA,EAAMA,EAAIthK,aACf,GAAIshK,IAAQnwL,EACV,OAAQ,EAId,OAAON,EAAI,GAAK,CAClB,CAaA,SAASk6M,GAAuBp/L,GAC9B,OAAOg/L,IAAa,SAAUK,GAE5B,OADAA,GAAYA,EACLL,IAAa,SAAUT,EAAM90L,GAElC,IADA,IAAI8P,EAAG+lL,EAAet/L,EAAG,GAAIu+L,EAAKj2M,OAAQ+2M,GAAWj3M,EAAIk3M,EAAah3M,OAC/DF,KACDm2M,EAAKhlL,EAAI+lL,EAAal3M,MACxBm2M,EAAKhlL,KAAO9P,EAAQ8P,GAAKglL,EAAKhlL,IAGpC,GACF,GACF,CACA,SAASslL,GAAYxxH,GACnB,OAAOA,UAAkBA,EAAQ09G,uBAAyBoR,IAAgB9uH,CAC5E,CAygBA,SAASkyH,KACT,CA+CA,SAASX,GAAWY,GAElB,IADA,IAAIp3M,EAAI,EAAGC,EAAMm3M,EAAOl3M,OAAQ8iB,EAAW,GACpChjB,EAAIC,EAAKD,IACdgjB,GAAYo0L,EAAOp3M,GAAG/D,MAExB,OAAO+mB,CACT,CACA,SAASq0L,GAAcC,EAASC,EAAYl9K,GAC1C,IAAIqY,EAAM6kK,EAAW7kK,IAAK8kK,EAAmBn9K,GAAgB,eAARqY,EAAsB+kK,EAAWrrG,KACtF,OAAOmrG,EAAW7tI,MAAQ,SAAU77D,EAAMo3E,EAASyyH,GACjD,KAAO7pM,EAAOA,EAAK6kC,IACjB,GAAsB,IAAlB7kC,EAAK/G,UAAkB0wM,EACzB,OAAOF,EAAQzpM,EAAMo3E,EAASyyH,EAGpC,EAAI,SAAU7pM,EAAMo3E,EAASyyH,GAC3B,IAAIC,EAAUC,EAAYC,EAAW,CACjCpE,GACAgE,GAEJ,GAAIC,GACF,KAAO7pM,EAAOA,EAAK6kC,IACjB,IAAsB,IAAlB7kC,EAAK/G,UAAkB0wM,IACrBF,EAAQzpM,EAAMo3E,EAASyyH,GACzB,OAAO,OAKb,KAAO7pM,EAAOA,EAAK6kC,IACjB,GAAsB,IAAlB7kC,EAAK/G,UAAkB0wM,EAAkB,CAE3C,IAAKG,GADLC,EAAa/pM,EAAK2kM,MAAa3kM,EAAK2kM,IAAW,CAAC,IACrB9/J,KAASilK,EAAS,KAAOlE,IAAWkE,EAAS,KAAOF,EAC7E,OAAOI,EAAS,GAAKF,EAAS,GAG9B,GADAC,EAAWllK,GAAOmlK,EACdA,EAAS,GAAKP,EAAQzpM,EAAMo3E,EAASyyH,GACvC,OAAO,CAGb,CAGN,CACF,CACA,SAASI,GAAeC,GACtB,OAAOA,EAAS73M,OAAS,EAAI,SAAU2N,EAAMo3E,EAASyyH,GAEpD,IADA,IAAI13M,EAAI+3M,EAAS73M,OACVF,KACL,IAAK+3M,EAAS/3M,GAAG6N,EAAMo3E,EAASyyH,GAC9B,OAAO,EAGX,OAAO,CACT,EAAIK,EAAS,EACf,CAQA,SAASC,GAASC,EAAWx5M,EAAKK,EAAQmmF,EAASyyH,GAEjD,IADA,IAAI7pM,EAAMqqM,EAAe,GAAIl4M,EAAI,EAAGC,EAAMg4M,EAAU/3M,OAAQi4M,EAAgB,MAAP15M,EAC9DuB,EAAIC,EAAKD,KACV6N,EAAOoqM,EAAUj4M,MACdlB,IAAUA,EAAO+O,EAAMo3E,EAASyyH,KACnCQ,EAAat4M,KAAKiO,GACdsqM,GACF15M,EAAImB,KAAKI,KAKjB,OAAOk4M,CACT,CACA,SAASE,GAAWC,EAAWr1L,EAAUs0L,EAASgB,EAAYC,EAAYC,GAOxE,OANIF,IAAeA,EAAW9F,MAC5B8F,EAAaF,GAAWE,IAEtBC,IAAeA,EAAW/F,MAC5B+F,EAAaH,GAAWG,EAAYC,IAE/B5B,IAAa,SAAUT,EAAMjkL,EAAS+yD,EAASyyH,GACpD,IAAIl4E,EAAMx/H,EAAG6N,EAAM4qM,EAAS,GAAIC,EAAU,GAAIC,EAAczmL,EAAQhyB,OAAQ09H,EAAQu4E,GA7BxF,SAA0BnzL,EAAU41L,EAAU1mL,GAE5C,IADA,IAAIlyB,EAAI,EAAGC,EAAM24M,EAAS14M,OACnBF,EAAIC,EAAKD,IACdk2M,GAAOlzL,EAAU41L,EAAS54M,GAAIkyB,GAEhC,OAAOA,CACT,CAuBgG2mL,CAAiB71L,GAAY,IAAKiiE,EAAQn+E,SAAW,CAACm+E,GAAWA,EAAS,IAAK6zH,GAAYT,IAAclC,GAASnzL,EAA+D46G,EAAnDo6E,GAASp6E,EAAO66E,EAAQJ,EAAWpzH,EAASyyH,GAAcqB,EAAazB,EAAUiB,IAAepC,EAAOkC,EAAYM,GAAeL,GAAc,GAAKpmL,EAAU4mL,EAIzX,GAHIxB,GACFA,EAAQwB,EAAWC,EAAY9zH,EAASyyH,GAEtCY,EAIF,IAHA94E,EAAOw4E,GAASe,EAAYL,GAC5BJ,EAAW94E,EAAM,GAAIv6C,EAASyyH,GAC9B13M,EAAIw/H,EAAKt/H,OACFF,MACD6N,EAAO2xH,EAAKx/H,MACd+4M,EAAWL,EAAQ14M,MAAQ84M,EAAUJ,EAAQ14M,IAAM6N,IAIzD,GAAIsoM,GACF,GAAIoC,GAAcF,EAAW,CAC3B,GAAIE,EAAY,CAGd,IAFA/4E,EAAO,GACPx/H,EAAI+4M,EAAW74M,OACRF,MACD6N,EAAOkrM,EAAW/4M,KACpBw/H,EAAK5/H,KAAKk5M,EAAU94M,GAAK6N,GAG7B0qM,EAAW,KAAMQ,EAAa,GAAIv5E,EAAMk4E,EAC1C,CAEA,IADA13M,EAAI+4M,EAAW74M,OACRF,MACA6N,EAAOkrM,EAAW/4M,MAAQw/H,EAAO+4E,EAAa74M,GAAQlE,KAAK26M,EAAMtoM,GAAQ4qM,EAAOz4M,KAAO,IAC1Fm2M,EAAK32E,KAAUttG,EAAQstG,GAAQ3xH,GAGrC,OAEAkrM,EAAaf,GAASe,IAAe7mL,EAAU6mL,EAAW3/G,OAAOu/G,EAAaI,EAAW74M,QAAU64M,GAC/FR,EACFA,EAAW,KAAMrmL,EAAS6mL,EAAYrB,GAEtCxD,GAAO/zM,MAAM+xB,EAAS6mL,EAG5B,GACF,CACA,SAASC,GAAkB5B,GAUzB,IATA,IAAI6B,EAAc3B,EAASnmL,EAAGlxB,EAAMm3M,EAAOl3M,OAAQg5M,EAAkBzc,GAAKlkJ,SAAS6+J,EAAO,GAAGp7M,MAAOm9M,EAAmBD,GAAmBzc,GAAKlkJ,SAAS,KAAMv4C,EAAIk5M,EAAkB,EAAI,EAAGE,EAAe/B,IAAc,SAAUxpM,GAC9N,OAAOA,IAASorM,CAClB,GAAGE,GAAkB,GAAOE,EAAkBhC,IAAc,SAAUxpM,GACpE,OAAOnO,GAAQlE,KAAKy9M,EAAcprM,IAAS,CAC7C,GAAGsrM,GAAkB,GAAOpB,EAAW,CAAC,SAAUlqM,EAAMo3E,EAASyyH,GAC7D,IAAIxmL,GAAOgoL,IAAoBxB,GAAOzyH,IAAY63G,OAAuBmc,EAAeh0H,GAASn+E,SAAWsyM,EAAavrM,EAAMo3E,EAASyyH,GAAO2B,EAAgBxrM,EAAMo3E,EAASyyH,IAE9K,OADAuB,EAAe,KACR/nL,CACT,GACGlxB,EAAIC,EAAKD,IACd,GAAIs3M,EAAU7a,GAAKlkJ,SAAS6+J,EAAOp3M,GAAGhE,MACpC+7M,EAAW,CAACV,GAAcS,GAAeC,GAAWT,QAC/C,CAEL,IADAA,EAAU7a,GAAK39L,OAAOs4M,EAAOp3M,GAAGhE,MAAMmE,MAAM,KAAMi3M,EAAOp3M,GAAGqhB,UAChDmxL,IAAU,CAEpB,IADArhL,IAAMnxB,EACCmxB,EAAIlxB,IACLw8L,GAAKlkJ,SAAS6+J,EAAOjmL,GAAGn1B,MADdm1B,KAKhB,OAAOinL,GAAWp4M,EAAI,GAAK83M,GAAeC,GAAW/3M,EAAI,GAAKw2M,GAAWY,EAAOz+L,MAAM,EAAG3Y,EAAI,GAAGmF,OAAO,CAAElJ,MAA8B,MAAvBm7M,EAAOp3M,EAAI,GAAGhE,KAAe,IAAM,MAAOsK,QAAQiuM,GAAO,MAAO+C,EAASt3M,EAAImxB,GAAK6nL,GAAkB5B,EAAOz+L,MAAM3Y,EAAGmxB,IAAKA,EAAIlxB,GAAO+4M,GAAkB5B,EAASA,EAAOz+L,MAAMwY,IAAKA,EAAIlxB,GAAOu2M,GAAWY,GACzT,CACAW,EAASn4M,KAAK03M,EAChB,CAEF,OAAOQ,GAAeC,EACxB,CAptBAvb,GAAU0Z,GAAO1Z,QAAU,CAAC,EAC5BE,GAAQwZ,GAAOxZ,MAAQ,SAAU7uL,GAC/B,IAAIyW,EAAkBzW,IAASA,EAAKsW,eAAiBtW,GAAMyW,gBAC3D,QAAOA,GAA+C,SAA7BA,EAAgBhhB,QAC3C,EACA25L,GAAciZ,GAAOjZ,YAAc,SAAUtzL,GAC3C,IAAI2vM,EAAYxzL,EAAMnc,EAAOA,EAAKwa,eAAiBxa,EAAO6pM,GAAchvL,EAASsB,EAAIvB,YAQrF,OAAIuB,IAAQo3K,IAA+B,IAAjBp3K,EAAIhf,UAAmBgf,EAAIxB,iBAGrD44K,GAAap3K,EACbynI,GAAUznI,EAAIxB,gBACd64K,IAAkBT,GAAM52K,GACpBtB,GAAUA,IAbd,SAAgB8E,GACd,IACE,OAAOA,EAAIN,GAEb,CADE,MAAOsjF,GACT,CACA,OAAO,IACT,CAOyBitG,CAAO/0L,KAC1BA,EAAOkH,iBACTlH,EAAOkH,iBAAiB,UAAU,WAChCuxK,IACF,IAAG,GACMz4K,EAAOotL,aAChBptL,EAAOotL,YAAY,YAAY,WAC7B3U,IACF,KAGJT,GAAQp3J,YAAa,EACrBo3J,GAAQmG,sBAAuB,EAC/BnG,GAAQ8Z,uBAAyBd,GAAQjxM,KAAKuhB,EAAIwwL,wBAClD9Z,GAAQx1F,SAAU,EAClBy1F,GAAKj/H,KAAKs3I,GAAK,SAAUr5M,EAAIwpF,GAC3B,UAAWA,EAAQ43C,iBAAmBk3E,IAAgB5W,GAAgB,CACpE,IAAI/lG,EAAInS,EAAQ43C,eAAephI,GAC/B,OAAO27F,GAAKA,EAAEtsF,WAAa,CAACssF,GAAK,EACnC,CACF,EACAqlG,GAAK39L,OAAOg2M,GAAK,SAAUr5M,GACzB,IAAI+9M,EAAS/9M,EAAG6K,QAAQsvM,GAAWC,IACnC,OAAO,SAAUhoM,GACf,OAAOA,EAAKrJ,aAAa,QAAUg1M,CACrC,CACF,EACA/c,GAAKj/H,KAAKw3I,IAAMxY,GAAQmG,qBAAuB,SAAUhmL,EAAKsoE,GAC5D,UAAWA,EAAQ09G,uBAAyBoR,GAC1C,OAAO9uH,EAAQ09G,qBAAqBhmL,EAExC,EAAI,SAAUA,EAAKsoE,GACjB,IAAIp3E,EAAM4rM,EAAM,GAAIz5M,EAAI,EAAGkyB,EAAU+yD,EAAQ09G,qBAAqBhmL,GAClE,GAAY,MAARA,EAAa,CACf,KAAO9O,EAAOqkB,EAAQlyB,MACE,IAAlB6N,EAAK/G,UACP2yM,EAAI75M,KAAKiO,GAGb,OAAO4rM,CACT,CACA,OAAOvnL,CACT,EACAuqK,GAAKj/H,KAAKu3I,MAAQvY,GAAQ8Z,wBAA0B,SAAUvvM,EAAWk+E,GACvE,GAAIk4G,GACF,OAAOl4G,EAAQqxH,uBAAuBvvM,EAE1C,EACAs2L,GAAgB,GAChBD,GAAY,GACZZ,GAAQkd,mBAAoB,EAC5Btc,GAAYA,GAAUl9L,QAAU,IAAIm0F,OAAO+oG,GAAU73L,KAAK,MAC1D83L,GAAgBA,GAAcn9L,QAAU,IAAIm0F,OAAOgpG,GAAc93L,KAAK,MACtE+zM,EAAa9D,GAAQjxM,KAAKgpJ,GAAQ5pI,yBAClCF,GAAW61L,GAAc9D,GAAQjxM,KAAKgpJ,GAAQ9pI,UAAY,SAAU3mB,EAAGM,GACrE,IAAIu8M,EAAuB,IAAf78M,EAAEgK,SAAiBhK,EAAEwnB,gBAAkBxnB,EAAG88M,EAAMx8M,GAAKA,EAAE0N,WACnE,OAAOhO,IAAM88M,MAAUA,GAAwB,IAAjBA,EAAI9yM,YAAmB6yM,EAAMl2L,SAAWk2L,EAAMl2L,SAASm2L,GAAO98M,EAAE6mB,yBAA4D,GAAjC7mB,EAAE6mB,wBAAwBi2L,IACrJ,EAAI,SAAU98M,EAAGM,GACf,GAAIA,EACF,KAAOA,EAAIA,EAAE0N,YACX,GAAI1N,IAAMN,EACR,OAAO,EAIb,OAAO,CACT,EACAg3M,GAAYwF,EAAa,SAAUx8M,EAAGM,GACpC,GAAIN,IAAMM,EAER,OADA4/L,IAAe,EACR,EAET,IAAI6c,GAAW/8M,EAAE6mB,yBAA2BvmB,EAAEumB,wBAC9C,OAAIk2L,IAIU,GADdA,GAAW/8M,EAAEqnB,eAAiBrnB,MAAQM,EAAE+mB,eAAiB/mB,GAAKN,EAAE6mB,wBAAwBvmB,GAAK,KACzEo/L,GAAQsd,cAAgB18M,EAAEumB,wBAAwB7mB,KAAO+8M,EACvE/8M,IAAMgpB,GAAOhpB,EAAEqnB,gBAAkBqvL,IAAgB/vL,GAAS+vL,GAAc12M,IAClE,EAENM,IAAM0oB,GAAO1oB,EAAE+mB,gBAAkBqvL,IAAgB/vL,GAAS+vL,GAAcp2M,GACnE,EAEF2/L,GAAYr9L,GAAQlE,KAAKuhM,GAAWjgM,GAAK4C,GAAQlE,KAAKuhM,GAAW3/L,GAAK,EAE9D,EAAVy8M,GAAe,EAAI,EAC5B,EAAI,SAAU/8M,EAAGM,GACf,GAAIN,IAAMM,EAER,OADA4/L,IAAe,EACR,EAET,IAAIzP,EAAKvtL,EAAI,EAAG+5M,EAAMj9M,EAAEgO,WAAY8uM,EAAMx8M,EAAE0N,WAAYkvM,EAAK,CAACl9M,GAAIm9M,EAAK,CAAC78M,GACxE,IAAK28M,IAAQH,EACX,OAAO98M,IAAMgpB,GAAO,EAAI1oB,IAAM0oB,EAAM,EAAIi0L,GAAO,EAAIH,EAAM,EAAI7c,GAAYr9L,GAAQlE,KAAKuhM,GAAWjgM,GAAK4C,GAAQlE,KAAKuhM,GAAW3/L,GAAK,EAC9H,GAAI28M,IAAQH,EACjB,OAAO/C,GAAa/5M,EAAGM,GAGzB,IADAmwL,EAAMzwL,EACCywL,EAAMA,EAAIziL,YACfkvM,EAAG3gH,QAAQk0F,GAGb,IADAA,EAAMnwL,EACCmwL,EAAMA,EAAIziL,YACfmvM,EAAG5gH,QAAQk0F,GAEb,KAAOysB,EAAGh6M,KAAOi6M,EAAGj6M,IAClBA,IAEF,OAAOA,EAAI62M,GAAamD,EAAGh6M,GAAIi6M,EAAGj6M,IAAMg6M,EAAGh6M,KAAOwzM,IAAgB,EAAIyG,EAAGj6M,KAAOwzM,GAAe,EAAI,CACrG,EACO1tL,GApHEo3K,EAqHX,EACAgZ,GAAO70L,QAAU,SAAU64L,EAAMh2M,GAC/B,OAAOgyM,GAAOgE,EAAM,KAAM,KAAMh2M,EAClC,EACAgyM,GAAOiE,gBAAkB,SAAUtsM,EAAMqsM,GAKvC,IAJKrsM,EAAKsW,eAAiBtW,KAAUqvL,IACnCD,GAAYpvL,GAEdqsM,EAAOA,EAAK5zM,QAAQouM,GAAkB,UAClClY,GAAQ2d,iBAAmBhd,MAAoBE,KAAkBA,GAAc94L,KAAK21M,OAAY9c,KAAcA,GAAU74L,KAAK21M,IAC/H,IACE,IAAIhpL,QA1T6K7P,GA0T/J7lB,KAAKqS,EAAMqsM,GAC7B,GAAIhpL,GAAOsrK,GAAQkd,mBAAqB7rM,EAAKuE,UAAuC,KAA3BvE,EAAKuE,SAAStL,SACrE,OAAOoqB,CAGX,CADE,MAAOrd,GACT,CAEF,OAAOqiM,GAAOgE,EAAMhd,GAAY,KAAM,CAACrvL,IAAO3N,OAAS,CACzD,EACAg2M,GAAOzyL,SAAW,SAAUwhE,EAASp3E,GAInC,OAHKo3E,EAAQ9gE,eAAiB8gE,KAAai4G,IACzCD,GAAYh4G,GAEPxhE,GAASwhE,EAASp3E,EAC3B,EACAqoM,GAAOvuK,KAAO,SAAU95B,EAAMrR,IACvBqR,EAAKsW,eAAiBtW,KAAUqvL,IACnCD,GAAYpvL,GAEd,IAAI+J,EAAK6kL,GAAK2d,WAAW59M,EAAK+G,eAAgByB,EAAM4S,GAAM6gL,GAAOj9L,KAAKihM,GAAK2d,WAAY59M,EAAK+G,eAAiBqU,EAAG/J,EAAMrR,GAAO2gM,SAAkB7+L,EAC/I,YAAeA,IAAR0G,EAAoBA,EAAMw3L,GAAQp3J,aAAe+3J,GAAiBtvL,EAAKrJ,aAAahI,IAASwI,EAAM6I,EAAKwsM,iBAAiB79M,KAAUwI,EAAIs1M,UAAYt1M,EAAI/I,MAAQ,IACxK,EACAi6M,GAAOtnM,MAAQ,SAAU1Q,GACvB,MAAM,IAAIC,MAAM,0CAA4CD,EAC9D,EACAg4M,GAAOqE,WAAa,SAAUroL,GAC5B,IAAIrkB,EAAM2sM,EAAa,GAAIrpL,EAAI,EAAGnxB,EAAI,EAItC,GAHAg9L,IAAgBR,GAAQie,iBACxB1d,IAAaP,GAAQke,YAAcxoL,EAAQvZ,MAAM,GACjDuZ,EAAQ5sB,KAAKwuM,IACT9W,GAAc,CAChB,KAAOnvL,EAAOqkB,EAAQlyB,MAChB6N,IAASqkB,EAAQlyB,KACnBmxB,EAAIqpL,EAAW56M,KAAKI,IAGxB,KAAOmxB,KACLe,EAAQknE,OAAOohH,EAAWrpL,GAAI,EAElC,CAEA,OADA4rK,GAAY,KACL7qK,CACT,EACAlwB,GAAUk0M,GAAOl0M,QAAU,SAAU6L,GACnC,IAAIlE,EAAMunB,EAAM,GAAIlxB,EAAI,EAAG8G,EAAW+G,EAAK/G,SAC3C,GAAKA,GAIE,GAAiB,IAAbA,GAA+B,IAAbA,GAA+B,KAAbA,EAAiB,CAC9D,GAAgC,iBAArB+G,EAAK1H,YACd,OAAO0H,EAAK1H,YAEZ,IAAK0H,EAAOA,EAAK5J,WAAY4J,EAAMA,EAAOA,EAAKoe,YAC7CiF,GAAOlvB,GAAQ6L,EAGrB,MAAO,GAAiB,IAAb/G,GAA+B,IAAbA,EAC3B,OAAO+G,EAAKm8C,eAZZ,KAAOrgD,EAAOkE,EAAK7N,MACjBkxB,GAAOlvB,GAAQ2H,GAanB,OAAOunB,CACT,EACAurK,GAAOyZ,GAAOhpI,UAAY,CACxBypI,YAAa,GACbgE,aAAc/D,GACdlzL,MAAOmxL,GACPuF,WAAY,CAAC,EACb58I,KAAM,CAAC,EACPjlB,SAAU,CACR,IAAK,CACH7F,IAAK,aACLg3B,OAAO,GAET,IAAK,CAAEh3B,IAAK,cACZ,IAAK,CACHA,IAAK,kBACLg3B,OAAO,GAET,IAAK,CAAEh3B,IAAK,oBAEd2lK,UAAW,CACTpD,KAAM,SAAUvxL,GAMd,OALAA,EAAM,GAAKA,EAAM,GAAGpd,QAAQsvM,GAAWC,IACvCnyL,EAAM,IAAMA,EAAM,IAAMA,EAAM,IAAMA,EAAM,IAAM,IAAIpd,QAAQsvM,GAAWC,IACtD,OAAbnyL,EAAM,KACRA,EAAM,GAAK,IAAMA,EAAM,GAAK,KAEvBA,EAAM/K,MAAM,EAAG,EACxB,EACAw8L,MAAO,SAAUzxL,GAWf,OAVAA,EAAM,GAAKA,EAAM,GAAGngB,cACS,QAAzBmgB,EAAM,GAAG/K,MAAM,EAAG,IACf+K,EAAM,IACTwyL,GAAOtnM,MAAM8U,EAAM,IAErBA,EAAM,KAAOA,EAAM,GAAKA,EAAM,IAAMA,EAAM,IAAM,GAAK,GAAkB,SAAbA,EAAM,IAA8B,QAAbA,EAAM,KACvFA,EAAM,KAAOA,EAAM,GAAKA,EAAM,IAAmB,QAAbA,EAAM,KACjCA,EAAM,IACfwyL,GAAOtnM,MAAM8U,EAAM,IAEdA,CACT,EACAwxL,OAAQ,SAAUxxL,GAChB,IAAIk3L,EAAQC,GAAYn3L,EAAM,IAAMA,EAAM,GAC1C,OAAImxL,GAAUM,MAAM5wM,KAAKmf,EAAM,IACtB,MAELA,EAAM,GACRA,EAAM,GAAKA,EAAM,IAAMA,EAAM,IAAM,GAC1Bm3L,GAAYlG,GAAQpwM,KAAKs2M,KAAcD,EAASje,GAASke,GAAU,MAAWD,EAASC,EAASn7M,QAAQ,IAAKm7M,EAAS36M,OAAS06M,GAAUC,EAAS36M,UAC3JwjB,EAAM,GAAKA,EAAM,GAAG/K,MAAM,EAAGiiM,GAC7Bl3L,EAAM,GAAKm3L,EAASliM,MAAM,EAAGiiM,IAExBl3L,EAAM/K,MAAM,EAAG,GACxB,GAEF7Z,OAAQ,CACNk2M,IAAK,SAAU8F,GACb,IAAIx3M,EAAWw3M,EAAiBx0M,QAAQsvM,GAAWC,IAAWtyM,cAC9D,MAA4B,MAArBu3M,EAA2B,WAChC,OAAO,CACT,EAAI,SAAUjtM,GACZ,OAAOA,EAAKvK,UAAYuK,EAAKvK,SAASC,gBAAkBD,CAC1D,CACF,EACAyxM,MAAO,SAAUhuM,GACf,IAAI4gK,EAAU+rC,GAAW3sM,EAAY,KACrC,OAAO4gK,IAAYA,EAAU,IAAItzE,OAAO,0BAA2BttF,EAAY,IAAMqtM,GAAa,SAAWV,GAAW3sM,GAAW,SAAU8G,GAC3I,OAAO85J,EAAQpjK,KAA+B,iBAAnBsJ,EAAK9G,WAA0B8G,EAAK9G,kBAAoB8G,EAAKrJ,eAAiBuvM,IAAgBlmM,EAAKrJ,aAAa,UAAY,GACzJ,GACF,EACAywM,KAAM,SAAUz4M,EAAMu+M,EAAUnyC,GAC9B,OAAO,SAAU/6J,GACf,IAAIwlB,EAAS6iL,GAAOvuK,KAAK95B,EAAMrR,GAC/B,OAAc,MAAV62B,EACkB,OAAb0nL,GAEJA,IAGL1nL,GAAU,GACU,MAAb0nL,EAAmB1nL,IAAWu1I,EAAqB,OAAbmyC,EAAoB1nL,IAAWu1I,EAAqB,OAAbmyC,EAAoBnyC,GAAmC,IAA1Bv1I,EAAO3zB,QAAQkpK,GAA4B,OAAbmyC,EAAoBnyC,GAASv1I,EAAO3zB,QAAQkpK,IAAU,EAAiB,OAAbmyC,EAAoBnyC,GAASv1I,EAAO1a,OAAOiwJ,EAAM1oK,UAAY0oK,EAAqB,OAAbmyC,GAAqB,IAAM1nL,EAAS,KAAK3zB,QAAQkpK,IAAU,EAAiB,OAAbmyC,IAAoB1nL,IAAWu1I,GAASv1I,EAAO1a,MAAM,EAAGiwJ,EAAM1oK,OAAS,KAAO0oK,EAAQ,KACra,CACF,EACAusC,MAAO,SAAUn5M,EAAMg/M,EAAM/D,EAAUvtI,EAAOje,GAC5C,IAAIuC,EAA8B,QAArBhyD,EAAK2c,MAAM,EAAG,GAAcsiM,EAA6B,SAAnBj/M,EAAK2c,OAAO,GAAeuiM,EAAkB,YAATF,EACvF,OAAiB,IAAVtxI,GAAwB,IAATje,EAAa,SAAU59C,GAC3C,QAASA,EAAK/C,UAChB,EAAI,SAAU+C,EAAMo3E,EAASyyH,GAC3B,IAAIx+G,EAAO0+G,EAAYjuM,EAAMmtM,EAAMqE,EAAW1/L,EAAOi3B,EAAMsb,IAAWitJ,EAAU,cAAgB,kBAAmBz2L,EAAS3W,EAAK/C,WAAYtO,EAAO0+M,GAAUrtM,EAAKvK,SAASC,cAAe63M,GAAY1D,IAAQwD,EAC/M,GAAI12L,EAAQ,CACV,GAAIwpC,EAAQ,CACV,KAAOtb,GAAK,CAEV,IADA/oC,EAAOkE,EACAlE,EAAOA,EAAK+oC,IACjB,GAAIwoK,EAASvxM,EAAKrG,SAASC,gBAAkB/G,EAAyB,IAAlBmN,EAAK7C,SACvD,OAAO,EAGX2U,EAAQi3B,EAAe,SAAT12C,IAAoByf,GAAS,aAC7C,CACA,OAAO,CACT,CAEA,GADAA,EAAQ,CAACw/L,EAAUz2L,EAAOvgB,WAAaugB,EAAOy1K,WAC1CghB,GAAWG,GAMb,IAHAD,GADAjiH,GADA0+G,EAAapzL,EAAOguL,MAAahuL,EAAOguL,IAAW,CAAC,IACjCx2M,IAAS,IACV,KAAOy3M,IAAWv6G,EAAM,GAC1C49G,EAAO59G,EAAM,KAAOu6G,IAAWv6G,EAAM,GACrCvvF,EAAOwxM,GAAa32L,EAAO/H,WAAW0+L,GAC/BxxM,IAASwxM,GAAaxxM,GAAQA,EAAK+oC,KAASokK,EAAOqE,EAAY,IAAM1/L,EAAM69E,OAChF,GAAsB,IAAlB3vF,EAAK7C,YAAoBgwM,GAAQntM,IAASkE,EAAM,CAClD+pM,EAAW57M,GAAQ,CACjBy3M,GACA0H,EACArE,GAEF,KACF,OAEG,GAAIsE,IAAaliH,GAASrrF,EAAK2kM,MAAa3kM,EAAK2kM,IAAW,CAAC,IAAIx2M,KAAUk9F,EAAM,KAAOu6G,GAC7FqD,EAAO59G,EAAM,QAEb,MAAOvvF,IAASwxM,GAAaxxM,GAAQA,EAAK+oC,KAASokK,EAAOqE,EAAY,IAAM1/L,EAAM69E,UAC3E4hH,EAASvxM,EAAKrG,SAASC,gBAAkB/G,EAAyB,IAAlBmN,EAAK7C,cAAqBgwM,IACzEsE,KACDzxM,EAAK6oM,MAAa7oM,EAAK6oM,IAAW,CAAC,IAAIx2M,GAAQ,CAC9Cy3M,GACAqD,IAGAntM,IAASkE,MAOnB,OADAipM,GAAQrrJ,KACQie,GAASotI,EAAOptI,GAAU,GAAKotI,EAAOptI,GAAS,CACjE,CACF,CACF,EACAwrI,OAAQ,SAAUmG,EAAQpE,GACxB,IAAI1/L,EAAMK,EAAK6kL,GAAK6X,QAAQ+G,IAAW5e,GAAK0a,WAAWkE,EAAO93M,gBAAkB2yM,GAAOtnM,MAAM,uBAAyBysM,GACtH,OAAIzjM,EAAG46L,IACE56L,EAAGq/L,GAERr/L,EAAG1X,OAAS,GACdqX,EAAO,CACL8jM,EACAA,EACA,GACApE,GAEKxa,GAAK0a,WAAWv0M,eAAey4M,EAAO93M,eAAiBqzM,IAAa,SAAUT,EAAM90L,GAEzF,IADA,IAAI83E,EAAKmiH,EAAU1jM,EAAGu+L,EAAMc,GAAWj3M,EAAIs7M,EAAQp7M,OAC5CF,KAELm2M,EADAh9G,EAAMz5F,GAAQlE,KAAK26M,EAAMmF,EAAQt7M,OACnBqhB,EAAQ83E,GAAOmiH,EAAQt7M,GAEzC,IAAK,SAAU6N,GACb,OAAO+J,EAAG/J,EAAM,EAAG0J,EACrB,GAEKK,CACT,GAEF08L,QAAS,CACPt8L,IAAK4+L,IAAa,SAAU5zL,GAC1B,IAAIoP,EAAQ,GAAIF,EAAU,GAAIolL,EAAU1a,GAAQ55K,EAAS1c,QAAQiuM,GAAO,OACxE,OAAO+C,EAAQ9E,IAAWoE,IAAa,SAAUT,EAAM90L,EAAS4jE,EAASyyH,GAEvE,IADA,IAAI7pM,EAAMoqM,EAAYX,EAAQnB,EAAM,KAAMuB,EAAK,IAAK13M,EAAIm2M,EAAKj2M,OACtDF,MACD6N,EAAOoqM,EAAUj4M,MACnBm2M,EAAKn2M,KAAOqhB,EAAQrhB,GAAK6N,GAG/B,IAAK,SAAUA,EAAMo3E,EAASyyH,GAI5B,OAHAtlL,EAAM,GAAKvkB,EACXypM,EAAQllL,EAAO,KAAMslL,EAAKxlL,GAC1BE,EAAM,GAAK,MACHF,EAAQonE,KAClB,CACF,IACAv2F,IAAK6zM,IAAa,SAAU5zL,GAC1B,OAAO,SAAUnV,GACf,OAAOqoM,GAAOlzL,EAAUnV,GAAM3N,OAAS,CACzC,CACF,IACAujB,SAAUmzL,IAAa,SAAU90M,GAE/B,OADAA,EAAOA,EAAKwE,QAAQsvM,GAAWC,IACxB,SAAUhoM,GACf,OAAQA,EAAK1H,aAAe0H,EAAK3H,WAAalE,GAAQ6L,IAAOnO,QAAQoC,IAAS,CAChF,CACF,IACA4pK,KAAMkrC,IAAa,SAAUlrC,GAK3B,OAJKkpC,GAAYrwM,KAAKmnK,GAAQ,KAC5BwqC,GAAOtnM,MAAM,qBAAuB88J,GAEtCA,EAAOA,EAAKplK,QAAQsvM,GAAWC,IAAWtyM,cACnC,SAAUsK,GACf,IAAI0tM,EACJ,GACE,GAAIA,EAAWpe,GAAiBtvL,EAAK69J,KAAO79J,EAAKrJ,aAAa,aAAeqJ,EAAKrJ,aAAa,QAE7F,OADA+2M,EAAWA,EAASh4M,iBACAmoK,GAAyC,IAAjC6vC,EAAS77M,QAAQgsK,EAAO,YAE9C79J,EAAOA,EAAK/C,aAAiC,IAAlB+C,EAAK/G,UAC1C,OAAO,CACT,CACF,IACAQ,OAAQ,SAAUuG,GAChB,IAAIo6J,EAAOx1J,OAAOohK,UAAYphK,OAAOohK,SAAS5L,KAC9C,OAAOA,GAAQA,EAAKtvJ,MAAM,KAAO9K,EAAKpS,EACxC,EACAg8C,KAAM,SAAU5pC,GACd,OAAOA,IAAS0/I,EAClB,EACAvlJ,MAAO,SAAU6F,GACf,OAAOA,IAASqvL,GAAWxlJ,iBAAmBwlJ,GAAW1lJ,UAAY0lJ,GAAW1lJ,gBAAkB3pC,EAAK7R,MAAQ6R,EAAKtG,OAASsG,EAAKw6I,SACpI,EACAnqB,QAAS,SAAUrwH,GACjB,OAAyB,IAAlBA,EAAKkwD,QACd,EACAA,SAAU,SAAUlwD,GAClB,OAAyB,IAAlBA,EAAKkwD,QACd,EACAuV,QAAS,SAAUzlE,GACjB,IAAIvK,EAAWuK,EAAKvK,SAASC,cAC7B,MAAoB,UAAbD,KAA0BuK,EAAKylE,SAAwB,WAAbhwE,KAA2BuK,EAAKyyD,QACnF,EACAA,SAAU,SAAUzyD,GAIlB,OAHIA,EAAK/C,YACP+C,EAAK/C,WAAW0wM,eAEO,IAAlB3tM,EAAKyyD,QACd,EACAh0C,MAAO,SAAUze,GACf,IAAKA,EAAOA,EAAK5J,WAAY4J,EAAMA,EAAOA,EAAKoe,YAC7C,GAAIpe,EAAK/G,SAAW,EAClB,OAAO,EAGX,OAAO,CACT,EACA0d,OAAQ,SAAU3W,GAChB,OAAQ4uL,GAAK6X,QAAQhoL,MAAMze,EAC7B,EACA0iI,OAAQ,SAAU1iI,GAChB,OAAO0nM,GAAQhxM,KAAKsJ,EAAKvK,SAC3B,EACA8uB,MAAO,SAAUvkB,GACf,OAAOynM,GAAQ/wM,KAAKsJ,EAAKvK,SAC3B,EACA6yH,OAAQ,SAAUtoH,GAChB,IAAIrR,EAAOqR,EAAKvK,SAASC,cACzB,MAAgB,UAAT/G,GAAkC,WAAdqR,EAAK7R,MAA8B,WAATQ,CACvD,EACAsF,KAAM,SAAU+L,GACd,IAAI85B,EACJ,MAAuC,UAAhC95B,EAAKvK,SAASC,eAA2C,SAAdsK,EAAK7R,OAA0D,OAArC2rC,EAAO95B,EAAKrJ,aAAa,UAA2C,SAAvBmjC,EAAKpkC,cAChI,EACAmmE,MAAOstI,IAAuB,WAC5B,MAAO,CAAC,EACV,IACAvrJ,KAAMurJ,IAAuB,SAAUE,EAAch3M,GACnD,MAAO,CAACA,EAAS,EACnB,IACAojB,GAAI0zL,IAAuB,SAAUE,EAAch3M,EAAQ+2M,GACzD,MAAO,CAACA,EAAW,EAAIA,EAAW/2M,EAAS+2M,EAC7C,IACAwE,KAAMzE,IAAuB,SAAUE,EAAch3M,GAEnD,IADA,IAAIF,EAAI,EACDA,EAAIE,EAAQF,GAAK,EACtBk3M,EAAat3M,KAAKI,GAEpB,OAAOk3M,CACT,IACAwE,IAAK1E,IAAuB,SAAUE,EAAch3M,GAElD,IADA,IAAIF,EAAI,EACDA,EAAIE,EAAQF,GAAK,EACtBk3M,EAAat3M,KAAKI,GAEpB,OAAOk3M,CACT,IACAyE,GAAI3E,IAAuB,SAAUE,EAAch3M,EAAQ+2M,GAEzD,IADA,IAAIj3M,EAAIi3M,EAAW,EAAIA,EAAW/2M,EAAS+2M,IAClCj3M,GAAK,GACZk3M,EAAat3M,KAAKI,GAEpB,OAAOk3M,CACT,IACA0E,GAAI5E,IAAuB,SAAUE,EAAch3M,EAAQ+2M,GAEzD,IADA,IAAIj3M,EAAIi3M,EAAW,EAAIA,EAAW/2M,EAAS+2M,IAClCj3M,EAAIE,GACXg3M,EAAat3M,KAAKI,GAEpB,OAAOk3M,CACT,MAGJza,GAAK6X,QAAQuH,IAAMpf,GAAK6X,QAAQhxL,GAChCuyK,EAAO,CACL,QACA,WACA,OACA,WACA,UACC,SAAU71L,GACXy8L,GAAK6X,QAAQt0M,GA5hBf,SAA2BhE,GACzB,OAAO,SAAU6R,GAEf,MAAgB,UADLA,EAAKvK,SAASC,eACEsK,EAAK7R,OAASA,CAC3C,CACF,CAuhBoB8/M,CAAkB97M,EACtC,IACA61L,EAAO,CACL,SACA,UACC,SAAU71L,GACXy8L,GAAK6X,QAAQt0M,GA5hBf,SAA4BhE,GAC1B,OAAO,SAAU6R,GACf,IAAIrR,EAAOqR,EAAKvK,SAASC,cACzB,OAAiB,UAAT/G,GAA6B,WAATA,IAAsBqR,EAAK7R,OAASA,CAClE,CACF,CAuhBoB+/M,CAAmB/7M,EACvC,IAGAm3M,GAAW96M,UAAYogM,GAAKuf,QAAUvf,GAAK6X,QAC3C7X,GAAK0a,WAAa,IAAIA,GACtBxa,GAAWuZ,GAAOvZ,SAAW,SAAU35K,EAAUi5L,GAC/C,IAAIX,EAAS53L,EAAO0zL,EAAQp7M,EAAMkgN,EAAOriE,EAAQsiE,EAAY/+L,EAASw2L,GAAW5wL,EAAW,KAC5F,GAAI5F,EACF,OAAO6+L,EAAY,EAAI7+L,EAAOzE,MAAM,GAKtC,IAHAujM,EAAQl5L,EACR62H,EAAS,GACTsiE,EAAa1f,GAAK4b,UACX6D,GAAO,CAgBZ,IAAKlgN,KAfAs/M,KAAY53L,EAAQ8wL,GAAOl9G,KAAK4kH,MAC/Bx4L,IACFw4L,EAAQA,EAAMvjM,MAAM+K,EAAM,GAAGxjB,SAAWg8M,GAE1CriE,EAAOj6I,KAAKw3M,EAAS,KAEvBkE,GAAU,GACN53L,EAAQ+wL,GAAan9G,KAAK4kH,MAC5BZ,EAAU53L,EAAMkuE,QAChBwlH,EAAOx3M,KAAK,CACV3D,MAAOq/M,EACPt/M,KAAM0nB,EAAM,GAAGpd,QAAQiuM,GAAO,OAEhC2H,EAAQA,EAAMvjM,MAAM2iM,EAAQp7M,SAEjBu8L,GAAK39L,OACX29L,GAAK39L,OAAO8D,eAAe5G,OAG3B0nB,EAAQmxL,GAAU74M,GAAMs7F,KAAK4kH,KAAaC,EAAWngN,MAAU0nB,EAAQy4L,EAAWngN,GAAM0nB,MAC3F43L,EAAU53L,EAAMkuE,QAChBwlH,EAAOx3M,KAAK,CACV3D,MAAOq/M,EACPt/M,KAAMA,EACNqlB,QAASqC,IAEXw4L,EAAQA,EAAMvjM,MAAM2iM,EAAQp7M,UAGhC,IAAKo7M,EACH,KAEJ,CACA,OAAOW,EAAYC,EAAMh8M,OAASg8M,EAAQhG,GAAOtnM,MAAMoU,GAAY4wL,GAAW5wL,EAAU62H,GAAQlhI,MAAM,EACxG,EAuNAikL,GAAUsZ,GAAOtZ,QAAU,SAAU55K,EAAUU,GAC7C,IAAI1jB,EAAGo8M,EAAc,GAAIC,EAAkB,GAAIj/L,EAASy2L,GAAc7wL,EAAW,KACjF,IAAK5F,EAAQ,CAKX,IAJKsG,IACHA,EAAQi5K,GAAS35K,IAEnBhjB,EAAI0jB,EAAMxjB,OACHF,MACLod,EAAS47L,GAAkBt1L,EAAM1jB,KACtBwyM,IACT4J,EAAYx8M,KAAKwd,GAEjBi/L,EAAgBz8M,KAAKwd,GAGzBA,EAASy2L,GAAc7wL,EAxE3B,SAAkCq5L,EAAiBD,GACjD,IAAIE,EAAQF,EAAYl8M,OAAS,EAAGq8M,EAAYF,EAAgBn8M,OAAS,EAAGs8M,EAAe,SAAUrG,EAAMlxH,EAASyyH,EAAKxlL,EAASuqL,GAC9H,IAAI5uM,EAAMsjB,EAAGmmL,EAASoF,EAAe,EAAG18M,EAAI,IAAKi4M,EAAY9B,GAAQ,GAAIwG,EAAa,GAAIC,EAAgB9f,GAAkBl/D,EAAQu4E,GAAQoG,GAAa9f,GAAKj/H,KAAKw3I,IAAI,IAAKyH,GAAYI,EAAgBpJ,IAA4B,MAAjBmJ,EAAwB,EAAIlvL,KAAKyU,UAAY,GAAKliC,EAAM29H,EAAM19H,OAIjR,IAHIu8M,IACF3f,GAAmB73G,IAAYi4G,IAAcj4G,GAExCjlF,IAAMC,GAA4B,OAApB4N,EAAO+vH,EAAM59H,IAAaA,IAAK,CAClD,GAAIu8M,GAAa1uM,EAAM,CAErB,IADAsjB,EAAI,EACGmmL,EAAU+E,EAAgBlrL,MAC/B,GAAImmL,EAAQzpM,EAAMo3E,EAASyyH,GAAM,CAC/BxlL,EAAQtyB,KAAKiO,GACb,KACF,CAEE4uM,IACFhJ,GAAUoJ,EAEd,CACIP,KACEzuM,GAAQypM,GAAWzpM,IACrB6uM,IAEEvG,GACF8B,EAAUr4M,KAAKiO,GAGrB,CAEA,GADA6uM,GAAgB18M,EACZs8M,GAASt8M,IAAM08M,EAAc,CAE/B,IADAvrL,EAAI,EACGmmL,EAAU8E,EAAYjrL,MAC3BmmL,EAAQW,EAAW0E,EAAY13H,EAASyyH,GAE1C,GAAIvB,EAAM,CACR,GAAIuG,EAAe,EACjB,KAAO18M,KACCi4M,EAAUj4M,IAAM28M,EAAW38M,KAC/B28M,EAAW38M,GAAKs5F,GAAI99F,KAAK02B,IAI/ByqL,EAAa3E,GAAS2E,EACxB,CACAzI,GAAO/zM,MAAM+xB,EAASyqL,GAClBF,IAActG,GAAQwG,EAAWz8M,OAAS,GAAKw8M,EAAeN,EAAYl8M,OAAS,GACrFg2M,GAAOqE,WAAWroL,EAEtB,CAKA,OAJIuqL,IACFhJ,GAAUoJ,EACV/f,GAAmB8f,GAEd3E,CACT,EACF,OAAOqE,EAAQ1F,GAAa4F,GAAgBA,CAC9C,CAgBqCM,CAAyBT,EAAiBD,IAC3Eh/L,EAAO4F,SAAWA,CACpB,CACA,OAAO5F,CACT,EACAy/K,GAAWqZ,GAAOpwM,OAAS,SAAUkd,EAAUiiE,EAAS/yD,EAASikL,GAC/D,IAAIn2M,EAAGo3M,EAAQ2F,EAAO/gN,EAAMwhE,EAAMw/I,EAA+B,mBAAbh6L,GAA2BA,EAAUU,GAASyyL,GAAQxZ,GAAS35K,EAAWg6L,EAASh6L,UAAYA,GAEnJ,GADAkP,EAAUA,GAAW,GACA,IAAjBxO,EAAMxjB,OAAc,CAEtB,IADAk3M,EAAS1zL,EAAM,GAAKA,EAAM,GAAG/K,MAAM,IACxBzY,OAAS,GAAkC,QAA5B68M,EAAQ3F,EAAO,IAAIp7M,MAAiBwgM,GAAQx1F,SAAgC,IAArB/hB,EAAQn+E,UAAkBq2L,IAAkBV,GAAKlkJ,SAAS6+J,EAAO,GAAGp7M,MAAO,CAE1J,KADAipF,GAAWw3G,GAAKj/H,KAAKs3I,GAAGiI,EAAM17L,QAAQ,GAAG/a,QAAQsvM,GAAWC,IAAY5wH,IAAY,IAAI,IAEtF,OAAO/yD,EACE8qL,IACT/3H,EAAUA,EAAQn6E,YAEpBkY,EAAWA,EAASrK,MAAMy+L,EAAOxlH,QAAQ31F,MAAMiE,OACjD,CAEA,IADAF,EAAI60M,GAAUQ,aAAa9wM,KAAKye,GAAY,EAAIo0L,EAAOl3M,OAChDF,MACL+8M,EAAQ3F,EAAOp3M,IACXy8L,GAAKlkJ,SAASv8C,EAAO+gN,EAAM/gN,QAG/B,IAAIwhE,EAAOi/H,GAAKj/H,KAAKxhE,MACfm6M,EAAO34I,EAAKu/I,EAAM17L,QAAQ,GAAG/a,QAAQsvM,GAAWC,IAAYH,GAASnxM,KAAK6yM,EAAO,GAAGp7M,OAASy6M,GAAYxxH,EAAQn6E,aAAem6E,IAAU,CAG5I,GAFAmyH,EAAOh+G,OAAOp5F,EAAG,KACjBgjB,EAAWmzL,EAAKj2M,QAAUs2M,GAAWY,IAGnC,OADAlD,GAAO/zM,MAAM+xB,EAASikL,GACfjkL,EAET,KACF,CAGN,CAEA,OADC8qL,GAAYpgB,GAAQ55K,EAAUU,IAAQyyL,EAAMlxH,GAAUk4G,GAAgBjrK,EAASwjL,GAASnxM,KAAKye,IAAayzL,GAAYxxH,EAAQn6E,aAAem6E,GACvI/yD,CACT,EACAsqK,GAAQke,WAAalI,GAAQ1tM,MAAM,IAAIQ,KAAKwuM,IAAWvuM,KAAK,MAAQitM,GACpEhW,GAAQie,mBAAqBzd,GAC7BC,KACAT,GAAQsd,cAAe,EAEvB,IAAIh0L,GAAM1T,SACNxS,GAAOxD,MAAMC,UAAUuD,KACvB+Y,GAAQvc,MAAMC,UAAUsc,MACxBskM,GAAa,2CACbC,GAAU3K,GAAWzB,MACrBqM,GAAcvhN,GAAMw7I,QAAQ,+BAC5BgmE,GAAY,SAAUp6M,GACxB,YAAsB,IAARA,CAChB,EACIrG,GAAW,SAAUqG,GACvB,MAAsB,iBAARA,CAChB,EAIIq6M,GAAmB,SAAUjhM,EAAMkhM,GAErC,IAGI3zM,EAHAq3B,GADJs8K,EAAUA,GAAWx3L,IACGzT,cAAc,OAClCkrM,EAAOD,EAAQz8K,yBAGnB,IAFAG,EAAUzkB,UAAYH,EAEfzS,EAAOq3B,EAAU/8B,YACtBs5M,EAAKpyM,YAAYxB,GAEnB,OAAO4zM,CACT,EACIC,GAAgB,SAAUC,EAAaC,EAAYrvM,EAAU0L,GAC/D,IAAI/Z,EACJ,GAAIrD,GAAS+gN,GACXA,EAAaL,GAAiBK,EAAYC,GAAmBF,EAAY,UACpE,GAAIC,EAAWx9M,SAAWw9M,EAAW52M,SAAU,CAEpD,GADA42M,EAAaE,GAASC,UAAUH,GAC5B3jM,EACF,IAAK/Z,EAAI09M,EAAWx9M,OAAS,EAAGF,GAAK,EAAGA,IACtCw9M,GAAcC,EAAaC,EAAW19M,GAAIqO,EAAU0L,QAGtD,IAAK/Z,EAAI,EAAGA,EAAI09M,EAAWx9M,OAAQF,IACjCw9M,GAAcC,EAAaC,EAAW19M,GAAIqO,EAAU0L,GAGxD,OAAO0jM,CACT,CACA,GAAIC,EAAW52M,SAEb,IADA9G,EAAIy9M,EAAYv9M,OACTF,KACLqO,EAAS7S,KAAKiiN,EAAYz9M,GAAI09M,GAGlC,OAAOD,CACT,EACIK,GAAW,SAAUn0M,EAAM5C,GAC7B,OAAO4C,GAAQ5C,IAA8E,KAAhE,IAAM4C,EAAK5C,UAAY,KAAKrH,QAAQ,IAAMqH,EAAY,IACrF,EACIwzB,GAAS,SAAUr2B,EAAUwoB,EAAS3U,GACxC,IAAIgmM,EAAYC,EAahB,OAZAtxL,EAAUkxL,GAASlxL,GAAS,GAC5BxoB,EAASxF,MAAK,WACZ,IAAIS,EAAO0D,KACNkV,GAAOgmM,IAAe5+M,EAAK2L,aAC9BizM,EAAa5+M,EAAK2L,WAClBkzM,EAAatxL,EAAQwU,WAAU,GAC/B/hC,EAAK2L,WAAWC,aAAaizM,EAAY7+M,IAGzC6+M,EAAW7yM,YAAYhM,EAE3B,IACO+E,CACT,EACI+5M,GAAgBriN,GAAMw7I,QAAQ,uEAAwE,KACtG8mE,GAAatiN,GAAMw7I,QAAQ,gGAAiG,KAC5H+mE,GAAU,CACZC,IAAK,UACLz1M,MAAO,YACPonF,SAAU,YAERsuH,GAAS,CAAEC,MAAO,YAClBC,GAAY,CAAC,EAAGC,GAAW,CAAC,EAC5BC,GAAsB,SAAUz7L,EAAUiiE,GAC5C,OAAO,IAAI24H,GAAShmM,GAAGitB,KAAK7hB,EAAUiiE,EACxC,EAcIy5H,GAAmB,aACnB7iM,GAAS,SAAUN,GACrB,OAAOA,QAAoC,IAAM,GAAKA,GAAKjV,QAAQo4M,GAAkB,GACvF,EACIC,GAAS,SAAU37M,EAAKqL,GAC1B,IAAInO,EAAQ+C,EAAKjD,EAAG/D,EACpB,GAAI+G,EAEF,QAAe1E,KADf4B,EAAS8C,EAAI9C,SAEX,IAAK+C,KAAOD,EACV,GAAIA,EAAIJ,eAAeK,KACrBhH,EAAQ+G,EAAIC,IAC6B,IAArCoL,EAAS7S,KAAKS,EAAOgH,EAAKhH,IAC5B,WAKN,IAAK+D,EAAI,EAAGA,EAAIE,IACdjE,EAAQ+G,EAAIhD,IAC2B,IAAnCqO,EAAS7S,KAAKS,EAAO+D,EAAG/D,IAFN+D,KAQ5B,OAAOgD,CACT,EACI47M,GAAS,SAAU3lM,EAAO5K,GAC5B,IAAIxM,EAAM,GAMV,OALA88M,GAAO1lM,GAAO,SAAUjZ,EAAGyB,GACrB4M,EAAS5M,EAAMzB,IACjB6B,EAAIjC,KAAK6B,EAEb,IACOI,CACT,EACI87M,GAAqB,SAAU/oM,GACjC,OAAKA,EAGoB,IAArBA,EAAQ9N,SACH8N,EAEFA,EAAQuP,cALN2B,EAMX,EACA24L,GAAoB7mM,GAAK6mM,GAAoBpiN,UAAY,CACvDE,YAAakiN,GACbz7L,SAAU,GACViiE,QAAS,KACT/kF,OAAQ,EACR2kC,KAAM,SAAU7hB,EAAUiiE,GACxB,IACIvhE,EAAO/Z,EADPxK,EAAO0D,KAEX,IAAKmgB,EACH,OAAO7jB,EAET,GAAI6jB,EAASlc,SAGX,OAFA3H,EAAK8lF,QAAU9lF,EAAK,GAAK6jB,EACzB7jB,EAAKe,OAAS,EACPf,EAET,GAAI8lF,GAAWA,EAAQn+E,SACrB3H,EAAK8lF,QAAUA,MACV,CACL,GAAIA,EACF,OAAO24H,GAAS56L,GAAU2kB,KAAKs9C,GAEjC9lF,EAAK8lF,QAAUA,EAAU7yE,QAC3B,CACA,GAAIzV,GAASqmB,GAAW,CAWtB,GAVA7jB,EAAK6jB,SAAWA,IAEdU,EADyB,MAAvBV,EAASmhE,OAAO,IAAuD,MAAzCnhE,EAASmhE,OAAOnhE,EAAS9iB,OAAS,IAAc8iB,EAAS9iB,QAAU,EAC3F,CACN,KACA8iB,EACA,MAGMi6L,GAAW3lH,KAAKt0E,IAqBxB,OAAO46L,GAAS34H,GAASznB,KAAKx6C,GAlB9B,GAAIU,EAAM,GAER,IADA/Z,EAAO0zM,GAAiBr6L,EAAU26L,GAAmB14H,IAAUhhF,WACxD0F,GACL/J,GAAKpE,KAAK2D,EAAMwK,GAChBA,EAAOA,EAAKsiB,gBAET,CAEL,KADAtiB,EAAOg0M,GAAmB14H,GAAS43C,eAAen5G,EAAM,KAEtD,OAAOvkB,EAET,GAAIwK,EAAKlO,KAAOioB,EAAM,GACpB,OAAOvkB,EAAKq+D,KAAKx6C,GAEnB7jB,EAAKe,OAAS,EACdf,EAAK,GAAKwK,CACZ,CAIJ,MACE9G,KAAKvH,IAAI0nB,GAAU,GAErB,OAAO7jB,CACT,EACAJ,QAAS,WACP,OAAOnD,GAAMmD,QAAQ8D,KACvB,EACAvH,IAAK,SAAU4G,EAAOoD,GACpB,IACI42L,EAAOl8L,EADPb,EAAO0D,KAEX,GAAIlG,GAASuF,GACX,OAAO/C,EAAK7D,IAAIsiN,GAAS17M,IAE3B,IAAa,IAAToD,EAGF,IAFA42L,EAAQ0hB,GAASh8K,OAAOziC,EAAKJ,UAAUoG,OAAOy4M,GAASC,UAAU37M,KACjE/C,EAAKe,OAASg8L,EAAMh8L,OACfF,EAAI,EAAGA,EAAIk8L,EAAMh8L,OAAQF,IAC5Bb,EAAKa,GAAKk8L,EAAMl8L,QAGlBJ,GAAKO,MAAMhB,EAAMy+M,GAASC,UAAU37M,IAEtC,OAAO/C,CACT,EACAwoC,KAAM,SAAUnrC,EAAMP,GACpB,IACI4iN,EADA1/M,EAAO0D,KAEX,GAAoB,iBAATrG,EACTmiN,GAAOniN,GAAM,SAAUA,EAAMP,GAC3BkD,EAAKwoC,KAAKnrC,EAAMP,EAClB,QACK,KAAImhN,GAAUnhN,GAgBd,CACL,GAAIkD,EAAK,IAA2B,IAArBA,EAAK,GAAG2H,SAAgB,CAErC,IADA+3M,EAAON,GAAU/hN,KACLqiN,EAAK92L,IACf,OAAO82L,EAAK92L,IAAI5oB,EAAK,GAAI3C,GAE3B,GAAI0hN,GAAW1hN,GACb,OAAO2C,EAAKwxB,KAAKn0B,GAAQA,OAAO8B,EAGpB,QADdrC,EAAQkD,EAAK,GAAGqF,aAAahI,EAAM,MAEjCP,OAAQqC,EAEZ,CACA,OAAOrC,CACT,CA9BE4G,KAAKnE,MAAK,WACR,IAAImgN,EACJ,GAAsB,IAAlBh8M,KAAKiE,SAAgB,CAEvB,IADA+3M,EAAON,GAAU/hN,KACLqiN,EAAKz2L,IAEf,YADAy2L,EAAKz2L,IAAIvlB,KAAM5G,GAGH,OAAVA,EACF4G,KAAK2jB,gBAAgBhqB,EAAM,GAE3BqG,KAAKmjB,aAAaxpB,EAAMP,EAAO,EAEnC,CACF,GAgBF,CACA,OAAOkD,CACT,EACA2/M,WAAY,SAAUtiN,GACpB,OAAOqG,KAAK8kC,KAAKnrC,EAAM,KACzB,EACAm0B,KAAM,SAAUn0B,EAAMP,GACpB,IAAIkD,EAAO0D,KAEX,GAAoB,iBADpBrG,EAAO2hN,GAAQ3hN,IAASA,GAEtBmiN,GAAOniN,GAAM,SAAUA,EAAMP,GAC3BkD,EAAKwxB,KAAKn0B,EAAMP,EAClB,QACK,KAAImhN,GAAUnhN,GAOnB,OAAIkD,EAAK,IAAMA,EAAK,GAAG2H,UAAYtK,KAAQ2C,EAAK,GACvCA,EAAK,GAAG3C,GAEVP,EATP4G,KAAKnE,MAAK,WACc,IAAlBmE,KAAKiE,WACPjE,KAAKrG,GAAQP,EAEjB,GAMF,CACA,OAAOkD,CACT,EACA6nB,IAAK,SAAUxqB,EAAMP,GACnB,IACIoH,EAAKw7M,EADL1/M,EAAO0D,KAEPk8M,EAAQ,SAAUviN,GACpB,OAAOA,EAAK8J,QAAQ,UAAU,SAAUxJ,EAAGM,GACzC,OAAOA,EAAEy4F,aACX,GACF,EACImpH,EAAS,SAAUxiN,GACrB,OAAOA,EAAK8J,QAAQ,UAAU,SAAUxJ,GACtC,MAAO,IAAMA,CACf,GACF,EACA,GAAoB,iBAATN,EACTmiN,GAAOniN,GAAM,SAAUA,EAAMP,GAC3BkD,EAAK6nB,IAAIxqB,EAAMP,EACjB,SAEA,GAAImhN,GAAUnhN,GACZO,EAAOuiN,EAAMviN,GACQ,iBAAVP,GAAuBgiN,GAAczhN,KAC9CP,EAAQA,EAAM+C,WAAa,MAE7BG,EAAKT,MAAK,WACR,IAAIsd,EAAQnZ,KAAKmZ,MAEjB,IADA6iM,EAAOL,GAAShiN,KACJqiN,EAAKz2L,IACfy2L,EAAKz2L,IAAIvlB,KAAM5G,OADjB,CAIA,IACE4G,KAAKmZ,MAAMqiM,GAAO7hN,IAASA,GAAQP,CAErC,CADE,MAAOqwG,GACT,CACc,OAAVrwG,GAA4B,KAAVA,IAChB+f,EAAM6K,eACR7K,EAAM6K,eAAem4L,EAAOxiN,IAE5Bwf,EAAMwK,gBAAgBhqB,GAT1B,CAYF,QACK,CAGL,GAFA6G,EAAMlE,EAAK,IACX0/M,EAAOL,GAAShiN,KACJqiN,EAAK92L,IACf,OAAO82L,EAAK92L,IAAI1kB,GAElB,IAAIA,EAAI8gB,cAAcI,YAMf,OAAIlhB,EAAI47M,aACN57M,EAAI47M,aAAaF,EAAMviN,IAEvB,GARP,IACE,OAAO6G,EAAI8gB,cAAcI,YAAY4C,iBAAiB9jB,EAAK,MAAM4Y,iBAAiB+iM,EAAOxiN,GAG3F,CAFE,MAAO8vG,GACP,MACF,CAMJ,CAEF,OAAOntG,CACT,EACA6L,OAAQ,WAGN,IAFA,IACIrB,EAAM3J,EAAI6C,KAAK3C,OACZF,KACL2J,EAHS9G,KAGG7C,GACZk9M,GAAQ3J,MAAM5pM,GACVA,EAAKmB,YACPnB,EAAKmB,WAAW6H,YAAYhJ,GAGhC,OAAO9G,IACT,EACAypB,MAAO,WAGL,IAFA,IACI3iB,EAAM3J,EAAI6C,KAAK3C,OACZF,KAEL,IADA2J,EAHS9G,KAGG7C,GACL2J,EAAK1F,YACV0F,EAAKgJ,YAAYhJ,EAAK1F,YAG1B,OAAOpB,IACT,EACAuZ,KAAM,SAAUngB,GACd,IACI+D,EADAb,EAAO0D,KAEX,GAAIu6M,GAAUnhN,GAAQ,CACpB+D,EAAIb,EAAKe,OACT,IACE,KAAOF,KACLb,EAAKa,GAAGuc,UAAYtgB,CAIxB,CAFE,MAAOqwG,GACPsxG,GAASz+M,EAAKa,IAAIssB,QAAQskD,OAAO30E,EACnC,CACA,OAAOkD,CACT,CACA,OAAOA,EAAK,GAAKA,EAAK,GAAGod,UAAY,EACvC,EACAza,KAAM,SAAU7F,GACd,IACI+D,EADAb,EAAO0D,KAEX,GAAIu6M,GAAUnhN,GAAQ,CAEpB,IADA+D,EAAIb,EAAKe,OACFF,KACD,cAAeb,EAAKa,GACtBb,EAAKa,GAAGkG,UAAYjK,EAEpBkD,EAAK,GAAGgH,YAAclK,EAG1B,OAAOkD,CACT,CACA,OAAOA,EAAK,GAAKA,EAAK,GAAG+G,WAAa/G,EAAK,GAAGgH,YAAc,EAC9D,EACAyqE,OAAQ,WACN,OAAO4sI,GAAc36M,KAAMH,WAAW,SAAUiH,IACxB,IAAlB9G,KAAKiE,UAAkBjE,KAAKqiB,MAA+B,IAAvBriB,KAAKqiB,KAAKpe,WAChDjE,KAAKsI,YAAYxB,EAErB,GACF,EACAmnE,QAAS,WACP,OAAO0sI,GAAc36M,KAAMH,WAAW,SAAUiH,IACxB,IAAlB9G,KAAKiE,UAAkBjE,KAAKqiB,MAA+B,IAAvBriB,KAAKqiB,KAAKpe,WAChDjE,KAAKkI,aAAapB,EAAM9G,KAAKoB,WAEjC,IAAG,EACL,EACAwjD,OAAQ,WACN,IAAItoD,EAAO0D,KACX,OAAI1D,EAAK,IAAMA,EAAK,GAAG2L,WACd0yM,GAAcr+M,EAAMuD,WAAW,SAAUiH,GAC9C9G,KAAKiI,WAAWC,aAAapB,EAAM9G,KACrC,IAEK1D,CACT,EACAuoD,MAAO,WACL,IAAIvoD,EAAO0D,KACX,OAAI1D,EAAK,IAAMA,EAAK,GAAG2L,WACd0yM,GAAcr+M,EAAMuD,WAAW,SAAUiH,GAC9C9G,KAAKiI,WAAWC,aAAapB,EAAM9G,KAAKopB,YAC1C,IAAG,GAEE9sB,CACT,EACA+/M,SAAU,SAAUl6M,GAElB,OADA44M,GAAS54M,GAAK4rE,OAAO/tE,MACdA,IACT,EACAs8M,UAAW,SAAUn6M,GAEnB,OADA44M,GAAS54M,GAAK8rE,QAAQjuE,MACfA,IACT,EACAu8M,YAAa,SAAU1+K,GACrB,OAAO79B,KAAK4kD,OAAO/mB,GAAS11B,QAC9B,EACAu7H,KAAM,SAAU7lG,GACd,OAAOnG,GAAO13B,KAAM69B,EACtB,EACAlG,QAAS,SAAUkG,GACjB,OAAOnG,GAAO13B,KAAM69B,GAAS,EAC/B,EACA2+K,UAAW,SAAU3+K,GAInB,OAHA79B,KAAKnE,MAAK,WACRk/M,GAAS/6M,MAAMiB,WAAW02B,QAAQkG,EACpC,IACO79B,IACT,EACA4pB,OAAQ,WACN,OAAO5pB,KAAK2hB,SAAS9lB,MAAK,WACxBk/M,GAAS/6M,MAAMu8M,YAAYv8M,KAAK4Z,WAClC,GACF,EACAwkB,MAAO,WACL,IAAI5N,EAAS,GAIb,OAHAxwB,KAAKnE,MAAK,WACR20B,EAAOzzB,KAAKiD,KAAKq+B,WAAU,GAC7B,IACO08K,GAASvqL,EAClB,EACAosI,SAAU,SAAU14J,GAClB,OAAOlE,KAAK0vE,YAAYxrE,GAAW,EACrC,EACA24J,YAAa,SAAU34J,GACrB,OAAOlE,KAAK0vE,YAAYxrE,GAAW,EACrC,EACAwrE,YAAa,SAAUxrE,EAAWwJ,GAChC,IAAIpR,EAAO0D,KACX,MAAyB,iBAAdkE,KAGqB,IAA5BA,EAAUrH,QAAQ,KACpBi/M,GAAO53M,EAAUjC,MAAM,MAAM,WAC3B3F,EAAKozE,YAAY1vE,KAAM0N,EACzB,IAEApR,EAAKT,MAAK,SAAUkmB,EAAOjb,GACzB,IAAI21M,EAAaxB,GAASn0M,EAAM5C,GAChC,GAAIu4M,IAAe/uM,EAAO,CACxB,IAAIgvM,EAAoB51M,EAAK5C,UACzBu4M,EACF31M,EAAK5C,UAAY8U,IAAQ,IAAM0jM,EAAoB,KAAKj5M,QAAQ,IAAMS,EAAY,IAAK,MAEvF4C,EAAK5C,WAAaw4M,EAAoB,IAAMx4M,EAAYA,CAE5D,CACF,KAjBO5H,CAoBX,EACA2+M,SAAU,SAAU/2M,GAClB,OAAO+2M,GAASj7M,KAAK,GAAIkE,EAC3B,EACArI,KAAM,SAAU2P,GACd,OAAOswM,GAAO97M,KAAMwL,EACtB,EACA4E,GAAI,SAAUzW,EAAM6R,GAClB,OAAOxL,KAAKnE,MAAK,WACfw+M,GAAQv+M,KAAKkE,KAAMrG,EAAM6R,EAC3B,GACF,EACA6E,IAAK,SAAU1W,EAAM6R,GACnB,OAAOxL,KAAKnE,MAAK,WACfw+M,GAAQvxL,OAAO9oB,KAAMrG,EAAM6R,EAC7B,GACF,EACAmxM,QAAS,SAAUhjN,GACjB,OAAOqG,KAAKnE,MAAK,WACK,iBAATlC,EACT0gN,GAAQ3mM,KAAK1T,KAAMrG,EAAKR,KAAMQ,GAE9B0gN,GAAQ3mM,KAAK1T,KAAMrG,EAEvB,GACF,EACAywF,KAAM,WACJ,OAAOpqF,KAAKmkB,IAAI,UAAW,GAC7B,EACAtR,KAAM,WACJ,OAAO7S,KAAKmkB,IAAI,UAAW,OAC7B,EACArO,MAAO,WACL,OAAOilM,GAASjlM,GAAMxY,MAAM0C,KAAMH,WACpC,EACA4gB,GAAI,SAAUsB,GACZ,OAAkB,IAAXA,EAAe/hB,KAAK8V,MAAMiM,GAAS/hB,KAAK8V,MAAMiM,GAAQA,EAAQ,EACvE,EACA8kD,MAAO,WACL,OAAO7mE,KAAKygB,GAAG,EACjB,EACAmoC,KAAM,WACJ,OAAO5oD,KAAKygB,IAAI,EAClB,EACAk6C,KAAM,SAAUx6C,GACd,IAAIhjB,EAAG0Y,EACHwY,EAAM,GACV,IAAKlxB,EAAI,EAAG0Y,EAAI7V,KAAK3C,OAAQF,EAAI0Y,EAAG1Y,IAClC49M,GAASpgJ,KAAKx6C,EAAUngB,KAAK7C,GAAIkxB,GAEnC,OAAO0sL,GAAS1sL,EAClB,EACApyB,OAAQ,SAAUkkB,GAChB,OACS46L,GADe,mBAAb56L,EACO47L,GAAO/7M,KAAK9D,WAAW,SAAU0C,EAAMzB,GACrD,OAAOgjB,EAAShjB,EAAGyB,EACrB,IAEcm8M,GAAS9+M,OAAOkkB,EAAUngB,KAAK9D,WACjD,EACAmkG,QAAS,SAAUlgF,GACjB,IAAIqQ,EAAS,GAgBb,OAfIrQ,aAAoB46L,KACtB56L,EAAWA,EAAS,IAEtBngB,KAAKnE,MAAK,SAAUsB,EAAG2J,GACrB,KAAOA,GAAM,CACX,GAAwB,iBAAbqZ,GAAyB46L,GAASj0M,GAAMrJ,GAAG0iB,GAAW,CAC/DqQ,EAAOzzB,KAAK+J,GACZ,KACF,CAAO,GAAIA,IAASqZ,EAAU,CAC5BqQ,EAAOzzB,KAAK+J,GACZ,KACF,CACAA,EAAOA,EAAKmB,UACd,CACF,IACO8yM,GAASvqL,EAClB,EACAtO,OAAQ,SAAUA,GAChB,IAAI1hB,EAAKyiB,EAAK25L,EACIlmK,EAAdp9C,EAAI,EAAG+sB,EAAI,EACf,OAAKnE,EAgBEliB,KAAKmkB,IAAIjC,KAfd1hB,EAAMR,KAAK,MAGT48M,GADA35L,EAAMziB,EAAI8gB,eACGG,gBACTjhB,EAAIqlB,wBAENvsB,GADAo9C,EAAMl2C,EAAIqlB,yBACFhoB,MAAQ++M,EAAO91L,YAAc7D,EAAI3U,KAAKwY,YAAc81L,EAAO31L,WACnEZ,EAAIqwB,EAAIvwB,KAAOy2L,EAAOh2L,WAAa3D,EAAI3U,KAAKsY,WAAag2L,EAAO51L,YAG7D,CACLnpB,KAAMvE,EACN6sB,IAAKE,GAIX,EACAtpB,KAAMA,GACN0F,KAAMlJ,MAAMC,UAAUiJ,KACtB8zF,OAAQh9F,MAAMC,UAAU+8F,QAE1Bx9F,GAAM88L,OAAO+lB,GAAqB,CAChC/lB,OAAQ98L,GAAM88L,OACdmlB,UAAW,SAAU6B,GACnB,OAplBqB18M,EAolBR08M,IAnlBD18M,IAAQA,EAAIyP,QAmlBAitM,EAAO54M,SACtB,CAAC44M,GAEH9jN,GAAMmD,QAAQ2gN,GAvlBV,IAAU18M,CAwlBvB,EACAiC,QAnhBc,SAAUxD,EAAMwX,GAC9B,IAAIjZ,EACJ,GAAIiZ,EAAMvZ,QACR,OAAOuZ,EAAMvZ,QAAQ+B,GAGvB,IADAzB,EAAIiZ,EAAM/Y,OACHF,KACL,GAAIiZ,EAAMjZ,KAAOyB,EACf,OAAOzB,EAGX,OAAQ,CACV,EAwgBEpD,QAAShB,GAAMgB,QACf8B,KAAMigN,GACNt5M,KAAMwW,GACNrV,KAAMo4M,GACNphJ,KAAM04I,GACNgE,KAAMhE,GAAOhpI,UACbtrC,OAAQs0K,GAAOqE,WACfz4M,KAAMo0M,GAAOl0M,QACbyhB,SAAUyyL,GAAOzyL,SACjB3kB,OAAQ,SAAUo7M,EAAMt8E,EAAO5lH,GAC7B,IAAIhY,EAAI49H,EAAM19H,OAId,IAHI8X,IACFkiM,EAAO,QAAUA,EAAO,KAEnBl6M,KACqB,IAAtB49H,EAAM59H,GAAG8G,UACX82H,EAAMxkC,OAAOp5F,EAAG,GAQpB,OALqB,IAAjB49H,EAAM19H,OACA09M,GAASpgJ,KAAK28I,gBAAgBv8E,EAAM,GAAIs8E,GAAQ,CAACt8E,EAAM,IAAM,GAE7DggF,GAASpgJ,KAAKn8C,QAAQ64L,EAAMt8E,EAGxC,IAEF,IAAIlrF,GAAM,SAAUloB,EAAImG,EAAMhX,GAC5B,IAAI2hM,EAAU,GACV/tB,EAAM/iK,EAAGmG,GAIb,IAHqB,iBAAVhX,GAAsBA,aAAiBikM,KAChDjkM,EAAQA,EAAM,IAET4zK,GAAwB,IAAjBA,EAAIzmL,UAAgB,CAChC,QAAcxI,IAAVqb,EAAqB,CACvB,GAAI4zK,IAAQ5zK,EACV,MAEF,GAAqB,iBAAVA,GAAsBikM,GAASrwB,GAAKjtL,GAAGqZ,GAChD,KAEJ,CACqB,IAAjB4zK,EAAIzmL,UACNw0M,EAAQ17M,KAAK2tL,GAEfA,EAAMA,EAAI58J,EACZ,CACA,OAAO2qL,CACT,EACIqE,GAAY,SAAUh2M,EAAMg3L,EAAa75L,EAAU6S,GACrD,IAAI0Z,EAAS,GAIb,IAHI1Z,aAAiBikM,KACnBjkM,EAAQA,EAAM,IAEThQ,EAAMA,EAAOA,EAAKg3L,GACvB,IAAI75L,GAAY6C,EAAK7C,WAAaA,EAAlC,CAGA,QAAcxI,IAAVqb,EAAqB,CACvB,GAAIhQ,IAASgQ,EACX,MAEF,GAAqB,iBAAVA,GAAsBikM,GAASj0M,GAAMrJ,GAAGqZ,GACjD,KAEJ,CACA0Z,EAAOzzB,KAAK+J,EATZ,CAWF,OAAO0pB,CACT,EACIusL,GAAe,SAAUj2M,EAAMg3L,EAAa75L,GAC9C,IAAK6C,EAAOA,EAAKg3L,GAAch3L,EAAMA,EAAOA,EAAKg3L,GAC/C,GAAIh3L,EAAK7C,WAAaA,EACpB,OAAO6C,EAGX,OAAO,IACT,EACAg1M,GAAO,CACLn6L,OAAQ,SAAU7a,GAChB,IAAI6a,EAAS7a,EAAKmB,WAClB,OAAO0Z,GAA8B,KAApBA,EAAO1d,SAAkB0d,EAAS,IACrD,EACA5Q,QAAS,SAAUjK,GACjB,OAAO+oC,GAAI/oC,EAAM,aACnB,EACAvF,KAAM,SAAUuF,GACd,OAAOi2M,GAAaj2M,EAAM,cAAe,EAC3C,EACAq4I,KAAM,SAAUr4I,GACd,OAAOi2M,GAAaj2M,EAAM,kBAAmB,EAC/C,EACA+a,SAAU,SAAU/a,GAClB,OAAOg2M,GAAUh2M,EAAK1F,WAAY,cAAe,EACnD,EACAH,SAAU,SAAU6F,GAClB,OAAO/N,GAAMmD,SAA2B,WAAlB4K,EAAKrG,SAAwBqG,EAAKk2M,iBAAmBl2M,EAAK2gI,cAAcl4H,SAAWzI,GAAM8S,WACjH,IACC,SAAUjgB,EAAMob,GACjB6mM,GAAoB7mM,GAAGpb,GAAQ,SAAUwmB,GACvC,IACIqQ,EAAS,GADFxwB,KAENnE,MAAK,WACR,IAAIw9L,EAAQtkL,EAAGpc,KAAK63B,EAAQxwB,KAAMmgB,EAAUqQ,GACxC6oK,IACE0hB,GAAShhN,QAAQs/L,GACnB7oK,EAAOzzB,KAAKO,MAAMkzB,EAAQ6oK,GAE1B7oK,EAAOzzB,KAAKs8L,GAGlB,IACIr5L,KAAK3C,OAAS,IACXi9M,GAAY3gN,KACf62B,EAASuqL,GAASh8K,OAAOvO,IAEK,IAA5B72B,EAAKkD,QAAQ,aACf2zB,EAASA,EAAOtZ,YAGpB,IAAI+lM,EAAgBlC,GAASvqL,GAC7B,OAAIrQ,EACK88L,EAAchhN,OAAOkkB,GAEvB88L,CACT,CACF,IACAnB,GAAO,CACLoB,aAAc,SAAUp2M,EAAMgQ,GAC5B,OAAO+4B,GAAI/oC,EAAM,aAAcgQ,EACjC,EACAqmM,UAAW,SAAUr2M,EAAMgQ,GACzB,OAAOgmM,GAAUh2M,EAAM,cAAe,EAAGgQ,GAAOhB,MAAM,EACxD,EACAsnM,UAAW,SAAUt2M,EAAMgQ,GACzB,OAAOgmM,GAAUh2M,EAAM,kBAAmB,EAAGgQ,GAAOhB,MAAM,EAC5D,IACC,SAAUnc,EAAMob,GACjB6mM,GAAoB7mM,GAAGpb,GAAQ,SAAUwmB,EAAUlkB,GACjD,IACIu0B,EAAS,GADFxwB,KAENnE,MAAK,WACR,IAAIw9L,EAAQtkL,EAAGpc,KAAK63B,EAAQxwB,KAAMmgB,EAAUqQ,GACxC6oK,IACE0hB,GAAShhN,QAAQs/L,GACnB7oK,EAAOzzB,KAAKO,MAAMkzB,EAAQ6oK,GAE1B7oK,EAAOzzB,KAAKs8L,GAGlB,IACIr5L,KAAK3C,OAAS,IAChBmzB,EAASuqL,GAASh8K,OAAOvO,GACO,IAA5B72B,EAAKkD,QAAQ,YAA6B,cAATlD,IACnC62B,EAASA,EAAOtZ,YAGpB,IAAI+lM,EAAgBlC,GAASvqL,GAC7B,OAAIv0B,EACKghN,EAAchhN,OAAOA,GAEvBghN,CACT,CACF,IACArB,GAAoB7mM,GAAGtX,GAAK,SAAU0iB,GACpC,QAASA,GAAYngB,KAAK/D,OAAOkkB,GAAU9iB,OAAS,CACtD,EACAu+M,GAAoB7mM,GAAGitB,KAAKxoC,UAAYoiN,GAAoB7mM,GAC5D6mM,GAAoByB,iBAAmB,SAAU7xM,GAC/C,IAAIirD,EACA6mJ,EAAM,SAAUn9L,EAAUiiE,GAQ5B,OAPA3rB,EAAWA,GAAYjrD,IACE,IAArB3L,UAAUxC,SACZ8iB,EAAWs2C,EAAS1kD,SAEjBqwE,IACHA,EAAU3rB,EAAS2rB,SAEd,IAAIk7H,EAAIvoM,GAAGitB,KAAK7hB,EAAUiiE,EACnC,EAEA,OADA24H,GAASllB,OAAOynB,EAAKt9M,MACds9M,CACT,EACA1B,GAAoBF,UAAYA,GAChCE,GAAoBD,SAAWA,GAC/B,IAAIZ,GAAWa,GAEX2B,GAASxkN,GAAM8C,KACf2hN,GAASzkN,GAAM4K,KACfoZ,GAAO43K,GAAIC,GACX6oB,GAAmB,mBA2CnBC,GAA0B,SAAUl7K,EAAQm7K,GAC9C,IAAIj9F,EAAWi9F,EAAK74K,KAAK,SACrB1rC,EAAQopC,EAAO0qK,UAAU1qK,EAAO52B,MAAM80G,GAAWi9F,EAAK,GAAGl9M,UACxDrH,IACHA,EAAQ,MAEVukN,EAAK74K,KAAK,iBAAkB1rC,EAC9B,EACIwkN,GAAgB,SAAU92M,EAAM+2M,GAClC,IAAaC,EAAc75M,EAAvBqyF,EAAM,EACV,GAAIxvF,EACF,IAAKg3M,EAAeh3M,EAAK7C,SAAU6C,EAAOA,EAAKmwL,gBAAiBnwL,EAAMA,EAAOA,EAAKmwL,gBAChFhzL,EAAW6C,EAAK7C,WACZ45M,GAA2B,IAAb55M,GACZA,IAAa65M,GAAiBh3M,EAAKqgD,UAAU9pD,UAInDi5F,IACAwnH,EAAe75M,GAGnB,OAAOqyF,CACT,EACIynH,GAAW,SAAU96L,EAAKvc,QACX,IAAbA,IACFA,EAAW,CAAC,GAEd,IAAIs3M,EAAc,CAAC,EACfv3L,EAAM7W,OACN45H,EAAQ,CAAC,EACTy0E,EAAU,EAGVxvD,EAAmB/1B,GAAS2kE,WAAW/jL,GAAqB2J,GAAM,CACpEw5K,eAAgB/1L,EAAS+1L,eACzBC,eAAgBh2L,EAASg2L,iBAEvBwhB,EAAc,GACdp6M,EAAS4C,EAAS5C,OAAS4C,EAAS5C,OAAS6gM,GAAO,CAAC,GACrDniK,EAAS+oK,GAAO,CAClBU,cAAevlM,EAASulM,cACxBE,oBAAqBzlM,EAASylM,qBAC7BzlM,EAAS5C,QACRg7B,EAASp4B,EAASy3M,UAAY,IAAIzO,GAAeA,GAAWzB,MAC5DlH,EAAmBjjM,EAAO+mM,mBAC1Bx7L,EAAI0rM,GAASsC,kBAAiB,WAChC,MAAO,CACLj7H,QAASn/D,EACTlR,QAASzV,EAAK8kF,UAElB,IAYIl8D,EAAM,SAAU1kB,GAClB,OAAOA,GAAOyiB,GAAOyvK,EAAWlyL,GAAOyiB,EAAI+2G,eAAex5H,GAAOA,CACnE,EACI49M,EAAK,SAAU59M,GACjB,OAAO6O,EAAiB,iBAAR7O,EAAmB0kB,EAAI1kB,GAAOA,EAChD,EACIyK,EAAY,SAAUzK,EAAK7G,EAAM0kN,GACnC,IAAIrC,EAAM5iN,EACNukN,EAAOS,EAAG59M,GAYd,OAXIm9M,EAAKtgN,SAGLjE,GAFF4iN,EAAON,EAAU/hN,KACLqiN,EAAK92L,IACP82L,EAAK92L,IAAIy4L,EAAMhkN,GAEfgkN,EAAK74K,KAAKnrC,SAGD,IAAVP,IACTA,EAAQilN,GAAc,IAEjBjlN,CACT,EACIklN,EAAa,SAAU99M,GACzB,IAAIsG,EAAOoe,EAAI1kB,GACf,OAAKsG,EAGEA,EAAKy7B,WAFH,EAGX,EACIg8K,EAAY,SAAU/9M,EAAK7G,EAAMP,GACrB,KAAVA,IACFA,EAAQ,MAEV,IAAIukN,EAAOS,EAAG59M,GACVg+M,EAAgBb,EAAK74K,KAAKnrC,GAC9B,GAAKgkN,EAAKtgN,OAAV,CAGA,IAAI2+M,EAAON,EAAU/hN,GACjBqiN,GAAQA,EAAKz2L,IACfy2L,EAAKz2L,IAAIo4L,EAAMvkN,EAAOO,GAEtBgkN,EAAK74K,KAAKnrC,EAAMP,GAEdolN,IAAkBplN,GAASsN,EAAS+3M,aACtC/3M,EAAS+3M,YAAY,CACnBC,QAASf,EACTtlB,SAAU1+L,EACVglN,UAAWvlN,GAXf,CAcF,EAYIgoF,EAAU,WACZ,OAAO16E,EAASk4M,cAAgB37L,EAAI3U,IACtC,EAUIuwM,EAAW,SAAUr+M,EAAKu8I,GAC5B,OAtsJS,SAAUzuI,EAAM9N,EAAKu8I,GAChC,IAAIzjJ,EAAI,EAAG+sB,EAAI,EACXpD,EAAM3U,EAAKgT,cAEf,GADAy7H,EAAUA,GAAoBzuI,EAC1B9N,EAAK,CACP,GAAIu8I,IAAYzuI,GAAQ9N,EAAIqlB,uBAA2E,WAAlD+f,GAAMtsB,GAAqBhL,GAAO,YAA0B,CAC/G,IAAIooC,EAAMl2C,EAAIqlB,wBAGd,MAAO,CACLvsB,EAHFA,EAAIo9C,EAAI74C,MAAQolB,EAAIxB,gBAAgBqF,YAAcxY,EAAKwY,YAAc7D,EAAIxB,gBAAgBwF,WAIvFZ,EAHFA,EAAIqwB,EAAIvwB,KAAOlD,EAAIxB,gBAAgBmF,WAAatY,EAAKsY,WAAa3D,EAAIxB,gBAAgBuF,UAKxF,CAEA,IADA,IAAIpF,EAAephB,EACZohB,GAAgBA,IAAiBm7H,GAAWn7H,EAAa3d,WAAaq1L,GAAS13K,EAAcm7H,IAAU,CAC5G,IAAI+hE,EAAmBl9L,EACvBtoB,GAAKwlN,EAAiBp4L,YAAc,EACpCL,GAAKy4L,EAAiBn4L,WAAa,EACnC/E,EAAek9L,EAAiBl9L,YAClC,CAEA,IADAA,EAAephB,EAAIyH,WACZ2Z,GAAgBA,IAAiBm7H,GAAWn7H,EAAa3d,WAAaq1L,GAAS13K,EAAcm7H,IAClGzjJ,GAAKsoB,EAAakF,YAAc,EAChCT,GAAKzE,EAAagF,WAAa,EAC/BhF,EAAeA,EAAa3Z,WAE9Boe,GA9CwB,SAAU7lB,GACpC,OAAI24L,GAAUl8K,aAA6B,UAAdtjB,GAAK6G,GACzB44L,GAAav3K,GAASrhB,IAAMvE,QAAO,SAAUuE,GAClD,MAAqB,YAAd7G,GAAK6G,EACd,IAAG1E,MAAK,SAAU8pM,GAChB,OAAOxM,GAAajC,GAAayO,IAAUhqM,KAAI,SAAU0S,GACvD,IAAIywM,EAAUzwM,EAAKtL,IAAI2jB,UACnBq4L,EAAapZ,EAAQ5iM,IAAI2jB,UACzBs4L,EAAgBrZ,EAAQ5iM,IAAI+iB,aAChC,OAAOg5L,GAAWC,GAAcC,EAAgB,CAClD,GACF,IAAGhkN,MAAM,GAEF,CAEX,CA+BSikN,CAAsB5lM,GAAqB9Y,GAClD,CACA,MAAO,CACLlH,EAAGA,EACH+sB,EAAGA,EAEP,CAqqJWijJ,CAAOrmJ,EAAI3U,KAAM4W,EAAI1kB,GAAMu8I,EACpC,EAaIlyD,EAAW,SAAUrqF,EAAK7G,EAAMy+L,GAClC,IAAIulB,EAAOS,EAAG59M,GACd,OAAI43L,EACKulB,EAAKx5L,IAAIxqB,IAKL,WAHbA,EAAOA,EAAK8J,QAAQ,UAAU,SAAUxJ,EAAGM,GACzC,OAAOA,EAAEy4F,aACX,OAEEr5F,EAAOg7L,GAAIh2K,QAAQ5B,OAAS,aAAe,YAEtC4gM,EAAK,IAAMA,EAAK,GAAGxkM,MAAQwkM,EAAK,GAAGxkM,MAAMxf,QAAQ8B,EAC1D,EACI0jN,EAAU,SAAU3+M,GACtB,IAAI2rB,EAAG3G,EAUP,OATAhlB,EAAM0kB,EAAI1kB,GACV2rB,EAAI0+D,EAASrqF,EAAK,SAClBglB,EAAIqlE,EAASrqF,EAAK,WACO,IAArB2rB,EAAEtvB,QAAQ,QACZsvB,EAAI,IAEmB,IAArB3G,EAAE3oB,QAAQ,QACZ2oB,EAAI,GAEC,CACL2G,EAAGnN,SAASmN,EAAG,KAAO3rB,EAAIukB,aAAevkB,EAAIkqB,YAC7ClF,EAAGxG,SAASwG,EAAG,KAAOhlB,EAAIulB,cAAgBvlB,EAAImqB,aAElD,EAYIltB,EAAK,SAAU+C,EAAK2f,GACtB,IAAIhjB,EACJ,IAAKqD,EACH,OAAO,EAET,IAAKjH,MAAMQ,QAAQyG,GAAM,CACvB,GAAiB,MAAb2f,EACF,OAAwB,IAAjB3f,EAAIyD,SAEb,GAAIw5M,GAAiB/7M,KAAKye,GAAW,CACnC,IAAIkqD,EAAYlqD,EAASzf,cAAcuB,MAAM,KACzCgnM,EAAUzoM,EAAIC,SAASC,cAC3B,IAAKvD,EAAIktE,EAAUhtE,OAAS,EAAGF,GAAK,EAAGA,IACrC,GAAIktE,EAAUltE,KAAO8rM,EACnB,OAAO,EAGX,OAAO,CACT,CACA,GAAIzoM,EAAIyD,UAA6B,IAAjBzD,EAAIyD,SACtB,OAAO,CAEX,CACA,IAAIyvI,EAAQn6I,MAAMQ,QAAQyG,GAAeA,EAAR,CAACA,GAClC,OAAO6yM,GAAOlzL,EAAUuzH,EAAK,GAAGpyH,eAAiBoyH,EAAK,GAAI,KAAMA,GAAMr2I,OAAS,CACjF,EACI2K,EAAa,SAAUxH,EAAK2f,EAAUy0B,EAAMwqK,GAC9C,IACIC,EADA7uL,EAAS,GAET1pB,EAAOoe,EAAI1kB,GAef,IAdA4+M,OAAsB3jN,IAAZ2jN,EACVxqK,EAAOA,IAAgC,SAAvBwsC,IAAU3gF,SAAsB2gF,IAAUn5E,WAAa,MACnElP,GAAM0E,GAAG0iB,EAAU,YACrBk/L,EAAcl/L,EAEZA,EADe,MAAbA,EACS,SAAUrZ,GACnB,OAAyB,IAAlBA,EAAK7C,QACd,EAEW,SAAU6C,GACnB,OAAOrJ,EAAGqJ,EAAMu4M,EAClB,GAGGv4M,KACDA,IAAS8tC,GAAQzgC,EAAWrN,EAAK7C,WAAa20L,GAAa9xL,IAASwT,GAAmBxT,KADhF,CAIX,IAAKqZ,GAAgC,mBAAbA,GAA2BA,EAASrZ,GAAO,CACjE,IAAIs4M,EAGF,MAAO,CAACt4M,GAFR0pB,EAAOzzB,KAAK+J,EAIhB,CACAA,EAAOA,EAAKmB,UACd,CACA,OAAOm3M,EAAU5uL,EAAS,IAC5B,EAKI8uL,EAAW,SAAUx4M,EAAMqZ,EAAUxmB,GACvC,IAAIohM,EAAO56K,EACX,GAAIrZ,EAMF,IALwB,iBAAbqZ,IACT46K,EAAO,SAAUj0L,GACf,OAAOrJ,EAAGqJ,EAAMqZ,EAClB,GAEGrZ,EAAOA,EAAKnN,GAAOmN,EAAMA,EAAOA,EAAKnN,GACxC,GAAoB,mBAATohM,GAAuBA,EAAKj0L,GACrC,OAAOA,EAIb,OAAO,IACT,EAUI4xB,EAAM,SAAUl4B,EAAKu6L,EAAMvhL,GAC7B,IAAIgX,EACA1pB,EAAsB,iBAARtG,EAAmB0kB,EAAI1kB,GAAOA,EAChD,IAAKsG,EACH,OAAO,EAET,GAAI/N,GAAMgB,QAAQ+M,KAAUA,EAAKzJ,QAA0B,IAAhByJ,EAAKzJ,QAO9C,OANAmzB,EAAS,GACT+sL,GAAOz2M,GAAM,SAAUtG,EAAKrD,GACtBqD,GACFgwB,EAAOzzB,KAAKg+L,EAAKpiM,KAAK6gB,EAAsB,iBAARhZ,EAAmB0kB,EAAI1kB,GAAOA,EAAKrD,GAE3E,IACOqzB,EAET,IAAI4xD,EAAU5oE,GAAgBxZ,KAC9B,OAAO+6L,EAAKpiM,KAAKypF,EAASt7E,EAC5B,EACI1B,EAAa,SAAU5E,EAAK4H,GAC9Bg2M,EAAG59M,GAAK3E,MAAK,SAAUsB,EAAG2J,GACxBy2M,GAAOn1M,GAAO,SAAUhP,EAAOO,GAC7B4kN,EAAUz3M,EAAMnN,EAAMP,EACxB,GACF,GACF,EACImmN,EAAU,SAAU/+M,EAAK+Y,GAC3B,IAAIokM,EAAOS,EAAG59M,GACVuc,GACF4gM,EAAK9hN,MAAK,SAAUsB,EAAGsH,GACrB,IAA2B,IAAvBA,EAAO+6M,YAAX,CAGA,KAAO/6M,EAAOrD,YACZqD,EAAOqL,YAAYrL,EAAOrD,YAE5B,IACEqD,EAAOiV,UAAY,OAASH,EAC5B9U,EAAOqL,YAAYrL,EAAOrD,WAG5B,CAFE,MAAOqoG,GACPsxG,GAAS,eAAexhM,KAAK,OAASA,GAAMtY,WAAW6U,MAAM,GAAGumM,SAAS53M,EAC3E,CACA,OAAO8U,CAVP,CAWF,IAEAokM,EAAKpkM,KAAKA,EAEd,EACI9gB,EAAM,SAAUgnN,EAAW9lN,EAAMyO,EAAOmR,EAAMlR,GAChD,OAAOqwB,EAAI+mL,GAAW,SAAUA,GAC9B,IAAIC,EAAyB,iBAAT/lN,EAAoBspB,EAAIzT,cAAc7V,GAAQA,EASlE,OARAyL,EAAWs6M,EAAQt3M,GACfmR,IACkB,iBAATA,GAAqBA,EAAKtV,SACnCy7M,EAAOp3M,YAAYiR,GACM,iBAATA,GAChBgmM,EAAQG,EAAQnmM,IAGZlR,EAAyCq3M,EAAhCD,EAAUn3M,YAAYo3M,EACzC,GACF,EACIr3M,EAAS,SAAU1O,EAAMyO,EAAOmR,GAClC,OAAO9gB,EAAIwqB,EAAIzT,cAAc7V,GAAOA,EAAMyO,EAAOmR,GAAM,EACzD,EAEI7T,EAAS29L,GAAS78D,aA4BlBr+H,EAAS,SAAUrB,EAAM64M,GAC3B,IAAIC,EAAQxB,EAAGt3M,GAef,OAdI64M,EACFC,EAAM/jN,MAAK,WAET,IADA,IAAI0tC,EACGA,EAAQvpC,KAAKoB,YACK,IAAnBmoC,EAAMtlC,UAAwC,IAAtBslC,EAAMllC,KAAKhH,OACrC2C,KAAK8P,YAAYy5B,GAEjBvpC,KAAKiI,WAAWC,aAAaqhC,EAAOvpC,KAG1C,IAAGmI,SAEHy3M,EAAMz3M,SAEDy3M,EAAMviN,OAAS,EAAIuiN,EAAM1jN,UAAY0jN,EAAM,EACpD,EAmDIlwI,EAAc,SAAUlvE,EAAKqF,EAAK6H,GACpC0wM,EAAG59M,GAAKkvE,YAAY7pE,EAAK6H,GAAO7R,MAAK,WACZ,KAAnBmE,KAAKkE,WACP62M,GAAS/6M,MAAM8kC,KAAK,QAAS,KAEjC,GACF,EAmDIrhC,EAAU,SAAUi8M,EAAQG,EAAQF,GACtC,OAAOjnL,EAAImnL,GAAQ,SAAUA,GAS3B,OARI9mN,GAAM0E,GAAGoiN,EAAQ,WACnBH,EAASA,EAAOrhL,WAAU,IAExBshL,GACFpC,GAAOC,GAAOqC,EAAOjmM,aAAa,SAAU9S,GAC1C44M,EAAOp3M,YAAYxB,EACrB,IAEK+4M,EAAO53M,WAAW63M,aAAaJ,EAAQG,EAChD,GACF,EAgCIE,EAAoB,SAAUj5M,GAChC,GAAIkxL,GAAYlxL,GAAO,CACrB,IAAIo6L,EAAgD,MAAhCp6L,EAAKrG,SAASC,gBAA0BuK,EAAUnE,EAAM,SAAWmE,EAAUnE,EAAM,MACvG,GAAImE,EAAUnE,EAAM,SAAWmE,EAAUnE,EAAM,sBAAwBo6L,EACrE,OAAO,CAEX,CACA,OAAO,CACT,EA8CIv/G,EAAY,WACd,OAAO1+D,EAAI8iC,aACb,EA0BIjqD,EAAO,SAAU2I,EAAQ9K,EAAMohM,EAAMvhL,GACvC,GAAIzgB,GAAMgB,QAAQ0K,GAAS,CAGzB,IAFA,IAAItH,EAAIsH,EAAOpH,OACX2iN,EAAK,GACF7iN,KACL6iN,EAAG7iN,GAAKrB,EAAK2I,EAAOtH,GAAIxD,EAAMohM,EAAMvhL,GAEtC,OAAOwmM,CACT,CAUA,OATIt5M,EAAS04M,SAAY36M,IAAWwe,GAAOxe,IAAWgiB,GACpDy3L,EAAYnhN,KAAK,CACf0H,EACA9K,EACAohM,EACAvhL,IAGSslB,EAAOhjC,KAAK2I,EAAQ9K,EAAMohM,EAAMvhL,GAASld,EAExD,EACIwsB,EAAS,SAAUrkB,EAAQ9K,EAAMohM,GACnC,GAAIhiM,GAAMgB,QAAQ0K,GAAS,CAGzB,IAFA,IAAItH,EAAIsH,EAAOpH,OACX2iN,EAAK,GACF7iN,KACL6iN,EAAG7iN,GAAK2rB,EAAOrkB,EAAOtH,GAAIxD,EAAMohM,GAElC,OAAOilB,CACT,CACE,GAAI9B,EAAY7gN,OAAS,IAAMoH,IAAWwe,GAAOxe,IAAWgiB,GAE1D,IADItpB,EAAI+gN,EAAY7gN,OACbF,KAAK,CACV,IAAIyB,EAAOs/M,EAAY/gN,GACnBsH,IAAW7F,EAAK,IAAQjF,GAAQA,IAASiF,EAAK,IAASm8L,GAAQA,IAASn8L,EAAK,IAC/EkgC,EAAOhW,OAAOlqB,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAEzC,CAEF,OAAOkgC,EAAOhW,OAAOrkB,EAAQ9K,EAAMohM,EAEvC,EAII76G,EAAqB,SAAUp5E,GACjC,GAAIA,GAAQkxL,GAAYlxL,GAAO,CAC7B,IAAI0rI,EAAkB1rI,EAAKnF,aAAa,4BACxC,OAAI6wI,GAAuC,YAApBA,EACdA,EAEuB,YAAzB1rI,EAAK0rI,gBAAgC1rI,EAAK0rI,gBAAkB,IACrE,CACE,OAAO,IAEX,EA4CIl2I,EAAO,CACT2mB,IAAKA,EACLvc,SAAUA,EACV+f,IAAKA,EACL+iH,MAAOA,EACPy2E,SAxrBY,EAyrBZC,UAxrBa,EAyrBbzxD,iBAAkBA,EAClByvD,YAAaA,EACb17K,OAAQA,EACR1+B,OAAQA,EACRg7B,OAAQA,EACRmhD,QA3qBY,SAAUn5E,GACtB,GAAoB,iBAATA,EACT,QAASigM,EAAiBjgM,GACrB,GAAIA,EAAM,CACf,IAAI3N,EAAO2N,EAAK7C,SAChB,GAAI9K,EACF,QAAmB,IAATA,IAAc4tM,EAAiBjgM,EAAKrG,UAElD,CACA,OAAO,CACT,EAkqBE4O,EAAGA,EACH+uM,GAAIA,EACJxpK,KAAM,KACNxW,MAhnBU,SAAUt3B,EAAMq5M,GAC1B,IAAKpjM,IAA0B,IAAlBjW,EAAK7C,UAAkBk8M,EAClC,OAAOr5M,EAAKu3B,UAAU8hL,GAEtB,IAAIC,EAAUn9L,EAAIzT,cAAc1I,EAAKrG,UAIrC,OAHA88M,GAAOe,EAAWx3M,IAAO,SAAUg+B,GACjCy5K,EAAU6B,EAASt7K,EAAKrkC,SAAUwK,EAAUnE,EAAMg+B,EAAKrkC,UACzD,IACO2/M,CAEX,EAumBEh/H,QAASA,EACTi/H,YApmBgB,SAAUC,GAC1B,IAAI3sL,EAAK8iB,GAAU6pK,GACnB,MAAO,CACLhnN,EAAGq6B,EAAGr6B,EACN+sB,EAAGsN,EAAGtN,EACN8F,EAAGwH,EAAGxJ,MACN3E,EAAGmO,EAAG7N,OAEV,EA6lBE4tG,QAhjBY,SAAUlzH,GACtBA,EAAM0kB,EAAI1kB,GACV,IAAIk2C,EAAMmoK,EAASr+M,GACf6N,EAAO8wM,EAAQ3+M,GACnB,MAAO,CACLlH,EAAGo9C,EAAIp9C,EACP+sB,EAAGqwB,EAAIrwB,EACP8F,EAAG9d,EAAK8d,EACR3G,EAAGnX,EAAKmX,EAEZ,EAuiBE25L,QAASA,EACTj8M,UA5ec,SAAU4D,EAAMqZ,EAAUy0B,GACxC,IAAI7jC,EAAU/I,EAAWlB,EAAMqZ,EAAUy0B,GAAM,GAC/C,OAAO7jC,GAAWA,EAAQ1T,OAAS,EAAI0T,EAAQ,GAAK,IACtD,EA0eE/I,WAAYA,EACZkd,IAAKA,EACLs5C,QA3dY,SAAU13D,EAAMqZ,GAC5B,OAAOm/L,EAASx4M,EAAMqZ,EAAU,cAClC,EA0dEogM,QAzdY,SAAUz5M,EAAMqZ,GAC5B,OAAOm/L,EAASx4M,EAAMqZ,EAAU,kBAClC,EAwdEld,OAvdW,SAAUkd,EAAU3G,GAC/B,OAAO65L,GAAOlzL,EAAU+E,EAAI1L,IAAU9S,EAASk4M,cAAgB37L,EAAK,GACtE,EAsdExlB,GAAIA,EACJhF,IAAKA,EACL4P,OAAQA,EACR5C,WAtZe,SAAU9L,EAAMyO,EAAOmR,GACtC,IAAkBnZ,EAAdogN,EAAU,GAEd,IAAKpgN,KADLogN,GAAW,IAAM7mN,EACLyO,EACNgQ,GAAkBhQ,EAAOhI,KAC3BogN,GAAW,IAAMpgN,EAAM,KAAOsF,EAAO0C,EAAMhI,IAAQ,KAGvD,YAAoB,IAATmZ,EACFinM,EAAU,IAAMjnM,EAAO,KAAO5f,EAAO,IAEvC6mN,EAAU,KACnB,EA2YEC,eA1YmB,SAAUlnM,GAC7B,IAAIzS,EACAq3B,EAAYlb,EAAIzT,cAAc,OAC9BkrM,EAAOz3L,EAAI+a,yBAKf,IAJA08K,EAAKpyM,YAAY61B,GACb5kB,IACF4kB,EAAUzkB,UAAYH,GAEjBzS,EAAOq3B,EAAU/8B,YACtBs5M,EAAKpyM,YAAYxB,GAGnB,OADA4zM,EAAK5qM,YAAYquB,GACVu8K,CACT,EA8XEvyM,OAAQA,EACRu4M,SAvmBa,SAAUlgN,EAAK7G,EAAMP,GAClC,IAAIukN,EAAOjrB,EAAW/4L,GAAQykN,EAAG59M,GAAK2jB,IAAIxqB,EAAMP,GAASglN,EAAG59M,GAAK2jB,IAAIxqB,GACjE+M,EAASi6M,eACXjD,GAAwBl7K,EAAQm7K,EAEpC,EAmmBE9yH,SAAUA,EACV+1H,UAnmBc,SAAUpgN,EAAKqgN,GAC7B,IAAIlD,EAAOS,EAAG59M,GAAK2jB,IAAI08L,GACnBn6M,EAASi6M,eACXjD,GAAwBl7K,EAAQm7K,EAEpC,EA+lBEmD,iBA/WqB,SAAU9vM,GAC/B,OAAO0nB,EAAI1nB,GAAG,SAAUA,GACtB,IAAI7T,EACAiL,EAAQ4I,EAAEuxB,WACd,IAAKplC,EAAIiL,EAAM/K,OAAS,EAAGF,GAAK,EAAGA,IACjC6T,EAAE+vM,oBAAoB34M,EAAMxJ,KAAKzB,GAErC,GACF,EAwWEohN,UAAWA,EACXn5M,WAAYA,EACZ6F,UAAWA,EACXq+J,OAAQu1C,EACRptE,WA3We,SAAUuvE,GACzB,OAAOx+K,EAAO52B,MAAMo1M,EACtB,EA0WEC,eAzWmB,SAAUJ,EAAWlnN,GACxC,OAAO6oC,EAAO0qK,UAAU2T,EAAWlnN,EACrC,EAwWEunN,SAvWa,SAAUF,GACvB,IAAItpM,EAAMypM,EACV,GAAI7kN,IAASyhN,GAASnzH,KAAO3nE,IAAQ1T,SAAU,CAC7C,GAAIyuM,EAAYgD,GACd,OAEFhD,EAAYgD,IAAW,CACzB,EACAG,EAAWl+L,EAAI+2G,eAAe,wBAE5BmnF,EAAWl+L,EAAIzT,cAAc,UACpB5W,GAAK,mBACduoN,EAAShoN,KAAO,YAChBue,EAAOuL,EAAI68K,qBAAqB,QAAQ,IAC/B1+L,WACPsW,EAAKxP,aAAai5M,EAAUzpM,EAAKtW,YAEjCsW,EAAKpP,YAAY64M,IAGjBA,EAASC,WACXD,EAASC,WAAWJ,SAAWA,EAE/BG,EAAS74M,YAAY2a,EAAIlJ,eAAeinM,GAE5C,EA+UEK,QA9UY,SAAUvkB,GACjBA,IACHA,EAAO,IAET9J,EAAO8J,EAAK76L,MAAM,MAAM,SAAUR,GAChC+nI,EAAM/nI,IAAO,EACbgtJ,EAAiBv+E,KAAKzuE,EAAKrH,EAC7B,GACF,EAuUEwiK,SA/Ta,SAAUp8J,EAAKqF,GAC5Bu4M,EAAG59M,GAAKo8J,SAAS/2J,EACnB,EA8TEg3J,YA7TgB,SAAUr8J,EAAKqF,GAC/B6pE,EAAYlvE,EAAKqF,GAAK,EACxB,EA4TEo1M,SA3Ta,SAAUz6M,EAAKqF,GAC5B,OAAOu4M,EAAG59M,GAAKy6M,SAASp1M,EAC1B,EA0TE6pE,YAAaA,EACb0a,KA1TS,SAAU5pF,GACnB49M,EAAG59M,GAAK4pF,MACV,EAyTEv3E,KAxTS,SAAUrS,GACnB49M,EAAG59M,GAAKqS,MACV,EAuTEkjK,SAtTa,SAAUv1K,GACvB,MAAkC,SAA3B49M,EAAG59M,GAAK2jB,IAAI,UACrB,EAqTEm9L,SApTa,SAAUriL,GACvB,OAASA,GAAS,QAAmBg/K,GACvC,EAmTEsB,QAASA,EACTgC,aAnTiB,SAAU/gN,GAC3B,IAAIsG,EAAsB,iBAARtG,EAAmB0kB,EAAI1kB,GAAOA,EAChD,OAAOw3L,GAAYlxL,GAAQA,EAAK06M,UAAYzG,GAAS,eAAehtI,OAAOgtI,GAASj0M,GAAMs3B,SAAS7kB,MACrG,EAiTEkoM,aAhTiB,SAAUjhN,EAAK+Y,GAChC6kM,EAAG59M,GAAK3E,MAAK,WACX,IACE,GAAI,cAAemE,KAEjB,YADAA,KAAKwhN,UAAYjoM,EAIrB,CADE,MAAOkwF,GACT,CACAthG,EAAO4yM,GAAS/6M,MAAMuZ,KAAKA,IAAO,EACpC,GACF,EAsSEoqL,OAlbWN,GAASM,OAmbpBj+L,OAAQA,EACRg8M,YAvSgB,SAAU56M,EAAM66M,GAChC,IAAIC,EAAgB18L,EAAIy8L,GACxB,OAAOjpL,EAAI5xB,GAAM,SAAUA,GACzB,IAAI6a,EAASigM,EAAc35M,WACvBmhB,EAAcw4L,EAAcx4L,YAMhC,OALIA,EACFzH,EAAOzZ,aAAapB,EAAMsiB,GAE1BzH,EAAOrZ,YAAYxB,GAEdA,CACT,GACF,EA4RErD,QAASA,EACTo+M,OA/QW,SAAUrhN,EAAK7G,GAC1B,IAAI+lN,EAQJ,OAPIl/M,EAAIC,WAAa9G,EAAKq5F,gBACxB0sH,EAASr3M,EAAO1O,GAChB4jN,GAAOe,EAAW99M,IAAM,SAAUshN,GAChCvD,EAAUmB,EAAQoC,EAASrhN,SAAUwK,EAAUzK,EAAKshN,EAASrhN,UAC/D,IACAgD,EAAQi8M,EAAQl/M,GAAK,IAEhBk/M,GAAUl/M,CACnB,EAsQEuhN,mBArQuB,SAAU9nN,EAAGM,GAEpC,IADA,IAAYynN,EAARrqJ,EAAK19D,EACF09D,GAAI,CAET,IADAqqJ,EAAKznN,EACEynN,GAAMrqJ,IAAOqqJ,GAClBA,EAAKA,EAAG/5M,WAEV,GAAI0vD,IAAOqqJ,EACT,MAEFrqJ,EAAKA,EAAG1vD,UACV,CACA,OAAK0vD,GAAM19D,EAAEqnB,cACJrnB,EAAEqnB,cAAcG,gBAElBk2C,CACT,EAsPEs7B,MArPU,SAAUgvH,GACpB,OAAOz/K,EAAOywD,MAAMl6F,GAAMyJ,KAAKy/M,GACjC,EAoPEvpL,IAAKA,EACL4lL,WAAYA,EACZ4D,QA5OY,SAAUp7M,EAAMzF,GAC5B,IAAIlI,EAAMQ,EAAM6nM,EAAU,EAC1B,GAAIue,EAAkBj5M,GACpB,OAAO,EAGT,GADAA,EAAOA,EAAK1F,WACF,CACR,IAAID,EAAS,IAAIs8L,GAAc32L,EAAMA,EAAKmB,YACtCspM,EAAaztM,EAASA,EAAOonM,wBAA0B,CAAC,EAC5D7pM,EAAWA,IAAayC,EAASA,EAAOknM,sBAAwB,MAChE,EAAG,CAED,GADA7xM,EAAO2N,EAAK7C,SACR+zL,GAAYlxL,GAAO,CACrB,IAAIq7M,EAAWr7M,EAAKnF,aAAa,kBACjC,GAAIwgN,EAAU,CACZr7M,EAAO3F,EAAOI,KAAkB,QAAb4gN,GACnB,QACF,CAEA,GADAxoN,EAAOmN,EAAKrG,SAASC,cACjBW,GAAYA,EAAS1H,GAAO,CAC9B,GAAa,OAATA,EAAe,CACjB6nM,IACA16L,EAAO3F,EAAOI,OACd,QACF,CACA,OAAO,CACT,CACA,GAAIw+M,EAAkBj5M,GACpB,OAAO,CAEX,CACA,GAAa,IAAT3N,EACF,OAAO,EAET,GAAa,IAATA,IAAe2nM,GAAiBh6L,EAAKqgD,WACvC,OAAO,EAET,GAAa,IAAThuD,GAAc2N,EAAKmB,YAAcspM,EAAWzqM,EAAKmB,WAAWxH,WAAaqgM,GAAiBh6L,EAAKqgD,WACjG,OAAO,EAETrgD,EAAO3F,EAAOI,MAChB,OAASuF,EACX,CACA,OAAO06L,GAAW,CACpB,EAiME7/G,UAAWA,EACX22H,UAAWsF,GACX37M,MA/LU,SAAUw9M,EAAW2C,EAAUC,GACzC,IACIC,EACAC,EACAt6M,EAHA29C,EAAQ+7B,IAIZ,GAAI89H,GAAa2C,EAiBf,OAhBAx8J,EAAMI,SAASy5J,EAAUx3M,WAAY21M,GAAc6B,IACnD75J,EAAMO,OAAOi8J,EAASn6M,WAAY21M,GAAcwE,IAChDE,EAAiB18J,EAAM26B,mBACvB36B,EAAQ+7B,KACF37B,SAASo8J,EAASn6M,WAAY21M,GAAcwE,GAAY,GAC9Dx8J,EAAMO,OAAOs5J,EAAUx3M,WAAY21M,GAAc6B,GAAa,GAC9D8C,EAAgB38J,EAAM26B,mBACtBt4E,EAAaw3M,EAAUx3M,YACZC,aAAa25L,GAASvlM,EAAMgmN,GAAiB7C,GACpD4C,EACFp6M,EAAWC,aAAam6M,EAAgB5C,GAExCx3M,EAAWC,aAAak6M,EAAU3C,GAEpCx3M,EAAWC,aAAa25L,GAASvlM,EAAMimN,GAAgB9C,GACvDt3M,EAAOs3M,GACA4C,GAAkBD,CAE7B,EAwKEtmN,KAAMA,EACNgtB,OAAQA,EACRpV,KAhIS,SAAUjP,EAAQ9K,EAAM8V,GACjC,OAAOqvB,EAAOprB,KAAKjP,EAAQ9K,EAAM8V,EACnC,EA+HEywE,mBAAoBA,EACpBsiI,yBApH6B,SAAU17M,GAGvC,IAFA,IAAI8tC,EAAOwsC,IACP1zE,EAAQ,KACL5G,GAAQA,IAAS8tC,GAER,QADdlnC,EAAQwyE,EAAmBp5E,IADCA,EAAOA,EAAKmB,YAM1C,OAAOyF,CACT,EA2GE+sC,QA1GY,WACZ,GAAIyjK,EAAY7gN,OAAS,EAEvB,IADA,IAAIF,EAAI+gN,EAAY7gN,OACbF,KAAK,CACV,IAAIyB,EAAOs/M,EAAY/gN,GACvB2hC,EAAOhW,OAAOlqB,EAAK,GAAIA,EAAK,GAAIA,EAAK,GACvC,CAEFy0L,GAAO7pD,GAAO,SAAUx9H,EAAGvK,GACzBgtJ,EAAiBC,OAAOjtJ,UACjB+nI,EAAM/nI,EACf,IACI4xM,GAAOjZ,aACTiZ,GAAOjZ,aAEX,EA4FEqoB,UA3Fc,SAAU37M,EAAM6a,GAC9B,GAAK5E,GAEE,CACL,KAAOjW,GAAM,CACX,GAAI6a,IAAW7a,EACb,OAAO,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,CACT,CATE,OAAOnB,IAAS6a,GAAUA,EAAOf,SAAS9Z,EAU9C,EAgFE47M,QA/EY,SAAUxlN,GACtB,MAAO,mBAAqBA,EAAEkK,eAAe3G,SAAW,kBAAoBvD,EAAEupD,YAAc,mBAAqBvpD,EAAEqK,aAAa9G,SAAW,gBAAkBvD,EAAEwpD,SACjK,GA+EIg1J,EA30Be,SAAUl5K,EAAQ97B,EAAUu6E,GAC/C,IAAI0hI,EAAaj8M,EAASk8M,YACtBC,EAAc,CAChBt9L,IAAK,SAAUo4L,EAAMvkN,EAAOO,GACtB+M,EAASulM,eAA2B,OAAV7yM,IAC5BA,EAAQsN,EAASulM,cAActzM,KAAK+N,EAASylM,qBAAuBlrH,IAAc7nF,EAAOO,EAAMgkN,EAAK,KAEtGA,EAAK74K,KAAK,YAAcnrC,EAAMP,GAAO0rC,KAAKnrC,EAAMP,EAClD,EACA8rB,IAAK,SAAUy4L,EAAMhkN,GACnB,OAAOgkN,EAAK74K,KAAK,YAAcnrC,IAASgkN,EAAK74K,KAAKnrC,EACpD,GAEE+hN,EAAY,CACdviM,MAAO,CACLoM,IAAK,SAAUo4L,EAAMvkN,GACL,OAAVA,GAAmC,iBAAVA,GAIzBupN,GACFhF,EAAK74K,KAAK,iBAAkB1rC,GAEhB,OAAVA,GAAmC,iBAAVA,GAC3BukN,EAAK1B,WAAW,SAChB0B,EAAKx5L,IAAIqe,EAAO52B,MAAMxS,KAEtBukN,EAAK74K,KAAK,QAAS1rC,IAVnBukN,EAAKx5L,IAAI/qB,EAYb,EACA8rB,IAAK,SAAUy4L,GACb,IAAIvkN,EAAQukN,EAAK74K,KAAK,mBAAqB64K,EAAK74K,KAAK,SAErD,OADQtC,EAAO0qK,UAAU1qK,EAAO52B,MAAMxS,GAAQukN,EAAK,GAAGl9M,SAExD,IAMJ,OAHIkiN,IACFjH,EAAUh3M,KAAOg3M,EAAUxpH,IAAM2wH,GAE5BnH,CACT,CAkyBkBoH,CAAetgL,EAAQ97B,EAAUrM,EAASiC,IAC1D,OAAOA,CACT,EACAyhN,GAASnzH,IAAMmzH,GAASxuM,UACxBwuM,GAASzF,UAAYsF,GAErB,IAAImF,GAAQhF,GAASnzH,IACjBo4H,GAASjqN,GAAM8C,KAAM8H,GAAO5K,GAAM4K,KAKlCs/M,GAAe,WACjB,SAASA,EAAav8M,QACH,IAAbA,IACFA,EAAW,CAAC,GAEd1G,KAAKm8H,OAAS,CAAC,EACfn8H,KAAKkjN,MAAQ,GACbljN,KAAKmjN,sBAAwB,CAAC,EAC9BnjN,KAAKojN,qBAAuB,GAC5BpjN,KAAKqjN,QAAU,EACfrjN,KAAK0G,SAAWA,CAClB,CAwIA,OAvIAu8M,EAAazpN,UAAU2jM,mBAAqB,SAAUT,GACpD18L,KAAK0G,SAASg2L,eAAiBA,CACjC,EACAumB,EAAazpN,UAAU8pN,WAAa,SAAU7hN,EAAKiK,EAASiwL,GAC1D,IACIn7L,EADAwC,EAAM+/M,GAENQ,EAAU,WACZvgN,EAAImF,OAAOvP,GACP4H,IACFA,EAAIy7L,QAAUz7L,EAAIw7L,OAASx7L,EAAM,KAErC,EAeI5H,EAAKoK,EAAIs+M,YACb9gN,EAAM+O,SAASC,cAAc,WACzB5W,GAAKA,EACT4H,EAAIrH,KAAO,kBACXqH,EAAI0xF,IAAMn5F,GAAMy9L,gBAAgB/0L,GAC5BzB,KAAK0G,SAASg2L,gBAChB15L,EAAIu7M,UAAU/9M,EAAK,iBAAkBR,KAAK0G,SAASg2L,gBAErDl8L,EAAIw7L,OAtBO,WACTunB,IACA73M,GACF,EAoBAlL,EAAIy7L,QAnBQ,WACVsnB,IACIppN,EAAWwhM,GACbA,IAEuB,oBAAZ9hL,SAA2BA,QAAQod,KAC5Cpd,QAAQod,IAAI,0BAA4Bx1B,EAG9C,GAWC8N,SAASuwL,qBAAqB,QAAQ,IAAMvwL,SAASjB,MAAMhG,YAAY9H,EAC1E,EACAyiN,EAAazpN,UAAUgqN,OAAS,SAAU/hN,GACxC,OArDS,IAqDFzB,KAAKm8H,OAAO16H,EACrB,EACAwhN,EAAazpN,UAAUiqN,SAAW,SAAUhiN,GAC1CzB,KAAKm8H,OAAO16H,GAxDH,CAyDX,EACAwhN,EAAazpN,UAAUf,IAAM,SAAUgJ,EAAKiK,EAAS8N,EAAOmiL,GAC1D,IAAIjuL,EAAQ1N,KAAKm8H,OAAO16H,GACxBzB,KAAKkjN,MAAMnmN,KAAK0E,QACFhG,IAAViS,IACF1N,KAAKm8H,OAAO16H,GAhEL,GAkELiK,IACG1L,KAAKmjN,sBAAsB1hN,KAC9BzB,KAAKmjN,sBAAsB1hN,GAAO,IAEpCzB,KAAKmjN,sBAAsB1hN,GAAK1E,KAAK,CACnC2O,QAASA,EACTiwL,QAASA,EACTniL,MAAOA,GAASxZ,OAGtB,EACAijN,EAAazpN,UAAU02E,KAAO,SAAUzuE,EAAKiK,EAAS8N,EAAOmiL,GAC3D,OAAO37L,KAAKvH,IAAIgJ,EAAKiK,EAAS8N,EAAOmiL,EACvC,EACAsnB,EAAazpN,UAAU2O,OAAS,SAAU1G,UACjCzB,KAAKm8H,OAAO16H,UACZzB,KAAKmjN,sBAAsB1hN,EACpC,EACAwhN,EAAazpN,UAAUkqN,UAAY,SAAUh4M,EAAS8N,EAAOmiL,GAC3D37L,KAAK2jN,YAAY3jN,KAAKkjN,MAAOx3M,EAAS8N,EAAOmiL,EAC/C,EACAsnB,EAAazpN,UAAUmqN,YAAc,SAAUC,EAASl4M,EAAS8N,EAAOmiL,GACtE,IAAIr/L,EAAO0D,KACP6jN,EAAW,GACXC,EAAgB,SAAUnqN,EAAM8H,GAClCuhN,GAAO1mN,EAAK6mN,sBAAsB1hN,IAAM,SAAU+J,GAC5CrR,EAAWqR,EAAS7R,KACtB6R,EAAS7R,GAAMhB,KAAK6S,EAASgO,MAEjC,IACAld,EAAK6mN,sBAAsB1hN,QAAOhG,CACpC,EACAa,EAAK8mN,qBAAqBrmN,KAAK,CAC7B2O,QAASA,EACTiwL,QAASA,EACTniL,MAAOA,GAASxZ,OAElB,IAAI2jN,EAAc,WAChB,IAAII,EAAiBpgN,GAAKigN,GA4B1B,GA3BAA,EAAQvmN,OAAS,EACjB2lN,GAAOe,GAAgB,SAAUtiN,GAxG1B,IAyGDnF,EAAK6/H,OAAO16H,GAxGX,IA4GDnF,EAAK6/H,OAAO16H,GA9GV,IAkHFnF,EAAK6/H,OAAO16H,KACdnF,EAAK6/H,OAAO16H,GAnHR,EAoHJnF,EAAK+mN,UACL/mN,EAAKgnN,WAAW7hN,GAAK,WACnBnF,EAAK6/H,OAAO16H,GArHX,EAsHDnF,EAAK+mN,UACLS,EAAc,UAAWriN,GACzBkiN,GACF,IAAG,WACDrnN,EAAK6/H,OAAO16H,GAzHX,EA0HDnF,EAAK+mN,UACLQ,EAAS9mN,KAAK0E,GACdqiN,EAAc,UAAWriN,GACzBkiN,GACF,KAjBAG,EAAc,UAAWriN,GAJzBqiN,EAAc,UAAWriN,EAuB7B,KACKnF,EAAK+mN,QAAS,CACjB,IAAIW,EAAkB1nN,EAAK8mN,qBAAqBttM,MAAM,GACtDxZ,EAAK8mN,qBAAqB/lN,OAAS,EACnC2lN,GAAOgB,GAAiB,SAAUx4M,GACR,IAApBq4M,EAASxmN,OACPlD,EAAWqR,EAASE,UACtBF,EAASE,QAAQ/S,KAAK6S,EAASgO,OAG7Brf,EAAWqR,EAASmwL,UACtBnwL,EAASmwL,QAAQhjM,KAAK6S,EAASgO,MAAOqqM,EAG5C,GACF,CACF,EACAF,GACF,EACAV,EAAaA,aAAe,IAAIA,EACzBA,CACT,CApJmB,GAsJf5sL,GAAO,SAAUC,GACnB,IAAIl9B,EAAQk9B,EAOZ,MAAO,CACLpR,IAPQ,WACR,OAAO9rB,CACT,EAMEmsB,IALQ,SAAUlf,GAClBjN,EAAQiN,CACV,EAKF,EAQIhC,GAAO,CAAC,EACR4/M,GAAc5tL,GAAK,MACnB6tL,GAAkB,WACpB,OAAOn6L,GAAM1lB,GAAM4/M,GAAY/+L,MACjC,EAkEIi/L,GAAO,CACT36M,QAlEY,WACZ,OAAO6M,GAAMhS,IAAM,SAAUjL,GAC3B,OAAOsG,GAAS,CAAC,EAAGtG,EACtB,GACF,EA+DEgrN,QA9DY,SAAUC,GAClBA,GACFJ,GAAY1+L,IAAI8+L,EAEpB,EA2DEC,QA1DY,WACZ,OAAOL,GAAY/+L,KACrB,EAyDEzsB,IAxDU,SAAUiwK,EAAMrpK,GAC1B,IAAIklN,EAAWlgN,GAAKqkK,GACf67C,IACHlgN,GAAKqkK,GAAQ67C,EAAW,CAAC,GAE3BlxB,GAAOh0L,GAAO,SAAUmlN,EAAa7qN,GACnC4qN,EAAS5qN,EAAK+G,eAAiB8jN,CACjC,GACF,EAiDEp+L,UAhDc,SAAUnnB,GACxB,IAlCoByZ,EAkChB6rM,EAAWL,KAAkBjpN,MAAM,CAAC,GACpCkB,EAAW,SAAUgE,GACvB,OAAIhG,EAAWgG,GACNR,OAAOnG,UAAU2C,SAASxD,KAAKwH,GAEhC+hN,EAAQ/hN,GAAkB,GAAX,GAAKA,CAC9B,EACI+hN,EAAU,SAAUjjN,GACtB,MAAgB,KAATA,SAAeA,CACxB,EACIwlN,EAAc,SAAUxlN,GAC1B,IAAIylN,EAAUvoN,EAAS8C,GACvB,OAAO8qB,GAAMw6L,EAAUG,EAAQhkN,eAAe9E,IAAIO,GAAUlB,MAAMypN,EACpE,EACIC,EAAgB,SAAUjsM,GAC5B,OAAOA,EAAIjV,QAAQ,iBAAkB,GACvC,EACA,GAAIy+M,EAAQjjN,GACV,MAAO,GAET,GArDOgV,EADayE,EAsDVzZ,IArDckZ,GAAMO,EAAK,OAsDjC,OAAOvc,EAAS8C,EAAKwlB,KAEvB,GAtDgB,SAAU/L,GAC1B,OAAOi6K,EAAUj6K,IAAQA,EAAIrb,OAAS,CACxC,CAoDMunN,CAAY3lN,GAAO,CACrB,IAAI4lN,EAAW5lN,EAAK6W,MAAM,GAI1B,OAAO6uM,EAHUF,EAAYxlN,EAAK,IAAIwE,QAAQ,iBAAiB,SAAUqhN,EAAIC,GAC3E,OAAO5sM,GAAM0sM,EAAUE,GAAM5oN,EAAS0oN,EAASE,IAAOD,CACxD,IAEF,CACA,OAAOH,EAAcF,EAAYxlN,GACnC,EAiBE6hD,MAhBY,WACZ,OAAOojK,KAAkBpoN,MAAK,SAAUuD,GACtC,OAAO0qB,GAAM1qB,EAAO,OACtB,IAAGtD,QAAO,SAAU8zC,GAClB,MAAe,QAARA,CACT,GACF,EAWEm1K,QAVY,SAAUt8C,GACtB,OAAOvwJ,GAAM9T,GAAMqkK,EACrB,GAWIu8C,GAAe,WACjB,IAAI5lN,EAAQ,GACRy9L,EAAO,CAAC,EACRjrI,EAAS,CAAC,EACVqzJ,EAAa,GACbC,EAAe,SAAUxrN,EAAM+T,GACjC,IAAI03M,EAAmBnyB,EAASiyB,GAAY,SAAU//G,GACpD,OAAOA,EAASxrG,OAASA,GAAQwrG,EAASz3F,QAAUA,CACtD,IACAslL,EAAOoyB,GAAkB,SAAUjgH,GACjC,OAAOA,EAAS35F,UAClB,GACF,EAOI65M,EAAe,SAAU1rN,GAC3B,IAAI62B,EAIJ,OAHIqhC,EAAOl4D,KACT62B,EAASqhC,EAAOl4D,GAAM0rN,cAEjB70L,GAAU,EACnB,EA2BI80L,EAAY,SAAUC,EAASn6K,GACjC,MAAmB,iBAARA,EACFA,EAEiB,iBAAZm6K,EAAuB,CACnCtmL,OAAQ,GACRumL,SAAUp6K,EACVryB,OAAQ,IACN,CACFkmB,OAAQsmL,EAAQtmL,OAChBumL,SAAUp6K,EACVryB,OAAQwsM,EAAQxsM,OAEpB,EAqBIm3D,EAAO,SAAUv2E,EAAM8rN,EAAU/5M,EAAS8N,EAAOmiL,GACnD,IAAImB,EAAKnjM,GAAT,CAGA,IAAI+rN,EAAgC,iBAAbD,EAAwBA,EAAWA,EAASxmL,OAASwmL,EAASD,SAAWC,EAAS1sM,OAC1E,IAA3B2sM,EAAU7oN,QAAQ,OAA4C,IAA9B6oN,EAAU7oN,QAAQ,SACpD6oN,EAAYT,GAAa91D,QAAU,IAAMu2D,GAE3C5oB,EAAKnjM,GAAQ+rN,EAAUxkL,UAAU,EAAGwkL,EAAUlkI,YAAY,MAC1D,IAAI+nB,EAAO,WACT47G,EAAaxrN,EAAM,UAxBA,SAAUA,EAAM8rN,EAAU/5M,EAAS8N,GACxD,IAAImsM,EAAON,EAAa1rN,GACxBq5L,EAAO2yB,GAAM,SAAUv6K,GACrB,IAAIw6K,EAASN,EAAUG,EAAUr6K,GACjC8kC,EAAK01I,EAAOJ,SAAUI,OAAQnqN,OAAWA,EAC3C,IACIiQ,IACE8N,EACF9N,EAAQ/S,KAAK6gB,GAEb9N,EAAQ/S,KAAKsqN,IAGnB,CAYI4C,CAAiBlsN,EAAM8rN,EAAU/5M,EAAS8N,EAC5C,EACIq4C,EAAOl4D,GACT4vG,IAEA05G,GAAaA,aAAaxqN,IAAIitN,EAAWn8G,EAAM/vF,EAAOmiL,EAbxD,CAeF,EACImqB,EAAU,SAAUnsN,EAAM6R,EAAUkC,QACxB,IAAVA,IACFA,EAAQ,SAENyK,GAAM05C,EAAQl4D,IAAmB,UAAV+T,GAEhByK,GAAM2kL,EAAMnjM,IAAmB,WAAV+T,EAD9BlC,IAIA05M,EAAWnoN,KAAK,CACdpD,KAAMA,EACN+T,MAAOA,EACPlC,SAAUA,GAGhB,EACA,MAAO,CACLnM,MAAOA,EACPy9L,KAAMA,EACNjrI,OAAQA,EACRqzJ,WAAYA,EACZhgM,IAjHQ,SAAUvrB,GAClB,GAAIk4D,EAAOl4D,GACT,OAAOk4D,EAAOl4D,GAAM++H,QAGxB,EA6GE2sF,aAAcA,EACdU,gBAtGoB,SAAUpsN,EAAMqsN,IACF,IAA9Bf,GAAagB,cACfH,EAAQnsN,GAAM,WACZ,IAAIusN,EAAW/B,GAAKG,WAEf4B,GAAYF,IAAiE,KAD3D,KAAOA,GAAa,IAAM,KACFnpN,QAAQ,IAAMqpN,EAAW,MAGxEjD,GAAaA,aAAaxqN,IAAIqkM,EAAKnjM,GAAQ,UAAYusN,EAAW,MACpE,GAAG,SAEP,EA4FEztN,IA3FQ,SAAUG,EAAIutN,EAAOd,GAC7B,IAAIe,EAAmBD,EAOvB,OANA9mN,EAAMtC,KAAKqpN,GACXv0J,EAAOj5D,GAAM,CACX8/H,SAAU0tF,EACVf,aAAcA,GAEhBF,EAAavsN,EAAI,SACVwtN,CACT,EAmFEj+M,OAlFW,SAAUxO,UACdmjM,EAAKnjM,UACLk4D,EAAOl4D,EAChB,EAgFE2rN,UAAWA,EACXe,cAlEkB,SAAUC,EAAY1C,GACxC,IAAI2C,EAAYzpB,EAAKwpB,GACrBtzB,EAAO4wB,GAAS,SAAU/d,GACxBod,GAAaA,aAAaxqN,IAAI8tN,EAAY,IAAM1gB,EAClD,GACF,EA8DE31H,KAAMA,EACN41I,QAASA,EAEb,EACAb,GAAagB,cAAe,EAC5BhB,GAAa91D,QAAU,GACvB81D,GAAauB,cAAgBvB,KAC7BA,GAAawB,aAAexB,KAE5B,IA0BI7rN,GAAQ,WACV,IAAIouC,EA3BU,SAAU6S,GACxB,IAAI7S,EAAUnR,GAAK35B,EAAShC,QACxB24C,EAAS,WACX,OAAO7L,EAAQtiB,MAAMrpB,KAAKw+C,EAC5B,EAeA,MAAO,CACLC,MAfU,WACVjH,IACA7L,EAAQjiB,IAAI7oB,EAAShC,OACvB,EAaE6/C,MAZU,WACV,OAAO/S,EAAQtiB,MAAMnqB,QACvB,EAWEmqB,IAVQ,WACR,OAAOsiB,EAAQtiB,KACjB,EASEK,IARQ,SAAU9oB,GAClB42C,IACA7L,EAAQjiB,IAAI7oB,EAASN,KAAKK,GAC5B,EAOF,CAEgB29C,CAAUhgD,GAIxB,OAAOsF,GAASA,GAAS,CAAC,EAAG8nC,GAAU,CAAEp3B,GAHhC,SAAU5T,GACjB,OAAOgrC,EAAQtiB,MAAMrpB,KAAKW,EAC5B,GAEF,EAEIqqE,GAAQ,SAAU9xD,EAAI4qE,GACxB,IAAIzjC,EAAQ,KAmBZ,MAAO,CACL0jC,OAnBW,WACN5lF,EAAOkiD,KACVD,aAAaC,GACbA,EAAQ,KAEZ,EAeE2jC,SAda,WAEb,IADA,IAAInrE,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAEnB3a,EAAOkiD,KACTA,EAAQe,YAAW,WACjBf,EAAQ,KACRnnC,EAAGzX,MAAM,KAAMoX,EACjB,GAAGirE,GAEP,EAKF,EACI/2B,GAAO,SAAU7zC,EAAI4qE,GACvB,IAAIzjC,EAAQ,KACR0jC,EAAS,WACN5lF,EAAOkiD,KACVD,aAAaC,GACbA,EAAQ,KAEZ,EAYA,MAAO,CACL0jC,OAAQA,EACRC,SAba,WAEb,IADA,IAAInrE,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAEvBirE,IACA1jC,EAAQe,YAAW,WACjBf,EAAQ,KACRnnC,EAAGzX,MAAM,KAAMoX,EACjB,GAAGirE,EACL,EAKF,EAEI+mI,GAAS,SAAU30M,EAAS+yB,GAC9B,IAAI1rC,EAAQosC,GAAMzzB,EAAS+yB,GAC3B,YAAiBrpC,IAAVrC,GAAiC,KAAVA,EAAe,GAAKA,EAAM6I,MAAM,IAChE,EAmBI8iC,GAAW,SAAUhzB,GACvB,YAAiCtW,IAA1BsW,EAAQ/O,IAAIgiC,SACrB,EAWIU,GAAQ,SAAU3zB,EAASmzB,GACzBH,GAAShzB,GACXA,EAAQ/O,IAAIgiC,UAAUvsC,IAAIysC,GATlB,SAAUnzB,EAASmzB,IAxBnB,SAAUnzB,EAAS+yB,EAAMlsC,GACnC,IACIkiB,EADM4rM,GAAO30M,EAAS+yB,GACbxiC,OAAO,CAAC1J,IACrBg3E,GAAM79D,EAAS+yB,EAAMhqB,EAAGpY,KAAK,KAE/B,EAoBS0iC,CAAMrzB,EAAS,QAASmzB,EACjC,CASID,CAAMlzB,EAASmzB,EAEnB,EAgBIhlC,GAAM,SAAU6R,EAASmzB,GAC3B,OAAOH,GAAShzB,IAAYA,EAAQ/O,IAAIgiC,UAAUpkB,SAASskB,EAC7D,EAEIqjD,GAAgB,SAAU/uE,EAAOzY,GACnC,IAAIyvB,EAAS,GAOb,OANAwiK,EAAOnxK,GAASrI,IAAQ,SAAUlgB,GAC5ByH,EAAUzH,KACZk3B,EAASA,EAAOluB,OAAO,CAAChJ,KAE1Bk3B,EAASA,EAAOluB,OAAOimF,GAAcjvF,EAAGyH,GAC1C,IACOyvB,CACT,EAEIg3B,GAAc,SAAUhuC,EAAO2G,GACjC,OAz8MQ,SAAUA,EAAU3G,GAC5B,IAAIge,OAAiB/7B,IAAV+d,EAAsBjK,SAAWiK,EAAMxW,IAClD,OAAOud,GAAeiX,GAAQ,GAAKu7J,EAAMv7J,EAAKiwB,iBAAiBtnC,GAAW7G,GAC5E,CAs8MSpE,CAAIiL,EAAU3G,EACvB,EAEImtM,GAAatsN,EAAS,kBACtBusN,GAAiBvsN,EAAS,uBAC1BwsN,GAAmBxsN,EAAS,2BAE5BysN,GAAW,SAAU7oN,EAAQ8oN,GAC/B,IAAIjmN,EAAM7C,EAAO4E,UAAUmB,SACvB4U,EAAQU,GAAqBxY,EAAIsG,gBACjCwtC,EAAOt7B,GAAqBrb,EAAOoJ,WACnC8Y,EAAW4mM,EAAensN,MAAK,WACjC,MAAO,IAAM+rN,IACf,IAAG,SAAUK,GACX,MAAO,IAAMJ,KAAmB,KAAOI,EAAK,IAC9C,IACIC,EAAWv8K,GAAQ9xB,EAAO9X,EAAI2lD,aAAaxrD,MAAM2d,GACjDynF,EAAU51D,GAAUw8K,EAAU9mM,GAAU,SAAUtlB,GACpD,OAAO4lB,GAAG5lB,EAAG+5C,EACf,IACIsyK,EAAU,SAAUpjL,EAAGjgB,GACzB,OAr/LQ,SAAU9R,EAAS3R,GAC7B,IAAI4C,EAAM+O,EAAQ/O,IAClB,SAAOA,IAAOA,EAAIygB,eAAezgB,EAAIygB,aAAarjB,EACpD,CAk/LQojB,CAAMsgB,EAAGjgB,GACJnnB,EAASN,KAAKopC,GAAM1B,EAAGjgB,IAEvBnnB,EAAShC,MAEpB,EACA,OAAO2lG,EAAQvkG,MAAK,SAAUgoC,GAC5B,OAAOojL,EAAQpjL,EAAG,GAAK+iL,MAAoB/qN,MAAK,SAAU4gC,GACxD,OAAOwqL,EAAQpjL,EAAG,GAAK8iL,MAAkBhrN,KAAI,SAAUjC,GACrD,IAAI0H,EAAW8lN,GAAYlpN,EAAQy+B,GACnC,MAAO,CACLA,IAAKA,EACL/iC,KAAMA,EACN0H,SAAUA,EAEd,GACF,GACF,GACF,EAII8lN,GAAc,SAAUlpN,EAAQy+B,GAClC,IAAIpuB,EAAOgL,GAAqBrb,EAAOoJ,WACvC,OAAOmgD,GAAYl5C,EAAM,IAAMu4M,KAAqB,KAAOnqL,EAAM,KACnE,EAmIIqC,GAAS,EACTo6B,GAAW,SAAUl6B,GACvB,IACIC,GADO,IAAIC,MACCC,UAGhB,OAAOH,EAAS,IAFHpU,KAAKwU,MAAsB,IAAhBxU,KAAKyU,aAC7BP,GACwCnlC,OAAOslC,EACjD,EAqBI3Z,GAAM,SAAUxT,EAAS8rB,GAC3B,IAduBtkB,EAEnBE,EAaAqkB,EADQq8E,GAAQpoG,GACD/O,IACf+6B,EAAWzkB,GAAqBwkB,EAAOE,0BACvCC,GAjBmB1kB,EAiBQskB,GAf3BpkB,GAeoCqkB,GAhBrBvuB,UACLC,cAAc,QACxBkK,UAAYH,EACTsI,GAASvI,GAAqBG,KAcrCs0D,GAAOhwC,EAAUE,GACjBxU,GAAM1X,GACNyX,GAASzX,EAASgsB,EACpB,EAEIQ,GAAU,SAAUrwB,EAAUowB,GAChC,OAAOhlB,GAAqBpL,EAASlL,IAAIq7B,UAAUC,GACrD,EACIE,GAAU,SAAUtwB,GACtB,OAAOqwB,GAAQrwB,GAAU,EAC3B,EACIk5M,GAAS,SAAUl5M,GACrB,OAAOqwB,GAAQrwB,GAAU,EAC3B,EAEIm5M,GAAa,SAAU3jD,EAAW1jF,EAAUG,QAC3B,IAAfA,IACFA,EAAa3lF,GAEf,IAAI2G,EAAS,IAAIs8L,GAAc/5B,EAAW1jF,GACtCu2G,EAAO,SAAUtoJ,GACnB,IAAI1sC,EACJ,GACEA,EAAOJ,EAAO8sC,WACP1sC,IAASm3L,GAASn3L,KAAU4+E,EAAW5+E,IAChD,OAAO7E,EAASC,KAAK4E,GAAMtF,OAAOy8L,GACpC,EACA,MAAO,CACLp3L,QAAS,WACP,OAAO5E,EAASC,KAAKwE,EAAOG,WAAWrF,OAAOy8L,GAChD,EACAn3L,KAAM,WACJ,OAAOg1L,EAAK,OACd,EACAp3C,KAAM,WACJ,OAAOo3C,EAAK,OACd,EACAmH,MAAO,WACL,OAAOnH,EAAK,QACd,EAEJ,EAEI+wB,GAAa,SAAUtkN,EAAKm9E,GAC9B,IAAIonI,EAAkBpnI,GAA0B,SAAUr5E,GACxD,OAAO9D,EAAIi9E,QAAQn5E,IAAS+xL,GAAO/xL,IAASkyL,GAAyBlyL,EACvE,EACIyvL,EAAO,SAAUzvL,EAAMob,EAAQ/gB,EAAQ0tB,GACzC,GAAI6pK,GAAS5xL,GAAO,CAClB,IAAI0gN,EAAY34L,EAAQ/nB,EAAMob,EAAQpb,EAAKzC,MAC3C,IAAmB,IAAfmjN,EACF,OAAO9qN,EAASN,KAAK,CACnB+hC,UAAWr3B,EACXob,OAAQslM,GAGd,CACA,OAAOrmN,IAASrF,MAAK,SAAUyF,GAC7B,OAAOg1L,EAAKh1L,EAAK48B,UAAW58B,EAAK2gB,OAAQ/gB,EAAQ0tB,EACnD,GACF,EAuBA,MAAO,CACLuxD,UAvBc,SAAUt5E,EAAMob,EAAQ2M,EAAS+lB,GAC/C,IAAIzzC,EAASkmN,GAAWvgN,EAAM8tC,EAAM2yK,GACpC,OAAOhxB,EAAKzvL,EAAMob,GAAQ,WACxB,OAAO/gB,EAAOg+I,OAAOvjJ,KAAI,SAAUujJ,GACjC,MAAO,CACLhhH,UAAWghH,EACXj9H,OAAQi9H,EAAK9hJ,OAEjB,GACF,GAAGwxB,GAAStzB,WACd,EAcEksN,SAba,SAAU3gN,EAAMob,EAAQ2M,EAAS+lB,GAC9C,IAAIzzC,EAASkmN,GAAWvgN,EAAM8tC,EAAM2yK,GACpC,OAAOhxB,EAAKzvL,EAAMob,GAAQ,WACxB,OAAO/gB,EAAOI,OAAO3F,KAAI,SAAU2F,GACjC,MAAO,CACL48B,UAAW58B,EACX2gB,OAAQ,EAEZ,GACF,GAAG2M,GAAStzB,WACd,EAKF,EAEImsN,GAAU78L,KAAK+wB,MACfxd,GAAQ,SAAU4X,GACpB,OAAKA,EAUE,CACLn4C,KAAM6pN,GAAQ1xK,EAAKn4C,MACnBsoB,IAAKuhM,GAAQ1xK,EAAK7vB,KAClBkE,OAAQq9L,GAAQ1xK,EAAK3rB,QACrBD,MAAOs9L,GAAQ1xK,EAAK5rB,OACpBD,MAAOu9L,GAAQ1xK,EAAK7rB,OACpBrE,OAAQ4hM,GAAQ1xK,EAAKlwB,SAfd,CACLjoB,KAAM,EACNsoB,IAAK,EACLkE,OAAQ,EACRD,MAAO,EACPD,MAAO,EACPrE,OAAQ,EAWd,EACInT,GAAW,SAAUqjC,EAAM2xK,GAS7B,OARA3xK,EAAO5X,GAAM4X,GACT2xK,IAGF3xK,EAAKn4C,KAAOm4C,EAAKn4C,KAAOm4C,EAAK7rB,OAF7B6rB,EAAK5rB,MAAQ4rB,EAAKn4C,KAKpBm4C,EAAK7rB,MAAQ,EACN6rB,CACT,EAII4xK,GAAkB,SAAUC,EAAWC,EAAOC,GAChD,OAAOF,GAAa,GAAKA,GAAah9L,KAAK6kB,IAAIo4K,EAAMhiM,OAAQiiM,EAAMjiM,QAAU,CAC/E,EACIkiM,GAAY,SAAUF,EAAOC,GAC/B,IAAIE,EAAap9L,KAAK6kB,IAAIq4K,EAAMjiM,OAAS,EAAGgiM,EAAMhiM,OAAS,GAC3D,OAAIgiM,EAAMz9L,OAAS49L,EAAaF,EAAM5hM,OAGlC2hM,EAAM3hM,IAAM4hM,EAAM19L,SAGfu9L,GAAgBG,EAAM5hM,IAAM2hM,EAAMz9L,OAAQy9L,EAAOC,EAC1D,EACIG,GAAY,SAAUJ,EAAOC,GAC/B,OAAID,EAAM3hM,IAAM4hM,EAAM19L,UAGlBy9L,EAAMz9L,OAAS09L,EAAM5hM,MAGlByhM,GAAgBG,EAAM19L,OAASy9L,EAAM3hM,IAAK2hM,EAAOC,EAC1D,EACII,GAAa,SAAUnyK,EAAM1tB,EAASC,GACxC,OAAOD,GAAW0tB,EAAKn4C,MAAQyqB,GAAW0tB,EAAK5rB,OAAS7B,GAAWytB,EAAK7vB,KAAOoC,GAAWytB,EAAK3rB,MACjG,EAMI+9L,GAAkB,SAAUxiK,GAC9B,IAAIx+C,EAAiBw+C,EAAMx+C,eAAgBq/C,EAAcb,EAAMa,YAC/D,OAAIr/C,EAAeuS,iBAAmBisC,EAAMc,YAAcD,EAAc,EAC/Dr/C,EAAewS,WAAW6sC,GAE5B,IACT,EACI4hK,GAAY,SAAUlqL,EAAWjc,GACnC,GAAI81K,GAAY75J,IAAcA,EAAUxkB,gBAAiB,CACvD,IAAIC,EAAaukB,EAAUvkB,WACvB0uM,EAdM,SAAUlvN,EAAOs2C,EAAKhqB,GAClC,OAAOmF,KAAK6kB,IAAI7kB,KAAKnF,IAAItsB,EAaU,GAbGssB,EACxC,CAYqB6iM,CAAQrmM,EAAQ,EAAGtI,EAAWvc,OAAS,GACxD,OAAOuc,EAAW0uM,EACpB,CACE,OAAOnqL,CAEX,EASIqqL,GAAiB,IAAIh3H,OAAO,weAC5Bi3H,GAAkB,SAAUj1L,GAC9B,MAAqB,iBAAPA,GAAmBA,EAAGyvF,WAAW,IAAM,KAAOulG,GAAe9mN,KAAK8xB,EAClF,EA+BIk1L,GAAc1wB,GACd2wB,GAAqBnoB,GACrBooB,GAAYzwB,GAAiB,UAAW,eACxC0wB,GAAY1wB,GAAiB,QAAS,cACtC2wB,GAnBM,WAER,IADA,IAAIp0M,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAEvB,OAAO,SAAUrb,GACf,IAAK,IAAI6D,EAAI,EAAGA,EAAIuX,EAAKrX,OAAQF,IAC/B,IAAKuX,EAAKvX,GAAG7D,GACX,OAAO,EAGX,OAAO,CACT,CACF,CAMmComE,CAAIgpJ,GAAaC,GAAoBxzM,EAAI0zM,KACxEE,GAAW5zM,EAAIgjL,GAAiB,cAAe,0BAC/C6wB,GAAWtwB,GACXuwB,GAASpwB,GACTqwB,GAAcnL,GAASzF,UACvB6Q,GAnDgB,SAAUhrL,EAAWjc,GACvC,OAAIA,EAAS,GAAK81K,GAAY75J,IAAcA,EAAUxkB,qBACpD,EAEO0uM,GAAUlqL,EAAWjc,EAEhC,EA8CIknM,GAAgB,SAAUnmM,GAC5B,MAAO,gBAAiBA,EAAMA,EAAI8iC,cAAgBg4J,GAASnzH,IAAIjJ,WACjE,EACI0nI,GAAiB,SAAUvoI,GAC7B,OAAOA,GAAO,YAAYp/E,KAAKo/E,EACjC,EACIwoI,GAAU,SAAUxoN,GACtB,QAASA,EAAIklD,YAAcllD,EAAIqlD,MACjC,EACIojK,GAA0B,SAAU3jK,GACtC,IAAIznB,EAAYynB,EAAMx+C,eAClB8a,EAAS0jC,EAAMa,YACnB,GAAI4iK,GAAezjK,EAAMzpD,aAAe4sN,GAAS5qL,EAAUl2B,aAAeywL,GAASv6J,GAAY,CAC7F,IAAIl/B,EAAOk/B,EAAU95B,KACrB,GAAIglN,GAAepqN,EAAKijB,EAAS,KAAOmnM,GAAepqN,EAAKijB,EAAS,IACnE,OAAO,CAEX,CACA,OAAO,CACT,EA0BIsnM,GAAa,SAAUtsN,GACzB,OAAkB,IAAXA,EAAEW,MAA0B,IAAZX,EAAEktB,OAAyB,IAAVltB,EAAEipB,KAA0B,IAAbjpB,EAAEmtB,MAC3D,EACIo/L,GAA0B,SAAU7qN,GACtC,IAAI8qN,EACAC,EAAc/qN,EAAK6pD,iBAMvB,OAJEihK,EADEC,EAAYtsN,OAAS,EACV+gC,GAAMurL,EAAY,IAElBvrL,GAAMx/B,EAAKinB,0BAErByjM,GAAQ1qN,IAASqqN,GAAOrqN,IAAS4qN,GAAWE,GApC7B,SAAUE,GAC9B,IAAI3mM,EAAM2mM,EAAOtoM,cACbxgB,EAAMsoN,GAAcnmM,GACpB4mM,EAAS5mM,EAAIlJ,eAAe2kL,IAC5Bz2L,EAAa2hN,EAAO3hN,WACxBA,EAAWC,aAAa2hN,EAAQD,GAChC9oN,EAAIklD,SAAS6jK,EAAQ,GACrB/oN,EAAIqlD,OAAO0jK,EAAQ,GACnB,IAAIH,EAAatrL,GAAMt9B,EAAI+kB,yBAE3B,OADA5d,EAAW6H,YAAY+5M,GAChBH,CACT,CA0BWI,CAAgBlrN,GAErB4qN,GAAWE,IAAeJ,GAAQ1qN,GA3BF,SAAUkC,GAC9C,IAAIipN,EAAKjpN,EAAIsG,eACT4iN,EAAKlpN,EAAIyG,aACT0iN,EAAKnpN,EAAI2lD,YACTyjK,EAAKppN,EAAI4lD,UACb,GAAIqjK,IAAOC,GAAMtxB,GAASsxB,IAAc,IAAPC,GAAmB,IAAPC,EAAU,CACrD,IAAIC,EAASrpN,EAAIoG,aAEjB,OADAijN,EAAO1iN,YAAYuiN,GACZP,GAAwBU,EACjC,CACE,OAAO,IAEX,CAgBWC,CAAgCxrN,GAElC8qN,CACT,EACIW,GAA0B,SAAUX,EAAY/B,GAClD,IAAI2C,EAAgB33M,GAAS+2M,EAAY/B,GAGzC,OAFA2C,EAAcngM,MAAQ,EACtBmgM,EAAclgM,MAAQkgM,EAAczsN,KAAO,EACpCysN,CACT,EAiFIC,GAAgB,SAAUpsL,EAAWjc,EAAQynM,GAC/C,IAkBIlhK,EAAiB,WAInB,OAHKkhK,IACHA,EArG4B,SAAUa,GAC1C,IAAIb,EAAc,GACdc,EAAwB,SAAUf,GA7K1B,IAAU5B,EAAOC,EA8KD,IAAtB2B,EAAW5jM,SAGX6jM,EAAYtsN,OAAS,IAjLLyqN,EAkLN4B,EAlLa3B,EAkLD4B,EAAYA,EAAYtsN,OAAS,GAjLtDyqN,EAAMjqN,OAASkqN,EAAMlqN,MAAQiqN,EAAM3hM,MAAQ4hM,EAAM5hM,KAAO2hM,EAAMz9L,SAAW09L,EAAM19L,QAAUy9L,EAAM19L,QAAU29L,EAAM39L,QAqLpHu/L,EAAY5sN,KAAK2sN,GACnB,EACIgB,EAAqB,SAAUvsL,EAAWjc,GAC5C,IAAI0jC,EAAQwjK,GAAcjrL,EAAU7c,eACpC,GAAIY,EAASic,EAAU95B,KAAKhH,OAAQ,CAClC,GAAIorN,GAAgBtqL,EAAU95B,KAAK6d,IACjC,OAAOynM,EAET,GAAIlB,GAAgBtqL,EAAU95B,KAAK6d,EAAS,MAC1C0jC,EAAMI,SAAS7nB,EAAWjc,GAC1B0jC,EAAMO,OAAOhoB,EAAWjc,EAAS,IAC5BqnM,GAAwB3jK,IAE3B,OADA6kK,EAAsBJ,GAAwBZ,GAAwB7jK,IAAQ,IACvE+jK,CAGb,CACIznM,EAAS,IACX0jC,EAAMI,SAAS7nB,EAAWjc,EAAS,GACnC0jC,EAAMO,OAAOhoB,EAAWjc,GACnBqnM,GAAwB3jK,IAC3B6kK,EAAsBJ,GAAwBZ,GAAwB7jK,IAAQ,KAG9E1jC,EAASic,EAAU95B,KAAKhH,SAC1BuoD,EAAMI,SAAS7nB,EAAWjc,GAC1B0jC,EAAMO,OAAOhoB,EAAWjc,EAAS,GAC5BqnM,GAAwB3jK,IAC3B6kK,EAAsBJ,GAAwBZ,GAAwB7jK,IAAQ,IAGpF,EACIznB,EAAYqsL,EAAcrsL,YAC1Bjc,EAASsoM,EAActoM,SAC3B,GAAI8mM,GAAS7qL,GAEX,OADAusL,EAAmBvsL,EAAWjc,GACvBynM,EAET,GAAIjB,GAAYvqL,GACd,GAAIqsL,EAAcjrB,UAAW,CAC3B,IAAIz4L,EAAOqiN,GAAehrL,EAAWjc,GACjC8mM,GAASliN,IACX4jN,EAAmB5jN,EAAMA,EAAKzC,KAAKhH,QAEjCyrN,GAA6BhiN,KAAUmiN,GAAOniN,IAChD2jN,EAAsBJ,GAAwBZ,GAAwB3iN,IAAO,GAEjF,KAAO,CAKL,GAJIA,EAAOqiN,GAAehrL,EAAWjc,GACjC8mM,GAASliN,IACX4jN,EAAmB5jN,EAAM,GAEvBgiN,GAA6BhiN,IAAS0jN,EAAcjrB,UAEtD,OADAkrB,EAAsBJ,GAAwBZ,GAAwB3iN,IAAO,IACtE6iN,EAET,IAAIgB,EAAaxB,GAAeqB,EAAcrsL,YAAaqsL,EAActoM,SAAW,GAChF4mM,GAA6B6B,KAAgB1B,GAAO0B,KAClD/B,GAAU+B,IAAe/B,GAAU9hN,KAAUgiN,GAA6BhiN,KAC5E2jN,EAAsBJ,GAAwBZ,GAAwBkB,IAAa,IAGnF7B,GAA6BhiN,IAC/B2jN,EAAsBJ,GAAwBZ,GAAwB3iN,IAAO,GAEjF,CAEF,OAAO6iN,CACT,CAsBoBiB,CAA4BL,GAAcpsL,EAAWjc,KAE9DynM,CACT,EAUA,MAAO,CACLxrL,UAAW9jC,EAAS8jC,GACpBjc,OAAQ7nB,EAAS6nB,GACjB2oM,QAxBY,WACZ,IAAIjlK,EAAQwjK,GAAcjrL,EAAU7c,eAGpC,OAFAskC,EAAMI,SAAS7nB,EAAWjc,GAC1B0jC,EAAMO,OAAOhoB,EAAWjc,GACjB0jC,CACT,EAoBE6C,eAAgBA,EAChBtK,UAdc,WACd,OAAOsK,IAAiBprD,OAAS,CACnC,EAaEgiM,UAvCc,WACd,OAAI2pB,GAAS7qL,GACO,IAAXjc,CAGX,EAmCEq9K,QAlCY,WACZ,OAAIypB,GAAS7qL,GACJjc,GAAUic,EAAU95B,KAAKhH,OAE3B6kB,GAAUic,EAAUvkB,WAAWvc,MACxC,EA8BEytN,QAdY,SAAUN,GACtB,OAAOA,GAAiBrsL,IAAcqsL,EAAcrsL,aAAejc,IAAWsoM,EAActoM,QAC9F,EAaEpf,QAZY,SAAU8hD,GACtB,OAAOukK,GAAehrL,EAAWymB,EAAS1iC,EAAS,EAAIA,EACzD,EAYF,EACAqoM,GAAcQ,eAAiB,SAAUnlK,GACvC,OAAO2kK,GAAc3kK,EAAMx+C,eAAgBw+C,EAAMa,YACnD,EACA8jK,GAAcS,aAAe,SAAUplK,GACrC,OAAO2kK,GAAc3kK,EAAMr+C,aAAcq+C,EAAMc,UACjD,EACA6jK,GAAc1lK,MAAQ,SAAU/9C,GAC9B,OAAOyjN,GAAczjN,EAAKmB,WAAYihN,GAAYpiN,GAAQ,EAC5D,EACAyjN,GAAc3lK,OAAS,SAAU99C,GAC/B,OAAOyjN,GAAczjN,EAAKmB,WAAYihN,GAAYpiN,GACpD,EACAyjN,GAAcp1C,QAAU,SAAU81C,EAAMC,GACtC,OAAO5yM,GAAMZ,GAAKwzM,EAAKziK,kBAAmB9wC,GAAOszM,EAAKxiK,kBAAmBu/J,IAAW/sN,OAAM,EAC5F,EACAsvN,GAAcn1C,QAAU,SAAU61C,EAAMC,GACtC,OAAO5yM,GAAMX,GAAOuzM,EAAKziK,kBAAmB/wC,GAAKuzM,EAAKxiK,kBAAmBy/J,IAAWjtN,OAAM,EAC5F,EACAsvN,GAAclrB,UAAY,SAAU3oJ,GAClC,QAAOA,GAAMA,EAAI2oJ,WACnB,EACAkrB,GAAchrB,QAAU,SAAU7oJ,GAChC,QAAOA,GAAMA,EAAI6oJ,SACnB,EACAgrB,GAAcY,eAAiB,SAAUz0K,GACvC,QAAOA,GAAMgiJ,GAAShiJ,EAAIvY,YAC5B,EACAosL,GAAca,kBAAoB,SAAU10K,GAC1C,OAA6C,IAAtC6zK,GAAcY,eAAez0K,EACtC,EAEA,IAiiCI20K,GAjiCAC,GAAsB,SAAUtoN,EAAK8D,GACnC4xL,GAAS5xL,IAA8B,IAArBA,EAAKzC,KAAKhH,QAC9B2F,EAAImF,OAAOrB,EAEf,EAiBIykN,GAAkB,SAAUvoN,EAAKlC,EAAKgG,GACpCwT,GAAmBxT,GAZJ,SAAU9D,EAAKlC,EAAK45M,GACvC,IAAIt5M,EAAa1E,EAASC,KAAK+9M,EAAKt5M,YAChCg2L,EAAY16L,EAASC,KAAK+9M,EAAKtjB,WACnCt2L,EAAI0/E,WAAWk6H,GACft5M,EAAWvF,MAAK,SAAU0tC,GACxB,OAAO+hL,GAAoBtoN,EAAKumC,EAAM0tJ,gBACxC,IACAG,EAAUv7L,MAAK,SAAU0tC,GACvB,OAAO+hL,GAAoBtoN,EAAKumC,EAAMngB,YACxC,GACF,CAGIoiM,CAAexoN,EAAKlC,EAAKgG,GAlBZ,SAAU9D,EAAKlC,EAAKgG,GACnChG,EAAI0/E,WAAW15E,GACfwkN,GAAoBtoN,EAAK8D,EAAKmwL,iBAC9Bq0B,GAAoBtoN,EAAK8D,EAAKsiB,YAChC,CAgBIo3D,CAAWx9E,EAAKlC,EAAKgG,EAEzB,EAEI2kN,GAAW/yB,GACXgzB,GAAUpzB,GACVggB,GAAYyF,GAASzF,UACrBqT,GAAmB,SAAU7kN,GAC/B,IAAImB,EAAanB,EAAKmB,WACtB,OAAIyjN,GAAQzjN,GACH0jN,GAAiB1jN,GAEnBA,CACT,EACI2jN,GAAgB,SAAU9kN,GAC5B,OAAKA,EAGE4sL,GAAO5sL,EAAK8S,YAAY,SAAU4W,EAAQ1pB,GAM/C,OALI4kN,GAAQ5kN,IAA2B,OAAlBA,EAAKrG,SACxB+vB,EAASA,EAAOluB,OAAOspN,GAAc9kN,IAErC0pB,EAAOzzB,KAAK+J,GAEP0pB,CACT,GAAG,IATM,EAUX,EAUIq7L,GAAQ,SAAU5xN,GACpB,OAAO,SAAUM,GACf,OAAON,IAAMM,CACf,CACF,EAgBIuxN,GAAiB,SAAUhlN,GAO7B,OALI2kN,GAAS3kN,GACJ,SAEAA,EAAKrG,SAASC,eAET,IAtBU,SAAUoG,GAClC,IAAIuyL,EAAOt3K,EACXs3K,EAAQuyB,GAAcD,GAAiB7kN,IACvCib,EAAQ/K,GAAYqiL,EAAOwyB,GAAM/kN,GAAOA,GACxCuyL,EAAQA,EAAMvjL,MAAM,EAAGiM,EAAQ,GAC/B,IAAIgqM,EAAmBr4B,GAAO2F,GAAO,SAAU7oK,EAAQ1pB,EAAM3J,GAI3D,OAHIsuN,GAAS3kN,IAAS2kN,GAASpyB,EAAMl8L,EAAI,KACvCqzB,IAEKA,CACT,GAAG,GAGH,OAFA6oK,EAAQ5iL,GAAS4iL,EAAOpB,GAAe,CAACnxL,EAAKrG,aAC7CshB,EAAQ/K,GAAYqiL,EAAOwyB,GAAM/kN,GAAOA,IACzBilN,CACjB,CAQsBC,CAAoBllN,GAAQ,GAClD,EAWImlN,GAAW,SAAUr3K,EAAM41K,GAC7B,IAAIrsL,EAAWjc,EAAmBgqM,EAActyM,EAAY7I,EAArC2a,EAAO,GAqB9B,OApBAyS,EAAYqsL,EAAcrsL,YAC1Bjc,EAASsoM,EAActoM,SACnBupM,GAASttL,GACX+tL,EArDuB,SAAUplN,EAAMob,GACzC,MAAOpb,EAAOA,EAAKmwL,kBACZw0B,GAAS3kN,IAGdob,GAAUpb,EAAKzC,KAAKhH,OAEtB,OAAO6kB,CACT,CA6CmBiqM,CAAqBhuL,EAAWjc,IAG3CA,IADJtI,EAAaukB,EAAUvkB,YACEvc,QACvB6uN,EAAe,QACfhqM,EAAStI,EAAWvc,OAAS,GAE7B6uN,EAAe,SAEjB/tL,EAAYvkB,EAAWsI,IAEzBwJ,EAAK3uB,KAAK+uN,GAAe3tL,IACzBptB,EA3BmB,SAAU6jC,EAAM9tC,EAAM/F,GACzC,IAAIgQ,EAAU,GACd,IAAKjK,EAAOA,EAAKmB,WAAYnB,IAAS8tC,EAAM9tC,EAAOA,EAAKmB,WAItD8I,EAAQhU,KAAK+J,GAEf,OAAOiK,CACT,CAkBYq7M,CAAex3K,EAAMzW,GAC/BptB,EAAU0F,GAAS1F,EAASoE,EAAImjL,MAChC5sK,EAAOA,EAAKppB,OAAOsV,GAAM7G,GAAS,SAAUjK,GAC1C,OAAOglN,GAAehlN,EACxB,MACYoQ,UAAUxU,KAAK,KAAO,IAAMwpN,CAC1C,EA+BIG,GAAY,SAAUz3K,EAAMlpB,GAC9B,IAAIxJ,EACJ,IAAKwJ,EACH,OAAO,KAET,IAAIkN,EAAQlN,EAAKzpB,MAAM,KACnB2pB,EAAQgN,EAAM,GAAG32B,MAAM,KAC3BigB,EAAS0W,EAAMv7B,OAAS,EAAIu7B,EAAM,GAAK,SACvC,IAAIuF,EAAYu1J,GAAO9nK,GAAO,SAAU4E,EAAQp3B,GAC9C,IAAIynB,EAAQ,4BAA4B4zE,KAAKr7F,GAC7C,OAAKynB,GAGY,WAAbA,EAAM,KACRA,EAAM,GAAK,SA5CK,SAAU/Z,EAAMnN,EAAMooB,GAC1C,IAAIs3K,EAAQuyB,GAAc9kN,GAK1B,OAJAuyL,EAAQ5iL,GAAS4iL,GAAO,SAAUvyL,EAAMib,GACtC,OAAQ0pM,GAAS3kN,KAAU2kN,GAASpyB,EAAMt3K,EAAQ,GACpD,KACAs3K,EAAQ5iL,GAAS4iL,EAAOpB,GAAe,CAACt+L,MAC3BooB,EACf,CAuCWuqM,CAAgB97L,EAAQ3P,EAAM,GAAI7B,SAAS6B,EAAM,GAAI,MALnD,IAMX,GAAG+zB,GACH,OAAKzW,EAGAstL,GAASttL,GA3CO,SAAUA,EAAWjc,GAE1C,IADA,IAAwCqqM,EAApCzlN,EAAOq3B,EAAWquL,EAAe,EAC9Bf,GAAS3kN,IAAO,CAErB,GADAylN,EAAUzlN,EAAKzC,KAAKhH,OAChB6kB,GAAUsqM,GAAgBtqM,GAAUsqM,EAAeD,EAAS,CAC9DpuL,EAAYr3B,EACZob,GAAkBsqM,EAClB,KACF,CACA,IAAKf,GAAS3kN,EAAKsiB,aAAc,CAC/B+U,EAAYr3B,EACZob,EAASqqM,EACT,KACF,CACAC,GAAgBD,EAChBzlN,EAAOA,EAAKsiB,WACd,CAIA,OAHIqiM,GAASttL,IAAcjc,EAASic,EAAU95B,KAAKhH,SACjD6kB,EAASic,EAAU95B,KAAKhH,QAEnBktN,GAAcpsL,EAAWjc,EAClC,CA8BSuqM,CAAiBtuL,EAAWnf,SAASkD,EAAQ,MANhDA,EADa,UAAXA,EACOo2L,GAAUn6K,GAAa,EAEvBm6K,GAAUn6K,GAEdosL,GAAcpsL,EAAUl2B,WAAYia,IARpC,IAWX,EAEIwqM,GAA2B1zB,GAS3B2zB,GAAW,SAAU3pN,EAAKR,EAAMq7M,EAAY/8M,EAAK8X,GACnD,IAGIgB,EAHAukB,EAAYr9B,EAAI8X,EAAQ,iBAAmB,gBAC3CsJ,EAASphB,EAAI8X,EAAQ,cAAgB,aACrCiqC,EAAQ,GACIgC,EAAQ,EACpBjQ,EAAO5xC,EAAIo+E,UAWf,IAVIs3G,GAASv6J,GACX0kB,EAAM9lD,KAAK8gN,EAfe,SAAUr7M,EAAM27B,EAAWjc,GACvD,IAAIpb,EAAM8lN,EAEV,IADAA,EAAgBpqN,EAAK27B,EAAU95B,KAAKyR,MAAM,EAAGoM,IAAS7kB,OACjDyJ,EAAOq3B,EAAU84J,gBAAiBnwL,GAAQ4xL,GAAS5xL,GAAOA,EAAOA,EAAKmwL,gBACzE21B,GAAiBpqN,EAAKsE,EAAKzC,MAAMhH,OAEnC,OAAOuvN,CACT,CAQ4BC,CAAwBrqN,EAAM27B,EAAWjc,GAAUA,IAGvEA,IADJtI,EAAaukB,EAAUvkB,YACEvc,QAAUuc,EAAWvc,SAC5CwnD,EAAQ,EACR3iC,EAAS2I,KAAKnF,IAAI,EAAG9L,EAAWvc,OAAS,IAE3CwlD,EAAM9lD,KAAKiG,EAAIs1M,UAAU1+L,EAAWsI,GAAS27L,GAAch5J,IAEtD1mB,GAAaA,IAAcyW,EAAMzW,EAAYA,EAAUl2B,WAC5D46C,EAAM9lD,KAAKiG,EAAIs1M,UAAUn6K,EAAW0/K,IAEtC,OAAOh7J,CACT,EAYI6iB,GAAY,SAAU1iE,EAAKrJ,EAAMoY,GACnC,IAAI6kB,EAAQ,EAUZ,OATA79B,GAAM8C,KAAKmH,EAAIC,OAAOtJ,IAAO,SAAUmN,GACrC,GAA4C,QAAxCA,EAAKnF,aAAa,kBAGtB,OAAImF,IAASiL,QAGb6kB,GACF,IACOA,CACT,EACIk2L,GAAiB,SAAUhsN,EAAK8X,GAClC,IAAIulB,EAAWjc,EAAQtI,EACnBqlB,EAASrmB,EAAQ,QAAU,MAC/BulB,EAAYr9B,EAAIm+B,EAAS,aACzB/c,EAASphB,EAAIm+B,EAAS,UAClB+4J,GAAY75J,IAAqC,OAAvBA,EAAU19B,WAEtC09B,GADAvkB,EAAaukB,EAAUvkB,YACAiR,KAAK6kB,IAAI92B,EAAQsJ,EAASA,EAAS,EAAGtI,EAAWvc,OAAS,OAE/E6kB,EAAStJ,EAAQ,EAAIulB,EAAUvkB,WAAWvc,OAC1CyD,EAAI,OAAS8X,EAAQ,QAAU,QAAQulB,EAAWjc,GAGxD,EACI6qM,GAA8B,SAAUjsN,GAG1C,OAFAgsN,GAAehsN,GAAK,GACpBgsN,GAAehsN,GAAK,GACbA,CACT,EACI68L,GAAc,SAAU72L,EAAMob,GAChC,IAAIiH,EACJ,GAAI6uK,GAAYlxL,KACdA,EAAOuhN,GAAUvhN,EAAMob,GACnBwqM,GAAyB5lN,IAC3B,OAAOA,EAGX,GAAIo4L,GAAmBp4L,GAAO,CAK5B,GAJI4xL,GAAS5xL,IAASk4L,GAAwBl4L,KAC5CA,EAAOA,EAAKmB,YAEdkhB,EAAUriB,EAAKmwL,gBACXy1B,GAAyBvjM,GAC3B,OAAOA,EAGT,GADAA,EAAUriB,EAAKsiB,YACXsjM,GAAyBvjM,GAC3B,OAAOA,CAEX,CACF,EAII6jM,GAAoB,SAAUxqN,EAAMq7M,EAAYh7M,GAClD,IAAIkP,EAAUlP,EAAUC,UACpBnJ,EAAOoY,EAAUA,EAAQtR,SAAW,KACpCK,EAAM+B,EAAUmB,SACpB,GAAI0oN,GAAyB36M,IAAqB,QAATpY,EACvC,MAAO,CACLA,KAAMA,EACNooB,MAAO2jD,GAAU7iE,EAAUG,IAAKrJ,EAAMoY,IAG1C,IAAIoX,EAboC,SAAUroB,GAClD,OAAO68L,GAAY78L,EAAIsG,eAAgBtG,EAAI2lD,cAAgBk3I,GAAY78L,EAAIyG,aAAczG,EAAI4lD,UAC/F,CAWgBumK,CAAoCnsN,GAClD,OAAIqoB,EAEK,CACLxvB,KAFFA,EAAOwvB,EAAQqvK,QAGbz2K,MAAO2jD,GAAU7iE,EAAUG,IAAKrJ,EAAMwvB,IAnF1B,SAAU3mB,EAAMK,EAAWg7M,EAAY/8M,GACvD,IAAIkC,EAAMH,EAAUG,IAAKgE,EAAW,CAAC,EAQrC,OAPAA,EAAS4R,MAAQ+zM,GAAS3pN,EAAKR,EAAMq7M,EAAY/8M,GAAK,GACjD+B,EAAU2+I,gBACbx6I,EAAS+7G,IAAM4pG,GAAS3pN,EAAKR,EAAMq7M,EAAY/8M,GAAK,IAElDi/L,GAA6Bj/L,KAC/BkG,EAASkmN,aAAc,GAElBlmN,CACT,CA4ESmmN,CAAY3qN,EAAMK,EAAWg7M,EAAY/8M,EAClD,EAWIssN,GAAqB,SAAUpqN,EAAKpK,EAAIy0N,GAC1C,IAAI34M,EAAO,CACT,gBAAiB,WACjB9b,GAAIA,EACJ,MAAS,mCAEX,OAAOy0N,EAASrqN,EAAIqF,OAAO,OAAQqM,EAAM,YAAc1R,EAAIqF,OAAO,OAAQqM,EAC5E,EACI44M,GAAwB,SAAUzqN,EAAWwqN,GAC/C,IAAIrqN,EAAMH,EAAUG,IAChBlC,EAAM+B,EAAUmB,SAChBpL,EAAKoK,EAAIs+M,WACTtgN,EAAY6B,EAAU2+I,cACtBzvI,EAAUlP,EAAUC,UACpBnJ,EAAOoY,EAAQtR,SACnB,GAAa,QAAT9G,EACF,MAAO,CACLA,KAAMA,EACNooB,MAAO2jD,GAAU1iE,EAAKrJ,EAAMoY,IAGhC,IAAIw7M,EAAOR,GAA4BjsN,EAAIoG,cAC3C,IAAKlG,EAAW,CACdusN,EAAK56M,UAAS,GACd,IAAI66M,EAAkBJ,GAAmBpqN,EAAKpK,EAAK,OAAQy0N,GAC3D9B,GAAgBvoN,EAAKuqN,EAAMC,EAC7B,EACA1sN,EAAMisN,GAA4BjsN,IAC9B6R,UAAS,GACb,IAAI86M,EAAoBL,GAAmBpqN,EAAKpK,EAAK,SAAUy0N,GAM/D,OALA9B,GAAgBvoN,EAAKlC,EAAK2sN,GAC1B5qN,EAAU8E,eAAe,CACvB/O,GAAIA,EACJ80N,MAAM,IAED,CAAE90N,GAAIA,EACf,EAYI+0N,GAAkB74M,EAAMk4M,GAAmBn6B,GAAU,GAErD+6B,GAAQ7P,GAASnzH,IAEjBijI,GAAiB,SAAU5vN,EAAQtE,EAAM2qM,GAC3C,IAAIlrM,EAAQ6E,EAAOE,SAASxE,EAAM2qM,GAClC,IAA4B,IAAxBlrM,EAAMyD,QAAQ,KAAa,CAC7B,IAAIixN,EAAU7vN,EAAOE,SAASxE,EAAM,GAAI,QACxC,OAAOowB,GAAM+jM,EAAS7vN,EAAOrF,IAAIqC,MAAMqpM,EACzC,CACE,OAAOlrM,CAEX,EAgBI20N,GAA2B,SAAU9vN,GACvC,OAAOA,EAAOE,SAAS,0BAA2B,GACpD,EAII6vN,GAAqB,SAAU/vN,GACjC,GAAIA,EAAOE,SAAS,oBAAoB,GACtC,MAAO,IAET,IAAIk/H,EAAQp/H,EAAOE,SAAS,oBAAqB,KACjD,OAAc,IAAVk/H,EACK,IACY,IAAVA,EACF,IAEAA,CAEX,EACI4wF,GAA0B,SAAUhwN,GACtC,OAAOA,EAAOE,SAAS,0BAA2B,CAAC,EACrD,EAsBI+vN,GAA4B,SAAUjwN,GACxC,OAAOA,EAAOE,SAAS,qBAAqB,EAAM,UACpD,EACIgwN,GAAsB,SAAUlwN,GAClC,OAAOA,EAAOE,SAAS,yBAAyB,EAAO,UACzD,EAIIiwN,GAAkB,SAAUnwN,GAC9B,OAAOA,EAAOE,SAAS,QAAS,GAAI,SACtC,EAIIkwN,GAAoB,SAAUpwN,GAChC,OAAOA,EAAOE,SAAS,oBAAqB,GAAI,SAClD,EACImwN,GAAyB,SAAUrwN,GACrC,OAAOA,EAAOE,SAAS,0BAA2B,GAAI,SACxD,EACIowN,GAA6B,SAAUtwN,GACzC,OAAOA,EAAOE,SAAS,6BAA6B,EAAO,UAC7D,EACIqwN,GAAyB,SAAUvwN,GACrC,OAAOA,EAAOE,SAAS,wBAAyB,KAAM,WACxD,EACIswN,GAA0B,SAAUxwN,GACtC,OAAOA,EAAOE,SAAS,oBAAoB,EAAO,UACpD,EACIuwN,GAAoB,SAAUzwN,GAChC,OAAOA,EAAOE,SAAS,kBAAmB,GAAI,SAChD,EACIwwN,GAAkB,SAAU1wN,GAC9B,OAAOA,EAAOE,SAAS,WAAY,KAAM,SAC3C,EAIIywN,GAAwB,SAAU3wN,GACpC,OAAOA,EAAOE,SAAS,qBAAqB,EAC9C,EAgBI0wN,GAAa,SAAU5wN,GACzB,IAAI6wN,EAAU7wN,EAAOE,SAAS,WAAY,IAC1C,OAAOw0L,EAAUm8B,GAAWA,EAAU/7B,EAAM+7B,EAAQ7sN,MAAM,KAAM+xL,GAClE,EAOI+6B,GAAoB,SAAU9wN,GAChC,IAAIkiB,EAAWliB,EAAOE,SAAS,mBAC/B,OAAiB,IAAbgiB,IAAsBw0K,GAAIG,MAGrBpC,EAAWvyK,GAAYA,EAAW,0CAE7C,EAOI6uM,GAAe,SAAU/wN,GAC3B,OAAOA,EAAOE,SAAS,aACzB,EAII8wN,GAAW,SAAUhxN,GACvB,OAAOA,EAAOE,SAAS,QACzB,EACI+wN,GAAiB,SAAUjxN,GAC7B,OAAOA,EAAOE,SAAS,WACzB,EACIgxN,GAA4B,SAAUlxN,GACxC,OAAgD,IAAzCA,EAAOE,SAAS,oBACzB,EAmDIixN,GAAoB,SAAUnxN,GAChC,OAAOA,EAAOE,SAAS,mBACzB,EACIkxN,GAAa,SAAUpxN,GACzB,OAAOA,EAAOE,SAAS,UAAW,GAAI,SACxC,EAoBIgc,GAAc69K,GACds3B,GAAW52B,GACX62B,GAAe,SAAUzoN,GAC3B,IAAImB,EAAanB,EAAKmB,WAClBA,GACFA,EAAW6H,YAAYhJ,EAE3B,EACI0oN,GAAY,SAAUvwN,GACxB,IAAIwwN,EAAc5wB,GAAO5/L,GACzB,MAAO,CACL23B,MAAO33B,EAAK5B,OAASoyN,EAAYpyN,OACjC4B,KAAMwwN,EAEV,EACIC,GAAkB,SAAU/vB,GAE9B,IADA,IAAIrpG,GACwD,KAApDA,EAAMqpG,EAAet7L,KAAKm9E,YAAYm9G,MAC5CgB,EAAegwB,WAAWr5H,EAAK,EAEnC,EACIs5H,GAAkB,SAAUjwB,EAAgBjpJ,GAE9C,OADArR,GAASs6J,GACFjpJ,CACT,EA0BIm5K,GAAsB,SAAU1xL,EAAWuY,GAC7C,OAAO6zK,GAAcY,eAAez0K,GAPP,SAAUipJ,EAAgBjpJ,GACvD,OAAO44K,GAAS3vB,IAAmBjpJ,EAAIvY,cAAgBwhK,EApB3B,SAAUA,EAAgBjpJ,GACtD,IAAIkO,EAAS4qK,GAAU7vB,EAAet7L,KAAKsU,OAAO,EAAG+9B,EAAIx0B,WACrD2iC,EAAQ2qK,GAAU7vB,EAAet7L,KAAKsU,OAAO+9B,EAAIx0B,WAErD,OADW0iC,EAAO3lD,KAAO4lD,EAAM5lD,MACtB5B,OAAS,GAChBqyN,GAAgB/vB,GACT4qB,GAAc5qB,EAAgBjpJ,EAAIx0B,SAAW0iC,EAAOhuB,QAEpD8f,CAEX,CAU0Eo5K,CAAwBnwB,EAAgBjpJ,GAAOk5K,GAAgBjwB,EAAgBjpJ,EACzJ,CAK6Cq5K,CAAyB5xL,EAAWuY,GAJ/C,SAAUipJ,EAAgBjpJ,GAC1D,OAAOA,EAAIvY,cAAgBwhK,EAAe13L,WAZX,SAAU03L,EAAgBjpJ,GACzD,IAAIzuC,EAAayuC,EAAIvY,YACjB6xL,EArwRU,SAAU/yN,EAAI3D,GAC5B,IAAI4D,EAAIyM,EAAW1M,EAAI3D,GACvB,OAAc,IAAP4D,EAAWR,EAAShC,OAASgC,EAASN,KAAKc,EACpD,CAkwRoB+yN,CAAUtzN,GAAKsL,EAAW2R,YAAa+lL,GAAgB/jM,KAAI,SAAUmmB,GACrF,OAAOA,EAAQ20B,EAAIx0B,SAAWqoM,GAActiN,EAAYyuC,EAAIx0B,SAAW,GAAKw0B,CAC9E,IAAGz7C,MAAMy7C,GAET,OADArR,GAASs6J,GACFqwB,CACT,CAKyDE,CAA2BvwB,EAAgBjpJ,GAAOk5K,GAAgBjwB,EAAgBjpJ,EAC3I,CAEwFy5K,CAA4BhyL,EAAWuY,EAC/H,EACIrR,GAAW,SAAU+qL,GACnBj2M,GAAYi2M,IAAuBlxB,GAAmBkxB,KACpDjxB,GAAWixB,GACbA,EAAmBzsM,gBAAgB,kBAEnC4rM,GAAaa,IAGbd,GAASc,KACXV,GAAgBU,GACuB,IAAnCA,EAAmB/rN,KAAKhH,QAC1BkyN,GAAaa,GAGnB,EAEIC,GAAYt1M,KAAS4D,QACrB2xM,GAA2Bt3B,GAC3Bu3B,GAAYr3B,GACZs3B,GAAgBv3B,GAEhBw3B,GAAwB,SAAU77K,EAAM7iC,EAAS6yC,GACnD,IACI8rK,EACAC,EAFAjH,EAAa/2M,GAASZ,EAAQ8T,wBAAyB++B,GAG3D,GAAqB,SAAjBhQ,EAAK4jJ,QAAoB,CAC3B,IAAIokB,EAAShoK,EAAKtzB,cAAcG,gBAChCivM,EAAU97K,EAAK9tB,YAAc81L,EAAO91L,WACpC6pM,EAAU/7K,EAAKhuB,WAAag2L,EAAOh2L,SACrC,KAAO,CACL,IAAIgqM,EAAWh8K,EAAK/uB,wBACpB6qM,EAAU97K,EAAK9tB,WAAa8pM,EAAS/yN,KACrC8yN,EAAU/7K,EAAKhuB,UAAYgqM,EAASzqM,GACtC,CACAujM,EAAW7rN,MAAQ6yN,EACnBhH,EAAWt/L,OAASsmM,EACpBhH,EAAWvjM,KAAOwqM,EAClBjH,EAAWr/L,QAAUsmM,EACrBjH,EAAWv/L,MAAQ,EACnB,IAAIk+D,EAASt2E,EAAQgT,YAAchT,EAAQ2Y,YAQ3C,OAPI29D,EAAS,IACPzjC,IACFyjC,IAAW,GAEbqhI,EAAW7rN,MAAQwqF,EACnBqhI,EAAWt/L,OAASi+D,GAEfqhI,CACT,EAyBImH,GAAY,SAAU5yN,EAAQ22C,EAAMqrC,EAAStrC,GAC/C,IACIm8K,EACAV,EAFAW,EAAkB33N,KAGlB43N,EAAYhD,GAAmB/vN,GAC/BgzN,EAAaD,EAAU3zN,OAAS,EAAI2zN,EAAY,IAsChDn+M,EAAO,YAnEmB,SAAU+hC,GAExC,IADA,IAAIs8K,EAAuB1pK,GAAYluC,GAAqBs7B,GA9BhC,qDA+BnBz3C,EAAI,EAAGA,EAAI+zN,EAAqB7zN,OAAQF,IAAK,CACpD,IAYMkH,EAZFyC,EAAOoqN,EAAqB/zN,GAAG6F,IAC/BmmB,EAAUriB,EAAKmwL,gBACfwI,GAAyBt2K,KAEP,KADhB9kB,EAAO8kB,EAAQ9kB,MACVhH,OACP8rB,EAAQlhB,WAAW6H,YAAYqZ,GAE/BA,EAAQwmM,WAAWtrN,EAAKhH,OAAS,EAAG,IAGxC8rB,EAAUriB,EAAKsiB,YACXo2K,GAA2Br2K,KAET,KADhB9kB,EAAO8kB,EAAQ9kB,MACVhH,OACP8rB,EAAQlhB,WAAW6H,YAAYqZ,GAE/BA,EAAQwmM,WAAW,EAAG,GAG5B,CACF,CA6CIwB,CAA0Bv8K,GACtBw7K,IACF/qL,GAAS+qL,GACTA,EAAqB,MAEvBW,EAAgB3gN,IAAG,SAAUghN,GAC3BrW,GAASqW,EAAWvgI,OAAO1oF,SAC3B4oN,EAAgBz2K,OAClB,IACIw2K,IACF91B,GAAMI,cAAc01B,GACpBA,OAAiBr1N,EAErB,EAsBA,MAAO,CACL2uF,KA1ES,SAAUxlC,EAAQ7yC,GAC3B,IAAIjR,EAEJ,GADA+R,IACI29M,GAAcz+M,GAChB,OAAO,KAET,IAAIkuE,EAAQluE,GA2BV,OATAq+M,EAzoMe,SAAUtpN,EAAM89C,GACnC,IACIysK,EADMvqN,EAAKwa,cACIvH,eAAe4kL,IAC9B12L,EAAanB,EAAKmB,WACtB,GAAK28C,EAgBE,CAEL,GADIz7B,EAAUriB,EAAKmwL,gBACf8H,GAAS51K,GAAU,CACrB,GAAI+1K,GAAmB/1K,GACrB,OAAOA,EAET,GAAIs2K,GAAyBt2K,GAC3B,OAAOA,EAAQmoM,UAAUnoM,EAAQ9kB,KAAKhH,OAAS,EAEnD,CACA4K,EAAWC,aAAampN,EAAUvqN,EACpC,KA3Ba,CACX,IAAIqiB,EAAUriB,EAAKsiB,YACnB,GAAI21K,GAAS51K,GAAU,CACrB,GAAI+1K,GAAmB/1K,GACrB,OAAOA,EAET,GAAIq2K,GAA2Br2K,GAE7B,OADAA,EAAQmoM,UAAU,GACXnoM,CAEX,CACIriB,EAAKsiB,YACPnhB,EAAWC,aAAampN,EAAUvqN,EAAKsiB,aAEvCnhB,EAAWK,YAAY+oN,EAE3B,CAYA,OAAOA,CACT,CAwmM2BE,CAAex/M,EAAS6yC,GAC7C9jD,EAAMiR,EAAQuP,cAAcykC,cACxByrK,GAAwBpB,EAAmBhnM,cAC7CtoB,EAAIklD,SAASoqK,EAAoB,GACjCtvN,EAAIqlD,OAAOiqK,EAAoB,KAE/BtvN,EAAIklD,SAASoqK,EAAoB,GACjCtvN,EAAIqlD,OAAOiqK,EAAoB,IAE1BtvN,EA1BPsvN,EAnkMc,SAAUqB,EAAW3qN,EAAM89C,GAC7C,IALI8sK,EAMAC,EADM7qN,EAAKwa,cACK9R,cAAciiN,GAClCE,EAAUxuM,aAAa,iBAAkByhC,EAAS,SAAW,SAC7D+sK,EAAUxuM,aAAa,iBAAkB,OACzCwuM,EAAUrpN,cATNopN,EAAKniN,SAASC,cAAc,OAC7B2T,aAAa,iBAAkB,KAC3BuuM,IAQP,IAAIzpN,EAAanB,EAAKmB,WAUtB,OATK28C,EAOH38C,EAAWC,aAAaypN,EAAW7qN,GAN/BA,EAAKsiB,YACPnhB,EAAWC,aAAaypN,EAAW7qN,EAAKsiB,aAExCnhB,EAAWK,YAAYqpN,GAKpBA,CACT,CAkjM2BC,CAAcX,EAAYl/M,EAAS6yC,GACxD,IAAI8kK,EAAa+G,GAAsB77K,EAAM7iC,EAAS6yC,GACtDm2J,GAASqV,GAAoBjsM,IAAI,MAAOulM,EAAWvjM,KACnD,IAAI0qE,EAAQkqH,GAAS,6DAA6D52L,IAAIzkB,GAAS,CAAC,EAAGgqN,IAAarN,SAASznK,GAAM,GAyBjI,OAxBEm8K,EAAgBxrM,IAAI,CAClBsrE,MAAOA,EACP9+E,QAASA,EACT6yC,OAAQA,IAENA,GACFm2J,GAASlqH,GAAO+rE,SAAS,2BAoC7Bk0D,EAAiB91B,GAAMH,aAAY,WAC7BlmJ,IACFomK,GAAS,uBAAwBnmK,GAAM86B,YAAY,2BAEnDqrI,GAAS,uBAAwBnmK,GAAMgoH,SAAS,0BAEpD,GAAG,MAvCD97J,EAAMiR,EAAQuP,cAAcykC,eACxBC,SAASoqK,EAAoB,GACjCtvN,EAAIqlD,OAAOiqK,EAAoB,GAa1BtvN,CACT,EAuCE+R,KAAMA,EACNg/M,OANW,WACX,MAAO,sOACT,EAKEx7K,WAhBe,WACf06K,EAAgB3gN,IAAG,SAAUghN,GAC3B,IAAI1H,EAAa+G,GAAsB77K,EAAMw8K,EAAWr/M,QAASq/M,EAAWxsK,QAC5Em2J,GAASqW,EAAWvgI,OAAO1sE,IAAIzkB,GAAS,CAAC,EAAGgqN,GAC9C,GACF,EAYEjvK,QAXY,WACZ,OAAOugJ,GAAMI,cAAc01B,EAC7B,EAWF,EACIgB,GAA0B,WAC5B,OAAOzB,GAAUtzM,QAAUszM,GAAUxzM,UAAYwzM,GAAUpzM,WAC7D,EACIu0M,GAA0B,SAAU1qN,GACtC,OAAOwpN,GAAyBxpN,IAASypN,GAAUzpN,EACrD,EACIirN,GAAoB,SAAUjrN,GAChC,OAAO0qN,GAAwB1qN,IAASyxL,GAAUzxL,IAASgrN,IAC7D,EAEIE,GAA2Bh5B,GAC3Bi5B,GAAU/4B,GACVg5B,GAAc/5B,GAAiB,UAAW,kDAC1Cg6B,GAAmBjzB,GACnBkzB,GAAwBpzB,GACxB/8G,GAAc+1G,GACdq6B,GAAqB7xB,GACrB8xB,GAAa,SAAUrkL,GACzB,OAAOA,EAAY,CACrB,EACIskL,GAAc,SAAUtkL,GAC1B,OAAOA,EAAY,CACrB,EACIukL,GAAsB,SAAUj8B,EAAM/3J,GAExC,IADA,IAAI13B,EACGA,EAAOyvL,EAAK/3J,IACjB,IAAK4zL,GAAsBtrN,GACzB,OAAOA,EAGX,OAAO,IACT,EACI2rN,GAAa,SAAU3rN,EAAMmnC,EAAWykL,EAAa1yI,EAAUxhD,GACjE,IAAIr9B,EAAS,IAAIs8L,GAAc32L,EAAMk5E,GACjC2yI,EAAwBX,GAAyBlrN,IAASsrN,GAAsBtrN,GACpF,GAAIyrN,GAAYtkL,GAAY,CAC1B,GAAI0kL,GAEED,EADJ5rN,EAAO0rN,GAAoBrxN,EAAOg+I,KAAKrjJ,KAAKqF,IAAS,IAEnD,OAAO2F,EAGX,KAAOA,EAAO0rN,GAAoBrxN,EAAOg+I,KAAKrjJ,KAAKqF,GAASq9B,IAC1D,GAAIk0L,EAAY5rN,GACd,OAAOA,CAGb,CACA,GAAIwrN,GAAWrkL,GAAY,CACzB,GAAI0kL,GAEED,EADJ5rN,EAAO0rN,GAAoBrxN,EAAOI,KAAKzF,KAAKqF,IAAS,IAEnD,OAAO2F,EAGX,KAAOA,EAAO0rN,GAAoBrxN,EAAOI,KAAKzF,KAAKqF,GAASq9B,IAC1D,GAAIk0L,EAAY5rN,GACd,OAAOA,CAGb,CACA,OAAO,IACT,EACI8rN,GAAmB,SAAU9rN,EAAMk5E,GACrC,KAAOl5E,GAAQA,IAASk5E,GAAU,CAChC,GAAIkyI,GAAYprN,GACd,OAAOA,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,IACT,EACI4qN,GAAgB,SAAUC,EAAgBC,EAAgB/yI,GAC5D,OAAO4yI,GAAiBE,EAAe30L,YAAa6hD,KAAc4yI,GAAiBG,EAAe50L,YAAa6hD,EACjH,EACIgzI,GAA+B,SAAUC,EAAgBzI,GAC3D,IAAKA,EACH,OAAO,KAET,IAAIrsL,EAAYqsL,EAAcrsL,YAC1Bjc,EAASsoM,EAActoM,SAC3B,OAAK+/D,GAAY9jD,GAGVA,EAAUvkB,WAAWsI,EAAS+wM,GAF5B,IAGX,EACIC,GAAc,SAAUtuK,EAAQ99C,GAClC,IAAI8+C,EAAQ9+C,EAAKwa,cAAcykC,cAQ/B,OAPInB,GACFgB,EAAMp+C,eAAeV,GACrB8+C,EAAMM,aAAap/C,KAEnB8+C,EAAMK,cAAcn/C,GACpB8+C,EAAMn+C,YAAYX,IAEb8+C,CACT,EACIutK,GAAqB,SAAUv+K,EAAMw+K,EAAOC,GAC9C,OAAOT,GAAiBQ,EAAOx+K,KAAUg+K,GAAiBS,EAAOz+K,EACnE,EACI0+K,GAAO,SAAUz1N,EAAM+2C,EAAM9tC,GAE/B,IADA,IAAIg3L,EAAcjgM,EAAO,kBAAoB,cACtCiJ,GAAQA,IAAS8tC,GAAM,CAC5B,IAAIzrB,EAAUriB,EAAKg3L,GAInB,GAHIq0B,GAAiBhpM,KACnBA,EAAUA,EAAQ20K,IAEhBk0B,GAAyB7oM,IAAY8oM,GAAQ9oM,GAAU,CACzD,GAAIgqM,GAAmBv+K,EAAMzrB,EAASriB,GACpC,OAAOqiB,EAET,KACF,CACA,GAAIkpM,GAAmBlpM,GACrB,MAEFriB,EAAOA,EAAKmB,UACd,CACA,OAAO,IACT,EACI+gB,GAAWlU,EAAMo+M,IAAa,GAC9BhqM,GAAUpU,EAAMo+M,IAAa,GAC7BK,GAAiB,SAAUtlL,EAAW2G,EAAMgR,GAC9C,IAAI9+C,EACA0sN,EAAW1+M,EAAMw+M,IAAM,EAAM1+K,GAC7B6+K,EAAY3+M,EAAMw+M,IAAM,EAAO1+K,GAC/BzW,EAAYynB,EAAMx+C,eAClB8a,EAAS0jC,EAAMa,YACnB,GAAIu4I,GAAwB7gK,GAAY,CACjC8jD,GAAY9jD,KACfA,EAAYA,EAAUl2B,YAExB,IAAIyrN,EAAav1L,EAAUx8B,aAAa,kBACxC,GAAmB,WAAf+xN,IACF5sN,EAAOq3B,EAAU/U,YACb2oM,GAAkBjrN,IACpB,OAAOkiB,GAASliB,GAGpB,GAAmB,UAAf4sN,IACF5sN,EAAOq3B,EAAU84J,gBACb86B,GAAkBjrN,IACpB,OAAOoiB,GAAQpiB,EAGrB,CACA,IAAK8+C,EAAM5kD,UACT,OAAO4kD,EAET,GAAI8yI,GAASv6J,GAAY,CACvB,GAAIg0L,GAAiBh0L,GAAY,CAC/B,GAAkB,IAAd8P,EAAiB,CAEnB,GADAnnC,EAAO2sN,EAAUt1L,GAEf,OAAOnV,GAASliB,GAGlB,GADAA,EAAO0sN,EAASr1L,GAEd,OAAOjV,GAAQpiB,EAEnB,CACA,IAAmB,IAAfmnC,EAAkB,CAEpB,GADAnnC,EAAO0sN,EAASr1L,GAEd,OAAOjV,GAAQpiB,GAGjB,GADAA,EAAO2sN,EAAUt1L,GAEf,OAAOnV,GAASliB,EAEpB,CACA,OAAO8+C,CACT,CACA,GAAI65I,GAAyBthK,IAAcjc,GAAUic,EAAU95B,KAAKhH,OAAS,EAC3E,OAAkB,IAAd4wC,IACFnnC,EAAO2sN,EAAUt1L,IAERnV,GAASliB,GAGb8+C,EAET,GAAI45I,GAA2BrhK,IAAcjc,GAAU,EACrD,OAAmB,IAAf+rB,IACFnnC,EAAO0sN,EAASr1L,IAEPjV,GAAQpiB,GAGZ8+C,EAET,GAAI1jC,IAAWic,EAAU95B,KAAKhH,OAE5B,OADAyJ,EAAO2sN,EAAUt1L,IAERnV,GAASliB,GAEX8+C,EAET,GAAe,IAAX1jC,EAEF,OADApb,EAAO0sN,EAASr1L,IAEPjV,GAAQpiB,GAEV8+C,CAEX,CACA,OAAOA,CACT,EACI+tK,GAAoB,SAAUvb,EAASoS,GACzC,OAAO9tN,EAASC,KAAKq2N,GAA6B5a,EAAU,GAAK,EAAGoS,IAAgBvuN,OAAO+1N,GAC7F,EACI4B,GAA6B,SAAU3lL,EAAW2G,EAAMgR,GAC1D,IAAIiuK,EAAkBN,GAAetlL,EAAW2G,EAAMgR,GACtD,OAAmB,IAAf3X,EACKs8K,GAAcQ,eAAe8I,GAE/BtJ,GAAcS,aAAa6I,EACpC,EACIC,GAAyB,SAAUp9K,GACrC,OAAOh6C,EAASC,KAAK+5C,EAAI5zC,WAAWlH,IAAI0d,GAC1C,EAIIy6M,GAAyB,SAAUC,EAAQxJ,GAC7C,KAAOA,EAAgBwJ,EAAOxJ,IAC5B,GAAIA,EAAcrsK,YAChB,OAAOqsK,EAGX,OAAOA,CACT,EACIyJ,GAAwB,SAAUt3N,EAAM+Y,GAC1C,IAAIw+M,EAAcrB,GAAcl2N,EAAM+Y,GACtC,QAAKw+M,IAAer7B,GAAOl8L,EAAKmG,aAGzBoxN,CACT,GAGC,SAAU7I,GACTA,EAAWA,EAAsB,WAAK,GAAK,YAC3CA,EAAWA,EAAqB,SAAI,GAAK,UAC3C,CAHA,CAGEA,KAAeA,GAAa,CAAC,IAC/B,IAujC0B5tN,GAOpBypD,GA9jCFitK,GAA2Bn7B,GAC3B5+K,GAAWs+K,GACXnmD,GAAYylD,GACZo8B,GAASv7B,GACTw7B,GAAmB7zB,GACnB8zB,GAjyMa,SAAUxtN,GACzB,OAAOu5L,GAAev5L,IATW,SAAUA,GAC3C,QAAK25L,GAA4B35L,KAKnB,IAFP8P,EAAMja,GAAKmK,EAAKg5L,qBAAqB,OAAO,SAAUtvK,EAAQhwB,GACnE,OAAOgwB,GAAUwvK,GAAwBx/L,EAC3C,IAAG,EACL,CAEiC+zN,CAA6BztN,EAC9D,EAgyMI0tN,GAA2B7zB,GAS3B8zB,GAAc,SAAUt2L,EAAWjc,GACrC,OAAIic,EAAUxkB,iBAAmBuI,EAASic,EAAUvkB,WAAWvc,OACtD8gC,EAAUvkB,WAAWsI,GAEvB,IACT,EACIwyM,GAA4B,SAAUzmL,EAAWnnC,GACnD,GAAIwrN,GAAWrkL,GAAY,CACzB,GAAIomL,GAAiBvtN,EAAKmwL,mBAAqB78K,GAAStT,EAAKmwL,iBAC3D,OAAOszB,GAAc3lK,OAAO99C,GAE9B,GAAIsT,GAAStT,GACX,OAAOyjN,GAAczjN,EAAM,EAE/B,CACA,GAAIyrN,GAAYtkL,GAAY,CAC1B,GAAIomL,GAAiBvtN,EAAKsiB,eAAiBhP,GAAStT,EAAKsiB,aACvD,OAAOmhM,GAAc1lK,MAAM/9C,GAE7B,GAAIsT,GAAStT,GACX,OAAOyjN,GAAczjN,EAAMA,EAAKzC,KAAKhH,OAEzC,CACA,OAAIk1N,GAAYtkL,GACVmmL,GAAOttN,GACFyjN,GAAc3lK,OAAO99C,GAEvByjN,GAAc1lK,MAAM/9C,GAEtByjN,GAAc3lK,OAAO99C,EAC9B,EAaI6tN,GAAsB,SAAU1mL,EAAW2mL,EAAUhgL,GACvD,IAAI9tC,EACA+tN,EACAC,EACAtK,EACJ,IAAKj4E,GAAU39F,KAAUggL,EACvB,OAAO,KAET,GAAIA,EAAS9J,QAAQP,GAAc1lK,MAAMjQ,KAAUA,EAAKwiJ,WAEtD,GADAozB,EAAgBD,GAAc1lK,MAAMjQ,EAAKwiJ,WACrCm7B,GAAYtkL,IAAcomL,GAAiBz/K,EAAKwiJ,YAAc7kD,GAAU39F,EAAKwiJ,WAC/E,OAAOg9B,GAAOx/K,EAAKwiJ,WAAamzB,GAAc3lK,OAAOhQ,EAAKwiJ,WAAaozB,OAGzEA,EAAgBoK,EAElB,IAAIz2L,EAAYqsL,EAAcrsL,YAC1Bjc,EAASsoM,EAActoM,SAC3B,GAAI9H,GAAS+jB,GAAY,CACvB,GAAIo0L,GAAYtkL,IAAc/rB,EAAS,EACrC,OAAOqoM,GAAcpsL,IAAajc,GAEpC,GAAIowM,GAAWrkL,IAAc/rB,EAASic,EAAU9gC,OAC9C,OAAOktN,GAAcpsL,IAAajc,GAEpCpb,EAAOq3B,CACT,KAAO,CACL,GAAIo0L,GAAYtkL,IAAc/rB,EAAS,IACrC2yM,EAAWJ,GAAYt2L,EAAWjc,EAAS,GACvCmyM,GAAiBQ,IACnB,OAAKP,GAASO,KACZC,EAAYrC,GAAWoC,EAAU5mL,EAAWumL,GAA0BK,IAEhEz6M,GAAS06M,GACJvK,GAAcuK,EAAWA,EAAUzwN,KAAKhH,QAE1CktN,GAAc1lK,MAAMiwK,GAG3B16M,GAASy6M,GACJtK,GAAcsK,EAAUA,EAASxwN,KAAKhH,QAExCktN,GAAc3lK,OAAOiwK,GAGhC,GAAIvC,GAAWrkL,IAAc/rB,EAASic,EAAUvkB,WAAWvc,SACzDw3N,EAAWJ,GAAYt2L,EAAWjc,GAC9BmyM,GAAiBQ,IACnB,OAAIT,GAAOS,GA5DK,SAAUjgL,EAAMigL,GACtC,IAAIzrM,EAAcyrM,EAASzrM,YAC3B,OAAIA,GAAeirM,GAAiBjrM,GAC9BhP,GAASgP,GACJmhM,GAAcnhM,EAAa,GAE3BmhM,GAAc3lK,OAAOx7B,GAGvBurM,GAAoBtJ,GAAW0J,SAAUxK,GAAc1lK,MAAMgwK,GAAWjgL,EAEnF,CAkDiBogL,CAAkBpgL,EAAMigL,IAE5BP,GAASO,KACZC,EAAYrC,GAAWoC,EAAU5mL,EAAWumL,GAA0BK,IAEhEz6M,GAAS06M,GACJvK,GAAcuK,EAAW,GAE3BvK,GAAc3lK,OAAOkwK,GAG5B16M,GAASy6M,GACJtK,GAAcsK,EAAU,GAE1BtK,GAAc1lK,MAAMgwK,GAG/B/tN,EAAO+tN,GAAsBrK,EAAc1nN,SAC7C,CACA,IAAIwvN,GAAWrkL,IAAcu8K,EAAcjrB,WAAagzB,GAAYtkL,IAAcu8K,EAAcnrB,eAC9Fv4L,EAAO2rN,GAAW3rN,EAAMmnC,EAAWxzC,EAAQm6C,GAAM,GAC7C4/K,GAAyB1tN,EAAM8tC,IACjC,OAAO8/K,GAA0BzmL,EAAWnnC,GAGhD+tN,EAAWpC,GAAW3rN,EAAMmnC,EAAWumL,GAA0B5/K,GACjE,IAAIqgL,EAA8Bv0I,GAAOuyG,EA9HxB,SAAUnsL,EAAM8tC,GAEjC,IADA,IAAI7jC,EAAU,GACPjK,GAAQA,IAAS8tC,GACtB7jC,EAAQhU,KAAK+J,GACbA,EAAOA,EAAKmB,WAEd,OAAO8I,CACT,CAuHoDmkN,CAAa/2L,EAAWyW,GAAOu/K,KACjF,OAAIc,GAAiCJ,GAAaI,EAA4Br0M,SAASi0M,GAQnFA,EACKH,GAA0BzmL,EAAW4mL,GAEvC,KATHrK,EADE8H,GAAWrkL,GACGs8K,GAAc1lK,MAAMowK,GAEpB1K,GAAc3lK,OAAOqwK,EAQ3C,EACIE,GAAc,SAAUvgL,GAC1B,MAAO,CACLrzC,KAAM,SAAUipN,GACd,OAAOmK,GAAoBtJ,GAAW0J,SAAUvK,EAAe51K,EACjE,EACAuqG,KAAM,SAAUqrE,GACd,OAAOmK,GAAoBtJ,GAAW+J,UAAW5K,EAAe51K,EAClE,EAEJ,EASIygL,GAAkB,SAAUhpM,GAC9B,OAAIk+L,GAAcY,eAAe9+L,GACF,IAAtBA,EAASnK,SAETs+K,GAAmBn0K,EAASvpB,UAEvC,EACIwyN,GAAe,SAAUjpM,GAC3B,GAAIk+L,GAAcY,eAAe9+L,GAAW,CAC1C,IAAI8R,EAAY9R,EAAS8R,YACzB,OAAO9R,EAASnK,WAAaic,EAAU95B,KAAKhH,MAC9C,CACE,OAAOmjM,GAAmBn0K,EAASvpB,SAAQ,GAE/C,EACIyyN,GAA2B,SAAU54N,EAAM+Y,GAC7C,OAAQ60M,GAAcY,eAAexuN,KAAU4tN,GAAcY,eAAez1M,IAAO/Y,EAAKmG,YAAc4S,EAAG5S,SAAQ,EACnH,EAWI0yN,GAAe,SAAUpd,EAASxjK,EAAM8B,GAC1C,IAAIv1C,EAASg0N,GAAYvgL,GACzB,OAAOl4C,EAASC,KAAKy7M,EAAUj3M,EAAOI,KAAKm1C,GAAOv1C,EAAOg+I,KAAKzoG,GAChE,EACIisB,GAAW,SAAUy1I,EAASxjK,EAAMj4C,GACtC,OAAO64N,GAAapd,EAASxjK,EAAMj4C,GAAMb,MAAK,SAAU4Z,GACtD,OAAIm9M,GAAcl2N,EAAM+Y,EAAIk/B,IAbP,SAAUwjK,EAASz7M,EAAM+Y,GAChD,OAAI0iM,GACMmd,GAAyB54N,EAAM+Y,KALpB2W,EAKmC1vB,KAJhD4tN,GAAcY,eAAe9+L,IAAawsK,GAAOxsK,EAASvpB,cAIDwyN,GAAa34N,IAAS04N,GAAgB3/M,IAE7F6/M,GAAyB7/M,EAAI/Y,IAAS04N,GAAgB14N,IAAS24N,GAAa5/M,GAP3E,IAAU2W,CASvB,CAOyCopM,CAAmBrd,EAASz7M,EAAM+Y,GAC9D8/M,GAAapd,EAASxjK,EAAMl/B,GAE5BhZ,EAASN,KAAKsZ,EAEzB,GACF,EACIggN,GAAiB,SAAUtd,EAASxjK,EAAMj4C,EAAMg5N,GAClD,OAAOhzJ,GAASy1I,EAASxjK,EAAMj4C,GAAMb,MAAK,SAAU46C,GAClD,OAAOi/K,EAAaj/K,GAAOg/K,GAAetd,EAASxjK,EAAM8B,EAAKi/K,GAAgBj5N,EAASN,KAAKs6C,EAC9F,GACF,EACIk/K,GAAa,SAAUxd,EAASrmM,GAClC,IAlD2BjL,EAkDvB48J,EAAY00C,EAAUrmM,EAAQ3Q,WAAa2Q,EAAQqlL,UACvD,OAAIsB,GAASh1B,GACJhnK,EAASN,KAAKmuN,GAAc7mD,EAAW00C,EAAU,EAAI10C,EAAUr/J,KAAKhH,SAClEqmK,EACL88B,GAAmB98B,GACdhnK,EAASN,KAAKg8M,EAAUmS,GAAc3lK,OAAO8+G,GAtDjDm1B,GADoB/xL,EAuDuD48J,GAtD5D6mD,GAAc3lK,OAAO99C,GAAQyjN,GAAc1lK,MAAM/9C,IALlD,SAAUsxM,EAASxjK,EAAMh8B,GAC9C,IAAIyT,EAAW+rL,EAAUmS,GAAc3lK,OAAOhsC,GAAS2xM,GAAc1lK,MAAMjsC,GAC3E,OAAO48M,GAAapd,EAASxjK,EAAMvoB,EACrC,CA0DawpM,CAAiBzd,EAASrmM,EAAS2xJ,GAGrChnK,EAAShC,MAEpB,EACIo7N,GAAehhN,EAAM0gN,IAAc,GACnCO,GAAejhN,EAAM0gN,IAAc,GACnCQ,GAAkBlhN,EAAM8gN,IAAY,GACpCK,GAAiBnhN,EAAM8gN,IAAY,GAEnCM,GAAa,aACbC,GAAc,SAAUrvN,GAC1B,OAAOkxL,GAAYlxL,IAASA,EAAKlO,KAAOs9N,EAC1C,EACIE,GAA0B,SAAU9nN,EAAMxH,GAC5C,KAAOA,GAAQA,IAASwH,GAAM,CAC5B,GAAIxH,EAAKlO,KAAOs9N,GACd,OAAOpvN,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,IACT,EAcIouN,GAAiB,SAAUrvN,GAC7B,OAAOjO,GAAMgB,QAAQiN,EAAS4R,MAChC,EAEI09M,GAAW,SAAUtzN,EAAK8D,GAI5B,OAHIkxL,GAAYlxL,IAAS9D,EAAIi9E,QAAQn5E,KAAUA,EAAK4S,YAAci7K,GAAIC,KACpE9tL,EAAK4S,UAAY,6BAEZ5S,CACT,EAmBIyvN,GAAuB,SAAUzvN,EAAMhG,GACzC,OAAOm1N,GAAenvN,GAAMlM,KAAKJ,GAAO,SAAUk8C,GAGhD,OAFA51C,EAAIklD,SAAStP,EAAIvY,YAAauY,EAAIx0B,UAClCphB,EAAIqlD,OAAOzP,EAAIvY,YAAauY,EAAIx0B,WACzB,CACT,GACF,EACIs0M,GAAyB,SAAU5hL,EAAM9tC,EAAMhG,GACjD,SAXc,SAAUgG,GACxB,OAAgC,IAAzBA,EAAK6S,eACd,CASM88M,CAAU3vN,KAASsvN,GAAwBxhL,EAAM9tC,KAjBtC,SAAUA,EAAMhG,GAC/B,IAAIuwN,EAAWvqN,EAAKwa,cAAcvH,eAAe4kL,IACjD73L,EAAKwB,YAAY+oN,GACjBvwN,EAAIklD,SAASqrK,EAAU,GACvBvwN,EAAIqlD,OAAOkrK,EAAU,EACvB,CAaIqF,CAAW5vN,EAAMhG,GACV,GAIX,EACI61N,GAAc,SAAU3zN,EAAK4V,EAAO5R,EAAUlG,GAChD,IACI3D,EAAG2J,EAAMob,EAAQL,EADjBghC,EAAQ77C,EAAS4R,EAAQ,QAAU,OAEnCg8B,EAAO5xC,EAAIo+E,UACf,GAAIv+B,EAAO,CAET,IADA3gC,EAAS2gC,EAAM,GACV/7C,EAAO8tC,EAAMz3C,EAAI0lD,EAAMxlD,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAEnD,GADA0kB,EAAW/a,EAAK8S,WACZ48M,GAAuB5hL,EAAM9tC,EAAMhG,GACrC,OAAO,EAET,GAAI+hD,EAAM1lD,GAAK0kB,EAASxkB,OAAS,EAC/B,QAAIm5N,GAAuB5hL,EAAM9tC,EAAMhG,IAGhCy1N,GAAqBzvN,EAAMhG,GAEpCgG,EAAO+a,EAASghC,EAAM1lD,GACxB,CACsB,IAAlB2J,EAAK7C,WACPie,EAAS2I,KAAK6kB,IAAImT,EAAM,GAAI/7C,EAAKqgD,UAAU9pD,SAEvB,IAAlByJ,EAAK7C,WACPie,EAAS2I,KAAK6kB,IAAImT,EAAM,GAAI/7C,EAAK8S,WAAWvc,SAE1Cub,EACF9X,EAAIklD,SAASl/C,EAAMob,GAEnBphB,EAAIqlD,OAAOr/C,EAAMob,EAErB,CACA,OAAO,CACT,EACI00M,GAAkB,SAAU9vN,GAC9B,OAAO4xL,GAAS5xL,IAASA,EAAKzC,KAAKhH,OAAS,CAC9C,EACIw5N,GAAkB,SAAU7zN,EAAK+V,EAAQ/R,GAC3C,IAAkDF,EAAMwvF,EAAK/0F,EAAM49I,EAE/DhhH,EAAWjc,EAFX+G,EAASjmB,EAAIkiB,IAAIle,EAASpO,GAAK,IAAMmgB,GACrC20M,EAAO1mN,EAAS0mN,KAEpB,GAAIzkM,EAAQ,CAwCV,GAvCAniB,EAAOmiB,EAAOhhB,WACC,UAAX8Q,GACG20M,EAGCzkM,EAAOtP,iBACT7S,EAAOmiB,EAAO7nB,WACdk1F,EAAM,GACGsgI,GAAgB3tM,EAAOG,cAChCtiB,EAAOmiB,EAAOG,YACdktE,EAAM,GACGsgI,GAAgB3tM,EAAOguK,kBAChCnwL,EAAOmiB,EAAOguK,gBACd3gG,EAAMrtE,EAAOguK,gBAAgB5yL,KAAKhH,SAElCyJ,EAAOmiB,EAAOhhB,WACdquF,EAAMtzF,EAAIs1M,UAAUrvL,GAAU,GAbhCqtE,EAAMtzF,EAAIs1M,UAAUrvL,GAgBtBkV,EAAYr3B,EACZob,EAASo0E,IAEJo3H,EAGCzkM,EAAOtP,iBACT7S,EAAOmiB,EAAO7nB,WACdk1F,EAAM,GACGsgI,GAAgB3tM,EAAOguK,kBAChCnwL,EAAOmiB,EAAOguK,gBACd3gG,EAAMrtE,EAAOguK,gBAAgB5yL,KAAKhH,SAElCyJ,EAAOmiB,EAAOhhB,WACdquF,EAAMtzF,EAAIs1M,UAAUrvL,IAVtBqtE,EAAMtzF,EAAIs1M,UAAUrvL,GAatBkV,EAAYr3B,EACZob,EAASo0E,IAENo3H,EAAM,CAQT,IAPAvuE,EAAOl2H,EAAOguK,gBACd11L,EAAO0nB,EAAOG,YACdrwB,GAAM8C,KAAK9C,GAAM4K,KAAKslB,EAAOrP,aAAa,SAAU9S,GAC9C4xL,GAAS5xL,KACXA,EAAKqgD,UAAYrgD,EAAKqgD,UAAU1jD,QAAQ,UAAW,IAEvD,IACOwlB,EAASjmB,EAAIkiB,IAAIle,EAASpO,GAAK,IAAMmgB,IAC1C/V,EAAImF,OAAO8gB,GAAQ,GAEjBk2H,GAAQ59I,GAAQ49I,EAAKl7I,WAAa1C,EAAK0C,UAAYy0L,GAASv5C,KAAUw1C,GAAIp4K,QAC5E+5E,EAAM6oD,EAAKh4F,UAAU9pD,OACrB8hJ,EAAK23E,WAAWv1N,EAAK4lD,WACrBnkD,EAAImF,OAAO5G,GACX48B,EAAYghH,EACZj9H,EAASo0E,EAEb,CACA,OAAO55F,EAASN,KAAKmuN,GAAcpsL,EAAWjc,GAChD,CACE,OAAOxlB,EAAShC,MAEpB,EA4CIq8N,GAAgB,SAAUl0N,EAAW1J,EAAM0kN,GAC7C,OAtoCkB,SAAUh7M,EAAW1J,EAAM0kN,GAC7C,OAAa,IAAT1kN,EACK6zN,GAAkBnuB,GAAQgf,EAAYh7M,GAC3B,IAAT1J,EAlDU,SAAU0J,GAC/B,IAAI/B,EAAM+B,EAAUmB,SACpB,MAAO,CACL4U,MAAOqzM,GAASppN,EAAUG,IAAIo+E,UAAWmpI,GAAcQ,eAAejqN,IACtEiiH,IAAKkpG,GAASppN,EAAUG,IAAIo+E,UAAWmpI,GAAcS,aAAalqN,IAEtE,CA6CWk2N,CAAiBn0N,GACf1J,EA7CU,SAAU0J,GAC/B,MAAO,CAAE/B,IAAK+B,EAAUmB,SAC1B,CA4CWizN,CAAiBp0N,GAEjByqN,GAAsBzqN,GAAW,EAE5C,CA4nCSq0N,CAAcr0N,EAAW1J,EAAM0kN,EACxC,EACIl2M,GAAiB,SAAU9E,EAAWmE,IArB1B,SAAUnE,EAAWmE,GACnC,IAAIhE,EAAMH,EAAUG,IACpB,GAAIgE,EAAU,CACZ,GAAIqvN,GAAervN,GACjB,OA7Ba,SAAUhE,EAAKgE,GAChC,IAAIlG,EAAMkC,EAAI2+E,YACd,OAAIg1I,GAAY3zN,GAAK,EAAMgE,EAAUlG,IAAQ61N,GAAY3zN,GAAK,EAAOgE,EAAUlG,GACtEpE,EAASN,KAAK0E,GAEdpE,EAAShC,MAEpB,CAsBay8N,CAAan0N,EAAKgE,GACpB,GA7LgB,SAAUA,GACnC,OAAO0rL,EAAW1rL,EAAS4R,MAC7B,CA2Lew+M,CAAqBpwN,GAC9B,OAAOtK,EAASN,KAxKa,SAAU4G,EAAKgE,GAChD,IAAI0vC,EACA51C,EAAMkC,EAAI2+E,YAKd,OAJAjrC,EAAM21K,GAAUrpN,EAAIo+E,UAAWp6E,EAAS4R,OACxC9X,EAAIklD,SAAStP,EAAIvY,YAAauY,EAAIx0B,UAClCw0B,EAAM21K,GAAUrpN,EAAIo+E,UAAWp6E,EAAS+7G,KACxCjiH,EAAIqlD,OAAOzP,EAAIvY,YAAauY,EAAIx0B,UACzBphB,CACT,CAgK2Bu2N,CAA6Br0N,EAAKgE,IAClD,GAzLQ,SAAUA,GAC3B,OAAOmR,GAAMnR,EAAU,KACzB,CAuLeswN,CAAatwN,GACtB,OAzBU,SAAUhE,EAAKgE,GAC7B,IAAI4tN,EAAWiC,GAAgB7zN,EAAK,QAASgE,GACzCuwN,EAASV,GAAgB7zN,EAAK,MAAOgE,GACzC,OAAOsR,GAAMs8M,EAAU2C,EAAO77N,GAAGk5N,IAAW,SAAU4C,EAAMC,GAC1D,IAAI32N,EAAMkC,EAAI2+E,YAGd,OAFA7gF,EAAIklD,SAASswK,GAAStzN,EAAKw0N,EAAKr5L,aAAcq5L,EAAKt1M,UACnDphB,EAAIqlD,OAAOmwK,GAAStzN,EAAKy0N,EAAKt5L,aAAcs5L,EAAKv1M,UAC1CphB,CACT,GACF,CAgBa42N,CAAU10N,EAAKgE,GACjB,GAxLW,SAAUA,GAC9B,OAAOmR,GAAMnR,EAAU,OACzB,CAsLe2wN,CAAgB3wN,GACzB,OAjBa,SAAUhE,EAAKgE,GAChC,OAAOtK,EAASC,KAAKqG,EAAIC,OAAO+D,EAASrN,MAAMqN,EAAS+a,QAAQnmB,KAAI,SAAU4E,GAC5E,IAAIM,EAAMkC,EAAI2+E,YAEd,OADA7gF,EAAI8gF,WAAWphF,GACRM,CACT,GACF,CAWa82N,CAAa50N,EAAKgE,GACpB,GAhMW,SAAUA,GAC9B,OAAOmR,GAAMnR,EAAU,MACzB,CA8Le6wN,CAAgB7wN,GACzB,OAAOtK,EAASN,KAAK4K,EAASlG,IAElC,CACA,OAAOpE,EAAShC,MAClB,EAMEo9N,CAAUj1N,EAAWmE,GAAUnL,MAAK,SAAUiF,GAC5C+B,EAAU6E,OAAO5G,EACnB,GACF,EACIi3N,GAAmB,SAAUjxN,GAC/B,OAAOkxL,GAAYlxL,IAA0B,SAAjBA,EAAK0xL,SAA6D,aAAvC1xL,EAAKnF,aAAa,gBAC3E,EAOIq2N,IAAYt5B,GAJP,SAAUu5B,GACf,MAGYv5B,MAHQu5B,CACtB,GAGEC,GAAe,SAAUp3I,GAC3B,MAAe,KAARA,IAAgD,IAAlC,cAAgBjkF,QAAQikF,EAC/C,EACIq3I,GAAY,SAAUr3I,GACxB,OAAQo3I,GAAap3I,KAASk3I,GAAOl3I,EACvC,EAEIs3I,GAAS,SAAUtxN,GACrB,QAASA,EAAK7C,QAChB,EAIIo0N,GAAY,SAAUr1N,EAAKH,EAAW/B,GACxC,IAAIohB,EAASphB,EAAI2lD,YACbtoB,EAAYr9B,EAAIsG,eACpB,IAAI+2B,IAAcr9B,EAAIyG,eANJ,SAAUT,GAC5B,OAAOA,GAAQ,UAAUpF,KAAKoF,EAAKrG,SACrC,CAKQ63N,CAAcn6L,EAAUvkB,WAAWsI,MAIrC81K,GAAY75J,GAAY,CAC1B,IAAIk7J,EAAQl7J,EAAUvkB,WAClBzY,OAAS,EACT+gB,EAASm3K,EAAMh8L,QACjB8gC,EAAYk7J,EAAMn3K,GAClB/gB,EAAS,IAAIs8L,GAAct/J,EAAWn7B,EAAIE,UAAUi7B,EAAWn7B,EAAIi9E,YAEnE9hD,EAAYk7J,EAAMA,EAAMh8L,OAAS,IACjC8D,EAAS,IAAIs8L,GAAct/J,EAAWn7B,EAAIE,UAAUi7B,EAAWn7B,EAAIi9E,WAC5D1+E,MAAK,IAEd,IAAK,IAAIuF,EAAO3F,EAAOG,UAAWwF,EAAMA,EAAO3F,EAAOI,OACpD,GAAIm3L,GAAS5xL,KAAUyxN,GAAmBzxN,GAGxC,OAFAhG,EAAIklD,SAASl/C,EAAM,QACnBjE,EAAU6E,OAAO5G,EAIvB,CACF,EACI03N,GAA0B,SAAU1xN,EAAMvF,EAAMk3N,GAClD,GAAI3xN,EAAM,CACR,IAAI4xN,EAAWn3N,EAAO,cAAgB,kBACtC,IAAKuF,EAAO2xN,EAAM3xN,EAAOA,EAAK4xN,GAAW5xN,EAAMA,EAAOA,EAAK4xN,GACzD,GAAI1gC,GAAYlxL,KAAUyxN,GAAmBzxN,GAC3C,OAAOA,CAGb,CACF,EACI6xN,GAAgB,SAAU16N,EAAQtE,GAIpC,OAHIy+N,GAAOz+N,KACTA,EAAOA,EAAK8G,YAELxC,EAAO6F,OAAO2gM,uBAAuB9qM,EAAK+G,cACrD,EACI04F,GAAU,SAAUk0C,EAAI3rH,EAAQ4nB,GAClC,OAAO+jG,EAAGxpI,OAAOunM,aAAa1pL,EAAQ4nB,EACxC,EACIgvL,GAAqB,SAAUzxN,EAAM8xN,GAIvC,QAHoB,IAAhBA,IACFA,GAAc,GAEZxkN,EAActN,IAAS4xL,GAAS5xL,GAAO,CACzC,IAAIzC,EAAOu0N,EAAc9xN,EAAKzC,KAAKZ,QAAQ,KAAM,KAAUqD,EAAKzC,KAChE,OAAOy8L,GAAiBz8L,EAC1B,CACE,OAAO,CAEX,EAIIw0N,GAAc,SAAUz/N,EAAO0/N,GAQjC,OAPI3+N,EAAWf,GACbA,EAAQA,EAAM0/N,GACL1kN,EAAc0kN,KACvB1/N,EAAQA,EAAMqK,QAAQ,WAAW,SAAUiV,EAAK/e,GAC9C,OAAOm/N,EAAKn/N,IAAS+e,CACvB,KAEKtf,CACT,EACI2/N,GAAS,SAAUC,EAAMlsB,GAK3B,OAHAA,EAAOA,GAAQ,GACfksB,EAAO,KAFPA,EAAOA,GAAQ,IAEGv4N,UAAYu4N,GAC9BlsB,EAAO,IAAMA,EAAKrsM,UAAYqsM,GACvBksB,EAAKt4N,gBAAkBosM,EAAKpsM,aACrC,EACIu4N,GAAsB,SAAUj2N,EAAK5J,EAAOO,GAU9C,MATa,UAATA,GAA6B,oBAATA,IACtBP,EAAQ4J,EAAIiwF,MAAM75F,IAEP,eAATO,GAAmC,MAAVP,IAC3BA,EAAQ,QAEG,eAATO,IACFP,EAAQA,EAAMqK,QAAQ,UAAW,IAAIA,QAAQ,QAAS,MAEjD,GAAKrK,CACd,EACIyxF,GAAW,SAAU7nF,EAAK8D,EAAMnN,GAClC,OAAOs/N,GAAoBj2N,EAAKA,EAAI6nF,SAAS/jF,EAAMnN,GAAOA,EAC5D,EACIu/N,GAAoB,SAAUl2N,EAAK8D,GACrC,IAAIqyN,EAKJ,OAJAn2N,EAAIE,UAAU4D,GAAM,SAAUjM,GAE5B,OADAs+N,EAAan2N,EAAI6nF,SAAShwF,EAAG,qBACO,SAAfs+N,CACvB,IACOA,CACT,EACIC,GAAe,SAAUp2N,EAAK8D,EAAMqZ,GACtC,OAAOnd,EAAIgF,WAAWlB,EAAMqZ,EAAUnd,EAAIo+E,UAC5C,EA0CI2uD,GAAgB,SAAUvsI,GAC5B,OAAO4U,GAAkB5U,EAAQ,QACnC,EACIwsI,GAAmB,SAAUxsI,GAC/B,OAAO4U,GAAkB5U,EAAQ,WACnC,EACI61N,GAAiB,SAAU71N,GAC7B,OAAO4U,GAAkB5U,EAAQ,SACnC,EAII81N,GAAyB,SAAU91N,GACrC,OAAOwsI,GAAiBxsI,KAA6B,IAAlBA,EAAO4xE,SAAqBikJ,GAAe71N,EAChF,EAEI+1N,GAAiBxB,GACjByB,GAAeJ,GACfK,GAAmBlB,GACnBmB,GAAcf,GAIdgB,GAA4B,SAAU32N,EAAK8D,GAE7C,IADA,IAAI6a,EAAS7a,EACN6a,GAAQ,CACb,GAAIq2K,GAAYr2K,IAAW3e,EAAIk9E,mBAAmBv+D,GAChD,MAA0C,UAAnC3e,EAAIk9E,mBAAmBv+D,GAAsBA,EAAS7a,EAE/D6a,EAASA,EAAO1Z,UAClB,CACA,OAAOnB,CACT,EACI8yN,GAAW,SAAUhhN,EAAO9R,EAAMob,EAAQnhB,GAE5C,IADA,IAAI2X,EAAM5R,EAAKzC,KACNlH,EAAI+kB,EAAQtJ,EAAQzb,GAAK,EAAIA,EAAIub,EAAIrb,OAAQub,EAAQzb,IAAMA,IAClE,GAAI4D,EAAU2X,EAAI4oE,OAAOnkF,IACvB,OAAOyb,EAAQzb,EAAI,EAAIA,EAG3B,OAAQ,CACV,EACI08N,GAAY,SAAUjhN,EAAO9R,EAAMob,GACrC,OAAO03M,GAAShhN,EAAO9R,EAAMob,GAAQ,SAAU4hB,GAC7C,OAAOk0L,GAAOl0L,IAAMo0L,GAAap0L,EACnC,GACF,EACIg2L,GAAc,SAAUlhN,EAAO9R,EAAMob,GACvC,OAAO03M,GAAShhN,EAAO9R,EAAMob,EAAQi2M,GACvC,EACI4B,GAAmB,SAAU/2N,EAAKsL,EAAM6vB,EAAWjc,EAAQtJ,EAAOohN,GACpE,IAAIC,EACAj6I,EAAWh9E,EAAIE,UAAUi7B,EAAWn7B,EAAIi9E,UAAY3xE,EACpDioL,EAAO,SAAUp4J,EAAWjc,EAAQnc,GACtC,IAAIm0N,EAAa5S,GAAWtkN,GACxB7B,EAASyX,EAAQshN,EAAW95I,UAAY85I,EAAWzS,SACvD,OAAO/qN,EAASC,KAAKwE,EAAOg9B,EAAWjc,GAAQ,SAAUjjB,EAAMk7N,GAC7D,OAAIZ,GAAet6N,EAAKgJ,aACd,GAERgyN,EAAeh7N,EACR8G,EAAK6S,EAAO3Z,EAAMk7N,GAE7B,GAAGn6I,GACL,EAEA,OADkBu2G,EAAKp4J,EAAWjc,EAAQ23M,IACvB/9N,MAAK,SAAU00B,GAChC,OAAOwpM,EAAwBzjC,EAAK/lK,EAAO2N,UAAW3N,EAAOtO,QAAUtJ,GAAS,EAAI,GAAIkhN,IAAep9N,EAASN,KAAKo0B,EACvH,IAAG70B,SAAQ,WACT,OAAOs+N,EAAev9N,EAASN,KAAK,CAClC+hC,UAAW87L,EACX/3M,OAAQtJ,EAAQ,EAAIqhN,EAAa58N,SAC9BX,EAAShC,MAChB,GACF,EACI0/N,GAAuB,SAAUp3N,EAAKq3N,EAAYv5N,EAAKq9B,EAAW2/J,GAChEpF,GAASv6J,IAAcg2J,GAAUh2J,EAAU95B,OAAS85B,EAAU2/J,KAChE3/J,EAAYA,EAAU2/J,IAGxB,IADA,IAAI/sL,EAAUyoN,GAAax2N,EAAKm7B,GACvBhhC,EAAI,EAAGA,EAAI4T,EAAQ1T,OAAQF,IAClC,IAAK,IAAIkpB,EAAI,EAAGA,EAAIg0M,EAAWh9N,OAAQgpB,IAAK,CAC1C,IAAIi0M,EAAYD,EAAWh0M,GAC3B,KAAIjS,EAAckmN,EAAUt5N,YAAcs5N,EAAUt5N,YAAcF,EAAIE,YAGlEgvI,GAAiBsqF,IAAct3N,EAAIvF,GAAGsT,EAAQ5T,GAAIm9N,EAAUn6M,UAC9D,OAAOpP,EAAQ5T,EAEnB,CAEF,OAAOghC,CACT,EACIo8L,GAAoB,SAAUt8N,EAAQo8N,EAAYl8L,EAAW2/J,GAC/D,IAAIh3L,EAAOq3B,EACPn7B,EAAM/E,EAAO+E,IACb4xC,EAAO5xC,EAAIo+E,UACX59E,EAAS62N,EAAW,GAIxB,GAHItqF,GAAcvsI,KAChBsD,EAAOtD,EAAOqmB,QAAU,KAAO7mB,EAAIE,UAAUi7B,EAAW36B,EAAO65H,MAAOzoF,KAEnE9tC,EAAM,CACT,IAAI0zN,EAAYx3N,EAAIE,UAAUi7B,EAAW,YACzCr3B,EAAO9D,EAAIE,UAAUw1L,GAASv6J,GAAaA,EAAUl2B,WAAak2B,GAAW,SAAUr3B,GACrF,OAAOA,IAAS8tC,GAAQ8kL,GAAYz7N,EAAQ6I,EAC9C,GAAG0zN,EACL,CAIA,GAHI1zN,GAAQipI,GAAcvsI,IAAWA,EAAOqmB,UAC1C/iB,EAAO0yN,GAAax2N,EAAK8D,EAAM,SAASoQ,UAAU,IAAMpQ,IAErDA,EAEH,IADAA,EAAOq3B,EACAr3B,EAAKg3L,KAAiB96L,EAAIi9E,QAAQn5E,EAAKg3L,MAC5Ch3L,EAAOA,EAAKg3L,IACRi7B,GAAOjyN,EAAM,SAKrB,OAAOA,GAAQq3B,CACjB,EACIs8L,GAAsB,SAAUz3N,EAAK4xC,EAAMzW,EAAW2/J,GACxD,IAAIn8K,EAASwc,EAAUl2B,WACvB,OAAImM,EAAc+pB,EAAU2/J,QAEjBn8K,IAAWizB,IAAQzgC,EAAWwN,KAAW3e,EAAIi9E,QAAQt+D,KAGvD84M,GAAoBz3N,EAAK4xC,EAAMjzB,EAAQm8K,GAElD,EACI48B,GAAsB,SAAU13N,EAAKq3N,EAAYl8L,EAAWjc,EAAQtJ,GACtE,IAhHwB9R,EAgHpB6a,EAASwc,EACT2/J,EAAcllL,EAAQ,kBAAoB,cAC1Cg8B,EAAO5xC,EAAIo+E,UACf,GAAIs3G,GAASv6J,KAAes7L,GAAiBt7L,KACvCvlB,EAAQsJ,EAAS,EAAIA,EAASic,EAAU95B,KAAKhH,QAC/C,OAAO8gC,EAGX,OAAa,CACX,IAAKk8L,EAAW,GAAGM,cAAgB33N,EAAIi9E,QAAQt+D,GAC7C,OAAOA,EAET,IAAK,IAAIwH,EAAUxH,EAAOm8K,GAAc30K,EAASA,EAAUA,EAAQ20K,GAAc,CAC/E,IAAI86B,EAAclgC,GAASvvK,KAAasxM,GAAoBz3N,EAAK4xC,EAAMzrB,EAAS20K,GAChF,IAAKy7B,GAAepwM,MA7HjB0vK,GADiB/xL,EA8HuBqiB,KA7HxBriB,EAAKnF,aAAa,mBAAsBmF,EAAKsiB,eA6HRqwM,GAAiBtwM,EAASyvM,GAChF,OAAOj3M,CAEX,CACA,GAAIA,IAAWizB,GAAQjzB,EAAO1Z,aAAe2sC,EAAM,CACjDzW,EAAYxc,EACZ,KACF,CACAA,EAASA,EAAO1Z,UAClB,CACA,OAAOk2B,CACT,EACIy8L,GAAyB,SAAUz8L,GACrC,OAAOo7L,GAAep7L,EAAUl2B,aAAesxN,GAAep7L,EAChE,EACI08L,GAAY,SAAU58N,EAAQ6C,EAAKu5N,EAAYS,QACpB,IAAzBA,IACFA,GAAuB,GAEzB,IAAI1zN,EAAiBtG,EAAIsG,eAAgBq/C,EAAc3lD,EAAI2lD,YAAal/C,EAAezG,EAAIyG,aAAcm/C,EAAY5lD,EAAI4lD,UACrH1jD,EAAM/E,EAAO+E,IACbQ,EAAS62N,EAAW,GAmFxB,OAlFIriC,GAAY5wL,IAAmBA,EAAeuS,kBAChDvS,EAAiBihN,GAAUjhN,EAAgBq/C,GACvCiyI,GAAStxL,KACXq/C,EAAc,IAGduxI,GAAYzwL,IAAiBA,EAAaoS,kBAC5CpS,EAAe8gN,GAAU9gN,EAAczG,EAAIE,UAAY0lD,EAAYA,EAAY,GAC3EgyI,GAASnxL,KACXm/C,EAAYn/C,EAAa4/C,UAAU9pD,SAGvC+J,EAAiBuyN,GAA0B32N,EAAKoE,GAChDG,EAAeoyN,GAA0B32N,EAAKuE,GAC1CqzN,GAAuBxzN,KACzBA,EAAiBmyN,GAAenyN,GAAkBA,EAAiBA,EAAea,WAEhFb,EADEtG,EAAIE,UACWoG,EAAe6vL,iBAAmB7vL,EAElCA,EAAegiB,aAAehiB,EAE7CsxL,GAAStxL,KACXq/C,EAAc3lD,EAAIE,UAAYoG,EAAe/J,OAAS,IAGtDu9N,GAAuBrzN,KACzBA,EAAegyN,GAAehyN,GAAgBA,EAAeA,EAAaU,WAExEV,EADEzG,EAAIE,UACSuG,EAAa6hB,aAAe7hB,EAE5BA,EAAa0vL,iBAAmB1vL,EAE7CmxL,GAASnxL,KACXm/C,EAAY5lD,EAAIE,UAAY,EAAIuG,EAAalK,SAG7CyD,EAAIE,YACW+4N,GAAiB/2N,EAAK/E,EAAOoJ,UAAWD,EAAgBq/C,GAAa,EAAMq0K,GACjFj/N,MAAK,SAAU6S,GACxB,IAAIyvB,EAAYzvB,EAAGyvB,UAAWjc,EAASxT,EAAGwT,OAC1C9a,EAAiB+2B,EACjBsoB,EAAcvkC,CAChB,IACe63M,GAAiB/2N,EAAK/E,EAAOoJ,UAAWE,EAAcm/C,GAAW,EAAOo0K,GAC9Ej/N,MAAK,SAAU6S,GACtB,IAAIyvB,EAAYzvB,EAAGyvB,UAAWjc,EAASxT,EAAGwT,OAC1C3a,EAAe42B,EACfuoB,EAAYxkC,CACd,MAEEm3M,GAAe71N,IAAWA,EAAOm3N,gBAC9BtB,GAAe71N,IAAak1L,GAAStxL,IAAmC,IAAhBq/C,IAC3Dr/C,EAAiBszN,GAAoB13N,EAAKq3N,EAAYjzN,EAAgBq/C,GAAa,IAEhF4yK,GAAe71N,IAAak1L,GAASnxL,IAAiBm/C,IAAcn/C,EAAa4/C,UAAU9pD,SAC9FkK,EAAemzN,GAAoB13N,EAAKq3N,EAAY9yN,EAAcm/C,GAAW,KAG7E4yK,GAAuB91N,KACzB4D,EAAiBgzN,GAAqBp3N,EAAKq3N,EAAYv5N,EAAKsG,EAAgB,mBAC5EG,EAAe6yN,GAAqBp3N,EAAKq3N,EAAYv5N,EAAKyG,EAAc,iBAEtEwoI,GAAcvsI,IAAWwsI,GAAiBxsI,MAC5C4D,EAAiBmzN,GAAkBt8N,EAAQo8N,EAAYjzN,EAAgB,mBACvEG,EAAegzN,GAAkBt8N,EAAQo8N,EAAY9yN,EAAc,eAC/DwoI,GAAcvsI,KACXR,EAAIi9E,QAAQ74E,KACfA,EAAiBszN,GAAoB13N,EAAKq3N,EAAYjzN,EAAgBq/C,GAAa,IAEhFzjD,EAAIi9E,QAAQ14E,KACfA,EAAemzN,GAAoB13N,EAAKq3N,EAAY9yN,EAAcm/C,GAAW,MAI/EsxI,GAAY5wL,KACdq/C,EAAczjD,EAAIs1M,UAAUlxM,GAC5BA,EAAiBA,EAAea,YAE9B+vL,GAAYzwL,KACdm/C,EAAY1jD,EAAIs1M,UAAU/wM,GAAgB,EAC1CA,EAAeA,EAAaU,YAEvB,CACLb,eAAgBA,EAChBq/C,YAAaA,EACbl/C,aAAcA,EACdm/C,UAAWA,EAEf,EAEIq0K,GAAS,SAAU/3N,EAAKlC,EAAK0K,GAC/B,IAAIi7C,EAAc3lD,EAAI2lD,YAClBr/C,EAAiBihN,GAAUvnN,EAAIsG,eAAgBq/C,GAC/CC,EAAY5lD,EAAI4lD,UAChBn/C,EAAe8gN,GAAUvnN,EAAIyG,aAAcm/C,EAAY,GACvDs0K,EAAU,SAAU3hC,GACtB,IAAI4hC,EAAY5hC,EAAM,GAClBX,GAASuiC,IAAcA,IAAc7zN,GAAkBq/C,GAAew0K,EAAU52N,KAAKhH,QACvFg8L,EAAM9iG,OAAO,EAAG,GAElB,IAAI2kI,EAAW7hC,EAAMA,EAAMh8L,OAAS,GAIpC,OAHkB,IAAdqpD,GAAmB2yI,EAAMh8L,OAAS,GAAK69N,IAAa3zN,GAAgBmxL,GAASwiC,IAC/E7hC,EAAM9iG,OAAO8iG,EAAMh8L,OAAS,EAAG,GAE1Bg8L,CACT,EACI8hC,EAAkB,SAAUr0N,EAAMnN,EAAMyhO,GAE1C,IADA,IAAIC,EAAW,GACRv0N,GAAQA,IAASs0N,EAASt0N,EAAOA,EAAKnN,GAC3C0hO,EAASt+N,KAAK+J,GAEhB,OAAOu0N,CACT,EACIC,EAAe,SAAUx0N,EAAM8tC,GACjC,OAAO5xC,EAAIE,UAAU4D,GAAM,SAAUA,GACnC,OAAOA,EAAKmB,aAAe2sC,CAC7B,GAAGA,EACL,EACI2mL,EAAe,SAAU73D,EAAW03D,EAAS75N,GAE/C,IADA,IAAIu8L,EAAcv8L,EAAO,cAAgB,kBAChCuF,EAAO48J,EAAWqT,EAAWjwK,EAAKmB,WAAYnB,GAAQA,IAASs0N,EAASt0N,EAAOiwK,EAAU,CAChGA,EAAWjwK,EAAKmB,WAChB,IAAIuzN,EAAaL,EAAgBr0N,IAAS48J,EAAY58J,EAAOA,EAAKg3L,GAAcA,GAC5E09B,EAAWn+N,SACRkE,GACHi6N,EAAWtkN,UAEb1L,EAASwvN,EAAQQ,IAErB,CACF,EACA,GAAIp0N,IAAmBG,EACrB,OAAOiE,EAASwvN,EAAQ,CAAC5zN,KAE3B,IAAIijC,EAAWrnC,EAAI++M,mBAAmB36M,EAAgBG,GACtD,GAAIvE,EAAIy/M,UAAUr7M,EAAgBG,GAChC,OAAOg0N,EAAan0N,EAAgBijC,GAAU,GAEhD,GAAIrnC,EAAIy/M,UAAUl7M,EAAcH,GAC9B,OAAOm0N,EAAah0N,EAAc8iC,GAEpC,IAAIoxL,EAAaH,EAAal0N,EAAgBijC,IAAajjC,EACvDs0N,EAAWJ,EAAa/zN,EAAc8iC,IAAa9iC,EACvDg0N,EAAan0N,EAAgBq0N,GAAY,GACzC,IAAIJ,EAAWF,EAAgBM,IAAer0N,EAAiBq0N,EAAaA,EAAWryM,YAAa,cAAesyM,IAAan0N,EAAem0N,EAAStyM,YAAcsyM,GAClKL,EAASh+N,QACXmO,EAASwvN,EAAQK,IAEnBE,EAAah0N,EAAcm0N,EAC7B,EAEI70K,GAAY,SAAUhkD,GACxB,IAAI+jD,EAAS,GACb,GAAI/jD,EACF,IAAK,IAAI1F,EAAI,EAAGA,EAAI0F,EAAU+kD,WAAYzqD,IACxCypD,EAAO7pD,KAAK8F,EAAUilD,WAAW3qD,IAGrC,OAAOypD,CACT,EAiBI+0K,GAA8B,SAAU/0K,EAAQ70C,GAClD,IAAI6pN,EAHGp0K,GAGiCz1C,EAHhB,+CAIxB,OAAO6pN,EAAcv+N,OAAS,EAAIu+N,EARX,SAAUh1K,GACjC,OAAOqsI,EAXc,SAAUrsI,GAC/B,OAAO9qD,EAAK8qD,GAAQ,SAAUhB,GAC5B,IAAI9+C,EAAOshN,GAAgBxiK,GAC3B,OAAO9+C,EAAO,CAACwS,GAAqBxS,IAAS,EAC/C,GACF,CAMkB+0N,CAAiBj1K,GAAS43I,GAC5C,CAMoDs9B,CAAmBl1K,EACvE,EACIm1K,GAAqB,SAAU99N,GACjC,OAAO09N,GAA4B90K,GAAU5oD,EAAO4E,UAAUm5N,UAAW1iN,GAAqBrb,EAAOoJ,WACvG,EACI40N,GAAkB,SAAU9yJ,EAAMnxC,GACpC,OAAOC,GAAWkxC,EAAM,QAASnxC,EACnC,EAkBIkkM,GAAmB,SAAUp1N,GAC/B,OAAO1F,GAAW0F,GAAMlM,KAAKP,EAAS,CAACyM,KAAQ,SAAUyiC,GACvD,MAAO,CAACziC,GAAMxE,OAAO45N,GAAiB3yL,GACxC,GACF,EACI4yL,GAAoB,SAAUr1N,GAChC,OAAOswL,GAAUtwL,GAAMlM,KAAKP,EAAS,CAACyM,KAAQ,SAAUyiC,GACtD,MAAoB,OAAhB5vC,GAAK4vC,GACAytJ,GAAYztJ,GAAO3tC,KAAI,SAAUutB,GACtC,MAAO,CAACriB,GAAMxE,OAAO65N,GAAkBhzM,GACzC,IAAGluB,MAAM,IAEF,CAAC6L,GAAMxE,OAAO65N,GAAkB5yL,GAE3C,GACF,EACI6yL,GAAyB,SAAU57N,EAAKM,GAC1C,OAAOwX,GAjCU,SAAUxX,GAC3B,IAAIipN,EAAKjpN,EAAIsG,eAAgB6iN,EAAKnpN,EAAI2lD,YACtC,OAAIiyI,GAASqxB,GACG,IAAPE,EAAWvtN,EAASN,KAAKkd,GAAqBywM,IAAOrtN,EAAShC,OAE9DgC,EAASC,KAAKotN,EAAGnwM,WAAWqwM,IAAKruN,IAAI0d,GAEhD,CA0Be+iN,CAAav7N,GAzBX,SAAUA,GACzB,IAAIkpN,EAAKlpN,EAAIyG,aAAc2iN,EAAKppN,EAAI4lD,UACpC,OAAIgyI,GAASsxB,GACJE,IAAOF,EAAG3lN,KAAKhH,OAASX,EAASN,KAAKkd,GAAqB0wM,IAAOttN,EAAShC,OAE3EgC,EAASC,KAAKqtN,EAAGpwM,WAAWswM,EAAK,IAAItuN,IAAI0d,GAEpD,CAkBkCgjN,CAAWx7N,IAAM,SAAU4iK,EAAW03D,GACpE,IAAIxiN,EAAQ2C,EAAO2gN,GAAiB17N,GAAMsU,EAAM2L,GAAIijJ,IAChD3gD,EAAMxnG,EAAO4gN,GAAkB37N,GAAMsU,EAAM2L,GAAI26M,IACnD,OAAOxiN,EAAM7d,UAAYgoH,EAAIhoH,QAC/B,IAAGE,OAAM,EACX,EACIshO,GAAe,SAAUv5N,EAAKlC,EAAKgG,EAAM8R,GAC3C,IAAIg8B,EAAO9tC,EAAM3F,EAAS,IAAIs8L,GAAc32L,EAAM8tC,GAC9CiyJ,EAAoCtT,GAASvwL,EAAIc,OAAOmnM,qCAAqC,SAAUj/L,EAAGrS,GAC5G,OAAQm5L,EAAW,CACjB,KACA,KACA,SACCn5L,EAAK+G,cACV,IACA,EAAG,CACD,GAAIg4L,GAAS5xL,IAA+C,IAAtC/N,GAAMyJ,KAAKsE,EAAKqgD,WAAW9pD,OAM/C,YALIub,EACF9X,EAAIklD,SAASl/C,EAAM,GAEnBhG,EAAIqlD,OAAOr/C,EAAMA,EAAKqgD,UAAU9pD,SAIpC,GAAIwpM,EAAkC//L,EAAKrG,UAUzC,YATImY,EACF9X,EAAI0G,eAAeV,GAEG,OAAlBA,EAAKrG,SACPK,EAAIolD,aAAap/C,GAEjBhG,EAAI2G,YAAYX,GAKxB,OAASA,EAAO8R,EAAQzX,EAAOI,OAASJ,EAAOg+I,QACzB,SAAlBvqG,EAAKn0C,WACHmY,EACF9X,EAAIklD,SAASpR,EAAM,GAEnB9zC,EAAIqlD,OAAOvR,EAAMA,EAAKh7B,WAAWvc,QAGvC,EACIm/N,GAAe,SAAUv+N,GAC3B,IAAIirD,EAAMjrD,EAAO4E,UAAUm5N,SAC3B,OAAO9yK,GAAOA,EAAItB,WAAa,CACjC,EACI60K,GAAc,SAAUx+N,EAAQgyE,GAClC,IAAIysJ,EAAqBX,GAAmB99N,GACxCy+N,EAAmBr/N,OAAS,EAC9B21L,EAAO0pC,GAAoB,SAAU1xN,GACnC,IAAIlE,EAAOkE,EAAKhI,IACZ25N,EAAc1+N,EAAO+E,IAAI2+E,YAC7Bg7I,EAAYn1N,eAAeV,GAC3B61N,EAAYl1N,YAAYX,GACxBmpE,EAAS0sJ,GAAa,EACxB,IAEA1sJ,EAAShyE,EAAO4E,UAAUmB,UAAU,EAExC,EACIo4E,GAAW,SAAUv5E,EAAW+5N,EAAc3sJ,GAChD,IAAIjpE,EAAWsmN,GAAsBzqN,EAAW+5N,GAChD3sJ,EAASjpE,GACTnE,EAAU8E,eAAeX,EAC3B,EAyBI61N,IAvBsBp/N,GAuBJo5L,GAPb,CACL3xK,IAhBQ,SAAUnT,GAClB,IAAKtU,GAAGsU,GACN,MAAM,IAAIzW,MAAM,0CAElB,OAAO4rD,GAAUn1C,GAAS9W,MAAM,GAClC,EAYEisD,UAXEA,GAAY,SAAUn1C,GACxB,OAAOtU,GAAGsU,GAAWrV,EAASC,KAAKoV,EAAQ/O,IAAImkD,WAAazqD,EAAShC,MACvE,EAUE6qB,IATQ,SAAUxT,EAAS3Y,GAC3B,IAAKqE,GAAGsU,GACN,MAAM,IAAIzW,MAAM,8CAElByW,EAAQ/O,IAAImkD,UAAY/tD,CAC1B,IASEk6D,GAAQ,SAAUvhD,GACpB,OAAO8qN,GAAM33M,IAAInT,EACnB,EA6BI+qN,GAAiB,SAAUC,EAAMruN,EAAIq4M,EAAgBiW,GACvD,IAAI3jL,EAAK3qC,EAAGguB,IAAKA,OAAa,IAAP2c,EAAgB8f,GAAS,kBAAoB9f,EAAIh1C,EA38T1E,SAAgB5H,EAAGuU,GACjB,IAAI3X,EAAI,CAAC,EACT,IAAK,IAAIyG,KAAKrD,EACRkD,OAAOnG,UAAUuG,eAAepH,KAAK8D,EAAGqD,IAAMkR,EAAEnU,QAAQiD,GAAK,IAC/DzG,EAAEyG,GAAKrD,EAAEqD,IACb,GAAS,MAALrD,GAAqD,mBAAjCkD,OAAO4V,sBACxB,KAAIpY,EAAI,EAAb,IAAgB2C,EAAIH,OAAO4V,sBAAsB9Y,GAAIU,EAAI2C,EAAEzC,OAAQF,IAC7D6T,EAAEnU,QAAQiD,EAAE3C,IAAM,GAAKwC,OAAOnG,UAAUgc,qBAAqB7c,KAAK8D,EAAGqD,EAAE3C,MACzE9D,EAAEyG,EAAE3C,IAAMV,EAAEqD,EAAE3C,IAFgC,CAIpD,OAAO9D,CACT,CAg8TiFic,CAAO5G,EAAI,CAAC,QACvFuuN,EAAS3jN,GAAqB,OAAQyjN,GAC1Cr3L,GAAMu3L,EAAQtW,MACd/2I,GAAMqtJ,EAAQ,GAAKpW,KAAoBnqL,GACvCkzC,GAAMqtJ,EAAQ,GAAKrW,KAAkBG,GACrC,IAAIxtF,EAAKyjG,EAAStgM,EAAKr4B,GAAOixJ,EAAK/7B,EAAGh3F,WAAYA,OAAoB,IAAP+yH,EAAgB,CAAC,EAAIA,EAAItjB,EAAKzY,EAAG9sH,QAASA,OAAiB,IAAPulI,EAAgB,GAAKA,EAGxI,OAFA3uH,GAAS45M,EAAQ16L,GApnFT,SAAUxwB,EAAStF,GAC3BumL,EAAOvmL,GAAS,SAAUnT,GACxBosC,GAAM3zB,EAASzY,EACjB,GACF,CAinFEb,CAAIwkO,EAAQxwN,GACLwwN,CACT,EACIC,GAAW,SAAUj/N,EAAQ6C,EAAKimN,EAAgBiW,EAAU34N,GAC9D,IAAI84N,EAAc,GACdF,EAASH,GAAe7+N,EAAOqiF,SAAUj8E,EAAM0iN,EAAgBiW,GAC/DnzM,EAAUzwB,KACVgkO,EAAgB,WAClBvzM,EAAQywB,OACV,EASI+iL,EAAkB,SAAUtiG,GAC9Bi4D,EAAOj4D,EAAOuiG,EAChB,EACIA,EAAiB,SAAUtyN,GAE7B,OAvDU,SAAU/M,EAAQ+M,EAAMuyN,EAAU98N,GAC9C,OAAOkhB,GAAO3W,GAAMpQ,MAAK,WACvB,MAAO,UACT,IAAG,SAAU+mB,GACX,MAAiB,OAAblhB,GAPU,SAAUuK,GAC1B,OAAO6rL,GAAS7rL,IAASsoD,GAAMtoD,KAAU2zL,EAC3C,CAK6B6+B,CAAYxyN,GAC5B,QA5uFM,SAAUA,GAC3B,OAAO4rL,GAAY5rL,IAAS9K,GAAI8K,EAAM27M,KACxC,CA2uFe8W,CAAazyN,GACf,WACEmrN,GAAYnrN,EAAKhI,KACnB,QACGo2F,GAAQn7F,EAAQs/N,EAAU98N,IAAc24F,GAAQn7F,EAAQtE,GAAKgoB,GAAS47M,GAGzE,QAFA,eAIX,GACF,CAsCcn7I,CAAQnkF,EAAQ+M,EAAM,OAAQrR,GAAKqR,KAE7C,IAAK,gBACDoyN,IACA,IAAItzM,EAAajI,GAAS7W,GAC1BqyN,EAAgBvzM,GAChBszM,IACA,MAEJ,IAAK,SAxlSI,SAAUrrN,EAAS8X,GAC9B2tK,GAASzlL,EAAS8X,GAClBL,GAASK,EAAS9X,EACpB,CAulSQ2rN,CAAO1yN,EAtBJ6e,EAAQ3E,MAAMhqB,YAAW,WAC9B,IAAI4f,EAAK0jB,GAAQy+L,GAGjB,OAFAE,EAAYpgO,KAAK+d,GACjB+O,EAAQtE,IAAIzK,GACLA,CACT,KAqBF,EASA,OAJAigN,GAAO98N,EAAO+E,IAAKlC,GAAK,SAAUu4L,GAChC+jC,IALiB,SAAU/jC,GAC3B,IAAIt+D,EAAQg4D,EAAMsG,EAAO//K,IACzB+jN,EAAgBtiG,EAClB,CAGE4iG,CAAatkC,EACf,IACO8jC,CACT,EAwBIS,GAAY,SAAU3/N,GACxB,IAxtFI4/N,EAwtFA3sN,GAxtFA2sN,EAAc,CAAC,EAYZ,CACLjqN,SAZa,SAAUja,EAAM+M,GAC7Bm3N,EAAYlkO,GAAQ,CAClBA,KAAMA,EACN+M,SAAUA,EAEd,EAQEmrD,OAPW,SAAUl4D,GACrB,OAAOowB,GAAM8zM,EAAalkO,GAAMiC,KAAI,SAAU3B,GAC5C,OAAOA,EAAEyM,QACX,GACF,KA7BY,SAAUzI,EAAQiT,GAI9BjT,EAAOmS,GAAG,QAAQ,WAChBnS,EAAO6/N,WAAWC,cAAc,QAAQ,SAAUC,GAChDhrC,EAAOgrC,GAAO,SAAU31F,IALH,SAAUA,GACjC,OAAO3rI,EAASC,KAAK0rI,EAAKvjG,KAAK8hL,OAAmB9qN,KAAKoV,EAAS2gD,OAClE,EAIMosK,CAAmB51F,GAAMxsI,MAAK,SAAU6K,IACV,IAAxBA,EAASw3N,YACX71F,EAAKz+G,QAET,GACF,GACF,GACF,GACF,CA4tFEu0M,CAAQlgO,EAAQiT,GAChB,IAAIy7J,EA9zFQ,SAAU1uK,EAAQmgO,GAC9B,IAAIC,EAAkBhoM,GAAK,CAAC,GACxBolE,EAAW,WACb,MAAO,CACLuJ,UAAW,GACXouE,SAAUh6K,KAEd,EACIklO,EAAgB,SAAU3kO,EAAM6C,GAClC+hO,EAAgB5kO,GAAM,SAAU0K,GAE9B,OADA7H,EAAE6H,GACKA,CACT,GACF,EACIk6N,EAAkB,SAAU5kO,EAAM6C,GACpC,IAAIgiO,EAAcH,EAAgBn5M,MAE9Bu5M,EAAajiO,EADNutB,GAAMy0M,EAAa7kO,GAAMuB,WAAWugG,IAE/C+iI,EAAY7kO,GAAQ8kO,EACpBJ,EAAgB94M,IAAIi5M,EACtB,EAoBIE,EAAe91K,IAAK,WACtB,IAAI41K,EAAcH,EAAgBn5M,MAC9B24M,EAAcp7N,GAAKxC,GAAKu+N,IAC5BxrC,EAAO6qC,GAAa,SAAUlkO,GAC5B4kO,EAAgB5kO,GAAM,SAAU0K,GAC9B,IAAI86I,EAAO96I,EAAK+uK,SAASluJ,MAazB,OAZA4hM,GAAS7oN,EAAQvB,EAASN,KAAKzC,IAAOiB,MAAK,WACrCukJ,EAAKpkJ,WAdM,SAAUpB,GAC/B2kO,EAAc3kO,GAAM,SAAU0K,GAC5B2uL,EAAO3uL,EAAK2gG,WAAW,SAAUxoG,GAC/B,OAAOA,GAAE,EAAO7C,EAClB,GACF,GACF,CASUglO,CAAiBhlO,GACjB0K,EAAK+uK,SAAS94H,QAElB,IAAG,SAAU5rC,GACX,IAAIguB,EAAMhuB,EAAGguB,IAAK/iC,EAAO+U,EAAG/U,KAAM0H,EAAWqN,EAAGrN,SAC3CgX,GAAK8mI,EAAMziH,KAhCJ,SAAU/iC,EAAM+iC,EAAKr7B,GACvCi9N,EAAc3kO,GAAM,SAAU0K,GAC5B2uL,EAAO3uL,EAAK2gG,WAAW,SAAUxoG,GAC/B,OAAOA,GAAE,EAAM7C,EAAM,CACnB+iC,IAAKA,EACL28J,MAAOtG,EAAM1xL,GAAU,SAAU2J,GAC/B,OAAOA,EAAKhI,GACd,KAEJ,GACF,GACF,CAsBU47N,CAAcjlO,EAAM+iC,EAAKr7B,GACzBgD,EAAK+uK,SAAS7tJ,IAAImX,GAEtB,IACO,CACL02I,SAAU/uK,EAAK+uK,SACfpuE,UAAW3gG,EAAK2gG,UAEpB,GACF,GACF,GAAG,IAeH,OAdA/mG,EAAOmS,GAAG,UAAU,WAClBsuN,EAAa9+I,QACf,IACA3hF,EAAOmS,GAAG,cAAc,WACtBsuN,EAAa7+I,UACf,IASO,CAAEg/I,YARS,SAAUllO,EAAM6C,GAChC+hO,EAAgB5kO,GAAM,SAAU0K,GAC9B,MAAO,CACL+uK,SAAU/uK,EAAK+uK,SACfpuE,UAAW3gG,EAAK2gG,UAAU1iG,OAAO,CAAC9F,IAEtC,GACF,EAEF,CA8uFgBsiO,CAAQ7gO,GACtB,MAAO,CACL2V,SAAU,SAAUja,EAAM+M,GACxBwK,EAAS0C,SAASja,EAAM+M,EAC1B,EACAw2N,SAAU,SAAUvjO,EAAM0K,GACxB6M,EAAS2gD,OAAOl4D,GAAMkC,MAAK,SAAU6K,IAhChB,SAAUzI,EAAQtE,EAAM+M,EAAUrC,GAC3DpG,EAAO+G,YAAYC,UAAS,WAC1B,IAAIpC,EAAY5E,EAAO4E,UACnBk8N,EAAal8N,EAAUmB,SACvBg7N,EAAmBjD,GAAmB99N,GAAQZ,OAAS,EAI3D,GAHI0hO,EAAW/9N,YAAcg+N,GAnEb,SAAU/gO,EAAQ6C,GACpC,IAAI5D,EAAI29N,GAAU58N,EAAQ6C,EAAK,CAAC,CAAEsrF,OAAQ,UAC1CtrF,EAAIklD,SAAS9oD,EAAEkK,eAAgBlK,EAAEupD,aACjC3lD,EAAIqlD,OAAOjpD,EAAEqK,aAAcrK,EAAEwpD,WAC7BzoD,EAAO4E,UAAU6E,OAAO5G,EAC1B,CA+DMm+N,CAAchhO,EAAQ8gO,GAEpBl8N,EAAUmB,SAAShD,YAAcg+N,EAAkB,CACrD,IAAIn1M,EAAUizM,GAAe7+N,EAAOqiF,SAAUj8E,EAAM1K,EAAM+M,EAASs2N,UACnEz3M,GAAIsE,EAAS60K,IACb77L,EAAUmB,SAASw8E,WAAW32D,EAAQ7mB,KACtCH,EAAUI,OAAO4mB,EAAQ7mB,IAC3B,MACEo5E,GAASv5E,GAAW,GAAO,WACzB45N,GAAYx+N,GAAQ,SAAUihO,GAC5BhC,GAASj/N,EAAQihO,EAAcvlO,EAAM+M,EAASs2N,SAAU34N,EAC1D,GACF,GAEJ,GACF,CAYQ86N,CAAqBlhO,EAAQtE,EAAM+M,EAAUrC,EAC/C,GACF,EACA+6N,kBAAmB,SAAUzlO,EAAM6R,GACjCmhK,EAAQkyD,YAAYllO,EAAM6R,EAC5B,EACArD,OAAQ,SAAUxO,GAChBmtN,GAAS7oN,EAAQvB,EAASN,KAAKzC,IAAOkC,MAAK,SAAU6S,GACnD,IAAIrN,EAAWqN,EAAGrN,SAClB2xL,EAAO3xL,EAAUuoB,GACnB,GACF,EACAw0E,OAAQ,SAAUzkG,GAChB,IAAIw6E,EA91FI,SAAUl2E,EAAQtE,GAC9B,IAAI2U,EAAOgL,GAAqBrb,EAAOoJ,WACnCyrE,EAAUtrB,GAAYl5C,EAAM,IAAMs4M,KAAmB,KAAOjtN,EAAO,MACnEw6E,EAAY,CAAC,EAMjB,OALA6+G,EAAOlgH,GAAS,SAAUyhB,GACxB,IAAI73D,EAAM8I,GAAM+uD,EAAGsyH,MACfwY,EAAet1M,GAAMoqD,EAAWz3C,GAAKzhC,MAAM,IAC/Ck5E,EAAUz3C,GAAO2iM,EAAa/8N,OAAO,CAACiyF,GACxC,IACOpgB,CACT,CAo1FsBmrJ,CAAQrhO,EAAQtE,GAChC,OAAO0c,GAAM89D,GAAW,SAAU4mD,GAChC,OAAOg4D,EAAMh4D,GAAO,SAAU/vH,GAC5B,OAAOA,EAAKhI,GACd,GACF,GACF,EAEJ,EAEIu8N,GAAkB,SAAU18N,GAC9B,MAAO,CACLoE,YAAa6N,EAAMiiN,GAAel0N,GAClC8E,eAAgBmN,EAAMnN,GAAgB9E,GAE1C,EACA08N,GAAgBhG,eAAiBxB,GAEjC,IAAIyH,GAA2B,SAAU5qL,EAAM9tC,GAC7C,KAAOA,GAAQA,IAAS8tC,GAAM,CAC5B,GAAImkJ,GAAwBjyL,IAASkyL,GAAyBlyL,GAC5D,OAAOA,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,IACT,EAEIw3N,GAAkB,SAAUn3M,EAASC,EAASq9B,GAChD,GAAIA,EAAM5kD,UACR,OAAO,EAET,GAAI2zL,GAAIh2K,QAAQ5B,QAAU6oC,EAAMa,cAAgBb,EAAMc,UAAY,GAAKd,EAAMx+C,iBAAmBw+C,EAAMr+C,aAAc,CAClH,IAAI/G,EAAMolD,EAAMx+C,eAAewS,WAAWgsC,EAAMa,aAChD,GAAIuxI,GAAYx3L,GACd,OAAOzE,EAAOyE,EAAIioD,kBAAkB,SAAUzS,GAC5C,OAAOmyK,GAAWnyK,EAAM1tB,EAASC,EACnC,GAEJ,CACA,OAAOxsB,EAAO6pD,EAAM6C,kBAAkB,SAAUzS,GAC9C,OAAOmyK,GAAWnyK,EAAM1tB,EAASC,EACnC,GACF,EA6CIm3M,GAAY,SAAUzhO,EAAQ0hO,EAAW5zN,GAC3C,OAAO9N,EAAOyV,KAAKisN,EAAW5zN,EAChC,EACI6zN,GAAkB,SAAU3hO,EAAQuF,EAAQsD,EAAMgyN,GACpD,OAAO76N,EAAOyV,KAAK,cAAe,CAChClQ,OAAQA,EACRsD,KAAMA,EACNgyN,KAAMA,GAEV,EACI+G,GAAmB,SAAU5hO,EAAQuF,EAAQsD,EAAMgyN,GACrD,OAAO76N,EAAOyV,KAAK,eAAgB,CACjClQ,OAAQA,EACRsD,KAAMA,EACNgyN,KAAMA,GAEV,EAEIgH,GAAK,CACPnhK,UAAW,EACXohK,OAAQ,GACR5gK,KAAM,GACNN,MAAO,GACPmhK,IAAK,GACLhhK,KAAM,GACNE,MAAO,GACP27D,SAAU,GACVj8D,IAAK,EACLK,GAAI,GACJghK,QAAS,GACTC,UAAW,GACXC,IAAK,GACLC,KAAM,GACNC,gBAAiB,SAAUrvN,GACzB,OAAOA,EAAEmC,UAAYnC,EAAEoC,SAAWpC,EAAEkC,QAAU4sN,GAAG/sN,eAAe/B,EAClE,EACA+B,eAAgB,SAAU/B,GACxB,OAAO2jL,GAAI/lG,IAAM59E,EAAEqC,QAAUrC,EAAEoC,UAAYpC,EAAEkC,MAC/C,GAGEotN,GAA2BtnC,GAC3BunC,GAAmB,SAAU19N,EAAW5E,GAC1C,IAEI2E,EAAa49N,EAAkBC,EAAcC,EAAgBC,EAC7DjnG,EAAQC,EAAoCinG,EAAQC,EAAQC,EAAOC,EACnE52M,EAAOrE,EAGPk7M,EAAkBC,EAPlBC,EAAuB,oBACvBl+N,EAAM/E,EAAO+E,IAAKnH,EAAO9C,GAAM8C,KAI/BslO,EAAcljO,EAAOqiF,SAAU8gJ,EAAe7xN,SAC9Co5E,EAAM99D,KAAK89D,IAAK/sC,EAAQ/wB,KAAK+wB,MAAOolJ,EAAc/iM,EAAOoJ,UAEzDg6N,EAAgB,CAClBC,GAAI,CACF,EACA,GACC,GACA,GAEHC,GAAI,CACF,EACA,EACA,GACC,GAEH7mI,GAAI,CACF,EACA,EACA,EACA,GAEF8mI,GAAI,CACF,EACA,GACC,EACD,IAGAC,EAAU,SAAUjhO,GACtB,OAAOA,IAAyB,QAAjBA,EAAIC,UAAsBxC,EAAO+E,IAAIvF,GAAG+C,EAAK,gBAC9D,EACIyxN,EAAU,SAAUzxN,GACtB,OAAO04L,GAAU14L,IAAQwC,EAAIi4M,SAASz6M,EAAK,qBAC7C,EASIkhO,EAAyB,SAAUjyN,GACrC,IAAIhL,EAASgL,EAAIhL,QATc,SAAUgL,EAAKm2C,GAC9C,GAAiB,cAAbn2C,EAAItW,MAAsD,IAA9BsW,EAAItW,KAAK0D,QAAQ,SAAgB,CAC/D,IAAIskG,EAAQ1xF,EAAIkxF,QAAQ,GACxB,OAAO8gI,EAAQhyN,EAAIhL,UAAYg7N,GAAgBt+H,EAAM74E,QAAS64E,EAAM54E,QAASq9B,EAC/E,CACE,OAAO67K,EAAQhyN,EAAIhL,UAAYg7N,GAAgBhwN,EAAI6Y,QAAS7Y,EAAI8Y,QAASq9B,EAE7E,EAGM+7K,CAA2BlyN,EAAKxR,EAAO4E,UAAUmB,YAAcyL,EAAIunK,sBACrE/4K,EAAO4E,UAAUI,OAAOwB,EAE5B,EACIm9N,EAAmB,SAAUphO,GAC/B,OAAIwC,EAAIvF,GAAG+C,EAAK,gBACP,CAACA,EAAIoqC,cAAc,QACjB5nC,EAAIi4M,SAASz6M,EAAK,uBAAyB4T,EAAc5T,EAAIqhO,mBAC/D,CACLrhO,EACAA,EAAIqhO,mBAGC,CAACrhO,EAEZ,EACIshO,EAAc,SAAUthO,GAC1B,IAAI2f,EAAW4uM,GAAkB9wN,GACjC,QAAKkiB,GAGuC,UAAxC3f,EAAImB,aAAa,oBAGjBnB,IAAQvC,EAAOoJ,YAGfrE,EAAIi4M,SAASz6M,EAAK,sBACbm2L,GAAKr9K,GAAqB9Y,EAAIqhO,mBAAoB1hN,GAElDw2K,GAAKr9K,GAAqB9Y,GAAM2f,GAE3C,EAQI4hN,EAAc,SAAUhwN,EAASpY,EAAMP,GACzC,GAAIgb,EAAchb,GAAQ,CACxB,IAAIoT,EAAUo1N,EAAiB7vN,GAC/BihL,EAAOxmL,GAAS,SAAU/H,GACpBA,EAAO0U,MAAMxf,KAAUsE,EAAO6F,OAAOs1F,QAAQ30F,EAAOhE,SAASC,cAAe/G,GAC9EqJ,EAAI09M,SAASj8M,EAAQ9K,EAAMP,GAE3B4J,EAAIu7M,UAAU95M,EAAQ9K,EAAM,GAAKP,EAErC,GACF,CACF,EACI4oO,EAAkB,SAAUC,EAAU93M,EAAOrE,GAC/Ci8M,EAAYE,EAAU,QAAS93M,GAC/B43M,EAAYE,EAAU,SAAUn8M,EAClC,EACIo8M,EAAqB,SAAUlxN,GACjC,IAAIgnH,EAAQC,EAAQkqG,EAChBC,EAAeC,EACnBrqG,EAAShnH,EAAEqpH,QAAUX,EACrBzB,EAASjnH,EAAEspH,QAAUX,EACrBxvG,EAAQ6tG,EAAS0oG,EAAe,GAAKE,EACrC96M,EAASmyG,EAASyoG,EAAe,GAAKG,EACtC12M,EAAQA,EAAQ,EAAI,EAAIA,EACxBrE,EAASA,EAAS,EAAI,EAAIA,EAExBq8M,GADGV,EAAQ7+N,IAAgBqvN,EAAQrvN,MAAsD,IAp/DhE,SAAU3E,GACvC,OAAOA,EAAOE,SAAS,2BAA2B,EAAM,UAC1D,CAk/D0DmkO,CAAyBrkO,IAC7D6hO,GAAGO,gBAAgBrvN,GAEpB8uN,GAAGO,gBAAgBrvN,GAEhCmxN,IACEx5I,EAAIqvC,GAAUrvC,EAAIsvC,IACpBnyG,EAAS81B,EAAMzxB,EAAQ22M,GACvB32M,EAAQyxB,EAAM91B,EAASg7M,KAEvB32M,EAAQyxB,EAAM91B,EAASg7M,GACvBh7M,EAAS81B,EAAMzxB,EAAQ22M,KAG3BkB,EAAgBxB,EAAkBr2M,EAAOrE,GAGzCs8M,GAFAA,EAAgB1B,EAAe9L,SAASt7N,EAAI0+H,GAEZ,EAAIoqG,EAAgB,EACpDC,GAFAA,EAAgB3B,EAAe9L,SAASvuM,EAAI4xG,GAEZ,EAAIoqG,EAAgB,EACpDr/N,EAAI49M,UAAU6f,EAAc,CAC1B5iO,KAAMukO,EACNj8M,IAAKk8M,EACLziI,QAAS,UAEX6gI,EAAa/mN,UAAYyQ,EAAQ,YAAcrE,EAC3C46M,EAAe,GAAK,GAAKF,EAAiB91M,aAAeP,GAC3DnnB,EAAI09M,SAAS8f,EAAkB,YA1If+B,GA0IuC3B,EAASz2M,IAE9Du2M,EAAe,GAAK,GAAKF,EAAiB71M,cAAgB7E,GAC5D9iB,EAAI09M,SAAS8f,EAAkB,WA7IDgC,GA6IwB3B,EAAS/6M,KAEjEkyG,EAASgpE,EAAY9mE,YAAc8mG,IACnC/oG,EAAS+oE,EAAY7mE,aAAe8mG,IACZ,GACtBj+N,EAAI49M,UAAU6f,EAAc,CAC1B5iO,KAAMukO,EAAgBpqG,EACtB7xG,IAAKk8M,EAAgBpqG,IAGpB8oG,IAjOmB,SAAU9iO,EAAQwG,EAAQ0lB,EAAOrE,EAAQwwB,GACnEr4C,EAAOyV,KAAK,oBAAqB,CAC/BjP,OAAQA,EACR0lB,MAAOA,EACPrE,OAAQA,EACRwwB,OAAQA,GAEZ,CA2NMmsL,CAAsBxkO,EAAQ2E,EAAag+N,EAAQC,EAAQ,UAAYH,EAAe/mO,MACtFonO,GAAgB,EAEpB,EACI2B,EAAiB,WACnB,IAAIC,EAAmB5B,EACvBA,GAAgB,EACZ4B,IACFZ,EAAYn/N,EAAa,QAASunB,GAClC43M,EAAYn/N,EAAa,SAAUkjB,IAErC9iB,EAAI8lB,OAAOq4M,EAAa,YAAae,GACrCl/N,EAAI8lB,OAAOq4M,EAAa,UAAWuB,GAC/BtB,IAAiBD,IACnBn+N,EAAI8lB,OAAOs4M,EAAc,YAAac,GACtCl/N,EAAI8lB,OAAOs4M,EAAc,UAAWsB,IAEtC1/N,EAAImF,OAAOq4N,GACXx9N,EAAImF,OAAOs4N,GACXz9N,EAAImF,OAAOw4N,GACXiC,EAAehgO,GACX+/N,IA/OgB,SAAU1kO,EAAQwG,EAAQ0lB,EAAOrE,EAAQwwB,GAC/Dr4C,EAAOyV,KAAK,gBAAiB,CAC3BjP,OAAQA,EACR0lB,MAAOA,EACPrE,OAAQA,EACRwwB,OAAQA,GAEZ,CAyOMusL,CAAkB5kO,EAAQ2E,EAAaunB,EAAOrE,EAAQ,UAAY46M,EAAe/mO,MACjFqJ,EAAIu7M,UAAU37M,EAAa,QAASI,EAAIiI,UAAUrI,EAAa,WAEjE3E,EAAOu/J,aACT,EACIolE,EAAiB,SAAU19E,GAC7B49E,IACA,IAAIz2M,EAAWrpB,EAAIsmK,OAAOpkB,EAAW87C,GACjCuhC,EAAel2M,EAAS/yB,EACxBkpO,EAAen2M,EAAShG,EACxB2vB,EAAOkvG,EAAUr/H,wBACjBk9M,EAAc/sL,EAAK7rB,OAAS6rB,EAAK5rB,MAAQ4rB,EAAKn4C,KAC9CmlO,EAAehtL,EAAKlwB,QAAUkwB,EAAK3rB,OAAS2rB,EAAK7vB,IACjDvjB,IAAgBsiJ,IAClB+9E,IACArgO,EAAcsiJ,EACd/6H,EAAQrE,EAAS,GAEnB,IAAI9U,EAAI/S,EAAOyV,KAAK,iBAAkB,CAAEjP,OAAQygJ,IAC5CrlB,EAAgB78H,EAAIiI,UAAUrI,EAAas+N,EAAsB,KACjEY,EAAY58E,KAAel0I,EAAEgmK,qBAC/Bn7K,EAAKwlO,GAAe,SAAUz4M,EAAQjvB,GACpC,IAAI0/H,GAkDJA,EAAYr2H,EAAIkiB,IAAI,kBAAoBvrB,KAEtCqJ,EAAImF,OAAOkxH,GAEbA,EAAYr2H,EAAIvK,IAAIuoM,EAAa,MAAO,CACtC,GAAM,kBAAoBrnM,EAC1B,iBAAkB,MAClB,MAAS,mBACT,cAAgB,EAChB,MAAS,UAAYA,EAAO,iCAEf,KAAXg7L,GAAIC,KACNv7D,EAAUmZ,iBAAkB,GAE9BxvI,EAAIlH,KAAKu9H,EAAW,aAAa,SAAUroH,GACzCA,EAAEmvF,2BACFnvF,EAAEgC,iBAjEY,SAAUhC,GACxB,IAtH2BxQ,EAsHvBiE,EAASm9N,EAAiBh/N,GAAa,GAC3C82H,EAAS1oH,EAAEqpH,QACXV,EAAS3oH,EAAEspH,QACXsmG,EAASn8N,EAAOimB,YAChBm2M,EAASp8N,EAAOkmB,aAChBm2M,EAAQD,EAASD,GACjBF,EAAiB93M,GACFjvB,KAAOA,EACtB+mO,EAAe9L,SAAW,CACxBt7N,EAAGypO,EAAcn6M,EAAO,GAAK25M,EAC7Bl8M,EAAG28M,EAAep6M,EAAO,GAAK45M,GAEhCxB,EAAmBhgC,EAAY9mE,YAC/B+mG,EAAoBjgC,EAAY7mE,aAChCwmG,EAAiB39N,EAAIvK,IAAIuoM,EAAa,MAAO,CAC3C,MAAS,sBACT,iBAAkB,QAEpBh+L,EAAI49M,UAAU+f,EAAgB,CAC5Bt0M,SAAU,QACVxuB,KAAM,IACNsoB,IAAK,IACLgE,MAAO,OACPrE,OAAQ,SAEV06M,EA9IFvO,EAD6BzxN,EA+IWoC,GA7InCI,EAAIqF,OAAO,MAAO,CAAE6pF,IAAKyiG,GAAII,iBAE7Bv0L,EAAI69B,WAAU,GA4IjBr7B,EAAI45J,SAAS4jE,EAAkB,uBAC/Bx9N,EAAIu7M,UAAUiiB,EAAkB,iBAAkB,OAClDA,EAAiBhuF,gBAAkB,QACnCxvI,EAAI49M,UAAU4f,EAAkB,CAC9B3iO,KAAM0kO,EACNp8M,IAAKq8M,EACLn6I,OAAQ,IAEV25I,EAAgBxB,EAAkBuC,EAAaC,GAC/CxC,EAAiB78M,gBAAgBu9M,GACjClgC,EAAY14L,YAAYk4N,GACxBx9N,EAAIlH,KAAKqlO,EAAa,YAAae,GACnCl/N,EAAIlH,KAAKqlO,EAAa,UAAWuB,GAC7BtB,IAAiBD,IACnBn+N,EAAIlH,KAAKslO,EAAc,YAAac,GACpCl/N,EAAIlH,KAAKslO,EAAc,UAAWsB,IAEpCjC,EAAez9N,EAAIvK,IAAIuoM,EAAa,MAAO,CACzC,MAAS,oBACT,iBAAkB,OACjB4/B,EAAS,YAAcC,EAC5B,CAkBEqC,CAAUlyN,EACZ,IACA4X,EAAOpoB,IAAM64H,EACbr2H,EAAI49M,UAAUvnF,EAAW,CACvBx7H,KAAMklO,EAAcn6M,EAAO,GAAK25M,EAAelpG,EAAUt0G,YAAc,EACvEoB,IAAK68M,EAAep6M,EAAO,GAAK45M,EAAenpG,EAAUtzG,aAAe,GAE5E,IAEAk9M,IAEGjgO,EAAIiI,UAAUrI,EAAas+N,IAC9Bt+N,EAAYugB,aAAa+9M,EAAsBrhG,EAEnD,EACIojG,EAAiB,WACnBH,IACIlgO,GACFA,EAAY+gB,gBAAgBu9M,GAE9B7tC,GAAOguC,GAAe,SAAUjoO,EAAOO,GACrC,IAAI0/H,EAAYr2H,EAAIkiB,IAAI,kBAAoBvrB,GACxC0/H,IACFr2H,EAAI8lB,OAAOuwG,GACXr2H,EAAImF,OAAOkxH,GAEf,GACF,EACI8pG,EAAmB,SAAUnyN,GAC/B,IAAcoyN,EACVC,EAAiB,SAAUv8N,EAAM6a,GACnC,GAAI7a,EACF,GACE,GAAIA,IAAS6a,EACX,OAAO,QAEF7a,EAAOA,EAAKmB,WAEzB,EACI84N,GAAiB9iO,EAAO49H,UAG5BhgI,EAAKmH,EAAIC,OAAO,iDAAiD,SAAU8E,GACzEA,EAAI4b,gBAAgBu9M,EACtB,IACAkC,EAAwB,cAAXpyN,EAAE7X,KAAuB6X,EAAEvM,OAAS5B,EAAUC,UAEvDugO,EADJD,EAAapgO,EAAIqM,EAAE+zN,GAAY/iI,QAAQ,2DAA2D,GACnE2gG,KAC7BsiC,IAEID,EADOxgO,EAAUqM,UAAS,GACDk0N,IAAeC,EAAexgO,EAAU+9E,QAAO,GAAOwiJ,IACjFR,EAAeQ,GAInBH,IACF,EACIM,EAA+B,SAAU/iO,GAC3C,OAAO8/N,GAAyBd,GAAyBvhO,EAAOoJ,UAAW7G,GAC7E,EACIsiO,EAA2B,WAC7BzvC,GAAOguC,GAAe,SAAUz4M,GAC1BA,EAAOpoB,MACTwC,EAAI8lB,OAAOF,EAAOpoB,YACXooB,EAAOpoB,IAElB,GACF,EACI8iO,EAAqB,WACvB,IACErlO,EAAOqiF,SAAS/6E,YAAY,wBAAwB,EAAO,QAE7D,CADE,MAAOkkG,GACT,CACF,EAwDA,OAvDAxrG,EAAOmS,GAAG,QAAQ,WAEhB,GADAkzN,IACI3uC,GAAIh2K,QAAQ5B,QAAU43K,GAAIh2K,QAAQ9B,SAAU,CAC9C5e,EAAOmS,GAAG,mBAAmB,SAAUY,GACrC,IAAIvM,EAASuM,EAAEvM,OAAQhE,EAAWgE,EAAOhE,SACpCsgO,IAAiB,mBAAmBr/N,KAAKjB,IAAc8iO,EAA6B9+N,KACtE,IAAbuM,EAAEsiH,QACJr1H,EAAO4E,UAAUI,OAAOwB,EAAqB,UAAbhE,GAEnB,cAAXuQ,EAAE7X,MACJ8E,EAAOu/J,cAGb,IACA,IAAIgmE,EAA0B,SAAUxyN,GACtC,IAAIyyN,EAAgB,SAAU38N,GAC5Bk0L,GAAMztL,iBAAiBtP,GAAQ,WAC7B,OAAOA,EAAO4E,UAAUI,OAAO6D,EACjC,GACF,EACA,GAAIy8N,EAA6BvyN,EAAEvM,SAAWy0L,GAAUloL,EAAEvM,QAGxD,OAFAuM,EAAEgC,sBACFywN,EAAczyN,EAAEvM,QAGd,mBAAmB/C,KAAKsP,EAAEvM,OAAOhE,YACnCuQ,EAAEgC,iBACuB,QAArBhC,EAAEvM,OAAO+zL,SACXirC,EAAczyN,EAAEvM,QAGtB,EACAzB,EAAIlH,KAAKklM,EAAa,kBAAmBwiC,GACzCvlO,EAAOmS,GAAG,UAAU,WAClB,OAAOpN,EAAI8lB,OAAOk4K,EAAa,kBAAmBwiC,EACpD,GACF,CACA,IAAIE,EAA4B1oC,GAAMn7G,UAAS,SAAU7uE,GAClD/S,EAAO0lO,WACVR,EAAiBnyN,EAErB,IACA/S,EAAOmS,GAAG,0DAA2DszN,GACrEzlO,EAAOmS,GAAG,wBAAwB,SAAUY,GACtCpO,GAAwC,UAAzBA,EAAYnC,UAC7BijO,EAA0B1yN,EAE9B,IACA/S,EAAOmS,GAAG,YAAa6yN,GACvBhlO,EAAOmS,GAAG,wBAAyBsxN,GAAwB,EAC7D,IACAzjO,EAAOmS,GAAG,SAAU0yN,GAIb,CACLhB,YAAaA,EACbc,eAAgBA,EAChBK,eAAgBA,EAChBE,iBAAkBA,EAClB1oL,QARY,WACZ73C,EAAc49N,EAAmBG,EAAiB,IACpD,EAQF,EAEIiD,GAAgB,SAAU98N,GAC5B,OAAOiyL,GAAwBjyL,IAASkyL,GAAyBlyL,EACnE,EAuCI+8N,GAAY,SAAUv7M,EAASC,EAAStF,GAC1C,IAAIniB,EAAK+hD,EACLihL,EAAW7gN,EACf,GAAI6gN,EAASC,wBACXlhL,EAAQihL,EAASC,uBAAuBz7M,EAASC,OAE/CznB,EAAMmiB,EAAI8iC,eACNC,SAASnD,EAAMmhL,WAAYnhL,EAAM3gC,QACrCphB,EAAI6R,UAAS,SAEV,GAAImxN,EAASG,oBAClBnjO,EAAMgjO,EAASG,oBAAoB37M,EAASC,QACvC,GAAIu7M,EAASx1N,KAAK41N,gBAAiB,CACxCpjO,EAAMgjO,EAASx1N,KAAK41N,kBACpB,IACEpjO,EAAIqjO,YAAY77M,EAASC,GACzBznB,EAAI6R,UAAS,EAGf,CAFE,MAAO82F,GACP3oG,EA/CmB,SAAUwnB,EAASC,EAAStF,GACnD,IAAIulC,EACAz2C,EAAUkR,EAAImhN,iBAAiB97M,EAASC,GACxCznB,EAAMmiB,EAAI3U,KAAK41N,kBAWnB,GAVKnyN,GAA+B,SAApBA,EAAQymL,UACtBzmL,EAAUkR,EAAI3U,MAEhBxN,EAAIujO,kBAAkBtyN,IAEtBy2C,GADAA,EAAQzvD,GAAMmD,QAAQ4E,EAAI2nD,mBACZhmD,MAAK,SAAUxI,EAAGM,GAG9B,OAFAN,EAAI4wB,KAAK89D,IAAI99D,KAAKnF,IAAIzrB,EAAEksB,IAAMoC,EAAStuB,EAAEowB,OAAS9B,KAC9CsC,KAAK89D,IAAI99D,KAAKnF,IAAInrB,EAAE4rB,IAAMoC,EAAShuB,EAAE8vB,OAAS9B,GAEpD,KACUlrB,OAAS,EAAG,CACpBkrB,GAAWigC,EAAM,GAAGn+B,OAASm+B,EAAM,GAAGriC,KAAO,EAC7C,IAGE,OAFArlB,EAAIqjO,YAAY77M,EAASC,GACzBznB,EAAI6R,UAAS,GACN7R,CAET,CADE,MAAO2oG,GACT,CACF,CACA,OAAO,IACT,CAuBY66H,CAAmBh8M,EAASC,EAAStF,EAC7C,CACA,OAxBgC,SAAUniB,EAAKk/E,GACjD,IAAIukJ,EAAgBzjO,GAAOA,EAAIyjO,cAAgBzjO,EAAIyjO,gBAAkB,KACrE,OAAOvrC,GApCU,SAAUlyL,EAAMk5E,EAAUj/E,GAC3C,KAAO+F,GAAQA,IAASk5E,GAAU,CAChC,GAAIj/E,EAAU+F,GACZ,OAAOA,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,IACT,CA4BkCu8N,CAAaD,EAAevkJ,EAAU4jJ,KAAkB,KAAO9iO,CACjG,CAqBW2jO,CAA8B3jO,EAAKmiB,EAAI3U,KAChD,CACA,OAAOxN,CACT,EAEI4jO,GAAS,SAAUC,EAAMpX,GAC3B,OAAOoX,GAAQpX,GAASoX,EAAKv9N,iBAAmBmmN,EAAKnmN,gBAAkBu9N,EAAKl+K,cAAgB8mK,EAAK9mK,aAAiBk+K,EAAKp9N,eAAiBgmN,EAAKhmN,cAAgBo9N,EAAKj+K,YAAc6mK,EAAK7mK,SACvL,EAWIk+K,GAAc,SAAU99N,EAAMk5E,EAAUj/E,GAC1C,OAAiD,OAVlC,SAAU+F,EAAMk5E,EAAUj/E,GACzC,KAAO+F,GAAQA,IAASk5E,GAAU,CAChC,GAAIj/E,EAAU+F,GACZ,OAAOA,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,IACT,CAES48N,CAAW/9N,EAAMk5E,EAAUj/E,EACpC,EACI+jO,GAAoB,SAAUh+N,EAAMk5E,EAAUrmF,GAChD,OAAOirO,GAAY99N,EAAMk5E,GAAU,SAAUl5E,GAC3C,OAAOA,EAAKrG,WAAa9G,CAC3B,GACF,EACIorO,GAAU,SAAUj+N,GACtB,OAAOA,GAA0B,UAAlBA,EAAKrG,QACtB,EACIukO,GAAgB,SAAUl+N,GAC5B,OAAOA,GAAQ,oBAAoBpF,KAAKoF,EAAKrG,SAC/C,EACIwkO,GAA0B,SAAUn+N,EAAMk5E,GAC5C,OAAOk/G,GAAmBp4L,KAAsD,IAA7C89N,GAAY99N,EAAMk5E,EAAUm2I,GACjE,EACI+O,GAAmB,SAAUliO,EAAK8D,EAAMjJ,GAE1C,IADA,IAAIsD,EAAS,IAAIs8L,GAAc32L,EAAM9D,EAAIE,UAAU4D,EAAKmB,WAAYjF,EAAIi9E,UAAYj9E,EAAIo+E,WACjFt6E,EAAO3F,EAAOtD,EAAO,OAAS,WACnC,GAAIg7L,GAAO/xL,GACT,OAAO,CAGb,EAaIq+N,GAAuB,SAAUniO,EAAKoiO,EAAapkO,EAAWnD,EAAM6lK,GACtE,IAAI2hE,EAEAv+N,EADAwH,EAAOtL,EAAIo+E,UAEXwlH,EAAsB5jM,EAAIc,OAAOknM,sBACjCs6B,EAAuBtiO,EAAIE,UAAUwgK,EAAUz7J,WAAYjF,EAAIi9E,UAAY3xE,EAC/E,GAAIzQ,GAAQg7L,GAAOn1B,IAAc0hE,GAAepiO,EAAIk/M,QAAQojB,GAC1D,OAAO5oO,EAASN,KAAKmuN,GAAc7mD,EAAUz7J,WAAYjF,EAAIs1M,UAAU50C,KAGzE,IADA,IAAIviK,EAAS,IAAIs8L,GAAc/5B,EAAW4hE,GACnCx+N,EAAO3F,EAAOtD,EAAO,OAAS,WAAW,CAC9C,GAA2C,UAAvCmF,EAAIw/M,yBAAyB17M,IAAqBm+N,GAAwBn+N,EAAMwH,GAClF,OAAO5R,EAAShC,OAElB,GAAIg+L,GAAS5xL,IAASA,EAAKqgD,UAAU9pD,OAAS,EAC5C,OAA2C,IAAvCynO,GAAkBh+N,EAAMwH,EAAM,KACzB5R,EAASN,KAAKmuN,GAAczjN,EAAMjJ,EAAOiJ,EAAKqgD,UAAU9pD,OAAS,IAEnEX,EAAShC,OAElB,GAAIsI,EAAIi9E,QAAQn5E,IAAS8/L,EAAoB9/L,EAAKrG,SAASC,eACzD,OAAOhE,EAAShC,OAElB2qO,EAAoBv+N,CACtB,CACA,OAAI9F,GAAaqkO,EACR3oO,EAASN,KAAKmuN,GAAc8a,EAAmB,IAEjD3oO,EAAShC,MAClB,EACI6qO,GAAoB,SAAUviO,EAAKhC,EAAW4X,EAAO9X,GACvD,IAAIq9B,EAAWjc,EAEXpb,EACA0+N,EAFAl3N,EAAOtL,EAAIo+E,UAEIy8H,GAAa,EAChC1/K,EAAYr9B,GAAK8X,EAAQ,QAAU,OAAS,aAC5CsJ,EAASphB,GAAK8X,EAAQ,QAAU,OAAS,UACzC,IAAIwsN,EAAcptC,GAAY75J,IAAcjc,IAAWic,EAAUvkB,WAAWvc,OACxEupM,EAAsB5jM,EAAIc,OAAOknM,sBAErC,GADAw6B,EAAgB5sN,EACZsmL,GAAmB/gK,GACrB,OAAOzhC,EAAShC,OASlB,GAPIs9L,GAAY75J,IAAcjc,EAASic,EAAUvkB,WAAWvc,OAAS,IACnEmoO,GAAgB,GAEd5sC,GAAaz6J,KACfA,EAAY7vB,EACZ4T,EAAS,GAEPic,IAAc7vB,EAAM,CACtB,GAAIk3N,IACF1+N,EAAOq3B,EAAUvkB,WAAWsI,EAAS,EAAIA,EAAS,EAAI,IAC5C,CACR,GAAIg9K,GAAmBp4L,GACrB,OAAOpK,EAAShC,OAElB,GAAIksM,EAAoB9/L,EAAKrG,WAAaskO,GAAQj+N,GAChD,OAAOpK,EAAShC,MAEpB,CAEF,GAAIyjC,EAAUxkB,gBAAiB,CAI7B,GAHAuI,EAAS2I,KAAK6kB,KAAK81L,GAAiBtjN,EAAS,EAAIA,EAAS,EAAIA,EAAQic,EAAUvkB,WAAWvc,OAAS,GACpG8gC,EAAYA,EAAUvkB,WAAWsI,GACjCA,EAASw2K,GAASv6J,IAAcinM,EAAcjnM,EAAU95B,KAAKhH,OAAS,GACjE2D,GAAam9B,IAAc7vB,EAAK8oL,WAAa2tC,GAAQ5mM,GACxD,OAAOzhC,EAAShC,OAElB,GA9E8B,SAAU4T,EAAMxH,GAClD,KAAOA,GAAQA,IAASwH,GAAM,CAC5B,GAAI0qL,GAAyBlyL,GAC3B,OAAO,EAETA,EAAOA,EAAKmB,UACd,CACA,OAAO,CACT,CAsEUw9N,CAA8Bn3N,EAAM6vB,IAAc+gK,GAAmB/gK,GACvE,OAAOzhC,EAAShC,OAElB,GAAIyjC,EAAUxkB,kBAA0C,IAAvBorN,GAAQ5mM,GAAsB,CAC7Dr3B,EAAOq3B,EACP,IAAIh9B,EAAS,IAAIs8L,GAAct/J,EAAW7vB,GAC1C,EAAG,CACD,GAAI0qL,GAAyBlyL,IAASo4L,GAAmBp4L,GAAO,CAC9D+2M,GAAa,EACb,KACF,CACA,GAAInlB,GAAS5xL,IAASA,EAAKqgD,UAAU9pD,OAAS,EAAG,CAC/C6kB,EAASsjN,EAAgB,EAAI1+N,EAAKqgD,UAAU9pD,OAC5C8gC,EAAYr3B,EACZ+2M,GAAa,EACb,KACF,CACA,GAAIjX,EAAoB9/L,EAAKrG,SAASC,iBAAmBskO,GAAcl+N,GAAO,CAC5Eob,EAASlf,EAAIs1M,UAAUxxM,GACvBq3B,EAAYr3B,EAAKmB,WACZu9N,GACHtjN,IAEF27L,GAAa,EACb,KACF,CACF,OAAS/2M,EAAO0+N,EAAgBrkO,EAAOI,OAASJ,EAAOg+I,OACzD,CACF,CACF,CA8BA,OA7BIn+I,IACE03L,GAASv6J,IAAyB,IAAXjc,GACzBijN,GAAqBniO,EAAKoiO,EAAapkO,GAAW,EAAMm9B,GAAWtiC,MAAK,SAAU66C,GAChFvY,EAAYuY,EAAIvY,YAChBjc,EAASw0B,EAAIx0B,SACb27L,GAAa,CACf,IAEE7lB,GAAY75J,MACdr3B,EAAOq3B,EAAUvkB,WAAWsI,MAE1Bpb,EAAOq3B,EAAUvkB,WAAWsI,EAAS,KAEnCpb,IAAQ+xL,GAAO/xL,IA5HR,SAAUA,EAAMnN,GAC/B,OAAOmN,EAAKmwL,iBA2HsC,MA3HnBnwL,EAAKmwL,gBAAgBx2L,QACtD,CA0HmCilO,CAAW5+N,IAAeo+N,GAAiBliO,EAAK8D,GAAM,IAAWo+N,GAAiBliO,EAAK8D,GAAM,IACxHq+N,GAAqBniO,EAAKoiO,EAAapkO,GAAW,EAAM8F,GAAMjL,MAAK,SAAU66C,GAC3EvY,EAAYuY,EAAIvY,YAChBjc,EAASw0B,EAAIx0B,SACb27L,GAAa,CACf,MAIF2nB,IAAkBxkO,GAAa03L,GAASv6J,IAAcjc,IAAWic,EAAUgpB,UAAU9pD,QACvF8nO,GAAqBniO,EAAKoiO,EAAapkO,GAAW,EAAOm9B,GAAWtiC,MAAK,SAAU66C,GACjFvY,EAAYuY,EAAIvY,YAChBjc,EAASw0B,EAAIx0B,SACb27L,GAAa,CACf,IAEKA,EAAanhN,EAASN,KAAKmuN,GAAcpsL,EAAWjc,IAAWxlB,EAAShC,MACjF,EACIirO,GAAc,SAAU3iO,EAAKlC,GAC/B,IAAIE,EAAYF,EAAIE,UAAW4kO,EAAU9kO,EAAIoG,aACzC0tN,EAAWrK,GAAcQ,eAAejqN,GAc5C,OAbAykO,GAAkBviO,EAAKhC,GAAW,EAAM4kO,GAAS/pO,MAAK,SAAU66C,GACzD11C,GAAcupN,GAAcp1C,QAAQy/C,EAAUl+K,IACjDkvL,EAAQ5/K,SAAStP,EAAIvY,YAAauY,EAAIx0B,SAE1C,IACKlhB,GACHukO,GAAkBviO,EAAKhC,GAAW,EAAO4kO,GAAS/pO,MAAK,SAAU66C,GAC/DkvL,EAAQz/K,OAAOzP,EAAIvY,YAAauY,EAAIx0B,SACtC,IAEElhB,GACF4kO,EAAQjzN,UAAS,GAEZ+xN,GAAO5jO,EAAK8kO,GAAWlpO,EAAShC,OAASgC,EAASN,KAAKwpO,EAChE,EAEItU,GAAY,SAAUxqN,EAAMob,GAC9B,OAAOpb,EAAKwqN,UAAUpvM,EACxB,EACIjgB,GAAQ,SAAUnB,GACpB,IAAIsG,EAAiBtG,EAAIsG,eAAgBq/C,EAAc3lD,EAAI2lD,YAAal/C,EAAezG,EAAIyG,aAAcm/C,EAAY5lD,EAAI4lD,UAwBzH,OAvBIt/C,IAAmBG,GAAgBmxL,GAAStxL,GAC1Cq/C,EAAc,GAAKA,EAAcr/C,EAAe+/C,UAAU9pD,SAE5D+J,GADAG,EAAe+pN,GAAUlqN,EAAgBq/C,IACXwwI,gBAC1BvwI,EAAYD,GAEdr/C,EAAiBG,EAAe+pN,GAAU/pN,EAD1Cm/C,GAAwBD,GAC2CwwI,gBACnEvwI,EAAYn/C,EAAa4/C,UAAU9pD,OACnCopD,EAAc,GAEdC,EAAY,IAIZgyI,GAAStxL,IAAmBq/C,EAAc,GAAKA,EAAcr/C,EAAe+/C,UAAU9pD,SACxF+J,EAAiBkqN,GAAUlqN,EAAgBq/C,GAC3CA,EAAc,GAEZiyI,GAASnxL,IAAiBm/C,EAAY,GAAKA,EAAYn/C,EAAa4/C,UAAU9pD,SAEhFqpD,GADAn/C,EAAe+pN,GAAU/pN,EAAcm/C,GAAWuwI,iBACzB9vI,UAAU9pD,SAGhC,CACL+J,eAAgBA,EAChBq/C,YAAaA,EACbl/C,aAAcA,EACdm/C,UAAWA,EAEf,EAEIm/K,GAAa,SAAU7iO,GAYzB,MAAO,CACLuzL,KAZS,SAAUz1L,EAAK0K,GACxB,OAAOuvN,GAAO/3N,EAAKlC,EAAK0K,EAC1B,EAWEvJ,MAVYA,GAWZw+E,UAVc,SAAU3/E,GACxB,OAAO6kO,GAAY3iO,EAAKlC,GAAKlG,KAAKJ,GAAO,SAAUsrO,GAGjD,OAFAhlO,EAAIklD,SAAS8/K,EAAc1+N,eAAgB0+N,EAAcr/K,aACzD3lD,EAAIqlD,OAAO2/K,EAAcv+N,aAAcu+N,EAAcp/K,YAC9C,CACT,GACF,EAMF,EACAm/K,GAAWE,cAAgBrB,GAC3BmB,GAAWG,uBAAyBnC,GACpCgC,GAAWzd,gBAAkBA,GAC7Byd,GAAW/iO,QAAUulN,GAErB,IAqfI4d,GA7cA/4N,GAxCY,SAAUvT,EAAMsrB,GAC9B,IASIC,EAAM,SAAUnT,GAClB,IAAI7U,EA6BsB,SAAU6U,GACtC,IAAI/O,EAAM+O,EAAQ/O,IAClB,OAAO8f,GAAO/Q,GAAW/O,EAAI6iB,wBAAwBC,OAAS9iB,EAAI+iB,YACpE,CAhCYd,CAAUlT,GAClB,GAAI7U,GAAK,GAAW,OAANA,EAAY,CACxB,IAAIinB,EAAMyhB,GAAM7zB,EAASpY,GACzB,OAAOwrB,WAAWhB,IAAQ,CAC5B,CACA,OAAOjnB,CACT,EAEIkoB,EAAY,SAAUrT,EAASsT,GACjC,OAAOzO,EAAMyO,GAAY,SAAUxgB,EAAKgf,GACtC,IAAI1hB,EAAMyjC,GAAM7zB,EAAS8R,GACrBzqB,OAAgBqC,IAAR0G,EAAoB,EAAI6c,SAAS7c,EAAK,IAClD,OAAOmjB,MAAMlsB,GAASyL,EAAMA,EAAMzL,CACpC,GAAG,EACL,EAMA,MAAO,CACLmsB,IA/BQ,SAAUxT,EAASyT,GAC3B,IAAKnR,EAASmR,KAAOA,EAAE3E,MAAM,YAC3B,MAAM,IAAIvlB,MAAM3B,EAAO,wDAA0D6rB,GAEnF,IAAIxiB,EAAM+O,EAAQ/O,IACd0f,GAAY1f,KACdA,EAAImW,MAAMxf,GAAQ6rB,EAAI,KAE1B,EAwBEN,IAAKA,EACLO,SAhBaP,EAiBbE,UAAWA,EACXM,IAVQ,SAAU3T,EAAS3Y,EAAOisB,GAClC,IAAIM,EAAuBP,EAAUrT,EAASsT,GAE9C,OADkBjsB,EAAQusB,EAAuBvsB,EAAQusB,EAAuB,CAElF,EAQF,CAEUX,CAAU,UAQhBgG,GAAS,SAAUC,EAAYhI,GAEjC,OADYgI,EAAWC,KAAKjI,GACfroB,KAAKP,EAAS,KAAK,SAAUmC,GACxC,IAAImlB,EAASsJ,EAAWE,MAAM3uB,GAC1B4uB,EAAOJ,GAAOC,EAAYtJ,GAC9B,MAAO,CAACnlB,GAAG8F,OAAO8oB,EACpB,GACF,EAeIC,GAA0B1rB,OAAO2rB,OAAO,CACxCC,UAAW,KACXL,KAXO,SAAUjI,GACnB,IAAIvU,EAEJ,OADcuU,EAAIjgB,MAAQuM,SAAW7S,EAAShC,OAASgC,EAASC,KAAoC,QAA9B+R,EAAKuU,EAAIjgB,IAAI0e,mBAAgC,IAAPhT,OAAgB,EAASA,EAAG8c,eACzH5vB,IAAI0d,GACrB,EAQI6R,MAPQ,SAAUpZ,GACpB,OAAOwP,GAAgBxP,EACzB,IA0BIm0N,GAAqB,SAAUn0N,GACjC,MAAyB,aAAlBpY,GAAKoY,EACd,EA+CIo0N,GAAa,SAAUp0N,EAASq0N,GAClC,IAAI1vL,EA5jUS,SAAU3kC,GACvB,IAAIkR,EAAMlR,EAAQ/O,IAAIse,cAClBhT,EAAO2U,EAAI3U,KACXmY,EAAMxD,EAAIvB,YACVnI,EAAO0J,EAAIxB,gBACf,GAAInT,IAASyD,EAAQ/O,IACnB,OAAOsjB,GAAchY,EAAKoY,WAAYpY,EAAKqY,WAE7C,IAAIC,EAAYL,GAAmBE,aAAiC,EAASA,EAAII,YAAatN,EAAKqN,WAC/FE,EAAaP,GAAmBE,aAAiC,EAASA,EAAIM,YAAaxN,EAAKuN,YAChGE,EAAYT,GAAmBhN,EAAKyN,UAAW1Y,EAAK0Y,WACpDC,EAAaV,GAAmBhN,EAAK0N,WAAY3Y,EAAK2Y,YAC1D,OAAOuvB,GAASzkC,GAASqU,UAAUU,EAAaG,EAAYL,EAAYI,EAC1E,CA+iUY47B,CAAS7wC,GACf+T,EArGM,SAAU/T,GACpB,OAAO7E,GAAIgY,IAAInT,EACjB,CAmGe4rE,CAAM5rE,GACnB,MAAO,CACLA,QAASA,EACTsY,OAAQqsB,EAAIvwB,IAAML,EAClBA,OAAQA,EACR4wB,IAAKA,EACL6sK,QAAS6iB,EAEb,EAYIC,GAAa,SAAUpoO,EAAQzB,EAAGsE,EAAK62L,GACzC2uC,GAAaroO,GAAQ,SAAUnD,EAAIk3I,GACjC,OAAOu0F,GAAgBtoO,EAAQzB,EAAGsE,EAAK62L,EACzC,GAAG72L,EACL,EACI0lO,GAAmB,SAAUvoO,EAAQglB,EAAKzmB,EAAGysB,EAAQ0uK,GACvD,IAAItzL,EAAO,CACT7D,IAAKyoB,EAAOlX,QAAQ/O,IACpB20L,WAAYA,IA5Ec,SAAU15L,EAAQoG,GAE9C,OADkBpG,EAAOyV,KAAK,iBAAkBrP,GAC7B2yK,oBACrB,EA2EMyvD,CAAwBxoO,EAAQoG,KAIpC7H,EAAEymB,EADcwH,GAAMxH,GAAKkD,IACT8C,EAAQ0uK,GA9EO,SAAU15L,EAAQoG,GACnDpG,EAAOyV,KAAK,sBAAuBrP,EACrC,CA6EEqiO,CAA6BzoO,EAAQoG,GACvC,EACIkiO,GAAkB,SAAUtoO,EAAQzB,EAAGsE,EAAK62L,GAC9C,IAAIrpL,EAAOgL,GAAqBrb,EAAOoJ,WACnC4b,EAAM3J,GAAqBrb,EAAOqiF,UAC/BhyE,EAx0TEtL,IAAI+hB,YAy0Tb,IAhC2BhT,EAASmQ,EAChCu5M,EACApzF,EA8BAp/G,GAhCuBlX,EAgCDuH,GAAqBxY,EAAIsG,gBAhCf8a,EAgCgCphB,EAAI2lD,YA/BpEg1K,EAnDQ,SAAU1pN,EAASmQ,GAC/B,IAAI4H,EAAajI,GAAS9P,GAC1B,GAA0B,IAAtB+X,EAAWzsB,QAAgB6oO,GAAmBn0N,GAChD,MAAO,CACLA,QAASA,EACTmQ,OAAQA,GAEL,GAAIA,EAAS4H,EAAWzsB,SAAW6oO,GAAmBp8M,EAAW5H,IACtE,MAAO,CACLnQ,QAAS+X,EAAW5H,GACpBA,OAAQ,GAGV,IAAI0mC,EAAO9+B,EAAWA,EAAWzsB,OAAS,GAC1C,OAAI6oO,GAAmBt9K,GACd,CACL72C,QAASA,EACTmQ,OAAQA,GAGS,QAAfvoB,GAAKivD,GACA,CACL72C,QAAS62C,EACT1mC,OAAQ,GAED20K,GAASjuI,GACX,CACL72C,QAAS62C,EACT1mC,OAAQoxC,GAAM1K,GAAMvrD,QAGf,CACL0U,QAAS62C,EACT1mC,OAAQL,GAAS+mC,GAAMvrD,OAKjC,CAamB43C,CAAQljC,EAASmQ,GAC9BmmH,EAAO/uH,GAAsB,2EACjCk+K,GAASikC,EAAW1pN,QAASs2H,GACtB89F,GAAW99F,GAAM,WACtB,OAAO3kH,GAAS2kH,EAClB,KA2BAm+F,GAAiBvoO,EAAQglB,EAAKzmB,EAAGysB,EAAQ0uK,GACzC1uK,EAAOs6L,SACT,EACIojB,GAAc,SAAU1oO,EAAQ8T,EAASvV,EAAGm7L,GAC9C,IAAI10K,EAAM3J,GAAqBrb,EAAOqiF,UACtCkmJ,GAAiBvoO,EAAQglB,EAAKzmB,EA9BZ,SAAUuV,GAC5B,OAAOo0N,GAAW7sN,GAAqBvH,GAAU3X,EACnD,CA4BmCwsO,CAAc70N,GAAU4lL,EAC3D,EACI2uC,GAAe,SAAUroO,EAAQzB,EAAGsE,GACtC,IAAI+lO,EAAe/lO,EAAIsG,eACnBq/C,EAAc3lD,EAAI2lD,YAClBqgL,EAAahmO,EAAIyG,aACjBm/C,EAAY5lD,EAAI4lD,UACpBlqD,EAAE8c,GAAqButN,GAAevtN,GAAqBwtN,IAC3D,IAAI3c,EAASlsN,EAAO+E,IAAI2+E,YACxBwoI,EAAOnkK,SAAS6gL,EAAcpgL,GAC9B0jK,EAAOhkK,OAAO2gL,EAAYpgL,GAC1BzoD,EAAO4E,UAAU6E,OAAO5G,EAC1B,EACIimO,GAAiB,SAAU99M,EAAQu0H,EAAYm6C,EAAY10K,GAC7D,IAAIyzB,EAAMztB,EAAOytB,IACjB,GAAIihJ,EACFjiL,GAAGghC,EAAI74C,KAAM64C,EAAIvwB,IAAKlD,OACjB,CACL,IAAIoD,EAAIqwB,EAAIvwB,IAAMq3H,EAAav0H,EAAOnD,OACtCpQ,GAAGghC,EAAI74C,KAAMwoB,EAAGpD,EAClB,CACF,EACI+jN,GAAqB,SAAU/jN,EAAK2D,EAAW42H,EAAYv0H,EAAQ0uK,GACrE,IAAIsvC,EAAiBzpF,EAAa52H,EAC9Bk3H,EAAY70H,EAAOytB,IAAIvwB,IACvB43H,EAAe90H,EAAOoB,OACtB68M,EAAqBnpF,EAAeD,GAAaN,EACjDM,EAAYl3H,EACdmgN,GAAe99M,EAAQu0H,GAA2B,IAAfm6C,EAAsB10K,GAChD66H,EAAYmpF,EAErBF,GAAe99M,EAAQu0H,EADX0pF,GAAoC,IAAfvvC,GAAsC,IAAfA,EACd10K,GACjC86H,EAAekpF,IAAmBC,GAC3CH,GAAe99M,EAAQu0H,GAA2B,IAAfm6C,EAAqB10K,EAE5D,EACIkkN,GAAa,SAAUlkN,EAAK2D,EAAWqC,EAAQ0uK,GACjD,IAAIn6C,EAAav6H,EAAIjgB,IAAI0e,YAAY+7H,YACrCupF,GAAmB/jN,EAAK2D,EAAW42H,EAAYv0H,EAAQ0uK,EACzD,EACIyvC,GAAY,SAAUnkN,EAAK2D,EAAWqC,EAAQ0uK,GAChD,IAAI0vC,EAAkBpkN,EAAIjgB,IAAI0e,YAAY+7H,YAC1CupF,GAAmB/jN,EAAK2D,EAAWygN,EAAiBp+M,EAAQ0uK,GAC5D,IAAI2vC,EA/JO,SAAUv1N,GACrB,IAAIkR,EAAM3J,GAAqB/J,UAC3Bib,EAASC,GAAMxH,GACf6I,EAvBO,SAAU/Z,EAASkZ,GAC9B,IAAIU,EAAIV,EAAWE,MAAMpZ,GACzB,OAAOiZ,GAAOC,EAAYU,EAC5B,CAoBeE,CAAO9Z,EAASsZ,IACzBnJ,EAASs0B,GAASzkC,GAClB7U,EAAIwZ,EAAMoV,GAAQ,SAAUvxB,EAAGN,GACjC,IAAI8xB,EAAMyqB,GAASv8C,GACnB,MAAO,CACL4D,KAAMtD,EAAEsD,KAAOkuB,EAAIluB,KACnBsoB,IAAK5rB,EAAE4rB,IAAM4F,EAAI5F,IAErB,GAAG,CACDtoB,KAAM,EACNsoB,IAAK,IAEP,OAAOG,GAAcppB,EAAEW,KAAOqkB,EAAOrkB,KAAO2sB,EAAO3sB,KAAMX,EAAEipB,IAAMjE,EAAOiE,IAAMqE,EAAOrE,IACvF,CA+IWklB,CAAOpiB,EAAOlX,SACnB6sJ,EAAiBnoH,GAAU7mC,QAC3B03N,EAAGnhN,IAAMy4I,EAAev4I,EAC1BqxK,GAASzuK,EAAOlX,SAAwB,IAAf4lL,GAChB2vC,EAAGnhN,IAAMy4I,EAAev0I,QACjCqtK,GAASzuK,EAAOlX,SAAwB,IAAf4lL,EAE7B,EACI4vC,GAAkB,SAAUtpO,EAAQ6C,EAAK62L,GAC3C,OAAO0uC,GAAWpoO,EAAQkpO,GAAYrmO,EAAK62L,EAC7C,EACI6vC,GAAoB,SAAUvpO,EAAQ8T,EAAS4lL,GACjD,OAAOgvC,GAAY1oO,EAAQ8T,EAASo1N,GAAYxvC,EAClD,EACI8vC,GAAiB,SAAUxpO,EAAQ6C,EAAK62L,GAC1C,OAAO0uC,GAAWpoO,EAAQmpO,GAAWtmO,EAAK62L,EAC5C,EACI+vC,GAAmB,SAAUzpO,EAAQ8T,EAAS4lL,GAChD,OAAOgvC,GAAY1oO,EAAQ8T,EAASq1N,GAAWzvC,EACjD,EAKIgwC,GAAsB,SAAU1pO,EAAQ6C,EAAK62L,IAChC15L,EAAOmuF,OAASm7I,GAAkBE,IACxCxpO,EAAQ6C,EAAK62L,EACxB,EASIiwC,GAAa,SAAU71N,GACzB,IAAI6iC,EAAOnyB,GAAY1Q,GAAS/O,IAChC,OAAO+O,EAAQ/O,MAAQ4xC,EAAKC,aAC9B,EACIlC,GAAS,SAAUiC,GAIrB,YAHa,IAATA,IACFA,EAZKt7B,GAAqB/J,WAcrB7S,EAASC,KAAKi4C,EAAK5xC,IAAI6xC,eAAej5C,IAAI0d,GACnD,EAiBIgpF,GAAQ/rE,GAAa,CACvB,CAAEquB,OAAQ,CAAC,YACX,CACEx0C,GAAI,CACF,UACA,WAGJ,CAAEy0C,MAAO,CAAC,cAmBRnuB,IAXW4rE,GAAM19C,OACZ09C,GAAMlyF,GACDkyF,GAAMz9C,MASVtuB,GAAa,CACrB,CAAE0uB,SAAU,CAAC,QACb,CACEvP,SAAU,CACR,YACA,eAGJ,CACEwP,MAAO,CACL,QACA,UACA,SACA,eA4BFC,IARWzuB,GAAIuuB,SACJvuB,GAAIgf,SACPhf,GAAIwuB,MAxED,SAAUtsC,EAAO4rC,EAASC,EAAQC,GAC/C,MAAO,CACL9rC,MAAOA,EACP4rC,QAASA,EACTC,OAAQA,EACRC,QAASA,EAEb,GAgFImjL,GAAY9sN,KAAS4D,QACrBgxB,GAAU,SAAUztB,EAAQnQ,GAC9B,IAAI2T,EAAMmxK,GAAS9kL,GAAWuhD,GAAMvhD,GAAS1U,OAASwkB,GAAS9P,GAAS1U,OAAS,EACjF,OAAI6kB,EAASwD,EACJA,EACExD,EAAS,EACX,EAEFA,CACT,EACI4lN,GAAe,SAAUhnO,GAC3B,OAAOqkD,GAAmBrkD,EAAI8X,MAAO+2B,GAAQ7uC,EAAI0jD,QAAS1jD,EAAI8X,OAAQ9X,EAAI2jD,OAAQ9U,GAAQ7uC,EAAI4jD,QAAS5jD,EAAI2jD,QAC7G,EACIsjL,GAAe,SAAUnzL,EAAMp0C,GACjC,OAAQs3L,GAAiBt3L,EAAIwC,OAAS6V,GAAW+7B,EAAMp0C,IAAQigB,GAAGm0B,EAAMp0C,GAC1E,EACIwnO,GAAc,SAAUpzL,GAC1B,OAAO,SAAU9zC,GACf,OAAOinO,GAAanzL,EAAM9zC,EAAI8X,QAAUmvN,GAAanzL,EAAM9zC,EAAI2jD,OACjE,CACF,EACIwjL,GAAc,SAAUhqO,GAC1B,OAAyB,IAAlBA,EAAOmuF,QAAmBy7I,GAAU9qN,MAC7C,EACImrN,GAA8B,SAAUhrO,GAC1C,OAAOioD,GAAmB7rC,GAAqBpc,EAAEkK,gBAAiBlK,EAAEupD,YAAantC,GAAqBpc,EAAEqK,cAAerK,EAAEwpD,UAC3H,EAaIyhL,GAAsB,SAAUnhO,GAClC,IAAIlG,EAAMyO,SAASw2C,cACnB,IAGE,OAFAjlD,EAAIklD,SAASh/C,EAAS4R,MAAM5V,IAAKgE,EAASw9C,SAC1C1jD,EAAIqlD,OAAOn/C,EAASy9C,OAAOzhD,IAAKgE,EAAS09C,SAClChoD,EAASN,KAAK0E,EAGvB,CAFE,MAAOkL,GACP,OAAOtP,EAAShC,MAClB,CACF,EACIq0D,GAAQ,SAAU9wD,GACpB,IAlB0B22C,EALFnuB,EACpB5jB,EAsBAulO,EAAcH,GAAYhqO,IAlBJ22C,EAkB0Bt7B,GAAqBrb,EAAOoJ,YAvBxDof,EAMd/E,GAAYkzB,GACD5xC,IANjBH,EAAY4jB,EAAIuiC,gBACTnmD,GAAsC,IAAzBA,EAAU+kD,WAAqClrD,EAASC,KAAKkG,EAAUilD,WAAW,IAArDprD,EAAShC,QACnDkB,IAAIssO,KAIWjsO,OAAO+rO,GAAYpzL,KAgBiDl4C,EAAShC,OACvGuD,EAAO+I,SAAWohO,EAAYrtO,SAAWqtO,EAAcnqO,EAAO+I,QAChE,EAOIhD,GAAS,SAAU/F,GAErB,OADeA,EAAO+I,SAAW/I,EAAO+I,SAAWtK,EAAShC,QAC5CoB,MAAK,SAAUxC,GAC7B,OA1BqBs7C,EA0BLt7B,GAAqBrb,EAAOoJ,WA1BjBL,EA0B6B1N,EAzBnDoD,EAASC,KAAKqK,GAAU/K,OAAO+rO,GAAYpzL,IAAOh5C,IAAIksO,IADhD,IAAUlzL,EAAM5tC,CA2B7B,IAAGlL,KAAKqsO,GACV,EAWIE,GAAe,CAAEC,kBAJK,SAAU9nO,GAClC,IAAI0D,EAAY1D,EAAI0D,UAAU/H,WAC9B,OAAsC,IAA/B+H,EAAUrH,QAAQ,UAAiD,IAA/BqH,EAAUrH,QAAQ,OAC/D,GAsCIyrK,GAAa,SAAUrqK,GACzB,IAAIsqO,EAAiB1hK,IAAM,WACzB9X,GAAM9wD,EACR,GAAG,GACHA,EAAOmS,GAAG,QAAQ,WACZnS,EAAOmuF,QArCW,SAAUnuF,EAAQsqO,GAC1C,IAAIC,EAAc,WAChBD,EAAe1oJ,UACjB,EACAk+H,GAASnzH,IAAI9uF,KAAKyT,SAAU,UAAWi5N,GACvCvqO,EAAOmS,GAAG,UAAU,WAClB2tM,GAASnzH,IAAI9hE,OAAOvZ,SAAU,UAAWi5N,EAC3C,GACF,CA8BMC,CAAoBxqO,EAAQsqO,GAnBP,SAAUtqO,EAAQsqO,GAC7BxtN,KAAS4D,QACX5B,OAZS,SAAU9e,GAC/BA,EAAOmS,GAAG,YAAY,WACpB2+C,GAAM9wD,EACR,GACF,CASIyqO,CAAiBzqO,GARC,SAAUA,EAAQsqO,GACtCtqO,EAAOmS,GAAG,oBAAoB,SAAU4hI,GACtCu2F,EAAe1oJ,UACjB,GACF,CAMI8oJ,CAAgB1qO,EAAQsqO,GAE1BtqO,EAAOmS,GAAG,oBAAoB,SAAUY,IA7BjB,SAAUA,GACjC,MAAkB,eAAXA,EAAE7X,MAAyB6X,EAAE43N,eACtC,EA4BSC,CAAmB73N,IACtB+9C,GAAM9wD,EAEV,GACF,CASI6qO,CAAqB7qO,EAAQsqO,EAC/B,IACAtqO,EAAOmS,GAAG,UAAU,WAClBm4N,EAAe3oJ,QACjB,GACF,EAGImpJ,GAAQhrB,GAASnzH,IAYjBo+I,GAAc,SAAU/qO,EAAQuC,GAClC,IAAIyoO,EAzjGoB,SAAUhrO,GAClC,OAAOA,EAAOE,SAAS,qBAAsB,GAAI,SACnD,CAujGuB+qO,CAAoBjrO,GACrC0jB,EAASonN,GAAM7lO,UAAU1C,GAAK,SAAUA,GAC1C,OAdoB,SAAUA,GAChC,OAAO6nO,GAAaC,kBAAkB9nO,EACxC,CAYW8nO,CAAkB9nO,MAASyoO,GAAiBhrO,EAAO+E,IAAIvF,GAAG+C,EAAKyoO,EACxE,IACA,OAAkB,OAAXtnN,CACT,EAaIwnN,GAAmB,SAAUhkF,EAAen0I,GAC9C,IAAI/S,EAAS+S,EAAE/S,OACfqqK,GAAWrqK,GACXA,EAAOmS,GAAG,WAAW,WACnB,IAAIg5N,EAAgBjkF,EAAcikF,cAC9BA,IAAkBnrO,IAChBmrO,GACFA,EAAc11N,KAAK,OAAQ,CAAE01N,cAAenrO,IAE9CknJ,EAAc30I,UAAUvS,GACxBknJ,EAAcikF,cAAgBnrO,EAC9BA,EAAOyV,KAAK,QAAS,CAAE21N,cAAeD,IACtCnrO,EAAOkH,OAAM,GAEjB,IACAlH,EAAOmS,GAAG,YAAY,WACpB4qL,GAAMztL,iBAAiBtP,GAAQ,WAC7B,IAAImrO,EAAgBjkF,EAAcikF,cAC7BJ,GAAY/qO,EA9BA,SAAUA,GAC/B,IACE,IAAI22C,EAAOnyB,GAAYnJ,GAAqBrb,EAAOysF,eACnD,OAAO/3C,GAAOiC,GAAMh6C,MAAK,WACvB,OAAO2U,SAASjB,IAClB,IAAG,SAAUhV,GACX,OAAOA,EAAE0J,GACX,GAGF,CAFE,MAAOymG,GACP,OAAOl6F,SAASjB,IAClB,CACF,CAmB+Bg7N,CAAiBrrO,KAAYmrO,IAAkBnrO,IACtEA,EAAOyV,KAAK,OAAQ,CAAE01N,cAAe,OACrCjkF,EAAcikF,cAAgB,KAElC,GACF,IACKnD,KACHA,GAAyB,SAAUj1N,GACjC,IAAIu4N,EAAepkF,EAAcokF,aAC7BA,GAhlVmB,SAAU7hN,GACrC,GAAIxO,MAAmB9E,EAAcsT,EAAMjjB,QAAS,CAClD,IAAIkjB,EAAKrO,GAAqBoO,EAAMjjB,QACpC,GAAImyL,GAAYjvK,IAYXvT,EAZmCuT,EAYb3kB,IAAI4kB,aAXzBF,EAAMI,UAAYJ,EAAMK,aAAc,CACxC,IAAIA,EAAeL,EAAMK,eACzB,GAAIA,EACF,OAAOrQ,GAAKqQ,EAEhB,CAEJ,CACA,OAAOrrB,EAASC,KAAK+qB,EAAMjjB,OAC7B,CAokVQujB,CAAuBhX,GAAGnV,MAAK,SAAU4I,GACnCA,EAAO6c,gBAAkB/R,WACvB9K,IAAW8K,SAASjB,MAAS06N,GAAYO,EAAc9kO,IAAW0gJ,EAAcikF,gBAAkBG,IACpGA,EAAa71N,KAAK,OAAQ,CAAE01N,cAAe,OAC3CjkF,EAAcikF,cAAgB,MAGpC,GAEJ,EACAL,GAAMjtO,KAAKyT,SAAU,UAAW02N,IAEpC,EACIuD,GAA2B,SAAUrkF,EAAen0I,GAClDm0I,EAAcikF,gBAAkBp4N,EAAE/S,SACpCknJ,EAAcikF,cAAgB,MAE3BjkF,EAAcokF,eACjBR,GAAMjgN,OAAOvZ,SAAU,UAAW02N,IAClCA,GAAyB,KAE7B,EAyBIwD,GAAuB,SAAUxrO,EAAQ6C,IAXrB,SAAU8zC,EAAM9zC,GACtC,OAJqB,SAAUA,GAC/B,OAAOA,EAAIE,UAAYtE,EAASC,KAAK0rN,GAAUvnN,EAAIsG,eAAgBtG,EAAI2lD,cAAc7qD,IAAI0d,IAAwB5c,EAAShC,MAC5H,CAESgvO,CAAiB5oO,GAAKhF,MAAK,SAAUgL,GAC1C,OAAIy3L,GAAez3L,GACVpK,EAASN,KAAK0K,IACe,IAA3B+R,GAAW+7B,EAAM9tC,GACnBpK,EAASN,KAAKw4C,GAEdl4C,EAAShC,MAEpB,GACF,EAEEivO,CAAkBrwN,GAAqBrb,EAAOoJ,WAAYvG,GAAKhF,MAAK,SAAU0E,GAC5E,OAAOw1N,GAAgBx1N,EAAIwC,IAC7B,IAAGpI,MAAK,WACNqD,EAAO4E,UAAU49E,WAEnB,IAAG,SAAUmpJ,GACX,OAAO3rO,EAAO4E,UAAU6E,OAAOkiO,EAAS/e,UAC1C,GACF,EACIgf,GAAY,SAAUv7N,GACxB,GAAIA,EAAKkC,UACP,IACElC,EAAKkC,WAGP,CAFE,MAAOi5F,GACPn7F,EAAKnJ,OACP,MAEAmJ,EAAKnJ,OAET,EAiBIwvC,GAAW,SAAU12C,GACvB,OAAOA,EAAOmuF,OAXK,SAAUnuF,GAC7B,IAP8BuC,EA3VTuR,EAkWjB+3N,EAAU7rO,EAAOoJ,UACrB,OAAOyiO,IARuBtpO,EAQI8Y,GAAqBwwN,GAPhDlC,GAAWpnO,KA5VGuR,EA4VYvR,EA3V1BmyC,GAAOlwB,GAAY1Q,IAAU9V,QAAO,SAAU+U,GACnD,OAAOe,EAAQ/O,IAAI4d,SAAS5P,EAAEhO,IAChC,KAyVsCjI,SAQxC,CAQyBgvO,CAAe9rO,GAdnB,SAAUA,GAC7B,OAAOA,EAAOsnJ,eAAiBqiF,GAAWtuN,GAAqBrb,EAAOsnJ,eACxE,CAYkDykF,CAAe/rO,EACjE,EAkCIgsO,GAAiB,SAAUhsO,GAC7B,OAAOA,EAAOknJ,cAAc30I,UAAUvS,EACxC,EAYIisO,GAAqB,SAAUt1L,EAAM9zC,EAAK8X,EAAOuxN,EAAMnxO,GACzD,IAAImlC,EAAYvlB,EAAQ9X,EAAIsG,eAAiBtG,EAAIyG,aAC7C2a,EAAStJ,EAAQ9X,EAAI2lD,YAAc3lD,EAAI4lD,UAC3C,OAAOhqD,EAASC,KAAKwhC,GAAWviC,IAAI0d,IAAsB1d,KAAI,SAAU4E,GACtE,OAAQ2pO,GAASrpO,EAAIE,UAA4DR,EAAhDkqC,GAAQlqC,EAAKxH,EAAQwH,EAAK0hB,IAASjnB,MAAMuF,EAC5E,IAAG1E,MAAK,SAAU0E,GAChB,OAAOo2L,GAAYp2L,GAAO9D,EAASN,KAAKoE,GAAOmhB,GAAOnhB,GAAKvE,OAAO26L,GACpE,IAAGh7L,KAAI,SAAU4E,GACf,OAAOA,EAAIwC,GACb,IAAG/H,MAAM25C,EACX,EACI1lC,GAAW,SAAU0lC,EAAM9zC,EAAKqpO,GAClC,OAAOD,GAAmBt1L,EAAM9zC,GAAK,EAAMqpO,GAAM,SAAU3pO,EAAK0hB,GAC9D,OAAO2I,KAAK6kB,IAAI2nJ,GAAgB72L,GAAM0hB,EACxC,GACF,EACI0+D,GAAS,SAAUhsC,EAAM9zC,EAAKqpO,GAChC,OAAOD,GAAmBt1L,EAAM9zC,GAAK,EAAOqpO,GAAM,SAAU3pO,EAAK0hB,GAC/D,OAAOA,EAAS,EAAIA,EAAS,EAAIA,CACnC,GACF,EACIkoN,GAAqB,SAAUtjO,EAAM2gN,GAEvC,IADA,IAAIr6F,EAAOtmH,EACJA,GAAQ4xL,GAAS5xL,IAAyB,IAAhBA,EAAKzJ,QACpCyJ,EAAO2gN,EAAW3gN,EAAKsiB,YAActiB,EAAKmwL,gBAE5C,OAAOnwL,GAAQsmH,CACjB,EA6EIi9G,GAAgB,SAAUpsO,EAAQ2oD,GACpC,OAAOmsI,EAAMnsI,GAAQ,SAAUhB,GAC7B,IAAIn2C,EAAMxR,EAAOyV,KAAK,oBAAqB,CAAEkyC,MAAOA,IACpD,OAAOn2C,EAAIm2C,QAAUA,EAAQn2C,EAAIm2C,MAAQA,CAC3C,GACF,EAEI0kL,GAAa,CACf,QAAS,EACT,WAAY,EACZ,SAAU,EACV,MAAO,EACP,WAAY,GACZ,qBAAsB,IAEpBC,GAAS,SAAUzjO,EAAM8tC,EAAMuqG,GACjC,IAAI0+C,EAAY1+C,EAAO,YAAc,aACjC2+C,EAAc3+C,EAAO,OAAS,OAClC,GAAIr4I,EAAK+2L,GACP,OAAO/2L,EAAK+2L,GAEd,GAAI/2L,IAAS8tC,EAAM,CACjB,IAAIzrB,EAAUriB,EAAKg3L,GACnB,GAAI30K,EACF,OAAOA,EAET,IAAK,IAAI4tJ,EAAWjwK,EAAK6a,OAAQo1J,GAAYA,IAAaniI,EAAMmiI,EAAWA,EAASp1J,OAElF,GADAwH,EAAU4tJ,EAAS+mB,GAEjB,OAAO30K,CAGb,CACF,EACIqhN,GAAkB,SAAU1jO,GAC9B,IAAKg6L,GAAiBh6L,EAAK1N,OACzB,OAAO,EAET,IAAI6O,EAAanB,EAAK6a,OACtB,OAAI1Z,GAAmC,SAApBA,EAAWtO,OAAmBsO,EAAW68B,KAAK,WAAa,SAASpjC,KAAKoF,EAAK1N,MAInG,EACI2mN,GAAoB,SAAUj5M,GAChC,IAAIo6L,EAA8B,MAAdp6L,EAAKnN,OAAiBmN,EAAKg+B,KAAK,SAAWh+B,EAAKg+B,KAAK,MACzE,OAAOh+B,EAAKg+B,KAAK,SAAWh+B,EAAKg+B,KAAK,QAAUh+B,EAAK1F,YAAc0F,EAAKg+B,KAAK,sBAAwBo8J,CACvG,EACIupC,GAAU,WACZ,SAASA,EAAQ9wO,EAAMR,GACrB6G,KAAKrG,KAAOA,EACZqG,KAAK7G,KAAOA,EACC,IAATA,IACF6G,KAAKuiC,WAAa,GAClBviC,KAAKuiC,WAAW3mC,IAAM,CAAC,EAE3B,CAoPA,OAnPA6uO,EAAQpiO,OAAS,SAAU1O,EAAMyO,GAC/B,IAAItB,EAAO,IAAI2jO,EAAQ9wO,EAAM2wO,GAAW3wO,IAAS,GAMjD,OALIyO,GACFirL,GAAOjrL,GAAO,SAAUhP,EAAOi/L,GAC7BvxL,EAAKg+B,KAAKuzJ,EAAUj/L,EACtB,IAEK0N,CACT,EACA2jO,EAAQjxO,UAAUiK,QAAU,SAAUqD,GACpC,IAAIxK,EAAO0D,KAMX,OALI8G,EAAK6a,QACP7a,EAAKqB,SAEP7L,EAAK4wE,OAAOpmE,EAAMxK,GAClBA,EAAK6L,SACE7L,CACT,EACAmuO,EAAQjxO,UAAUsrC,KAAO,SAAUnrC,EAAMP,GACvC,IACIgP,EADA9L,EAAO0D,KAEX,GAAoB,iBAATrG,EAMT,OALIA,SACF05L,GAAO15L,GAAM,SAAUP,EAAOgH,GAC5B9D,EAAKwoC,KAAK1kC,EAAKhH,EACjB,IAEKkD,EAET,GAAI8L,EAAQ9L,EAAKimC,WAAY,CAC3B,QAAc9mC,IAAVrC,EAAqB,CACvB,GAAc,OAAVA,EAAgB,CAClB,GAAIO,KAAQyO,EAAMxM,IAAK,QACdwM,EAAMxM,IAAIjC,GAEjB,IADA,IAAIwD,EAAIiL,EAAM/K,OACPF,KACL,GAAIiL,EAAMjL,GAAGxD,OAASA,EAEpB,OADAyO,EAAMmuF,OAAOp5F,EAAG,GACTb,CAGb,CACA,OAAOA,CACT,CACA,GAAI3C,KAAQyO,EAAMxM,KAEhB,IADIuB,EAAIiL,EAAM/K,OACPF,KACL,GAAIiL,EAAMjL,GAAGxD,OAASA,EAAM,CAC1ByO,EAAMjL,GAAG/D,MAAQA,EACjB,KACF,OAGFgP,EAAMrL,KAAK,CACTpD,KAAMA,EACNP,MAAOA,IAIX,OADAgP,EAAMxM,IAAIjC,GAAQP,EACXkD,CACT,CACA,OAAO8L,EAAMxM,IAAIjC,EACnB,CACF,EACA8wO,EAAQjxO,UAAU4kC,MAAQ,WACxB,IAEIssM,EAFApuO,EAAO0D,KACPo+B,EAAQ,IAAIqsM,EAAQnuO,EAAK3C,KAAM2C,EAAKnD,MAExC,GAAIuxO,EAAYpuO,EAAKimC,WAAY,CAC/B,IAAIooM,EAAa,GACjBA,EAAW/uO,IAAM,CAAC,EAClB,IAAK,IAAIuB,EAAI,EAAG0Y,EAAI60N,EAAUrtO,OAAQF,EAAI0Y,EAAG1Y,IAAK,CAChD,IAAIytO,EAAWF,EAAUvtO,GACH,OAAlBytO,EAASjxO,OACXgxO,EAAWA,EAAWttO,QAAU,CAC9B1D,KAAMixO,EAASjxO,KACfP,MAAOwxO,EAASxxO,OAElBuxO,EAAW/uO,IAAIgvO,EAASjxO,MAAQixO,EAASxxO,MAE7C,CACAglC,EAAMmE,WAAaooM,CACrB,CAGA,OAFAvsM,EAAMhlC,MAAQkD,EAAKlD,MACnBglC,EAAMysM,WAAavuO,EAAKuuO,WACjBzsM,CACT,EACAqsM,EAAQjxO,UAAUkqI,KAAO,SAAU75G,GACjC,IAAIvtB,EAAO0D,KAGX,OAFA1D,EAAKqlB,OAAOurD,OAAOrjD,EAASvtB,GAC5ButB,EAAQkkD,OAAOzxE,GACRA,CACT,EACAmuO,EAAQjxO,UAAUowB,OAAS,WAEzB,IADA,IAAIttB,EAAO0D,KACF8G,EAAOxK,EAAK8E,WAAY0F,GAAO,CACtC,IAAIvF,EAAOuF,EAAKvF,KAChBjF,EAAK4wE,OAAOpmE,EAAMxK,GAAM,GACxBwK,EAAOvF,CACT,CACAjF,EAAK6L,QACP,EACAsiO,EAAQjxO,UAAU2O,OAAS,WACzB,IAAI7L,EAAO0D,KAAM2hB,EAASrlB,EAAKqlB,OAAQpgB,EAAOjF,EAAKiF,KAAM49I,EAAO7iJ,EAAK6iJ,KAoBrE,OAnBIx9H,IACEA,EAAOvgB,aAAe9E,GACxBqlB,EAAOvgB,WAAaG,EAChBA,IACFA,EAAK49I,KAAO,OAGdA,EAAK59I,KAAOA,EAEVogB,EAAOy1K,YAAc96L,GACvBqlB,EAAOy1K,UAAYj4C,EACfA,IACFA,EAAK59I,KAAO,OAGdA,EAAK49I,KAAOA,EAEd7iJ,EAAKqlB,OAASrlB,EAAKiF,KAAOjF,EAAK6iJ,KAAO,MAEjC7iJ,CACT,EACAmuO,EAAQjxO,UAAUu0E,OAAS,SAAUjnE,GACnC,IAAIxK,EAAO0D,KACP8G,EAAK6a,QACP7a,EAAKqB,SAEP,IAAIygD,EAAOtsD,EAAK86L,UAShB,OARIxuI,GACFA,EAAKrnD,KAAOuF,EACZA,EAAKq4I,KAAOv2F,EACZtsD,EAAK86L,UAAYtwL,GAEjBxK,EAAK86L,UAAY96L,EAAK8E,WAAa0F,EAErCA,EAAK6a,OAASrlB,EACPwK,CACT,EACA2jO,EAAQjxO,UAAU0zE,OAAS,SAAUpmE,EAAMgkO,EAASlmL,GAC9C99C,EAAK6a,QACP7a,EAAKqB,SAEP,IAAIwZ,EAASmpN,EAAQnpN,QAAU3hB,KAqB/B,OApBI4kD,GACEkmL,IAAYnpN,EAAOvgB,WACrBugB,EAAOvgB,WAAa0F,EAEpBgkO,EAAQ3rF,KAAK59I,KAAOuF,EAEtBA,EAAKq4I,KAAO2rF,EAAQ3rF,KACpBr4I,EAAKvF,KAAOupO,EACZA,EAAQ3rF,KAAOr4I,IAEXgkO,IAAYnpN,EAAOy1K,UACrBz1K,EAAOy1K,UAAYtwL,EAEnBgkO,EAAQvpO,KAAK49I,KAAOr4I,EAEtBA,EAAKvF,KAAOupO,EAAQvpO,KACpBuF,EAAKq4I,KAAO2rF,EACZA,EAAQvpO,KAAOuF,GAEjBA,EAAK6a,OAASA,EACP7a,CACT,EACA2jO,EAAQjxO,UAAU4kG,OAAS,SAAUzkG,GAGnC,IAFA,IACImsI,EAAa,GACRh/H,EAFE9G,KAEUoB,WAAY0F,EAAMA,EAAOyjO,GAAOzjO,EAF1C9G,MAGL8G,EAAKnN,OAASA,GAChBmsI,EAAW/oI,KAAK+J,GAGpB,OAAOg/H,CACT,EACA2kG,EAAQjxO,UAAUqoB,SAAW,WAG3B,IAFA,IACIikH,EAAa,GACRh/H,EAFE9G,KAEUoB,WAAY0F,EAAMA,EAAOA,EAAKvF,KACjDukI,EAAW/oI,KAAK+J,GAElB,OAAOg/H,CACT,EACA2kG,EAAQjxO,UAAUiwB,MAAQ,WACxB,IAAIntB,EAAO0D,KACX,GAAI1D,EAAK8E,WAAY,CAEnB,IADA,IAAIi4L,EAAQ,GACHvyL,EAAOxK,EAAK8E,WAAY0F,EAAMA,EAAOyjO,GAAOzjO,EAAMxK,GACzD+8L,EAAMt8L,KAAK+J,GAGb,IADA,IAAI3J,EAAIk8L,EAAMh8L,OACPF,MACD2J,EAAOuyL,EAAMl8L,IACZwkB,OAAS7a,EAAK1F,WAAa0F,EAAKswL,UAAYtwL,EAAKvF,KAAOuF,EAAKq4I,KAAO,IAE7E,CAEA,OADA7iJ,EAAK8E,WAAa9E,EAAK86L,UAAY,KAC5B96L,CACT,EACAmuO,EAAQjxO,UAAU0oN,QAAU,SAAU7gN,EAAUkwM,EAAYxwM,QACvC,IAAfwwM,IACFA,EAAa,CAAC,GAEhB,IAAIj1M,EAAO0D,KACP8G,EAAOxK,EAAK8E,WAChB,GAAI2+M,GAAkBzjN,GACpB,OAAO,EAET,GAAIwK,EACF,EAAG,CACD,GAAkB,IAAdA,EAAK3N,KAAY,CACnB,GAAI2N,EAAKg+B,KAAK,kBACZ,SAEF,GAAIzjC,EAASyF,EAAKnN,MAChB,OAAO,EAET,GAAIomN,GAAkBj5M,GACpB,OAAO,CAEX,CACA,GAAkB,IAAdA,EAAK3N,KACP,OAAO,EAET,GAAkB,IAAd2N,EAAK3N,OAAeqxO,GAAgB1jO,GACtC,OAAO,EAET,GAAkB,IAAdA,EAAK3N,MAAc2N,EAAK6a,QAAU4vL,EAAWzqM,EAAK6a,OAAOhoB,OAASmnM,GAAiBh6L,EAAK1N,OAC1F,OAAO,EAET,GAAI2H,GAAaA,EAAU+F,GACzB,OAAO,CAEX,OAASA,EAAOyjO,GAAOzjO,EAAMxK,IAE/B,OAAO,CACT,EACAmuO,EAAQjxO,UAAU+8L,KAAO,SAAUp3C,GACjC,OAAOorF,GAAOvqO,KAAM,KAAMm/I,EAC5B,EACOsrF,CACT,CA7Pc,GAqSVM,GAAkB,SAAUxxN,EAAMiX,GACpC,OAAOjX,EAAK9V,QAAQ+sB,EAAOw6M,IAAI,SAAUC,GACvC,OAAOlhN,GAAMyG,EAAO06M,KAAMD,GAAShwO,MAAMgwO,EAC3C,GACF,EAaIE,GAASpyO,GAAM8C,KAAM2G,GAAOzJ,GAAMyJ,KAClC4oO,GAAa,uGAAuGnpO,MAAM,KAC1HopO,GAAgB,CAClBC,IAAK,GACLC,KAAM,GACNC,MAAO,IACPC,OAAQ,IAENC,GAAyB,CAC3B,MACA,SAkBEC,GAAM,WACR,SAASA,EAAIlqO,EAAKiF,GAChBjF,EAAMe,GAAKf,GACXzB,KAAK0G,SAAWA,GAAY,CAAC,EAC7B,IAAIklO,EAAU5rO,KAAK0G,SAASumL,SACxB3wL,EAAO0D,KACX,GAAI,yBAAyB0B,KAAKD,IAAQ,QAAQC,KAAKD,GACrDnF,EAAK62D,OAAS1xD,MADhB,CAIA,IAAIoqO,EAA2C,IAAtBpqO,EAAI5E,QAAQ,MAIrC,GAHyB,IAArB4E,EAAI5E,QAAQ,MAAegvO,IAC7BpqO,GAAOmqO,GAAUA,EAAQz+C,UAAqB,QAAU,cAAgB1rL,IAErE,iBAAiBC,KAAKD,GAAM,CAC/B,IAAI8jN,EAAUvlN,KAAK0G,SAASumL,SAAWjtL,KAAK0G,SAASumL,SAASvhK,KAAO,IAAIigN,EAAIp8N,SAASyhK,SAAStsK,MAAMyvE,UACrG,GAAIn0E,KAAK0G,SAASumL,UAA+C,IAAnCjtL,KAAK0G,SAASumL,SAASE,SACnD1rL,EAAM,aAAenF,EAAKwvO,UAAUvmB,EAAS9jN,OACxC,CACL,IAAIof,EAAQ,oBAAoB4zE,KAAKhzF,GACrCA,GAAOmqO,GAAWA,EAAQz+C,UAAY,QAAU,cAAgB7wL,EAAKwvO,UAAUvmB,EAAS1kM,EAAM,IAAMA,EAAM,EAC5G,CACF,CACApf,EAAMA,EAAIgC,QAAQ,MAAO,YACzB,IAAIsoO,EAAW,uNAAuNt3I,KAAKhzF,GAC3O0pO,GAAOC,IAAY,SAAU/kO,EAAGlJ,GAC9B,IAAI24D,EAAOi2K,EAAS5uO,GAChB24D,IACFA,EAAOA,EAAKryD,QAAQ,cAAe,OAErCnH,EAAK+J,GAAKyvD,CACZ,IACI81K,IACGtvO,EAAK6wL,WACR7wL,EAAK6wL,SAAWy+C,EAAQz+C,UAErB7wL,EAAK0vO,WACR1vO,EAAK0vO,SAAWJ,EAAQI,UAErB1vO,EAAK8wL,MAAsB,aAAd9wL,EAAK+lB,OACrB/lB,EAAK8wL,KAAOw+C,EAAQx+C,MAEjB9wL,EAAK+lB,MAAsB,aAAd/lB,EAAK+lB,OACrB/lB,EAAK+lB,KAAOupN,EAAQvpN,MAEtB/lB,EAAK62D,OAAS,IAEZ04K,IACFvvO,EAAK6wL,SAAW,GAvClB,CAyCF,CA2MA,OA1MAw+C,EAAIM,aAAe,SAAU9pH,GAC3B,IAAIhpH,EACA+yO,EAAgBC,mBAAmBhqH,GAAKlgH,MAAM,KAC9Cuc,EAAU,eAAei2E,KAAKy3I,EAAc,IAIhD,OAHI1tN,IACFrlB,EAAOqlB,EAAQ,IAEV,CACLrlB,KAAMA,EACNkL,KAAM6nO,EAAc,GAExB,EACAP,EAAIllO,UAAY,SAAU07G,EAAK//B,EAASzkC,GAItC,QAHgB,IAAZA,IACFA,EAAU,CAAC,GAETA,EAAQovJ,kBACV,OAAO,EAEP,IAAIq/B,EAAa/oC,GAASM,OAAOxhF,GAAK1+G,QAAQ,sBAAuB,IACrE,IACE2oO,EAAaD,mBAAmBC,EAGlC,CAFE,MAAO3iI,GACP2iI,EAAaC,SAASD,EACxB,CACA,OAAI,4BAA4B1qO,KAAK0qO,KArFxB,SAAU1lO,EAAUy7G,EAAKq2E,GAC1C,OAAI9xL,EAAS4lO,uBAEF,iBAAiB5qO,KAAKygH,GAVZ,SAAUoqH,EAAkB/zC,GACjD,OAAIpkL,EAAcm4N,IACRA,GAEDn4N,EAAcokL,KAAY1F,EAAW44C,GAAwBlzC,EAExE,CAKWg0C,CAAiB9lO,EAASsmM,oBAAqBxU,IAAY,yBAAyB92L,KAAKygH,GAEzF,UAAUzgH,KAAKygH,GAE1B,CAgFcsqH,CAAa9uL,EAASyuL,EAAYhqJ,EAE9C,EACAupJ,EAAIe,mBAAqB,SAAU3gN,GACjC,IAAIw5L,EAYJ,OAVEA,EADmC,IAAjCx5L,EAAIohK,SAAStwL,QAAQ,SAAkC,UAAjBkvB,EAAIohK,SAClCphK,EAAIrnB,KAEJqnB,EAAIohK,SAAW,KAAOphK,EAAI1J,KAAO0J,EAAI4gN,SAE7C,yBAAyBjrO,KAAK6jN,KAChCA,EAAUA,EAAQ9hN,QAAQ,WAAY,IAAIA,QAAQ,gBAAiB,IAC9D,UAAU/B,KAAK6jN,KAClBA,GAAW,MAGRA,CACT,EACAomB,EAAInyO,UAAUozO,QAAU,SAAUlhN,GAChC,IAAImhN,EAAY,mBAAmBp4I,KAAK/oE,GACxC1rB,KAAK0rB,KAAOmhN,EAAU,GACtB7sO,KAAKm0E,UAAY04J,EAAU,GAC3B7sO,KAAK6pI,KAAOgjG,EAAU,GACtB7sO,KAAKmzD,OAAS,GACdnzD,KAAK8sO,QACP,EACAnB,EAAInyO,UAAUuzO,WAAa,SAAU5qH,GACnC,IAAIl2G,EACJ,GAAY,OAARk2G,EACF,OAAOA,EAET,IAAI6qH,EAAc,IAAIrB,EAAIxpH,EAAK,CAAE8qE,SAAUjtL,OAC3C,GAAyB,aAArBgtO,EAAY3qN,MAAuBriB,KAAKqiB,OAAS2qN,EAAY3qN,MAAQ2qN,EAAY3qN,MAAQriB,KAAKotL,OAAS4/C,EAAY5/C,MAAQptL,KAAKmtL,WAAa6/C,EAAY7/C,UAAqC,KAAzB6/C,EAAY7/C,SACnL,OAAO6/C,EAAYF,SAErB,IAAIG,EAAKjtO,KAAK8sO,SAAUI,EAAKF,EAAYF,SACzC,OAAIG,IAAOC,GAAmC,MAA7BD,EAAG3rJ,OAAO2rJ,EAAG5vO,OAAS,IAAc4vO,EAAGt0N,OAAO,EAAGs0N,EAAG5vO,OAAS,KAAO6vO,EAC5ED,GAEThhO,EAASjM,KAAKmtO,UAAUntO,KAAK0rB,KAAMshN,EAAYthN,MAC3CshN,EAAY1uN,QACdrS,GAAU,IAAM+gO,EAAY1uN,OAE1B0uN,EAAY9jO,SACd+C,GAAU,IAAM+gO,EAAY9jO,QAEvB+C,EACT,EACA0/N,EAAInyO,UAAUspD,WAAa,SAAUq/D,EAAKirH,GACxC,IAAIC,EAAc,IAAI1B,EAAIxpH,EAAK,CAAE8qE,SAAUjtL,OAC3C,OAAOqtO,EAAYP,OAAOM,GAAUptO,KAAKstL,aAAa+/C,GACxD,EACA1B,EAAInyO,UAAU8zL,aAAe,SAAUnrE,GACrC,GAAIniH,KAAKqiB,MAAQ8/F,EAAI9/F,MAAQriB,KAAKmtL,UAAYhrE,EAAIgrE,SAAU,CAC1D,GAAIntL,KAAKotL,MAAQjrE,EAAIirE,KACnB,OAAO,EAET,IAAIkgD,EAAcjC,GAAcrrO,KAAKmtL,UACrC,GAAImgD,IAAgBttO,KAAKotL,MAAQkgD,KAAiBnrH,EAAIirE,MAAQkgD,GAC5D,OAAO,CAEX,CACA,OAAO,CACT,EACA3B,EAAInyO,UAAU2zO,UAAY,SAAU31M,EAAM9L,GACxC,IAA8BvuB,EAAG0Y,EAA7B03N,EAAa,EAAGvuO,EAAM,GACtBwuO,EAAiBh2M,EAAK0J,UAAU,EAAG1J,EAAKgqD,YAAY,MAAMv/E,MAAM,KAChE5C,EAAQqsB,EAAKzpB,MAAM,KACvB,GAAIurO,EAAenwO,QAAUgC,EAAMhC,OACjC,IAAKF,EAAI,EAAG0Y,EAAI23N,EAAenwO,OAAQF,EAAI0Y,EAAG1Y,IAC5C,GAAIA,GAAKkC,EAAMhC,QAAUmwO,EAAerwO,KAAOkC,EAAMlC,GAAI,CACvDowO,EAAapwO,EAAI,EACjB,KACF,CAGJ,GAAIqwO,EAAenwO,OAASgC,EAAMhC,OAChC,IAAKF,EAAI,EAAG0Y,EAAIxW,EAAMhC,OAAQF,EAAI0Y,EAAG1Y,IACnC,GAAIA,GAAKqwO,EAAenwO,QAAUmwO,EAAerwO,KAAOkC,EAAMlC,GAAI,CAChEowO,EAAapwO,EAAI,EACjB,KACF,CAGJ,GAAmB,IAAfowO,EACF,OAAO7hN,EAET,IAAKvuB,EAAI,EAAG0Y,EAAI23N,EAAenwO,QAAUkwO,EAAa,GAAIpwO,EAAI0Y,EAAG1Y,IAC/D6B,GAAO,MAET,IAAK7B,EAAIowO,EAAa,EAAG13N,EAAIxW,EAAMhC,OAAQF,EAAI0Y,EAAG1Y,IAE9C6B,GADE7B,IAAMowO,EAAa,EACd,IAAMluO,EAAMlC,GAEZkC,EAAMlC,GAGjB,OAAO6B,CACT,EACA2sO,EAAInyO,UAAUsyO,UAAY,SAAUt0M,EAAM9L,GACxC,IAAIvuB,EAAmBswO,EAAhBC,EAAK,EAAGnhN,EAAI,GACfy9K,EAAK,MAAMtoM,KAAKgqB,GAAQ,IAAM,GAC9B8hN,EAAiBh2M,EAAKv1B,MAAM,KAC5B0rO,EAAiBjiN,EAAKzpB,MAAM,KAOhC,IANAkpO,GAAOqC,GAAgB,SAAUrnO,GAC3BA,GACFomB,EAAExvB,KAAKoJ,EAEX,IACAqnO,EAAiBjhN,EACZpvB,EAAIwwO,EAAetwO,OAAS,EAAGkvB,EAAI,GAAIpvB,GAAK,EAAGA,IACjB,IAA7BwwO,EAAexwO,GAAGE,QAAsC,MAAtBswO,EAAexwO,KAG3B,OAAtBwwO,EAAexwO,GAIfuwO,EAAK,EACPA,IAGFnhN,EAAExvB,KAAK4wO,EAAexwO,IAPpBuwO,KAqBJ,OAN6B,KAJ3BD,GAFFtwO,EAAIqwO,EAAenwO,OAASqwO,IACnB,EACGx2N,GAAQqV,GAAG7pB,KAAK,KAEhB8qO,EAAe13N,MAAM,EAAG3Y,GAAGuF,KAAK,KAAO,IAAMwU,GAAQqV,GAAG7pB,KAAK,MAE7D7F,QAAQ,OAClB4wO,EAAU,IAAMA,GAEdzjC,GAAMyjC,EAAQjsJ,YAAY,OAASisJ,EAAQpwO,OAAS,IACtDowO,GAAWzjC,GAENyjC,CACT,EACA9B,EAAInyO,UAAUszO,OAAS,SAAUc,GAI/B,IAAInxO,EA8BJ,YAjCoB,IAAhBmxO,IACFA,GAAc,GAGX5tO,KAAKmzD,SAAUy6K,IAClBnxO,EAAI,GACCmxO,IACC5tO,KAAKmtL,SACP1wL,GAAKuD,KAAKmtL,SAAW,MAErB1wL,GAAK,KAEHuD,KAAKgsO,WACPvvO,GAAKuD,KAAKgsO,SAAW,KAEnBhsO,KAAKqiB,OACP5lB,GAAKuD,KAAKqiB,MAERriB,KAAKotL,OACP3wL,GAAK,IAAMuD,KAAKotL,OAGhBptL,KAAK0rB,OACPjvB,GAAKuD,KAAK0rB,MAER1rB,KAAKse,QACP7hB,GAAK,IAAMuD,KAAKse,OAEdte,KAAKkJ,SACPzM,GAAK,IAAMuD,KAAKkJ,QAElBlJ,KAAKmzD,OAAS12D,GAETuD,KAAKmzD,MACd,EACOw4K,CACT,CA9PU,GAgQNkC,GAA0B90O,GAAMw7I,QAAQ,6EAIxCu5F,GAAqBvzN,IAAO,WAC9B,OAAOhL,SAASw+N,eAAeC,mBAAmB,SACpD,IACIC,GAA0B,SAAUnqO,EAAQyV,EAAM20N,GAKpD,IAJA,IAAIC,EAAiB,iCACjBC,EAAe,4EACfC,EAAqBvqO,EAAOgnM,wBAC5Bl0K,EAAQ,EAAG7U,EAAQmsN,EACN,IAAVt3M,GAEL,IADAu3M,EAAelhC,UAAYlrL,IACd,CACX,IAAIusN,EAAaH,EAAe15I,KAAKl7E,GACrC,GAAmB,OAAf+0N,EACF,OAAOvsN,EACF,GAAsB,MAAlBusN,EAAW,GAAY,CAE9BvsN,EADE8wE,GAAWy7I,EAAW,GAAI,MACpBC,GAAoBh1N,GAAM,EAAO+0N,EAAWvsN,MAAQ,MAAM1kB,QAE1DkxO,GAAoBh1N,GAAM,EAAM+0N,EAAWvsN,MAAQ,GAE7D,KACF,CACEqsN,EAAanhC,UAAYkhC,EAAelhC,UACxC,IAAIuhC,EAAWJ,EAAa35I,KAAKl7E,GACjC,IAAIvf,EAAOw0O,IAAaA,EAASzsN,QAAUosN,EAAelhC,UAA1D,CAGsB,MAAlBqhC,EAAW,GACb13M,GAAS,EACCze,GAAMk2N,EAAoBC,EAAW,MAC/C13M,GAAS,GAEX7U,EAAQosN,EAAelhC,UAAYuhC,EAAS,GAAGnxO,OAC/C,KAPA,CASJ,CAEF,OAAO0kB,CACT,EAIIwsN,GAAsB,SAAUh1N,EAAMmyM,EAASwiB,QAC9B,IAAfA,IACFA,EAAa,GAEf,IAAIO,EAASl1N,EAAK7Y,cAClB,IAA4C,IAAxC+tO,EAAO5xO,QAAQ,OAAQqxO,IARF,SAAU30N,EAAM20N,GACzC,MAAO,2CAA2CxsO,KAAK6X,EAAKZ,OAAOu1N,GACrE,CAMmDQ,CAAqBD,EAAQP,GAAa,CACzF,IAAIS,EAAaF,EAAO5xO,QAAQ,UAAWqxO,GAC3C,OAAOO,EAAO5xO,QAAQ,IAAK8xO,EAC7B,CACE,GAAIjjB,EAAS,CACX,IAAIrqL,EAAWotM,EAAO5xO,QAAQ,IAAKqxO,GACnC,OAAqB,IAAd7sM,EAAkBA,EAAWotM,EAAOpxO,MAC7C,CACE,IAAIuxO,EAAmB,SACvBA,EAAiB3hC,UAAYihC,EAC7B,IAAIrtN,EAAQ+tN,EAAiBn6I,KAAKl7E,GAClC,OAAOsH,EAAQA,EAAMkB,MAAQlB,EAAM,GAAGxjB,OAASoxO,EAAOpxO,MAG5D,EACIwxO,GAAsB,SAAUC,EAAQC,GAC1C,IAAIvwN,EAAUswN,EAAOr6I,KAAKs6I,GAC1B,GAAIvwN,EAAS,CACX,IAAI+nJ,EAAS/nJ,EAAQ,GACjBplB,EAAQolB,EAAQ,GACpB,MAAyB,iBAAX+nJ,GAAgD,mBAAzBA,EAAO7lK,cAAqCtH,EAAQ,IAC3F,CACE,OAAO,IAEX,EACI41O,GAAY,SAAUtoO,EAAU5C,QACnB,IAAXA,IACFA,EAAS6gM,MAEXj+L,EAAWA,GAAY,CAAC,EACxB,IAAIuc,EAAM6qN,KACNtzH,EAAOv3F,EAAIzT,cAAc,SACK,IAA9B9I,EAASuoO,mBACXvoO,EAASuoO,kBAAmB,GAE9B,IAAIC,EAAUxoO,EAASwoO,QAAUxoO,EAASwoO,QAAU90O,EAChD+0O,EAAQzoO,EAASyoO,MAAQzoO,EAASyoO,MAAQ/0O,EAC1C6E,EAAOyH,EAASzH,KAAOyH,EAASzH,KAAO7E,EACvCwe,EAAQlS,EAASkS,MAAQlS,EAASkS,MAAQxe,EAC1C2oH,EAAMr8G,EAASq8G,IAAMr8G,EAASq8G,IAAM3oH,EACpCg1O,EAAK1oO,EAAS0oO,GAAK1oO,EAAS0oO,GAAKh1O,EACjCi1O,EAAU3oO,EAAS2oO,QAAU3oO,EAAS2oO,QAAUj1O,EAmTpD,MAAO,CAAEwR,MANG,SAAU2N,EAAM/V,QACX,IAAXA,IACFA,EAAS,QA9SO,SAAU8rO,EAAe9rO,QAC5B,IAAXA,IACFA,EAAS,QA2GX,IAzGA,IACIgb,EAAoBplB,EAAOm2O,EAE3BC,EAAUryO,EAAGsyO,EAAU91O,EACvB+1O,EAAmBC,EACnBC,EAAaC,EAAgB/qM,EAAMgrM,EAAcC,EAAoBC,EACrE7nC,EAAoBC,EAAmBC,EAChBsW,EAPvBplM,EAAO+1N,EAAc/1N,KACZwI,EAAQ,EACjBqrB,EAAQ,GAK0BmuJ,EAAU,EAC5CoI,EAASN,GAASM,OAClBssC,EAAmBl3O,GAAMw7I,QAAQ,gEACjC27F,EAAyB,SAAX1sO,EAAoB,EAAI,EACtC2sO,EAAgB,SAAUx2O,GAC5B,IAAI+8C,EAAKv5C,EAET,IADAu5C,EAAMtJ,EAAM/vC,OACLq5C,KACDtJ,EAAMsJ,GAAK/8C,OAASA,IAI1B,GAAI+8C,GAAO,EAAG,CACZ,IAAKv5C,EAAIiwC,EAAM/vC,OAAS,EAAGF,GAAKu5C,EAAKv5C,KACnCxD,EAAOyzC,EAAMjwC,IACJkvG,OACP0W,EAAIppH,EAAKA,MAGbyzC,EAAM/vC,OAASq5C,CACjB,CACF,EACI05L,EAAc,SAAUh3O,EAAOqrB,GACjC,OAAOxlB,EAAK8rO,GAAgB3xO,EAAOk2O,GAAgB7qN,EACrD,EACI4rN,EAAiB,SAAUj3O,GACf,KAAVA,IAGoB,MAApBA,EAAMkoF,OAAO,KACfloF,EAAQ,IAAMA,GAEXsN,EAAS4pO,4BAAmE,QAArCl3O,EAAMuf,OAAO,EAAG,GAAGjY,gBAC7DtH,EAAQ,IAAMA,GAEhB81O,EAAQnE,GAAgB3xO,EAAOk2O,IACjC,EAIIiB,EAA0B,SAAUn3O,EAAO80O,GAC7C,IAAIsC,EAAWp3O,GAAS,GACpBsyN,GAAW74H,GAAW29I,EAAU,MAChCnvM,EAAWktM,GAAoBh1N,EAAMmyM,EAASwiB,GAGlD,OAFA90O,EAAQmgB,EAAKZ,OAAOu1N,EAAY7sM,EAAW6sM,GAC3CmC,EAAe3kB,EAAU8kB,EAAWp3O,EAAQA,GACrCioC,EAAW,CACpB,EACIovM,EAAiB,SAAUj4C,EAAS7+L,EAAMP,EAAOs3O,EAAMC,GAGzD,GADAv3O,EAbgB,SAAUA,GAC1B,OAAO2xO,GAAgB3xO,EAAOk2O,EAChC,CAWUsB,EADRj3O,EAAOA,EAAK+G,iBACgBmwO,EAAel3O,EAAOgqM,EAAOvqM,GAASs3O,GAAQC,GAAQ,KAC9ExkI,IAAaujI,IAAqD,IA1JhD,SAAU/1O,GACpC,OAAiC,IAA1BA,EAAKkD,QAAQ,UAA4C,IAA1BlD,EAAKkD,QAAQ,QACrD,CAwJ4Ci0O,CAAsBn3O,GAAiB,CAC3E,IAAIo3O,EAAWhB,EAAmBp2O,GAClC,IAAKo3O,GAAYf,EAAwB,CAEvC,IADA,IAAI3iC,EAAM2iC,EAAuB3yO,OAC1BgwM,OACL0jC,EAAWf,EAAuB3iC,IACrBvoC,QAAQpjK,KAAK/H,MAIf,IAAT0zM,IACF0jC,EAAW,KAEf,CACA,IAAKA,EACH,OAEF,GAAIA,EAASxoC,eAAiBnvM,KAAS23O,EAASxoC,aAC9C,MAEJ,EAC0B,SAAT5uM,GAA4B,OAATA,IAClB6+L,KAAWq1C,KAA4Bz0O,KAAS6pB,GAAO7pB,KAASohH,IAG9Ey1H,EAAiBt2O,KAAUgyO,GAAIllO,UAAUrN,EAAOo/L,EAAS9xL,IAGzDgpO,IAAsB/1O,KAAQs2O,GAA2C,IAAvBt2O,EAAKkD,QAAQ,SAGnE2yO,EAAS5zO,IAAIjC,GAAQP,EACrBo2O,EAASzyO,KAAK,CACZpD,KAAMA,EACNP,MAAOA,IAEX,EACI43O,EAAc,IAAIx/I,OAAO,iUAA0W,KACnYy/I,EAAa,iFACb5C,EAAqBvqO,EAAOgnM,wBAC5BomC,EAAcxqO,EAASyqO,uBAAyBrtO,EAAOinM,yBACvD8lC,EAAe/sO,EAAO8mM,eACtBz+F,EAAWzlG,EAASylG,SACpBilI,EAAyB1qO,EAAS2qO,iBAClCC,EAAiB5qO,EAASuoO,iBAC1BnqC,EAAkBhhM,EAAOqnM,qBACzBomC,EAAch4N,EAAO,IAClBiF,EAAUwyN,EAAYv8I,KAAK88I,IAAc,CAC9C,IAAItuJ,GAAYzkE,EAAQ,GAIxB,GAHIuD,EAAQvD,EAAQuD,OAClBquN,EAAYzsC,EAAOpqL,EAAKZ,OAAOoJ,EAAOvD,EAAQuD,MAAQA,KAEpD3oB,EAAQolB,EAAQ,GAEM,OADxBplB,EAAQA,EAAMsH,eACJ4gF,OAAO,KACfloF,EAAQA,EAAMuf,OAAO,IAEvBw3N,EAAc/2O,QACT,GAAIA,EAAQolB,EAAQ,GAAI,CAC7B,GAAIA,EAAQuD,MAAQkhE,GAAU5lF,OAASkc,EAAKlc,OAAQ,CAClD+yO,EAAYzsC,EAAOpqL,EAAKZ,OAAO6F,EAAQuD,SACvCA,EAAQvD,EAAQuD,MAAQkhE,GAAU5lF,OAClC,QACF,CAEwB,OADxBjE,EAAQA,EAAMsH,eACJ4gF,OAAO,KACfloF,EAAQA,EAAMuf,OAAO,IAEvBg3N,EAAev2O,KAASi1O,EACpBiD,GAAkBJ,EAAY93O,IAAUg0C,EAAM/vC,OAAS,GAAK+vC,EAAMA,EAAM/vC,OAAS,GAAG1D,OAASP,GAC/F+2O,EAAc/2O,GAEhB,IAAIo4O,GAAa3C,GAAoBoC,EAAYzyN,EAAQ,IACzD,GAAmB,OAAfgzN,GAAqB,CACvB,GAAmB,QAAfA,GAAsB,CACxBzvN,EAAQksN,GAAwBnqO,EAAQyV,EAAMy3N,EAAY/jC,WAC1D+jC,EAAY/jC,UAAYlrL,EACxB,QACF,CACA8tN,GAAiB,CACnB,CACA,IAAK1jI,IAAayjI,EAAc9rO,EAAOulM,eAAejwM,IAAS,CAqB7D,GApBAy2O,GAAiB,EACb1jI,IACF4jI,EAAqBH,EAAYrtM,WACjCytM,EAAyBJ,EAAYpnC,oBAEnCsnC,EAAetxN,EAAQ,MACzBkxN,GAA+D,IAA3CI,EAAajzO,QAAQ,mBAChBu0O,IACvBvB,GAAiB,IAEnBL,EAAW,IACF5zO,IAAM,CAAC,EAChBk0O,EAAarsO,QAAQwtO,GAAY,SAAUpwN,EAAOlnB,EAAMwI,EAAKuuO,EAAMC,GAEjE,OADAF,EAAer3O,EAAOO,EAAMwI,EAAKuuO,EAAMC,GAChC,EACT,MAEAnB,EAAW,IACF5zO,IAAM,CAAC,EAEduwG,IAAaujI,EAAmB,CAQlC,GAPAvnC,EAAqBynC,EAAYznC,mBACjCC,EAAoBwnC,EAAYxnC,kBAChCC,EAAmBunC,EAAYvnC,iBACPunC,EAAY1nC,mBACNsnC,EAASnyO,SACrCwyO,GAAiB,GAEfxnC,EAEF,IADAlrM,EAAIkrM,EAAiBhrM,OACdF,KAELxD,GADAmrC,EAAOujK,EAAiBlrM,IACZxD,KAEM,YADlBglN,EAAY75K,EAAK1rC,SAEfulN,EAAY,OAASpjB,KAEvBi0C,EAAS5zO,IAAIjC,GAAQglN,EACrB6wB,EAASzyO,KAAK,CACZpD,KAAMA,EACNP,MAAOulN,IAIb,GAAIvW,EAEF,IADAjrM,EAAIirM,EAAkB/qM,OACfF,MAELxD,GADAmrC,EAAOsjK,EAAkBjrM,IACbxD,QACE61O,EAAS5zO,MAEH,YADlB+iN,EAAY75K,EAAK1rC,SAEfulN,EAAY,OAASpjB,KAEvBi0C,EAAS5zO,IAAIjC,GAAQglN,EACrB6wB,EAASzyO,KAAK,CACZpD,KAAMA,EACNP,MAAOulN,KAKf,GAAIxW,EAAoB,CAEtB,IADAhrM,EAAIgrM,EAAmB9qM,OAChBF,OACDgrM,EAAmBhrM,KAAMqyO,EAAS5zO,QAI7B,IAAPuB,IACF0yO,GAAiB,EAErB,CACA,GAAI/qM,EAAO0qM,EAAS5zO,IAAI,kBAAmB,CACzC,GAAa,QAATkpC,EAAgB,CAClB/iB,EAAQksN,GAAwBnqO,EAAQyV,EAAMy3N,EAAY/jC,WAC1D+jC,EAAY/jC,UAAYlrL,EACxB,QACF,CACA8tN,GAAiB,CACnB,CACF,CACIA,GACFj3N,EAAMxf,EAAOo2O,EAAUG,EAE3B,MACEE,GAAiB,EAEnB,GAAIN,EAAYzqC,EAAgB1rM,GAAQ,CACtCm2O,EAAUtiC,UAAYlrL,EAAQvD,EAAQuD,MAAQkhE,GAAU5lF,QACpDmhB,EAAU+wN,EAAU96I,KAAKl7E,KACvBs2N,IACFJ,EAAWl2N,EAAKZ,OAAOoJ,EAAOvD,EAAQuD,MAAQA,IAEhDA,EAAQvD,EAAQuD,MAAQvD,EAAQ,GAAGnhB,SAEnCoyO,EAAWl2N,EAAKZ,OAAOoJ,GACvBA,EAAQxI,EAAKlc,QAEXwyO,IACEJ,EAASpyO,OAAS,GACpB+yO,EAAYX,GAAU,GAExB1sH,EAAI3pH,IAEN43O,EAAY/jC,UAAYlrL,EACxB,QACF,CACK4tN,IACEG,GAAgBA,EAAajzO,QAAQ,OAASizO,EAAazyO,OAAS,EAK9DwyO,GACT9sH,EAAI3pH,GALJg0C,EAAMrwC,KAAK,CACTpD,KAAMP,EACNizG,MAAOwjI,IAMf,MAAO,GAAIz2O,EAAQolB,EAAQ,GACzB6xN,EAAej3O,QACV,GAAIA,EAAQolB,EAAQ,GAAI,CAE7B,KAD0C,IAAhB0xN,GAAqBxpO,EAAS+qO,gBAAkBrkM,EAAM/vC,OAAS,GAAKyG,EAAOunM,aAAaj+J,EAAMA,EAAM/vC,OAAS,GAAG1D,KAAM,WAGzI,CACLooB,EAAQwuN,EAAwB,GAAI/xN,EAAQuD,MAAQ,GACpDivN,EAAY/jC,UAAYlrL,EACxB,QACF,CALEotN,EAAM/1O,EAMV,MAAO,GAAIA,EAAQolB,EAAQ,GACzB6wN,EAAQj2O,OACH,KAAKA,EAAQolB,EAAQ,KAAqB,OAAdykE,GAAoB,CACrDlhE,EAAQwuN,EAAwBn3O,EAAOolB,EAAQuD,MAAQkhE,GAAU5lF,QACjE2zO,EAAY/jC,UAAYlrL,EACxB,QACF,CAAO,GAAI3oB,EAAQolB,EAAQ,GAAI,CAC7B,GAAoB,IAAhB0xN,EAEG,CACLnuN,EAAQwuN,EAAwB,IAAK/xN,EAAQuD,MAAQ,GACrDivN,EAAY/jC,UAAYlrL,EACxB,QACF,CALEqtN,EAAGh2O,EAAOolB,EAAQ,GAMtB,EACAuD,EAAQvD,EAAQuD,MAAQkhE,GAAU5lF,MACpC,CAIA,IAHI0kB,EAAQxI,EAAKlc,QACf+yO,EAAYzsC,EAAOpqL,EAAKZ,OAAOoJ,KAE5B5kB,EAAIiwC,EAAM/vC,OAAS,EAAGF,GAAK,EAAGA,KACjC/D,EAAQg0C,EAAMjwC,IACJkvG,OACR0W,EAAI3pH,EAAMO,KAGhB,CAKE+3O,CAhuBwB,SAAUn4N,GAQpC,IAPA,IAIIiF,EAJAmzN,EAAe,8CACf9rJ,EAAS,GACTqlJ,EAAO,CAAC,EACRjsM,EAASk6B,GAAS,OAElBp3C,EAAQ,EACR6U,EAAQ,EACLpY,EAAUmzN,EAAal9I,KAAKl7E,IAAO,CACxC,IAAI4oG,EAAM3jG,EAAQ,GACdysN,EAAUhsM,EAAS,IAAMrI,IAC7Bs0M,EAAKD,GAAW9oH,EACZpgG,EAAQvD,EAAQuD,OAClB8jE,EAAO9oF,KAAKwc,EAAKZ,OAAOoJ,EAAOvD,EAAQuD,MAAQA,IAEjD8jE,EAAO9oF,KAAKkuO,GACZlpN,EAAQvD,EAAQuD,MAAQogG,EAAI9kH,MAC9B,CACA,IAAI2tO,EAAK,IAAIx5I,OAAOvyD,EAAS,UAAW,KACxC,OAAc,IAAVld,EACK,CACLkd,OAAQA,EACRisM,KAAMA,EACN3xN,KAAMA,EACNyxN,GAAIA,IAGFjpN,EAAQxI,EAAKlc,QACfwoF,EAAO9oF,KAAKwc,EAAKZ,OAAOoJ,IAEnB,CACLkd,OAAQA,EACRisM,KAAMA,EACN3xN,KAAMssE,EAAOnjF,KAAK,IAClBsoO,GAAIA,GAGV,CA2rBkB4G,CAAsBr4N,GAAO/V,EAC7C,EAEF,EACAwrO,GAAU6C,WAAa5D,GAEvB,IAII6D,GAAe,SAAUhU,EAAYvkN,GAMvC,IALA,IAIIiF,EAJAuzN,EAAiB,0CACjBjuO,EAASg6N,EAAWh6N,OACpB+5B,EAPS,SAAUm0M,EAAWz4N,GAClC,IAAI04N,EAAoB,IAAIzgJ,OAAO,CAAC,QAAUwgJ,EAAUtvO,KAAK,KAAO,aAAaA,KAAK,KAAM,MAC5F,OAAO6W,EAAK9V,QAAQwuO,EAAmB,GACzC,CAIgBC,CAASpU,EAAWqU,eAAgB54N,GAC9C80N,EAAqBvqO,EAAOgnM,wBAEzBtsL,EAAUuzN,EAAet9I,KAAK52D,IAAU,CAC7C,IAEIu0M,EAFArwN,EAAQgwN,EAAe9kC,UACvBluG,EAAcvgF,EAAQ,GAAGnhB,OAG3B+0O,EADE/D,EAAmB7vN,EAAQ,IACfuD,EAEAitN,GAAU6C,WAAW/tO,EAAQ+5B,EAAS9b,GAEtD8b,EAAUA,EAAQqD,UAAU,EAAGnf,EAAQg9E,GAAelhE,EAAQqD,UAAUkxM,GACxEL,EAAe9kC,UAAYlrL,EAAQg9E,CACrC,CACA,OAAO8/F,GAAOhhK,EAChB,EACIw0M,GAAeP,GA+CfQ,GAASv5O,GAAM8C,KACf02O,GAAe,SAAUvvO,GA4C3B,MAAO,CAAEg0M,QA3CK,SAAUoc,EAAOC,GAC7B,GAAID,EAAM3yN,WAAa4yN,EAAM5yN,SAC3B,OAAO,EAET,IAAI69M,EAAa,SAAUx3M,GACzB,IAAI0rO,EAAU,CAAC,EAOf,OANAF,GAAOtvO,EAAIs7M,WAAWx3M,IAAO,SAAUg+B,GACrC,IAAInrC,EAAOmrC,EAAKrkC,SAASC,cACC,IAAtB/G,EAAKkD,QAAQ,MAAuB,UAATlD,GAA8C,IAA1BA,EAAKkD,QAAQ,WAC9D21O,EAAQ74O,GAAQqJ,EAAIiI,UAAUnE,EAAMnN,GAExC,IACO64O,CACT,EACIC,EAAiB,SAAUC,EAAMC,GACnC,IAAIv5O,EAAOO,EACX,IAAKA,KAAQ+4O,EACX,GAAIv6N,GAAMu6N,EAAM/4O,GAAO,CAErB,QAAqB,KADrBP,EAAQu5O,EAAKh5O,IAEX,OAAO,EAET,GAAI+4O,EAAK/4O,KAAUP,EACjB,OAAO,SAEFu5O,EAAKh5O,EACd,CAEF,IAAKA,KAAQg5O,EACX,GAAIx6N,GAAMw6N,EAAMh5O,GACd,OAAO,EAGX,OAAO,CACT,EACA,SAAK84O,EAAen0B,EAAW8U,GAAQ9U,EAAW+U,MAG7Cof,EAAezvO,EAAIyuI,WAAWzuI,EAAIiI,UAAUmoN,EAAO,UAAWpwN,EAAIyuI,WAAWzuI,EAAIiI,UAAUooN,EAAO,YAG/F0E,GAAiB3E,IAAW2E,GAAiB1E,GACvD,EAEF,EAEIuf,GAAY75O,GAAMw7I,QAClBs+F,GAAS,SAAUnsO,GACrB,IAAI6S,EAAO,GAEPu5N,GADJpsO,EAAWA,GAAY,CAAC,GACFosO,OAClBC,EAAeH,GAAUlsO,EAASssO,eAAiB,IACnDC,EAAcL,GAAUlsO,EAASwsO,cAAgB,IACjDxtO,EAAS29L,GAASC,cAAc58L,EAASysO,iBAAmB,MAAOzsO,EAAS08L,UAC5EgwC,EAAyC,SAA5B1sO,EAAS2sO,eAC1B,MAAO,CACLz6N,MAAO,SAAUjf,EAAMyO,EAAOqhB,GAC5B,IAAItsB,EAAG0Y,EAAGivB,EAAM1rC,EAQhB,GAPI05O,GAAUC,EAAap5O,IAAS4f,EAAKlc,OAAS,IAChDjE,EAAQmgB,EAAKA,EAAKlc,OAAS,IACjBA,OAAS,GAAe,OAAVjE,GACtBmgB,EAAKxc,KAAK,MAGdwc,EAAKxc,KAAK,IAAKpD,GACXyO,EACF,IAAKjL,EAAI,EAAG0Y,EAAIzN,EAAM/K,OAAQF,EAAI0Y,EAAG1Y,IACnC2nC,EAAO18B,EAAMjL,GACboc,EAAKxc,KAAK,IAAK+nC,EAAKnrC,KAAM,KAAM+L,EAAOo/B,EAAK1rC,OAAO,GAAO,KAI5DmgB,EAAKA,EAAKlc,SADPosB,GAAS2pN,EACQ,IAEA,MAElB3pN,GAASqpN,GAAUG,EAAYt5O,IAAS4f,EAAKlc,OAAS,IACxDjE,EAAQmgB,EAAKA,EAAKlc,OAAS,IACjBA,OAAS,GAAe,OAAVjE,GACtBmgB,EAAKxc,KAAK,KAGhB,EACAgmH,IAAK,SAAUppH,GACb,IAAIP,EACJmgB,EAAKxc,KAAK,KAAMpD,EAAM,KAClBm5O,GAAUG,EAAYt5O,IAAS4f,EAAKlc,OAAS,IAC/CjE,EAAQmgB,EAAKA,EAAKlc,OAAS,IACjBA,OAAS,GAAe,OAAVjE,GACtBmgB,EAAKxc,KAAK,KAGhB,EACAkC,KAAM,SAAUA,EAAMwlB,GAChBxlB,EAAK5B,OAAS,IAChBkc,EAAKA,EAAKlc,QAAUonB,EAAMxlB,EAAOyG,EAAOzG,GAE5C,EACAkwO,MAAO,SAAUlwO,GACfsa,EAAKxc,KAAK,YAAakC,EAAM,MAC/B,EACAiwO,QAAS,SAAUjwO,GACjBsa,EAAKxc,KAAK,UAAQkC,EAAM,SAC1B,EACAmwO,GAAI,SAAUz1O,EAAMsF,GACdA,EACFsa,EAAKxc,KAAK,KAAMpD,EAAM,IAAK+L,EAAOzG,GAAO,MAEzCsa,EAAKxc,KAAK,KAAMpD,EAAM,MAEpBm5O,GACFv5N,EAAKxc,KAAK,KAEd,EACAsyO,QAAS,SAAUpwO,GACjBsa,EAAKxc,KAAK,YAAakC,EAAM,IAAK6zO,EAAS,KAAO,GACpD,EACAxmL,MAAO,WACL/yC,EAAKlc,OAAS,CAChB,EACAkG,WAAY,WACV,OAAOgW,EAAK7W,KAAK,IAAIe,QAAQ,MAAO,GACtC,EAEJ,EAEI6vO,GAAiB,SAAU5sO,EAAU5C,QACxB,IAAXA,IACFA,EAAS6gM,MAEX,IAAI4uC,EAASV,GAAOnsO,GAsFpB,OArFAA,EAAWA,GAAY,CAAC,GACfylG,WAAW,aAAczlG,IAAWA,EAASylG,SAoF/C,CAAE+gG,UAnFO,SAAUpmM,GACxB,IAAIqlG,EAAWzlG,EAASylG,SACpBzoE,EAAW,CACb,EAAG,SAAU58B,GACXysO,EAAOt0O,KAAK6H,EAAK1N,MAAO0N,EAAK2d,IAC/B,EACA,EAAG,SAAU3d,GACXysO,EAAOrE,QAAQpoO,EAAK1N,MACtB,EACA,EAAG,SAAU0N,GACXysO,EAAOnE,GAAGtoO,EAAKnN,KAAMmN,EAAK1N,MAC5B,EACA,GAAI,SAAU0N,GACZysO,EAAOlE,QAAQvoO,EAAK1N,MACtB,EACA,EAAG,SAAU0N,GACXysO,EAAOpE,MAAMroO,EAAK1N,MACpB,EACA,GAAI,SAAU0N,GACZ,GAAIA,EAAOA,EAAK1F,WACd,GACEm1L,EAAKzvL,SACEA,EAAOA,EAAKvF,KAEzB,GAEFgyO,EAAOjnL,QACP,IAAIiqI,EAAO,SAAUzvL,GACnB,IAAI2hB,EAAUib,EAAS58B,EAAK3N,MAC5B,GAAKsvB,EA4CHA,EAAQ3hB,OA5CI,CACZ,IAAIy/J,EAASz/J,EAAKnN,KACduoN,EAAUp7M,EAAK+jO,WACfziO,EAAQtB,EAAKy7B,WACjB,GAAI4pE,GAAY/jG,GAASA,EAAM/K,OAAS,EAAG,CACzC,IAAIm2O,EAAc,GAClBA,EAAY53O,IAAM,CAAC,EACnB,IAAIg0O,EAAc9rO,EAAOulM,eAAeviM,EAAKnN,MAC7C,GAAIi2O,EAAa,CACf,IAAK,IAAIzyO,EAAI,EAAG0Y,EAAI+5N,EAAYpqC,gBAAgBnoM,OAAQF,EAAI0Y,EAAG1Y,IAE7D,IADIk7L,EAAWu3C,EAAYpqC,gBAAgBroM,MAC3BiL,EAAMxM,IAAK,CACzB,IAAI+iN,EAAYv2M,EAAMxM,IAAIy8L,GAC1Bm7C,EAAY53O,IAAIy8L,GAAYsmB,EAC5B60B,EAAYz2O,KAAK,CACfpD,KAAM0+L,EACNj/L,MAAOulN,GAEX,CAEF,IAASxhN,EAAI,EAAG0Y,EAAIzN,EAAM/K,OAAQF,EAAI0Y,EAAG1Y,IAAK,CAC5C,IAAIk7L,KAAWjwL,EAAMjL,GAAGxD,QACN65O,EAAY53O,MACxB+iN,EAAYv2M,EAAMxM,IAAIy8L,GAC1Bm7C,EAAY53O,IAAIy8L,GAAYsmB,EAC5B60B,EAAYz2O,KAAK,CACfpD,KAAM0+L,EACNj/L,MAAOulN,IAGb,CACAv2M,EAAQorO,CACV,CACF,CAEA,GADAD,EAAO36N,MAAM9R,EAAKnN,KAAMyO,EAAO85M,IAC1BA,EAAS,CACZ,GAAIp7M,EAAOA,EAAK1F,WACd,GACEm1L,EAAKzvL,SACEA,EAAOA,EAAKvF,MAEvBgyO,EAAOxwH,IAAIwjD,EACb,CACF,CAGF,EAMA,OALkB,IAAdz/J,EAAK3N,MAAeuN,EAASkzJ,MAG/Bl2H,EAAS,IAAI58B,GAFbyvL,EAAKzvL,GAIAysO,EAAOhwO,YAChB,EAEF,EAEIkwO,GAAuB,IAAIC,IAoD7B1gD,EAlD8B,CAC5B,SACA,cACA,eACA,aACA,gBACA,UACA,eACA,gBACA,cACA,iBACA,SACA,eACA,eACA,eACA,aACA,wBACA,kBACA,mBACA,mBACA,oBACA,sBACA,oBACA,kBACA,QACA,WACA,OACA,QACA,MACA,SACA,UACA,UACA,YACA,QACA,YACA,YACA,SACA,aACA,aACA,WACA,aACA,aACA,gBACA,iBACA,aACA,mBACA,sBACA,sBACA,+BAE8B,SAAU75K,GACxCs6N,GAAqBh7O,IAAI0gB,EAC3B,IAEF,IAAIw6N,GAAsB,CACxB,OACA,kBACA,iBAEEC,GAAgB,SAAU5wO,EAAK8D,GACjC,OAAO7G,GAAK+C,EAAIyuI,WAAWzuI,EAAIiI,UAAUnE,EAAM,UACjD,EAgBI+sO,GAAmB,SAAU7wO,EAAK8D,EAAMmB,GAC1C,IAAI6rO,EAAiBF,GAAc5wO,EAAK8D,GACpCitO,EAAuBH,GAAc5wO,EAAKiF,GAC1C+rO,EAAgB,SAAUlmN,GAC5B,IAAIq5B,EAAYnkD,EAAI6nF,SAAS/jF,EAAMgnB,GAC/BmmN,EAAcjxO,EAAI6nF,SAAS5iF,EAAY6lB,GAC3C,OAAO7U,GAAWkuC,IAAcluC,GAAWg7N,IAAgB9sL,IAAc8sL,CAC3E,EACA,OAAOl4O,EAAO+3O,GAAgB,SAAUI,GACtC,IAAIC,EAAa,SAAUjuO,GACzB,OAAOnK,EAAOmK,GAAO,SAAU4nB,GAC7B,OAAOA,IAASomN,CAClB,GACF,EACA,IAAKC,EAAWJ,IAAyBI,EAAWR,IAAsB,CACxE,IAAIS,EArBDnhD,EAqBuC8gD,GArBtB,SAAU56N,GAChC,OAAOpd,EAAO43O,IAAqB,SAAU7lN,GAC3C,OAAO+kE,GAAW15E,EAAO2U,EAC3B,GACF,IAkBI,OAAO/xB,EAAOq4O,EAAeJ,EAC/B,CACE,OAAOA,EAAcE,EAEzB,GACF,EAEIG,GAAS,SAAUj8B,EAASr3M,EAAW21C,GACzC,OAAOh6C,EAASC,KAAK+5C,EAAIvY,aAAaliC,OAAOy8L,IAAU38L,QAAO,SAAUkD,GACtE,IAAIwwC,EAAQ2oK,EAAU,GAAK,EAC3B,OAAOr3M,EAAU9B,EAAKoF,KAAKi9E,OAAO5qC,EAAIx0B,SAAWutB,GACnD,GACF,EACI6kM,GAAgBx/N,EAAMu/N,IAAQ,EAAMnc,IACpCqc,GAAez/N,EAAMu/N,IAAQ,EAAOnc,IACpCsc,GAAc,SAAU99L,GAC1B,IAAIvY,EAAYuY,EAAIvY,YACpB,OAAOu6J,GAASv6J,KAAyC,IAA1BA,EAAU95B,KAAKhH,QAAgBuhM,GAAOzgK,EAAU95B,OAASk7N,GAAgBhG,eAAep7L,EAAUl2B,YACnI,EACIwsO,GAAyB,SAAU7vL,EAAQ7jD,GAC7C,OAAO,SAAU21C,GACf,OAAOh6C,EAASC,KAAKq2N,GAA6BpuK,EAAS,GAAK,EAAGlO,IAAMz6C,OAAO8E,GAAWhG,QAC7F,CACF,EACI25O,GAAe,SAAU5tO,GAC3B,OAAOgyL,GAAMhyL,IAA0D,UAAjD8+B,GAAMtsB,GAAqBxS,GAAO,UAC1D,EACI6tO,GAAY,SAAU7tO,GACxB,OAAOkyL,GAAyBlyL,KA5/Xf,SAAUA,GAC3B,OAAOkxL,GAAYlxL,IAAiD,QAAxCA,EAAKnF,aAAa,iBAChD,CA0/X4CizO,CAAa9tO,EACzD,EACI+tO,GAAqBJ,IAAuB,EAAMC,IAClDI,GAAoBL,IAAuB,EAAOC,IAClDK,GAAgBN,IAAuB,EAAMv7C,IAC7C87C,GAAeP,IAAuB,EAAOv7C,IAC7C+7C,GAAgBR,IAAuB,EAAMl8C,IAC7C28C,GAAeT,IAAuB,EAAOl8C,IAC7C48C,GAA+BV,IAAuB,EAAME,IAC5DS,GAA8BX,IAAuB,EAAOE,IAkB5DU,GAAoB,SAAU70O,GAChCipB,GAAMjpB,GACNgpB,GAAShpB,EAAK8Y,GAAsB,2BACtC,EACIg8N,GAAsB,SAAU90O,GAClC42L,GAAU52L,GAAK3E,MAAK,SAAUu7L,GAC5BJ,GAAYI,GAAWv7L,MAAK,SAAU05O,GAChCt3C,GAAUz9L,IAAQ29L,GAAO/G,IAAc6G,GAAUs3C,IACnD7xN,GAAS0zK,EAEb,GACF,GACF,EAcIrmL,GAAU,SAAU6H,EAAOg8B,GAC7B,OAViB,SAAUh8B,EAAOg8B,EAAM7zC,GACxC,OAAI8X,GAAW+7B,EAAMh8B,IAJE3b,EA12YT,SAAU8U,EAASimB,GAIjC,IAHA,IAAI/P,EAAO9tB,EAAW69B,GAAUA,EAASx9B,EACrCwI,EAAM+O,EAAQ/O,IACdqrB,EAAM,GACgB,OAAnBrrB,EAAIiF,iBAA0CxM,IAAnBuH,EAAIiF,YAA0B,CAC9D,IAAIutO,EAAYxyO,EAAIiF,WAChBnI,EAAIwZ,GAAqBk8N,GAE7B,GADAnnN,EAAItxB,KAAK+C,IACO,IAAZmoB,EAAKnoB,GACP,MAEAkD,EAAMwyO,CAEV,CACA,OAAOnnN,CACT,CAg2YoBonN,CAAU78N,GAAO,SAAUpY,GACzC,OAAOO,EAAUP,IAAQigB,GAAGjgB,EAAKo0C,EACnC,IANK33C,EAAG6Y,MAAM,GAAI,IAQX,GATI,IAAU7Y,CAWzB,CAESigN,CAAatkM,EAAOg8B,EAAMp6C,EACnC,EACIk7O,GAAiB,SAAU98N,EAAOg8B,GACpC,MAAO,CAACh8B,GAAOtW,OAAOyO,GAAQ6H,EAAOg8B,GACvC,EAEI+gM,GAA+B,SAAUv9B,EAASxjK,EAAMj4C,GAC1D,OAAO+4N,GAAetd,EAASxjK,EAAMj4C,EAAM63O,GAC7C,EACIoB,GAAoB,SAAUhhM,EAAM8B,GACtC,OAAOn7B,EAAOm6N,GAAep8N,GAAqBo9B,EAAIvY,aAAcyW,GAAOqpJ,GAC7E,EACI43C,GAA+B,SAAUz9B,EAASxjK,EAAM8B,GAC1D,OAAOi/L,GAA6Bv9B,EAASxjK,EAAK5xC,IAAK0zC,GAAK16C,QAAO,SAAU07C,GAC3E,OAAOk+L,GAAkBhhM,EAAM8B,GAAK97C,MAAK,WACvC,OAAgD,IAAzCi4N,GAAcn7K,EAAQhB,EAAK9B,EAAK5xC,IACzC,IAAG,SAAU8yO,GACX,OAAgD,IAAzCjjB,GAAcn7K,EAAQhB,EAAK9B,EAAK5xC,MAAkB6V,GAAWi9N,EAAWx8N,GAAqBo+B,EAAOvZ,aAC7G,GACF,GACF,EACI43M,GAAoB,SAAU39B,EAASxjK,EAAM8B,GAC/C,OAAOk/L,GAAkBhhM,EAAM8B,GAAK97C,MAAK,WACvC,OAAO+6O,GAA6Bv9B,EAASxjK,EAAK5xC,IAAK0zC,GAAK16C,QAAO,SAAU07C,GAC3E,OAAgD,IAAzCm7K,GAAcn7K,EAAQhB,EAAK9B,EAAK5xC,IACzC,GACF,IAAG,SAAU2e,GACX,OAAOg0N,GAA6Bv9B,EAASz2L,EAAO3e,IAAK0zC,GAAK17C,QAChE,GACF,EACIg7O,GAAmBlhO,EAAMihO,IAAmB,GAC5CE,GAAiBnhO,EAAMihO,IAAmB,GAC1CG,GAAgBphO,EAAM+gO,IAA8B,GACpDM,GAAerhO,EAAM+gO,IAA8B,GAEnDO,GAAO,SAAU1/L,GACnB,OAAOo9K,GAAuBp9K,GAAK36C,OAAOoiM,GAC5C,EACIk4C,GAAS,SAAUj+B,EAASxjK,EAAM8B,GACpC,IAAI4/L,EAAerjD,EAASyiD,GAAep8N,GAAqBo9B,EAAIvY,aAAcyW,GAAOqpJ,IACrFzkL,EAAQ9B,GAAK4+N,GAAcr7O,MAAM25C,GACrC,OAAO4gL,GAAapd,EAAS5+L,EAAMxW,IAAK0zC,GAAKz6C,OAAOm6O,GACtD,EACIG,GAAe,SAAU3hM,EAAM8B,GACjC,OAAOo9K,GAAuBp9K,GAAK36C,OAAOoiM,KAAWk4C,IAAO,EAAMzhM,EAAM8B,GAAK37C,QAC/E,EACIy7O,GAAY,SAAU5hM,EAAM8B,GAC9B,OA93I+B,SAAUA,GACzC,OAAOh6C,EAASC,KAAK+5C,EAAI5zC,SAAQ,IAAOlH,IAAI0d,GAC9C,CA43ISm9N,CAA2B//L,GAAK36C,OAAOoiM,KAAWk4C,IAAO,EAAOzhM,EAAM8B,GAAK37C,QACpF,EACI27O,GAAiB5hO,EAAMuhO,IAAQ,GAC/BM,GAAa7hO,EAAMuhO,IAAQ,GAE3BO,GAAmB,SAAUlgM,GAC/B,OAAO6zK,GAAcY,eAAez0K,KAASA,EAAI2oJ,cAAgB3oJ,EAAI6oJ,SACvE,EACIs3C,GAAkB,SAAUjiM,EAAM8B,GACpC,IAAI4/L,EAAerjD,EAASyiD,GAAep8N,GAAqBo9B,EAAIvY,aAAcyW,GAAOqpJ,IACzF,OAAOvmL,GAAK4+N,GAAcr7O,MAAM25C,EAClC,EACIkiM,GAAiB,SAAUliM,EAAM8B,GACnC,OAAIkgM,GAAiBlgM,GACZ69L,GAAa79L,GAEb69L,GAAa79L,IAAQq/K,GAAa8gB,GAAgBjiM,EAAM8B,GAAK1zC,IAAK0zC,GAAK36C,OAAOw4O,GAEzF,EACIwC,GAAgB,SAAUniM,EAAM8B,GAClC,OAAIkgM,GAAiBlgM,GACZ49L,GAAc59L,GAEd49L,GAAc59L,IAAQo/K,GAAa+gB,GAAgBjiM,EAAM8B,GAAK1zC,IAAK0zC,GAAK36C,OAAOu4O,GAE1F,EAOI0C,GAAU,SAAUtgM,GACtB,OAAOo9K,GAAuBp9K,GAAK56C,MAAK,SAAU0E,GAChD,OAAOgqC,GAAUhqC,EAAKo2L,GACxB,IAAG76L,QAAO,SAAUyE,GAClB,OAVa,SAAUpH,GACzB,OAAO05L,EAAW,CAChB,MACA,YACC15L,EACL,CAKW69O,CAAWrxM,GAAMplC,EAAK,eAC/B,GACF,EAiBI02O,GAAoB,SAAUtiM,EAAM8B,GACtC,OAAIsgM,GAAQtgM,KAGHs/L,GAAiBphM,EAAM8B,IAAQw/L,GAActhM,EAAM8B,IAAQ8/L,GAAU5hM,EAAM8B,IAAQogM,GAAeliM,EAAM8B,GAEnH,EAUIygM,GAAqB,SAAUviM,EAAM8B,GACvC,OAAIsgM,GAAQtgM,KAGHu/L,GAAerhM,EAAM8B,IAAQy/L,GAAavhM,EAAM8B,IAAQ6/L,GAAa3hM,EAAM8B,IAAQqgM,GAAcniM,EAAM8B,GAElH,EACI0gM,GAAgB,SAAUxiM,EAAM8B,GAClC,OAAOwgM,GAAkBtiM,EAAM8B,IAAQygM,GAAmBviM,EAjB5C,SAAU8B,GACxB,IAAIvY,EAAYuY,EAAIvY,YAChBjc,EAASw0B,EAAIx0B,SACjB,OAAIw2K,GAASv6J,IAAcjc,EAASic,EAAU95B,KAAKhH,OAC1CktN,GAAcpsL,EAAWjc,EAAS,GAElCw0B,CAEX,CASkE+8K,CAAU/8K,GAC5E,EACI2gM,GAAW,SAAUp4O,EAAMijB,GAC7B,OAAO81M,GAAO/4N,EAAKqiF,OAAOp/D,GAC5B,EACIo1N,GAAU,SAAU5gM,GACtB,IAAIvY,EAAYuY,EAAIvY,YACpB,OAAOu6J,GAASv6J,IAAcnoB,GAAWmoB,EAAU95B,KAAMq6L,GAC3D,EAyCI64C,GAAiB,SAAU3iM,EAAM8B,GACnC,OAAOh6C,EAASN,KAAKs6C,GAAKz6C,OAAOq7O,IAASx7O,MAAK,SAAU46C,GACvD,IAtB4C5vC,EAC1C7H,EACAu4O,EAoBEr5M,EAAYuY,EAAIvY,YAChB0/K,EAjCmB,SAAUjpK,EAAM9tC,GACzC,IAAI7H,EAAO6H,EAAKzC,KACZozO,EAAWltB,GAAczjN,EAAM,GACnC,SAAIuwO,GAASp4O,EAAM,IAAOm4O,GAAcxiM,EAAM6iM,KAC5C3wO,EAAKzC,KAAO,IAAMpF,EAAK6W,MAAM,GACtB,GAIX,CAwBqB4hO,CAAqB9iM,EAAMzW,KAtB1Cl/B,GAD0C6H,EAuB8Cq3B,GAtB5E95B,KACZmzO,EAtBoB,SAAUv4O,GAClC,IAAI04O,EAAQ14O,EAAKgD,MAAM,IACvB,OAAO8wL,EAAM4kD,GAAO,SAAU72J,EAAK3jF,GACjC,OAAI66N,GAAOl3I,IAAQ3jF,EAAI,GAAKA,EAAIw6O,EAAMt6O,OAAS,GAAK86N,GAAUwf,EAAMx6O,EAAI,KAAOg7N,GAAUwf,EAAMx6O,EAAI,IAC1F,IAEA2jF,CAEX,IAAGp+E,KAAK,GACV,CAagBk1O,CAAoB34O,GAC9Bu4O,IAAYv4O,IACd6H,EAAKzC,KAAOmzO,GACL,KAKc,SAAU5iM,EAAM9tC,GACvC,IAAI7H,EAAO6H,EAAKzC,KACZwzO,EAAUttB,GAAczjN,EAAM7H,EAAK5B,OAAS,GAChD,SAAIg6O,GAASp4O,EAAMA,EAAK5B,OAAS,IAAO+5O,GAAcxiM,EAAMijM,KAC1D/wO,EAAKzC,KAAOpF,EAAK6W,MAAM,GAAI,GAAK,IACzB,GAIX,CAI4GgiO,CAAmBljM,EAAMzW,GACjI,OAAO0/K,EAAanhN,EAASN,KAAKs6C,GAAOh6C,EAAShC,MACpD,GACF,EACIq9O,GAAyB,SAAU95O,GACrC,IAAI22C,EAAOt7B,GAAqBrb,EAAOoJ,WACnCpJ,EAAO4E,UAAU2+I,eACnB+1F,GAAe3iM,EAAM21K,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,WAAWnI,MAAK,SAAU66C,GAC3Fz4C,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,UAC9B,GAEJ,EA4BImtB,GAAc,SAAUlxO,EAAMob,EAAQ0U,GACxC,GAAc,IAAVA,EAAJ,CAGA,IAAIp2B,EAAM8Y,GAAqBxS,GAC3B8tC,EAAO6lJ,GAAWj6L,EAAKy9L,IAAWhjM,MAAMuF,GACxC+wM,EAAazqM,EAAKzC,KAAKyR,MAAMoM,EAAQA,EAAS0U,GAC9CqhN,EAAiB/1N,EAAS0U,GAAS9vB,EAAKzC,KAAKhH,QAAU85O,GAAmBviM,EAAM21K,GAAczjN,EAAMA,EAAKzC,KAAKhH,SAC9G66O,EAA8B,IAAXh2N,GAAgBg1N,GAAkBtiM,EAAM21K,GAAczjN,EAAM,IACnFA,EAAKqxO,YAAYj2N,EAAQ0U,EAnCJ,SAAUiH,EAASq6M,EAAkBD,GAwB1D,OAvBarhO,EAAMinB,GAAS,SAAUh5B,EAAKi/B,GACzC,OAAIo0L,GAAap0L,IAAMk0L,GAAOl0L,GACxBj/B,EAAIuzO,qBAAmC,KAAZvzO,EAAI6T,KAAcw/N,GAAoBrzO,EAAI6T,IAAIrb,SAAWwgC,EAAQxgC,OAAS,GAAK46O,EACrG,CACLG,qBAAqB,EACrB1/N,IAAK7T,EAAI6T,IAAMgmL,IAGV,CACL05C,qBAAqB,EACrB1/N,IAAK7T,EAAI6T,IAAM,KAIZ,CACL0/N,qBAAqB,EACrB1/N,IAAK7T,EAAI6T,IAAMorB,EAGrB,GAAG,CACDs0M,qBAAqB,EACrB1/N,IAAK,KAEOA,GAChB,CAUkC2/N,CAAiB9mC,EAAY2mC,EAAkBD,GAN/E,CAOF,EACIK,GAA2B,SAAUxxO,EAAMob,GAC7C,IAAI2b,EAAU/2B,EAAKzC,KAAKyR,MAAMoM,GAC1Bq2N,EAAkB16M,EAAQxgC,OAAS42L,GAAMp2J,GAASxgC,OACtD26O,GAAYlxO,EAAMob,EAAQq2N,EAC5B,EACIC,GAA4B,SAAU1xO,EAAMob,GAC9C,IAAI2b,EAAU/2B,EAAKzC,KAAKyR,MAAM,EAAGoM,GAC7Bq2N,EAAkB16M,EAAQxgC,OAAS62L,GAAMr2J,GAASxgC,OACtD26O,GAAYlxO,EAAMob,EAASq2N,EAAiBA,EAC9C,EACIE,GAAiB,SAAUC,EAAU7jB,EAAU8jB,EAAqBC,QAClD,IAAhBA,IACFA,GAAc,GAEhB,IAAIC,EAAmB3kD,GAAMwkD,EAASr0O,MAAMhH,OACxCy7O,EAAUF,EAAcF,EAAW7jB,EACnCkkB,EAAaH,EAAc/jB,EAAW6jB,EAU1C,OATIE,EACFE,EAAQhiB,WAAWiiB,EAAW10O,MAE9By0O,EAAQE,WAAW,EAAGD,EAAW10O,MAEnCqf,GAASpK,GAAqBy/N,IAC1BJ,GACFL,GAAyBQ,EAASD,GAE7BC,CACT,EAOIziM,GAAa,SAAU71C,EAAKk2C,GAC9B,OANoB,SAAUA,EAAKl2C,GACnC,IAAI29B,EAAYuY,EAAIvY,YAChBjc,EAASw0B,EAAIx0B,SACjB,OAA6C,IAAtCqoM,GAAcY,eAAez0K,IAAkBvY,IAAc39B,EAAIyH,YAAcia,EAASqoM,GAAc3lK,OAAOpkD,GAAK0hB,QAC3H,CAES+2N,CAAgBviM,EAAKl2C,GAAO+pN,GAAc7zK,EAAIvY,YAAauY,EAAIx0B,SAAW,GAAKw0B,CACxF,EAOIwiM,GAAkC,SAAU14O,GAC9C,OAAIggM,GAAmBhgM,EAAIy2L,iBAClBv6L,EAASN,MALS0K,EAKStG,EAAIy2L,gBAJjCyB,GAAS5xL,GAAQyjN,GAAczjN,EAAMA,EAAKzC,KAAKhH,QAAUktN,GAAc1lK,MAAM/9C,KAM3EtG,EAAIy2L,gBAAkBg/B,GAAez1N,EAAIy2L,iBAAmBv6L,EAAShC,OAP7D,IAAUoM,CAS7B,EACIqyO,GAA8B,SAAU34O,GAC1C,OAAIggM,GAAmBhgM,EAAI4oB,aAClB1sB,EAASN,MAfY0K,EAeStG,EAAI4oB,YAdpCsvK,GAAS5xL,GAAQyjN,GAAczjN,EAAM,GAAKyjN,GAAc3lK,OAAO99C,KAgB7DtG,EAAI4oB,YAAc4sM,GAAgBx1N,EAAI4oB,aAAe1sB,EAAShC,OAjBnD,IAAUoM,CAmBhC,EA6BIsyO,GAAoC,SAAUhhC,EAASpX,EAAaxgM,GACtE,OAJsB,SAAU43M,EAASpX,EAAaxgM,GACtD,OAAO43M,EARsB,SAAUpX,EAAaxgM,GACpD,OAAO24O,GAA4B34O,GAAK7E,SAAQ,WAC9C,OAAOu9O,GAAgC14O,EACzC,IAAG7E,SAAQ,WACT,OAhBmC,SAAUqlM,EAAaxgM,GAC5D,OAAOs1N,GAAa90B,EAAaupB,GAAc1lK,MAAMrkD,IAAM5F,MAAK,WAC9D,OAAOm7N,GAAa/0B,EAAaupB,GAAc3lK,OAAOpkD,GACxD,GAAG9D,EAASN,KACd,CAYWi9O,CAAiCr4C,EAAaxgM,EACvD,GACF,CAEmB84O,CAAyBt4C,EAAaxgM,GAfxB,SAAUwgM,EAAaxgM,GACtD,OAAO04O,GAAgC14O,GAAK7E,SAAQ,WAClD,OAAOw9O,GAA4B34O,EACrC,IAAG7E,SAAQ,WACT,OAfoC,SAAUqlM,EAAaxgM,GAC7D,IAAI+4O,EAAgBhvB,GAAc3lK,OAAOpkD,EAAIy2L,gBAAkBz2L,EAAIy2L,gBAAkBz2L,EAAIyH,YACzF,OAAO8tN,GAAa/0B,EAAau4C,GAAe3+O,MAAK,WACnD,OAAOk7N,GAAa90B,EAAaupB,GAAc1lK,MAAMrkD,GACvD,GAAG9D,EAASN,KACd,CAUWo9O,CAAkCx4C,EAAaxgM,EACxD,GACF,CASgEi5O,CAA2Bz4C,EAAaxgM,EACxG,CAESk5O,CAAkBthC,EAASpX,EAAaxgM,GAAK5E,IAAIkZ,EAAMuhC,GAAY71C,GAC5E,EACIm5O,GAAiB,SAAU17O,EAAQm6M,EAAS1hK,GAC9CA,EAAI97C,MAAK,WACPqD,EAAOkH,OACT,IAAG,SAAUuxC,GACXz4C,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,UAAWzS,EACzC,GACF,EAMIn4H,GAAU,SAAUhiF,EAAQuC,GAC9B,OAAOA,GAAO2X,GAAMla,EAAO6F,OAAO+mM,mBAAoBlxM,GAAK6G,GAC7D,EACIo5O,GAAiB,SAAUp5O,GAC7B,GAAI8gM,GAAU9gM,GAAM,CAClB,IAAIkxN,EAAKp4M,GAAsB,2BAG/B,OAFAmQ,GAAMjpB,GACNgpB,GAAShpB,EAAKkxN,GACPh1N,EAASN,KAAKmuN,GAAc3lK,OAAO8sK,EAAG1uN,KAC/C,CACE,OAAOtG,EAAShC,MAEpB,EAyBIm/O,GAAkB,SAAU57O,EAAQm6M,EAAS53M,EAAKs5O,QAClC,IAAdA,IACFA,GAAY,GAEd,IA9CwBC,EA8CpBC,EAAiBZ,GAAkChhC,EAASn6M,EAAOoJ,UAAW7G,EAAIwC,KAClFi3O,EAAcx/C,GAAWj6L,EAAKsU,EAAMmrE,GAAShiF,IA/CzB87O,EA+C4C97O,EAAOoJ,UA9CpE,SAAU7G,GACf,OAAOA,EAAIwC,MAAQ+2O,CACrB,IA6CIG,EA9BiB,SAAU15O,EAAK25O,EAAmBxB,GACvD,IAz0YoBpgO,EAAIC,EAAIu4J,EAAIv0K,EAy0Y5B49O,EAAcpjD,GAAYx2L,GAAKvE,OAAO46L,IACtCwjD,EAAcjxN,GAAY5oB,GAAKvE,OAAO46L,IAE1C,OADAnzK,GAASljB,IA30YW+X,EA40YP6hO,EA50YW5hO,EA40YE6hO,EA50YEtpE,EA40YWopE,EA50YP39O,EA40Y0B,SAAU2iJ,EAAM59I,EAAMm1C,GAC9E,IAAIgiM,EAAWv5F,EAAKn8I,IAAK6xN,EAAWtzN,EAAKyB,IACrCkf,EAASw2N,EAASr0O,KAAKhH,OAE3B,OADAo7O,GAAeC,EAAU7jB,EAAU8jB,GAC5BjiM,EAAIvY,cAAgB02L,EAAWtK,GAAcmuB,EAAUx2N,GAAUw0B,CAC1E,EAh1YOn+B,EAAGxd,UAAYyd,EAAGzd,UAAYg2K,EAAGh2K,SAAW2B,EAASN,KAAKI,EAAE+b,EAAGnd,WAAYod,EAAGpd,WAAY21K,EAAG31K,aAAesB,EAAShC,QAg1YzHiB,SAAQ,WAST,OARIg9O,IACFyB,EAAYv+O,MAAK,SAAU2E,GACzB,OAAOg4O,GAA0Bh4O,EAAIwC,IAAKxC,EAAIwC,IAAI3F,OACpD,IACAg9O,EAAYx+O,MAAK,SAAU2E,GACzB,OAAO83O,GAAyB93O,EAAIwC,IAAK,EAC3C,KAEKm3O,CACT,GACF,CAUiCG,CAAiB95O,EAAKw5O,EATjC,SAAU/7O,EAAQ8T,GACtC,OAAOoG,GAAMla,EAAO6F,OAAOC,wBAAyBpK,GAAKoY,GAC3D,CAOuEwoO,CAAgBt8O,EAAQuC,IACzFvC,EAAO+E,IAAIk/M,QAAQjkN,EAAOoJ,YAC5BpJ,EAAOyxD,WAAW,IAClBzxD,EAAO4E,UAAU89E,qBAEjBs5J,EAAYn+O,KAAK89O,IAAgBh/O,MAAK,WAChCk/O,GACFH,GAAe17O,EAAQm6M,EAAS8hC,EAEpC,IAAG,SAAUM,GACPV,GACFH,GAAe17O,EAAQm6M,EAAS17M,EAASN,KAAKo+O,GAElD,GAEJ,EAOIC,GAAgB,SAAUhtG,GAC5B,OAAOjmF,GAAYimF,EAAO,QAC5B,EAqBIitG,GAAe,SAAU9hO,EAAOmqG,GAClC,MAAO,CACLnqG,MAAOA,EACPmqG,IAAKA,EAET,EAQI43H,GAAepkN,GAAa,CAC9B,CACEqkN,gBAAiB,CACf,MACA,SAGJ,CAAEC,UAAW,CAAC,UACd,CACEC,aAAc,CACZ,QACA,mBAGJ,CACEC,WAAY,CACV,kBACA,gBACA,iBAIFC,GAAmB,SAAU78M,EAAWnG,GAC1C,OAAOyS,GAAUnxB,GAAqB6kB,GAAY,QAASnG,EAC7D,EACIijN,GAAoB,SAAUC,GAChC,OAAQz6N,GAAGy6N,EAAQtiO,MAAOsiO,EAAQn4H,IACpC,EACIo4H,GAAsB,SAAUD,EAASljN,GAC3C,OAAOikM,GAAgBif,EAAQtiO,MAAOof,GAAQl8B,MAAK,SAAUs/O,GAC3D,OAAOnf,GAAgBif,EAAQn4H,IAAK/qF,GAAQl8B,MAAK,SAAUu/O,GACzD,OA57YiB9gP,EA47YHkmB,GAAG26N,EAAkBC,GA57YfphP,EA47YgCmhP,EA37YjD7gP,EAAImC,EAASN,KAAKnC,GAAKyC,EAAShC,OAD5B,IAAUH,EAAGN,CA67YtB,GACF,GACF,EA8BIqhP,GAA+B,SAAUtjN,GAC3C,OAAO,SAAUkjN,GACf,OAAOC,GAAoBD,EAASljN,GAAQp8B,KAAI,SAAU6xI,GACxD,OA1Ee,SAAU3sI,EAAK2sI,EAAO7yC,GACzC,MAAO,CACL95F,IAAKA,EACL2sI,MAAOA,EACP7yC,MAAOA,EAEX,CAoEa2gJ,CAAeL,EAASztG,EAAOgtG,GAAchtG,GACtD,GACF,CACF,EACI+tG,GAAqB,SAAUN,EAASO,EAAkB36O,EAAKk3B,GACjE,GAAIl3B,EAAIE,YAAck6O,EAAQl/O,OAAOi/O,IACnC,OAAOv+O,EAAShC,OACX,GAAI+gP,EAAiBC,YAAa,CACvC,IAAIC,EAAqBT,EAAQp/O,KAAKw/O,GAA6BtjN,IACnE,OAAOt7B,EAASN,KAAK,CACnBwc,MAAO+iO,EACP54H,IAAK44H,GAET,CACE,IAAIlnE,EAAYumE,GAAiBl6O,EAAIsG,eAAgB4wB,GACjD4jN,EAAUZ,GAAiBl6O,EAAIyG,aAAcywB,GAC7C6jN,EAAsBpnE,EAAU34K,KArCP,SAAUk8B,GACzC,OAAO,SAAUy8I,GACf,OAAOwnD,GAAgBxnD,EAAWz8I,GAAQl8B,MAAK,SAAU2xI,GACvD,OAAO91H,GAAO8iO,GAAchtG,IAAQ7xI,KAAI,SAAUggP,GAChD,OAAOlB,GAAajmE,EAAWmnE,EACjC,GACF,GACF,CACF,CA6B6CE,CAA2B9jN,IAASl8B,KAAKw/O,GAA6BtjN,IAC3G+jN,EAAoBH,EAAQ9/O,KA7BL,SAAUk8B,GACvC,OAAO,SAAU4jN,GACf,OAAO3f,GAAgB2f,EAAS5jN,GAAQl8B,MAAK,SAAU2xI,GACrD,OAAO/1H,GAAK+iO,GAAchtG,IAAQ7xI,KAAI,SAAU64K,GAC9C,OAAOimE,GAAajmE,EAAWmnE,EACjC,GACF,GACF,CACF,CAqByCI,CAAyBhkN,IAASl8B,KAAKw/O,GAA6BtjN,IACzG,OAAOt7B,EAASN,KAAK,CACnBwc,MAAOijO,EACP94H,IAAKg5H,GAGX,EACIE,GAAe,SAAUrhJ,EAAOzxB,GAClC,OAAOgqH,EAAYv4F,GAAO,SAAUthG,GAClC,OAAOmnB,GAAGnnB,EAAG6vE,EACf,GACF,EACI+yK,GAAmB,SAAUX,GAC/B,OAAOjjO,GAAM2jO,GAAaV,EAAe3gJ,MAAO2gJ,EAAez6O,IAAI8X,OAAQqjO,GAAaV,EAAe3gJ,MAAO2gJ,EAAez6O,IAAIiiH,MAAM,SAAUmrH,EAAY7sM,GAC3J,OAAOk6M,EAAe3gJ,MAAM9kF,MAAMo4N,EAAY7sM,EAAW,EAC3D,GACF,EAMI86M,GAAgB,SAAUr7O,EAAK26O,GACjC,IAAIW,EAAaX,EAAiBW,WAAYC,EAAWZ,EAAiBY,SACtEC,EAAkBx7O,EAAIoG,aAO1B,OANAk1O,EAAWvgP,MAAK,SAAU4xI,GACxB,OAAO6uG,EAAgBr2L,cAAcwnF,EAAMzqI,IAC7C,IACAq5O,EAASxgP,MAAK,SAAU4xI,GACtB,OAAO6uG,EAAgBp2L,aAAaunF,EAAMzqI,IAC5C,IACOs5O,CACT,EAmCIC,GAAqB,SAAU3nM,EAAM9zC,GACvC,IAAIk3B,EAjMkB,SAAU4c,GAChC,OAAO,SAAU81I,GACf,OAAOjqK,GAAGm0B,EAAM81I,EAClB,CACF,CA6Le8xD,CAAkB5nM,GAC3B6nM,EAhHW,SAAU37O,EAAKk3B,GAC9B,IAAIy8I,EAAYumE,GAAiBl6O,EAAIsG,eAAgB4wB,GACjD4jN,EAAUZ,GAAiBl6O,EAAIyG,aAAcywB,GACjD,OAAO1f,GAAMm8J,EAAWmnE,EAASlB,GACnC,CA4GmBgC,CAAW57O,EAAKk3B,GAC7ByjN,EA3LyB,SAAU36O,EAAKk3B,GAC5C,IAAI2kN,EAAW,SAAU71O,GACvB,OAAOm1N,GAAgB3iN,GAAqBxS,GAAOkxB,EACrD,EACIokN,EAAaO,EAAS77O,EAAIsG,gBAC1Bi1O,EAAWM,EAAS77O,EAAIyG,cACxBq1O,EAAiBR,EAAWrhP,SAC5B8hP,EAAeR,EAASthP,SACxB2gP,EAAcpjO,GAAM8jO,EAAYC,EAAU57N,IAAIxlB,OAAM,GAExD,MAAO,CACLmhP,WAAYA,EACZC,SAAUA,EACVO,eAAgBA,EAChBC,aAAcA,EACdnB,YAAaA,EACboB,cAPkBpB,GAAekB,GAAkBC,EASvD,CAyKyBE,CAAyBj8O,EAAKk3B,GACrD,OAtDqC,SAAUykN,EAAY37O,EAAKk3B,GAChE,OAAOykN,EAAW1gP,QAAO,SAAUm/O,GACjC,OApEoB,SAAUA,EAASljN,GACzC,OAAQijN,GAAkBC,IAAYC,GAAoBD,EAASljN,GAAQj8B,QAAO,SAAU0xI,GAC1F,IAAI5iE,EAAO4iE,EAAMzqI,IAAI6nE,KACrB,OAAuB,IAAhBA,EAAKxtE,QAAyC,IAAzBwtE,EAAK,GAAG+vB,MAAMv9F,MAC5C,GACF,CA+DW2/O,CAAkB9B,EAASljN,IAAWokM,GAAuB8e,EAAQtiO,MAAO9X,EACrF,GACF,CAkDMm8O,CAAiCR,EAAY37O,EAAKk3B,GAC7CykN,EAAW7gP,KAAI,SAAUs/O,GAC9B,OAAOP,GAAaC,gBAAgB95O,EAAKo6O,EAAQtiO,MACnD,IACS6iO,EAAiBqB,aArBP,SAAU5B,EAASO,EAAkB36O,EAAKk3B,GAC/D,OAAOwjN,GAAmBN,EAASO,EAAkB36O,EAAKk3B,GAAQl8B,MAAK,SAAU4S,GAC/E,IAAIkK,EAAQlK,EAAGkK,MAAOmqG,EAAMr0G,EAAGq0G,IAC3Bm6H,EAA0BtkO,EAAM9c,KAAKogP,IAAkBjhP,MAAM,IAC7DkiP,EAAwBp6H,EAAIjnH,KAAKogP,IAAkBjhP,MAAM,IAC7D,GAAIiiP,EAAwB7/O,OAAS,GAAK8/O,EAAsB9/O,OAAS,EAAG,CAC1E,IAAIi/O,EAAkBH,GAAcr7O,EAAK26O,GACzC,OAAO/+O,EAASN,KAAKu+O,GAAaI,WAAWmC,EAAyBC,EAAuBb,GAC/F,CACE,OAAO5/O,EAAShC,MAEpB,GACF,CAUW0iP,CAAiBX,EAAYhB,EAAkB36O,EAAKk3B,GA3CvC,SAAUkjN,EAASO,EAAkB36O,EAAKk3B,GAChE,OAAOwjN,GAAmBN,EAASO,EAAkB36O,EAAKk3B,GAAQl8B,MAAK,SAAU4S,GAC/E,IAAIkK,EAAQlK,EAAGkK,MAAOmqG,EAAMr0G,EAAGq0G,IAC/B,OAAOnqG,EAAMld,GAAGqnH,EAClB,IAAGjnH,MAAK,SAAUy/O,GAChB,IAAIG,EAAcD,EAAiBC,YAC/B9f,EAAgBsgB,GAAiBX,GAAgBtgP,MAAM,IAC3D,GAAIygP,GAAeH,EAAe3gJ,MAAMv9F,SAAWu+N,EAAcv+N,OAC/D,OAAOX,EAASN,KAAKu+O,GAAaE,UAAUU,EAAe9tG,QACtD,GAAImuF,EAAcv+N,OAAS,EAAG,CACnC,GAAIq+O,EACF,OAAOh/O,EAASN,KAAKu+O,GAAaG,aAAalf,EAAel/N,EAAShC,SAEvE,IAAI4hP,EAAkBH,GAAcr7O,EAAK26O,GACzC,OAAO/+O,EAASN,KAAKu+O,GAAaG,aAAalf,EAAel/N,EAASN,KAAKsD,GAASA,GAAS,CAAC,EAAG+7O,GAAmB,CAAE36O,IAAKw7O,MAEhI,CACE,OAAO5/O,EAAShC,MAEpB,GACF,CAyBW2iP,CAAkBZ,EAAYhB,EAAkB36O,EAAKk3B,EAEhE,EAEIslN,GAAc,SAAU1oM,GAC1B,IAv+Z0B7iC,EAw+Z1B,OA1iaY,IAmEL5Y,GADmB4Y,EAu+ZF6iC,IAt+Z8B,aAAlBj7C,GAAKoY,GAs+ZTilL,GAAYpiJ,GAAQwiJ,GAAUxiJ,IACjD94C,KAAKwhP,IAAa3hP,SAAQ,WACrC,OAAOe,EAASN,KAAKw4C,EACvB,GACF,EACI2oM,GAAa,SAAU3iJ,GACzB,OAAOo4F,EAAOp4F,GAAO,SAAUzxB,GAC7BtkD,GAASskD,EAAM,mBACfksK,GAAkBlsK,EACpB,GACF,EAcIq0K,GAA0B,SAAUv/O,EAAQkrE,EAAMroE,EAAK28O,GACzD,IAAIC,EAAiB58O,EAAIoG,aACrBu2O,GACFC,EAAe13L,SAASllD,EAAIsG,eAAgBtG,EAAI2lD,aAChDi3L,EAAej2O,YAAY0hE,EAAKnmE,IAAIo0L,aAEpCsmD,EAAel2O,eAAe2hE,EAAKnmE,IAAI5B,YACvCs8O,EAAev3L,OAAOrlD,EAAIyG,aAAczG,EAAI4lD,YAE9Ci3L,GAAmB1/O,EAAQy/O,EAAgBv0K,GAAM,EACnD,EACIy0K,GAAkC,SAAU3/O,GAC9C,IAAI29N,EAAgBG,GAAmB99N,GACnC4/O,EAAevkO,GAAqBrb,EAAO4E,UAAUC,WACrDm2L,GAAc4kD,EAAa76O,MAAQs+L,GAAUu8C,GAC/C5/O,EAAO4E,UAAU89E,kBAAkBk9J,EAAa76O,IAAK,GAErD/E,EAAO4E,UAAU8P,UAAS,GAExBipN,EAAcv+N,OAAS,GAAKtB,EAAO6/N,GAAe,SAAUzyJ,GAC5D,OAAO1oD,GAAG0oD,EAAM00K,EAClB,KACAjuK,GAAMiuK,EAAc,oBAAqB,IAE7C,EACIC,GAAwB,SAAU7/O,EAAQ28F,EAAOmjJ,GACnD,IAAIC,EAAY//O,EAAO4E,UAAUmB,SAC7Bi6O,EAAeF,EAAejiP,MAAK,SAAU4S,GAC/C,IAAI5N,EAAM4N,EAAG5N,IAAK87O,EAAiBluO,EAAGkuO,eAClCsB,EA1Cc,SAAUjgP,EAAQkgC,GACtC,OAAOzhC,EAASC,KAAKsB,EAAO+E,IAAIE,UAAUi7B,EAAWlgC,EAAO+E,IAAIi9E,UAAUrkF,IAAI0d,GAChF,CAwCuB6kO,CAAgBlgP,EAAQ2+O,EAAiB97O,EAAIyG,aAAezG,EAAIsG,gBACnFtG,EAAIs9O,iBAxCe,SAAUngP,EAAQogP,EAAcC,GACrDA,EAAWziP,MAAK,SAAUwhI,GACpBghH,EACF36N,GAAS25G,IAETg4G,GAAkBh4G,GAClBp/H,EAAO4E,UAAU89E,kBAAkB08C,EAAMr6H,IAAK,GAElD,GACF,CAgCIu7O,CAAiBtgP,EAAQ2+O,EAAgBsB,EAAajiP,OAAOqlM,KAC7D,IAAIk9C,EAAe5B,EAAiBhiJ,EAAM,GAAKA,EAAMA,EAAMv9F,OAAS,GAEpE,OADAmgP,GAAwBv/O,EAAQugP,EAAcR,EAAWpB,GACpDt7C,GAAUk9C,GAGN9hP,EAAShC,OAFTgC,EAASN,KAAKwgP,EAAiBhiJ,EAAM9kF,MAAM,GAAK8kF,EAAM9kF,MAAM,GAAI,GAI3E,IAAG7a,MAAM2/F,GAGT,OAFA2iJ,GAAWU,GACXL,GAAgC3/O,IACzB,CACT,EACIwgP,GAAuB,SAAUxgP,EAAQygP,EAAiBC,EAAeC,GAC3E,IAAI99O,EAAM7C,EAAO4E,UAAUmB,SACvBywK,EAAYiqE,EAAgB,GAC5B9C,EAAU+C,EAAcA,EAActhP,OAAS,GACnDmgP,GAAwBv/O,EAAQw2K,EAAW3zK,GAAK,GAChD08O,GAAwBv/O,EAAQ29O,EAAS96O,GAAK,GAC9C,IAAI+9O,EAAyBv9C,GAAU7sB,GAAaiqE,EAAkBA,EAAgB5oO,MAAM,GACxFgpO,EAAuBx9C,GAAUs6C,GAAW+C,EAAgBA,EAAc7oO,MAAM,GAAI,GAIxF,OAHAynO,GAAWsB,EAAuBv8O,OAAOw8O,IACzCF,EAAWR,iBACXR,GAAgC3/O,IACzB,CACT,EACI0/O,GAAqB,SAAU1/O,EAAQ6C,EAAKqoE,EAAM41K,QAC9B,IAAlBA,IACFA,GAAgB,GAElBj+O,EAAIs9O,iBACJ,IAjhauBrsO,EAihanBmpN,EAAWoiB,GAAYn0K,GAAMluE,MAAMkuE,GACnC61K,EAAY1lO,GAAqBrb,EAAO+E,IAAIE,UAAUg4N,EAASl4N,IAAK/E,EAAO+E,IAAIi9E,UAOnF,GANIqhH,GAAU09C,KACZ3J,GAAkB2J,GACdD,GACF9gP,EAAO4E,UAAU89E,kBAAkBq+J,EAAUh8O,IAAK,KAGjDyd,GAAG0oD,EAAM61K,GAAY,CACxB,IAAIC,EAAyB5mO,GAAKsJ,GAAOq9N,GAAY71K,GAAQ,GAphaxDxnD,GANgB5P,EA0hasDitO,GAphatDpjP,IAAIimB,IAAUjmB,KALpB,SAAUyF,GACzB,OAAO4xL,EAAS5xL,GAAU,SAAU/H,GAClC,OAAQmnB,GAAG1O,EAASzY,EACtB,GACF,IACqD2B,MAAM,IAqhazD+3L,EAAOisD,EAAuB38O,OAAOuf,GAASsnD,KAAQ,SAAUriE,GACzD2Z,GAAG3Z,EAAMk4O,IAAenmO,GAAW/R,EAAMk4O,KAAc19C,GAAUx6L,IACpE4c,GAAS5c,EAEb,GACF,CACA,OAAO,CACT,EACIo4O,GAAqB,SAAUjhP,EAAQwvI,GAEzC,OADAosG,GAAgB57O,GAAQ,EAAOwvI,IACxB,CACT,EAqBI0xG,GAAgB,SAAUpiG,EAASv8I,GACrC,OAAO+a,EAAOm6N,GAAel1O,EAAKu8I,GAAUyhD,GAC9C,EACI4gD,GAAmB,SAAUriG,EAASv8I,GACxC,OAAO+a,EAAOm6N,GAAel1O,EAAKu8I,IAAgB,UAnma3C,SAAU/rI,GACf,OAAO4lL,GAAY5lL,IAkma6B,YAlmavBrX,GAAKqX,EAChC,GAkmaF,EAQIquO,GAAe,SAAUphP,EAAQuC,GAGnC,OAFA60O,GAAkB70O,GAClBvC,EAAO4E,UAAU89E,kBAAkBngF,EAAIwC,IAAK,GACrCtG,EAASN,MAAK,EACvB,EA+BIkjP,GAAc,SAAUlnC,EAAS1hK,GACnC,OAAO0hK,EAAU68B,GAAcv+L,GAAOw+L,GAAax+L,EACrD,EAOI6oM,GAAgB,SAAUthP,EAAQm6M,EAASonC,GAC7C,IAAIziG,EAAUzjI,GAAqBrb,EAAOoJ,WAC1C,OAAO+3O,GAAiBriG,EAASyiG,GAAU5kP,MAAK,WAC9C,OAtBmB,SAAUqD,EAAQm6M,EAASr7D,EAASyiG,GACzD,IAAI7iP,EAAO4tN,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACzD,OAAOm7O,GAAcpiG,EAASyiG,GAAU1jP,MAAK,SAAU2jP,GACrD,OAAOn+C,GAAUm+C,GAAYJ,GAAaphP,EAAQwhP,GAnC7B,SAAUxhP,EAAQ8+I,EAASq7D,EAASqnC,EAAU9iP,GACrE,OAAOgmE,GAASy1I,EAASn6M,EAAOoJ,UAAW1K,GAAMb,MAAK,SAAU4Z,GAC9D,OAAOypO,GAAcpiG,EAASzjI,GAAqB5D,EAAG5S,YAAYlH,KAAI,SAAUmtE,GAC9E,OAAgC,IAAzBtoD,GAAGsoD,EAAQ02K,EACpB,GACF,GACF,CA6BkEC,CAAmBzhP,EAAQ8+I,EAASq7D,EAASqnC,EAAU9iP,EACvH,IAAG1B,OAAM,EACX,CAiBW0kP,CAAiB1hP,EAAQm6M,EAASr7D,EAASyiG,IAT3B,SAAUvhP,EAAQm6M,GAC3C,IAAIwnC,EAAUr1B,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UAC5D,OAAOs7O,GAAYlnC,EAASwnC,IAAYpqB,GAAapd,EAASn6M,EAAOoJ,UAAWu4O,GAAS7jP,QAAO,SAAU26C,GACxG,OAAO4oM,GAAYlnC,EAAS1hK,EAC9B,GACF,CAImEmpM,CAAqB5hP,EAAQm6M,EAC9F,IAAG,SAAU0nC,GACX,OAlBqB,SAAU7hP,EAAQm6M,EAASr7D,EAAS+iG,GAC3D,IAAInjP,EAAO4tN,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACzD,OAAOs9L,GAAUw+C,GAAeT,GAAaphP,EAAQ6hP,GAbxB,SAAU7hP,EAAQ8+I,EAASq7D,EAAS0nC,EAAanjP,GAC9E,OAAOgmE,GAASy1I,EAASn6M,EAAOoJ,UAAW1K,GAAMb,MAAK,SAAU4Z,GAC9D,OAjBwB,SAAUoqO,EAAa1nC,EAASz7M,EAAM+Y,GAChE,OAAOsgN,GAAgB8pB,EAAY98O,KAAKlH,MAAK,SAAU+qE,GACrD,OAAOovJ,GAAe6pB,EAAY98O,KAAKpH,KAAI,SAAUgtD,GACnD,OAAOwvJ,EAAUz7M,EAAKmuN,QAAQjkJ,IAAUnxD,EAAGo1M,QAAQliK,GAAQjsD,EAAKmuN,QAAQliK,IAASlzC,EAAGo1M,QAAQjkJ,EAC9F,GACF,IAAG5rE,OAAM,EACX,CAWW8kP,CAAsBD,EAAa1nC,EAASz7M,EAAM+Y,GAVrC,SAAUzX,EAAQuC,GACxC,OAAO6+O,GAAaphP,EAAQuC,EAC9B,CAQmEw/O,CAAkB/hP,EAAQ6hP,GAPlE,SAAU/iG,EAAS+iG,EAAapqO,GACzD,OAAO0pO,GAAiBriG,EAASzjI,GAAqB5D,EAAG5S,YAAYlH,KAAI,SAAUqkP,GACjF,OAAsC,IAA/Bx/N,GAAGw/N,EAAWH,EACvB,GACF,CAG4GI,CAAqBnjG,EAAS+iG,EAAapqO,EACrJ,IAAGha,GAAGgB,EAASN,MAAK,GACtB,CASsE+jP,CAAyBliP,EAAQ8+I,EAASq7D,EAAS0nC,EAAanjP,EACtI,CAeWyjP,CAAmBniP,EAAQm6M,EAASr7D,EAAS+iG,GAAa7kP,OAAM,EACzE,GACF,EACIolP,GAAoB,SAAUpiP,EAAQm6M,GACxC,IAAIonC,EAAWlmO,GAAqBrb,EAAO4E,UAAUqM,UAAS,IAC1D0rF,EAAQmhI,GAAmB99N,GAC/B,OAAOA,EAAO4E,UAAU2+I,eAAkC,IAAjB5mD,EAAMv9F,OAAekiP,GAActhP,EAAQm6M,EAASonC,GAzE3E,SAAUvhP,EAAQuhP,EAAU5jB,GAC9C,IAAI57I,EAAW1mE,GAAqBrb,EAAOoJ,WACvCvG,EAAM7C,EAAO4E,UAAUmB,SAC3B,OAAgC,IAAzB43N,EAAcv+N,OAAeygP,GAAsB7/O,EAAQ29N,EAAel/N,EAAShC,QAVrE,SAAUuD,EAAQ8+I,EAASj8I,EAAK0+O,GACrD,OAAOJ,GAAiBriG,EAASyiG,GAAU5kP,MAAK,WAC9C,OAVkB,SAAUqD,EAAQ8+I,EAASj8I,GAC/C,OAAOy7O,GAAmBx/F,EAASj8I,GAAKlF,KAAI,SAAUygC,GACpD,OAAOA,EAAOzhC,KAAKka,EAAM6oO,GAAoB1/O,GAAS6W,EAAMoqO,GAAoBjhP,GAAS6W,EAAMgpO,GAAuB7/O,GAAS6W,EAAM2pO,GAAsBxgP,GAC7J,GACF,CAMWqiP,CAAgBriP,EAAQ8+I,EAASj8I,EAC1C,IAAG,SAAU8kM,GACX,OAPqB,SAAU3nM,EAAQ2nM,GACzC,OAAOy5C,GAAaphP,EAAQ2nM,EAC9B,CAKW26C,CAAmBtiP,EAAQ2nM,EACpC,IAAG3qM,OAAM,EACX,CAIsGulP,CAAiBviP,EAAQ+hF,EAAUl/E,EAAK0+O,EAC9I,CAqE2GiB,CAAcxiP,EAAQuhP,EAAU5kJ,EAC3I,EAoBIna,GAAY,SAAU3/E,GACxB,OAAOA,EAAIE,UAAYF,EAbU,SAAUA,GAC3C,IAAI8zN,EAAWrK,GAAcQ,eAAejqN,GACxCy2N,EAAShN,GAAcS,aAAalqN,GACpCk/E,EAAWl/E,EAAI4/O,wBACnB,OAAOlrB,IAAa,EAAOx1I,EAAUu3I,GAAQ37N,KAAI,SAAU+kP,GACzD,OAAK9tB,GAAc+B,EAAU2C,EAAQv3I,IAAa6yI,GAAc+B,EAAU+rB,EAAW3gK,GAXvE,SAAU+pI,EAAIE,EAAID,EAAIE,GACtC,IAAIppN,EAAMyO,SAASw2C,cAGnB,OAFAjlD,EAAIklD,SAAS+jK,EAAIE,GACjBnpN,EAAIqlD,OAAO6jK,EAAIE,GACRppN,CACT,CAOailD,CAAY6uK,EAASz2L,YAAay2L,EAAS1yM,SAAUy+N,EAAUxiN,YAAawiN,EAAUz+N,UAEtFphB,CAEX,IAAG7F,MAAM6F,EACX,CAE+B8/O,CAA6B9/O,EAC5D,EAgBI+/O,GAAiB,SAAU/8O,EAAQi6B,GACrC,IAAI38B,EAAa28B,EAAS38B,WACtBg2L,EAAYr5J,EAASq5J,UAUzB,OATIh2L,GAAkC,SAApBA,EAAWzH,OAC3ByH,EAAaA,EAAWG,MAEtB61L,GAAsC,eAAzBA,EAAUtyJ,KAAK,QAC9BsyJ,EAAYA,EAAUj4C,MAXG,SAAUr7I,EAAQgD,GAC7C,IAAIg6O,EAAmBh9O,EAAOknM,sBAC9B,OAAOlkM,IAASA,EAAKo7M,QAAQ4+B,IANN,SAAUh9O,EAAQgD,GAEzC,OADoBhD,EAAO+mM,mBACN/jM,EAAKnN,OARJ,SAAUmN,GAChC,OAAOA,EAAK1F,YAAc0F,EAAK1F,aAAe0F,EAAKswL,SACrD,CAMqC2pD,CAAkBj6O,IALnC,SAAUA,GAC5B,MAAqB,OAAdA,EAAKnN,MAAiBmN,EAAK1N,QAAUslM,EAC9C,CAGgEsiD,CAAcl6O,EAAK1F,WACnF,CAGoD6/O,CAAmBn9O,EAAQgD,GAC/E,CAUMo6O,CAAuBp9O,EAAQszL,KACjCA,EAAYA,EAAUj4C,SAEnB/9I,GAAcA,IAAeg2L,GAGP,OAApBh2L,EAAWzH,MAAqC,OAApByH,EAAWzH,KAChD,EA+BIwnP,GAAgB,SAAUztG,GAC5B,OAAOA,EAAKr2I,OAAS,MAJSmD,EAIYkzI,EAAKA,EAAKr2I,OAAS,IAHjD+D,aAJmB0F,EAIYtG,IAH5BsG,EAAK1F,YAAc0F,EAAK1F,aAAe0F,EAAKswL,WAJ7C,SAAUtwL,GACxB,OAAOA,EAAKzC,OAASq6L,IAAQ7F,GAAO/xL,EACtC,CAE0Es6O,CAAUt6O,EAAK1F,aAMpBsyI,EAAK59H,MAAM,GAAI,GAAK49H,EAPlE,IAAU5sI,EAGDtG,CAKhC,EACI6gP,GAAc,SAAUr+O,EAAK8D,GAC/B,IAAImzO,EAAcj3O,EAAIE,UAAU4D,EAAM9D,EAAIi9E,SAC1C,OAAOg6J,GAAwC,OAAzBA,EAAYx5O,SAAoBw5O,EAAc,IACtE,EAoBIqH,GAAa,SAAUx6O,EAAMk5E,GAC/B,IAAI4pJ,EAAWrf,GAAc1lK,MAAM/9C,GAE/By6O,EADcpsB,GAAYn1I,GACAm/D,KAAKyqF,GACnC,OAAO2X,EAAcA,EAAY12B,UAAY,IAC/C,EAuBI22B,GAAkB,SAAU1jB,EAAY96N,EAAKlC,EAAKi9B,GACpD,IArEwBv9B,EAqEpBihP,EA1Ec,SAAUz+O,EAAK86N,EAAY//L,GAC7C,IAAIxkB,EAAOukN,EAAW5wB,UAAUnvK,GAEhC,OAduB,SAAU0jN,GACjC,IAAIrgP,EAAaqgP,EAAYrgP,WACzBg2L,EAAYqqD,EAAYrqD,UAO5B,OANIh2L,GAAsC,SAAxBA,EAAWX,UAC3BW,EAAW6G,WAAW6H,YAAY1O,GAEhCg2L,GAA8B,eAAjBA,EAAUx+L,IACzBw+L,EAAUnvL,WAAW6H,YAAYsnL,GAE5BqqD,CACT,CAISC,CADW1+O,EAAIy9M,eAAelnM,GAEvC,CAsEoBooO,CAAc3+O,EAAK86N,EAAY//L,GAC7C6jN,EAAWP,GAAYr+O,EAAKlC,EAAIsG,gBAChCy6O,EAASV,IAvEW3gP,EAuEaihP,EAAYrgP,WAtE1C6xL,EAASzyL,EAAIoZ,YAAY,SAAU2vB,GACxC,MAA0B,OAAnBA,EAAM9oC,QACf,MAsEIu/E,EAAWh9E,EAAIo+E,UACf0gK,EAAO,SAAU9wE,GACnB,IAAI44D,EAAWrf,GAAcQ,eAAejqN,GACxCihP,EAAc5sB,GAAYnyN,EAAIo+E,WAC9B1pC,EALU,IAKDs5H,EAAyB+wE,EAAY5iG,KAAKyqF,GAAYmY,EAAYxgP,KAAKqoO,GACpF,OAAOlyL,GAAS2pM,GAAYr+O,EAAK00C,EAAO50C,aAAe8+O,CACzD,EACA,OAAIE,EARY,GAfG,SAAUr9O,EAAQivI,EAAM1zD,GAC3C,IAAIy/H,EAAYh7M,EAAOwD,WAIvB,OAHAlP,GAAM8C,KAAK63I,GAAM,SAAUlzI,GACzBi/M,EAAUv3M,aAAa1H,EAAKiE,EAC9B,IA3BgB,SAAUqC,EAAMk5E,GAChC,IAAI4pJ,EAAWrf,GAAc3lK,OAAO99C,GAEhCy6O,EADcpsB,GAAYn1I,GACAz+E,KAAKqoO,GACnC,OAAO2X,EAAcA,EAAY12B,UAAY,IAC/C,CAuBSm3B,CAAYv9O,EAAQu7E,EAC7B,CAkBWiiK,CAAeL,EAAUC,EAAQ7hK,GAC/B8hK,EAVc,GARP,SAAUr9O,EAAQivI,EAAM1zD,EAAUh9E,GAEpD,OADAA,EAAI0+M,YAAYhuE,EAAKx8H,UAAWzS,GACzB68O,GAAW5tG,EAAK,GAAI1zD,EAC7B,CAgBWkiK,CAAcN,EAAUC,EAAQ7hK,EAAUh9E,GArClC,SAAUyB,EAAQivI,EAAM1zD,EAAUl/E,GACnD,IAAI83B,EAvBS,SAAU3wB,EAAYnH,GACnC,IAAIqhP,EAAYrhP,EAAIoG,aAChBk7O,EAAWthP,EAAIoG,aAGnB,OAFAi7O,EAAU36O,eAAeS,GACzBm6O,EAAS36O,YAAYQ,GACd,CACLk6O,EAAUjhP,gBACVkhP,EAASlhP,gBAEb,CAccmhP,CAAS59O,EAAQ3D,GACzB2+M,EAAYh7M,EAAOwD,WAOvB,OANAw3M,EAAUv3M,aAAa0wB,EAAM,GAAIn0B,GACjC1L,GAAM8C,KAAK63I,GAAM,SAAUo2D,GACzB2V,EAAUv3M,aAAa4hM,EAAIrlM,EAC7B,IACAg7M,EAAUv3M,aAAa0wB,EAAM,GAAIn0B,GACjCg7M,EAAU3vM,YAAYrL,GACf68O,GAAW5tG,EAAKA,EAAKr2I,OAAS,GAAI2iF,EAC3C,CA6BSsiK,CAAaV,EAAUC,EAAQ7hK,EAAUl/E,EAClD,EAiBIyhP,GAAgBtpD,GAkIhBupD,GAAoB,SAAUvkP,EAAQ7E,EAAOmgG,GAC/C,IAAItxF,EACAnH,EAAKgG,EACLjE,EAAY5E,EAAO4E,UACnBG,EAAM/E,EAAO+E,IACb,QAAQtB,KAAKtI,KACfA,EAvJqB,SAAU4J,EAAKlC,EAAKyY,GAC3C,IAAIq7B,EAAOt7B,GAAqBtW,EAAIo+E,WAWpC,OATE7nE,EADE29N,GAAkBtiM,EAAM21K,GAAcQ,eAAejqN,IAChDyY,EAAK9V,QAAQ,KAAM,UAEnB8V,EAAK9V,QAAQ,UAAW,KAE7B0zO,GAAmBviM,EAAM21K,GAAcS,aAAalqN,IAC/CyY,EAAK9V,QAAQ,0BAA2B,UAExC8V,EAAK9V,QAAQ,uBAAwB,IAGhD,CA0IYg/O,CAAmBz/O,EAAKH,EAAUmB,SAAU5K,IAEtD,IAAIspP,EAASzkP,EAAOykP,OAChBC,EAAQppJ,EAAQopJ,MAChB7kB,EAAawV,GAAe,CAAEnnI,SAAU+iH,GAAejxN,IAAWA,EAAO6F,QACzE8+O,EAAe,iEACfluO,EAAOzW,EAAOyV,KAAK,mBAAoB,CACzCmqB,QAASzkC,EACToK,OAAQ,OACRX,WAAW,EACXggP,MAAOtpJ,EAAQspJ,QAEjB,GAAInuO,EAAKsiK,qBACP/4K,EAAOyV,KAAK,aAAc,CACxBmqB,QAASnpB,EAAKmpB,QACdr6B,OAAQ,OACRX,WAAW,EACXggP,MAAOtpJ,EAAQspJ,YALnB,EAUmC,KADnCzpP,EAAQsb,EAAKmpB,SACHhhC,QAAQ,cAChBzD,GAAS,YAEXA,EAAQA,EAAMqK,QAAQ,cAAem/O,GAErC,IAAIE,GADJhiP,EAAM+B,EAAUmB,UACOoD,iBAAmBtG,EAAIyjO,cAAgBzjO,EAAIyjO,gBAAkB,MAChFj2N,EAAOrQ,EAAOoJ,UACdy7O,IAAiBx0O,GAAQzL,EAAU2+I,eACjCx+I,EAAIi9E,QAAQ3xE,EAAKlN,aAtGH,SAAUnD,EAAQ6I,GACtC,OAAOA,IAAS7I,EAAO6F,OAAOgnM,wBAAwBhkM,EAAKrG,SAC7D,CAoGwCsiP,CAAgB9kP,EAAQqQ,EAAKlN,aAAe4B,EAAIk/M,QAAQ5zM,EAAKlN,eAC/FN,EAAMkC,EAAI2+E,aACN37B,SAAS13C,EAAKlN,WAAY,GAC9BN,EAAIqlD,OAAO73C,EAAKlN,WAAY,GAC5ByB,EAAU6E,OAAO5G,IAGhB+B,EAAU2+I,eAtDW,SAAUvjJ,GACpC,IAAI+E,EAAM/E,EAAO+E,IACblC,EAAM2/E,GAAUxiF,EAAO4E,UAAUmB,UACrC/F,EAAO4E,UAAU6E,OAAO5G,GACxB,IAAI2zK,EAAYzxK,EAAIE,UAAUpC,EAAIsG,eAAgBm7O,KA1HnB,SAAUv/O,EAAKlC,EAAKqoE,GACnD,OAAa,OAATA,GAEKA,IADOnmE,EAAIE,UAAUpC,EAAIyG,aAAcg7O,KACnBnmB,GAAuB9iN,GAAqB6vD,GAAOroE,EAIlF,CAoHMkiP,CAA2BhgP,EAAKlC,EAAK2zK,GAGvCx2K,EAAOqiF,SAAS/6E,YAAY,UAAU,EAAO,MAF7Co4O,GAAmB1/O,EAAQ6C,EAAKwY,GAAqBm7J,GAIzD,CA6CIwuE,CAAsBhlP,GAGxB,IAzHqCuC,EAyHjC0iP,EAAa,CACf9gK,SAFFn6E,EAAapF,EAAUC,WAEDrC,SAASC,cAC7B2D,KAAMk1F,EAAQl1F,KACd6oE,QAAQ,GAENnvC,EAAW2kN,EAAO92O,MAAMxS,EAAO8pP,GACnC,IAAsB,IAAlB3pJ,EAAQspJ,OAAkBhC,GAAe5iP,EAAO6F,OAAQi6B,IAzQxC,SAAU/6B,EAAK8D,GACnC,QAASu6O,GAAYr+O,EAAK8D,EAC5B,CAuQ2Eq8O,CAAgBngP,EAAKiF,GAI5F,OAHAnH,EAAM0gP,GAAgB1jB,EAAY96N,EAAKH,EAAUmB,SAAU+5B,GAC3Dl7B,EAAU6E,OAAO5G,QACjB7C,EAAOyV,KAAK,aAAcgB,GAK5B,GA/IyB,SAAUqpB,GAEnC,IADA,IAAIj3B,EAAOi3B,EACJj3B,EAAOA,EAAKyvL,QACC,IAAdzvL,EAAK3N,MACP2N,EAAKg+B,KAAK,oBAAqB,IAGrC,CAsIEs+M,CAAqBrlN,GAEG,gBADxBj3B,EAAOi3B,EAASq5J,WACPtyJ,KAAK,MAAwB,CACpC,IAAI7b,EAASniB,EACb,IAAKA,EAAOA,EAAKq4I,KAAMr4I,EAAMA,EAAOA,EAAKyvL,MAAK,GAC5C,GAAkB,IAAdzvL,EAAK3N,OAAe6J,EAAIi9E,QAAQn5E,EAAKnN,MAAO,CAC1CsE,EAAO6F,OAAOunM,aAAavkM,EAAK6a,OAAOhoB,KAAM,SAC/CmN,EAAK6a,OAAOurD,OAAOjkD,EAAQniB,EAAoB,OAAdA,EAAKnN,MAExC,KACF,CAEJ,CAEA,GADAsE,EAAOolP,oBAAoBC,wBAAwBr7O,GAC9Ci7O,EAAW1yF,QAGT,CACLvyJ,EAAO4E,UAAU6sD,WAAWkzL,GAC5B36O,EAAapF,EAAUC,UACvB,IAAIk9E,EAAW/hF,EAAOoJ,UAMtB,IAL4B,IAAxBY,EAAWhE,SACbgE,EAAanB,EAAOk5E,EAEpBl5E,EAAOmB,EAEFnB,IAASk5E,GACd/3E,EAAanB,EACbA,EAAOA,EAAKmB,WAEd7O,EAAQ6O,IAAe+3E,EAAWA,EAAStmE,UAAY1W,EAAIu+M,aAAat5M,GACxE7O,EAAQ0kO,EAAW5wB,UAAUw1C,EAAO92O,MAAMxS,EAAMqK,QAAQ,qDAAqD,WAC3G,OAAOq6N,EAAW5wB,UAAUnvK,EAC9B,MACI91B,IAAe+3E,EACjBh9E,EAAIu8M,QAAQv/H,EAAU5mF,GAEtB4J,EAAIy+M,aAAax5M,EAAY7O,EAEjC,MA3NmB,SAAU6E,EAAQ7E,EAAO6O,GAC5C,GAAkD,QAA9CA,EAAWtG,aAAa,kBAC1BsG,EAAWA,WAAWC,aAAajK,EAAO+E,IAAIy9M,eAAernN,GAAQ6O,OAChE,CACL,IAAInB,EAAOmB,EAAW7G,WAClBiyN,EAAQprN,EAAWmvL,WAClBtwL,GAAQA,IAASusN,GAA2B,OAAlBvsN,EAAKrG,SAClCxC,EAAO+E,IAAIu8M,QAAQt3M,EAAY7O,GAE/B6E,EAAO4E,UAAU6sD,WAAWt2D,EAEhC,CACF,CAwLImqP,CAAetlP,EADf7E,EAAQ0kO,EAAW5wB,UAAUnvK,GACC91B,IApLH,SAAUhK,EAAQ0kP,GAC/C,IAAIa,EAAqBvlP,EAAO6F,OAAOC,wBACnCf,EAAM/E,EAAO+E,IACjB,GAAI2/O,EAAO,CACT,IAAIc,EAASxlP,EAAOoJ,UAChBq8O,EAAiBnR,GAAavvO,GAClCjK,GAAM8C,KAAKmH,EAAIC,OAAO,yBAAyB,SAAU6D,GAEvD,GADesN,EAAcovO,EAAmB18O,EAAKrG,SAASC,iBArlCzC,SAAUsC,EAAK8D,GACxC,OAAO9K,GAAO43O,GAAc5wO,EAAK8D,IAAO,SAAUqS,GAChD,OALwB,SAAUA,GACpC,OAAOs6N,GAAqBvzO,IAAIiZ,EAClC,CAGYwqO,CAAsBxqO,EAChC,GACF,CAklCsByqO,CAAqB5gP,EAAK8D,GACxC,IAAK,IAAImB,EAAanB,EAAKmB,WAAYmM,EAAcnM,IAAeA,IAAew7O,IAC7D5P,GAAiB7wO,EAAK8D,EAAMmB,GADyCA,EAAaA,EAAWA,WAKjH,GAAIy7O,EAAe1sC,QAAQ/uM,EAAYnB,GAAO,CAC5C9D,EAAImF,OAAOrB,GAAM,GACjB,KACF,CAGN,GACF,CACF,CAsLE+8O,CAAyB5lP,EAAQ0kP,GAlKP,SAAU1kP,EAAQgrB,GAC5C,IAAI66N,EACA9gP,EAAM/E,EAAO+E,IACbH,EAAY5E,EAAO4E,UACvB,GAAKomB,EAAL,CAGApmB,EAAUyM,eAAe2Z,GACzB,IAAI86N,EAAoBvkB,GAAyBvhO,EAAOoJ,UAAW4hB,GACnE,GAAkD,UAA9CjmB,EAAIk9E,mBAAmB6jK,GAGzB,OAFA/gP,EAAImF,OAAO8gB,QACXpmB,EAAUI,OAAO8gP,GAGnB,IAAIjjP,EAAMkC,EAAI2+E,YACV76E,EAAOmiB,EAAOguK,gBAClB,GAAIyB,GAAS5xL,IAEX,GADAhG,EAAIklD,SAASl/C,EAAMA,EAAKqgD,UAAU9pD,SAC7Bs3L,GAAIC,GAAI,CACX,IAAIy+B,EAAQpqM,EAAOG,YACfsvK,GAAS26B,KACXvsN,EAAKgwN,WAAWzD,EAAMhvN,MACtBgvN,EAAMprN,WAAW6H,YAAYujN,GAEjC,OAEAvyN,EAAI0G,eAAeyhB,GACnBnoB,EAAIolD,aAAaj9B,GAEnB,IAQIgxN,EAAcj3O,EAAIE,UAAU+lB,EAAQjmB,EAAIi9E,SAC5Cj9E,EAAImF,OAAO8gB,GACPgxN,GAAej3O,EAAIk/M,QAAQ+3B,KAC7Bh8O,EAAOoR,EAAE4qO,GAAaxwN,QACtB3oB,EAAIklD,SAASi0L,EAAa,GAC1Bn5O,EAAIqlD,OAAO8zL,EAAa,GACnBsI,GAActI,IAjDA,SAAUnzO,GAC/B,QAASA,EAAKnF,aAAa,oBAC7B,CA+CwCqiP,CAAiB/J,MAAiB6J,EAdjD,SAAUhjP,GAC/B,IAAI8oO,EAAWrf,GAAcQ,eAAejqN,GAG5C,GADA8oO,EADkBzU,GAAYl3N,EAAOoJ,WACd9F,KAAKqoO,GAE1B,OAAOA,EAAS/e,SAEpB,CAOkFo5B,CAAiBnjP,IAI/FkC,EAAIvK,IAAIwhP,EAAaj3O,EAAIqF,OAAO,KAAM,CAAE,iBAAkB,QAH1DvH,EAAMgjP,EACN9gP,EAAImF,OAAO8xO,KAKfp3O,EAAU6E,OAAO5G,EA5CjB,CA6CF,CAgHEojP,CAAsBjmP,EAAQ+E,EAAIkiB,IAAI,eA9KD1kB,EA+KdvC,EAAOoJ,UA9K9BtO,GAAM8C,KAAK2E,EAAIs/L,qBAAqB,MAAM,SAAUt/L,GAClDA,EAAImjB,gBAAgB,oBACtB,IArCyB,SAAU3gB,EAAKxC,GACxC9D,EAASC,KAAKqG,EAAIE,UAAU1C,EAAK,UAAU5E,IAAI0d,IAAsBzd,KAAKy5O,GAC5E,CAgNE6O,CAAqBnhP,EAAKH,EAAUqM,YACpCjR,EAAOyV,KAAK,aAAcgB,GAC1BzW,EAAOmmP,WA9EP,CA+EF,EAEIC,GAAW,SAAUv9O,EAAMiO,GAC7BA,EAAGjO,GACCA,EAAK1F,YACPijP,GAASv9O,EAAK1F,WAAY2T,GAExBjO,EAAKvF,MACP8iP,GAASv9O,EAAKvF,KAAMwT,EAExB,EAuDIuvO,GAAa,SAAUzmN,GACzB,OAAOA,aAAmB4sM,EAC5B,EAUI8Z,GAAgB,SAAUtmP,EAAQsb,EAAMirO,GAC1CvmP,EAAO+E,IAAIu8M,QAAQthN,EAAOoJ,UAAWkS,IACjB,IAAhBirO,GAXc,SAAUvmP,GACxB02C,GAAS12C,IACX+3N,GAAgB/3N,EAAOoJ,WAAWxL,MAAK,SAAU66C,GAC/C,IAAI5vC,EAAO4vC,EAAI5zC,UACX8mO,EAAWrxC,GAAUzxL,GAAQkvN,GAAgBlvN,GAAM7L,MAAMy7C,GAAOA,EACpEz4C,EAAO4E,UAAU6E,OAAOkiO,EAAS/e,UACnC,GAEJ,CAIIk0B,CAAc9gP,EAElB,EAiDIwmP,GAAqB,SAAUxmP,EAAQ4/B,EAASnpB,GAClD,IAAIgwO,EAPY,SAAUhwO,EAAMmpB,GAChC,OAAOn+B,GAASA,GAAS,CAAE8D,OA9DP,QA8DkCkR,GAAO,CAC3D6Q,KAAK,EACLsY,QAASymN,GAAWzmN,GAAW,GAAKA,GAExC,CAEsB8mN,CAAYjwO,EAAMmpB,GAClC+mN,EAAclwO,EAAKmwO,UAAYH,EAAgBzmP,EAAOyV,KAAK,mBAAoBgxO,GAInF,OAHKJ,GAAWzmN,KACdA,EAAU+mN,EAAY/mN,SAEjBnhC,EAASC,KAAKsB,EAAOoJ,WAAWzM,KAAKP,EAASwjC,IAAU,SAAUvvB,GACvE,OAAOg2O,GAAWzmN,GAvBD,SAAU5/B,EAAQqQ,EAAMuvB,EAASnpB,GA5DvC,IAAUowO,EAAaC,EAChCvmO,EADmBsmO,EA6Dd7mP,EAAOykP,OAAOsC,iBA7DaD,EA6DK9mP,EAAOykP,OAAOuC,sBA5DnDzmO,EA7CkB,SAAUsmO,EAAaC,EAAkBj+O,GAC/D,IAAIg9J,EAAc,CAAC,EACfohF,EAAc,CAAC,EACf1mO,EAAU,GA6Bd,IAAK,IAAI+nJ,KA5BLz/J,EAAK1F,YACPijP,GAASv9O,EAAK1F,YAAY,SAAU0F,GAClCksL,EAAO8xD,GAAa,SAAU7oP,GACxBA,EAAOtC,OAASmN,EAAKnN,OACnBmqK,EAAY7nK,EAAOtC,MACrBmqK,EAAY7nK,EAAOtC,MAAM0/L,MAAMt8L,KAAK+J,GAEpCg9J,EAAY7nK,EAAOtC,MAAQ,CACzBsC,OAAQA,EACRo9L,MAAO,CAACvyL,IAIhB,IACAksL,EAAO+xD,GAAkB,SAAU9oP,GACK,iBAA3B6K,EAAKg+B,KAAK7oC,EAAOtC,QACtBurP,EAAYjpP,EAAOtC,MACrBurP,EAAYjpP,EAAOtC,MAAM0/L,MAAMt8L,KAAK+J,GAEpCo+O,EAAYjpP,EAAOtC,MAAQ,CACzBsC,OAAQA,EACRo9L,MAAO,CAACvyL,IAIhB,GACF,IAEiBg9J,EACb3rJ,GAAM2rJ,EAAayC,IACrB/nJ,EAAQzhB,KAAK+mK,EAAYyC,IAG7B,IAAK,IAAI4+E,KAAUD,EACb/sO,GAAM+sO,EAAaC,IACrB3mO,EAAQzhB,KAAKmoP,EAAYC,IAG7B,OAAO3mO,CACT,CAEgB4mO,CAAkBN,EAAaC,EA4DiClnN,GA3D9Em1J,EAAOx0K,GAAS,SAAUqC,GACxBmyK,EAAOnyK,EAAM5kB,OAAOquG,WAAW,SAAU9+F,GACvCA,EAASqV,EAAMw4K,MAAOx4K,EAAM5kB,OAAOtC,KAAM,CAAC,EAC5C,GACF,IAwDA,IAAI4f,EAAO+5N,GAAe,CAAEnnI,SAAUluG,EAAOkuG,UAAYluG,EAAO6F,QAAQopM,UAAUrvK,GAMlF,OALAnpB,EAAKmpB,QAAU4gK,GAAoBnlL,GAAqBhL,IAASiL,EAAOxgB,GAAMyJ,KAAK+W,GACnFgrO,GAActmP,EAAQyW,EAAKmpB,QAASnpB,EAAK2wO,cACpC3wO,EAAKmwO,WACR5mP,EAAOyV,KAAK,aAAcgB,GAErBmpB,CACT,CAciCynN,CAAernP,EAAQqQ,EAAMuvB,EAAS+mN,GAvDhD,SAAU3mP,EAAQqQ,EAAMuvB,EAASnpB,GACtD,GAAuB,IAAnBmpB,EAAQxgC,QAAgB,QAAQqE,KAAKm8B,GAAU,CACjD,IAAI0nN,EAAO,0BACW,UAAlBj3O,EAAK7N,SACPo9B,EAAU,WAAa0nN,EAAO,aACrB,YAAY7jP,KAAK4M,EAAK7N,YAC/Bo9B,EAAU,OAAS0nN,EAAO,SAE5B,IAAIC,EAAsBx3B,GAAmB/vN,GACzCunP,GAAuBvnP,EAAO6F,OAAOunM,aAAa/8L,EAAK7N,SAASC,cAAe8kP,EAAoB9kP,gBACrGm9B,EAAU0nN,EACV1nN,EAAU5/B,EAAO+E,IAAIyC,WAAW+/O,EAAqBv3B,GAAwBhwN,GAAS4/B,IAC5EA,IACVA,EAAU,2BAEZ0mN,GAActmP,EAAQ4/B,EAASnpB,EAAK2wO,cACpCpnP,EAAOyV,KAAK,aAAcgB,EAC5B,KACsB,QAAhBA,EAAKlR,SACPq6B,EAAUy1M,GAAe,CAAEnnI,SAAUluG,EAAOkuG,UAAYluG,EAAO6F,QAAQopM,UAAUjvM,EAAOykP,OAAO92O,MAAMiyB,EAAS,CAC5G4nN,eAAe,EACfv4K,QAAQ,MAGZx4D,EAAKmpB,QAAU4gK,GAAoBnlL,GAAqBhL,IAASuvB,EAAU9kC,GAAMyJ,KAAKq7B,GACtF0mN,GAActmP,EAAQyW,EAAKmpB,QAASnpB,EAAK2wO,cACpC3wO,EAAKmwO,WACR5mP,EAAOyV,KAAK,aAAcgB,GAG9B,OAAOA,EAAKmpB,OACd,CAwBsF6nN,CAAiBznP,EAAQqQ,EAAMuvB,EAAS+mN,EAC5H,GACF,EAEIz7N,GAAU,SAAU3P,EAAOzY,GAC7B,OAvkZc,SAAUyY,EAAOzY,GAC/B,IAAIgR,EAAUyH,EAAMxW,IACpB,OAAK+O,EAAQ9J,WAOH,SAAUuR,EAAOzY,GAK3B,OADawa,EAAO/B,EAAMxW,IAAI4W,YAHnB,SAAU9S,GACnB,OAAO/F,EAAUuY,GAAqBxS,GACxC,IAEclL,IAAI0d,GACpB,CAVSiwB,CAAMjwB,GAAqBvH,EAAQ9J,aAAa,SAAU3O,GAC/D,OAAQmnB,GAAGjH,EAAOlgB,IAAMyH,EAAUzH,EACpC,IAJSoD,EAAShC,MAKpB,CA+jZSirP,CAAUnsO,EAAOzY,GAAWhG,QACrC,EAEIg9B,GAAe,SAAUC,GAC3B,OAAO79B,EAAW69B,GAAUA,EAASx9B,CACvC,EAgBIswC,GAAY,SAAUtxB,EAAOlM,EAAW0qB,GAC1C,IAAI12B,EAAUgM,EAAUkM,GACpByO,EAAO8P,GAAaC,GACxB,OAAO12B,EAAQ3F,SAAQ,WACrB,OAAOssB,EAAKzO,GAAS9c,EAAShC,OAnBnB,SAAU8e,EAAOlM,EAAW0qB,GAGzC,IAFA,IAAIjmB,EAAUyH,EAAMxW,IAChBilB,EAAO8P,GAAaC,GACjBjmB,EAAQ9J,YAAY,CACzB8J,EAAUA,EAAQ9J,WAClB,IAAI0f,EAAKrO,GAAqBvH,GAC1BmmB,EAAc5qB,EAAUqa,GAC5B,GAAIuQ,EAAYn9B,SACd,OAAOm9B,EACF,GAAIjQ,EAAKN,GACd,KAEJ,CACA,OAAOjrB,EAAShC,MAClB,CAK2C2vC,CAAS7wB,EAAOlM,EAAW2a,EACpE,GACF,EAEI29N,GAAS7sB,GACT8sB,GAAmC,SAAUv4G,EAAIxmI,EAAMnN,GACzD,IAAI0gO,EAAa/sF,EAAGgD,UAAUprH,IAAIvrB,GAClC,GAAI0gO,EACF,IAAK,IAAIl9N,EAAI,EAAGA,EAAIk9N,EAAWh9N,OAAQF,IAAK,CAC1C,IAAIqG,EAAS62N,EAAWl9N,GACxB,GAAI6yI,GAAiBxsI,KAA8B,IAAnBA,EAAOsiP,SAAqBx4G,EAAGtqI,IAAIvF,GAAGqJ,EAAMtD,EAAO2c,UACjF,OAAO,CAEX,CAEF,OAAO,CACT,EACI4lO,GAAe,SAAU9nP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,GACrD,IAAIpxM,EAAO32C,EAAO+E,IAAIo+E,UACtB,OAAIt6E,IAAS8tC,IAGb9tC,EAAO7I,EAAO+E,IAAIE,UAAU4D,GAAM,SAAUA,GAC1C,QAAI++O,GAAiC5nP,EAAQ6I,EAAMnN,IAG5CmN,EAAKmB,aAAe2sC,KAAUqxM,GAAUhoP,EAAQ6I,EAAMnN,EAAMm/N,GAAM,EAC3E,MACSmtB,GAAUhoP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,GAC/C,EACIE,GAAc,SAAUljP,EAAK8D,EAAMtD,GACrC,QAAIoiP,GAAO9+O,EAAMtD,EAAO4oF,WAGpBw5J,GAAO9+O,EAAMtD,EAAO65H,SAGpB75H,EAAO2c,SACgB,IAAlBrZ,EAAK7C,UAAkBjB,EAAIvF,GAAGqJ,EAAMtD,EAAO2c,eADpD,EAGF,EACIgmO,GAAa,SAAUnjP,EAAK8D,EAAMtD,EAAQyqJ,EAAU+3F,EAASltB,GAC/D,IAAIz5N,EAAQmE,EAAOyqJ,GACnB,GAAI9zJ,EAAWqJ,EAAO4iP,SACpB,OAAO5iP,EAAO4iP,QAAQt/O,EAAMtD,EAAQyqJ,GAEtC,GAAI5uJ,EACF,GAAI6U,EAAY7U,EAAMhC,SACpB,IAAK,IAAI+C,KAAOf,EACd,GAAI8Y,GAAM9Y,EAAOe,GAAM,CACrB,IAAIhH,EAAqB,eAAb60J,EAA4BjrJ,EAAIiI,UAAUnE,EAAM1G,GAAOyqF,GAAS7nF,EAAK8D,EAAM1G,GACnFimP,EAAgBxtB,GAAYx5N,EAAMe,GAAM04N,GACxCwtB,EAAenyO,EAAW/a,IAAU+6L,GAAU/6L,GAClD,GAAIktP,GAAgBnyO,EAAWkyO,GAC7B,SAEF,GAAIL,GAAWM,IAAiB9iP,EAAO0hD,MACrC,OAAO,EAET,KAAM8gM,GAAWxiP,EAAO0hD,SAAW0gM,GAAOxsP,EAAO6/N,GAAoBj2N,EAAKqjP,EAAejmP,IACvF,OAAO,CAEX,OAGF,IAAK,IAAIjD,EAAI,EAAGA,EAAIkC,EAAMhC,OAAQF,IAChC,GAAiB,eAAb8wJ,EAA4BjrJ,EAAIiI,UAAUnE,EAAMzH,EAAMlC,IAAM0tF,GAAS7nF,EAAK8D,EAAMzH,EAAMlC,IACxF,OAAO,EAKf,OAAO,CACT,EACI8oP,GAAY,SAAU34G,EAAIxmI,EAAMnN,EAAMm/N,EAAMktB,GAC9C,IAAI3rB,EAAa/sF,EAAGgD,UAAUprH,IAAIvrB,GAC9BqJ,EAAMsqI,EAAGtqI,IACb,GAAIq3N,GAAcvzN,EAChB,IAAK,IAAI3J,EAAI,EAAGA,EAAIk9N,EAAWh9N,OAAQF,IAAK,CAC1C,IAAIqG,EAAS62N,EAAWl9N,GACxB,GAAI+oP,GAAY54G,EAAGtqI,IAAK8D,EAAMtD,IAAW2iP,GAAWnjP,EAAK8D,EAAMtD,EAAQ,aAAcwiP,EAASltB,IAASqtB,GAAWnjP,EAAK8D,EAAMtD,EAAQ,SAAUwiP,EAASltB,GAAO,CAC7J,IAAIrsN,EAAUjJ,EAAOiJ,QACrB,GAAIA,EACF,IAAK,IAAInT,EAAI,EAAGA,EAAImT,EAAQpP,OAAQ/D,IAClC,IAAKg0I,EAAGtqI,IAAIi4M,SAASn0M,EAAM+xN,GAAYpsN,EAAQnT,GAAIw/N,IACjD,OAIN,OAAOt1N,CACT,CACF,CAEJ,EACI+iP,GAAU,SAAUtoP,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,GAChD,GAAIl/O,EACF,OAAOi/O,GAAa9nP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,GAGhD,GADAl/O,EAAO7I,EAAO4E,UAAUC,UACpBijP,GAAa9nP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,GACzC,OAAO,EAET,IAAItiF,EAAYzlK,EAAO4E,UAAUqM,WACjC,QAAIw0J,IAAc58J,IACZi/O,GAAa9nP,EAAQylK,EAAW/pK,EAAMm/N,EAAMktB,GAKpD,EAmDIQ,GAAiB,SAAUvoP,EAAQ6I,EAAM2/O,GAC3C,OAAO7vO,EAAM6vO,GAAa,SAAU5hP,EAAKlL,GACvC,IAAI+sP,EA9uKmB,SAAUzoP,EAAQmzI,GAe3C,OAAOr1I,EAAOkC,EAAOqyI,UAAUprH,IAAIksH,IAdX,SAAU5tI,GAChC,IAAImjP,EAAkB,SAAUxkP,GAC9B,OAAOA,EAAI9E,OAAS,GAAuB,MAAlB8E,EAAIm/E,OAAO,EACtC,EACA,OAAOvlF,EAAO,CACZ,SACA,eACC,SAAUqE,GACX,OAAO2pB,GAAMvmB,EAAQpD,GAAKrE,QAAO,SAAUo0B,GACzC,IAAIy2N,EAAcj0D,EAAUxiK,GAASA,EAliT5B,SAAUhwB,EAAK3D,GAC9B,IAAIU,EAAI,GAIR,OAHAm2L,GAAOlzL,GAAK,SAAU/G,EAAOO,GAC3BuD,EAAEH,KAAKP,EAAEpD,EAAOO,GAClB,IACOuD,CACT,CAES6a,CA0hTmDoY,EA1hTnC0iK,GA2hTjB,OAAO92L,EAAO6qP,EAAaD,EAC7B,GACF,GACF,GAEF,CA8tKuBE,CAAqB5oP,EAAQtE,GAChD,OAAIsE,EAAOqyI,UAAU21G,UAAUn/O,EAAMnN,EAAM,CAAC,EAAG+sP,GACtC7hP,EAAIvC,OAAO,CAAC3I,IAEZkL,CAEX,GAAG,GACL,EAEIiiP,GAAOnoD,GAAQooD,GAAW,aAiB1BC,GAAwB,SAAUlgP,GACpC,OAd4B,SAAUA,GAEtC,IADA,IAAIuyL,EAAQ,GACLvyL,GAAM,CACX,GAAsB,IAAlBA,EAAK7C,UAAkB6C,EAAKqgD,YAAc2/L,IAAQhgP,EAAK8S,WAAWvc,OAAS,EAC7E,MAAO,GAEa,IAAlByJ,EAAK7C,UACPo1L,EAAMt8L,KAAK+J,GAEbA,EAAOA,EAAK1F,UACd,CACA,OAAOi4L,CACT,CAES4tD,CAAwBngP,GAAMzJ,OAAS,CAChD,EACI6pP,GAAoB,SAAUpgP,GAChC,GAAIA,EAAM,CACR,IAAI3F,EAAS,IAAIs8L,GAAc32L,EAAMA,GACrC,IAAKA,EAAO3F,EAAOG,UAAWwF,EAAMA,EAAO3F,EAAOI,OAChD,GAAIm3L,GAAS5xL,GACX,OAAOA,CAGb,CACA,OAAO,IACT,EACIqgP,GAAuB,SAAUC,GACnC,IAAIznD,EAAiBrmL,GAAqB,QAS1C,OARA+J,GAASs8K,EAAgB,CACvB,GAAMonD,GACN,iBAAkB,IAClB,gBAAiB,iBAEfK,GACF59N,GAASm2K,EAAgBrmL,GAAsBwtO,KAE1CnnD,CACT,EAQI0nD,GAA2B,SAAUppP,EAAQ6I,EAAMgzO,QACnC,IAAdA,IACFA,GAAY,GAEd,IAAI92O,EAAM/E,EAAO+E,IAAKH,EAAY5E,EAAO4E,UACzC,GAAImkP,GAAsBlgP,GACxB+yO,GAAgB57O,GAAQ,EAAOqb,GAAqBxS,GAAOgzO,OACtD,CACL,IAAIh5O,EAAM+B,EAAUmB,SAChBq5H,EAAQr6H,EAAIE,UAAU4D,EAAM9D,EAAIi9E,SAChC74E,EAAiBtG,EAAIsG,eACrBq/C,EAAc3lD,EAAI2lD,YAClBl/C,EAAezG,EAAIyG,aACnBm/C,EAAY5lD,EAAI4lD,UAChB2qK,EArByB,SAAUjB,GACzC,IAAIiB,EAAW61B,GAAkB92B,GAIjC,OAHIiB,GAAYA,EAASlqK,UAAUm6B,OAAO,KAAOwlK,IAC/Cz1B,EAAS1B,WAAW,EAAG,GAElB0B,CACT,CAemBi2B,CAA2BxgP,GAC1C9D,EAAImF,OAAOrB,GAAM,GACbM,IAAmBiqN,GAAY5qK,EAAc,GAC/C3lD,EAAIklD,SAASqrK,EAAU5qK,EAAc,GAEnCl/C,IAAiB8pN,GAAY3qK,EAAY,GAC3C5lD,EAAIqlD,OAAOkrK,EAAU3qK,EAAY,GAE/B22E,GAASr6H,EAAIk/M,QAAQ7kF,IACvBg4G,GAAkB/7N,GAAqB+jH,IAEzCx6H,EAAU6E,OAAO5G,EACnB,CACF,EACIymP,GAAuB,SAAUtpP,EAAQ6I,EAAMgzO,QAC/B,IAAdA,IACFA,GAAY,GAEd,IAAI92O,EAAM/E,EAAO+E,IAAKH,EAAY5E,EAAO4E,UACzC,GAAKiE,EAQHugP,GAAyBppP,EAAQ6I,EAAMgzO,QANvC,KADAhzO,EAAOsvN,GAAwBn4N,EAAOoJ,UAAWxE,EAAUqM,aAEzD,KAAOpI,EAAO9D,EAAIkiB,IAAI6hO,KACpBM,GAAyBppP,EAAQ6I,GAAM,EAM/C,EAcI0gP,GAAa,SAAUv/O,EAAYnB,GAErC,OADAmB,EAAWK,YAAYxB,GAChBA,CACT,EACI2gP,GAAsC,SAAUC,EAAa/nD,GAC/D,IAAIgoD,EAAsBjxO,EAAMgxO,GAAa,SAAUz/O,EAAY2/O,GACjE,OAAOJ,GAAWv/O,EAAY2/O,EAAWvpN,WAAU,GACrD,GAAGshK,GACH,OAAO6nD,GAAWG,EAAqBA,EAAoBrmO,cAAcvH,eAAe+sO,IAC1F,EAqDIe,GAAoB,SAAU5pP,EAAQtE,EAAMm/N,EAAMktB,GACpD,IAEI8B,EAAiBhhP,EAAM8gP,EAFvB5kP,EAAM/E,EAAO+E,IACbH,EAAY5E,EAAO4E,UAEnBkO,EAAU,GACVjQ,EAAM+B,EAAUmB,SAChBm6B,EAAYr9B,EAAIsG,eAChB8a,EAASphB,EAAI2lD,YAQjB,IAPA3/C,EAAOq3B,EACoB,IAAvBA,EAAUl6B,WACRie,IAAWic,EAAUgpB,UAAU9pD,SACjCyqP,GAAkB,GAEpBhhP,EAAOA,EAAKmB,YAEPnB,GAAM,CACX,GAAIm/O,GAAUhoP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,GAAU,CAChD4B,EAAa9gP,EACb,KACF,CACIA,EAAKsiB,cACP0+N,GAAkB,GAEpB/2O,EAAQhU,KAAK+J,GACbA,EAAOA,EAAKmB,UACd,CACA,GAAK2/O,EAGL,GAAIE,EAAiB,CACnB,IAAI9gP,EAAWnE,EAAUoE,cACzBnG,EAAI6R,UAAS,GACb,IAAIo1O,EAAcltB,GAAU58N,EAAQ6C,EAAK7C,EAAOqyI,UAAUprH,IAAIvrB,IAAO,GACrEouP,EAAc9lP,GAAM8lP,GACpB9pP,EAAOqyI,UAAUnoI,OAAOxO,EAAMm/N,EAAMivB,EAAa/B,GACjDnjP,EAAU8E,eAAeX,EAC3B,KAAO,CACL,IAAI24L,EAAiBy2B,GAAwBn4N,EAAOoJ,UAAWugP,GAC3DI,EAAoBb,IAAqB,GAAOnkP,KAjHzB,SAAU/E,EAAQ0hM,EAAgBioD,GAC/D,IAtoD+BpnP,EAC3BynP,EACApoD,EAooDA78L,EAAM/E,EAAO+E,IAAKq6H,EAAQr6H,EAAIE,UAAU0kP,EAAY9yO,EAAM6jN,GAAe16N,IACzEo/H,GAASr6H,EAAIk/M,QAAQ7kF,GACvBuqH,EAAW3/O,WAAW63M,aAAangB,EAAgBioD,IAxoDtBpnP,EA0oDZ8Y,GAAqBsuO,GAzoDpCK,EAASzgM,GAAYhnD,EAAK,MAC1Bq/L,EAAM5M,EAXU,SAAUzyL,GAG9B,IAFA,IAAIqhB,EAAW,GACXk4N,EAAUv5O,EAAIwC,IACX+2O,GACLl4N,EAAS9kB,KAAKuc,GAAqBygO,IACnCA,EAAUA,EAAQ3iD,UAEpB,OAAOv1K,CACT,CAGqBqmO,CAAgB1nP,GAAKsV,OAAO,GAAIqoL,IAC/C8pD,EAAO5qP,SAAWwiM,EAAIxiM,QACxB21L,EAAO6M,EAAKn8K,IAuoDR1gB,EAAIk/M,QAAQ0lC,GACdA,EAAW3/O,WAAW63M,aAAangB,EAAgBioD,GAEnD5kP,EAAI0+M,YAAY/hB,EAAgBioD,GAGtC,CAsGIO,CAAyBlqP,EAAQ+pP,EAAsC,OAAnBroD,EAA0BA,EAAiBioD,GAC/F,IAAIQ,EA5Fc,SAAUnqP,EAAQ0hM,EAAgBioD,EAAYjuP,EAAMm/N,EAAMktB,GAC9E,IAAI11G,EAAYryI,EAAOqyI,UACnBttI,EAAM/E,EAAO+E,IACbqlP,EAAep1D,EAAShzL,GAAKqwI,EAAUprH,QAAQ,SAAUksH,GAC3D,OAAOA,IAAez3I,IAASqc,GAAWo7H,EAAY,eACxD,IACIk3G,EAAiB9B,GAAevoP,EAAQ2pP,EAAYS,GAIxD,GAHoBp1D,EAASq1D,GAAgB,SAAUC,GACrD,OAn2KoB,SAAUtqP,EAAQmzI,EAAYo3G,GACpD,IAAIl2N,EAAY,CACd,SACA,QACA,WACA,aACA,SACA,WAEEm2N,EAAY,SAAUjlP,GACxB,OAAO+vL,GAAS/vL,GAAQ,SAAUwI,EAAG5L,GACnC,OAAOrE,EAAOu2B,GAAW,SAAUo2N,GACjC,OAAOA,IAAatoP,CACtB,GACF,GACF,EACA,OAAOrE,EAAOkC,EAAOqyI,UAAUprH,IAAIksH,IAAa,SAAUu3G,GACxD,IAAIC,EAAeH,EAAUE,GAC7B,OAAO5sP,EAAOkC,EAAOqyI,UAAUprH,IAAIsjO,IAAkB,SAAUK,GAC7D,IAAIC,EAAeL,EAAUI,GAC7B,OA1iTQ,SAAUzxO,EAAIC,EAAIoJ,GAI9B,YAHW,IAAPA,IACFA,EAAK8xK,GAEAR,EAAStxK,GAAIA,GAAGrJ,EAAIC,EAC7B,CAqiTa0xO,CAAQH,EAAcE,EAC/B,GACF,GACF,CA40KYE,CAAkB/qP,EAAQsqP,EAAS5uP,EAC7C,IACkB0D,OAAS,EAAG,CAC5B,IAAI4rP,EAAmBrB,EAAWvpN,WAAU,GAI5C,OAHAr7B,EAAIvK,IAAIknM,EAAgBspD,GACxB34G,EAAUnoI,OAAOxO,EAAMm/N,EAAMmwB,EAAkBjD,GAC/ChjP,EAAImF,OAAO8gP,GACJvsP,EAASN,KAAK6sP,EACvB,CACE,OAAOvsP,EAAShC,MAEpB,CAyE4BwuP,CAAgBjrP,EAAQ+pP,EAAmBJ,EAAYjuP,EAAMm/N,EAAMktB,GACvFmD,EAAgB1B,GAAoC12O,EAAQzO,OAAO8lP,EAAkBlsP,WAAY8rP,GACrGX,GAAyBppP,EAAQ0hM,GAAgB,GACjD98L,EAAU89E,kBAAkBwoK,EAAe,GACvCnmP,EAAIk/M,QAAQ0lC,IACd5kP,EAAImF,OAAOy/O,EAEf,CACF,EAuBIwB,GAAkB,SAAUnrP,EAAQ8T,GACtC,IAAIs3O,EAAiBprP,EAAO6F,OAAOC,wBACnC,OAAOoU,GAAMkxO,EAAgB1vP,GAAKoY,MAAcokN,GAAYpkN,EAAQ/O,OAASs1L,GAAUvmL,EAAQ/O,IACjG,EAKIsmP,GAAmB,CAAC,EACpBrtP,GAASwa,GACT8yO,GAAS/1D,GAEC81D,GAAqB,MAE/BA,GAAqB,IAAI,IAE3BA,GAAqB,IAAEvsP,MAOC,SAAUkB,GAClC,IACIurP,EADA1oP,EAAM7C,EAAO4E,UAAUmB,SASvBylP,EAAQxxD,GAAe,CAAC,QACvBn3L,EAAIE,YACPwoP,EAASvrP,EAAO4E,UAAU6mP,oBAC1BH,GAAOttP,GAAOA,GAAOutP,EAAQC,IAVX,SAAUE,GAC5B,OAAOF,EAAME,EAAI1yD,mBAAgE,IAA5CxD,GAAU+1D,EAAQG,EAAI1yD,gBAC7D,KAQuD,SAAU0yD,GAPnD,IAAUC,EAAMC,EAAND,EAQZD,EAAI1yD,gBAPd8jB,GAD4B8uC,EAQGF,GAPhBxhP,SACf4yM,GAAS6uC,GAAM77K,OAAO,YAAYA,OAAO87K,EAAKjwO,WAO9C,IAEJ,IAEA,IA6vH0BuU,GAqQpB0jC,GAlgIFi4L,GAAS/wP,GAAM8C,KACfkuP,GAAkB,SAAUjjP,GAC9B,OAAOkxL,GAAYlxL,KAAUixN,GAAiBjxN,KAAUqvN,GAAYrvN,KAAUwxL,GAAUxxL,EAC1F,EACIkjP,GAAqB,SAAUljP,EAAMg3L,GACvC,IAAK,IAAI30K,EAAUriB,EAAMqiB,EAASA,EAAUA,EAAQ20K,GAAc,CAChE,GAAIpF,GAASvvK,IAAYlQ,GAAWkQ,EAAQ9kB,MAC1C,OAAOyC,EAET,GAAIkxL,GAAY7uK,KAAa4uM,GAAiB5uM,GAC5C,OAAOA,CAEX,CACA,OAAOriB,CACT,EACImjP,GAAqB,SAAUjnP,EAAKm8I,EAAM59I,GAC5C,IAAI2oP,EAAe3X,GAAavvO,GAChC,GAAIm8I,GAAQ59I,IACV49I,EAAO6qG,GAAmB7qG,EAAM,mBAChC59I,EAAOyoP,GAAmBzoP,EAAM,eAC5B2oP,EAAalzC,QAAQ73D,EAAM59I,IAAO,CACpC,IAAK,IAAI4nB,EAAUg2H,EAAK/1H,YAAaD,GAAWA,IAAY5nB,GAAO,CACjE,IAAI4oP,EAAahhO,EACjBA,EAAUA,EAAQC,YAClB+1H,EAAK72I,YAAY6hP,EACnB,CAKA,OAJAnnP,EAAImF,OAAO5G,GACXxI,GAAM8C,KAAK9C,GAAM4K,KAAKpC,EAAKqY,aAAa,SAAU9S,GAChDq4I,EAAK72I,YAAYxB,EACnB,IACOq4I,CACT,CAEF,OAAO59I,CACT,EACI6oP,GAAgB,SAAUpnP,EAAKQ,EAAQs1N,EAAMhyN,GAC/C,GAAIA,IAAkC,IAA1BtD,EAAO6mP,eAA0B,CAC3C,IAAIvR,EAAUmR,GAAmBjnP,EAAKw1N,GAAwB1xN,GAAOA,GACrEmjP,GAAmBjnP,EAAK81O,EAAStgB,GAAwBsgB,GAAS,GACpE,CACF,EAaIwR,GAAuB,SAAUxjP,EAAM7K,EAAQ4yB,GACjDi7N,GAAOhjP,EAAK8S,YAAY,SAAU9S,GAC5BijP,GAAgBjjP,KACd7K,EAAO6K,IACT+nB,EAAQ/nB,GAENA,EAAK6S,iBACP2wO,GAAqBxjP,EAAM7K,EAAQ4yB,GAGzC,GACF,EAMI07N,GAAW,SAAUvnP,EAAKrJ,GAC5B,OAAO,SAAUmN,GACf,SAAUA,IAAQ+jF,GAAS7nF,EAAK8D,EAAMnN,GACxC,CACF,EACI6wP,GAAa,SAAUxnP,EAAKrJ,EAAMP,GACpC,OAAO,SAAU0N,GACf9D,EAAI09M,SAAS55M,EAAMnN,EAAMP,GACU,KAA/B0N,EAAKnF,aAAa,UACpBmF,EAAK6c,gBAAgB,SAdL,SAAU3gB,EAAK8D,GACb,SAAlBA,EAAKrG,UAAuD,IAAhCuC,EAAIs7M,WAAWx3M,GAAMzJ,QACnD2F,EAAImF,OAAOrB,GAAM,EAErB,CAYI2jP,CAAgBznP,EAAK8D,EACvB,CACF,EAEI4jP,GAAen0N,GAAa,CAC9B,CAAEm3L,KAAM,IACR,CAAE7L,OAAQ,CAAC,SACX,CAAEhmF,QAAS,MAET8uH,GAAc,qBACdC,GAAS7xP,GAAM8C,KACfgvP,GAAS9xB,GAIT+xB,GAAwB,SAAU9nP,EAAK8D,EAAM6a,GAC/C,OAAO3e,EAAIy/M,UAAU37M,EAAM6a,IAAW7a,IAAS6a,IAAW3e,EAAIi9E,QAAQt+D,EACxE,EACIgqF,GAAe,SAAU2hC,EAAIxsI,EAAK8X,GACpC,IAAIulB,EAAYr9B,EAAI8X,EAAQ,iBAAmB,gBAC3CsJ,EAASphB,EAAI8X,EAAQ,cAAgB,aACzC,GAAIo/K,GAAY75J,GAAY,CAC1B,IAAI4sN,EAAU5sN,EAAUvkB,WAAWvc,OAAS,GACvCub,GAASsJ,GACZA,IAEFic,EAAYA,EAAUvkB,WAAWsI,EAAS6oO,EAAUA,EAAU7oO,EAChE,CAOA,OANIw2K,GAASv6J,IAAcvlB,GAASsJ,GAAUic,EAAUgpB,UAAU9pD,SAChE8gC,EAAY,IAAIs/J,GAAct/J,EAAWmvG,EAAGjmI,WAAW9F,QAAU48B,GAE/Du6J,GAASv6J,KAAevlB,GAAoB,IAAXsJ,IACnCic,EAAY,IAAIs/J,GAAct/J,EAAWmvG,EAAGjmI,WAAW83I,QAAUhhH,GAE5DA,CACT,EACI6sN,GAA0B,SAAUlkP,EAAM8R,GAC5C,IAAIkV,EAAOlV,EAAQ,aAAe,YAClC,GA1BqB,SAAU9R,GAC/B,MAAO,eAAepF,KAAKoF,EAAKrG,SAClC,CAwBMwqP,CAAiBnkP,IAASA,EAAKgnB,GAAO,CACxC,IAAIo9N,EAAYpkP,EAAKgnB,GACrB,MAAsB,OAAlBhnB,EAAKrG,UACAyqP,EAAUp9N,IAEVo9N,CAEX,CACA,OAAOpkP,CACT,EACI2wB,GAAS,SAAUz0B,EAAK8D,EAAMnN,EAAMyO,GACtC,IAAIyhB,EAAU7mB,EAAIqF,OAAO1O,EAAMyO,GAG/B,OAFAtB,EAAKmB,WAAWC,aAAa2hB,EAAS/iB,GACtC+iB,EAAQvhB,YAAYxB,GACb+iB,CACT,EACIshO,GAAmB,SAAUnoP,EAAK8D,EAAMvF,EAAM5H,EAAMyO,GACtD,IAAIwQ,EAAQU,GAAqBxS,GAC7B+iB,EAAUvQ,GAAqBtW,EAAIqF,OAAO1O,EAAMyO,IAChDizN,EAAW95N,EAAO41L,GAAav+K,GAASs+K,GAAat+K,GASzD,OARAm1D,GAAOlkD,EAASwxM,GACZ95N,GACFi2L,GAAS5+K,EAAOiR,GAChBokD,GAAQpkD,EAASjR,KAEjB6+K,GAAQ7+K,EAAOiR,GACfL,GAASK,EAASjR,IAEbiR,EAAQ7mB,GACjB,EAeI23D,GAAO,SAAU33D,EAAK8D,EAAMvF,EAAMk3N,GACpC,IAAItvM,EAAUqvM,GAAwB1xN,EAAMvF,EAAMk3N,GAClD,OAAOtkN,EAAWgV,IAAiC,OAArBA,EAAQ1oB,UAAqBuC,EAAIi9E,QAAQ92D,EACzE,EAuCIiiO,GAAuB,SAAU99G,EAAI9pI,EAAQs1N,EAAMhyN,EAAMukP,GAC3D,IAAIC,EACAtoP,EAAMsqI,EAAGtqI,IACb,IA3Dc,SAAUA,EAAK8D,EAAMtD,GACnC,SAAI61N,GAAe71N,KAAWqnP,GAAO/jP,EAAMtD,EAAO4oF,aAG9C2jD,GAAcvsI,KAAWqnP,GAAO/jP,EAAMtD,EAAO65H,UAG7C2S,GAAiBxsI,GACZw0L,GAAYlxL,IAAS9D,EAAIvF,GAAGqJ,EAAMtD,EAAO2c,eADlD,EAGF,CAiDOorO,CAAUvoP,EAAK8D,EAAMtD,KAhDC,SAAUsD,EAAMtD,GAC3C,OAAOA,EAAO6I,OAA2B,MAAlBvF,EAAKrG,QAC9B,CA8CwC+qP,CAAuB1kP,EAAMtD,GACjE,OAAOknP,GAAah9B,OAEtB,IAAIltN,EAAMsG,EACV,GAAIuyN,GAAe71N,IAA6B,QAAlBA,EAAO2E,QAAoBwqL,EAAUnvL,EAAOioP,qBAAsB,CAC9F,IAAIC,EAAkBz4D,EAASjwL,EAAIs7M,WAAW99M,IAAM,SAAUskC,GAC5D,OAAOguJ,EAAWtvL,EAAOioP,oBAAqB3mN,EAAKnrC,KAAK+G,cAC1D,IAKA,GAJAsC,EAAI89M,iBAAiBtgN,GACrBwyL,EAAO04D,GAAiB,SAAU5mN,GAChC,OAAO9hC,EAAIu7M,UAAU/9M,EAAKskC,EAAKnrC,KAAMmrC,EAAK1rC,MAC5C,IACIsyP,EAAgBruP,OAAS,EAC3B,OAAOqtP,GAAa7oC,OAAO,OAE/B,CACA,GAAsB,QAAlBr+M,EAAO2E,OAAkB,CAC3ByiP,GAAOpnP,EAAOg/B,QAAQ,SAAUppC,EAAOO,GACrCP,EAAQ6/N,GAAoBj2N,EAAK61N,GAAYz/N,EAAO0/N,GAAOn/N,EAAO,IAC9D0a,EAAS1a,KACXA,EAAOP,EACPiyP,EAAc,OAEZ7nP,EAAOmoP,iBAAoBN,GAAeR,GAAOhgK,GAAS7nF,EAAKqoP,EAAa1xP,GAAOP,KACrF4J,EAAI09M,SAASlgN,EAAK7G,EAAM,IAE1B2xP,GAAiB,CACnB,IACIA,GAAkD,KAAhCtoP,EAAIiI,UAAUzK,EAAK,WACvCA,EAAImjB,gBAAgB,SACpBnjB,EAAImjB,gBAAgB,mBAEtBinO,GAAOpnP,EAAO++B,YAAY,SAAUnpC,EAAOO,GACzC,IAAIiyP,EAMJ,GALAxyP,EAAQy/N,GAAYz/N,EAAO0/N,GACvBzkN,EAAS1a,KACXA,EAAOP,EACPiyP,EAAc,MAEZ7nP,EAAOmoP,iBAAoBN,GAAeR,GAAO7nP,EAAIiI,UAAUogP,EAAa1xP,GAAOP,GAAS,CAC9F,GAAa,UAATO,IACFP,EAAQ4J,EAAIiI,UAAUzK,EAAK7G,MAEzBiyP,EAAW,GACX54D,EAAO55L,EAAM6I,MAAM,QAAQ,SAAU4D,GAC/B,WAAWnE,KAAKmE,KAClB+lP,IAAaA,EAAW,IAAM,IAAM/lP,EAExC,IACI+lP,GAEF,YADA5oP,EAAIu7M,UAAU/9M,EAAK7G,EAAMiyP,GAQ/B,GAHIjB,GAAYjpP,KAAK/H,IACnB6G,EAAImjB,gBAAgB,YAAchqB,GAEvB,UAATA,GAAoBs+L,GAAe,CAAC,MAAhBA,CAAuBz3L,IAAiD,SAAzCwC,EAAI6nF,SAASrqF,EAAK,mBAGvE,OAFAA,EAAImjB,gBAAgBhqB,QACpBqJ,EAAI09M,SAASlgN,EAAK,kBAAmB,QAG1B,UAAT7G,GACF6G,EAAImjB,gBAAgB,aAEtBnjB,EAAImjB,gBAAgBhqB,EACtB,CACF,IACAixP,GAAOpnP,EAAOiJ,SAAS,SAAUrT,GAC/BA,EAAQy/N,GAAYz/N,EAAO0/N,GACtBuyB,IAAeroP,EAAIi4M,SAASowC,EAAajyP,IAC5C4J,EAAI65J,YAAYr8J,EAAKpH,EAEzB,IAEA,IADA,IAAIgP,EAAQpF,EAAIs7M,WAAW99M,GAClBrD,EAAI,EAAGA,EAAIiL,EAAM/K,OAAQF,IAAK,CACrC,IAAIk7L,EAAWjwL,EAAMjL,GAAGsD,SACxB,GAA8B,IAA1B43L,EAASx7L,QAAQ,MAA4C,IAA9Bw7L,EAASx7L,QAAQ,SAClD,OAAO6tP,GAAah9B,MAExB,CACF,CACA,MAAsB,SAAlBlqN,EAAO2E,QA5HI,SAAUmlI,EAAIxmI,EAAMtD,GACnC,IACIqoP,EADA5jP,EAAanB,EAAKmB,WAElBjF,EAAMsqI,EAAGtqI,IAAK8oP,EAAkB99B,GAAmB1gF,GACnDyC,GAAcvsI,KACXsoP,EAUC7jP,IAAejF,EAAIo+E,YAChB59E,EAAOuoP,YAAelB,GAAO/jP,EAAMtD,EAAOuoP,aAC7C/4D,EAAOr2L,GAAKmK,EAAK8S,aAAa,SAAU9S,GAClCsyF,GAAQk0C,EAAIw+G,EAAiBhlP,EAAKrG,SAASC,eACxCmrP,EAIHA,EAAavjP,YAAYxB,IAHzB+kP,EAAep0N,GAAOz0B,EAAK8D,EAAMglP,GACjC9oP,EAAIoC,WAAWymP,EAAcv+G,EAAG5mI,SAASslP,0BAK3CH,EAAe,IAEnB,KAtBA7oP,EAAIi9E,QAAQn5E,KAAU9D,EAAIi9E,QAAQh4E,KAC/B0yD,GAAK33D,EAAK8D,GAAM,IAAW6zD,GAAK33D,EAAK8D,EAAK1F,YAAY,GAAM,IAC/D0F,EAAKoB,aAAalF,EAAIqF,OAAO,MAAOvB,EAAK1F,YAEtCu5D,GAAK33D,EAAK8D,GAAM,IAAU6zD,GAAK33D,EAAK8D,EAAKswL,WAAW,GAAO,IAC9DtwL,EAAKwB,YAAYtF,EAAIqF,OAAO,SAjpLlB,SAAU7E,GAC5B,OAAOwsI,GAAiBxsI,IAAW61N,GAAe71N,IAAW6U,GAAK0R,GAAMvmB,EAAQ,UAAU,EAC5F,CAqqLMyoP,CAAczoP,KAAYqnP,GAAOrnP,EAAO4oF,OAAQtlF,IAGpD9D,EAAImF,OAAOrB,GAAM,EACnB,CAwFIiyO,CAAWzrG,EAAI9sI,EAAKgD,GACbknP,GAAa7uH,WAEf6uH,GAAah9B,MACtB,EACIw+B,GAAiB,SAAU5+G,EAAI9pI,EAAQs1N,EAAMhyN,EAAMukP,GACrD,OAAOD,GAAqB99G,EAAI9pI,EAAQs1N,EAAMhyN,EAAMukP,GAAazwP,KAAKJ,GAAO,SAAU2xP,GAErF,OADA7+G,EAAGtqI,IAAI6+M,OAAO/6M,EAAMqlP,IACb,CACT,GAAG1xP,EACL,EAaI2xP,GAAwB,SAAUnuP,EAAQuF,EAAQs1N,EAAM16L,GAC1D,OAAOgtN,GAAqBntP,EAAQuF,EAAQs1N,EAAM16L,EAAOA,GAAOxjC,KAAKP,EAAS+jC,IAAQ,SAAU+tN,GAG9F,OAFeluP,EAAO+E,IAAIy9M,iBACjBn4M,YAAY81B,GACdngC,EAAO+E,IAAI6+M,OAAOzjL,EAAO+tN,EAClC,GAAG9xP,EAAS,MACd,EAqCIsrC,GAAW,SAAU2nG,EAAI3zI,EAAMm/N,EAAMhyN,EAAMk/O,GAC7C,IAAI3rB,EAAa/sF,EAAGgD,UAAUprH,IAAIvrB,GAC9B6J,EAAS62N,EAAW,GACpB7nF,GAAkB,EAClBxvI,EAAMsqI,EAAGtqI,IACTH,EAAYyqI,EAAGzqI,UACfwpP,EAAoB,SAAUluN,GAChC,IAAImuN,EA9Da,SAAUruP,EAAQkgC,EAAWxkC,EAAMm/N,EAAMktB,GAC5D,IAAIsG,EASJ,OARAt5D,EAAOomC,GAAan7N,EAAO+E,IAAKm7B,EAAUl2B,YAAYiP,WAAW,SAAUyK,GACzE,IAAK2qO,GAA4B,WAAd3qO,EAAO/oB,IAAiC,SAAd+oB,EAAO/oB,GAAe,CACjE,IAAI4K,EAASyiP,GAAUhoP,EAAQ0jB,EAAQhoB,EAAMm/N,EAAMktB,GAC/CxiP,IAA2B,IAAjBA,EAAOvB,QACnBqqP,EAAa3qO,EAEjB,CACF,IACO2qO,CACT,CAmDqBC,CAAej/G,EAAInvG,EAAWxkC,EAAMm/N,EAAMktB,GAC3D,OA5Ce,SAAU/nP,EAAQo8N,EAAYiyB,EAAYnuN,EAAW15B,EAAQxC,EAAOuB,EAAQs1N,GAC7F,IAAI16L,EAAOouN,EAAWC,EAClBzpP,EAAM/E,EAAO+E,IACjB,GAAIspP,EAAY,CAEd,IADA,IAAII,EAAmBJ,EAAWrkP,WACzB8uK,EAAW54I,EAAUl2B,WAAY8uK,GAAYA,IAAa21E,EAAkB31E,EAAWA,EAAS9uK,WAAY,CACnHm2B,EAAQp7B,EAAIo7B,MAAM24I,GAAU,GAC5B,IAAK,IAAI55K,EAAI,EAAGA,EAAIk9N,EAAWh9N,QAEf,QADd+gC,EAAQguN,GAAsBnuP,EAAQo8N,EAAWl9N,GAAI27N,EAAM16L,IADtBjhC,KAMnCihC,IACEouN,GACFpuN,EAAM91B,YAAYkkP,GAEfC,IACHA,EAAaruN,GAEfouN,EAAYpuN,EAEhB,CACe56B,EAAOmpP,OAAU3pP,EAAIi9E,QAAQqsK,KAC1CnuN,EAAYn7B,EAAIf,MAAMqqP,EAAYnuN,IAEhCquN,IACF/nP,EAAOwD,WAAWC,aAAaskP,EAAW/nP,GAC1CgoP,EAAWnkP,YAAY7D,GACnB40N,GAAe71N,IACjB4mP,GAAcpnP,EAAKQ,EAAQs1N,EAAM0zB,GAGvC,CACA,OAAOruN,CACT,CASWyuN,CAAat/G,EAAI+sF,EAAYiyB,EAAYnuN,EAAWA,EAAW,EAAM36B,EAAQs1N,EACtF,EAII+zB,EAAmB,SAAU/lP,GAC/B,OAAO/K,EAAOs+N,GAAY,SAAUzqF,GAClC,OAAOs8G,GAAe5+G,EAAIsC,EAAKkpF,EAAMhyN,EAAMA,EAC7C,GACF,EACI+nB,EAAU,SAAU/nB,GACtB,IAAIgmP,GAAsB,EACtBx6G,GAA0B,EAC1B0lD,GAAYlxL,IAAS9D,EAAIk9E,mBAAmBp5E,KAC9CgmP,EAAsBt6G,EACtBA,EAAmD,SAAjCxvI,EAAIk9E,mBAAmBp5E,GACzCwrI,GAA0B,GAE5B,IAAIzwH,EAAWllB,GAAKmK,EAAK8S,YACzB,GAAI44H,IAAoBF,EAAyB,CAC/C,IACIy6G,EADUF,EAAiB/lP,IACK/K,EAAOs+N,GAAY,SAAU79N,GAC/D,OAAO0pP,GAAYljP,EAAK8D,EAAMtK,EAChC,IACIyL,EAAanB,EAAKmB,YACjB8kP,GAAsB34O,EAAcnM,IAAeqxN,GAAuB91N,IAC7EqpP,EAAiB5kP,EAErB,CACA,GAAIzE,EAAO28M,MACLt+L,EAASxkB,OAAQ,CACnB,IAAK,IAAIF,EAAI,EAAGA,EAAI0kB,EAASxkB,OAAQF,IACnC0xB,EAAQhN,EAAS1kB,IAEfm1I,IACFE,EAAkBs6G,EAEtB,CAOF95D,EALsB,CACpB,YACA,eACA,aAEsB,SAAUmmC,GAC5BnhC,GAAYlxL,IAASwmI,EAAGtqI,IAAI6nF,SAAS/jF,EAAM,qBAAuBqyN,GAAcryN,EAAKmB,YAAcixN,GAAkBl2N,EAAK8D,EAAKmB,cAAgBkxN,GACjJ+yB,GAAe5+G,EAAI,CACjB6yE,MAAM,EACNj7J,OAAO,EACPknC,OAAQ,OACR5pD,OAAQ,CAAEwqN,eAAgB7zB,IACzB,KAAMryN,EAEb,GACF,EACI8iB,EAAS,SAAUhR,GACrB,IAAI9R,EAAO9D,EAAIkiB,IAAItM,EAAQ,SAAW,QAClC5Z,EAAM8H,EAAK8R,EAAQ,aAAe,aAQtC,OA/DyB,SAAU9R,GACnC,OAAOixN,GAAiBjxN,IAASkxL,GAAYlxL,KAAsB,WAAZA,EAAKlO,IAA+B,SAAZkO,EAAKlO,GACtF,CAsDMq0P,CAAqBjuP,KACvBA,EAAMA,EAAI4Z,EAAQ,aAAe,cAE/B8/K,GAAS15L,IAA4B,IAApBA,EAAIqF,KAAKhH,SAC5B2B,EAAM4Z,EAAQ9R,EAAKmwL,iBAAmBnwL,EAAKsiB,YAActiB,EAAKsiB,aAAetiB,EAAKmwL,iBAEpFj0L,EAAImF,OAAOrB,GAAM,GACV9H,CACT,EACIkuP,EAAiB,SAAUpsP,GAC7B,IAAIsG,EAAgBG,EAChBwgP,EAAcltB,GAAUvtF,EAAIxsI,EAAKu5N,EAAYv5N,EAAIE,WACrD,GAAIwC,EAAOvB,MAAO,CAIhB,GAHA8lP,EAAc9lP,GAAM8lP,IACpB3gP,EAAiBukG,GAAa2hC,EAAIy6G,GAAa,OAC/CxgP,EAAeokG,GAAa2hC,EAAIy6G,IACK,CAGnC,GAFA3gP,EAAiB4jP,GAAwB5jP,GAAgB,GACzDG,EAAeyjP,GAAwBzjP,GAAc,GACjDujP,GAAsB9nP,EAAKoE,EAAgBG,GAAe,CAC5D,IAAI0hB,EAASvsB,EAASC,KAAKyK,EAAehG,YAAYnG,MAAMmM,GAM5D,OALAilP,EAAkBlB,GAAiBnoP,EAAKimB,GAAQ,EAAM,OAAQ,CAC5D,GAAM,SACN,gBAAiB,mBAEnBW,GAAO,EAET,CACA,GAAIkhO,GAAsB9nP,EAAKuE,EAAcH,GAO3C,OANI6hB,EAASvsB,EAASC,KAAK4K,EAAa6vL,WAAWn8L,MAAMsM,GACzD8kP,EAAkBlB,GAAiBnoP,EAAKimB,GAAQ,EAAO,OAAQ,CAC7D,GAAM,OACN,gBAAiB,mBAEnBW,GAAO,GAGTxiB,EAAiBqwB,GAAOz0B,EAAKoE,EAAgB,OAAQ,CACnD,GAAM,SACN,gBAAiB,aAEnBG,EAAekwB,GAAOz0B,EAAKuE,EAAc,OAAQ,CAC/C,GAAM,OACN,gBAAiB,aAEnB,IAAI4iN,EAASnnN,EAAI2+E,YACjBwoI,EAAOlkK,cAAc7+C,GACrB+iN,EAAOjkK,aAAa3+C,GACpBwzN,GAAO/3N,EAAKmnN,GAAQ,SAAU9wB,GAC5BrG,EAAOqG,GAAO,SAAUx+L,GACjBk9N,GAAiBl9N,IAAOk9N,GAAiBl9N,EAAEoN,aAC9CokP,EAAkBxxP,EAEtB,GACF,IACAwxP,EAAkBjlP,GAClBilP,EAAkB9kP,GAClBH,EAAiBwiB,GAAO,GACxBriB,EAAeqiB,GACjB,MACExiB,EAAiBG,EAAe8kP,EAAkBjlP,GAEpD2gP,EAAY3gP,eAAiBA,EAAea,WAAab,EAAea,WAAab,EACrF2gP,EAAYthM,YAAczjD,EAAIs1M,UAAUlxM,GACxC2gP,EAAYxgP,aAAeA,EAAaU,WAAaV,EAAaU,WAAaV,EAC/EwgP,EAAYrhM,UAAY1jD,EAAIs1M,UAAU/wM,GAAgB,CACxD,CACAwzN,GAAO/3N,EAAK+kP,GAAa,SAAU1uD,GACjCrG,EAAOqG,EAAOxqK,EAChB,GACF,EACA,GAAI/nB,EAAJ,CACE,GAAIsxN,GAAOtxN,GAAO,CAChB,IAAIhG,EAAMkC,EAAI2+E,YACd7gF,EAAI0G,eAAeV,GACnBhG,EAAI2G,YAAYX,GAChBomP,EAAepsP,EACjB,MACEosP,EAAepmP,GAEjB+4N,GAAiBvyF,EAAI3zI,EAAMmN,EAAMgyN,EAEnC,MACA,GAAoD,UAAhD91N,EAAIk9E,mBAAmBr9E,EAAUC,WAYhCD,EAAU2+I,eAAkB63E,GAAe71N,KAAWu4N,GAAmBzuF,GAAIjwI,OAShFwqP,GAAkBv6G,EAAI3zI,EAAMm/N,EAAMktB,IARlC5pK,GAASv5E,GAAW,GAAM,WACxB45N,GAAYnvF,EAAI4/G,EAClB,IACI7zB,GAAe71N,IAAW+iP,GAAQj5G,EAAI3zI,EAAMm/N,EAAMj2N,EAAUqM,aAC9DmpN,GAAUr1N,EAAKH,EAAWA,EAAUmB,UAEtCspI,EAAGkwB,eAILqiE,GAAiBvyF,EAAI3zI,EAAMmN,EAAMgyN,OAvBjC,CACEhyN,EAAOjE,EAAUC,UACjB,IAAK,IAAI3F,EAAI,EAAGA,EAAIk9N,EAAWh9N,UACzBg9N,EAAWl9N,GAAGgwP,kBACZjB,GAAe5+G,EAAI+sF,EAAWl9N,GAAI27N,EAAMhyN,EAAMA,IAFf3J,KAOvC0iO,GAAiBvyF,EAAI3zI,EAAMmN,EAAMgyN,EAEnC,CAaF,EAEIs0B,GAASr0P,GAAM8C,KAyDfwxP,GAASt0P,GAAM8C,KACfyxP,GAAgB,SAAUxmP,GAC5B,OAAOkxL,GAAYlxL,KAAUixN,GAAiBjxN,KAAUqvN,GAAYrvN,KAAUwxL,GAAUxxL,EAC1F,EAYIymP,GAAgB,SAAUjgH,EAAI3zI,EAAMm/N,EAAMhyN,GAC5C,IAAIuzN,EAAa/sF,EAAGgD,UAAUprH,IAAIvrB,GAC9B6J,EAAS62N,EAAW,GACpB74E,GAAe16I,GAAQwmI,EAAGzqI,UAAU2+I,cACpCx+I,EAAMsqI,EAAGtqI,IACTH,EAAYyqI,EAAGzqI,UACf2qP,EAAmB,SAAUhtP,EAAKovI,GAUpC,QATY,IAARA,IACFA,EAAMpsI,GAEJrJ,EAAWy1I,EAAI69G,WACjB79G,EAAI69G,SAASjtP,EAAKovI,EAAKkpF,EAAMhyN,GAE/BumP,GAAOz9G,EAAIptG,QAAQ,SAAUppC,EAAOO,GAClCqJ,EAAI09M,SAASlgN,EAAK7G,EAAMk/N,GAAYz/N,EAAO0/N,GAC7C,IACIlpF,EAAIptG,OAAQ,CACd,IAAIkrN,EAAW1qP,EAAIiI,UAAUzK,EAAK,SAC9BktP,GACF1qP,EAAIu7M,UAAU/9M,EAAK,iBAAkBktP,EAEzC,CACAL,GAAOz9G,EAAIrtG,YAAY,SAAUnpC,EAAOO,GACtCqJ,EAAIu7M,UAAU/9M,EAAK7G,EAAMk/N,GAAYz/N,EAAO0/N,GAC9C,IACAu0B,GAAOz9G,EAAInjI,SAAS,SAAUrT,GAC5BA,EAAQy/N,GAAYz/N,EAAO0/N,GACtB91N,EAAIi4M,SAASz6M,EAAKpH,IACrB4J,EAAI45J,SAASp8J,EAAKpH,EAEtB,GACF,EACIu0P,EAAiB,SAAUtzB,EAAYvzN,GACzC,IAAI8mP,GAAQ,EAcZ,OAbAP,GAAOhzB,GAAY,SAAU72N,GAC3B,QAAKwsI,GAAiBxsI,KAGlB4Q,EAAc5Q,EAAOxC,YAAcwC,EAAOxC,YAAcwgJ,OAA5D,EAGIx+I,EAAIvF,GAAGqJ,EAAMtD,EAAO2c,YAAcg2M,GAAYrvN,IAChD0mP,EAAiB1mP,EAAMtD,GACvBoqP,GAAQ,GACD,QAHT,EAKF,IACOA,CACT,EACIC,EAAoB,SAAUtwB,GAChC,GAAI7qC,EAAW6qC,GAAW,CACxB,IAAIuwB,EAAU9qP,EAAIqF,OAAOk1N,GAEzB,OADAiwB,EAAiBM,GACVA,CACT,CACE,OAAO,IAEX,EACIC,EAAgB,SAAU/qP,EAAKlC,EAAKktP,GACtC,IAAI7wB,EAAc,GACd3qF,GAAkB,EAClB+qF,EAAW/5N,EAAO4oF,QAAU5oF,EAAO65H,MACnCywH,EAAUD,EAAkBtwB,GAChCxC,GAAO/3N,EAAKlC,GAAK,SAAUu4L,GACzB,IAAI40D,EACAp/N,EAAU,SAAU/nB,GACtB,IAAIwrI,GAA0B,EAC1Bw6G,EAAsBt6G,EACtB/xI,EAAWqG,EAAKrG,SAASC,cACzBuH,EAAanB,EAAKmB,WAClBimP,EAAajmP,EAAWxH,SAASC,cAMrC,GALIs3L,GAAYlxL,IAAS9D,EAAIk9E,mBAAmBp5E,KAC9CgmP,EAAsBt6G,EACtBA,EAAmD,SAAjCxvI,EAAIk9E,mBAAmBp5E,GACzCwrI,GAA0B,GAExBumD,GAAO/xL,KAvFD,SAAU7I,EAAQuF,EAAQsD,EAAMonP,GAChD,GAnrOwB,SAAUjwP,GAClC,OAAOA,EAAOE,SAAS,sBAAsB,EAAO,UACtD,CAirOMgwP,CAAoBlwP,IAAWo7N,GAAe71N,GAAS,CACzD,IAAI4qP,EAAwB5pD,GAAyBvmM,EAAO6F,QACxDuqP,EAAsBllO,GAAQ7P,GAAqBxS,IAAO,SAAUqiB,GACtE,OAAOgtM,GAAYhtM,EAAQnmB,IAC7B,IACA,OAAOoV,GAAkBg2O,EAAuBF,IAAe5sD,GAAUhoL,GAAqBxS,EAAKmB,aAAa,KAAWomP,CAC7H,CACE,OAAO,CAEX,CA6E6BC,CAAYhhH,EAAI9pI,EAAQsD,EAAMonP,GAKjD,OAJAD,EAAiB,UACbl+G,GAAcvsI,IAChBR,EAAImF,OAAOrB,IAIf,GAAIipI,GAAcvsI,IAAWA,EAAOqmB,SAAWo8N,GAAU34G,EAAIxmI,EAAMnN,EAAMm/N,GACvEm1B,EAAiB,SADnB,CAIA,GAAIz7G,IAAoBF,GAA2BvC,GAAcvsI,KAAYA,EAAOqmB,SAAW8uM,GAAcrrF,EAAI7sI,IAAa24F,GAAQk0C,EAAI4gH,EAAY3wB,GAAW,CAC/J,IAAI/8N,EAAMwC,EAAI6+M,OAAO/6M,EAAMy2N,GAI3B,OAHAiwB,EAAiBhtP,GACjB28N,EAAYpgO,KAAKyD,QACjBytP,EAAiB,KAEnB,CACA,GAAIj+G,GAAiBxsI,GAAS,CAC5B,IAAIoqP,EAAQD,EAAetzB,EAAYvzN,GAIvC,IAHK8mP,GAASx5O,EAAcnM,IAAeqxN,GAAuB91N,KAChEoqP,EAAQD,EAAetzB,EAAYpyN,KAEhCoxN,GAAe71N,IAAWoqP,EAE7B,YADAK,EAAiB,KAGrB,EACIz7G,GAAoBF,IAA2Bl5C,GAAQk0C,EAAIiwF,EAAU98N,KAAa24F,GAAQk0C,EAAI4gH,EAAY3wB,KAAgBywB,GAAgBt1D,GAAS5xL,IAAS83L,GAAO93L,EAAKzC,OAAW8xN,GAAYrvN,IAAWuyN,GAAe71N,IAAYR,EAAIi9E,QAAQn5E,IAQnPmnP,EAAiB,KACjBj7D,EAAOr2L,GAAKmK,EAAK8S,YAAaiV,GAC1ByjH,IACFE,EAAkBs6G,GAEpBmB,EAAiB,OAZZA,IACHA,EAAiBjrP,EAAIo7B,MAAM0vN,GAAS,GACpChnP,EAAKmB,WAAWC,aAAa+lP,EAAgBnnP,GAC7Cq2N,EAAYpgO,KAAKkxP,IAEnBA,EAAe3lP,YAAYxB,GAxB7B,CAiCF,EACAksL,EAAOqG,EAAOxqK,EAChB,KACqB,IAAjBrrB,EAAO6I,OACT2mL,EAAOmqC,GAAa,SAAUr2N,GAC5B,IAAI+nB,EAAU,SAAU/nB,GACA,MAAlBA,EAAKrG,UACP+sP,EAAiB1mP,EAAMtD,GAEzBwvL,EAAOr2L,GAAKmK,EAAK8S,YAAaiV,EAChC,EACAA,EAAQ/nB,EACV,IAEFksL,EAAOmqC,GAAa,SAAUr2N,GAC5B,IAqBIynP,EArBgB,SAAUznP,GAC5B,IAAI8vB,EAAQ,EAMZ,OALAo8J,EAAOlsL,EAAK8S,YAAY,SAAU9S,IApyMlB,SAAUA,GAChC,OAAOsN,EAActN,IAAS4xL,GAAS5xL,IAAyB,IAAhBA,EAAKzJ,MACvD,EAmyMemxP,CAAkB1nP,IAAUixN,GAAiBjxN,IAChD8vB,GAEJ,IACOA,CACT,CAaiB63N,CAAc3nP,KAC1Bq2N,EAAY9/N,OAAS,IAAM2F,EAAIi9E,QAAQn5E,IAAyB,IAAfynP,GAIlDl1B,GAAe71N,IAAWusI,GAAcvsI,IAAWA,EAAOqmB,WACvDrmB,EAAO0hD,OAAwB,IAAfqpM,IACnBznP,EAnBc,SAAUA,GAC1B,IAAI4nP,EAAenzO,EAAOzU,EAAK8S,WAAY0zO,IAAerxP,QAAO,SAAUstC,GACzE,OAAO28M,GAAYljP,EAAKumC,EAAO/lC,EACjC,IACA,OAAOkrP,EAAa9yP,KAAI,SAAU2tC,GAChC,IAAInL,EAAQp7B,EAAIo7B,MAAMmL,GAAO,GAI7B,OAHAikN,EAAiBpvN,GACjBp7B,EAAIS,QAAQ26B,EAAOt3B,GAAM,GACzB9D,EAAImF,OAAOohC,GAAO,GACXnL,CACT,IAAGnjC,MAAM6L,EACX,CAQW6nP,CAAY7nP,IA9ML,SAAU7I,EAAQo8N,EAAYvB,EAAMhyN,GAC1DsmP,GAAO/yB,GAAY,SAAU72N,GACvB61N,GAAe71N,IACjB4pP,GAAOnvP,EAAO+E,IAAIC,OAAOO,EAAO4oF,OAAQtlF,IAAO,SAAUyiC,GAClDwgN,GAAgBxgN,IAGrB2iN,GAAejuP,EAAQuF,EAAQs1N,EAAMvvL,EAAO/lC,EAAO0hD,MAAQ3b,EAAQ,KACrE,IAhhBiB,SAAUvmC,EAAKQ,EAAQsD,GAC5C,GAAItD,EAAOorP,mBAAoB,CAC7B,IAAIzuO,EAAW3c,EAAO6I,MAAQ,WAAa,IAC3Cy9O,GAAO9mP,EAAIC,OAAOkd,EAAUrZ,IAAO,SAAUA,GACvCijP,GAAgBjjP,IAClBgjP,GAAOtmP,EAAOg/B,QAAQ,SAAUppC,EAAOO,GACrCqJ,EAAI09M,SAAS55M,EAAMnN,EAAM,GAC3B,GAEJ,GACF,CACF,CAugBIk1P,CAAiB5wP,EAAO+E,IAAKQ,EAAQsD,EACvC,GACF,CAoMQgoP,CAAkBxhH,EAAI+sF,EAAYvB,EAAMhyN,GAnMzB,SAAU7I,EAAQuF,EAAQ7J,EAAMm/N,EAAMhyN,GACvDm/O,GAAUhoP,EAAQ6I,EAAKmB,WAAYtO,EAAMm/N,IACvCozB,GAAejuP,EAAQuF,EAAQs1N,EAAMhyN,IAIvCtD,EAAOurP,oBACT9wP,EAAO+E,IAAIE,UAAU4D,EAAKmB,YAAY,SAAU0Z,GAC9C,GAAIskO,GAAUhoP,EAAQ0jB,EAAQhoB,EAAMm/N,GAElC,OADAozB,GAAejuP,EAAQuF,EAAQs1N,EAAMhyN,IAC9B,CAEX,GAEJ,CAsLQkoP,CAAiB1hH,EAAI9pI,EAAQ7J,EAAMm/N,EAAMhyN,GA5NX,SAAU9D,EAAKQ,EAAQs1N,EAAMhyN,GAC7DtD,EAAOg/B,QAAUh/B,EAAOg/B,OAAOysN,iBACjC3E,GAAqBxjP,EAAMyjP,GAASvnP,EAAK,YAAawnP,GAAWxnP,EAAK,kBAAmB61N,GAAYr1N,EAAOg/B,OAAOysN,gBAAiBn2B,IAExI,CAyNQo2B,CAAgClsP,EAAKQ,EAAQs1N,EAAMhyN,GA7OxB,SAAU9D,EAAKQ,EAAQs1N,EAAMhyN,GAC9D,IAAIqoP,EAAiC,SAAUt0P,GAC7C,GAAmB,IAAfA,EAAEoJ,UAAkBpJ,EAAEoN,YAAwC,IAA1BpN,EAAEoN,WAAWhE,SAAgB,CACnE,IAAI+oP,EAAiB9zB,GAAkBl2N,EAAKnI,EAAEoN,YAC1CjF,EAAI6nF,SAAShwF,EAAG,UAAYmyP,EAC9BhqP,EAAI09M,SAAS7lN,EAAG,kBAAmBmyP,GAC1BhqP,EAAI6nF,SAAShwF,EAAG,qBAAuBmyP,GAChDhqP,EAAI09M,SAAS7lN,EAAG,kBAAmB,KAEvC,CACF,EACI2I,EAAOg/B,SAAWh/B,EAAOg/B,OAAOqiD,OAASrhF,EAAOg/B,OAAOwqN,kBACzDj0P,GAAMw9L,KAAKzvL,EAAMqoP,EAAgC,cACjDA,EAA+BroP,GAEnC,CA+NQsoP,CAA6BpsP,EAAKQ,EAAQs1N,EAAMhyN,GAzNtC,SAAU9D,EAAKQ,EAAQs1N,EAAMhyN,IACzCuyN,GAAe71N,IAA8B,QAAlBA,EAAO4oF,QAAsC,QAAlB5oF,EAAO4oF,SAC/Dk+J,GAAqBxjP,EAAMyjP,GAASvnP,EAAK,YAAawnP,GAAWxnP,EAAK,WAAY,KAClFA,EAAImF,OAAOnF,EAAIC,OAAyB,QAAlBO,EAAO4oF,OAAmB,MAAQ,MAAOtlF,IAAO,GAE1E,CAqNQuoP,CAAYrsP,EAAKQ,EAAQs1N,EAAMhyN,GAC/BsjP,GAAcpnP,EAAKQ,EAAQs1N,EAAMhyN,IAZjC9D,EAAImF,OAAOrB,GAAM,EAcrB,GACF,EACA,GAAoD,UAAhD9D,EAAIk9E,mBAAmBr9E,EAAUC,WAArC,CAYA,GAAIU,EAAQ,CACV,GAAIsD,EACF,GAAIsxN,GAAOtxN,IACT,IAAK6mP,EAAetzB,EAAYvzN,GAAO,CACrC,IAAIhG,EAAMkC,EAAI2+E,YACd7gF,EAAI0G,eAAeV,GACnBhG,EAAI2G,YAAYX,GAChBinP,EAAc/qP,EAAK63N,GAAUvtF,EAAIxsI,EAAKu5N,IAAa,EACrD,OAEA0zB,EAAc/qP,EAAK8D,GAAM,QAG3B,GAAK06I,GAAgB63E,GAAe71N,KAAWu4N,GAAmBzuF,GAAIjwI,QAp7BrD,SAAUY,EAAQtE,EAAMm/N,GAC7C,IAAIn5B,EAAgB0xB,EAChBxuN,EAAY5E,EAAO4E,UACnBq8N,EAAer8N,EAAUmB,SACzBke,EAASg9M,EAAaz4K,YAEtBxnD,EADYigO,EAAa93N,eACR+/C,WACrBw4I,EAAiBy2B,GAAwBn4N,EAAOoJ,UAAWxE,EAAUqM,eAEnEmiN,EAAW61B,GAAkBvnD,IAE/B,IAnJyBr+K,EAAexa,EAmJpCwoP,EAAgB,gCACpB,GAAIrwP,GAAQijB,EAAS,GAAKA,EAASjjB,EAAK5B,QAAUiyP,EAAc5tP,KAAKzC,EAAKqiF,OAAOp/D,KAAYotO,EAAc5tP,KAAKzC,EAAKqiF,OAAOp/D,EAAS,IAAK,CACxI,IAAIlb,EAAWnE,EAAUoE,cACzBi4N,EAAavsN,UAAS,GACtB,IAAI7R,EAAM+5N,GAAU58N,EAAQihO,EAAcjhO,EAAOqyI,UAAUprH,IAAIvrB,IAC/DmH,EAAMmB,GAAMnB,GACZ7C,EAAOqyI,UAAUhzI,MAAM3D,EAAMm/N,EAAMh4N,GACnC+B,EAAU8E,eAAeX,EAC3B,MACO24L,GAAkB0xB,EAASlqK,YAAc2/L,KA5JvBxlO,EA6JOrjB,EAAOqiF,SA7JCx5E,EA6JSqgP,IAAqB,GAAMnkP,IACxEquN,GADA1xB,EA5JGr+K,EAAciuO,WAAWzoP,GAAM,IA6JR1F,WAC1B89N,EAAa1+I,WAAWm/G,GACxBz9K,EAAS,GAGTjkB,EAAOqyI,UAAUhzI,MAAM3D,EAAMm/N,EAAMn5B,GAErC98L,EAAU89E,kBAAkB0wI,EAAUnvM,EAE1C,CAq6BQstO,CAAiBliH,EAAI3zI,EAAMm/N,OAhBiD,CAC5E,IAAI22B,EAAa5sP,EAAUC,UACvB4sP,EAAcr1B,EAAW,GACxB/sF,EAAG5mI,SAASipP,oBAAqBD,EAAYE,cAAiB5sP,EAAIE,UAAUusP,EAAYzsP,EAAIi9E,UAC/FstK,GAAcjgH,EAAIoiH,EAAYE,cAEhC/sP,EAAU6E,OAAO+4E,GAAU59E,EAAUmB,WACrCo4E,GAASv5E,GAAW,GAAM,WACxB45N,GAAYnvF,GAAI,SAAU4xF,EAAc2wB,GACtC,IAAI9H,EAAc8H,EAAO3wB,EAAerE,GAAUvtF,EAAI4xF,EAAc7E,GACpE0zB,EAAc/qP,EAAK+kP,GAAa,EAClC,GACF,IACA1vB,GAAUr1N,EAAKH,EAAWA,EAAUmB,UACpCspI,EAAGkwB,aACL,EA10Bc,SAAU7jK,EAAMsE,GAClCsrP,GAAOD,GAAiB3vP,IAAO,SAAUqiN,GACvCA,EAAK/9M,EACP,GACF,CA00BI6xP,CAAcn2P,EAAM2zI,EACtB,CACAsyF,GAAgBtyF,EAAI3zI,EAAMmN,EAAMgyN,EAnChC,KAXA,CACEhyN,EAAOjE,EAAUC,UACjB,IAAK,IAAI3F,EAAI,EAAG0Y,EAAIwkN,EAAWh9N,OAAQF,EAAI0Y,EAAG1Y,IAAK,CACjD,IAAI4yP,EAAa11B,EAAWl9N,GAC5B,GAAI4yP,EAAW5C,iBAAmBn9G,GAAiB+/G,IAAe/sP,EAAIvF,GAAGqJ,EAAMipP,EAAW5vO,UAAW,CACnGqtO,EAAiB1mP,EAAMipP,GACvB,KACF,CACF,CACAnwB,GAAgBtyF,EAAI3zI,EAAMmN,EAAMgyN,EAElC,CAoCF,EAEIk3B,GAAU,SAAU52P,GACtB,OAAO+e,GAAM/e,EAAO,OACtB,EAiBI62P,GAAkB,SAAUhyP,GAC9B,OAAOA,EAAO4E,UAAUqM,UAC1B,EACIghP,GAAe,SAAUjyP,EAAQ8S,EAASvN,EAAQwiP,EAASltB,GAgB7D,OAAO5lC,EAAYniL,GAfE,SAAUjK,GAC7B,IAAIqpP,EAAiBlyP,EAAOqyI,UAAU21G,UAAUn/O,EAAMtD,EAAQs1N,QAAmCA,EAAO,CAAC,EAAGktB,GAC5G,OAAQ9xO,EAAYi8O,EACtB,IACsB,SAAUrpP,GAC9B,QAAI++O,GAAiC5nP,EAAQ6I,EAAMtD,KAG5CwiP,GACI5xO,EAAcnW,EAAOqyI,UAAU21G,UAAUn/O,EAAMtD,EAAQs1N,GAAM,GAK1E,GAEF,EACI9wN,GAAa,SAAU/J,EAAQuC,GACjC,IAAIuR,EAAUvR,QAAiCA,EAAMyvP,GAAgBhyP,GACrE,OAAOg1L,EAASmmC,GAAan7N,EAAO+E,IAAK+O,IAAU,SAAUjL,GAC3D,OAAOkxL,GAAYlxL,KAAUwxL,GAAUxxL,EACzC,GACF,EACIspP,GAA+B,SAAUnyP,EAAQuC,EAAK6vP,GACxD,IAAIt/O,EAAU/I,GAAW/J,EAAQuC,GACjC6yL,GAAOg9D,GAAqB,SAAUhsP,EAAMb,GAC1C,IAAI8sP,EAAe,SAAUxhP,GAC3B,IAAI+R,EAAQqvO,GAAajyP,EAAQ8S,EAASvN,EAAQsL,EAAKk3O,QAASgK,GAAQlhP,GAAQA,EAAKgqN,UAAOr9N,GACxF8+C,EAAQ15B,EAAM9lB,SAClB,GAAI+T,EAAKpB,MAAMwX,QAAUq1B,EAAO,CAC9BzrC,EAAKpB,MAAM6X,IAAIg1B,GACf,IAAIg2M,EAAS1vO,EAAM5lB,MAAMuF,GACrBwvP,GAAQlhP,GACVA,EAAKtD,SAAS+uC,EAAO,CACnBzzC,KAAMypP,EACN/sP,OAAQA,EACRuN,QAASA,IAGXiiL,EAAOlkL,EAAKw7F,WAAW,SAAU9+F,GAC/B,OAAOA,EAAS+uC,EAAO,CACrBzzC,KAAMypP,EACN/sP,OAAQA,EACRuN,QAASA,GAEb,GAEJ,CACF,EACAiiL,EAAO,CACL3uL,EAAKmsP,YACLnsP,EAAKosP,gBACJH,GACHt9D,EAAO3uL,EAAKqsP,SAAUJ,EACxB,GACF,EAsFIK,GAAe,SAAUtvP,EAAUmY,GACrC,IACIukB,GADMvkB,GAASjK,UACAyuB,yBAInB,OAHAg1J,EAAO3xL,GAAU,SAAU0Q,GACzBgsB,EAASz1B,YAAYyJ,EAAQ/O,IAC/B,IACOsW,GAAqBykB,EAC9B,EAEI6yN,GAAa,SAAU7+O,EAASoY,EAAO0gD,GACzC,MAAO,CACL94D,QAASA,EACToY,MAAOA,EACP0gD,KAAMA,EAEV,EACIgmL,GAAW,SAAU9+O,EAAS6oF,GAChC,MAAO,CACL7oF,QAASA,EACT6oF,MAAOA,EAEX,EACIk2J,GAAe,SAAUx3P,EAAG+sB,GAC9B,MAAO,CACL/sB,EAAGA,EACH+sB,EAAGA,EAEP,EACI0qO,GAAU,SAAUn9E,EAAIxzK,GAC1B,IAAIhH,EAAQ4lB,SAASwmB,GAAMouI,EAAIxzK,GAAM,IACrC,OAAOklB,MAAMlsB,GAAS,EAAIA,CAC5B,EAeI43P,GAAa,SAAUvjH,EAAOn0I,EAAG+sB,GACnC,IAAIwkD,EAAO4iE,EAAM5iE,KAEjB,SADYA,EAAKxkD,GAAKwkD,EAAKxkD,GAAGu0E,MAAQ,IACvBthG,EACjB,EAOIwhK,GAAW,SAAUjwF,GACvB,OAAOj0D,EAAMi0D,GAAM,SAAUhmE,EAAKkhE,GAChC,OAAOA,EAAI60B,MAAMv9F,OAASwH,EAAMkhE,EAAI60B,MAAMv9F,OAASwH,CACrD,GAAG,EACL,EACIosP,GAAiB,SAAUxjH,EAAO17H,GAEpC,IADA,IAAI84D,EAAO4iE,EAAM5iE,KACRxkD,EAAI,EAAGA,EAAIwkD,EAAKxtE,OAAQgpB,IAE/B,IADA,IAAIu0E,EAAQ/vB,EAAKxkD,GAAGu0E,MACXthG,EAAI,EAAGA,EAAIshG,EAAMv9F,OAAQ/D,IAChC,GAAImnB,GAAGm6E,EAAMthG,GAAIyY,GACf,OAAOrV,EAASN,KAAK00P,GAAax3P,EAAG+sB,IAI3C,OAAO3pB,EAAShC,MAClB,EACIw2P,GAAc,SAAUzjH,EAAO0jH,EAAIC,EAAI3nJ,EAAI4nJ,GAG7C,IAFA,IAAIC,EAAU,GACVzmL,EAAO4iE,EAAM5iE,KACRxkD,EAAI+qO,EAAI/qO,GAAKgrO,EAAIhrO,IAAK,CAC7B,IAAIu0E,EAAQ/vB,EAAKxkD,GAAGu0E,MAChB9kF,EAAQq7O,EAAK1nJ,EAAK7O,EAAM9kF,MAAMq7O,EAAI1nJ,EAAK,GAAK7O,EAAM9kF,MAAM2zF,EAAI0nJ,EAAK,GACrEG,EAAQv0P,KAAK8zP,GAAShmL,EAAKxkD,GAAGtU,QAAS+D,GACzC,CACA,OAAOw7O,CACT,EAoCIC,GAAQ,SAAU9jH,GACpB,OA9BmB,SAAUA,EAAO5iE,GACpC,IAAI2mL,EAAehzN,GAAQivG,EAAM17H,SAC7B0/O,EAAYn4O,GAAqB,SAGrC,OAFAy0D,GAAO0jL,EAAW5mL,GAClBrhD,GAASgoO,EAAcC,GAChBD,CACT,CAwBSE,CAAejkH,EAvBC,SAAUA,GACjC,OAAOslD,EAAMtlD,EAAM5iE,MAAM,SAAU9E,GACjC,IAAI60B,EAAQm4F,EAAMhtH,EAAI60B,OAAO,SAAUzxB,GACrC,IAAIyqG,EAAKwzC,GAAOj+I,GAGhB,OAFAtkD,GAAS+uJ,EAAI,WACb/uJ,GAAS+uJ,EAAI,WACNA,CACT,IACIo2B,EAAKxrK,GAAQunC,EAAIh0D,SAErB,OADAg8D,GAAOi8H,EAAIpvG,GACJovG,CACT,GACF,CAW+B2nD,CAAmBlkH,GAClD,EAcImkH,GAA+B,SAAU7gP,EAASjQ,GACpD,OAAOya,EAAOxK,GAAS,SAAUvQ,GAC/B,MAAqB,OAAd7G,GAAK6G,IAAiB47N,GAAuB57N,EAAKM,EAC3D,IAAGlG,KAAKP,EAAS,KAAK,SAAUw3P,GAC9B,OAT0B,SAAU9gP,GACtC,OAAOwK,EAAOxK,GAAS,SAAUvQ,GAC/B,MAAqB,OAAd7G,GAAK6G,IAA+B,OAAd7G,GAAK6G,EACpC,GACF,CAKWsxP,CAAwB/gP,GAASnV,KAAI,SAAUm2P,GACpD,IAAIC,EAAU14O,GAAqB3f,GAAKo4P,IACpCE,EAAa1+D,GAAS7uK,GAAUqtO,IAAW,SAAUG,EAAQv4P,GAC/D,OAAOk5F,GAAWl5F,EAAM,aAC1B,IAEA,OAx0dO,SAAUoY,EAASoS,GAC9B,IAAInhB,EAAM+O,EAAQ/O,IAClBqwL,GAAOlvK,GAAK,SAAU9d,EAAGF,IAXT,SAAUnD,EAAK6gB,EAAUzqB,GACzC,IAAKs5L,EAAWt5L,GAEd,MADAygB,QAAQ9N,MAAM,qCAAsC8X,EAAU,YAAazqB,EAAO,cAAe4J,GAC3F,IAAI1H,MAAM,+BAAiClC,GAE/CspB,GAAY1f,IACdA,EAAImW,MAAM2K,YAAYD,EAAUzqB,EAEpC,CAIIwqB,CAAY5gB,EAAKmD,EAAGE,EACtB,GACF,CAk0dM6d,CAAO8tO,EAASC,GACT,CACL34O,GAAqB,MACrB04O,EAEJ,IAAG/2P,MAAM,GACX,GACF,EA8BIk3P,GAAgB,WAClB,OAAOxB,GAAa,GACtB,EACIyB,GAAuB,SAAUpyK,EAAUl/E,GAC7C,OAjCmBuxP,EAiCP/4O,GAAqBxY,EAAII,iBAjCRwyI,EAmBT,SAAU1zD,EAAUl/E,GACxC,IAAIwxP,EAAwBh5O,GAAqBxY,EAAI4/O,yBACjD3vO,EAAU2kO,GAAe4c,EAAuBtyK,GAChDuyK,EAAet/D,EAASliL,GAAS,SAAUvQ,GAC7C,OAAO09L,GAAW19L,IAAQw9L,GAAUx9L,EACtC,IACIgyP,EAAeZ,GAA6B7gP,EAASjQ,GACrD2xP,EAAcF,EAAajwP,OAAOkwP,EAAan1P,OAASm1P,EAnBrC,SAAUF,GACjC,OAAIh0D,GAAWg0D,GACN3wO,GAAO2wO,GAAuBr2P,OAAOoiM,IAAQzjM,KAAKP,EAAS,KAAK,SAAU23P,GAC/E,MAAO,CACLM,EACAN,EAEJ,IAEO3zD,GAAOi0D,GAAyB,CAACA,GAAyB,EAErE,CAQ6EI,CAAmBJ,IAC9F,OAAOv/D,EAAM0/D,EAAaj0N,GAC5B,CAKyDm0N,CAAgB3yK,EAAUl/E,GAhC7E6nB,EAAU/R,EAAM88H,GAAM,SAAU7uI,EAAKrE,GAEvC,OADAgpB,GAAShpB,EAAKqE,GACPrE,CACT,GAAG6xP,GACI3+G,EAAKr2I,OAAS,EAAIszP,GAAa,CAAChoO,IAAYA,EAL1C,IAAU0pO,EAAU3+G,EACzB/qH,CAiCN,EAIIiqO,GAAmB,SAAU5yK,EAAU6yK,GACzC,OAJ6B91G,EAIP/8D,EAJgB7W,EAIN0pL,EAAmB,GAH5C56N,GAAWkxC,EAAM,QAASr0D,EAAM2L,GAAIs8H,KAGYjhJ,MAAK,SAAUg3P,GACpE,IAtEuBrlH,EAAOo5F,EAAcC,EAsExCisB,EAAYF,EAAmB,GAC/BG,EAAWH,EAAmBA,EAAmBx1P,OAAS,GAC1D41P,EApFM,SAAUH,GACtB,IAAIrlH,EAAQmjH,GAAWpyN,GAAQs0N,GAAW,EAAG,IAM7C,OALA9/D,EAAOxrI,GAAYsrM,EAAU,OAAO,SAAU9oD,EAAI3jL,GAChD2sK,EAAOxrI,GAAYwiJ,EAAI,UAAU,SAAUp2B,EAAIt6K,IAjFrC,SAAUm0I,EAAOn0I,EAAG+sB,EAAG2jL,EAAIp2B,GAIvC,IAHA,IAAIs/E,EAAUnC,GAAQn9E,EAAI,WACtBu/E,EAAUpC,GAAQn9E,EAAI,WACtB/oG,EAAO4iE,EAAM5iE,KACRuoL,EAAK/sO,EAAG+sO,EAAK/sO,EAAI6sO,EAASE,IAAM,CAClCvoL,EAAKuoL,KACRvoL,EAAKuoL,GAAMvC,GAASzpC,GAAOpd,GAAK,KAElC,IAAK,IAAIqpD,EAAK/5P,EAAG+5P,EAAK/5P,EAAI65P,EAASE,IACrBxoL,EAAKuoL,GAAIx4J,MACfy4J,GAAMD,IAAO/sO,GAAKgtO,IAAO/5P,EAAIs6K,EAAKp1I,GAAQo1I,EAEpD,CACF,CAqEM0/E,CAAQ7lH,EA/DG,SAAUA,EAAOn0I,EAAG+sB,GACnC,KAAO2qO,GAAWvjH,EAAOn0I,EAAG+sB,IAC1B/sB,IAEF,OAAOA,CACT,CA0DqBi6P,CAAW9lH,EAAOn0I,EAAG+sB,GAAIA,EAAG2jL,EAAIp2B,EACjD,GACF,IACOg9E,GAAWnjH,EAAM17H,QAAS+oJ,GAASrtB,EAAM5iE,MAAO4iE,EAAM5iE,KAC/D,CA4EyBxxD,CAAQy5O,GAC7B,OAzEuBrlH,EAyELwlH,EAzEYpsB,EAyEIksB,EAzEUjsB,EAyECksB,EAxExC/B,GAAexjH,EAAOo5F,GAAc/qO,MAAK,SAAU84N,GACxD,OAAOq8B,GAAexjH,EAAOq5F,GAAYlrO,KAAI,SAAU27N,GACrD,OAzCS,SAAU9pF,EAAOmnF,EAAU2C,GACxC,IAAI45B,EAAKv8B,EAASt7N,EAAG83P,EAAKx8B,EAASvuM,EAC/BojF,EAAK8tH,EAAOj+N,EAAG+3P,EAAK95B,EAAOlxM,EAC3BirO,EAAUF,EAAKC,EAAKH,GAAYzjH,EAAO0jH,EAAIC,EAAI3nJ,EAAI4nJ,GAAMH,GAAYzjH,EAAO0jH,EAAIE,EAAI5nJ,EAAI2nJ,GAC5F,OAAOR,GAAWnjH,EAAM17H,QAAS+oJ,GAASw2F,GAAUA,EACtD,CAoCakC,CAAS/lH,EAAOmnF,EAAU2C,EACnC,GACF,KAoEyD37N,KAAI,SAAU63P,GACnE,OAAO9C,GAAa,CAACY,GAAMkC,IAC7B,GACF,IAAGv4P,WAAWi3P,IAXK,IAAUp1G,EAAS5zE,CAYxC,EAYIuqL,GAA0B,SAAUz0P,EAAM8iB,GAC5C,OAAOA,GAAS,GAAKA,EAAQ9iB,EAAK5B,QAAU66N,GAAaj5N,EAAKqiF,OAAOv/D,GACvE,EACI4xO,GAAe,SAAUC,EAAKC,GAChC,IAAI50P,EAAO4/L,GAAO+0D,EAAIvwP,WACtB,OAAOwwP,EARwB,SAAU50P,GACzC,OAAOA,EAAKwE,QAAQ,kBAAmB,GACzC,CAMsBqwP,CAA2B70P,GAAQA,CACzD,EAoDI80P,GAA6B,SAAU91P,EAAQuF,EAAQkR,QAC5C,IAATA,IACFA,EAAO,CAAC,GAEV,IAAIgwO,EAXY,SAAUhwO,EAAMlR,GAChC,OAAO9D,GAASA,GAAS,CAAC,EAAGgV,GAAO,CAClClR,OAAQA,EACR0hB,KAAK,EACLriB,WAAW,GAEf,CAKsBmxP,CAAYt/O,EAAMlR,GAClCohP,EAAc3mP,EAAOyV,KAAK,mBAAoBgxO,GAClD,GAAIE,EAAY5tE,qBAEd,OADA/4K,EAAOyV,KAAK,aAAckxO,GACnBA,EAAY/mN,QAErB,GAA2B,SAAvB+mN,EAAYphP,OACd,OAzDiB,SAAUvF,GAC7B,OAAOvB,EAASC,KAAKsB,EAAO4E,UAAUmB,UAAUpI,KAAI,SAAUkF,GAC5D,IAAImzP,EAAiBv3P,EAASC,KAAKsB,EAAO+E,IAAIE,UAAUpC,EAAI4/O,wBAAyBziP,EAAO+E,IAAIi9E,UAC5F3xE,EAAOrQ,EAAOoJ,UACd6sP,EATiB,SAAUD,GACjC,OAAOA,EAAer4P,KAAI,SAAUyhI,GAClC,OAAOA,EAAM58H,QACf,IAAGxF,MAAM,OAAOyF,aAClB,CAK0ByzP,CAAmBF,GACrCG,EAAmBz/D,GAAIh2K,QAAQ5B,QAA8B,QAApBm3O,EACzCN,EAAM31P,EAAO+E,IAAIvK,IAAI6V,EAAM4lP,EAAiB,CAC9C,iBAAkB,MAClB,MAAS,iCACRpzP,EAAII,iBACHjC,EAAO00P,GAAaC,EAAKQ,GACzBC,EAAkBx1D,GAAO+0D,EAAItwP,aAEjC,GADArF,EAAO+E,IAAImF,OAAOyrP,GACdF,GAAwBW,EAAiB,IAAMX,GAAwBW,EAAiBA,EAAgBh3P,OAAS,GAAI,CACvH,IAAI48O,EAAcga,EAAeh5P,MAAMqT,GACnCgmP,EAAkBX,GAAa1Z,EAAama,GAC5CG,EAAYD,EAAgBz3P,QAAQoC,GACxC,OAAmB,IAAfs1P,EACKt1P,GAEkBy0P,GAAwBY,EAAiBC,EAAY,GAEjD,IAAM,IAAMt1P,GADlBy0P,GAAwBY,EAAiBC,EAAYt1P,EAAK5B,QACb,IAAM,GAE9E,CACE,OAAO4B,CAEX,IAAGhE,MAAM,GACX,CA6BWu5P,CAAev2P,GAEtB2mP,EAAY6P,UAAW,EACvB,IAAI52N,EA/BmB,SAAU5/B,EAAQyW,GAC3C,IAAI5T,EAAM7C,EAAO4E,UAAUmB,SAAU0wP,EAASz2P,EAAO+E,IAAIqF,OAAO,QAC5D6gD,EAAMjrD,EAAO4E,UAAUm5N,SACvBp1K,EAASyjL,GAAcpsO,EAAQ4oD,GAAUqC,IACzCnrB,EAAWrpB,EAAKolI,WArDT,SAAU95D,EAAUp5B,GAC/B,IAAIg1K,EAAgBD,GAA4B/0K,EAAQo5B,GACxD,OAAO47I,EAAcv+N,OAAS,EAAIu1P,GAAiB5yK,EAAU47I,GALpC,SAAU57I,EAAUp5B,GAC7C,OAAOA,EAAOvpD,OAAS,GAAKupD,EAAO,GAAG5lD,UAAYmxP,KAAkBC,GAAqBpyK,EAAUp5B,EAAO,GAC5G,CAGgF+tM,CAAqB30K,EAAUp5B,EAC/G,CAkDmCguM,CAAOt7O,GAAqBrb,EAAOoJ,WAAYu/C,GAAQ5jD,IAAMlC,EAAII,gBAIlG,OAHI68B,GACF22N,EAAOpsP,YAAYy1B,GAEd9/B,EAAO4E,UAAUi7N,WAAW5wB,UAAUwnD,EAAQhgP,EACvD,CAsBkBmgP,CAAqB52P,EAAQ2mP,GAC3C,MAA2B,SAAvBA,EAAYphP,OACPq6B,GAEP+mN,EAAY/mN,QAAU5/B,EAAO4E,UAAU2+I,cAAgB,GAAK3jH,EAC5D5/B,EAAOyV,KAAK,aAAckxO,GACnBA,EAAY/mN,QAGzB,EAuHIi3N,GAAe,SAAUt0P,GAC3B,OAAIw3L,GAAYx3L,GACPA,EAAIghN,UACF9oB,GAASl4L,GACX6iM,GAASJ,UAAUziM,EAAI6D,MAAM,GAC3Bs0L,GAAUn4L,GACZ,UAASA,EAAI6D,KAAO,SAEtB,EACT,EA8CIkoC,GAAQ,SAAUwoN,EAAWv0P,GAC/B,IA5KmB3C,EAAMusB,EACrB/b,EACA2mP,EACAC,EAQAC,EAwCAC,EAOAC,EAqDAvvD,EA6DAwvD,EAAmBtiE,EAAMp2L,GAAK6D,EAAIoZ,YAAak7O,IAEnD,OArBc,SAAU7gD,EAAMzzM,GAC9B,IAAIuhB,EAAQ,EACZixK,EAAOihB,GAAM,SAAU53K,GA5Jd,IA6JHA,EAAO,GACTta,IA9JiB,IA+JRsa,EAAO,IApBP,SAAU77B,EAAK+Y,EAAMwI,GAClC,IAAIgc,EAbe,SAAUxkB,GAC7B,IAAIzS,EACAq3B,EAAY5uB,SAASC,cAAc,OACnCkrM,EAAOnrM,SAASyuB,yBAIpB,IAHIzkB,IACF4kB,EAAUzkB,UAAYH,GAEjBzS,EAAOq3B,EAAU/8B,YACtBs5M,EAAKpyM,YAAYxB,GAEnB,OAAO4zM,CACT,CAEiB+F,CAAelnM,GAC9B,GAAI/Y,EAAImZ,iBAAmBoI,EAAQvhB,EAAIoZ,WAAWvc,OAAQ,CACxD,IAAIoH,EAASjE,EAAIoZ,WAAWmI,GAC5Btd,EAAOwD,WAAWC,aAAa61B,EAAUt5B,EAC3C,MACEjE,EAAI8H,YAAYy1B,EAEpB,CAaMu3N,CAAS90P,EAAK67B,EAAO,GAAIta,GACzBA,KAjK6B,IAkKpBsa,EAAO,IAdP,SAAU77B,EAAKuhB,GAC5B,GAAIvhB,EAAImZ,iBAAmBoI,EAAQvhB,EAAIoZ,WAAWvc,OAAQ,CACxD,IAAIoH,EAASjE,EAAIoZ,WAAWmI,GAC5Btd,EAAOwD,WAAW6H,YAAYrL,EAChC,CACF,CAUM8wP,CAAS/0P,EAAKuhB,EAElB,GACF,CAQEyzO,EA7KyBprO,EA6KQ2qO,EA5K7B1mP,GADexQ,EA6KJw3P,GA5KCh4P,OAAS+sB,EAAM/sB,OAAS,EACpC23P,EAAQ,IAAIz7P,MAAM8U,GAClB4mP,EAAM,IAAI17P,MAAM8U,GAQhB6mP,EAAc,SAAUO,EAAQC,EAAMC,EAAQC,EAAM/vD,GACtD,IAAIpsJ,EAAS27M,EAAeK,EAAQC,EAAMC,EAAQC,GAClD,GAAe,OAAXn8M,GAAmBA,EAAO7gC,QAAU88O,GAAQj8M,EAAOo8M,OAASH,EAAOE,GAAQn8M,EAAOspE,MAAQ0yI,GAAUh8M,EAAOo8M,OAASJ,EAASE,EAG/H,IAFA,IAAIx4P,EAAIs4P,EACJnnO,EAAIqnO,EACDx4P,EAAIu4P,GAAQpnO,EAAIsnO,GACjBz4P,EAAIu4P,GAAQpnO,EAAIsnO,GAAQ/3P,EAAKV,KAAOitB,EAAMkE,IAC5Cu3K,EAAO9oM,KAAK,CAnBX,EAqBCc,EAAKV,OAELA,IACAmxB,GAEEonO,EAAOD,EAASG,EAAOD,GACzB9vD,EAAO9oM,KAAK,CA3BW,EA6BrBc,EAAKV,OAELA,IAEF0oM,EAAO9oM,KAAK,CAjCD,EAmCTqtB,EAAMkE,OAENA,OAIH,CACL4mO,EAAYO,EAAQh8M,EAAO7gC,MAAO+8O,EAAQl8M,EAAO7gC,MAAQ6gC,EAAOo8M,KAAMhwD,GACtE,IAAK,IAAIiwD,EAAKr8M,EAAO7gC,MAAOk9O,EAAKr8M,EAAOspE,MAAO+yI,EAC7CjwD,EAAO9oM,KAAK,CA5CT,EA8CDc,EAAKi4P,KAGTZ,EAAYz7M,EAAOspE,IAAK2yI,EAAMj8M,EAAOspE,IAAMtpE,EAAOo8M,KAAMD,EAAM/vD,EAChE,CACF,EACIsvD,EAAa,SAAUv8O,EAAOi9O,EAAMH,EAAME,GAE5C,IADA,IAAI7yI,EAAMnqG,EACHmqG,EAAM8yI,EAAOD,GAAQ7yI,EAAM2yI,GAAQ73P,EAAKklH,KAAS34F,EAAM24F,EAAM8yI,MAChE9yI,EAEJ,OApDU,SAAUnqG,EAAOmqG,EAAK8yI,GAChC,MAAO,CACLj9O,MAAOA,EACPmqG,IAAKA,EACL8yI,KAAMA,EAEV,CA8CSE,CAAMn9O,EAAOmqG,EAAK8yI,EAC3B,EACIT,EAAiB,SAAUK,EAAQC,EAAMC,EAAQC,GACnD,IAAIrhK,EAAImhK,EAAOD,EACX56P,EAAI+6P,EAAOD,EACf,GAAU,IAANphK,GAAiB,IAAN15F,EACb,OAAO,KAET,IAKI8wB,EAAGxlB,EAAGhJ,EAAG7D,EAAG+sB,EALZopB,EAAQ8kD,EAAI15F,EACZkoD,EAAMloD,EAAI05F,EACVryE,GAAU6gC,EAAM,GAAM,EAAIA,EAAMA,EAAM,GAAK,EAI/C,IAHAiyM,EAAM,EAAI9yO,GAAUuzO,EACpBR,EAAI,EAAI/yO,GAAUwzO,EAAO,EAEpB/pO,EAAI,EAAGA,GAAKzJ,IAAUyJ,EAAG,CAC5B,IAAKxlB,GAAKwlB,EAAGxlB,GAAKwlB,EAAGxlB,GAAK,EAAG,CAS3B,IARAhJ,EAAIgJ,EAAI+b,EACJ/b,KAAOwlB,GAAKxlB,IAAMwlB,GAAKqpO,EAAM73P,EAAI,GAAK63P,EAAM73P,EAAI,GAClD63P,EAAM73P,GAAK63P,EAAM73P,EAAI,GAErB63P,EAAM73P,GAAK63P,EAAM73P,EAAI,GAAK,EAG5BkpB,GADA/sB,EAAI07P,EAAM73P,IACFs4P,EAASE,EAASxvP,EACnB7M,EAAIo8P,GAAQrvO,EAAIuvO,GAAQ/3P,EAAKvE,KAAO8wB,EAAM/D,IAC/C2uO,EAAM73P,KAAO7D,IACX+sB,EAEJ,GAAIopB,EAAQ,GAAM,GAAKA,EAAQ9jB,GAAKxlB,GAAKA,GAAKspC,EAAQ9jB,GAChDspO,EAAI93P,EAAIsyC,IAAUulN,EAAM73P,GAC1B,OAAOg4P,EAAWF,EAAI93P,EAAIsyC,GAAQtpC,EAAIsvP,EAASE,EAAQD,EAAME,EAGnE,CACA,IAAKzvP,EAAIspC,EAAQ9jB,EAAGxlB,GAAKspC,EAAQ9jB,EAAGxlB,GAAK,EAAG,CAS1C,IARAhJ,EAAIgJ,EAAI+b,EAASutB,EACbtpC,IAAMspC,EAAQ9jB,GAAKxlB,IAAMspC,EAAQ9jB,GAAKspO,EAAI93P,EAAI,IAAM83P,EAAI93P,EAAI,GAC9D83P,EAAI93P,GAAK83P,EAAI93P,EAAI,GAAK,EAEtB83P,EAAI93P,GAAK83P,EAAI93P,EAAI,GAGnBkpB,GADA/sB,EAAI27P,EAAI93P,GAAK,GACLs4P,EAASE,EAASxvP,EACnB7M,GAAKm8P,GAAUpvO,GAAKsvO,GAAU93P,EAAKvE,KAAO8wB,EAAM/D,IACrD4uO,EAAI93P,GAAK7D,IACT+sB,IAEF,GAAIopB,EAAQ,GAAM,IAAM9jB,GAAKxlB,GAAKA,GAAKwlB,GACjCspO,EAAI93P,IAAM63P,EAAM73P,EAAIsyC,GACtB,OAAO0lN,EAAWF,EAAI93P,GAAIgJ,EAAIsvP,EAASE,EAAQD,EAAME,EAG3D,CACF,CACF,EACI/vD,EAAS,GACbqvD,EAAY,EAAGr3P,EAAKR,OAAQ,EAAG+sB,EAAM/sB,OAAQwoM,GACtCA,GA4DsCrlM,GACtCA,CACT,EAEIw1P,GAAmBz7O,IAAO,WAC5B,OAAOhL,SAASw+N,eAAeC,mBAAmB,OACpD,IAsBIioB,GAAmB,SAAUh4P,GAC/B,IApCqBuC,EAoCjBu0P,GApCiBv0P,EAoCEvC,EAAOoJ,UAnCvB4rL,EAASF,EAAMp2L,GAAK6D,EAAIoZ,YAAak7O,KAAe,SAAUl2P,GACnE,OAAOA,EAAKvB,OAAS,CACvB,KAkCI64P,EAAmBp6P,EAAKi5P,GAAW,SAAUx7O,GAC/C,IAAI48O,EAAUrkB,GAAa7zO,EAAO6/N,WAAYvkN,GAC9C,OAAO48O,EAAQ94P,OAAS,EAAI,CAAC84P,GAAW,EAC1C,IACIt4N,EAAUq4N,EAAiBxzP,KAAK,IACpC,OA3BsC,IA2BpBm7B,EA3BNhhC,QAAQ,aAEM,SAAUk4P,GACpC,MAAO,CACL57P,KAAM,aACN47P,UAAWA,EACXl3N,QAAS,GACT72B,SAAU,KACVovP,eAAgB,KAEpB,CAiB+BC,CAAsBH,GAhB3B,SAAUr4N,GAClC,MAAO,CACL1kC,KAAM,WACN47P,UAAW,KACXl3N,QAASA,EACT72B,SAAU,KACVovP,eAAgB,KAEpB,CAQyEE,CAAoBz4N,EAC7F,EACI04N,GAAgB,SAAUt4P,EAAQqhF,EAAO16B,GAC3C,IAAI59C,EAAW49C,EAAS06B,EAAM82K,eAAiB92K,EAAMt4E,SAClC,eAAfs4E,EAAMnmF,KACRozC,GAAM+yC,EAAMy1K,UAAW92P,EAAOoJ,WAE9BpJ,EAAOyxD,WAAW4vB,EAAMzhD,QAAS,CAC/Br6B,OAAQ,MACR6hP,cAAcjxO,EAAcpN,KAAaqvN,GAAervN,KAAaA,EAASkmN,cAGlFjvN,EAAO4E,UAAU8E,eAAeX,EAClC,EACIwvP,GAAkB,SAAUl3K,GAC9B,MAAsB,eAAfA,EAAMnmF,KAAwBmmF,EAAMy1K,UAAUryP,KAAK,IAAM48E,EAAMzhD,OACxE,EACI44N,GAAuB,SAAUn3K,GACnC,IAAI9+E,EAAM8Y,GAAqB,OAAQ08O,MAGvC,OAFAzwO,GAAI/kB,EAAKg2P,GAAgBl3K,IACzB0zG,EAAOxrI,GAAYhnD,EAAK,qBAAsBopB,IACjCppB,EA/iSEwC,IAAI0W,SAgjSrB,EAOIg9O,GAAS,SAAUC,EAAQC,GAC7B,SAAKD,IAAWC,OAPI,SAAUD,EAAQC,GACtC,OAAOJ,GAAgBG,KAAYH,GAAgBI,EACrD,CAOaC,CAAgBF,EAAQC,IANR,SAAUD,EAAQC,GAC7C,OAAOH,GAAqBE,KAAYF,GAAqBG,EAC/D,CAOWE,CAAuBH,EAAQC,GAE1C,EAEIG,GAAa,SAAUC,GACzB,OAAuB,IAAhBA,EAAM9xO,KACf,EAEI+xO,GAAY,SAAUjyP,EAAakyP,EAAQF,GACzCD,GAAWC,KACbhyP,EAAYkyP,OAASA,EAEzB,EACIC,GAAY,SAAUnyP,EAAagyP,GACjChyP,EAAYkyP,SACdD,GAAUjyP,GAAa,EAAOgyP,GAC9BhyP,EAAYvM,MAEhB,EA0KI2+P,GAAmB,SAAUn5P,GAC/B,MAAO,CACL+G,YAAa,CACXqyP,aAAc,SAAUL,EAAOZ,GAC7B,OAtKa,SAAUn4P,EAAQ+4P,EAAOZ,GACxCW,GAAWC,IACbZ,EAAe7wO,IAAIooM,GAAgB1vN,EAAO4E,WAE9C,CAkKey0P,CAAer5P,EAAQ+4P,EAAOZ,EACvC,EACA39P,IAAK,SAAUuM,EAAa+c,EAAOi1O,EAAOZ,EAAgB92K,EAAO53D,GAC/D,OApKa,SAAUzpB,EAAQ+G,EAAa+c,EAAOi1O,EAAOZ,EAAgB92K,EAAO53D,GACvF,IAAI6vO,EAAetB,GAAiBh4P,GAGpC,GAFAqhF,EAAQA,GAAS,CAAC,EAClBA,EAAQvmF,GAAM88L,OAAOv2G,EAAOi4K,IACF,IAAtBR,GAAWC,IAAoB/4P,EAAO49H,QACxC,OAAO,KAET,IAAI27H,EAAYxyP,EAAYX,KAAK0d,EAAMmD,OACvC,GAAIjnB,EAAOyV,KAAK,gBAAiB,CAC7B4rE,MAAOA,EACPk4K,UAAWA,EACXppD,cAAe1mL,IACdsvJ,qBACH,OAAO,KAET,GAAIwgF,GAAad,GAAOc,EAAWl4K,GACjC,OAAO,KAELt6E,EAAYX,KAAK0d,EAAMmD,QACzBkxO,EAAelxO,MAAMrpB,MAAK,SAAU47P,GAClCzyP,EAAYX,KAAK0d,EAAMmD,OAAOkxO,eAAiBqB,CACjD,IAEF,IAAIC,EAjnQwB,SAAUz5P,GACtC,OAAOA,EAAOE,SAAS,0BAA2B,EAAG,SACvD,CA+mQ6Bw5P,CAAwB15P,GACnD,GAAIy5P,GACE1yP,EAAYX,KAAKhH,OAASq6P,EAAsB,CAClD,IAAK,IAAIv6P,EAAI,EAAGA,EAAI6H,EAAYX,KAAKhH,OAAS,EAAGF,IAC/C6H,EAAYX,KAAKlH,GAAK6H,EAAYX,KAAKlH,EAAI,GAE7C6H,EAAYX,KAAKhH,SACjB0kB,EAAMwD,IAAIvgB,EAAYX,KAAKhH,OAC7B,CAEFiiF,EAAMt4E,SAAW2mN,GAAgB1vN,EAAO4E,WACpCkf,EAAMmD,MAAQlgB,EAAYX,KAAKhH,OAAS,IAC1C2H,EAAYX,KAAKhH,OAAS0kB,EAAMmD,MAAQ,GAE1ClgB,EAAYX,KAAKtH,KAAKuiF,GACtBv9D,EAAMwD,IAAIvgB,EAAYX,KAAKhH,OAAS,GACpC,IAAIqX,EAAO,CACT4qE,MAAOA,EACPk4K,UAAWA,EACXppD,cAAe1mL,GASjB,OAPI3F,EAAMmD,MAAQ,GAChBjnB,EAAO25P,UAAS,GAChB35P,EAAOyV,KAAK,UAAWgB,GACvBzW,EAAOyV,KAAK,SAAUgB,IAEtBzW,EAAOyV,KAAK,UAAWgB,GAElB4qE,CACT,CAgHeu4K,CAAe55P,EAAQ+G,EAAa+c,EAAOi1O,EAAOZ,EAAgB92K,EAAO53D,EAClF,EACAkqG,KAAM,SAAU5sH,EAAagyP,EAAOj1O,GAClC,OAvFK,SAAU9jB,EAAQ+G,EAAagyP,EAAOj1O,GACjD,IAAIu9D,EAaJ,OAZIt6E,EAAYkyP,SACdlyP,EAAYvM,MACZuM,EAAYkyP,QAAS,EACrBD,GAAUjyP,GAAa,EAAOgyP,IAE5Bj1O,EAAMmD,MAAQ,IAChBnD,EAAMwD,IAAIxD,EAAMmD,MAAQ,GACxBo6D,EAAQt6E,EAAYX,KAAK0d,EAAMmD,OAC/BqxO,GAAct4P,EAAQqhF,GAAO,GAC7BrhF,EAAO25P,UAAS,GAChB35P,EAAOyV,KAAK,OAAQ,CAAE4rE,MAAOA,KAExBA,CACT,CAwEew4K,CAAO75P,EAAQ+G,EAAagyP,EAAOj1O,EAC5C,EACA8vG,KAAM,SAAU9vG,EAAO1d,GACrB,OArGK,SAAUpG,EAAQ8jB,EAAO1d,GACpC,IAAIi7E,EAQJ,OAPIv9D,EAAMmD,MAAQ7gB,EAAKhH,OAAS,IAC9B0kB,EAAMwD,IAAIxD,EAAMmD,MAAQ,GACxBo6D,EAAQj7E,EAAK0d,EAAMmD,OACnBqxO,GAAct4P,EAAQqhF,GAAO,GAC7BrhF,EAAO25P,UAAS,GAChB35P,EAAOyV,KAAK,OAAQ,CAAE4rE,MAAOA,KAExBA,CACT,CA2Fey4K,CAAO95P,EAAQ8jB,EAAO1d,EAC/B,EACAi2C,MAAO,SAAUt1C,EAAa+c,GAC5B,OAxHM,SAAU9jB,EAAQ+G,EAAa+c,GAC3C/c,EAAYX,KAAO,GACnB0d,EAAMwD,IAAI,GACVvgB,EAAYkyP,QAAS,EACrBj5P,EAAOyV,KAAK,aACd,CAmHeskP,CAAQ/5P,EAAQ+G,EAAa+c,EACtC,EACAuqC,MAAO,SAAUtnD,GACf,OAhFM,SAAUA,GACtBA,EAAYs1C,QACZt1C,EAAYvM,KACd,CA6Eew/P,CAAQjzP,EACjB,EACAkzP,QAAS,SAAUlzP,EAAa+c,GAC9B,OA/EQ,SAAU9jB,EAAQ+G,EAAa+c,GAC7C,OAAOA,EAAMmD,MAAQ,GAAKlgB,EAAYkyP,QAAUlyP,EAAYX,KAAK,KAAOqyP,GAAOT,GAAiBh4P,GAAS+G,EAAYX,KAAK,GAC5H,CA6Ee8zP,CAAUl6P,EAAQ+G,EAAa+c,EACxC,EACAq2O,QAAS,SAAUpzP,EAAa+c,GAC9B,OA/EQ,SAAU/c,EAAa+c,GACrC,OAAOA,EAAMmD,MAAQlgB,EAAYX,KAAKhH,OAAS,IAAM2H,EAAYkyP,MACnE,CA6EemB,CAAUrzP,EAAa+c,EAChC,EACA9c,SAAU,SAAUD,EAAagyP,EAAOxrP,GACtC,OA/ES,SAAUxG,EAAagyP,EAAOxrP,GAI7C,OAHA2rP,GAAUnyP,EAAagyP,GACvBhyP,EAAYqyP,eACZryP,EAAY0pE,OAAOljE,GACZxG,EAAYvM,KACrB,CA0Ee6/P,CAAWtzP,EAAagyP,EAAOxrP,EACxC,EACAkjE,OAAQ,SAAUsoL,EAAOxrP,GACvB,OA5EO,SAAUwrP,EAAOxrP,GAC9B,IACEwrP,EAAMzxO,IAAIyxO,EAAM9xO,MAAQ,GACxB1Z,GAGF,CAFE,QACAwrP,EAAMzxO,IAAIyxO,EAAM9xO,MAAQ,EAC1B,CACF,CAqEeqzO,CAASvB,EAAOxrP,EACzB,EACA8lB,MAAO,SAAUtsB,EAAa+c,EAAOy2O,EAAWC,GAC9C,OApIM,SAAUx6P,EAAQ+G,EAAa+c,EAAOy2O,EAAWC,GAC7D,GAAIzzP,EAAYC,SAASuzP,GAAY,CACnC,IAAIxxP,EAAWhC,EAAYX,KAAK0d,EAAMmD,OAAOle,SACzCwwP,EAAYxyP,EAAYX,KAAK0d,EAAMmD,MAAQ,GAC/CqxO,GAAct4P,EAAQu5P,GAAW,GAC7BxyP,EAAYC,SAASwzP,KACvBzzP,EAAYX,KAAK0d,EAAMmD,MAAQ,GAAGkxO,eAAiBpvP,EAEvD,CACF,CA2He0xP,CAAQz6P,EAAQ+G,EAAa+c,EAAOy2O,EAAWC,EACxD,GAEFnoH,UAAW,CACTzvH,MAAO,SAAUlnB,EAAMm/N,EAAMhyN,EAAMk/O,GACjC,OAAOO,GAAQtoP,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,EAC3C,EACA2S,SAAU,SAAU1hM,EAAO6hK,GACzB,OAtjEO,SAAU76N,EAAQg5D,EAAO6hK,GACtC,IAAI8/B,EAAqB,GACrBC,EAAa,CAAC,EACdhyB,EAAe5oO,EAAO4E,UAAUqM,WAUpC,OATAjR,EAAO+E,IAAIE,UAAU2jO,GAAc,SAAU//N,GAC3C,IAAK,IAAI3J,EAAI,EAAGA,EAAI85D,EAAM55D,OAAQF,IAAK,CACrC,IAAIopK,EAAStvG,EAAM95D,IACd07P,EAAWtyF,IAAW0/E,GAAUhoP,EAAQ6I,EAAMy/J,EAAQuyD,KACzD+/B,EAAWtyF,IAAU,EACrBqyF,EAAmB77P,KAAKwpK,GAE5B,CACF,GAAGtoK,EAAO+E,IAAIo+E,WACPw3K,CACT,CAwiEeD,CAAS16P,EAAQg5D,EAAO6hK,EACjC,EACAmtB,UAAW,SAAUn/O,EAAMnN,EAAMm/N,EAAMktB,GACrC,OAAOC,GAAUhoP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,EAC7C,EACAp0F,SAAU,SAAUj4J,GAClB,OA9hEO,SAAUsE,EAAQtE,GAC/B,IAAI0gO,EAAap8N,EAAOqyI,UAAUprH,IAAIvrB,GAClCqJ,EAAM/E,EAAO+E,IACjB,GAAIq3N,EAGF,IAFA,IAAI32D,EAAYzlK,EAAO4E,UAAUqM,WAC7B6B,EAAUqoN,GAAap2N,EAAK0gK,GACvBpqK,EAAI+gO,EAAWh9N,OAAS,EAAG/D,GAAK,EAAGA,IAAK,CAC/C,IAAIkK,EAAS62N,EAAW/gO,GACxB,IAAK02I,GAAiBxsI,IAAW4Q,EAAc5Q,EAAOosP,cACpD,OAAO,EAET,IAAK,IAAIzyP,EAAI4T,EAAQ1T,OAAS,EAAGF,GAAK,EAAGA,IACvC,GAAI6F,EAAIvF,GAAGsT,EAAQ5T,GAAIqG,EAAO2c,UAC5B,OAAO,CAGb,CAEF,OAAO,CACT,CA2gEeyxI,CAAS3zJ,EAAQtE,EAC1B,EACA0mG,QAAS,SAAUppC,GACjB,OAhjEM,SAAUh5D,EAAQg5D,GAC9B,IAAIj/B,EAAS,SAAUx3B,GACrB,OAAOigB,GAAGjgB,EAAK8Y,GAAqBrb,EAAOoJ,WAC7C,EAIA,OAAO3K,EAASC,KAAKsB,EAAO4E,UAAUqM,UAAS,IAAOpT,MAAK,SAAUg9P,GACnE,OAAOhuN,GAAUxxB,GAAqBw/O,IAAS,SAAUt4P,GACvD,OAAOjD,GAAQ05D,GAAO,SAAUt9D,GAC9B,OANM,SAAU6G,EAAK7G,GACzB,OAAOssP,GAAUhoP,EAAQuC,EAAIwC,IAAKrJ,GAAQ+C,EAASN,KAAKzC,GAAQ+C,EAAShC,MAC3E,CAIammB,CAAMrgB,EAAK7G,EACpB,GACF,GAAGq+B,EACL,IAAGz8B,WACL,CAkiEe8kG,CAAQpiG,EAAQg5D,EACzB,EACA35D,MAAO,SAAU3D,EAAMm/N,EAAMhyN,GAC3B,OAAOymP,GAActvP,EAAQtE,EAAMm/N,EAAMhyN,EAC3C,EACAqB,OAAQ,SAAUxO,EAAMm/N,EAAMhyN,EAAMk/O,GAClC,OAAOrgN,GAAS1nC,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,EAC5C,EACAl2K,OAAQ,SAAUn2E,EAAMm/N,EAAMhyN,GAC5B,OA3xBK,SAAU7I,EAAQtE,EAAMm/N,EAAMhyN,GACzC,IAAI8oI,EAAM3xI,EAAOqyI,UAAUprH,IAAIvrB,IAC3B4sP,GAAQtoP,EAAQtE,EAAMm/N,EAAMhyN,IAAY,WAAY8oI,EAAI,KAAOA,EAAI,GAAG9/D,OAGxEy9K,GAActvP,EAAQtE,EAAMm/N,EAAMhyN,GAFlC6+B,GAAS1nC,EAAQtE,EAAMm/N,EAAMhyN,EAIjC,CAoxBegpE,CAAO7xE,EAAQtE,EAAMm/N,EAAMhyN,EACpC,EACA8oJ,cAAe,SAAUmpG,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,GAC9E,OA1yBoB,SAAU76N,EAAQ86P,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,GAKnG,OAJwC,OAApCigC,EAA0B7zO,OA7IlB,SAAU6zO,EAA2B96P,GACjD86P,EAA0BxzO,IAAI,CAAC,GAC/BtnB,EAAOmS,GAAG,cAAc,SAAUY,GAChCo/O,GAA6BnyP,EAAQ+S,EAAEe,QAASgnP,EAA0B7zO,MAC5E,IACAjnB,EAAOmS,GAAG,4BAA4B,SAAUY,GAC9C,IAAIe,EAAUrV,EAASC,KAAKqU,EAAElK,MAAMlL,KAAI,SAAUo9P,GAChD,OAAO5gC,GAAO4gC,GAAeA,EAAcA,EAAY5xP,cACzD,IAAGtL,MAAK,SAAUgL,GAChB,OAAOkxL,GAAYlxL,GAAQpK,EAASN,KAAK0K,GAAQpK,EAASC,KAAKmK,EAAKy9N,cACtE,IAAGrpO,YAAW,WACZ,OAAO+0P,GAAgBhyP,EACzB,IACAmyP,GAA6BnyP,EAAQ8T,EAASgnP,EAA0B7zO,MAC1E,GACF,CA+HI+zO,CAAQF,EAA2B96P,GAlEpB,SAAUA,EAAQ86P,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,GAC1F,IAAIogC,EAAoBH,EAA0B7zO,MAClD8tK,EAAOljD,EAAQ7tI,MAAM,MAAM,SAAUuB,GACnC,IAAI6X,EAAQ0O,GAAMmvO,EAAmB11P,GAAQtI,YAAW,WACtD,IAAIs8B,EAAO,CACTg5N,YAAa,CACX9iP,MAAO2oB,IAAK,GACZ2vN,SAAS,EACT17I,UAAW,IAEbmmJ,eAAgB,CACd/iP,MAAO2oB,IAAK,GACZ2vN,SAAS,EACT17I,UAAW,IAEbomJ,SAAU,IAGZ,OADAwI,EAAkB11P,GAAUg0B,EACrBA,CACT,IACIgjC,EAAa,WACf,IAAIzpD,EAAU/I,GAAW/J,GACzB,OAAOiyP,GAAajyP,EAAQ8S,EAASvN,EAAQwiP,EAASltB,GAAM/9N,QAC9D,EACA,GAAImZ,EAAY4kN,GAAO,CACrB,IAAIqgC,EAAanT,EAAU3qO,EAAMm1O,YAAcn1O,EAAMo1O,eACrD0I,EAAW7uJ,UAAUvtG,KAAKyO,GACU,IAAhC2tP,EAAW7uJ,UAAUjtG,QACvB87P,EAAWzrP,MAAM6X,IAAIi1C,IAEzB,MACEn/C,EAAMq1O,SAAS3zP,KAAK,CAClB2Q,MAAO2oB,GAAKmkC,KACZwrL,QAASA,EACTltB,KAAMA,EACNttN,SAAUA,GAGhB,IACAutP,EAA0BxzO,IAAI2zO,EAChC,CA4BEE,CAAan7P,EAAQ86P,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,GACrE,CACLhwM,OAAQ,WACN,OA9BgB,SAAUiwO,EAA2BjpH,EAAStkI,GAClE,IAAI0tP,EAAoBH,EAA0B7zO,MAClD8tK,EAAOljD,EAAQ7tI,MAAM,MAAM,SAAUuB,GACnC,OAAOumB,GAAMmvO,EAAmB11P,GAAQ3H,MAAK,SAAUwf,GACrD69O,EAAkB11P,GAAU,CAC1BgtP,YAAa9wP,GAASA,GAAS,CAAC,EAAG2b,EAAMm1O,aAAc,CACrDlmJ,UAAW2oF,EAAS53K,EAAMm1O,YAAYlmJ,WAAW,SAAUvB,GACzD,OAAOA,IAAOv9F,CAChB,MAEFilP,eAAgB/wP,GAASA,GAAS,CAAC,EAAG2b,EAAMo1O,gBAAiB,CAC3DnmJ,UAAW2oF,EAAS53K,EAAMo1O,eAAenmJ,WAAW,SAAUvB,GAC5D,OAAOA,IAAOv9F,CAChB,MAEFklP,SAAUz9D,EAAS53K,EAAMq1O,UAAU,SAAU9xP,GAC3C,OAAOA,EAAK4M,WAAaA,CAC3B,IAEJ,GACF,IACAutP,EAA0BxzO,IAAI2zO,EAChC,CAQat0I,CAAgBm0I,EAA2BjpH,EAAStkI,EAC7D,EAEJ,CAgyBe6tP,CAAsBp7P,EAAQ86P,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,EAC9F,GAEF76N,OAAQ,CACNsF,WAAY,SAAUmR,EAAMlR,GAC1B,OA56HiB,SAAUvF,EAAQyW,EAAMlR,GAC/C,OAAO9G,EAASC,KAAKsB,EAAOoJ,WAAWzM,KAAKP,EAAyB,SAAhBqa,EAAKlR,OAAoB,IAAIinO,GAAQ,OAAQ,IAAM,KAAK,SAAUn8N,GACrH,OA7BqB,SAAUrQ,EAAQyW,EAAMlR,EAAQ8K,GACvD,IAEIuvB,EAFA6mN,EARY,SAAUhwO,EAAMlR,GAChC,OAAO9D,GAASA,GAAS,CAAC,EAAGgV,GAAO,CAClClR,OAAQA,EACR0hB,KAAK,EACLuvO,UAAU,GAEd,CAEsB6E,CAAY5kP,EAAMlR,GAClCohP,EAAclwO,EAAKmwO,UAAYH,EAAgBzmP,EAAOyV,KAAK,mBAAoBgxO,GAmBnF,OAhBE7mN,EADyB,QAAvB+mN,EAAYphP,OACJzK,GAAMyJ,KAAK6vO,GAAap0O,EAAO6/N,WAAYxvN,EAAKoL,YAC1B,SAAvBkrO,EAAYphP,OACXvF,EAAO+E,IAAIk/M,QAAQ5zM,GAAQ,GAAKuwL,GAAOvwL,EAAKjL,WAAaiL,EAAKhL,aACxC,SAAvBshP,EAAYphP,OACXvF,EAAO6/N,WAAW5wB,UAAU5+L,EAAMs2O,GArBxB,SAAU3mP,EAAQsb,GACxC,IAAIk4M,EAAYzD,GAAmB/vN,GAC/Bs7P,EAAc,IAAI/nK,OAAO,MAAQigI,EAAY,4CAAiDA,EAAY,8BAC9G,OAAOl4M,EAAK9V,QAAQ81P,EAAa,GACnC,CAmBcC,CAAkBv7P,EAAQA,EAAO6/N,WAAW5wB,UAAU5+L,EAAMs2O,IAEnE9xD,EAAW,CACZ,OACA,QACC8xD,EAAYphP,SAAYi7L,GAAoBnlL,GAAqBhL,IAGpEs2O,EAAY/mN,QAAUA,EAFtB+mN,EAAY/mN,QAAU9kC,GAAMyJ,KAAKq7B,GAI/B+mN,EAAYC,UACPD,EAAY/mN,QAEZ5/B,EAAOyV,KAAK,aAAckxO,GAAa/mN,OAElD,CAGW47N,CAAmBx7P,EAAQyW,EAAMlR,EAAQ8K,EAClD,GACF,CAw6HeorP,CAAmBz7P,EAAQyW,EAAMlR,EAC1C,EACAksD,WAAY,SAAU7xB,EAASnpB,GAC7B,OAAO+vO,GAAmBxmP,EAAQ4/B,EAASnpB,EAC7C,EACAlP,cAAe,SAAUpM,EAAOmgG,GAC9B,OAAOipJ,GAAkBvkP,EAAQ7E,EAAOmgG,EAC1C,EACA6qJ,UAAW,SAAU5jP,GACnB,OAjHgB,SAAUvC,EAAQuC,GACxC,IAAIwC,EAAM/E,EAAO+E,IACbwW,EAAQpF,EAAc5T,GAAOA,EAAMvC,EAAOoJ,UAC1C6M,EAAYjW,EAAO8oK,aACrB9oK,EAAO8oK,UAlsQe,SAAU9oK,GAClC,OAAOA,EAAOE,SAAS,UAAU,EAAM,UACzC,CAgsQuBw7P,CAAoB17P,IAEzC+0L,EAAOhwL,EAAIC,OAAO,UAAWuW,IAAQ,SAAUogP,GAC7C,OAAQA,EAAWn5P,UACnB,IAAK,QACH,IAAIoF,EApsQoB,SAAU5H,GACtC,OAAOA,EAAOE,SAAS,qBAAsB,iBAAkB,SACjE,CAksQgB07P,CAAwB57P,GAC9B7E,EAAQ4J,EAAIiI,UAAU2uP,EAAY,UAChCxgQ,GAAmB,MAAVA,IAAkB6E,EAAO8oK,UAGtC/jK,EAAI65J,YAAY+8F,EAAY/zP,GAF5B7C,EAAI45J,SAASg9F,EAAY/zP,GAI3B,MACF,IAAK,IACH,IAAK7C,EAAIiI,UAAU2uP,EAAY,QAAS,CACtC,IAAIE,EAAU92P,EAAIiI,UAAU2uP,EAAY,SAAWA,EAAWhhQ,GAC1DmhQ,EA5sQmB,SAAU97P,GACvC,OAAOA,EAAOE,SAAS,sBAAuB,kBAAmB,SACnE,CA0sQoB67P,CAAyB/7P,GACjC67P,GAAW77P,EAAO8oK,UACpB/jK,EAAI45J,SAASg9F,EAAYG,GAEzB/2P,EAAI65J,YAAY+8F,EAAYG,EAEhC,EAGJ,IACA97P,EAAOyV,KAAK,YAAa,CACvB3B,QAASvR,EACTumK,UAAW9oK,EAAO8oK,WAEtB,CA+EekzF,CAAkBh8P,EAAQuC,EACnC,GAEFqC,UAAW,CACTU,WAAY,SAAUC,EAAQkR,GAC5B,OAAOq/O,GAA2B91P,EAAQuF,EAAQkR,EACpD,GAEF+P,IAAK,CACHy1O,SAAU,WACR,OAAOx9P,EAAShC,MAClB,GAGN,EAiHIy/P,GAAQ,SAAUl8P,GACpB,OAAOka,GAAMla,EAAOm8P,QAAS,MAC/B,EAqBIC,GAA6B,SAAUp8P,GACzC,OAAOA,EAAOq8P,YAAcr8P,EAAOq8P,YAAclD,GAAiBn5P,EACpE,EACIs8P,GAA0B,SAAUt8P,GACtC,IAAIq8P,EAAcr8P,EAAOq8P,YACzB,GAAKA,EAGH,OAAOA,EAFP,MAAM,IAAIh/P,MAAM,kDAIpB,EAqFI2sM,GAAc,SAAUhpM,GAC1B,OAAwB,IAApBA,EAAK+D,IAAI3F,QACXqmB,GAASzkB,GACFvC,EAAShC,QAETgC,EAASN,KAAK6C,EAEzB,EA4BIu7P,GAAwB,SAAUC,EAAW3lC,EAAWh0N,EAAK8X,GAC/D6hP,EAAU3+P,MAAK,SAAU29J,GAGvB,OAFiB7gJ,EAAQ4/N,GAA4BF,IAC1C7+E,EAAMz2J,IAAK4V,EAAQ6gJ,EAAMz2J,IAAI3F,OAAS,GAC1Cy3N,EAAU74N,OAAO46L,IAAUj7L,KAAI,SAAUg+J,GAC9C,OA3BM,SAAUH,EAAOG,EAAO94J,EAAK8X,GACvC,IAAI8hP,EAAWjhG,EAAMz2J,IACjBqvP,EAAWz4F,EAAM52J,IACjB23P,EAAY/hP,EAAQ8hP,EAASr9P,OAASg1P,EAASh1P,OAC/Cub,GACF6/N,GAAeiiB,EAAUrI,GAAU,GAAQz5O,GAC3C9X,EAAIklD,SAASqsM,EAAUsI,KAEvBliB,GAAe4Z,EAAUqI,GAAU,GAAQ9hP,GAC3C9X,EAAIqlD,OAAOksM,EAAUsI,GAEzB,CAgBahY,CAAMlpF,EAAOG,EAAO94J,EAAK8X,EAClC,GACF,IAAGjd,SAAQ,WACT,IAAIi/P,EAnCe,SAAU9zP,EAAM8R,GACrC,OAAO9R,EAAK7K,QAAO,SAAUuE,GAC3B,OAAO++N,GAAgBhG,eAAe/4N,EAAIwC,IAC5C,IAAGlH,KAAK8c,EAAQwQ,GAAc4tK,GAChC,CA+BwB6jE,CAAiB/lC,EAAWl8M,GAAOld,GAAGo5N,GAAW74N,OAAO46L,IAC5E,OAAO+jE,EAAch/P,KAAI,SAAUg+J,GACjC,OApBwB,SAAUA,EAAOhhJ,GAC7C+I,GAAOi4I,GAAO/9J,MAAK,SAAU+4C,GAC3B,IAAI31C,EAAO26J,EAAM52J,IACb4V,GAASs+N,GAAkBtiM,EAAM21K,GAActrN,EAAM,IACvDq5O,GAAyBr5O,EAAM,IACrB2Z,GAASu+N,GAAmBviM,EAAM21K,GAActrN,EAAMA,EAAK5B,UACrEm7O,GAA0Bv5O,EAAMA,EAAK5B,OAEzC,GACF,CAWay9P,CAAwBlhG,EAAOhhJ,EACxC,GACF,GACF,EA0DImiP,GAAwB,SAAUv8B,EAAar+M,EAAU3U,GAC3D,GAAIgzN,GAAermN,GAAMqmN,EAAar+M,GAAW,CAC/C,IAAI66O,EAAe/nE,EAASurC,EAAYr+M,IAAW,SAAU4oF,GAC3D,OAAOA,IAAOv9F,CAChB,IAC4B,IAAxBwvP,EAAa39P,cACRmhO,EAAYr+M,GAEnBq+M,EAAYr+M,GAAY66O,CAE5B,CACF,EAmEIC,GAAsB,SAAUn6P,GAClC,QAASA,EAAImC,MACf,EACIi4P,GAAkB,SAAUp0P,GAC9B,SAAUA,IAAQA,EAAKwa,gBAAkBzI,GAAWS,GAAqBxS,EAAKwa,eAAgBhI,GAAqBxS,GACrH,EAUIq0P,GAAkB,SAAUn4P,EAAKyjB,EAAKq3M,EAAY7/N,GACpD,IAAIm9P,EACAC,EACAC,EApFN,SAA0Bt4P,EAAK/E,GAC7B,IAAIs9P,EACAC,EACAC,EAAmB,SAAUt7O,EAAUk5K,GACzC,OAAO99K,EAAO89K,GAAO,SAAUvyL,GAC7B,OAAO9D,EAAIvF,GAAGqJ,EAAMqZ,EACtB,GACF,EACInY,EAAa,SAAUgD,GACzB,OAAOhI,EAAIgF,WAAWgD,EAAM,KAAMhI,EAAIo+E,UACxC,EACA,MAAO,CACLk6K,0BAA2B,SAAUn7O,EAAU3U,GA4C7C,OA3CK+vP,IACHA,EAAsB,CAAC,EACvBC,EAAmB,CAAC,EACpBv9P,EAAOmS,GAAG,cAAc,SAAUY,GAChC,IAAIlK,EAAOkK,EAAEe,QACThB,EAAU/I,EAAWlB,GACrB40P,EAAmB,CAAC,EACxB3iQ,GAAM8C,KAAK0/P,GAAqB,SAAUjxJ,EAAWnqF,GACnDs7O,EAAiBt7O,EAAUpP,GAASlV,MAAK,SAAUiL,GAC5C00P,EAAiBr7O,KACpB6yK,EAAO1oF,GAAW,SAAU9+F,GAC1BA,GAAS,EAAM,CACb1E,KAAMA,EACNqZ,SAAUA,EACVpP,QAASA,GAEb,IACAyqP,EAAiBr7O,GAAYmqF,GAE/BoxJ,EAAiBv7O,GAAYmqF,CAC/B,GACF,IACAvxG,GAAM8C,KAAK2/P,GAAkB,SAAUlxJ,EAAWnqF,GAC3Cu7O,EAAiBv7O,YACbq7O,EAAiBr7O,GACxBpnB,GAAM8C,KAAKyuG,GAAW,SAAU9+F,GAC9BA,GAAS,EAAO,CACd1E,KAAMA,EACNqZ,SAAUA,EACVpP,QAASA,GAEb,IAEJ,GACF,KAEGwqP,EAAoBp7O,KACvBo7O,EAAoBp7O,GAAY,IAElCo7O,EAAoBp7O,GAAUpjB,KAAKyO,GACnCiwP,EAAiBt7O,EAAUnY,EAAW/J,EAAO4E,UAAUqM,aAAarT,MAAK,WACvE2/P,EAAiBr7O,GAAYo7O,EAAoBp7O,EACnD,IACO,CACL2I,OAAQ,WACNiyO,GAAsBQ,EAAqBp7O,EAAU3U,GACrDuvP,GAAsBS,EAAkBr7O,EAAU3U,EACpD,EAEJ,EAEJ,CAoBkCmwP,CAAgB34P,EAAK/E,GAAQq9P,0BAgBzD5rM,EAAa,SAAU7xB,EAASnpB,GAClC,OA1Ie,SAAUzW,EAAQ4/B,EAASnpB,QAC/B,IAATA,IACFA,EAAO,CAAC,GAEV,IAAIgwO,EAzBU,SAAUhwO,EAAMmpB,GAC9B,OAAOn+B,GAASA,GAAS,CAAE8D,OAAQ,QAAUkR,GAAO,CAClD6Q,KAAK,EACL1iB,WAAW,EACXg7B,QAASA,GAEb,CAmBsB+9N,CAAUlnP,EAAMmpB,GAChC+mN,EAAcF,EAClB,IAAKA,EAAcG,UAAW,CAC5B,IAAIgX,EAAY59P,EAAOyV,KAAK,mBAAoBgxO,GAChD,GAAImX,EAAU7kF,qBAEZ,YADA/4K,EAAOyV,KAAK,aAAcmoP,GAG1BjX,EAAciX,CAElB,CACAjX,EAAY/mN,QA7BK,SAAU5/B,EAAQyW,GACnC,GAAoB,QAAhBA,EAAKlR,OAAkB,CACzB,IAAI1C,EAAM7C,EAAO4E,UAAUmB,SACvB83P,EAAe79P,EAAO+E,IAAIE,UAAUpC,EAAI4/O,wBAAyBziP,EAAO+E,IAAIi9E,SAC5E87K,EAAcD,EAAe,CAAE15K,QAAS05K,EAAar7P,SAASC,eAAkB,CAAC,EACjFoG,EAAO7I,EAAOykP,OAAO92O,MAAM8I,EAAKmpB,QAASn+B,GAASA,GAAS,CAC7D+lP,eAAe,EACfkK,mBAAmB,GAClBoM,GAAcrnP,IACjB,OAAO4+N,GAAe,CAAEnnI,SAAUluG,EAAOkuG,UAAYluG,EAAO6F,QAAQopM,UAAUpmM,EAChF,CACE,OAAO4N,EAAKmpB,OAEhB,CAgBwBm+N,CAAa/9P,EAAQ2mP,GAC3C,IAAI9jP,EAAM7C,EAAO4E,UAAUmB,UAhDT,SAAUlD,EAAKi9B,GACjC,IAAI38B,EAAa1E,EAASC,KAAKohC,EAAS38B,YAAYxF,IAAI0d,IACpD89K,EAAY16L,EAASC,KAAKohC,EAASq5J,WAAWx7L,IAAI0d,IACtDxY,EAAIs9O,iBACJt9O,EAAI0/E,WAAWziD,GACf,IAAIk+N,EAAW76P,EAAWtF,KAAKk7L,IAAa/6L,OAAO46L,IAAU/6L,KAAKmsM,IAC9Di0D,EAAW9kE,EAAUt7L,KAAKstB,IAAantB,OAAO46L,IAAU/6L,KAAKmsM,IACjEuyD,GAAsByB,EAAU76P,EAAYN,GAAK,GACjD05P,GAAsB0B,EAAU9kE,EAAWt2L,GAAK,GAChDA,EAAI6R,UAAS,EACf,CAuCEwpP,CAAcr7P,EAAKA,EAAIs7P,yBAAyBxX,EAAY/mN,UAC5D5/B,EAAO4E,UAAU6E,OAAO5G,GACxB6mO,GAAoB1pO,EAAQ6C,GACvB8jP,EAAYC,WACf5mP,EAAOyV,KAAK,aAAckxO,EAE9B,CAmHWyX,CAAap+P,EAAQ4/B,EAASnpB,EACvC,EA2BI/B,EAAW,SAAUg1M,GACvB,IAAI7mN,EAAMw7P,IACVx7P,EAAI6R,WAAWg1M,GACfjgN,EAAO5G,EACT,EACIk7N,EAAS,WACX,OAAOv1M,EAAIuiC,aAAeviC,EAAIuiC,eAAiBviC,EAAIlX,SAAS1M,SAC9D,EACIy5P,EAAW,WACb,IAAIz5P,EAAW/B,EAAKN,EAChB+7P,EAA2B,SAAUC,EAAKC,EAAaC,GACzD,IACE,OAAOD,EAAYE,sBAAsBH,EAAKE,EAGhD,CAFE,MAAOjzJ,GACP,OAAQ,CACV,CACF,EACIxmF,EAAMwD,EAAIlX,SACd,QAAwB9T,IAApBwC,EAAO+I,WAA+C,IAArB2tC,GAAS12C,GAAmB,CAC/D,IAAI+I,EAAWhD,GAAO/F,GACtB,GAAI+I,EAASjM,SACX,OAAOiM,EAASpL,KAAI,SAAUsB,GAC5B,OAAOmtO,GAAcpsO,EAAQ,CAACf,IAAI,EACpC,IAAGjC,MAAMgoB,EAAI8iC,cAEjB,CACA,KACOljD,EAAYm5N,OAAclkC,GAAiBj1L,EAAUiK,cAEtDhM,EADE+B,EAAU+kD,WAAa,EACnB/kD,EAAUilD,WAAW,GAErBjlD,EAAUkjD,YAAcljD,EAAUkjD,cAAgB9iC,EAAI8iC,cAE9DjlD,EAAMupO,GAAcpsO,EAAQ,CAAC6C,IAAM,GAGvC,CADE,MAAO2oG,GACT,CAiBA,OAhBK3oG,IACHA,EAAMmiB,EAAI8iC,YAAc9iC,EAAI8iC,cAAgB9iC,EAAI3U,KAAK41N,mBAEnDpjO,EAAIklD,UAA4C,IAAhCllD,EAAIsG,eAAenD,UAAkBnD,EAAIE,YAC3DR,EAAMwC,EAAIo+E,UACVtgF,EAAIklD,SAASxlD,EAAK,GAClBM,EAAIqlD,OAAO3lD,EAAK,IAEd46P,GAAiBC,IACsD,IAArEkB,EAAyBz7P,EAAI87P,eAAgB97P,EAAKs6P,IAAyF,IAAjEmB,EAAyBz7P,EAAI+7P,WAAY/7P,EAAKs6P,GAC1Ht6P,EAAMu6P,GAEND,EAAgB,KAChBC,EAAgB,OAGbv6P,CACT,EACI4G,EAAS,SAAU5G,EAAKs3M,GAC1B,IAAItxM,EACJ,GAlHe,SAAUhG,GAC3B,QAAKA,MAEMm6P,GAAoBn6P,IAGtBo6P,GAAgBp6P,EAAIsG,iBAAmB8zP,GAAgBp6P,EAAIyG,cAEtE,CA0GSu1P,CAAah8P,GAAlB,CAGA,IAAIi8P,EAAU9B,GAAoBn6P,GAAOA,EAAM,KAC/C,GAAIi8P,EAAJ,CACE1B,EAAgB,KAChB,IACE0B,EAAQ95P,QAEV,CADE,MAAOwmG,GACT,CAEF,KAPA,CAQA,IAAIvgD,EAAM8yK,IAMV,GADAl7N,EAJU7C,EAAOyV,KAAK,oBAAqB,CACzCkyC,MAAO9kD,EACPs3M,QAASA,IAEDxyJ,MACNsD,EAAK,CACPmyM,EAAgBv6P,EAChB,IACEooD,EAAI8zM,kBACJ9zM,EAAI+zM,SAASn8P,EAEf,CADE,MAAO2oG,GACT,EACgB,IAAZ2uG,GAAqBlvJ,EAAI2sI,SAC3B3sI,EAAIv2C,SAAS7R,EAAIyG,aAAczG,EAAI4lD,WACnCwC,EAAI2sI,OAAO/0L,EAAIsG,eAAgBtG,EAAI2lD,cAErC20M,EAAgBlyM,EAAItB,WAAa,EAAIsB,EAAIpB,WAAW,GAAK,IAC3D,CACKhnD,EAAIE,WAAaF,EAAIsG,iBAAmBtG,EAAIyG,eAAgB2hD,EAAIg0M,kBAAqBvoE,GAAIC,IACxF9zL,EAAI4lD,UAAY5lD,EAAI2lD,YAAc,GAChC3lD,EAAIsG,eAAeuS,kBACrB7S,EAAOhG,EAAIsG,eAAewS,WAAW9Y,EAAI2lD,eACZ,QAAjB3/C,EAAK0xL,UACftvI,EAAIg0M,iBAAiBp8P,EAAIsG,eAAgBtG,EAAI2lD,YAAa3lD,EAAIyG,aAAczG,EAAI4lD,WAC5EwC,EAAIp8C,aAAehM,EAAIsG,gBAAkB8hD,EAAIjB,YAAcnnD,EAAIyG,cACjE2hD,EAAIg0M,iBAAiBp2P,EAAM,EAAGA,EAAM,IAM9C7I,EAAOyV,KAAK,yBAA0B,CACpCkyC,MAAO9kD,EACPs3M,QAASA,GAnCX,CATA,CA8CF,EAWI+kD,EAAY,WACd,IAAIj0M,EAAM8yK,IACNlvN,EAAao8C,aAAiC,EAASA,EAAIp8C,WAC3Dm7C,EAAYiB,aAAiC,EAASA,EAAIjB,UAC9D,IAAKiB,IAAQp8C,IAAem7C,GAAa6vI,GAAiBhrL,IAAegrL,GAAiB7vI,GACxF,OAAO,EAET,IAAIm1M,EAAcp6P,EAAI2+E,YACtBy7K,EAAYp3M,SAASl5C,EAAYo8C,EAAIb,cACrC+0M,EAAYzqP,UAAS,GACrB,IAAI0qP,EAAar6P,EAAI2+E,YAGrB,OAFA07K,EAAWr3M,SAASiC,EAAWiB,EAAIZ,aACnC+0M,EAAW1qP,UAAS,GACbyqP,EAAYT,sBAAsBS,EAAYR,eAAgBS,IAAe,CACtF,EA+CIt1J,EAAU,CACZu1J,gBAAiB,KACjBC,iBAAkB,KAClBv6P,IAAKA,EACLyjB,IAAKA,EACLq3M,WAAYA,EACZ7/N,OAAQA,EACR0U,SAAUA,EACVguE,kBArOsB,SAAU75E,EAAMob,GACtC,IAAIphB,EAAMkC,EAAI2+E,YACVvtE,EAActN,IAASsN,EAAc8N,IACvCphB,EAAIklD,SAASl/C,EAAMob,GACnBphB,EAAIqlD,OAAOr/C,EAAMob,GACjBxa,EAAO5G,GACP6R,GAAS,KAET4pN,GAAav5N,EAAKlC,EAAK7C,EAAOoJ,WAAW,GACzCK,EAAO5G,GAEX,EA2NEyC,WA1Ne,SAAUmR,GACzB,OAhOe,SAAUzW,EAAQyW,GAKnC,YAJa,IAATA,IACFA,EAAO,CAAC,GATa,SAAUzW,EAAQuF,EAAQkR,GACjD,OAAO6lP,GAAwBt8P,GAAQ4E,UAAUU,WAAWC,EAAQkR,EACtE,CAUS8oP,CAAmBv/P,EADbyW,EAAKlR,OAASkR,EAAKlR,OAAS,OACCkR,EAC5C,CA0NW+oP,CAAax/P,EAAQyW,EAC9B,EAyNEg7C,WAAYA,EACZzoD,YAhNgB,SAAU9N,EAAM0kN,GAChC,OAAOy/C,EAAgBr2P,YAAY9N,EAAM0kN,EAC3C,EA+MEl2M,eA9MmB,SAAUX,GAC7B,OAAOs2P,EAAgB31P,eAAeX,EACxC,EA6ME/D,OA5Ma,SAAU6D,EAAM+2B,GAE7B,OAz/KS,SAAU76B,EAAK8D,EAAM+2B,GAChC,OAAOnhC,EAASC,KAAKmK,GAAMlL,KAAI,SAAUkL,GACvC,IAAIwvF,EAAMtzF,EAAIs1M,UAAUxxM,GACpBhG,EAAMkC,EAAI2+E,YAOd,OANA7gF,EAAIklD,SAASl/C,EAAKmB,WAAYquF,GAC9Bx1F,EAAIqlD,OAAOr/C,EAAKmB,WAAYquF,EAAM,GAC9Bz4D,IACF0+L,GAAav5N,EAAKlC,EAAKgG,GAAM,GAC7By1N,GAAav5N,EAAKlC,EAAKgG,GAAM,IAExBhG,CACT,GACF,CA4+KImC,CAAOD,EAAK8D,EAAM+2B,GAAShiC,KAAK6L,GACzBZ,CACT,EA0ME06I,YAzMgB,WAChB,IAAI1gJ,EAAMw7P,IAAYpzM,EAAM8yK,IAC5B,SAAKl7N,GAAOA,EAAIlC,QAGZkC,EAAI48P,iBAC6C,IAA5C58P,EAAI48P,iBAAiB,aAAc58P,IAEpCooD,GAAOpoD,EAAIE,UACrB,EAiMEm8P,UAAWA,EACXQ,QAvFY,SAAUn9P,GAEtB,OADAkvD,EAAW1sD,EAAIu+M,aAAa/gN,IACrBA,CACT,EAqFEsC,QApFc,WACd,OAlrLU,SAAU8xC,EAAM9zC,GAC5B,IAAIN,EAAK4G,EAAgBG,EACzB,IAAKzG,EACH,OAAO8zC,EAETxtC,EAAiBtG,EAAIsG,eACrBG,EAAezG,EAAIyG,aACnB,IAAIk/C,EAAc3lD,EAAI2lD,YAClBC,EAAY5lD,EAAI4lD,UAEpB,OADAlmD,EAAMM,EAAI4/O,yBACL5/O,EAAIE,YACHoG,IAAmBG,GACjBm/C,EAAYD,EAAc,GACxBr/C,EAAeuS,kBACjBnZ,EAAM4G,EAAewS,WAAW6sC,IAIN,IAA5Br/C,EAAenD,UAA4C,IAA1BsD,EAAatD,WAE9CmD,EADEA,EAAe/J,SAAWopD,EACX2jL,GAAmBhjO,EAAegiB,aAAa,GAE/ChiB,EAAea,WAGhCV,EADgB,IAAdm/C,EACa0jL,GAAmB7iO,EAAa0vL,iBAAiB,GAEjD1vL,EAAaU,WAE1Bb,GAAkBA,IAAmBG,IAChCH,EAIT5G,GAAwB,IAAjBA,EAAIyD,SACNzD,EAAIyH,WAENzH,CACT,CA4oLWsC,CAAQ7E,EAAOoJ,UAAWi1P,IACnC,EAmFEtgC,OAAQA,EACRt0N,OAAQA,EACR1D,OAAQs4P,EACRptP,SAhOe,SAAUi7N,GACzB,OAAOj7N,GAASjR,EAAOoJ,UAAWi1P,IAAYnyB,EAChD,EA+NEvpJ,OA9Na,SAAUupJ,GACvB,OAAOvpJ,GAAO3iF,EAAOoJ,UAAWi1P,IAAYnyB,EAC9C,EA6NEuf,kBAvFwB,SAAUlK,EAAUoe,GAC5C,OA9oLoB,SAAU56P,EAAKlC,EAAK0+O,EAAUoe,GACpD,IAAI92P,EACA+2P,EAAiB,GACjBjpN,EAAO5xC,EAAIo+E,UAMf,GALAo+J,EAAWx8O,EAAIE,UAAUs8O,GAAYtwO,GAAS0lC,EAAM9zC,EAAKA,EAAIE,WAAYgC,EAAIi9E,SAC7E29K,EAAS56P,EAAIE,UAAU06P,GAAUh9K,GAAOhsC,EAAM9zC,EAAKA,EAAIE,WAAYgC,EAAIi9E,SACnEu/J,GAAYA,IAAa5qM,GAC3BipN,EAAe9gQ,KAAKyiP,GAElBA,GAAYoe,GAAUpe,IAAaoe,EAAQ,CAC7C92P,EAAO04O,EAEP,IADA,IAAIr+O,EAAS,IAAIs8L,GAAc+hD,EAAU5qM,IACjC9tC,EAAO3F,EAAOI,SAAWuF,IAAS82P,GACpC56P,EAAIi9E,QAAQn5E,IACd+2P,EAAe9gQ,KAAK+J,EAG1B,CAIA,OAHI82P,GAAUpe,IAAaoe,GAAUA,IAAWhpN,GAC9CipN,EAAe9gQ,KAAK6gQ,GAEfC,CACT,CAwnLWnU,CAAkB1mP,EAAKs5P,IAAY9c,EAAUoe,EACtD,EAsFEn9K,UAtEc,WACd,IAAI3/E,EAAMw7P,IACNpzM,EAAM8yK,IACV,KA7gPKn1K,GA6gPkBqC,GA7gPG7rD,OAAS,IA6gPJm/N,GAAav+N,GAAS,CACnD,IAAI2nO,EAAUD,GAAY3iO,EAAKlC,GAI/B,OAHA8kO,EAAQ/pO,MAAK,SAAU+pO,GACrBl+N,EAAOk+N,EAASu3B,IAClB,IACOv3B,EAAQ3qO,MAAM6F,EACvB,CACA,OAAOA,CACT,EA4DEg9P,gBA3DoB,SAAU39O,EAAU3U,GAExC,OADA8vP,EAA0Bn7O,EAAU3U,GAC7Bu8F,CACT,EAyDEuzJ,0BAA2BA,EAC3ByC,mBAzDuB,WAGvB,IAFA,IAAIC,EACAl3P,EAAO9D,EAAIo+E,UACRt6E,GAA0B,SAAlBA,EAAKrG,UAAqB,CACvC,GAAIqG,EAAKqzH,aAAerzH,EAAK6jB,aAAc,CACzCqzO,EAAkBl3P,EAClB,KACF,CACAA,EAAOA,EAAKmB,UACd,CACA,OAAO+1P,CACT,EA+CE1uP,eA9CmB,SAAU9O,EAAKm3L,GAC9BvjL,EAAc5T,GAtrMM,SAAUvC,EAAQ8T,EAAS4lL,IACtC15L,EAAOmuF,OAASo7I,GAAoBE,IAC1CzpO,EAAQ8T,EAAS4lL,EAC5B,CAorMMsmE,CAAsBhgQ,EAAQuC,EAAKm3L,GAEnCgwC,GAAoB1pO,EAAQq+P,IAAY3kE,EAE5C,EAyCEumE,aAxCiB,SAAU51O,EAASC,GACpC,OAAO7gB,EAAOm8N,GAAUv7M,EAASC,EAAStqB,EAAOqiF,UACnD,EAuCEz6D,sBAtC0B,WAC1B,IAAI/kB,EAAMw7P,IACV,OAAOx7P,EAAIE,UAAYupN,GAAcQ,eAAejqN,GAAK2nD,iBAAiB,GAAK3nD,EAAI+kB,uBACrF,EAoCE40B,QAnCY,WACZh0B,EAAM20O,EAAgBC,EAAgB,KACtCkC,EAAiB9iN,SACnB,GAkCI6iN,EAAkB/9B,GAAgBx3H,GAClCw1J,EAAmBh9B,GAAiBx4H,EAAS9pG,GAGjD,OAFA8pG,EAAQu1J,gBAAkBA,EAC1Bv1J,EAAQw1J,iBAAmBA,EACpBx1J,CACT,EA2CIo2J,GAAa,SAAUC,EAAW13P,GACpC,IAAI87B,EAAS+oK,KACT7kM,EAAS23P,wBAtCY,SAAUD,EAAW57N,EAAQ87N,GACtDF,EAAUrgC,cAAc,QAAQ,SAAU1kC,GACxCrG,EAAOqG,GAAO,SAAUvyL,GACtB,IAAIZ,EAAQs8B,EAAO52B,MAAM9E,EAAKg+B,KAAK,UAC/B+/C,EAAQ/9E,EAAKg+B,KAAK,SAClBy5N,EAAOz3P,EAAKg+B,KAAK,QACjBz2B,EAAOvH,EAAKg+B,KAAK,QACjB+/C,IACF3+E,EAAM2+E,MAAQA,GAEZ05K,IACFr4P,EAAM,eAAiBq4P,GAErBlwP,IACFnI,EAAM,aAAeo4P,EAAUt/O,SAASlY,EAAKg+B,KAAK,QAAS,IAAM,IAEnEh+B,EAAKnN,KAAO,OACZmN,EAAKg+B,KAAK,QAAStC,EAAO0qK,UAAUhnM,IAtBxB,SAAUY,EAAMmwD,GAChC+7H,EAsBsB,CAChB,QACA,OACA,SAzBQ,SAAUr5L,GACtBmN,EAAKg+B,KAAKnrC,EAAM,KAClB,GACF,CAmBM6kQ,CAAY13P,EAKd,GACF,GACF,CAcI23P,CAAqBL,EAAW57N,EAAQzpC,GAAM4wI,QAAQjjI,EAASg4P,0BAbvC,SAAUN,EAAW57N,GAC/C47N,EAAUrgC,cAAc,UAAU,SAAU1kC,GAC1CrG,EAAOqG,GAAO,SAAUvyL,GACtB,IAAIZ,EAAQs8B,EAAO52B,MAAM9E,EAAKg+B,KAAK,UACnC5+B,EAAM,mBAAqB,eAC3BY,EAAKnN,KAAO,OACZmN,EAAKg+B,KAAK,QAAStC,EAAO0qK,UAAUhnM,GACtC,GACF,GACF,CAMEy4P,CAAsBP,EAAW57N,EACnC,EA8BIypM,GAAe,SAAU9pH,GAC3B,IAAIhpH,EACAylQ,EAAWzyB,mBAAmBhqH,GAAKlgH,MAAM,KACzCuc,EAAU,eAAei2E,KAAKmqK,EAAS,IAI3C,OAHIpgP,IACFrlB,EAAOqlB,EAAQ,IAEV,CACLrlB,KAAMA,EACNkL,KAAMu6P,EAAS,GAEnB,EACIC,GAAY,SAAU1lQ,EAAMkL,GAC9B,IAAIqU,EACJ,IACEA,EAAM+pG,KAAKp+G,EAGb,CAFE,MAAO2M,GACP,OAAOtU,EAAShC,MAClB,CAEA,IADA,IAAI8C,EAAM,IAAI0lH,WAAWxqG,EAAIrb,QACpBF,EAAI,EAAGA,EAAIK,EAAIH,OAAQF,IAC9BK,EAAIL,GAAKub,EAAIuqG,WAAW9lH,GAE1B,OAAOT,EAASN,KAAK,IAAI+mH,KAAK,CAAC3lH,GAAM,CAAErE,KAAMA,IAC/C,EASI2lQ,GAAY,SAAUr9P,GACxB,OAA6B,IAAzBA,EAAI5E,QAAQ,SAzDE,SAAU4E,GAC5B,OAAO,IAAIi5L,IAAW,SAAU1hM,EAASkwG,GACvC,IAAI61J,EAAkB,WACpB71J,EAAO,kBAAoBznG,EAAM,yDACnC,EACA,IACE,IAAIu9P,EAAQ,IAAIC,eAChBD,EAAMjwP,KAAK,MAAOtN,GAAK,GACvBu9P,EAAME,aAAe,OACrBF,EAAMhjE,OAAS,WACQ,MAAjBgjE,EAAM3uL,OACRr3E,EAAQgmQ,EAAM1uG,UAEdyuG,GAEJ,EACAC,EAAM/iE,QAAU8iE,EAChBC,EAAMvzP,MAGR,CAFE,MAAOg+F,GACPs1J,GACF,CACF,GACF,CAoCWI,CAAc19P,GAEM,IAAzBA,EAAI5E,QAAQ,UAZYslH,EAaL1gH,EAZhB,IAAIi5L,IAAW,SAAU1hM,GAC9B,IAAI0V,EAAKu9N,GAAa9pH,GAAMhpH,EAAOuV,EAAGvV,KAAMkL,EAAOqK,EAAGrK,KACtDw6P,GAAU1lQ,EAAMkL,GAAMzJ,MAAK,WACzB,OAAO5B,EAAQ,IAAImqH,KAAK,IAC1B,GAAGnqH,EACL,KASO,KAfW,IAAUmpH,CAgB9B,EAWIi9I,GAAU,EACV99C,GAAW,SAAUriL,GACvB,OAAQA,GAAU,UAAYmgO,IAChC,EAmDIC,GAAe,SAAUC,EAAcC,GACzC,IAAIC,EAAiB,CAAC,EAuDtB,MAAO,CAAElgC,QAtDK,SAAU9+N,EAAKO,GACtBA,IACHA,EAAYtG,GAEd,IAAIglQ,EAASxsE,EATE,SAAUzyL,GAC3B,OAAOA,EAAM7D,GAAK6D,EAAIs/L,qBAAqB,QAAU,EACvD,CAO0B4/D,CAAal/P,IAAM,SAAUuH,GACjD,IAAImqF,EAAMnqF,EAAImqF,IACd,QAAKyiG,GAAIF,UAGL1sL,EAAI0b,aAAa,oBAGjB1b,EAAI0b,aAAa,4BAGhByuE,GAAOA,IAAQyiG,GAAII,kBAGK,IAAzB7iG,EAAIr1F,QAAQ,UACNyiQ,EAAaK,WAAWztK,IAAQnxF,EAAUgH,GAEvB,IAAzBmqF,EAAIr1F,QAAQ,UACPkE,EAAUgH,GAGrB,IACI63P,EAAW7sE,EAAM0sE,GAAQ,SAAU13P,GACrC,QAAgCtM,IAA5B+jQ,EAAez3P,EAAImqF,KACrB,OAAO,IAAIwoG,IAAW,SAAU1hM,GAC9BwmQ,EAAez3P,EAAImqF,KAAKhmF,MAAK,SAAU2zP,GACrC,GAAyB,iBAAdA,EACT,OAAOA,EAET7mQ,EAAQ,CACN2oH,MAAO55G,EACP+3P,SAAUD,EAAUC,UAExB,GACF,IAEF,IAAIC,EAAa,IAAIrlE,IAAW,SAAU1hM,EAASkwG,IA5FnC,SAAUq2J,EAAWx3P,EAAK/O,EAASkwG,GACvD,IAAIoZ,EAAQw9I,EACZ,GAAiC,IAA7B/3P,EAAImqF,IAAIr1F,QAAQ,SAApB,CAwBA,IAAI6R,EAAKu9N,GAAalkO,EAAImqF,KAAM7tF,EAAOqK,EAAGrK,KAAMlL,EAAOuV,EAAGvV,KAC1DmpH,EAASj+G,GACTy7P,EAAWP,EAAUS,UAAU19I,EAAQnpH,IAErCH,EAAQ,CACN2oH,MAAO55G,EACP+3P,SAAUA,IAGZhB,GAAU/2P,EAAImqF,KAAKhmF,MAAK,SAAUk6B,GAChC05N,EAAWP,EAAUl3P,OAAOi5M,KAAYl7K,EAAMk8E,GAC9Ci9I,EAAU9mQ,IAAIqnQ,GACd9mQ,EAAQ,CACN2oH,MAAO55G,EACP+3P,SAAUA,GAEd,IAAG,SAAUj0P,GACXq9F,EAAOr9F,EACT,GAnBF,MAtBEi0P,EAAWP,EAAUU,SAASl4P,EAAImqF,MAEhCl5F,EAAQ,CACN2oH,MAAO55G,EACP+3P,SAAUA,IAGZhB,GAAU/2P,EAAImqF,KAAKhmF,MAAK,SAAUk6B,IAxBpB,SAAUA,GAC5B,OAAO,IAAIs0J,IAAW,SAAU1hM,GAC9B,IAAIorH,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WACjBtrH,EAAQorH,EAAO5zF,OACjB,EACA4zF,EAAOG,cAAcn+E,EACvB,GACF,EAiBQo+E,CAAcp+E,GAAMl6B,MAAK,SAAUg0P,GACjC59I,EAAS2pH,GAAai0B,GAAS77P,KAC/By7P,EAAWP,EAAUl3P,OAAOi5M,KAAYl7K,EAAMk8E,GAC9Ci9I,EAAU9mQ,IAAIqnQ,GACd9mQ,EAAQ,CACN2oH,MAAO55G,EACP+3P,SAAUA,GAEd,GACF,IAAG,SAAUj0P,GACXq9F,EAAOr9F,EACT,GAwBN,CA+CQs0P,CAAgBZ,EAAWx3P,EAAK/O,EAASkwG,EAC3C,IAAGh9F,MAAK,SAAUskB,GAEhB,cADOgvO,EAAehvO,EAAOmxF,MAAMzvB,KAC5B1hE,CACT,IAAGotG,OAAM,SAAU7xH,GAEjB,cADOyzP,EAAez3P,EAAImqF,KACnBnmF,CACT,IAEA,OADAyzP,EAAez3P,EAAImqF,KAAO6tK,EACnBA,CACT,IACA,OAAOrlE,GAAWxlL,IAAI0qP,EACxB,EAEF,EAEIQ,GAAgB,SAAU15P,EAAUgO,EAAM2rP,EAAev5P,IACzCJ,EAAS45P,oBAAsB5rP,EAAKw4D,SACnCmzL,EAAcv5P,EAAKnN,MACpCmN,EAAK2iB,QAAQskD,OAAO,IAAI08J,GAAQ,KAAM,IAAII,YAAa,EAEvD/jO,EAAK2iB,QAAQskD,OAAO,IAAI08J,GAAQ,QAAS,IAAIrxO,MAAQslM,EAEzD,EAII6hE,GAAe,SAAUz5P,EAAMnN,GACjC,OAAOmN,GAAQA,EAAK1F,YAAc0F,EAAK1F,aAAe0F,EAAKswL,WAAatwL,EAAK1F,WAAWzH,OAASA,CACnG,EAKIuoN,GAAU,SAAUp+M,EAAQg9O,EAAkB0f,EAAoB15P,GACpE,OAAOA,EAAKo7M,QAAQ4+B,EAAkB0f,GAAoB,SAAU15P,GAClE,OANW,SAAUhD,EAAQgD,GAC/B,IAAIi5D,EAAOj8D,EAAOulM,eAAeviM,EAAKnN,MACtC,OAAOomE,GAAQA,EAAKioI,SACtB,CAGWy4D,CAAS38P,EAAQgD,EAC1B,GACF,EA8MIytI,GAAUx7I,GAAMw7I,QAASmsH,GAAS3nQ,GAAM8C,KAAM8kQ,GAAY5nQ,GAAM4wI,QAASi3H,GAAW7nQ,GAAM88L,OAC1FgrE,GAAY,SAAUn6P,EAAU5C,QACnB,IAAXA,IACFA,EAAS6gM,MAEX,IAAImgD,EAAc,CAAC,EACfC,EAAmB,GACnB+b,EAAe,CAAC,EAChBC,EAAoB,CAAC,GACzBr6P,EAAWA,GAAY,CAAC,GACfylG,WAAW,aAAczlG,IAAWA,EAASylG,SACtDzlG,EAASs6P,UAAYt6P,EAASs6P,WAAa,OAC3C,IAuGIC,EAAa,SAAUn6P,GACzB,IAAInN,EAAOmN,EAAKnN,KACZA,KAAQmrP,KACNhmP,EAAOgiQ,EAAannQ,IAEtBmF,EAAK/B,KAAK+J,GAEVg6P,EAAannQ,GAAQ,CAACmN,IAI1B,IADA,IAAI3J,EAAI4nP,EAAiB1nP,OAClBF,KAAK,CACV,IAEM2B,EAFFu5L,EAAW0sD,EAAiB5nP,GAAGxD,KAC/B0+L,KAAYvxL,EAAKy7B,WAAW3mC,OAC1BkD,EAAOiiQ,EAAkB1oE,IAE3Bv5L,EAAK/B,KAAK+J,GAEVi6P,EAAkB1oE,GAAY,CAACvxL,GAGrC,CACA,OAAOA,CACT,EA+VIihG,EAAU,CACZjkG,OAAQA,EACRo9P,mBA3UuB,SAAUvnQ,EAAM6R,GACvCk1P,GAAOC,GAAUhnQ,IAAO,SAAUA,GAChC,IAAIwD,EACJ,IAAKA,EAAI,EAAGA,EAAI4nP,EAAiB1nP,OAAQF,IACvC,GAAI4nP,EAAiB5nP,GAAGxD,OAASA,EAE/B,YADAorP,EAAiB5nP,GAAGmtG,UAAUvtG,KAAKyO,GAIvCu5O,EAAiBhoP,KAAK,CACpBpD,KAAMA,EACN2wG,UAAW,CAAC9+F,IAEhB,GACF,EA8TEy5O,oBA7TwB,WACxB,MAAO,GAAG3iP,OAAOyiP,EACnB,EA4TEhnB,cAlWkB,SAAUpkO,EAAM6R,GAClCk1P,GAAOC,GAAUhnQ,IAAO,SAAUA,GAChC,IAAImF,EAAOgmP,EAAYnrP,GAClBmF,IACHgmP,EAAYnrP,GAAQmF,EAAO,IAE7BA,EAAK/B,KAAKyO,EACZ,GACF,EA2VEw5O,eA1VmB,WACnB,IAAIhmP,EAAM,GACV,IAAK,IAAIunK,KAAUu+E,EACb3sO,GAAM2sO,EAAav+E,IACrBvnK,EAAIjC,KAAK,CACPpD,KAAM4sK,EACNj8D,UAAWw6I,EAAYv+E,KAI7B,OAAOvnK,CACT,EAgVEiiQ,WAAYA,EACZr1P,MA9TU,SAAU2N,EAAM7E,GAC1B,IAAI2kL,EAAOl8L,EAAG0Y,EAAGsrP,EAAIC,EAAItiQ,EAAMnF,EAE3BmN,EADAu6P,EAAkB,GAWtB3sP,EAAOA,GAAQ,CAAC,EAChBosP,EAAe,CAAC,EAChBC,EAAoB,CAAC,EACrB,IAAIV,EAAgBO,GAASrsH,GAAQ,gDAAiDzwI,EAAO+mM,oBACzFy2D,EAAwB98D,GAAyB1gM,GACjDg9O,EAAmBh9O,EAAOknM,sBAC1BnpL,EAAW/d,EAAO+d,SAClBsqF,EAAWzlG,EAASylG,SAEpBo1J,EAlBmB,SAAU5nQ,GAC/B,OAAa,IAATA,EACK,IACW,IAATA,EACF,IAEAA,CAEX,CAUoB6nQ,CADM,sBAAuB9sP,EAAOA,EAAKi7O,kBAAoBjpP,EAASipP,mBAEtF8R,EAAqB39P,EAAOonM,wBAC5Bw2D,EAAwB,cACxBC,EAAsB,cACtBC,EAAsB,cACtBC,EAAwB,eACxBC,EAAiC3pP,GAAMspP,EAAoB/sP,EAAK0tE,UAAYjqE,GAAMspP,EAAoB/6P,EAASs6P,WAqC/Ge,EAAa,SAAUpoQ,EAAMR,GAC/B,IACI2F,EADAgI,EAAO,IAAI2jO,GAAQ9wO,EAAMR,GAU7B,OARIQ,KAAQmrP,KACVhmP,EAAOgiQ,EAAannQ,IAElBmF,EAAK/B,KAAK+J,GAEVg6P,EAAannQ,GAAQ,CAACmN,IAGnBA,CACT,EACIk7P,EAAyB,SAAUl7P,GAErC,IADA,IAAIu5P,EAAgBv8P,EAAO+mM,mBAClBwmB,EAAWvqN,EAAKq4I,KAAMkyE,GAA8B,IAAlBA,EAASl4N,MAAa,CAC/D,IAAI8oQ,EAAU5wC,EAASj4N,MAAMqK,QAAQk+P,EAAqB,IAC1D,GAAIM,EAAQ5kQ,OAAS,EAEnB,YADAg0N,EAASj4N,MAAQ6oQ,GAGnB,IAAIC,EAAe7wC,EAAS9vN,KAC5B,GAAI2gQ,EAAc,CAChB,GAA0B,IAAtBA,EAAa/oQ,MAAc+oQ,EAAa9oQ,MAAMiE,OAAQ,CACxDg0N,EAAWA,EAASlyE,KACpB,QACF,CACA,IAAKkhH,EAAc6B,EAAavoQ,OAA+B,WAAtBuoQ,EAAavoQ,MAA2C,UAAtBuoQ,EAAavoQ,KAAkB,CACxG03N,EAAWA,EAASlyE,KACpB,QACF,CACF,CACA,IAAIh2H,EAAUkoM,EAASlyE,KACvBkyE,EAASlpN,SACTkpN,EAAWloM,CACb,CACF,EAqBIu5N,EAAS1T,GAAU,CACrB7iI,SAAUA,EACV58F,SAAU7I,EAAS6I,SACnB+8N,qBAAsB5lO,EAAS4lO,qBAC/Bt/B,oBAAqBtmM,EAASsmM,oBAC9BD,kBAAmBrmM,EAASqmM,kBAC5BujC,2BAA4B5pO,EAAS4pO,2BACrCmB,eAAgB/qO,EAAS+qO,eACzBN,sBA5B0B,SAAU5hN,GACpC,IAAItjB,EAAS,CAAC,EACd,IAAK,IAAIk5O,KAAU51N,EACF,OAAX41N,GAA8B,MAAXA,IACrBl5O,EAAOk5O,GAAU51N,EAAM41N,IAG3B,OAAOl5O,CACT,CAoByBk2P,CAAsBr+P,EAAOinM,0BACpDokC,MAAO,SAAUlwO,GACf6H,EAAKinE,OAAOg0L,EAAW,SAAU,IAAI3oQ,MAAQ6F,CAC/C,EACAA,KAAM,SAAUA,EAAMwlB,GACpB,IAAI4sM,EACCywC,IACH7iQ,EAAOA,EAAKwE,QAAQm+P,EAAqB,KAxgB7B,SAAU96P,EAAMu5P,GACpC,OAAOv5P,IAASqR,GAAMkoP,EAAev5P,EAAKnN,OAAuB,OAAdmN,EAAKnN,KAC1D,CAugBcyoQ,CAAgBt7P,EAAKswL,UAAWipE,KAClCphQ,EAAOA,EAAKwE,QAAQi+P,EAAuB,MAG3B,IAAhBziQ,EAAK5B,UACPg0N,EAAW0wC,EAAW,QAAS,IACtBt9O,MAAQA,EACjB3d,EAAKinE,OAAOsjJ,GAAUj4N,MAAQ6F,EAElC,EACAiwO,QAAS,SAAUjwO,GACjB6H,EAAKinE,OAAOg0L,EAAW,WAAY,IAAI3oQ,MAAQ6F,CACjD,EACAmwO,GAAI,SAAUz1O,EAAMsF,GAClB6H,EAAKinE,OAAOg0L,EAAWpoQ,EAAM,IAAIP,MAAQ6F,EACzC+iQ,EAAuBl7P,EACzB,EACAuoO,QAAS,SAAUpwO,GACH6H,EAAKinE,OAAOg0L,EAAW,WAAY,KACzC3oQ,MAAQ6F,EAChB+iQ,EAAuBl7P,EACzB,EACA8R,MAAO,SAAUjf,EAAMyO,EAAOqhB,GAC5B,IAAImmN,EAAczjI,EAAWroG,EAAOulM,eAAe1vM,GAAQ,CAAC,EAC5D,GAAIi2O,EAAa,CACf,IAAIkJ,EAAUipB,EAAWnyB,EAAYloC,YAAc/tM,EAAM,GACzDm/O,EAAQv2M,WAAan6B,EACrB0wO,EAAQjO,WAAaphN,EACrB3iB,EAAKinE,OAAO+qK,GACZ,IAAIupB,EAAWxgP,EAAS/a,EAAKnN,MACzB0oQ,GAAYxgP,EAASi3N,EAAQn/O,QAAU0oQ,EAASvpB,EAAQn/O,OAC1D0nQ,EAAgBtkQ,KAAK+7O,GAGvB,IADA,IAAIwpB,EAAiBvd,EAAiB1nP,OAC/BilQ,KAAkB,CACvB,IAAIjqE,EAAW0sD,EAAiBud,GAAgB3oQ,KAC5C0+L,KAAYjwL,EAAMxM,OACpBkD,EAAOiiQ,EAAkB1oE,IAEvBv5L,EAAK/B,KAAK+7O,GAEVioB,EAAkB1oE,GAAY,CAACygD,GAGrC,CACIunB,EAAc1mQ,IAChBqoQ,EAAuBlpB,GAEpBrvN,IACH3iB,EAAOgyO,IAEJgpB,GAAkCL,EAAmB9nQ,KACxDmoQ,GAAiC,EAErC,CACF,EACA/+I,IAAK,SAAUppH,GACb,IAAI03N,EAAUpyN,EAAMkqB,EAChBymN,EAAczjI,EAAWroG,EAAOulM,eAAe1vM,GAAQ,CAAC,EAC5D,GAAIi2O,EAAa,CACf,GAAIywB,EAAc1mQ,KACXmoQ,EAAgC,CAEnC,IADAzwC,EAAWvqN,EAAK1F,aACkB,IAAlBiwN,EAASl4N,KAEvB,IADA8F,EAAOoyN,EAASj4N,MAAMqK,QAAQi+P,EAAuB,KAC5CrkQ,OAAS,EAChBg0N,EAASj4N,MAAQ6F,EACjBoyN,EAAWA,EAAS9vN,UAKpB,IAHA4nB,EAAUkoM,EAAS9vN,KACnB8vN,EAASlpN,SACTkpN,EAAWloM,EACJkoM,GAA8B,IAAlBA,EAASl4N,MAC1B8F,EAAOoyN,EAASj4N,MAChB+vB,EAAUkoM,EAAS9vN,MACC,IAAhBtC,EAAK5B,QAAgBwkQ,EAAsBngQ,KAAKzC,MAClDoyN,EAASlpN,SACTkpN,EAAWloM,GAEbkoM,EAAWloM,EAKjB,IADAkoM,EAAWvqN,EAAKswL,YACkB,IAAlBi6B,EAASl4N,KAEvB,IADA8F,EAAOoyN,EAASj4N,MAAMqK,QAAQk+P,EAAqB,KAC1CtkQ,OAAS,EAChBg0N,EAASj4N,MAAQ6F,EACjBoyN,EAAWA,EAASlyE,UAKpB,IAHAh2H,EAAUkoM,EAASlyE,KACnBkyE,EAASlpN,SACTkpN,EAAWloM,EACJkoM,GAA8B,IAAlBA,EAASl4N,MAC1B8F,EAAOoyN,EAASj4N,MAChB+vB,EAAUkoM,EAASlyE,MACC,IAAhBlgJ,EAAK5B,QAAgBwkQ,EAAsBngQ,KAAKzC,MAClDoyN,EAASlpN,SACTkpN,EAAWloM,GAEbkoM,EAAWloM,CAInB,CAEE24O,GAAkCL,EAAmB9nQ,KACvDmoQ,GAAiC,GAEnC,IAAIS,EAAcrgD,GAAQp+M,EAAQg9O,EAAkB2gB,EAAoB36P,GACpEmB,EAAanB,EAAK6a,OAClBiuN,EAAYpmC,kBAAoB+4D,GA1If,SAAUz7P,GAEnC,IADA,IAAI07P,EAAW17P,EACRsN,EAAcouP,IAAW,CAC9B,GAAIA,EAAS7oQ,QAAQ2nQ,EACnB,OAAOp/C,GAAQp+M,EAAQg9O,EAAkB2gB,EAAoBe,GAE7DA,EAAWA,EAAS7gP,MAExB,CACA,OAAO,CACT,CAgIyD8gP,CAAqB37P,GACtEs5P,GAAc15P,EAAUgO,EAAM2rP,EAAev5P,GACpC8oO,EAAY3nC,aAAes6D,EAChClC,EAAcv5P,EAAKnN,MACrBmN,EAAK2iB,QAAQthB,SAEbrB,EAAK8iB,SAEEgmN,EAAY5nC,YA/oBV,SAAUlhM,GAC/B,OAAOy5P,GAAaz5P,EAAM,UAAYA,EAAK1F,WAAWhI,QAAUslM,EAClE,CA6oB+CgkE,CAAiB57P,IAASy7P,IAC7DnC,GAAc15P,EAAUgO,EAAM2rP,EAAev5P,GAE/CA,EAAOmB,CACT,CACF,GACCnE,GACCk8E,EAAWl5E,EAAO,IAAI2jO,GAAQ/1N,EAAK0tE,SAAW17E,EAASs6P,UAAW,IAYtE,GAXAte,EAAO92O,MAAM2N,EAAM7E,EAAKlR,QACpB2oG,GAAYk1J,EAAgBhkQ,SACzBqX,EAAK0tE,QAGR1tE,EAAK87I,SAAU,EApbI,SAAU6oC,GAuBjC,IAtBA,IAAIspE,EAAuBpuH,GAAQ,oCAC/BusG,EAAmBh9O,EAAOknM,sBAC1Bw1D,EAAqB18P,EAAOonM,wBAC5B03D,EAAoB9+P,EAAO2gM,uBAC3BK,EAAkBhhM,EAAOqnM,qBACzB03D,EAA4B,SAAU/7P,EAAMg8P,GAI9C,QAH2B,IAAvBA,IACFA,EAAqBh8P,EAAK6a,QAExBmjL,EAAgBh+L,EAAKnN,MACvBmN,EAAK2iB,QAAQthB,aACR,CAEL,IADA,IACSwM,EAAK,EAAGouP,EADFj8P,EAAK+a,WACoBlN,EAAKouP,EAAW1lQ,OAAQsX,IAAM,CACpE,IAAIu2O,EAAY6X,EAAWpuP,GACtB7Q,EAAOunM,aAAay3D,EAAmBnpQ,KAAMuxP,EAAUvxP,OAC1DkpQ,EAA0B3X,EAAW4X,EAEzC,CACAh8P,EAAK8iB,QACP,CACF,EACS27K,EAAK,EAAGA,EAAKlM,EAAMh8L,OAAQkoM,IAAM,CACxC,IAAIz+L,EAAOuyL,EAAMkM,GACbxuB,OAAW,EAAQisF,OAAY,EAAQR,OAAW,EACtD,GAAK17P,EAAK6a,SAAU7a,EAAK6uC,MAGzB,GAAIitN,EAAkB97P,EAAKnN,OAA8B,OAArBmN,EAAK6a,OAAOhoB,KAAhD,CAEE,IADA,IAAIwvB,EAAUriB,EAAKvF,KACZ4nB,GACDy5O,EAAkBz5O,EAAQxvB,OAC5BwvB,EAAQxvB,KAAO,KACfwvB,EAAQwsB,OAAQ,EAChB7uC,EAAK6a,OAAOurD,OAAO/jD,EAASriB,EAAK6a,QAInCwH,EAAUA,EAAQ5nB,KAEpBuF,EAAK8iB,QAEP,KAdA,CAeA,IAAI7Y,EAAU,CAACjK,GACf,IAAKiwK,EAAWjwK,EAAK6a,OAAQo1J,IAAajzK,EAAOunM,aAAat0B,EAASp9K,KAAMmN,EAAKnN,QAAUgpQ,EAAqB5rF,EAASp9K,MAAOo9K,EAAWA,EAASp1J,OACnJ5Q,EAAQhU,KAAKg6K,GAEf,GAAIA,GAAYhmK,EAAQ1T,OAAS,EAC/B,GAAIyG,EAAOunM,aAAat0B,EAASp9K,KAAMmN,EAAKnN,MAAO,CACjDoX,EAAQmG,UAGR,IADA,IAAI+rP,EADJD,EAAY/B,EAAWlwP,EAAQ,GAAGqtB,SAEzBjhC,EAAI,EAAGA,EAAI4T,EAAQ1T,OAAS,EAAGF,IAAK,CACvC2G,EAAOunM,aAAa43D,EAAYtpQ,KAAMoX,EAAQ5T,GAAGxD,OACnD6oQ,EAAWvB,EAAWlwP,EAAQ5T,GAAGihC,SACjC6kO,EAAYl1L,OAAOy0L,IAEnBA,EAAWS,EAEb,IAAK,IAAI/X,EAAYn6O,EAAQ5T,GAAGiE,WAAY8pP,GAAaA,IAAcn6O,EAAQ5T,EAAI,IAAK,CACtF,IAAI03N,EAAWq2B,EAAU3pP,KACzBihQ,EAASz0L,OAAOm9K,GAChBA,EAAYr2B,CACd,CACAouC,EAAcT,CAChB,CACKtgD,GAAQp+M,EAAQg9O,EAAkB0f,EAAoBwC,GAIzDjsF,EAAS7pG,OAAOpmE,EAAMiK,EAAQ,IAAI,IAHlCgmK,EAAS7pG,OAAO81L,EAAWjyP,EAAQ,IAAI,GACvCgmK,EAAS7pG,OAAOpmE,EAAMk8P,IAIxBjsF,EAAWhmK,EAAQ,IACfmxM,GAAQp+M,EAAQg9O,EAAkB0f,EAAoBzpF,IAAawpF,GAAaxpF,EAAU,QAC5FA,EAASttJ,QAAQthB,QAErB,MACE06P,EAA0B/7P,QAEvB,GAAIA,EAAK6a,OAAQ,CACtB,GAAkB,OAAd7a,EAAKnN,KAAe,CAEtB,IADIwvB,EAAUriB,EAAKq4I,QACc,OAAjBh2H,EAAQxvB,MAAkC,OAAjBwvB,EAAQxvB,MAAgB,CAC/DwvB,EAAQ4kD,OAAOjnE,GACf,QACF,CAEA,IADAqiB,EAAUriB,EAAKvF,QACkB,OAAjB4nB,EAAQxvB,MAAkC,OAAjBwvB,EAAQxvB,MAAgB,CAC/DwvB,EAAQ+jD,OAAOpmE,EAAMqiB,EAAQ/nB,YAAY,GACzC,QACF,CACA0F,EAAK48H,KAAKu9H,EAAW,IAAIx2B,GAAQ,KAAM,KACvC,QACF,CACI3mO,EAAOunM,aAAavkM,EAAK6a,OAAOhoB,KAAM,QAAUmK,EAAOunM,aAAa,MAAOvkM,EAAKnN,MAClFmN,EAAK48H,KAAKu9H,EAAW,IAAIx2B,GAAQ,MAAO,KAExCo4B,EAA0B/7P,EAE9B,CAzDA,CA0DF,CACF,CA4UMo8P,CAAmB7B,IAKnBE,IAAoC,SAAlBvhL,EAASrmF,MAAmB+a,EAAK+wO,gBApPnC,WAClB,IAAI3+O,EAAOk5E,EAAS5+E,WAAY+hQ,EAAgB,KAC5C3gQ,EAAO,SAAUwuN,GACfA,KACFlqN,EAAOkqN,EAAU5vN,aACS,IAAd0F,EAAK3N,OACf2N,EAAK1N,MAAQ0N,EAAK1N,MAAMqK,QAAQi+P,EAAuB,MAEzD56P,EAAOkqN,EAAU55B,YACS,IAAdtwL,EAAK3N,OACf2N,EAAK1N,MAAQ0N,EAAK1N,MAAMqK,QAAQk+P,EAAqB,KAG3D,EACA,GAAK79P,EAAOunM,aAAarrH,EAASrmF,KAAM4nQ,EAAc7gQ,eAAtD,CAGA,KAAOoG,GAAM,CACX,IAAIvF,EAAOuF,EAAKvF,KACE,IAAduF,EAAK3N,MAA4B,IAAd2N,EAAK3N,MAA4B,MAAd2N,EAAKnN,OAAiB0mQ,EAAcv5P,EAAKnN,QAAUmN,EAAKg+B,KAAK,kBAChGq+N,KACHA,EAAgBpB,EAAWR,EAAe,IAC5Bz8N,KAAKp+B,EAASslP,yBAC5BhsK,EAAS9S,OAAOi2L,EAAer8P,IAG/Bq8P,EAAcp1L,OAAOjnE,KAGvBtE,EAAK2gQ,GACLA,EAAgB,MAElBr8P,EAAOvF,CACT,CACAiB,EAAK2gQ,EAlBL,CAmBF,CAkNEC,IAEG1uP,EAAK87I,QAAS,CACjB,IAAK72J,KAAQmnQ,EACX,GAAK3oP,GAAM2oP,EAAcnnQ,GAAzB,CAMA,IAHAmF,EAAOgmP,EAAYnrP,GAEnBwnQ,GADA9nE,EAAQynE,EAAannQ,IACV0D,OACJ8jQ,KACA9nE,EAAM8nE,GAAIx/O,QACb03K,EAAM9iG,OAAO4qK,EAAI,GAGrB,IAAKhkQ,EAAI,EAAG0Y,EAAI/W,EAAKzB,OAAQF,EAAI0Y,EAAG1Y,IAClC2B,EAAK3B,GAAGk8L,EAAO1/L,EAAM+a,EAVvB,CAaF,IAAKvX,EAAI,EAAG0Y,EAAIkvO,EAAiB1nP,OAAQF,EAAI0Y,EAAG1Y,IAE9C,IADA2B,EAAOimP,EAAiB5nP,IACfxD,QAAQonQ,EAAmB,CAGlC,IADAI,GADA9nE,EAAQ0nE,EAAkBjiQ,EAAKnF,OACpB0D,OACJ8jQ,KACA9nE,EAAM8nE,GAAIx/O,QACb03K,EAAM9iG,OAAO4qK,EAAI,GAGrB,IAAKA,EAAK,EAAGC,EAAKtiQ,EAAKwrG,UAAUjtG,OAAQ8jQ,EAAKC,EAAID,IAChDriQ,EAAKwrG,UAAU62J,GAAI9nE,EAAOv6L,EAAKnF,KAAM+a,EAEzC,CAEJ,CACA,OAAOsrE,CACT,GAYA,OA/oBe,SAAU0iK,EAAQh8O,GACjC,IAAI5C,EAAS4+O,EAAO5+O,OAChB4C,EAAS28P,qBACX3gB,EAAO3kB,cAAc,MAAM,SAAU1kC,EAAOrtL,EAAG0I,GAC7C,IAAIvX,EAEA2J,EAGA6a,EAAQu5L,EAAY/7D,EAAMmkH,EAE1B1zB,EAAave,EANbx7M,EAAIwjL,EAAMh8L,OAEVgjQ,EAAgBtnQ,GAAM88L,OAAO,CAAC,EAAG/xL,EAAO+mM,oBACxCi2C,EAAmBh9O,EAAOknM,sBAE1By2D,EAAqB39P,EAAOonM,wBAGhC,IADAm1D,EAAc/xP,KAAO,EAChBnR,EAAI,EAAGA,EAAI0Y,EAAG1Y,IAGjB,GADAwkB,GADA7a,EAAOuyL,EAAMl8L,IACCwkB,OACV0+O,EAAcv5P,EAAK6a,OAAOhoB,OAASmN,IAAS6a,EAAOy1K,UAAW,CAEhE,IADAj4C,EAAOr4I,EAAKq4I,KACLA,GAAM,CAEX,GAAiB,UADjBmkH,EAAWnkH,EAAKxlJ,OAC0C,aAA/BwlJ,EAAKr6G,KAAK,iBAAiC,CACnD,OAAbw+N,IACFx8P,EAAO,MAET,KACF,CACAq4I,EAAOA,EAAKA,IACd,CACIr4I,IACFA,EAAKqB,SACD+5M,GAAQp+M,EAAQg9O,EAAkB2gB,EAAoB9/O,KACxDiuN,EAAc9rO,EAAOulM,eAAe1nL,EAAOhoB,SAErCi2O,EAAY3nC,YACdtmL,EAAOxZ,SACEynO,EAAY5nC,WACrBo4D,GAAc15P,EAAUgO,EAAM2rP,EAAe1+O,IAKvD,KAAO,CAEL,IADAu5L,EAAap0M,EACN6a,GAAUA,EAAOvgB,aAAe85M,GAAcv5L,EAAOy1K,YAAc8jB,IACxEA,EAAav5L,GACT0+O,EAAc1+O,EAAOhoB,QAGzBgoB,EAASA,EAAOA,OAEdu5L,IAAev5L,IAA0C,IAAhCjb,EAAS45P,sBACpCjvC,EAAW,IAAIoZ,GAAQ,QAAS,IACvBrxO,MAAQslM,GACjB53L,EAAKrD,QAAQ4tN,GAEjB,CAEJ,IAEFqxB,EAAOwe,mBAAmB,QAAQ,SAAU7nE,GAC1C,IAO4Bx3L,EACtB2C,EARFrH,EAAIk8L,EAAMh8L,OAed,IAAKqJ,EAAS68P,yBACZ,KAAOpmQ,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACC,MAAd2J,EAAKnN,MAAwC,WAAxBmN,EAAKg+B,KAAK,WACjCh+B,EAAKg+B,KAAK,YAXVtgC,KADsB3C,EAYOiF,EAAKg+B,KAAK,QAXxB/rC,GAAMyJ,KAAKX,GAAO,GAChC,kBAAkBH,KAAK8C,GAGnBA,EAXK,SAAU3C,GAIxB,OAHYA,EAAII,MAAM,KAAKhG,QAAO,SAAU6D,GAC1C,OAAOA,EAAEzC,OAAS,CACpB,IACaiF,OAAO,CAAC,aAAaG,OAAOC,KAAK,IAChD,CAIW8gQ,CAAUh/P,IAWnB,CAEJ,IACKkC,EAAS+8P,4BACZ/gB,EAAOwe,mBAAmB,WAAW,SAAU7nE,GAE7C,IADA,IAAsBlwK,EAAS6tK,EAAar1K,EAAQ7a,EAAhD3J,EAAIk8L,EAAMh8L,OACPF,KAEL,GAAkB,OADlB2J,EAAOuyL,EAAMl8L,IACJxD,MAAgBmN,EAAK1F,aAAe0F,EAAKg+B,KAAK,QAAS,CAC9DnjB,EAAS7a,EAAK6a,OACdwH,EAAUriB,EAAKswL,UACf,GACEJ,EAAc7tK,EAAQg2H,KACtBx9H,EAAOurD,OAAO/jD,EAASriB,GACvBqiB,EAAU6tK,QACH7tK,EACX,CAEJ,IAEEziB,EAASg9P,mBACXhhB,EAAO3kB,cAAc,SAAS,SAAU1kC,GAEtC,IADA,IAAsBvyL,EAAMmB,EAAxB9K,EAAIk8L,EAAMh8L,OACPF,KAGL,GAAwB,QADxB8K,GADAnB,EAAOuyL,EAAMl8L,IACKwkB,QACHhoB,MAAqC,OAApBsO,EAAWtO,KACzC,GAAImN,EAAKq4I,MAA2B,OAAnBr4I,EAAKq4I,KAAKxlJ,KACzBmN,EAAKq4I,KAAKpxE,OAAOjnE,OACZ,CACL,IAAIgjM,EAAK,IAAI2gC,GAAQ,KAAM,GAC3B3gC,EAAGhlK,KAAK,QAAS,yBACjBh+B,EAAK48H,KAAKomE,EACZ,CAGN,IAEEpjM,EAASylG,UAAYroG,EAAO6mM,mBAC9B+3C,EAAOwe,mBAAmB,SAAS,SAAU7nE,GAG3C,IAFA,IAAIgN,EAAeviM,EAAO6mM,kBACtBxtM,EAAIk8L,EAAMh8L,OACPF,KAAK,CAIV,IAHA,IAAI2J,EAAOuyL,EAAMl8L,GACb6nC,EAAYl+B,EAAKg+B,KAAK,SAAS7iC,MAAM,KACrC0hQ,EAAa,GACRpzD,EAAK,EAAGA,EAAKvrK,EAAU3nC,OAAQkzM,IAAM,CAC5C,IAAIrsM,EAAY8gC,EAAUurK,GACtBlkG,GAAQ,EACRu3J,EAAkBv9D,EAAa,KAC/Bu9D,GAAmBA,EAAgB1/P,KACrCmoG,GAAQ,GAEVu3J,EAAkBv9D,EAAav/L,EAAKnN,OAC/B0yG,GAASu3J,GAAmBA,EAAgB1/P,KAC/CmoG,GAAQ,GAENA,IACEs3J,IACFA,GAAc,KAEhBA,GAAcz/P,EAElB,CACKy/P,EAAWtmQ,SACdsmQ,EAAa,MAEf78P,EAAKg+B,KAAK,QAAS6+N,EACrB,CACF,IAlL4B,SAAUjhB,EAAQh8O,GAChD,IAAI64P,EAAY74P,EAASm9P,WACrBC,EAAe,SAAU/7P,GAC3B,IAxpL2Bo6G,EACzB3jG,EAupLEulP,EAAWh8P,EAAI+8B,KAAK,QAlBA,SAAU/8B,GACpC,OAAOA,EAAI+8B,KAAK,SAAW6vJ,GAAII,gBAAkB3gL,EAAcrM,EAAI+8B,KAAK,wBAC1E,EAiBQk/N,CAAsBj8P,IAtBX,SAAUA,GAC3B,OAAOqM,EAAcrM,EAAI+8B,KAAK,kBAChC,CAoBsCm/N,CAAal8P,KAzpLpBo6G,EA4pLZ4hJ,EA3pLbvlP,EAAU,0CAA0Ci2E,KAAK0tB,GACzD3jG,EACK9hB,EAASN,KAAK,CACnBjD,KAAMqlB,EAAQ,GACdna,KAAM8nO,mBAAmB3tN,EAAQ,MAG5B9hB,EAAShC,QAopLSuB,QAAO,WAC9B,OApBe,SAAU8L,EAAKrB,GAClC,GAAIA,EAASw9P,sBAAuB,CAClC,IAAIC,EAAY,IAAIx/I,MAKpB,OAJAw/I,EAAUjyK,IAAMnqF,EAAI+8B,KAAK,OACzBuuJ,GAAOtrL,EAAIw6B,WAAW3mC,KAAK,SAAUxC,EAAOgH,GAC1C+jQ,EAAUhhP,aAAa/iB,EAAKhH,EAC9B,IACOsN,EAASw9P,sBAAsBC,EACxC,CACE,OAAO,CAEX,CASaC,CAAer8P,EAAKrB,EAC7B,IAAG5K,MAAK,SAAU4S,GAChB,IAAIvV,EAAOuV,EAAGvV,KAAMkL,EAAOqK,EAAGrK,KAC9B,OAAO3H,EAASC,KAAK4iQ,EAAUS,UAAU37P,EAAMlL,IAAOwC,SAAQ,WAC5D,OAAOkjQ,GAAU1lQ,EAAMkL,GAAMzI,KAAI,SAAUwqC,GACzC,IAAI05N,EAAWP,EAAUl3P,OAAOi5M,KAAYl7K,EAAM/hC,GAElD,OADAk7P,EAAU9mQ,IAAIqnQ,GACPA,CACT,GACF,GACF,IAAGjkQ,MAAK,SAAUikQ,GAChB/3P,EAAI+8B,KAAK,MAAOg7N,EAASuE,UAC3B,GACF,EACI9E,GACF7c,EAAOwe,mBAAmB,OAAO,SAAU7nE,GACzC,OAAOrG,EAAOqG,EAAOyqE,EACvB,GAEJ,CAyJEQ,CAA0B5hB,EAAQh8O,EACpC,CAofEihK,CAAW5/D,EAASrhG,GAx5BL,SAAU03P,EAAW13P,GAChCA,EAAS69P,eACXpG,GAAWC,EAAW13P,EAE1B,CAq5BE2/J,CAAWt+D,EAASrhG,GACbqhG,CACT,EAwLIy8J,GAAc,SAAUC,EAAYzyB,EAAWr4O,IACT,IAApCZ,GAAMqJ,QAAQ4vO,EAAWr4O,KAC3B8qQ,EAAWvD,mBAAmBvnQ,GAAM,SAAU0/L,EAAO1/L,GAEnD,IADA,IAAIwD,EAAIk8L,EAAMh8L,OACPF,KACLk8L,EAAMl8L,GAAG2nC,KAAKnrC,EAAM,KAExB,IACAq4O,EAAUj1O,KAAKpD,GAEnB,EA2BI+qQ,GAAoB,SAAUh+P,EAAUzI,GAC1C,IAAI+zO,EAAY,CAAC,qBACbhvO,EAAM/E,GAAUA,EAAO+E,IAAM/E,EAAO+E,IAAM+6M,GAASnzH,IACnD9mF,EAAS7F,GAAUA,EAAO6F,OAAS7F,EAAO6F,OAAS6gM,GAAOj+L,GAC9DA,EAASysO,gBAAkBzsO,EAASysO,iBAAmB,QACvDzsO,EAAS28P,sBAAsB,wBAAyB38P,IAAWA,EAAS28P,oBAC5E,IAAIoB,EAAa5D,GAAUn6P,EAAU5C,GAYrC,OA7Oa,SAAU2gQ,EAAY/9P,EAAU1D,GAC7CyhQ,EAAWvD,mBAAmB,qBAAqB,SAAU7nE,EAAO1/L,GAElE,IADA,IAAIwD,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACjB2J,EAAKg+B,KAAK,WAAYh+B,EAAKg+B,KAAK,sBAChCh+B,EAAKg+B,KAAKnrC,EAAM,KAClB,CACF,IACA8qQ,EAAWvD,mBAAmB,kBAAkB,SAAU7nE,EAAO1/L,GAK/D,IAJA,IAAIgrQ,EAAe,YAAchrQ,EAC7BqyM,EAAetlM,EAASulM,cACxBC,EAAoBxlM,EAASylM,oBAC7BhvM,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACb/D,EAAQ0N,EAAKg+B,KAAK6/N,QACRlpQ,IAAVrC,GACF0N,EAAKg+B,KAAKnrC,EAAMP,EAAMiE,OAAS,EAAIjE,EAAQ,MAC3C0N,EAAKg+B,KAAK6/N,EAAc,QAExBvrQ,EAAQ0N,EAAKg+B,KAAKnrC,GACL,UAATA,EACFP,EAAQ4J,EAAIi+M,eAAej+M,EAAIyuI,WAAWr4I,GAAQ0N,EAAKnN,MAC9CqyM,IACT5yM,EAAQ4yM,EAAarzM,KAAKuzM,EAAmB9yM,EAAOO,EAAMmN,EAAKnN,OAEjEmN,EAAKg+B,KAAKnrC,EAAMP,EAAMiE,OAAS,EAAIjE,EAAQ,MAE/C,CACF,IACAqrQ,EAAWvD,mBAAmB,SAAS,SAAU7nE,GAE/C,IADA,IAAIl8L,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACb/D,EAAQ0N,EAAKg+B,KAAK,SAClB1rC,IACFA,EAAQ0N,EAAKg+B,KAAK,SAASrhC,QAAQ,8BAA+B,IAClEqD,EAAKg+B,KAAK,QAAS1rC,EAAMiE,OAAS,EAAIjE,EAAQ,MAElD,CACF,IACAqrQ,EAAWvD,mBAAmB,iBAAiB,SAAU7nE,EAAO1/L,EAAM+a,GAEpE,IADA,IAAIvX,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACjB,GAAmC,aAA/B2J,EAAKg+B,KAAK,mBAAoCpwB,EAAK6uM,QAAS,CAC9D,IAAIqhD,EAAcloQ,EAASC,KAAKmK,EAAK1F,YAAYrF,QAAO,SAAUqF,GAChE,OAAQw9L,GAAOx9L,EAAWhI,MAC5B,IACIwrQ,EACF99P,EAAK8iB,SAEL9iB,EAAKqB,QAET,CACF,CACF,IACAs8P,EAAW1mC,cAAc,YAAY,SAAU1kC,GAE7C,IADA,IAAIl8L,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GAAGiE,WAChB0F,IACFA,EAAK1N,MAAQiqM,GAASM,OAAO78L,EAAK1N,OAEtC,CACF,IACAqrQ,EAAW1mC,cAAc,gBAAgB,SAAU1kC,EAAO1/L,GAKxD,IAJA,IAAI6I,EAAO,SAAUpJ,GACnB,OAAOA,EAAMqK,QAAQ,2BAA4B,MAAMA,QAAQ,qBAAsB,IAAIA,QAAQ,0HAA2H,IAAIA,QAAQ,4GAA6G,GACvV,EACItG,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACb/D,EAAQ0N,EAAK1F,WAAa0F,EAAK1F,WAAWhI,MAAQ,GACtD,GAAa,WAATO,EAAmB,CACrB,IAAIR,EAAO2N,EAAKg+B,KAAK,QACjB3rC,GACF2N,EAAKg+B,KAAK,OAAiB,gBAAT3rC,EAAyB,KAAOA,EAAKsK,QAAQ,SAAU,KAE3C,UAA5BiD,EAAS2sO,gBAA8Bj6O,EAAMiE,OAAS,IACxDyJ,EAAK1F,WAAWhI,MAAQ,iBAAmBoJ,EAAKpJ,GAAS,WAE7D,KACkC,UAA5BsN,EAAS2sO,gBAA8Bj6O,EAAMiE,OAAS,IACxDyJ,EAAK1F,WAAWhI,MAAQ,YAAWoJ,EAAKpJ,GAAS,WAGvD,CACF,IACAqrQ,EAAW1mC,cAAc,YAAY,SAAU1kC,GAE7C,IADA,IAAIl8L,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACbuJ,EAAS+qO,gBAAoD,IAAlC3qO,EAAK1N,MAAMyD,QAAQ,YAChDiK,EAAKnN,KAAO,SACZmN,EAAK3N,KAAO,EACZ2N,EAAK1N,MAAQ4J,EAAI2gM,OAAO78L,EAAK1N,MAAMqK,QAAQ,oBAAqB,MACd,IAAzCqD,EAAK1N,MAAMyD,QAAQ,oBAC5BiK,EAAKnN,KAAO,QACZmN,EAAK3N,KAAO,EACZ2N,EAAK2d,KAAM,EACX3d,EAAK1N,MAAQizO,SAASvlO,EAAK1N,OAAOuf,OAAO,IAE7C,CACF,IACA8rP,EAAW1mC,cAAc,uBAAuB,SAAU1kC,EAAO1/L,GAE/D,IADA,IAAIwD,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACC,IAAd2J,EAAK3N,KACP2N,EAAKqB,SACkB,IAAdrB,EAAK3N,OACD,UAATQ,GAAqBmN,EAAKg+B,KAAK,SACjCh+B,EAAKg+B,KAAK,OAAQ,QAGxB,CACF,IACA2/N,EAAWvD,mBAAmB,iBAAiB,SAAU7nE,GACvDrG,EAAOqG,GAAO,SAAUvyL,GACa,iBAA/BA,EAAKg+B,KAAK,mBACRh+B,EAAKo7M,QAAQuiD,EAAW3gQ,OAAOknM,uBACjClkM,EAAKqB,SAELrB,EAAK8iB,SAGX,GACF,IACA66O,EAAWvD,mBAAmB,mIAA6I,SAAU7nE,EAAO1/L,GAE1L,IADA,IAAIwD,EAAIk8L,EAAMh8L,OACPF,KACLk8L,EAAMl8L,GAAG2nC,KAAKnrC,EAAM,KAExB,GACF,CA0FEia,CAAS6wP,EAAY/9P,EAAU1D,GAWxB,CACLc,OAAQA,EACRi6N,cAAe0mC,EAAW1mC,cAC1BmjC,mBAAoBuD,EAAWvD,mBAC/Bh0D,UAdc,SAAUpmM,EAAMo8O,QACX,IAAfA,IACFA,EAAa,CAAC,GAEhB,IAAIxuO,EAAOhV,GAAS,CAAE8D,OAAQ,QAAU0/O,GACpCjqF,EAtDM,SAAUh7J,EAAQ6I,EAAM4N,GACpC,OAJoB,SAAUzW,EAAQyW,GACtC,OAAOzW,GAAUA,EAAO4mQ,kBAAkB,gBAAkBnwP,EAAKmwO,SACnE,CAESigB,CAAgB7mQ,EAAQyW,GA5BhB,SAAUzW,EAAQ6I,EAAM4N,GACvC,IAAIqwP,EACA/hQ,EAAM/E,EAAO+E,IACbgiQ,EAAal+P,EAAKu3B,WAAU,GAC5B4mO,EAAO11P,SAASw+N,eACpB,GAAIk3B,EAAKj3B,mBAAoB,CAC3B,IAAIk3B,EAAQD,EAAKj3B,mBAAmB,IACpCj1O,GAAM8C,KAA6B,SAAxBmpQ,EAAWvkQ,SAAsBukQ,EAAWprP,WAAa,CAACorP,IAAa,SAAUl+P,GAC1Fo+P,EAAM52P,KAAKhG,YAAY48P,EAAM3V,WAAWzoP,GAAM,GAChD,IAEEk+P,EAD0B,SAAxBA,EAAWvkQ,SACAykQ,EAAM52P,KAAKlN,WAEX8jQ,EAAM52P,KAErBy2P,EAAS/hQ,EAAIigB,IACbjgB,EAAIigB,IAAMiiP,CACZ,CAKA,OAt5QmB,SAAUjnQ,EAAQyW,GAC9BzW,EAAOyV,KAAK,aAAcgB,EACnC,CAg5QEywP,CAAelnQ,EAAQyB,GAASA,GAAS,CAAC,EAAGgV,GAAO,CAAE5N,KAAMk+P,KACxDD,IACF/hQ,EAAIigB,IAAM8hP,GAELC,CACT,CAKyCI,CAAWnnQ,EAAQ6I,EAAM4N,GAAQ5N,CAC1E,CAoDqB+nB,CAAQ5wB,EAAQ6I,EAAM4N,GACnC6E,EAhCc,SAAUvW,EAAK8D,EAAM4N,GACzC,IAAI6E,EAAOslL,GAAOnqL,EAAK+/O,SAAW3tP,EAAK4S,UAAY1W,EAAIu+M,aAAaz6M,IACpE,OAAO4N,EAAK7R,WAAa47L,GAAoBnlL,GAAqBxS,IAASyS,EAAOxgB,GAAMyJ,KAAK+W,EAC/F,CA6Be8rP,CAAgBriQ,EAAKi2J,EAAYvkJ,GACxCsrE,EA7BQ,SAAUykL,EAAYlrP,EAAM7E,GAC1C,IAAIwuO,EAAaxuO,EAAK7R,UAAYnD,GAAS,CAAEiwP,mBAAmB,GAASj7O,GAAQA,EAC7EsrE,EAAWykL,EAAW74P,MAAM2N,EAAM2pO,GAEtC,OAxEmB,SAAUljK,GAC7B,IAAIo2J,EAAO,SAAUtvO,GACnB,OAAOA,GAAsB,OAAdA,EAAKnN,IACtB,EACI2rQ,EAAUtlL,EAASo3G,UACvB,GAAIg/C,EAAKkvB,GAAU,CACjB,IAAIC,EAAUD,EAAQnmH,KAClBi3F,EAAKmvB,KACPD,EAAQn9P,SACRo9P,EAAQp9P,SAEZ,CACF,CA2DEq9P,CAAexlL,GACRA,CACT,CAwBmBylL,CAAUhB,EAAYlrP,EAAM7E,GAC3C,MAAuB,SAAhBA,EAAKlR,OAAoBw8E,EApBvB,SAAU/hF,EAAQyI,EAAU5C,EAAQk8E,EAAUtrE,GACzD,IAAImpB,EALc,SAAUn3B,EAAU5C,EAAQgD,GAE9C,OADqBwsO,GAAe5sO,EAAU5C,GACxBopM,UAAUpmM,EAClC,CAEgB4+P,CAAch/P,EAAU5C,EAAQk8E,GAC9C,OAxBgB,SAAU/hF,EAAQyW,EAAMmpB,GACxC,IAAKnpB,EAAKmwO,WAAa5mP,EAAQ,CAC7B,IAAI0nQ,EAz6Qc,SAAU1nQ,EAAQyW,GACtC,OAAOzW,EAAOyV,KAAK,cAAegB,EACpC,CAu6QkBkxP,CAAgB3nQ,EAAQyB,GAASA,GAAS,CAAC,EAAGgV,GAAO,CAAEmpB,QAASA,KAC9E,OAAO8nO,EAAQ9nO,OACjB,CACE,OAAOA,CAEX,CAiBSgoO,CAAY5nQ,EAAQyW,EAAMmpB,EACnC,CAiB+CioO,CAAO7nQ,EAAQyI,EAAU5C,EAAQk8E,EAAUtrE,EACxF,EAMEqxP,SAAUjiQ,EAAOojM,iBACjB8+D,SAAUliQ,EAAO2kM,iBACjB+7D,YAAa1vP,EAAM0vP,GAAaC,EAAYzyB,GAC5CG,aAAc93O,EAAS23O,GACvBgT,eAAgByf,EAAWzf,eAC3BC,oBAAqBwf,EAAWxf,oBAEpC,EAEIghB,GAAgB,SAAUv/P,EAAUzI,GACtC,IAAIioQ,EAAgBxB,GAAkBh+P,EAAUzI,GAChD,MAAO,CACL6F,OAAQoiQ,EAAcpiQ,OACtBi6N,cAAemoC,EAAcnoC,cAC7BmjC,mBAAoBgF,EAAchF,mBAClCh0D,UAAWg5D,EAAch5D,UACzB64D,SAAUG,EAAcH,SACxBC,SAAUE,EAAcF,SACxBxB,YAAa0B,EAAc1B,YAC3BryB,aAAc+zB,EAAc/zB,aAC5B6S,eAAgBkhB,EAAclhB,eAC9BC,oBAAqBihB,EAAcjhB,oBAEvC,EAWIv1L,GAAa,SAAUzxD,EAAQ4/B,EAASnpB,GAI1C,YAHa,IAATA,IACFA,EAAO,CAAC,GAxsDO,SAAUzW,EAAQ4/B,EAASnpB,GAC5C,OAAO2lP,GAA2Bp8P,GAAQA,OAAOyxD,WAAW7xB,EAASnpB,EACvE,CAwsDSyxP,CAAaloQ,EAAQ4/B,EAASnpB,EACvC,EAEI0xP,GAAQroD,GAASnzH,IAIjBy7K,GAAc,SAAU/sQ,GAC1B,OAAOoD,EAASC,KAAKrD,GAAGuC,MAAK,SAAUvC,GACrC,OAAOA,EAAEmhD,SACX,GACF,EA2FIjsB,IArBsBL,GAJf,SAAUM,EAAK3T,GAExB,OADkB7G,EAASwa,IAAQxa,EAAS6G,GACvB0T,GAAUC,EAAK3T,GAAMA,CAC5C,EAES,WAEL,IADA,IAAIsT,EAAU,GACLzZ,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCyZ,EAAQzZ,GAAM9U,UAAU8U,GAE1B,GAAuB,IAAnByZ,EAAQ/wB,OACV,MAAM,IAAI/B,MAAM,4BAGlB,IADA,IAAI+yB,EAAM,CAAC,EACFC,EAAI,EAAGA,EAAIF,EAAQ/wB,OAAQixB,IAAK,CACvC,IAAIC,EAAYH,EAAQE,GACxB,IAAK,IAAIluB,KAAOmuB,EACVpW,GAAMoW,EAAWnuB,KACnBiuB,EAAIjuB,GAAO+tB,GAAOE,EAAIjuB,GAAMmuB,EAAUnuB,IAG5C,CACA,OAAOiuB,CACT,GAIEi4O,GAAqB,6rBAAwtBrkQ,MAAM,KACnvBskQ,GAAoB,8EAA8EtkQ,MAAM,KACxGukQ,GAAwB,iBAAiBvkQ,MAAM,KAC/CwkQ,GAAwB,SAAU//P,GACpC,IAAIggQ,EAAezzE,EAASqzE,IAAoB,SAAUK,GACxD,OAAOxuP,GAAMzR,EAAUigQ,EACzB,IACI7a,EAAkBplP,EAASipP,kBAI/B,OAHwB,IAApB7D,GAAiD,KAApBA,GAC/B4a,EAAa3pQ,KAAK,kCAEb0F,GAAKikQ,EACd,EACIE,GAAuB,SAAUlgQ,GACnC,IAAI0zP,EAAUrhQ,GAAMw7I,QAAQ7tI,EAAS0zP,QAAS,KAC1CxzP,EAAY,SAAUigQ,GACxB,OAAO1uP,GAAMiiP,EAASyM,EACxB,EACIC,EAAcrxP,GAAcA,GAAc,GAAIw9K,EAASszE,GAAmB3/P,IAAY,GAAO9K,EAAK0qQ,IAAuB,SAAUK,GACrI,OAAOjgQ,EAAUigQ,GAAU,CAACA,EAAS,wBAA0B,EACjE,KAAI,GACJ,OAAOpkQ,GAAKqkQ,EACd,EAsBIC,GAAkBhsP,KAASsE,WAC3BI,GAAUsnP,GAAgBtnP,UAC1BE,GAAUonP,GAAgBpnP,UAC1BD,GAAWqnP,GAAgBrnP,WAC3BsnP,GAAsB,CACxB,QACA,WACA,YAEEC,GAAuB,CACzBC,YAAY,EACZC,iBAAiB,EACjBlxF,QAAQ,GAENmxF,GAAmB,SAAUhN,GAC/B,IAAI0M,EAAcn0E,EAAUynE,GAAWA,EAAQ13P,KAAK,KAAO03P,EACvDiN,EAAiBt0E,EAAML,EAAWo0E,GAAeA,EAAY7kQ,MAAM,KAAO,GAAI+xL,IAClF,OAAOf,EAASo0E,GAAgB,SAAUzoQ,GACxC,OAAOA,EAAKvB,OAAS,CACvB,GACF,EAkBIiqQ,GAAa,SAAUC,EAAe5tQ,GACxC,OAAOwe,GAAMovP,EAAcj7F,WAAY3yK,EACzC,EAQIkyF,GAAiB,SAAUnlF,EAAU23M,GACvC,OAAOt0L,GAAMrjB,EAAU,gBAAgB/K,SAAQ,WAC7C,OAAOouB,GAAMrjB,EAAU,kBAAkB9K,KAAI,SAAUuG,GACrD,OAAe,IAARA,EAAgB,OAASA,CAClC,GACF,IAAGlH,MAAMojN,EACX,EA+BImpD,GAA2B,SAAUC,EAAgB9nP,GACvD,IAAI+nP,EAAwB,CAC1BzxF,QAAQ,EACR0xF,aAAc97K,GAAe47K,EAAgB,aAC7CG,gBAAgB,GAGlB,OAAOloQ,GAASA,GAASA,GAAS,CAAC,EAAGunQ,IAAuBS,GAAwB/nP,EAD1D,CAAEotI,SAAS,GACgF,CAAC,EACzH,EACI86G,GAAqB,SAAUC,EAAkBphQ,GACnD,IAAIqhQ,EAA6BrhQ,EAASshQ,iBAAmBthQ,EAASshQ,iBAAmB,CAAC,EAC1F,OAAIF,GAAoBA,EAAiBE,iBAChCjvQ,GAAM88L,OAAO,CAAC,EAAGiyE,EAAiBE,iBAAkBD,GAEpDA,CAEX,EAaIE,GAAiB,SAAUC,EAAgBX,EAAeY,EAAyBzhQ,GACrF,IAAI0hQ,EAAgBhB,GAAiBe,EAAwBE,gBACzDC,EAAiBlB,GAAiB1gQ,EAAS0zP,SAC3CmO,EAxEiB,SAAUhB,EAAe5tQ,GAC9C,OAAO2tQ,GAAWC,EAAe5tQ,GAAQ4tQ,EAAcj7F,WAAW3yK,GAAQ,CAAC,CAC7E,CAsEqB6uQ,CAAiBjB,EAAe,UAG/CkB,EAlBe,SAAUL,EAAehO,GAC5C,MAAO,GAAG93P,OAAO8kQ,GAAiBgB,IAAgB9lQ,OAAO8kQ,GAAiBhN,GAC5E,CAgBwBsO,CAAeN,EAfd,SAAUF,EAAgBX,EAAee,EAAgBK,GAChF,OAAIT,GAjEe,SAAUX,EAAe5tQ,EAAMivQ,GAClD,IAAIpkF,EAAU+iF,EAAcj7F,WAC5B,OAAOg7F,GAAWC,EAAe5tQ,IA+D6B,WA/DpB6qL,EAAQ7qL,GAAMivQ,KAC1D,CA8DwBC,CAAetB,EAAe,UApF7Ct0E,EAqF4B01E,EArFV7zP,EAAMg+K,EAAYk0E,KAsFhCkB,GAAkBZ,GAAWC,EAAe,UAC9CoB,EAEAL,CAEX,CAMwBQ,CAAmBZ,EAAgBX,EAAee,EADpDC,EAAanO,QAAUgN,GAAiBmB,EAAanO,SAAWkO,IAGpF,GAAI3zE,GAAIh2K,QAAQ5B,QAAU+1K,EAAW21E,EAAiB,OACpD,MAAM,IAAIntQ,MAAM,yCAElB,OAAOvC,GAAM88L,OAAOnvL,EAAU,CAAE0zP,QAASqO,EAAgB/lQ,KAAK,MAChE,EAIIqmQ,GAAkB,SAAUb,EAAgBvoP,EAASqpP,EAAiBb,EAAyBzhQ,GACjG,IAAIuiQ,EAAwBf,EAAiB,CAAE/nG,OAAQqnG,GAAyB9gQ,EAASy5J,QAAU,CAAC,EAAGxgJ,IAAa,CAAC,EACjH4nP,EA3GgB,SAAUtnQ,EAAMyG,GACpC,IA/4lBIrN,EACAmD,EA84lBAg0B,GA94lBAh0B,EAAI,CAAC,EACT4J,GA64lBsBM,GAAU,SAAUtN,EAAOgH,GAC/C,OAAO0yL,EAAW7yL,EAAMG,EAC1B,GA/4lB0BkzL,GAFtBj6L,EAAI,CAAC,GAE4Bi6L,GAAO92L,IACrC,CACLnD,EAAGA,EACHmD,EAAGA,IA64lBL,OAlCkB,SAAU8vK,EAAU5lK,GACtC,MAAO,CACL4lK,SAAUjyK,EAASiyK,GACnB5lK,SAAUrM,EAASqM,GAEvB,CA6BS6gQ,CAAc/2O,EAAOn3B,EAAGm3B,EAAOh0B,EACxC,CAsGsB0sQ,CAAgB,CAAC,UAAW16O,GAAUy6O,EAAuBviQ,IAC7EyiQ,EAAmBpwQ,GAAM88L,OAAOmzE,EAAiBb,EAAyBZ,EAAc7gQ,WAN7E,SAAUwhQ,EAAgBX,GACzC,OAAOW,GAAkBZ,GAAWC,EAAe,SACrD,CAI0G6B,CAAWlB,EAAgBX,GAtGpH,SAAUA,EAAe5tQ,EAAM88D,QAC7B,IAAbA,IACFA,EAAW,CAAC,GAEd,IAAI61G,EAAWi7F,EAAcj7F,WACzB+8F,EAAkBt/O,GAAMuiJ,EAiGkJ,UAjGlIrxK,MAAM,CAAC,GACnD,OAAOlC,GAAM88L,OAAO,CAAC,EAAGp/H,EAAU4yM,EACpC,CA+FsJC,CAAW/B,GAA2B,CAAC,EAAG,CAC5Lp7J,UAAU,EACV67J,iBAAkBH,GAAmBM,EAAyBZ,EAAc7gQ,cAE9E,OAAOuhQ,GAAeC,EAAgBX,EAAeY,EAAyBgB,EAChF,EASII,GAAc,SAAUxoQ,EAAW9C,EAAQtE,GAC7C,OAAO+C,EAASC,KAAKsB,EAAOyI,SAAS/M,IAAOsC,OAAO8E,EACrD,EAiEIvI,IAnBEq5D,GAAS,CAAC,EAaP,CACLp5D,IAbQ,SAAUG,EAAI4wQ,GACtB33M,GAAOj5D,GAAM4wQ,CACf,EAYEtkP,IAXQ,SAAUtsB,GAClB,OAAIi5D,GAAOj5D,GACFi5D,GAAOj5D,GAET,CAAEF,MAAO,CAAC,EACnB,EAOEwH,IANQ,SAAUtH,GAClB,OAAOuf,GAAM05C,GAAQj5D,EACvB,IASE6wQ,GAAU,SAAUC,EAAUlpQ,GAEhC,OADaA,EAAIwC,IACH0mQ,EAChB,EACIC,GAAsB,SAAUD,EAAUlpQ,GAC5C,OAAOwe,SAAS4mB,GAAMplC,EAAKkpQ,GAAW,GACxC,EACIE,GAAiB90P,EAAM20P,GAAS,eAChCI,GAAkB/0P,EAAM20P,GAAS,gBACjCK,GAAeh1P,EAAM60P,GAAqB,cAC1CI,GAAgBj1P,EAAM60P,GAAqB,eAoB3CK,GAAoB,SAAU/rQ,EAAQqqB,EAASC,GACjD,IAAI0hP,EAAU3wP,GAAqBrb,EAAOoJ,WACtC69I,EAAYjnJ,EAAOmuF,OAAS69K,EArtkBzB3wP,GAAqBiI,GAqtkB8B0oP,GArtkBLjnQ,IAAIye,iBAstkBrDyoP,EAdU,SAAU99K,EAAQ5rF,EAAK8nB,EAASC,GAC9C,IAAImhM,EATsB,SAAUlpN,GACpC,OAAOA,EAAIwC,IAAI6iB,uBACjB,CAOmBA,CAAsBrlB,GAKvC,MAAO,CACLlH,EAHMgvB,GAFK8jE,EAASs9H,EAAW7rN,KAAO2C,EAAIwC,IAAIikB,WAAa8iP,GAAcvpQ,GAAO,GAMhF6lB,EAHMkC,GAFK6jE,EAASs9H,EAAWvjM,IAAM3lB,EAAIwC,IAAIgkB,UAAY8iP,GAAatpQ,GAAO,GAOjF,CAIwBipK,CAAUxrK,EAAOmuF,OAAQ84D,EAAW58H,EAASC,GACnE,OApB+B,SAAU0hP,EAAS3hP,EAASC,GAC3D,IAAImC,EAAck/O,GAAeK,GAC7Bt/O,EAAek/O,GAAgBI,GACnC,OAAO3hP,GAAW,GAAKC,GAAW,GAAKD,GAAWoC,GAAenC,GAAWoC,CAC9E,CAgBSw/O,CAA2BjlH,EAAWglH,EAAgB5wQ,EAAG4wQ,EAAgB7jP,EAClF,EAqBI+jP,GAAsB,SAAUnsQ,GAClC,IAAIszL,EAAgB,GAChB84E,EAAoB,WACtB,IAdEC,EAcE1B,EAAQ3qQ,EAAO2qQ,MACnB,OAAOA,GAASA,EAAMp4E,2BAA6Bo4E,EAAMp4E,6BAZpD,CACLzhL,KAJEu7P,EAAgB,WAClB,MAAM,IAAIhvQ,MAAM,8DAClB,EAGE6R,MAAOm9P,EACPj0N,WAAYi0N,EACZ94E,QAAS84E,EASX,EACIC,EAAqB,WACvB,OAAO7tQ,EAASC,KAAK40L,EAAc,GACrC,EAIIl7I,EAAa,WACXk7I,EAAcl0L,OAAS,GACzBgtQ,IAAoBh0N,WAAWk7I,EAEnC,EAIIi5E,EAAoB,SAAU55E,GAChCuC,EAAY5B,GAAe,SAAUk5E,GACnC,OAAOA,IAAsB75E,CAC/B,IAAG/0L,MAAK,SAAUkmB,GAChBwvK,EAAch7F,OAAOx0E,EAAO,EAC9B,GACF,EACIhT,EAAO,SAAUD,EAAM47P,GAIzB,QAHkB,IAAdA,IACFA,GAAY,IAEVzsQ,EAAO49H,SAhDa,SAAU59H,GACpC,IAJ0B6I,EAK1B,OAL0BA,EAIP7I,EAAOmuF,OAASnuF,EAAOoJ,UAAYpJ,EAAOkxI,0BAHtDzyI,EAASC,KAAKmK,GAAMlL,IAAI0d,KAIE1d,IAAIknB,IAAQ7nB,OAAM,EACrD,CA6C2B0vQ,CAAsB1sQ,GAM7C,OAHIysQ,GACFzsQ,EAAOyV,KAAK,yBAA0B,CAAEk9K,aAAc9hL,IAEjDyM,EAAOg2K,GAAe,SAAUX,GACrC,OA7BoB32L,EA6BLowQ,IAAoB74E,QAAQZ,GA7BpBr2L,EA6BmCuU,IA5BrD7U,EAAEd,OAASoB,EAAEpB,MAAQc,EAAEgF,OAAS1E,EAAE0E,MAAShF,EAAE42L,aAAgB52L,EAAEkqI,SAAY5pI,EAAEs2L,aAAgBt2L,EAAE4pI,SAD1F,IAAUlqI,EAAGM,CA8BzB,IAAGW,YAAW,WACZ+C,EAAOknJ,cAAc30I,UAAUvS,GAC/B,IAAI2yL,EAAey5E,IAAoBt7P,KAAKD,GAAM,WAChD07P,EAAkB55E,GAClBv6I,IACAk0N,IAAqB3vQ,MAAK,WACxB,OAAOqD,EAAOkH,OAChB,IAAG,SAAUghB,GACX,OAAe7M,GAAqB6M,EAAImrK,SAx5PjCtuL,IAAImC,OAy5Pb,GACF,IAIA,OApCkB,SAAUyrL,GAC9BW,EAAcx0L,KAAK6zL,EACrB,CA+BIg6E,CAAgBh6E,GAChBv6I,IACAp4C,EAAOyV,KAAK,mBAAoB,CAAEk9K,aAAclxL,GAAS,CAAC,EAAGkxL,KACtDA,CACT,GACF,EAQIi6E,EAAmBxwQ,EAASk3L,GAuBhC,OAtBqB,SAAUtzL,GAC7BA,EAAOmS,GAAG,cAAc,WACtB,IAAI06P,EAxwVc,SAAU7sQ,GAChC,OAAOA,EAAOE,SAAS,kBACzB,CAswV2B4sQ,CAAkB9sQ,GACnC6sQ,GACF/7P,EAAK,CACH9P,KAAM6rQ,EACN3xQ,KAAM,UACNgrI,QAAS,IACR,GAEL9tF,GACF,IACAp4C,EAAOmS,GAAG,6CAA6C,WACrD4qL,GAAMh+I,sBAAsB3G,EAC9B,IACAp4C,EAAOmS,GAAG,UAAU,WAClB4iL,EAAOzB,EAAcz7K,SAAS,SAAU86K,GACtCy5E,IAAoBl9P,MAAMyjL,EAC5B,GACF,GACF,CACAo6E,CAAe/sQ,GACR,CACL8Q,KAAMA,EACN5B,MAhCU,WACVo9P,IAAqB1uQ,MAAK,SAAU+0L,GAClCy5E,IAAoBl9P,MAAMyjL,GAC1B45E,EAAkB55E,GAClBv6I,GACF,GACF,EA2BEw0N,iBAAkBA,EAEtB,EAEIrkD,GAAgBvB,GAAauB,cAE7BC,GAAexB,GAAawB,aAiB5BwkD,GAAgB,SAAUhtQ,GAC5B,IAAIitQ,EAAU,GACVb,EAAoB,WACtB,IAjBEC,EAiBE1B,EAAQ3qQ,EAAO2qQ,MACnB,OAAOA,GAASA,EAAMr4E,qBAAuBq4E,EAAMr4E,uBAf9C,CACLxhL,KAJEu7P,EAAgB,WAClB,MAAM,IAAIhvQ,MAAM,wDAClB,EAGEsnL,QAAS0nF,EACT9wK,MAAO8wK,EACP78P,QAAS68P,EACTn9P,MAAOm9P,EACPa,UAAWb,EACXc,UAAWd,EASb,EACIe,EAAW,SAAU7xP,EAAOhd,GAC9B,OAAO,WAEL,IADA,IAAIkY,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAEvB,OAAOnY,EAAIA,EAAEc,MAAMkc,EAAO9E,QAAQjZ,CACpC,CACF,EAWIuyL,EAAc,SAAUl2F,IAPP,SAAUA,GAC7B75F,EAAOyV,KAAK,cAAe,CAAEokF,OAAQA,GACvC,CAMEwzK,CAAexzK,GAIQ,KAHvBozK,EAAUj4E,EAASi4E,GAAS,SAAUK,GACpC,OAAOA,IAAgBzzK,CACzB,KACYz6F,QACVY,EAAOkH,OAEX,EAIIqmQ,EAA8B,SAAUx7P,GAC1C/R,EAAOknJ,cAAc30I,UAAUvS,GAC/B8wD,GAAM9wD,GACN,IAAI65F,EAAS9nF,IAEb,OArBc,SAAU8nF,GACxBozK,EAAQnuQ,KAAK+6F,GAPK,SAAUA,GAC5B75F,EAAOyV,KAAK,aAAc,CAAEokF,OAAQA,GACtC,CAME2zK,CAAc3zK,EAChB,CAiBE4zK,CAAU5zK,GACHA,CACT,EA8BA,OALA75F,EAAOmS,GAAG,UAAU,WAClB4iL,EAAOk4E,GAAS,SAAUpzK,GACxBuyK,IAAoBl9P,MAAM2qF,EAC5B,GACF,IACO,CACL/oF,KA9BS,SAAU2F,EAAMwiB,GACzB,OAAOs0O,GAA4B,WACjC,OAAOnB,IAAoBt7P,KAAK2F,EAAMwiB,EAAQ82J,EAChD,GACF,EA2BEpL,QA1BY,SAAUluK,GACtB,OAAO82P,GAA4B,WACjC,OAAOnB,IAAoBznF,QAAQluK,EAAMs5K,EAC3C,GACF,EAuBEx0F,MAtBU,SAAUzvF,EAASyB,EAAUgO,GACvC,IAAImyP,EAAoBtB,IACxBsB,EAAkBnyK,MAAMzvF,EAASshQ,EAAS7xP,GAAgBmyP,EAAmBngQ,GAC/E,EAoBEiC,QAnBY,SAAU1D,EAASyB,EAAUgO,GACzC,IAAImyP,EAAoBtB,IACxBsB,EAAkBl+P,QAAQ1D,EAASshQ,EAAS7xP,GAAgBmyP,EAAmBngQ,GACjF,EAiBE2B,MAhBU,WA3BHzQ,EAASC,KAAKuuQ,EAAQA,EAAQ7tQ,OAAS,IA4B/BxB,MAAK,SAAUi8F,GAC5BuyK,IAAoBl9P,MAAM2qF,GAC1Bk2F,EAAYl2F,EACd,GACF,EAaF,EAEI8zK,GAAsB,SAAU3tQ,EAAQ8L,GAC1C9L,EAAO4tQ,oBAAoB98P,KAAK,CAC9B5V,KAAM,QACN8F,KAAM8K,GAEV,EACI+hQ,GAAe,SAAU7tQ,EAAQ8L,GAC/B9L,EAAOmwJ,YACTw9G,GAAoB3tQ,EAAQ8L,GAE5B9L,EAAOmS,GAAG,cAAc,WACtBw7P,GAAoB3tQ,EAAQ8L,EAC9B,GAEJ,EAOIgiQ,GAAW,SAAU9tQ,EAAQ0hO,EAAWtkO,GAC1CqkO,GAAUzhO,EAAQ0hO,EAAW,CAAE51N,QAAS1O,IACxCwe,QAAQ9N,MAAM1Q,EAChB,EACI2wQ,GAAkB,SAAU7yQ,EAAMsI,EAAK9H,GACzC,OAAOA,EAAO,kBAAoBR,EAAO,KAAOQ,EAAO,aAAe8H,EAAM,kBAAoBtI,EAAO,SAAWsI,CACpH,EACIwqQ,GAAkB,SAAUhuQ,EAAQwD,EAAK9H,GAC3CoyQ,GAAS9tQ,EAAQ,kBAAmB+tQ,GAAgB,SAAUvqQ,EAAK9H,GACrE,EAgBIuyQ,GAAY,SAAUniQ,GAExB,IADA,IAAIzQ,EAAI,GACCqb,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCrb,EAAEqb,EAAK,GAAK9U,UAAU8U,GAExB,IAAIkF,EAAUjK,OAAOiK,QACjBA,IACEA,EAAQ9N,MACV8N,EAAQ9N,MAAMzO,MAAMuc,EAASpE,GAAc,CAAC1L,GAAUzQ,GAAG,IAEzDugB,EAAQod,IAAI35B,MAAMuc,EAASpE,GAAc,CAAC1L,GAAUzQ,GAAG,IAG7D,EAWI6yQ,GAAkB,SAAUluQ,EAAQmuQ,GACtC,IAAIx9G,EAAU3wJ,EAAOknJ,cAAcgK,QAAU,iBAEzCk9G,EAAiB,UADRpuQ,EAAOknJ,cAAcpsI,OACQ,OACtCqzE,GAA2B,IAAlBnuF,EAAOmuF,OACpB,OAAO2mG,EAAMq5E,GAAU,SAAU3qQ,GAC/B,OAfuB,SAAUA,GACnC,MAAO,iBAAiBC,KAAKD,EAC/B,CAaQ6qQ,CAAqB7qQ,KAAS2qF,EACzBwiE,EAAU,IAAMntJ,EAAM,IAAM4qQ,EAE5BpuQ,EAAOixJ,gBAAgBpsG,WAAWrhD,EAE7C,GACF,EACI8qQ,GAA+B,SAAUtuQ,GAC3CA,EAAOoxJ,WAAapxJ,EAAOoxJ,WAAW/sJ,OApBhB,SAAUrE,GAChC,OAAOkuQ,GAAgBluQ,EAh/VL,SAAUA,GAC5B,IAAIuuQ,EAAavuQ,EAAOE,SAAS,eACjC,OAAIu0L,EAAW85E,GACNz5E,EAAMy5E,EAAWvqQ,MAAM,KAAM+xL,IAC3BrB,EAAU65E,GACZA,GACiB,IAAfA,GAAwBvuQ,EAAOmuF,OACjC,GAEA,CAAC,UAEZ,CAq+ViCqgL,CAAcxuQ,GAC/C,CAkB+CyuQ,CAAkBzuQ,GAjB5C,SAAUA,GAC7B,OAAOkuQ,GAAgBluQ,EAAQ4wN,GAAW5wN,GAC5C,CAe0E0uQ,CAAe1uQ,GACzF,EAEI2uQ,GAAe,WACjB,IACIC,EAAkB,CAAC,EACnBC,EAAe,SAAUz8L,EAAQ08L,GACnC,MAAO,CACL18L,OAAQA,EACR08L,UAAWA,EAEf,EACIC,EAAa,SAAU3I,GACzB,OAAOA,KAAWwI,CACpB,EAuBA,MAAO,CACLG,WAAYA,EACZC,aAxBiB,SAAU5I,GAC3B,IAAI7zO,EAASq8O,EAAgBxI,GAC7B,OAAO7zO,EAASA,EAAOu8O,UAAY,IACrC,EAsBEG,UArBc,SAAU7I,GACxB,QAAO2I,EAAW3I,IAhBN,IAgBiBwI,EAAgBxI,GAASh0L,MACxD,EAoBEsvL,WAnBe,SAAU0E,GACzB,QAAO2I,EAAW3I,IAnBQ,IAmBGwI,EAAgBxI,GAASh0L,MACxD,EAkBE88L,YAjBgB,SAAU9I,GAC1BwI,EAAgBxI,GAAWyI,EAtBf,EAsBqC,KACnD,EAgBEM,aAfiB,SAAU/I,EAAS0I,GACpCF,EAAgBxI,GAAWyI,EAzBD,EAyBwBC,EACpD,EAcEM,aAbiB,SAAUhJ,UACpBwI,EAAgBxI,EACzB,EAYE5pN,QAXY,WACZoyN,EAAkB,CAAC,CACrB,EAWF,EAEIj2O,GAAQ,EAQR02O,GAAO,SAAUruO,GACnB,OAAOA,EAASrI,MAPZ22O,EAAM,WACR,OAAO1iP,KAAK+wB,MAAsB,WAAhB/wB,KAAKyU,UAAuBnjC,SAAS,GACzD,EAEO,KADG,IAAIgjC,MAAOC,UACJjjC,SAAS,IAAMoxQ,IAAQA,IAAQA,KALvC,IACLA,CAQN,EAsGIC,GAAW,SAAUlO,EAAc54P,GACrC,IAAI+mQ,EAAkB,CAAC,EAOnBC,EAAiB,SAAU5N,EAAUp0P,EAASiwL,EAAS38G,GACzD,IAAI2uL,EAAM,IAAI1O,eACd0O,EAAI5+P,KAAK,OAAQrI,EAASjF,KAC1BksQ,EAAIC,gBAAkBlnQ,EAASmnQ,YAC/BF,EAAIG,OAAOC,WAAa,SAAU/8P,GAChCguE,EAAShuE,EAAE6zG,OAAS7zG,EAAEm1I,MAAQ,IAChC,EACAwnH,EAAI1xE,QAAU,WACZN,EAAQ,2DAA6DgyE,EAAIt9L,OAC3E,EACAs9L,EAAI3xE,OAAS,WACX,GAAI2xE,EAAIt9L,OAAS,KAAOs9L,EAAIt9L,QAAU,IACpCsrH,EAAQ,eAAiBgyE,EAAIt9L,YAD/B,CAIA,IArBqB29L,EAAOC,EAqBxBC,EAAOviQ,KAAKC,MAAM+hQ,EAAIQ,cACrBD,GAAiC,iBAAlBA,EAAKl9F,SAIzBtlK,GA1BqBsiQ,EA0BJtnQ,EAAS0nQ,SA1BEH,EA0BQC,EAAKl9F,SAzBvCg9F,EACKA,EAAMvqQ,QAAQ,MAAO,IAAM,IAAMwqQ,EAAMxqQ,QAAQ,MAAO,IAExDwqQ,IAmBHtyE,EAAQ,iBAAmBgyE,EAAIQ,aAHjC,CAOF,EACA,IAAI9nF,EAAW,IAAIgoF,SACnBhoF,EAASt4G,OAAO,OAAQ+xL,EAAS15N,OAAQ05N,EAASwO,YAClDX,EAAIliQ,KAAK46K,EACX,EAMIkoF,EAAiB,SAAUzO,EAAUr+P,GACvC,MAAO,CACLA,IAAKA,EACLq+P,SAAUA,EACVzvL,QAAQ,EAEZ,EACIm+L,EAAiB,SAAU1O,EAAU/1P,EAAS4zC,GAChD,MAAO,CACLl8C,IAAK,GACLq+P,SAAUA,EACVzvL,QAAQ,EACRtkE,MAAO,CACLhC,QAASA,EACT4zC,QAASA,GAGf,EACI8wN,EAAiB,SAAUpK,EAAS7zO,GACtCz3B,GAAM8C,KAAK4xQ,EAAgBpJ,IAAU,SAAUrrQ,GAC7CA,EAAQw3B,EACV,WACOi9O,EAAgBpJ,EACzB,EAkEA,OAHqC,IAAjClqQ,EAAWuM,EAAS+hB,WACtB/hB,EAAS+hB,QAAUilP,GAEd,CAAEI,OANI,SAAUY,EAAWC,GAChC,OAAQjoQ,EAASjF,KAAwBiF,EAAS+hB,UAlB/BilP,EASH,SAAUgB,EAAWC,GAIrC,OAHAD,EAAY31Q,GAAM4K,KAAK+qQ,GAAW,SAAU5O,GAC1C,OAAQR,EAAaK,WAAWG,EAASuE,UAC3C,IACO3pE,GAAWxlL,IAAInc,GAAM6C,IAAI8yQ,GAAW,SAAU5O,GACnD,OAAOR,EAAa4N,UAAUpN,EAASuE,WAZf,SAAUvE,GACpC,IAAIuE,EAAUvE,EAASuE,UACvB,OAAO,IAAI3pE,IAAW,SAAU1hM,GAC9By0Q,EAAgBpJ,GAAWoJ,EAAgBpJ,IAAY,GACvDoJ,EAAgBpJ,GAAStnQ,KAAK/D,EAChC,GACF,CAMwD41Q,CAAsB9O,GAxDzD,SAAUA,EAAUr3O,EAASkmP,GAEhD,OADArP,EAAa6N,YAAYrN,EAASuE,WAC3B,IAAI3pE,IAAW,SAAU1hM,GAC9B,IAAI43L,EACJ,IACE,IAAIi+E,EAAsB,WACpBj+E,GACFA,EAAazjL,OAGjB,EAyBAsb,EAAQq3O,GAxBM,SAAUr+P,GACtBotQ,IACAvP,EAAa8N,aAAatN,EAASuE,UAAW5iQ,GAC9CgtQ,EAAe3O,EAASuE,UAAWkK,EAAezO,EAAUr+P,IAC5DzI,EAAQu1Q,EAAezO,EAAUr+P,GACnC,IACc,SAAUsK,EAAO4xC,GAC7B,IAAImxN,EAAiBnxN,GAAoB,CAAC,EAC1CkxN,IACAvP,EAAa+N,aAAavN,EAASuE,WACnCoK,EAAe3O,EAASuE,UAAWmK,EAAe1O,EAAU/zP,EAAO+iQ,IACnE91Q,EAAQw1Q,EAAe1O,EAAU/zP,EAAO+iQ,GAC1C,IACW,SAAUjwL,GACfA,EAAU,GAAKA,EAAU,KAG7BniF,EAASC,KAAKi0L,GAAcj1L,SAAQ,WAClC,OAAOe,EAASC,KAAKgyQ,GAAkB/yQ,IAAI0B,EAC7C,IAAGzB,MAAK,SAAUhB,GAChB+1L,EAAe/1L,EACfA,EAAEg2L,YAAYz3L,MAAMylF,EACtB,GACF,GAIF,CAFE,MAAO4qB,GACPzwG,EAAQw1Q,EAAe1O,EAAUr2J,EAAG1/F,QAAS,CAAC,GAChD,CACF,GACF,CAgB0FglQ,CAAejP,EAAUp5P,EAAS+hB,QAASkmP,EACnI,IACF,CAE4EK,CAAYN,EAAWC,GAxF1F,IAAIj0E,IAAW,SAAU1hM,GAC9BA,EAAQ,GACV,GAuFF,EAKF,EAEI21Q,GAAmB,SAAU1wQ,GAC/B,OAAO,WACL,OAAOA,EAAO4tQ,oBAAoB98P,KAAK,CACrC9P,KAAMhB,EAAOmoB,UAAU,sBACvBjtB,KAAM,OACNgrI,SAAU,EACV0sD,aAAa,GAEjB,CACF,EACIo+E,GAAiB,SAAUhxQ,EAAQqhQ,GACrC,OAAOkO,GAASlO,EAAc,CAC5B79P,IAAK4sN,GAAkBpwN,GACvBmwQ,SAAU9/C,GAAuBrwN,GACjC4vQ,YAAat/C,GAA2BtwN,GACxCwqB,QAAS+lM,GAAuBvwN,IAEpC,EAmlBIixQ,GAASn2Q,GAAM8C,KACfmH,GAAM+6M,GAASnzH,IACfukL,GAAuB,SAAUC,EAAUnxQ,GAC7C,IAAIuC,EAAK5B,EAAMm/B,EACXj6B,EAAS7F,GAAUA,EAAO6F,QAAU6gM,GAAO,CAAC,GAO5Cn1L,EAAgB,SAAU6/P,GAC5BzwQ,EAAwB,iBAAVywQ,EAAqB,CACjC11Q,KAAM01Q,EACN5iQ,QAAS,GACTrE,MAAO,CAAC,GACNinQ,EACJ,IAAI7uQ,EAAMwC,GAAIqF,OAAOzJ,EAAKjF,MAE1B,OAda,SAAU6G,EAAK5B,GACxBA,EAAK6N,QAAQpP,QACf2F,GAAI45J,SAASp8J,EAAK5B,EAAK6N,QAAQ/J,KAAK,MAEtCM,GAAIoC,WAAW5E,EAAK5B,EAAKwJ,MAC3B,CAQE40N,CAASx8N,EAAK5B,GACP4B,CACT,EAWI8uQ,EAAa,SAAU9uQ,EAAK4uQ,EAAU/zC,GACxC,IAAI15M,EAAQ4tP,EACRllO,EAAW+kO,EAAS/xQ,OAAS,GAAK+xQ,EAAS,GAC3CI,EAAenlO,GAAYA,EAAS1wC,KACpC81Q,EAdkB,SAAUjvQ,EAAKob,GACrC,IAAIjiB,EAAsB,iBAAR6G,EAAmBA,EAAIC,SAASC,cAAgBF,EAC9DkvQ,EAAU5rQ,EAAOulM,eAAe1vM,GAChC4wM,EAAkBmlE,GAAWA,EAAQnlE,gBACzC,SAAIA,IAAmBA,EAAgBltM,UAC9Bue,IAA4D,IAA/C7iB,GAAMqJ,QAAQmoM,EAAiB3uL,GAAoBA,EAAY2uL,EAAgB,GAIvG,CAKuBolE,CAAkBnvQ,EAAKgvQ,GAC5C,GAAIC,EACED,IAAiBC,GACnBF,EAAkBH,EAAS,GAC3BA,EAAWA,EAASt5P,MAAM,IAE1By5P,EAAkBE,OAEf,GAAIplO,EACTklO,EAAkBH,EAAS,GAC3BA,EAAWA,EAASt5P,MAAM,QACrB,IAAKulN,EACV,OAAO76N,EAgBT,OAdI+uQ,IACF5tP,EAASnS,EAAc+/P,IAChBjnQ,YAAY9H,GAEjB66N,IACG15M,IACHA,EAAS3e,GAAIqF,OAAO,QACbC,YAAY9H,GAErBzH,GAAM8C,KAAKw/N,GAAU,SAAUlyM,GAC7B,IAAIymP,EAAapgQ,EAAc2Z,GAC/BxH,EAAOzZ,aAAa0nQ,EAAYpvQ,EAClC,KAEK8uQ,EAAW3tP,EAAQytP,EAAUG,GAAmBA,EAAgBl0C,SACzE,EACA,OAAI+zC,GAAYA,EAAS/xQ,QACvBuB,EAAOwwQ,EAAS,GAChB5uQ,EAAMgP,EAAc5Q,IACpBm/B,EAAW/6B,GAAIqF,OAAO,QACbC,YAAYgnQ,EAAW9uQ,EAAK4uQ,EAASt5P,MAAM,GAAIlX,EAAKy8N,WACtDt9L,GAEA,EAEX,EACI8xO,GAAoB,SAAUjxQ,GAChC,IAAI45L,EACAr4L,EAAM,CACRsM,QAAS,GACTrE,MAAO,CAAC,GA4BV,MAzBa,OADbxJ,EAAOuB,EAAIggB,SAAWpnB,GAAMyJ,KAAK5D,MAE/B45L,EAAU55L,EAAK6E,QAAQ,6CAA6C,SAAUqsQ,EAAIhrD,EAAIC,EAAIgrD,EAAIC,GAC5F,OAAQlrD,GACR,IAAK,IACH3kN,EAAIiI,MAAMxP,GAAKmsN,EACf,MACF,IAAK,IACH5kN,EAAIsM,QAAQ1P,KAAKgoN,GACjB,MACF,IAAK,KACkF,IAAjFhsN,GAAMqJ,QAAQ,8CAA8CH,MAAM,KAAM8iN,KAC1E5kN,EAAIiI,MAAM28M,GAAMA,GAIpB,GAAW,MAAPgrD,EAAY,CACd,IAAIx7K,EAAIy7K,EAAGnvP,MAAM,8BACb0zE,IACFp0F,EAAIiI,MAAMmsF,EAAE,IAAMA,EAAE,GAExB,CACA,MAAO,EACT,KAEFp0F,EAAIxG,KAAO6+L,GAAW,MACfr4L,CACT,EAgBIuxI,GAAa,SAAUzzI,EAAQuF,GACjC,IAAI7J,EAAMs2Q,EACWC,EAAjBC,EAAa,GACbC,EAp9XiB,SAAUnyQ,GAC/B,IAAIkb,EAAQlb,EAAOE,SAAS,iBAxKH,+IAyKzB,OAAIu0L,EAAWv5K,GACNA,EAEA,EAEX,CA68XsBk3P,CAAiBpyQ,GACrC,GAAsB,KAAlBmyQ,EACF,MAAO,GAET,IAAIE,EAAa,SAAUnuQ,GACzB,OAAOA,EAAIsB,QAAQ,UAAW,GAChC,EACA,GAAsB,iBAAXD,EAAqB,CAE9B,KADAA,EAASvF,EAAOqyI,UAAUprH,IAAI1hB,IAE5B,OAEFA,EAASA,EAAO,EAClB,CACA,GAAI,YAAaA,EAAQ,CACvB,IAAI+sQ,EAAaxmP,GAAMvmB,EAAQ,WAC/B,GAAI6U,GAAKk4P,GAAY,GACnB,MAAO,GAEPH,EAAgBG,EAAWt1Q,MAAMm1Q,EAErC,CACAz2Q,EAAO6J,EAAO65H,OAAS75H,EAAO4oF,QAAU,OACxC,IAzC4BjsE,EAyCxB9gB,GAzCwB8gB,EAyCF3c,EAAO2c,WAxCI,iBAAbA,GAIxBA,GADAA,EAAWA,EAASle,MAAM,WAAW,IACjBwB,QAAQ,sBAAuB,MAC5C1K,GAAM6C,IAAIukB,EAASle,MAAM,4BAA4B,SAAUrD,GACpE,IAAIy8N,EAAWtiO,GAAM6C,IAAIgD,EAAKqD,MAAM,gBAAiB4tQ,IACjD1vQ,EAAMk7N,EAAS5kI,MAInB,OAHI4kI,EAASh+N,SACX8C,EAAIk7N,SAAWA,GAEVl7N,CACT,IAAG+W,WAXM,GAwCL7X,EAAMhC,QACHgC,EAAM,GAAG1F,OACZ0F,EAAM,GAAG1F,KAAOA,GAElBA,EAAO6J,EAAO2c,SACd8vP,EAAcd,GAAqB9vQ,EAAOpB,IAE1CgyQ,EAAcd,GAAqB,CAACx1Q,GAAOsE,GAE7C,IAAIuyQ,EAAaxtQ,GAAIC,OAAOtJ,EAAMs2Q,GAAa,IAAMA,EAAY7uQ,WAwDjE,OAvDA8tQ,GAAO1rQ,EAAOg/B,QAAQ,SAAUppC,EAAOO,GACrC,IAAImiD,EAAWw0N,EAAWl3Q,GACtB0iD,GACF94C,GAAI09M,SAAS8vD,EAAY72Q,EAAMmiD,EAEnC,IACAozN,GAAO1rQ,EAAO++B,YAAY,SAAUnpC,EAAOO,GACzC,IAAImiD,EAAWw0N,EAAWl3Q,GACtB0iD,GACF94C,GAAIu7M,UAAUiyD,EAAY72Q,EAAMmiD,EAEpC,IACAozN,GAAO1rQ,EAAOiJ,SAAS,SAAUrT,GAC/B,IAAI0iD,EAAWw0N,EAAWl3Q,GACrB4J,GAAIi4M,SAASu1D,EAAY10N,IAC5B94C,GAAI45J,SAAS4zG,EAAY10N,EAE7B,IACA79C,EAAOyV,KAAK,kBACZ1Q,GAAI49M,UAAUqvD,EAAa,CACzB5jP,SAAU,WACVxuB,MAAO,QAETI,EAAOoJ,UAAUiB,YAAY2nQ,GAC7BC,EAAiBltQ,GAAI6nF,SAAS5sF,EAAOoJ,UAAW,YAAY,GAC5D6oQ,EAAiB,MAAMxuQ,KAAKwuQ,GAAkBlxP,SAASkxP,EAAgB,IAAM,EAC7EhB,GAAOkB,EAAcnuQ,MAAM,MAAM,SAAUtI,GACzC,IAAIP,EAAQ4J,GAAI6nF,SAAS2lL,EAAY72Q,GAAM,GAC3C,KAAa,qBAATA,GAA+B,oCAAoC+H,KAAKtI,KAC1EA,EAAQ4J,GAAI6nF,SAAS5sF,EAAOoJ,UAAW1N,GAAM,GACN,YAAnCqJ,GAAIiwF,MAAM75F,GAAOsH,gBAIV,UAAT/G,GACqC,YAAnCqJ,GAAIiwF,MAAM75F,GAAOsH,eADvB,CAKA,GAAa,cAAT/G,GACE,QAAQ+H,KAAKtI,GAAQ,CACvB,GAAuB,IAAnB82Q,EACF,OAGF92Q,EADe+rB,WAAW/rB,IAAU,KAAKsI,KAAKtI,GAAS,IAAM,GAC1C82Q,EAAiB,IACtC,CAEW,WAATv2Q,GAAqBP,IACvB+2Q,GAAc,kBAEhBA,GAAcx2Q,EAAO,IAAMP,EAAQ,GAbnC,CAcF,IACA6E,EAAOyV,KAAK,uBACZ1Q,GAAImF,OAAO8nQ,GACJE,CACT,EA8BIM,GAAY,SAAUxyQ,GACxB,IAAI6xI,EAhTe,SAAU7xI,GAC7B,IAAI6xI,EAAU,CAAC,EAOXl8H,EAAW,SAAUja,EAAM6J,GACzB7J,IACG+4L,EAAW/4L,IAKTg5L,EAAUnvL,KACbA,EAAS,CAACA,IAEZwvL,EAAOxvL,GAAQ,SAAUA,GACnB0Q,EAAY1Q,EAAO28M,QACrB38M,EAAO28M,MAAQnwE,GAAiBxsI,IAE9B0Q,EAAY1Q,EAAOvB,SACrBuB,EAAOvB,OAAS+tI,GAAiBxsI,IAAW61N,GAAe71N,IAEzD0Q,EAAY1Q,EAAO2E,SAAW6nI,GAAiBxsI,KAAY61N,GAAe71N,KAC5EA,EAAO2E,OAAS,QAEd6nI,GAAiBxsI,IAAW61N,GAAe71N,KAC7CA,EAAOmpP,OAAQ,EACfnpP,EAAOm3N,cAAe,GAEpBjoC,EAAWlvL,EAAOiJ,WACpBjJ,EAAOiJ,QAAUjJ,EAAOiJ,QAAQxK,MAAM,OAE1C,IACA6tI,EAAQn2I,GAAQ6J,GAzBhB6vL,GAAO15L,GAAM,SAAU6J,EAAQ7J,GAC7Bia,EAASja,EAAM6J,EACjB,IA0BN,EASA,OAFAoQ,EAnVQ,SAAU5Q,GAClB,IAAI8sI,EAAU,CACZ4gI,UAAW,CAAC,CACRvwP,SAAU,QACVqiB,OAAQ,CAAEmuO,cAAe,SAE7BC,aAAc,CAAC,CACXzwP,SAAU,QACVqiB,OAAQ,CAAEmuO,cAAe,YAE7BE,aAAc,CAAC,CACX1wP,SAAU,QACVqiB,OAAQ,CAAEmuO,cAAe,YAE7BG,UAAW,CACT,CACE3wP,SAAU,eACVnf,WAAW,EACXyL,QAAS,aACT0gP,iBAAiB,EACjBlxI,QAAS,yBAEX,CACE97F,SAAU,mDACVqiB,OAAQ,CAAEuuO,UAAW,QACrBjrB,SAAS,EACT7pI,SAAS,EACT2zI,aAAc,OAEhB,CACEzvO,SAAU,wBACVnf,WAAW,EACXwhC,OAAQ,CAAEi5K,MAAO,QACjBx/F,QAAS,0BAGb+0J,YAAa,CACX,CACE7wP,SAAU,mDACVqiB,OAAQ,CAAEuuO,UAAW,UACrBjrB,SAAS,EACT7pI,QAAS,wBACT2zI,aAAc,OAEhB,CACEzvO,SAAU,eACVnf,WAAW,EACXyL,QAAS,eACT0gP,iBAAiB,EACjBlxI,QAAS,yBAEX,CACE97F,SAAU,kBACVnf,WAAW,EACXwhC,OAAQ,CACNo9D,QAAS,QACTqxK,WAAY,OACZC,YAAa,QAEfj1J,SAAS,GAEX,CACE97F,SAAU,QACVnf,WAAW,EACXwhC,OAAQ,CACNyuO,WAAY,OACZC,YAAa,QAEfj1J,QAAS,0BAGbk1J,WAAY,CACV,CACEhxP,SAAU,eACVnf,WAAW,EACXyL,QAAS,cACT0gP,iBAAiB,EACjBlxI,QAAS,yBAEX,CACE97F,SAAU,mDACVqiB,OAAQ,CAAEuuO,UAAW,SACrBjrB,SAAS,EACT7pI,QAAS,wBACT2zI,aAAc,OAEhB,CACEzvO,SAAU,wBACVnf,WAAW,EACXwhC,OAAQ,CAAEi5K,MAAO,SACjBx/F,QAAS,0BAGbm1J,aAAc,CAAC,CACXjxP,SAAU,mDACVqiB,OAAQ,CAAEuuO,UAAW,WACrBjrB,SAAS,EACT8J,aAAc,MACd3zI,QAAS,0BAEbo1J,KAAM,CACJ,CACEjlL,OAAQ,SACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,UAGJ,CACEr/J,OAAQ,OACR5pD,OAAQ,CAAE8uO,WAAY,SAExB,CACEllL,OAAQ,IACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,WAIN8lB,OAAQ,CACN,CACEnlL,OAAQ,KACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,UAGJ,CACEr/J,OAAQ,OACR5pD,OAAQ,CAAEgvO,UAAW,WAEvB,CACEplL,OAAQ,IACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,WAINgmB,UAAW,CACT,CACErlL,OAAQ,OACR5pD,OAAQ,CAAEwqN,eAAgB,aAC1B9nM,OAAO,GAET,CACEknC,OAAQ,IACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,WAINimB,cAAe,CACb,CACEtlL,OAAQ,OACR5pD,OAAQ,CAAEwqN,eAAgB,gBAC1B9nM,OAAO,GAET,CACEknC,OAAQ,SACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,UAGJ,CACEr/J,OAAQ,IACRjkF,OAAQ,MACRsjP,oBAAqB,CACnB,QACA,WAINkmB,UAAW,CACTvlL,OAAQ,OACR5pD,OAAQ,CAAEqiD,MAAO,UACjBx4E,OAAO,EACPs/O,gBAAgB,EAChBiD,oBAAoB,GAEtBgjB,YAAa,CACXxlL,OAAQ,OACR5pD,OAAQ,CAAEysN,gBAAiB,UAC3B5iP,OAAO,EACPs/O,gBAAgB,EAChBiD,oBAAoB,GAEtBijB,SAAU,CACRzlL,OAAQ,OACRtc,QAAQ,EACRttC,OAAQ,CAAEuvH,WAAY,UACtB68F,oBAAoB,GAEtBkjB,SAAU,CACR1lL,OAAQ,OACRtc,QAAQ,EACRttC,OAAQ,CAAEowH,SAAU,UACpBg8F,oBAAoB,GAEtBmjB,WAAY,CACV5xP,SAAU,mCACVyvO,aAAc,IACdptN,OAAQ,CAAEwvO,WAAY,WAExBC,eAAgB,CACd7lL,OAAQ,OACR7pD,WAAY,CAAEz8B,MAAO,WAEvBosQ,WAAY,CACV70I,MAAO,aACPxzG,SAAS,EACT1hB,OAAQ,OAEVgqQ,UAAW,CAAE/lL,OAAQ,OACrBgmL,YAAa,CAAEhmL,OAAQ,OACvBs8E,KAAM,CAAEt8E,OAAQ,QAChB7lF,KAAM,CACJ6lF,OAAQ,IACRjsE,SAAU,IACVhY,OAAQ,MACRlG,OAAO,EACPk+M,MAAM,EACNimC,QAAS,SAAUt/O,EAAMurQ,EAAMC,GAC7B,OAAOt6E,GAAYlxL,IAASA,EAAK2c,aAAa,OAChD,EACAgqO,SAAU,SAAUjtP,EAAK6xQ,EAAMv5C,GAC7B//N,GAAM8C,KAAKi9N,GAAM,SAAU1/N,EAAOgH,GAChC4C,EAAIu7M,UAAU/9M,EAAKJ,EAAKhH,EAC1B,GACF,GAEFyvK,KAAM,CACJz8E,OAAQ,OACRwiK,oBAAoB,EACpBjD,gBAAgB,EAChBppN,WAAY,CACV,KAAQ,SACR,gBAAiB,SAAUu2L,GACzB,IAAIpqN,EACJ,OAA+E,QAAvEA,EAAKoqN,aAAmC,EAASA,EAAKnwD,mBAAgC,IAAPj6J,EAAgBA,EAAK,IAC9G,IAGJ6jQ,aAAc,CACZ,CACEpyP,SAAU,wFACVhY,OAAQ,MACRlG,OAAO,EACPmzE,QAAQ,EACRulJ,cAAc,EACdxa,MAAM,GAER,CACEhgM,SAAU,OACVoiB,WAAY,CACV,QACA,SAEFp6B,OAAQ,QACRlG,OAAO,EACPmzE,QAAQ,EACR+qI,MAAM,GAER,CACEhgM,SAAU,IACVoiB,WAAY,CACV,QACA,SAEFtgC,OAAO,EACPmzE,QAAQ,EACR+qI,MAAM,KAUZ,OANApnN,GAAM8C,KAAK,iDAAiDoG,MAAM,OAAO,SAAUtI,GACjFm2I,EAAQn2I,GAAQ,CACd0jI,MAAO1jI,EACPwO,OAAQ,MAEZ,IACO2nI,CACT,CAgDW5qH,CAAIjnB,EAAO+E,MACpB4Q,EA/0Xe,SAAU3V,GACzB,OAAOA,EAAOE,SAAS,UACzB,CA60XWq0Q,CAAWv0Q,IACb,CACLinB,IA/CU,SAAUvrB,GACpB,OAAOya,EAAcza,GAAQm2I,EAAQn2I,GAAQm2I,CAC/C,EA8CE5vI,IA7CQ,SAAUvG,GAClB,OAAOwe,GAAM23H,EAASn2I,EACxB,EA4CEia,SAAUA,EACVkwF,WAZe,SAAUnqG,GAIzB,OAHIA,GAAQm2I,EAAQn2I,WACXm2I,EAAQn2I,GAEVm2I,CACT,EASF,CA0PgB2iI,CAAex0Q,GACzBy0Q,EAAoBr8O,GAAK,MAG7B,OAjCY,SAAUp4B,GACtBA,EAAO4V,YAAY,SAAU,GAAI,QACjC5V,EAAO4V,YAAY,SAAU,GAAI,UACjC5V,EAAO4V,YAAY,SAAU,GAAI,aACjC,IAAK,IAAI1W,EAAI,EAAGA,GAAK,EAAGA,IACtBc,EAAO4V,YAAY,UAAY1W,EAAG,GAAI,CACpC,eACA,EACA,IAAMA,IAGVc,EAAO4V,YAAY,WAAY,GAAI,CACjC,eACA,EACA,MAEF5V,EAAO4V,YAAY,WAAY,GAAI,CACjC,eACA,EACA,QAEF5V,EAAO4V,YAAY,WAAY,GAAI,CACjC,eACA,EACA,WAEJ,CAKE8+P,CAAQ10Q,GA7hLI,SAAUA,GACtBA,EAAOmS,GAAG,mBAAmB,SAAUY,IAXb,SAAU/S,EAAQgV,GAC5C,IAAIpQ,EAAY5E,EAAO4E,UAAWyL,EAAOrQ,EAAOoJ,UAChDkgP,GAAqBtpP,EAAQ,MAAM,GAClB,IAAZgV,GAA6B,KAAZA,IAAmBpQ,EAAU2+I,eAAiB3+I,EAAUqM,WAAWwK,YAAcotO,IACrGS,GAAqBtpP,EAAQm4N,GAAwB9nN,EAAMzL,EAAUqM,aAEvD,KAAZ+D,GAA8B,KAAZA,GACpBs0O,GAAqBtpP,EAAQm4N,GAAwB9nN,EAAMzL,EAAUqM,YAEzE,CAGI0jQ,CAAsB30Q,EAAQ+S,EAAEiC,QAClC,GACF,CA0hLE4/P,CAAQ50Q,GACD,CACLinB,IAAK4qH,EAAQ5qH,IACbhlB,IAAK4vI,EAAQ5vI,IACb0T,SAAUk8H,EAAQl8H,SAClBkwF,WAAYgsC,EAAQhsC,WACpBxmG,MAAO,SAAU3D,EAAMm/N,EAAMhyN,IA3hHf,SAAU7I,EAAQtE,EAAMm/N,EAAMhyN,GAC9CyzP,GAAwBt8P,GAAQqyI,UAAUhzI,MAAM3D,EAAMm/N,EAAMhyN,EAC9D,CA0hHM8gK,CAAY3pK,EAAQtE,EAAMm/N,EAAMhyN,EAClC,EACAqB,OAAQ,SAAUxO,EAAMm/N,EAAMhyN,EAAMk/O,IA3hHrB,SAAU/nP,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,GACrDuU,GAAwBt8P,GAAQqyI,UAAUnoI,OAAOxO,EAAMm/N,EAAMhyN,EAAMk/O,EACrE,CA0hHMn+E,CAAa5pK,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,EACzC,EACAl2K,OAAQ,SAAUn2E,EAAMm/N,EAAMhyN,IA3hHf,SAAU7I,EAAQtE,EAAMm/N,EAAMhyN,GAC/CyzP,GAAwBt8P,GAAQqyI,UAAUxgE,OAAOn2E,EAAMm/N,EAAMhyN,EAC/D,CA0hHMgsQ,CAAa70Q,EAAQtE,EAAMm/N,EAAMhyN,EACnC,EACA+Z,MAAO,SAAUlnB,EAAMm/N,EAAMhyN,EAAMk/O,GACjC,OApjHY,SAAU/nP,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,GACpD,OAAOuU,GAAwBt8P,GAAQqyI,UAAUzvH,MAAMlnB,EAAMm/N,EAAMhyN,EAAMk/O,EAC3E,CAkjHa+sB,CAAY90Q,EAAQtE,EAAMm/N,EAAMhyN,EAAMk/O,EAC/C,EACA3lJ,QAAS,SAAUppC,GACjB,OA3iHc,SAAUh5D,EAAQg5D,GACpC,OAAOsjM,GAAwBt8P,GAAQqyI,UAAUjwC,QAAQppC,EAC3D,CAyiHa+7M,CAAc/0Q,EAAQg5D,EAC/B,EACA0hM,SAAU,SAAU1hM,EAAO6hK,GACzB,OAvjHgB,SAAU76N,EAAQg5D,EAAO6hK,GAC7C,OAAOyhC,GAAwBt8P,GAAQqyI,UAAUqoH,SAAS1hM,EAAO6hK,EACnE,CAqjHam6C,CAAgBh1Q,EAAQg5D,EAAO6hK,EACxC,EACAmtB,UAAW,SAAUn/O,EAAMnN,EAAMm/N,EAAMktB,GACrC,OAvjHgB,SAAU/nP,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,GACxD,OAAOuU,GAAwBt8P,GAAQqyI,UAAU21G,UAAUn/O,EAAMnN,EAAMm/N,EAAMktB,EAC/E,CAqjHaktB,CAAgBj1Q,EAAQ6I,EAAMnN,EAAMm/N,EAAMktB,EACnD,EACAp0F,SAAU,SAAUj4J,GAClB,OAvjHe,SAAUsE,EAAQtE,GACrC,OAAO4gQ,GAAwBt8P,GAAQqyI,UAAUshB,SAASj4J,EAC5D,CAqjHaw5Q,CAAel1Q,EAAQtE,EAChC,EACAi2J,cAAe,SAAU9f,EAAStkI,EAAUw6O,EAASltB,GACnD,OA3iHc,SAAU76N,EAAQ86P,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,GAC3F,OAAOyhC,GAAwBt8P,GAAQqyI,UAAUsf,cAAcmpG,EAA2BjpH,EAAStkI,EAAUw6O,EAASltB,EACxH,CAyiHalpE,CAAc3xJ,EAAQy0Q,EAAmB5iI,EAAStkI,EAAUw6O,EAASltB,EAC9E,EACApnF,WAAY58H,EAAM48H,GAAYzzI,GAElC,EAEIm1Q,GAAsB,SAAUnsG,GAClC,OAAQA,EAAIvmK,eACZ,IAAK,OACL,IAAK,OACL,IAAK,aACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEX,EAsGI2yQ,GAAc,SAAUp1Q,GAC1B,IAAIm4P,EAAiBh9P,KACjB49P,EAAQ3gO,GAAK,GACbtU,EAAQsU,GAAK,GACbrxB,EAAc,CAChBX,KAAM,GACN6yP,QAAQ,EACRG,aAAc,YAjuHC,SAAUp5P,EAAQ+4P,EAAOZ,GAC1CmE,GAAwBt8P,GAAQ+G,YAAYqyP,aAAaL,EAAOZ,EAClE,CAguHMiB,CAAap5P,EAAQ+4P,EAAOZ,EAC9B,EACA39P,IAAK,SAAU6mF,EAAO53D,GACpB,OAluHa,SAAUzpB,EAAQ+G,EAAa+c,EAAOi1O,EAAOZ,EAAgB92K,EAAO53D,GACrF,OAAO6yO,GAAwBt8P,GAAQ+G,YAAYvM,IAAIuM,EAAa+c,EAAOi1O,EAAOZ,EAAgB92K,EAAO53D,EAC3G,CAguHa4rP,CAAar1Q,EAAQ+G,EAAa+c,EAAOi1O,EAAOZ,EAAgB92K,EAAO53D,EAChF,EACAkqG,KAAM,WACJ,OAluHK,SAAU3zH,EAAQ+G,EAAagyP,EAAOj1O,GAC/C,OAAOw4O,GAAwBt8P,GAAQ+G,YAAY4sH,KAAK5sH,EAAagyP,EAAOj1O,EAC9E,CAguHa6vG,CAAK3zH,EAAQ+G,EAAagyP,EAAOj1O,EAC1C,EACA8vG,KAAM,WACJ,OAluHK,SAAU5zH,EAAQ8jB,EAAO1d,GAClC,OAAOk2P,GAAwBt8P,GAAQ+G,YAAY6sH,KAAK9vG,EAAO1d,EACjE,CAguHawtH,CAAK5zH,EAAQ8jB,EAAO/c,EAAYX,KACzC,EACAi2C,MAAO,YAjuHC,SAAUr8C,EAAQ+G,EAAa+c,GACzCw4O,GAAwBt8P,GAAQ+G,YAAYs1C,MAAMt1C,EAAa+c,EACjE,CAguHMu4B,CAAMr8C,EAAQ+G,EAAa+c,EAC7B,EACAuqC,MAAO,YAjuHC,SAAUruD,EAAQ+G,GAC5Bu1P,GAAwBt8P,GAAQ+G,YAAYsnD,MAAMtnD,EACpD,CAguHMsnD,CAAMruD,EAAQ+G,EAChB,EACAkzP,QAAS,WACP,OAluHQ,SAAUj6P,EAAQ+G,EAAa+c,GAC3C,OAAOw4O,GAAwBt8P,GAAQ+G,YAAYkzP,QAAQlzP,EAAa+c,EAC1E,CAguHam2O,CAAQj6P,EAAQ+G,EAAa+c,EACtC,EACAq2O,QAAS,WACP,OAluHQ,SAAUn6P,EAAQ+G,EAAa+c,GAC3C,OAAOw4O,GAAwBt8P,GAAQ+G,YAAYozP,QAAQpzP,EAAa+c,EAC1E,CAguHaq2O,CAAQn6P,EAAQ+G,EAAa+c,EACtC,EACA9c,SAAU,SAAUuG,GAClB,OAluHS,SAAUvN,EAAQ+G,EAAagyP,EAAOxrP,GACnD,OAAO+uP,GAAwBt8P,GAAQ+G,YAAYC,SAASD,EAAagyP,EAAOxrP,EAClF,CAguHavG,CAAShH,EAAQ+G,EAAagyP,EAAOxrP,EAC9C,EACAkjE,OAAQ,SAAUljE,IAjuHT,SAAUvN,EAAQ+4P,EAAOxrP,GACpC+uP,GAAwBt8P,GAAQ+G,YAAY0pE,OAAOsoL,EAAOxrP,EAC5D,CAguHMkjE,CAAOzwE,EAAQ+4P,EAAOxrP,EACxB,EACA8lB,MAAO,SAAUknO,EAAWC,IAjuHpB,SAAUx6P,EAAQ+G,EAAa+c,EAAOy2O,EAAWC,GAC3D8B,GAAwBt8P,GAAQ+G,YAAYssB,MAAMtsB,EAAa+c,EAAOy2O,EAAWC,EACnF,CAguHMnnO,CAAMrzB,EAAQ+G,EAAa+c,EAAOy2O,EAAWC,EAC/C,GAMF,OAJK0B,GAAMl8P,IA9IQ,SAAUA,EAAQ+G,EAAagyP,GAClD,IAAIuc,EAAwBl9O,IAAK,GAC7Bm9O,EAAwB,SAAUxiQ,GACpCimP,GAAUjyP,GAAa,EAAOgyP,GAC9BhyP,EAAYvM,IAAI,CAAC,EAAGuY,EACtB,EACA/S,EAAOmS,GAAG,QAAQ,WAChBpL,EAAYvM,KACd,IACAwF,EAAOmS,GAAG,qBAAqB,SAAUY,GACvC,IAAIi2J,EAAMj2J,EAAEo0I,QACPguH,GAAoBnsG,KACvBkwF,GAAUnyP,EAAagyP,GACvBhyP,EAAYqyP,eAEhB,IACAp5P,EAAOmS,GAAG,eAAe,SAAUY,GACjC,IAAIi2J,EAAMj2J,EAAEo0I,QACPguH,GAAoBnsG,IACvBusG,EAAsBxiQ,EAE1B,IACA/S,EAAOmS,GAAG,yBAAyB,WACjCpL,EAAYqyP,cACd,IACAp5P,EAAOmS,GAAG,iCAAkCojQ,GAC5Cv1Q,EAAOmS,GAAG,UAAWojQ,GACrBv1Q,EAAOmS,GAAG,SAAS,SAAUY,GAC3B,IAAIiC,EAAUjC,EAAEiC,QACZjC,EAAEgmK,wBAGF/jK,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAkB,KAAZA,GAAkBjC,EAAEoC,WAC1FogQ,IACAv1Q,EAAOu/J,eAEO,KAAZvqJ,GAA8B,IAAZA,GACpBhV,EAAOu/J,cAEL+1G,EAAsBruP,OAASlgB,EAAYkyP,SAAoE,IAA1DR,GAAOT,GAAiBh4P,GAAS+G,EAAYX,KAAK,OAChF,IAArBpG,EAAOw1Q,YACTx1Q,EAAO25P,UAAS,GAChB35P,EAAOyV,KAAK,SAAU,CACpB4rE,MAAOt6E,EAAYX,KAAK,GACxBmzP,UAAW,QAGfv5P,EAAOyV,KAAK,cACZ6/P,EAAsBhuP,KAAI,GAC1BtnB,EAAOu/J,eAEX,IACAv/J,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IAAIiC,EAAUjC,EAAEiC,QAChB,IAAIjC,EAAEgmK,qBAGN,GAAI/jK,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAMA,GAAW,IAAkB,KAAZA,EAClEjO,EAAYkyP,QACdsc,EAAsBxiQ,OAF1B,CAMA,IAAI0iQ,EAAS1iQ,EAAEoC,UAAYpC,EAAEkC,QAAUlC,EAAEqC,UACpCJ,EAAU,IAAMA,EAAU,KAAmB,MAAZA,GAA+B,KAAZA,GAAmBjO,EAAYkyP,QAAWwc,IACjG1uQ,EAAYqyP,eACZJ,GAAUjyP,GAAa,EAAMgyP,GAC7BhyP,EAAYvM,IAAI,CAAC,EAAGuY,GACpBuiQ,EAAsBhuP,KAAI,GAN5B,CAQF,IACAtnB,EAAOmS,GAAG,aAAa,SAAUY,GAC3BhM,EAAYkyP,QACdsc,EAAsBxiQ,EAE1B,IAUA/S,EAAOmS,GAAG,SAAS,SAAUY,GANF,IAAU0W,EAO/B1W,EAAE2iQ,YATqB,0BASiB3iQ,EAT/B2iQ,WAGc,gBADQjsP,EAOoC1W,GAN1D2iQ,WAA6C,OAAfjsP,EAAMrjB,MAErB,SAAUqjB,GACtC,MAA2B,oBAApBA,EAAMisP,WAAuD,mBAApBjsP,EAAMisP,SACxD,CAE+EC,CAAwB5iQ,KACnGwiQ,EAAsBxiQ,EAE1B,IACA/S,EAAOmS,GAAG,gCAAgC,SAAUY,GAC7CA,EAAEgmK,sBACL/4K,EAAOu/J,aAEX,GACF,CAgDIwtG,CAAe/sQ,EAAQ+G,EAAagyP,GA/Cb,SAAU/4P,GACnCA,EAAO4V,YAAY,SAAU,GAAI,QACjC5V,EAAO4V,YAAY,sBAAuB,GAAI,OAChD,CA8CEggQ,CAAqB51Q,GACd+G,CACT,EAEI8uQ,GAAoB,CACtB,EACA,GACAh0C,GAAGM,KACHN,GAAGK,IACH,GACA,GACA,GACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACAL,GAAG3gK,KACH2gK,GAAG7gK,GACH6gK,GAAG9gK,KACH8gK,GAAG5gK,OACH58D,OAAOqyL,GAAIh2K,QAAQ1B,YAAc,CAAC,KAAO,IACvC82P,GAAkB,uBAClBC,GAAkB,SAAUhjQ,GAC9B,MAAkB,YAAXA,EAAE7X,MAAiC,UAAX6X,EAAE7X,IACnC,EACI86Q,GAAgB,SAAUjjQ,GAC5B,IAAIiC,EAAUjC,EAAEiC,QAChB,OAAOA,IAAY6sN,GAAGnhK,WAAa1rD,IAAY6sN,GAAGC,MACpD,EA2DIm0C,GAAY,4CAKZC,GAAiB,SAAUl2Q,EAAQuC,GACrC,OAAOm2L,GAAKr9K,GAAqB9Y,GAx5YH,SAAUvC,GACxC,OAAOA,EAAOE,SAAS,6BAA8B,+BAAgC,SACvF,CAs5YyCi2Q,CAA0Bn2Q,GACnE,EAOIo2Q,GAAiB,SAAUF,EAAgBn0L,EAAUtpC,GACvD,IAAI3lC,EAJkB,SAAUojQ,EAAgBn0L,EAAUtpC,GAC1D,OAAOu8I,EAAS8qB,GAASnzH,IAAI5iF,WAAW0uC,EAAIvY,YAAa,IAAK6hD,GAAWm0L,EAC3E,CAEgBG,CAAkBH,EAAgBn0L,EAAUtpC,GAC1D,OAAOh6C,EAASC,KAAKoU,EAAQA,EAAQ1T,OAAS,GAChD,EASIk3Q,GAAoB,SAAUn8D,EAAS1hK,GACzC,IAAKA,EACH,OAAOA,EAET,IAAIvY,EAAYuY,EAAIvY,YAAajc,EAASw0B,EAAIx0B,SAC9C,OAAIk2L,EACEnZ,GAAuB9gK,GACrBu6J,GAASv6J,EAAU/U,aACdmhM,GAAcpsL,EAAU/U,YAAa,GAErCmhM,GAAc1lK,MAAM1mB,GAGtBihK,GAAe1oJ,GAAO6zK,GAAcpsL,EAAWjc,EAAS,GAAKw0B,EAGlEuoJ,GAAuB9gK,GACrBu6J,GAASv6J,EAAU84J,iBACdszB,GAAcpsL,EAAU84J,gBAAiB94J,EAAU84J,gBAAgB5yL,KAAKhH,QAExEktN,GAAc3lK,OAAOzmB,GAGvBmhK,GAAc5oJ,GAAO6zK,GAAcpsL,EAAWjc,EAAS,GAAKw0B,CAGzE,EACI89N,GAAoB1/P,EAAMy/P,IAAmB,GAC7CE,GAAqB3/P,EAAMy/P,IAAmB,GAO9CG,GAAwB,SAAU3iQ,GACpC,OAAOqsL,GAAcrsL,IAAYusL,GAAWvsL,EAC9C,EACI4iQ,GAAmB,SAAU30L,EAAUx/E,GACzC,OAAIqY,GAAWmnE,EAAUx/E,GAChBgqC,GAAUhqC,EAAKk0Q,GAVP,SAAU10L,GAC3B,OAAO,SAAUx/E,GACf,OAAOigB,GAAGu/D,EAAU1mE,GAAqB9Y,EAAIwC,IAAIiF,YACnD,CACF,CAMiD2sQ,CAAa50L,IAEnDtjF,EAAShC,MAEpB,EAMIm6Q,GAAgB,SAAU52Q,GACxBA,EAAO+E,IAAIk/M,QAAQjkN,EAAOoJ,aAC5BpJ,EAAOyxD,WAAW,IAPM,SAAUzxD,GACpC,IAAIqQ,EAAOrQ,EAAOoJ,UACdP,EAAOwH,EAAKlN,YAAcnD,EAAO+E,IAAIi9E,QAAQ3xE,EAAKlN,YAAckN,EAAKlN,WAAakN,EACtFrQ,EAAO4E,UAAU89E,kBAAkB75E,EAAM,EAC3C,CAIIguQ,CAAsB72Q,GAE1B,EAwBI82Q,GAAgB,SAAUp4Q,EAAM+Y,GAClC,MAAO,CACL/Y,KAAMA,EACN+Y,GAAIA,EAER,EACIs/P,GAAmB,SAAUh1L,EAAUtpC,GACzC,IAAIqmG,EAAUzjI,GAAqB0mE,GAC/B23C,EAAer+G,GAAqBo9B,EAAIvY,aAC5C,OAAOw2O,GAAiB53H,EAASplB,GAAc/7H,KAAI,SAAUyhI,GAC3D,OAhBgB,SAAUA,EAAOhxG,GACnC,MAAO,CACLgxG,MAAOA,EACPhxG,SAAUA,EAEd,CAWW4oP,CAAc53I,EAAO3mF,EAC9B,GACF,EA8CIw+N,GAAgC,SAAU73I,GAC5C,IAAIvzG,EAAajI,GAASw7G,GAC1B,OAAO81D,EAAYrpK,EAAYm0K,IAAWrjM,KAAKP,EAASyvB,IAAa,SAAU/H,GAC7E,OAAO+H,EAAWhU,MAAM,EAAGiM,EAC7B,GACF,EACIozP,GAAkB,SAAU93I,GAC9B,IAAIx7G,EAAWqzP,GAA8B73I,GAE7C,OADA21D,EAAOnxK,EAAU6B,IACV7B,CACT,EACIuzP,GAAkB,SAAUp1L,EAAUq9C,GACxC,IAAItsH,EAAU2kO,GAAer4G,EAAOr9C,GACpC,OAAOzkE,EAAOxK,EAAQmG,WAAW,SAAUnF,GACzC,OAAOuvL,GAAUvvL,EACnB,IAAGlW,KAAK6nB,GACV,EAMI2xP,GAAmB,SAAUr1L,EAAU81J,EAAWw/B,EAASC,GAC7D,GAAIj0E,GAAUg0E,GAEZ,OADAjgC,GAAkBigC,GACXt/C,GAAgBs/C,EAAQtyQ,KALnB,IAFPiwL,EAASiE,GASEq+E,IATgB,SAAU5tP,GAC1C,OAAQ25K,GAAU35K,EACpB,IAAGtqB,QAOkCikM,GAAUw0C,IAC7Ct+C,GAAS+9E,EAAgBj8P,GAAqB,OAEhD,IAAI+S,EAAW0pM,GAAau/C,EAAQtyQ,IAAKunN,GAAc3lK,OAAO2wN,EAAevyQ,MAK7E,OAJAgwL,EAAOmiF,GAAgBr/B,IAAY,SAAUvsM,GAC3CiuJ,GAAS+9E,EAAgBhsO,EAC3B,IACA6rO,GAAgBp1L,EAAU81J,GACnBzpN,CACT,EACImpP,GAAqB,SAAUx1L,EAAU81J,EAAWw/B,GACtD,GAAIh0E,GAAUg0E,GAKZ,OAJA5xP,GAAS4xP,GACLh0E,GAAUw0C,IACZT,GAAkBS,GAEb9f,GAAgB8f,EAAU9yO,KAEnC,IAAIqpB,EAAW4pM,GAAeq/C,EAAQtyQ,KAKtC,OAJAgwL,EAAOmiF,GAAgBr/B,IAAY,SAAUvsM,GAC3C/f,GAAS8rP,EAAS/rO,EACpB,IACA6rO,GAAgBp1L,EAAU81J,GACnBzpN,CACT,EAQIopP,GAAS,SAAU5uM,EAAOw2D,GAC5Bu4F,GAAW/uJ,EAAOw2D,EAAMr6H,KAAKpH,KAAI,SAAUywB,GACzC,OAAOA,EAASvpB,SAClB,IAAGlH,IAAI0d,IAAsBrd,OAAOkiM,IAAQtiM,KAAK6nB,GACnD,EACIgyP,GAAiB,SAAU11L,EAAU81J,EAAWw/B,GAGlD,OAFAG,IAAO,EAAM3/B,GACb2/B,IAAO,EAAOH,GAVQ,SAAUx/B,EAAWw/B,GAC3C,OAAOz8P,GAAWy8P,EAASx/B,GALJ,SAAUw/B,EAASj4I,GAC1C,IAAIs4I,EAAmBjgC,GAAer4G,EAAOi4I,GAC7C,OAAO54Q,EAASC,KAAKg5Q,EAAiBA,EAAiBt4Q,OAAS,GAClE,CAE0Cu4Q,CAAmBN,EAASx/B,GAAap5O,EAAShC,MAC5F,CASSm7Q,CAAkB//B,EAAWw/B,GAAS16Q,KAAKka,EAAM0gQ,GAAoBx1L,EAAU81J,EAAWw/B,GAAUxgQ,EAAMugQ,GAAkBr1L,EAAU81J,EAAWw/B,GAC1J,EACIQ,GAAc,SAAU91L,EAAUo4H,EAAS29D,EAAQC,GACrD,OAAO59D,EAAUs9D,GAAe11L,EAAUg2L,EAAQD,GAAUL,GAAe11L,EAAU+1L,EAAQC,EAC/F,EAEIC,GAAoB,SAAUh4Q,EAAQm6M,GACxC,IAAIp4H,EAAW1mE,GAAqBrb,EAAOoJ,WACvCglB,EA/EO,SAAU2zD,EAAUo4H,EAASt3M,GACxC,OAAOA,EAAIE,UAdO,SAAUg/E,EAAUo4H,EAASt3M,GAC/C,IAAIo1Q,EAAelB,GAAiBh1L,EAAUuqI,GAAcQ,eAAejqN,IACvEq1Q,EAAaD,EAAap6Q,MAAK,SAAUs6Q,GAC3C,OAAO5gD,GAAapd,EAASp4H,EAAUo2L,EAAS/pP,UAAUvwB,MAAK,SAAU4Z,GACvE,OAAOs/P,GAAiBh1L,EAAUtqE,GAAI9Z,KAAI,SAAUw6Q,GAClD,OApBS,SAAUp2L,EAAUo4H,EAAS68D,GAC5C,OAAIp8E,GAAOo8E,EAAc5oP,SAASvpB,aAAiD,IAAnCw+L,GAAU2zE,EAAc53I,OAC/Du4F,IAAW,EAAOq/C,EAAc53I,MAAMr6H,KAAKlH,MAAK,SAAUu6Q,GAC/D,OAAIA,EAAoBvrD,QAAQmqD,EAAc5oP,UACrCmpM,GAAapd,EAASp4H,EAAUq2L,GAAqBv6Q,MAAK,SAAU4Z,GACzE,OAAOs/P,GAAiBh1L,EAAUtqE,EACpC,IAEOhZ,EAASN,KAAK64Q,EAEzB,IAAGh6Q,MAAMg6Q,GAEFA,CAEX,CAMeqB,CAAWt2L,EAAUo4H,EAASg+D,EACvC,GACF,GACF,IACA,OAAO99P,GAAM49P,EAAcC,EAAYpB,IAAe94Q,QAAO,SAAU84Q,GACrE,OAtCoB,SAAUA,GAChC,OAAgE,IAAzDt0P,GAAGs0P,EAAcp4Q,KAAK0gI,MAAO03I,EAAcr/P,GAAG2nH,MACvD,CAoCWk5I,CAAkBxB,IAnCT,SAAUA,GAC5B,OAAOpzP,GAAOozP,EAAcp4Q,KAAK0gI,OAAOvhI,MAAK,SAAU06Q,GACrD,OAAO70P,GAAOozP,EAAcr/P,GAAG2nH,OAAOphI,QAAO,SAAUw6Q,GACrD,OAAOh2P,GAAG+1P,EAASC,EACrB,GACF,IAAG17Q,QACL,CA6B+C27Q,CAAc3B,IA5B1C,SAAUA,GAC3B,OAAkE,IAA3D/7E,GAAyB+7E,EAAcp4Q,KAAK0gI,MAAMr6H,OAA2E,IAAzDg2L,GAAyB+7E,EAAcr/P,GAAG2nH,MAAMr6H,IAC7H,CA0B+E2zQ,CAAa5B,EAC1F,GACF,CAEyB6B,CAAc52L,EAAUo4H,EAASt3M,GAAOpE,EAAShC,MAC1E,CA6EiBmlC,CAAOmgD,EAASh9E,IAAKo1M,EAASn6M,EAAO4E,UAAUmB,UAAUlI,MAAK,SAAUi5Q,GACrF,OAAOe,GAAY91L,EAAUo4H,EAAS28D,EAAcp4Q,KAAK0gI,MAAO03I,EAAcr/P,GAAG2nH,MACnF,IAIA,OAHAhxG,EAASxwB,MAAK,SAAU66C,GACtBz4C,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,UAC9B,IACOx+L,EAAStxB,QAClB,EAgBI87Q,GAAmB,SAAUjiO,EAAMmlM,GACrC,IAAIjzO,EAAOwS,GAAqBygO,GAC5B/hN,EAASljB,EAAM2L,GAAIm0B,GACvB,OAAO6lJ,GAAW3zL,EAAM03L,GAAexmK,GAAQj9B,QACjD,EAcI+7Q,GAAgB,SAAU74Q,GAC5B,IAAI+hF,EAAW1mE,GAAqBrb,EAAOoJ,WAE3C,OAbyB,SAAUutC,EAAM9zC,GACzC,IAAIi2Q,EAAahhD,GAAanhL,EAAK5xC,IAAKunN,GAAcQ,eAAejqN,IAAM9F,SACvEg8Q,EAASlhD,GAAalhL,EAAK5xC,IAAKunN,GAAcS,aAAalqN,IAAM9F,SACrE,OANuB,SAAU45C,EAAM9zC,GACvC,OAAO+1Q,GAAiBjiO,EAAM9zC,EAAIsG,iBAAmByvQ,GAAiBjiO,EAAM9zC,EAAIyG,aAClF,CAIU0vQ,CAAmBriO,EAAM9zC,IAAQi2Q,GAAcC,CACzD,CASSE,CAAqBl3L,EADlB/hF,EAAO4E,UAAUmB,UAPX,SAAU/F,GAG1B,OAFAA,EAAOyxD,WAAW,IAClBzxD,EAAO4E,UAAU89E,qBACV,CACT,CAI+Cw2L,CAAYl5Q,GAnC9B,SAAU+hF,EAAUn9E,GAC/C,IAAI/B,EAAM+B,EAAUmB,SACpB,OAAOsU,GAAMq8P,GAAiB30L,EAAU1mE,GAAqBxY,EAAIsG,iBAAkButQ,GAAiB30L,EAAU1mE,GAAqBxY,EAAIyG,gBAAgB,SAAUwuQ,EAAQC,GACvK,OAA2B,IAAvBv1P,GAAGs1P,EAAQC,KACbl1Q,EAAIs9O,iBACJ03B,GAAY91L,GAAU,EAAM+1L,EAAQC,GAAQn6Q,MAAK,SAAU66C,GACzD7zC,EAAU6E,OAAOgvC,EAAIm0K,UACvB,KACO,EAIX,IAAG5vN,OAAM,EACX,CAsBqEm8Q,CAAuBp3L,EAAU/hF,EAAO4E,UAC7G,EACIw0Q,GAAoB,SAAUp5Q,EAAQq5Q,GACxC,OAAOr5Q,EAAO4E,UAAU2+I,eAAwBs1H,GAAc74Q,EAChE,EAEIs5Q,GAA0Bx+E,GAC1By+E,GAA2Bx+E,GAC3By+E,GAAY,SAAUxpO,EAAWhwC,EAAQ6I,EAAM89C,EAAQt1C,GACzD,OAAO5S,EAASC,KAAKsB,EAAOolP,oBAAoBo0B,UAAUxpO,EAAWnnC,EAAM89C,EAAQt1C,GACrF,EAMIsyE,GAAa,SAAU3jF,EAAQ6I,GAEjC,OADQ7I,EAAOyV,KAAK,uBAAwB,CAAEjP,OAAQqC,IAChDkwK,qBACGt6K,EAAShC,OAEXgC,EAASN,KAVC,SAAU0K,GAC3B,IAAIhG,EAAMgG,EAAKwa,cAAcykC,cAE7B,OADAjlD,EAAI8gF,WAAW96E,GACRhG,CACT,CAMuB42Q,CAAa5wQ,GACpC,EACI6wQ,GAAqB,SAAU15Q,EAAQ2nD,EAAOt2C,GAChD,IAAIukN,EAAkBN,GAAe,EAAGt1N,EAAOoJ,UAAWu+C,GACtD4kK,EAAgBD,GAAcQ,eAAe8I,GAC7C+jD,EAAoBptD,EAAc1nN,UACtC,GAAI0uN,GAAwBomD,GAC1B,OAAOH,GAAU,EAAGx5Q,EAAQ25Q,GAAoBptD,EAAcjrB,WAAW,GAE3E,IAAIs4E,EAA0BrtD,EAAc1nN,SAAQ,GACpD,GAAI0uN,GAAwBqmD,GAC1B,OAAOJ,GAAU,EAAGx5Q,EAAQ45Q,GAAyB,GAAO,GAE9D,IAAIC,EAAS75Q,EAAO+E,IAAIE,UAAUsnN,EAAc1nN,WAAW,SAAUgE,GACnE,OAAO0wQ,GAAyB1wQ,IAASywQ,GAAwBzwQ,EACnE,IACA,OAAI0qN,GAAwBsmD,GACnBL,GAAU,EAAGx5Q,EAAQ65Q,GAAQ,EAAOxoQ,GAEtC5S,EAAShC,MAClB,EACIq9Q,GAAmB,SAAU95Q,EAAQ2nD,EAAOt2C,GAC9C,OAAOs2C,EAAM5kD,UAAY22Q,GAAmB15Q,EAAQ2nD,EAAOt2C,GAAgBrU,MAAM2qD,GAASA,CAC5F,EAEIoyN,GAAmB,SAAUthO,GAC/B,OAAOy+L,GAA6Bz+L,IAAQq+L,GAAcr+L,EAC5D,EACIuhO,GAAkB,SAAUvhO,GAC9B,OAAO0+L,GAA4B1+L,IAAQs+L,GAAat+L,EAC1D,EAMIwhO,GAA4B,SAAUj6Q,EAAQ2nD,EAAO9+C,EAAMmnC,EAAWmqK,EAAS+/D,GAgBjF,OAfAV,GAAUxpO,EAAWhwC,EAAQk6Q,EAAkBr1Q,SAASs1M,GAAUA,GAAS,GAAMv8M,MAAK,SAAUu8Q,GAC9F,GAAIxyN,EAAM5kD,UAAW,CACnB,IAAIq3Q,EAAczyN,EAAM1+C,aACpBkxM,EACFigE,EAAYlyN,OAAOiyN,EAAWhxQ,eAAgBgxQ,EAAW3xN,aAEzD4xN,EAAYryN,SAASoyN,EAAW7wQ,aAAc6wQ,EAAW1xN,WAE3D2xN,EAAYj6B,gBACd,MACEx4L,EAAMw4L,iBAERngP,EAAO4E,UAAU6E,OAAO0wQ,EAC1B,IAnBsB,SAAUp1Q,EAAK8D,GACjC4xL,GAAS5xL,IAA8B,IAArBA,EAAKzC,KAAKhH,QAC9B2F,EAAImF,OAAOrB,EAEf,CAgBEwxQ,CAAkBr6Q,EAAO+E,IAAK8D,IACvB,CACT,EAyBIyxQ,GAAoB,SAAUt6Q,EAAQm6M,GACxC,OAzBuB,SAAUn6M,EAAQm6M,GACzC,IAAIxyJ,EAAQ3nD,EAAO4E,UAAUmB,SAC7B,IAAK00L,GAAS9yI,EAAM86L,yBAClB,OAAO,EAET,IAAIzyM,EAAYmqK,EAAUiT,GAAW0J,SAAW1J,GAAW+J,UACvD2sB,EAAc5sB,GAAYl3N,EAAOoJ,WACjCmxQ,EAAe1jQ,EAAMi/M,GAAwB3b,EAAU2pC,EAAYxgP,KAAOwgP,EAAY5iG,MACtFs5H,EAAargE,EAAU4/D,GAAmBC,GAC1CztD,EAAgBoJ,GAA2B3lL,EAAWhwC,EAAOoJ,UAAWu+C,GACxE8yN,EAAoBnE,GAAkBn8D,EAASogE,EAAahuD,IAChE,IAAKkuD,IAAsBzkD,GAAsBzJ,EAAekuD,GAC9D,OAAO,EACF,GAAID,EAAWC,GACpB,OAAOR,GAA0Bj6Q,EAAQ2nD,EAAO4kK,EAAc1nN,UAAWmrC,EAAWmqK,EAASsgE,GAE/F,IAAIP,EAAoBK,EAAaE,GACrC,SAAIP,GAAqBM,EAAWN,IAC9BlkD,GAAsBykD,EAAmBP,KACpCD,GAA0Bj6Q,EAAQ2nD,EAAO4kK,EAAc1nN,UAAWmrC,EAAWmqK,EAAS+/D,EAInG,CAESQ,CAAmB16Q,EAAQm6M,EACpC,EAKIwgE,GAAeriP,GAAa,CAC9B,CAAEpuB,OAAQ,CAAC,YACX,CAAE0wQ,cAAe,CAAC,YAClB,CAAEC,eAAgB,CAAC,eAuBjBC,GAAkB,SAAUnkO,EAAMwjK,EAASz7M,GAC7C,OAAO64N,GAAapd,EAASxjK,EAAMj4C,GAAMb,MAAK,SAAU4Z,GACtD,OA/B8B5O,EA+BR4O,EAAG5S,UA9BpB07L,GAAcllL,GAAqBxS,KAAUw3L,GAAWhlL,GAAqBxS,KAYjD,SAAU8tC,EAAMwjK,EAASz7M,EAAM+Y,GAClE,IAAIw+M,EAAc,SAAU1zN,GAC1B,OAAO09L,GAAW5kL,GAAqB9Y,MAAUqyN,GAAcl2N,EAAM+Y,EAAIk/B,EAC3E,EACA,OAAO++K,IAAmBvb,EAASz7M,GAAM/B,MAAK,WAC5C,OAAO+4N,GAAkBvb,EAAS1iM,GAAI9a,KAAKJ,EAAO05N,EACpD,GAAGA,EACL,CAae8kD,CAA+BpkO,EAAMwjK,EAASz7M,EAAM+Y,GADtDhZ,EAAShC,OAGP09M,GAAWpf,GAAyBtjL,EAAG5S,aAE3B,IAAZs1M,GAAqBpf,GAAyBtjL,EAAG5S,SAAQ,IAhBtC,SAAU8xC,EAAMwjK,EAASz7M,EAAM+Y,GAC/D,IAAIujQ,EAAWvjQ,EAAG5S,SAAoB,IAAZs1M,GAC1B,OAAOu8D,GAAiBr7P,GAAqBs7B,GAAOt7B,GAAqB3c,EAAKmG,YAAYlH,KAAI,SAAUs9Q,GACtG,OAAO53E,GAAU43E,GAAYN,GAAazwQ,OAAO+wQ,EAASl2Q,KAAO41Q,GAAaC,cAAcI,EAC9F,IAAGt9Q,SAAQ,WACT,OAAOe,EAASN,KAAKw8Q,GAAaC,cAAcI,GAClD,GACF,CAQaE,CAA4BvkO,EAAMwjK,EAASz7M,EAAM+Y,GAG/C0iM,GAAWg9B,GAA4Bz4O,KAE3B,IAAZy7M,GAAqB+8B,GAA6Bx4O,GADpDD,EAASN,KAAKw8Q,GAAaE,eAAepjQ,IAI1ChZ,EAAShC,OA5CE,IAAUoM,CA8ChC,GACF,EA2EIsyQ,GAAgB,SAAUn7Q,EAAQ6I,GACpC,OAAOpK,EAASC,KAAK6iO,GAAyBvhO,EAAOoJ,UAAWP,GAClE,EACIuyQ,GAAuB,SAAUp7Q,EAAQm6M,GAC3C,IAAIylC,EAAe5/O,EAAO4E,UAAUC,UACpC,OAAOs2Q,GAAcn7Q,EAAQ4/O,GAAc5hP,OAAO+8L,IAA0Bp+L,MAAK,WAC/E,OA/CO,SAAUg6C,EAAMwjK,EAASt3M,GAClC,IAAI+yN,EAAkBN,GAAenb,EAAU,GAAK,EAAGxjK,EAAM9zC,GACzDnE,EAAO4tN,GAAcQ,eAAe8I,GACpC7yB,EAAc1nL,GAAqBs7B,GACvC,OAAgB,IAAZwjK,GAAqBg9B,GAA4Bz4O,GAC5CD,EAASN,KAAKw8Q,GAAazwQ,OAAOxL,EAAKmG,SAAQ,KAC7Cs1M,GAAW+8B,GAA6Bx4O,GAC1CD,EAASN,KAAKw8Q,GAAazwQ,OAAOxL,EAAKmG,aACzB,IAAZs1M,GAAqB+8B,GAA6Bx4O,IAAS65O,GAAUx1C,EAAarkM,GACpF+5O,GAAe11C,EAAarkM,GAAMf,KAAI,SAAU81N,GACrD,OAAOknD,GAAazwQ,OAAOupN,EAAG5uN,UAChC,IACSs1M,GAAWg9B,GAA4Bz4O,IAAS45O,GAAav1C,EAAarkM,GAC5Eg6O,GAAW31C,EAAarkM,GAAMf,KAAI,SAAU81N,GACjD,OAAOknD,GAAazwQ,OAAOupN,EAAG5uN,UAChC,IA1B2B,SAAU8xC,EAAMwjK,EAASz7M,GACtD,OA/DkC,SAAUy7M,EAASz7M,GACrD,IAAI6D,EAAM7D,EAAKmG,SAAoB,IAAZs1M,GACnBkhE,EAAgBlhE,EAAU,QAAU,SACxC,OAAOpgB,GAAYx3L,IAAQA,EAAImB,aAAa,oBAAsB23Q,CACpE,CA2DMC,CAA8BnhE,EAASz7M,GAvBT,SAAUy7M,EAAS53M,GACrD,OAAI43M,GAAWpf,GAAyBx4L,EAAI4oB,aACnC1sB,EAASN,KAAKw8Q,GAAaC,cAAcr4Q,EAAI4oB,eAC/B,IAAZgvL,GAAqBpf,GAAyBx4L,EAAIy2L,iBACpDv6L,EAASN,KAAKw8Q,GAAaC,cAAcr4Q,EAAIy2L,kBAE7Cv6L,EAAShC,MAEpB,CAgBW8+Q,CAA8BphE,EAASz7M,EAAKmG,SAAoB,IAAZs1M,IAAoBx9M,MAAK,WAClF,OAAOm+Q,GAAgBnkO,EAAMwjK,EAASz7M,EACxC,GAAGD,EAASN,MAEL28Q,GAAgBnkO,EAAMwjK,EAASz7M,GAAMb,MAAK,SAAU6+O,GACzD,OApBuC,SAAU/lM,EAAMj4C,EAAMg+O,GACjE,OAAOA,EAAa//O,MAAK,SAAU4F,GACjC,OAAO9D,EAASN,KAAKw8Q,GAAazwQ,OAAO3H,GAC3C,IAAG,SAAUA,GACX,OAAO9D,EAASN,KAAKw8Q,GAAaC,cAAcr4Q,GAClD,IAAG,SAAUkV,GACX,OAAIm9M,GAAcl2N,EAAM+Y,EAAIk/B,GACnBl4C,EAAShC,OAETgC,EAASN,KAAKw8Q,GAAaE,eAAepjQ,GAErD,GACF,CAQa+jQ,CAAuC7kO,EAAMj4C,EAAMg+O,EAC5D,GAEJ,CAkBW++B,CAAyB9kO,EAAMwjK,EAASz7M,EAEnD,CA4BWkoC,CAAK5mC,EAAOoJ,UAAW+wM,EAASn6M,EAAO4E,UAAUmB,UAAUjI,QAAO,SAAU4+O,GACjF,OAAOA,EAAa//O,KA3BJ,SAAUqD,EAAQm6M,GACtC,OAAO,SAAUrmM,GAGf,OAFA9T,EAAOolP,oBAAoBs2B,gBAC3B9/B,GAAgB57O,EAAQm6M,EAAS9+L,GAAqBvH,KAC/C,CACT,CACF,CAqB+B6nQ,CAAgB37Q,EAAQm6M,GApBnC,SAAUn6M,EAAQm6M,GACpC,OAAO,SAAUrmM,GACf,IAAI2kC,EAAM0hK,EAAUmS,GAAc3lK,OAAO7yC,GAAWw4M,GAAc1lK,MAAM9yC,GAExE,OADA9T,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,YACrB,CACT,CACF,CAciEguD,CAAc56Q,EAAQm6M,GAblE,SAAUn6M,GAC7B,OAAO,SAAUy4C,GAEf,OADAz4C,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,YACrB,CACT,CACF,CAQiGiuD,CAAe76Q,GAC5G,GACF,GAAGxD,EACL,EAiBIo/Q,GAAmB,SAAU57Q,GAC/B,IAAI+E,EAAM/E,EAAO+E,IAAKH,EAAY5E,EAAO4E,UACrCi1Q,EAASt4C,GAAyBvhO,EAAOoJ,UAAWxE,EAAUC,WAClE,GAAIi2L,GAAwB++E,IAAW90Q,EAAIi9E,QAAQ63L,IAAW90Q,EAAIk/M,QAAQ41D,GAAS,CACjF,IAAIpmD,EAAK1uN,EAAIqF,OAAO,KAAM,CAAE,iBAAkB,MAC9CrF,EAAIu8M,QAAQu4D,EAAQ,IACpBA,EAAOxvQ,YAAYopN,GACnB7uN,EAAU6E,OAAO6iN,GAAc3lK,OAAO8sK,GAAI7G,UAC5C,CACA,OAAO,CACT,EACIivD,GAAoB,SAAU77Q,EAAQm6M,GACxC,OAAIn6M,EAAO4E,UAAU2+I,cACZ63H,GAAqBp7Q,EAAQm6M,GA1Bb,SAAUn6M,EAAQm6M,GAC3C,IAAIylC,EAAe5/O,EAAO4E,UAAUC,UACpC,SAAIk2L,GAAyB6kD,IAAkB5kD,GAAc4kD,KACtCu7B,GAAcn7Q,EAAQ4/O,EAAa51O,YAAYhM,OAAO+8L,IACrDp+L,MAAK,WAPA,IAAUomM,EAWnC,OAXmCA,EAQV1nL,GAAqBrb,EAAOoJ,WAPzD2rL,EAAOxrI,GAAYw5I,EAAa,4BAA6Bt9K,IAQzDm2N,GAAgB57O,EAAQm6M,EAAS9+L,GAAqBrb,EAAO4E,UAAUC,YACvE+xQ,GAAc52Q,IACP,CACT,GAAGxD,EAGP,CAgBWs/Q,CAAqB97Q,EAAQm6M,EAExC,EAaI4hE,GAAoB,SAAU/7Q,EAAQm6M,GACxC,QAAOn6M,EAAO4E,UAAU2+I,eAZN,SAAUvjJ,EAAQm6M,GACpC,IAAIwnC,EAAUr1B,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UAC5D,OAAOwxN,GAAapd,EAASn6M,EAAOoJ,UAAWu4O,GAAS3jP,QAAO,SAAUy6C,GACvE,OAAO0hK,EAAUy8B,GAAmBn+L,GAAOo+L,GAAkBp+L,EAC/D,IAAG56C,MAAK,SAAU46C,GAChB,OAAOh6C,EAASC,KAAKq2N,GAA6B5a,EAAU,GAAK,EAAG1hK,GACtE,IAAG36C,QAAO,SAAUyE,GAElB,OADAvC,EAAO4E,UAAUI,OAAOzC,IACjB,CACT,GACF,CAE0Cy5Q,CAAch8Q,EAAQm6M,EAChE,EAEIr2H,GAAS22G,GACTwhF,GAA2B,SAAUpzQ,GACvC,OAAOi7E,GAAOj7E,IAASA,EAAKzC,KAAK,KAAOs6L,EAC1C,EACIw7E,GAAyB,SAAUrzQ,GACrC,OAAOi7E,GAAOj7E,IAASA,EAAKzC,KAAKyC,EAAKzC,KAAKhH,OAAS,KAAOshM,EAC7D,EACIy7E,GAAa,SAAUtzQ,GACzB,OAAOA,EAAKwa,cAAcvH,eAAe4kL,GAC3C,EA+CI07E,GAAe,SAAUz1N,EAAQ99C,GACnC,OAAO89C,EA/CU,SAAU99C,GAC3B,GAAIi7E,GAAOj7E,EAAKmwL,iBACd,OAAIkjF,GAAuBrzQ,EAAKmwL,kBAG9BnwL,EAAKmwL,gBAAgB6/B,WAAWn4B,IAFzB73L,EAAKmwL,gBAKT,GAAIl1G,GAAOj7E,GAChB,OAAIozQ,GAAyBpzQ,IAG3BA,EAAKkyO,WAAW,EAAGr6C,IAFZ73L,EAMT,IAAIgyO,EAAUshC,GAAWtzQ,GAEzB,OADAA,EAAKmB,WAAWC,aAAa4wO,EAAShyO,GAC/BgyO,CAEX,CA2BkB5wO,CAAapB,GA1Bb,SAAUA,GAC1B,GAAIi7E,GAAOj7E,EAAKsiB,aACd,OAAI8wP,GAAyBpzQ,EAAKsiB,cAGhCtiB,EAAKsiB,YAAY4vN,WAAW,EAAGr6C,IAFxB73L,EAAKsiB,YAKT,GAAI24D,GAAOj7E,GAChB,OAAIqzQ,GAAuBrzQ,IAGzBA,EAAKgwN,WAAWn4B,IAFT73L,EAMT,IAAIgyO,EAAUshC,GAAWtzQ,GAMzB,OALIA,EAAKsiB,YACPtiB,EAAKmB,WAAWC,aAAa4wO,EAAShyO,EAAKsiB,aAE3CtiB,EAAKmB,WAAWK,YAAYwwO,GAEvBA,CAEX,CAEuCp3B,CAAY56M,EACnD,EACIwzQ,GAAqBxlQ,EAAMulQ,IAAc,GACzCE,GAAoBzlQ,EAAMulQ,IAAc,GAExCG,GAAkB,SAAU9jO,EAAKkO,GACnC,OAAI8zI,GAAShiJ,EAAIvY,aACRk8O,GAAaz1N,EAAQlO,EAAIvY,aAEzBk8O,GAAaz1N,EAAQlO,EAAI5zC,UAEpC,EACI23Q,GAAsB,SAAU/jO,EAAKm6C,GACvC,IAAI6pL,EAAY7pL,EAAM3rE,MACtB,OAAOw1P,GAAahkO,EAAIvY,cAAgBu8O,GAAaz7E,GAAuBy7E,EAC9E,EACIC,GAAc,SAAU9pL,EAAOmgF,GACjC,OAAOA,EAASp2K,MAAK,SAAUmX,GAC7BszB,GAASwrD,EAAM3rE,OACf,IAAIjmB,EAAOq7Q,GAAmBvoQ,GAE9B,OADA8+E,EAAMtrE,IAAItmB,GACHvC,EAASN,KAAKmuN,GAActrN,EAAMA,EAAK5B,OAAS,GACzD,IAAG,SAAU0U,GACX,OAAOikN,GAAgBjkN,GAASnW,KAAI,SAAU86C,GAC5C,GAAK+jO,GAAoB/jO,EAAKm6C,GAM5B,OAAO05H,GAAc15H,EAAM3rE,MAAO,GALlCmgB,GAASwrD,EAAM3rE,OACf,IAAIjmB,EAAOu7Q,GAAgB9jO,GAAK,GAEhC,OADAm6C,EAAMtrE,IAAItmB,GACHsrN,GAActrN,EAAM,EAI/B,GACF,IAAG,SAAU8S,GACX,OAAOkkN,GAAelkN,GAASnW,KAAI,SAAU86C,GAC3C,GAAK+jO,GAAoB/jO,EAAKm6C,GAM5B,OAAO05H,GAAc15H,EAAM3rE,MAAO2rE,EAAM3rE,MAAM7nB,OAAS,GALvDgoC,GAASwrD,EAAM3rE,OACf,IAAIjmB,EAAOu7Q,GAAgB9jO,GAAK,GAEhC,OADAm6C,EAAMtrE,IAAItmB,GACHsrN,GAActrN,EAAMA,EAAK5B,OAAS,EAI7C,GACF,IAAG,SAAU0U,GACXszB,GAASwrD,EAAM3rE,OACf,IAAIjmB,EAAOs7Q,GAAkBxoQ,GAE7B,OADA8+E,EAAMtrE,IAAItmB,GACHvC,EAASN,KAAKmuN,GAActrN,EAAM,GAC3C,GACF,EAEI27Q,GAAgB,SAAUC,EAAKnmQ,GACjC,IAAK,IAAIvX,EAAI,EAAGA,EAAI09Q,EAAIx9Q,OAAQF,IAAK,CACnC,IAAIqzB,EAASqqP,EAAI19Q,GAAGG,MAAM,KAAMoX,GAChC,GAAI8b,EAAOz1B,SACT,OAAOy1B,CAEX,CACA,OAAO9zB,EAAShC,MAClB,EAEIogR,GAAWvkP,GAAa,CAC1B,CAAEquB,OAAQ,CAAC,YACX,CAAEhsC,MAAO,CAAC,YACV,CAAEmqG,IAAK,CAAC,YACR,CAAEl+D,MAAO,CAAC,cAERk2N,GAAY,SAAU/6L,EAAUl5E,GAElC,OADkB8rN,GAAiB9rN,EAAMk5E,IACNA,CACrC,EACIp7B,GAAS,SAAUuvN,EAAgBn0L,EAAUtpC,GAC/C,IAAIskO,EAAOxG,GAAkB99N,GACzBl9B,EAAQuhQ,GAAU/6L,EAAUg7L,EAAK78O,aACrC,OAAOk2O,GAAeF,EAAgB36P,EAAOwhQ,GAAMpgR,MAAK,WACtD,OAAOk7N,GAAat8M,EAAOwhQ,GAAMl/Q,KAAKgZ,EAAMu/P,GAAgBF,EAAgB36P,IAAQ5d,KAAI,SAAUwwF,GAChG,OAAO0uL,GAASl2N,OAAOwnC,EACzB,GACF,GAAG1vF,EAAShC,KACd,EACIugR,GAAkC,SAAUj7L,EAAUx/E,GACxD,OAAkD,OAA3C41N,GAAwBp2I,EAAUx/E,EAC3C,EACI06Q,GAAuB,SAAU/G,EAAgBn0L,EAAUtpC,GAC7D,OAAO29N,GAAeF,EAAgBn0L,EAAUtpC,GAAKz6C,OAAO6Y,EAAMmmQ,GAAiCj7L,GACrG,EACIm7L,GAAU,SAAUhH,EAAgBn0L,EAAUtpC,GAChD,IAAIskO,EAAOvG,GAAmB/9N,GAC9B,OAAOwkO,GAAqB/G,EAAgBn0L,EAAUg7L,GAAMl/Q,MAAK,SAAUswF,GAEzE,OADc2pI,GAAa3pI,EAAQ4uL,GACpBhgR,SAAW0B,EAASN,KAAK0+Q,GAASliQ,MAAMwzE,IAAW1vF,EAAShC,MAC7E,GACF,EACIqoH,GAAM,SAAUoxJ,EAAgBn0L,EAAUtpC,GAC5C,IAAIskO,EAAOxG,GAAkB99N,GAC7B,OAAOwkO,GAAqB/G,EAAgBn0L,EAAUg7L,GAAMl/Q,MAAK,SAAUswF,GAEzE,OADc0pI,GAAa1pI,EAAQ4uL,GACpBhgR,SAAW0B,EAASN,KAAK0+Q,GAAS/3J,IAAI32B,IAAW1vF,EAAShC,MAC3E,GACF,EACImqD,GAAQ,SAAUsvN,EAAgBn0L,EAAUtpC,GAC9C,IAAIskO,EAAOvG,GAAmB/9N,GAC1Bl9B,EAAQuhQ,GAAU/6L,EAAUg7L,EAAK78O,aACrC,OAAOk2O,GAAeF,EAAgB36P,EAAOwhQ,GAAMpgR,MAAK,WACtD,OAAOm7N,GAAav8M,EAAOwhQ,GAAMl/Q,KAAKgZ,EAAMu/P,GAAgBF,EAAgB36P,IAAQ5d,KAAI,SAAUwwF,GAChG,OAAO0uL,GAASj2N,MAAMunC,EACxB,GACF,GAAG1vF,EAAShC,KACd,EACI0gR,GAAkB,SAAUpqG,GAC9B,OAAuC,KAxtBnBj/J,EAwtBP24E,GAAWsmF,GAvtBqC,QAAtD+sC,GAASnzH,IAAIC,SAAS94E,EAAS,aAAa,KARxB9S,EAQwD8S,EAAQzO,YAPpF4wQ,GAAUxyQ,KAAKzC,KAMZ,IAAU8S,EAPO9S,CAguB7B,EACIo8Q,GAAe,SAAUlH,EAAgBn0L,EAAUtpC,GAWrD,OAVekkO,GAAc,CAC3Bh2N,GACAu2N,GACAp4J,GACAl+D,IACC,CACDsvN,EACAn0L,EACAtpC,IAEcz6C,OAAOm/Q,GACzB,EACI1wL,GAAa,SAAUsmF,GACzB,OAAOA,EAASp2K,KAAKi4L,EAAUA,EAAUA,EAAUA,EACrD,EACIyoF,GAAU,SAAUtqG,GACtB,OAAOA,EAASp2K,KAAKP,EAAS,UAAWA,EAAS,SAAUA,EAAS,OAAQA,EAAS,SACxF,EACIkhR,GAAU,SAAUvqG,GACtB,OAAOA,EAASp2K,KAAKkgR,GAASl2N,OAAQk2N,GAASl2N,OAAQk2N,GAASj2N,MAAOi2N,GAASj2N,MAClF,EACIyV,GAAS,SAAU02G,GACrB,OAAOA,EAASp2K,KAAKkgR,GAASliQ,MAAOkiQ,GAASliQ,MAAOkiQ,GAAS/3J,IAAK+3J,GAAS/3J,IAC9E,EAIIy4J,GAAiB,SAAUpjE,EAAS+7D,EAAgBn0L,EAAUrjF,EAAM+Y,EAAIs7J,GAC1E,OAAO14J,GAAM+7P,GAAeF,EAAgBn0L,EAAUrjF,GAAO03Q,GAAeF,EAAgBn0L,EAAUtqE,IAAK,SAAU+lQ,EAAYC,GAC/H,OAAID,IAAeC,GA9uBE,SAAU17L,EAAUozI,EAAOC,GAClD,IAAI0iD,EAASnjD,GAAiBQ,EAAOpzI,GACjCg2L,EAASpjD,GAAiBS,EAAOrzI,GACrC,OAAO+1L,GAAUA,IAAWC,CAC9B,CA0uBmC2F,CAAmB37L,EAAUy7L,EAAYC,GAC/DZ,GAASj2N,MAAMuzJ,EAAUqjE,EAAaC,GAEtC1qG,CAEX,IAAG/1K,MAAM+1K,EACX,EACI4qG,GAAiB,SAAUC,EAAcC,GAC3C,OAAOD,EAAajhR,KAAKH,GAAQ,SAAUohR,GACzC,OAd4BE,EAcDD,IAbtBR,GADYU,EAcJH,KAbeP,GAAQS,IAAcrxL,GAAWsxL,KAAetxL,GAAWqxL,IADhF,IAAUC,EAAWD,CAe9B,GACF,EAWIE,GAAqB,SAAU7jE,EAASpnC,GAC1C,OAAIonC,EACKpnC,EAASp2K,KAAK2Z,EAAQ7X,EAASN,KAAM0+Q,GAASliQ,OAAQlc,EAAShC,KAAM6Z,EAAQ7X,EAASN,KAAM0+Q,GAASj2N,OAAQnoD,EAAShC,MAEtHs2K,EAASp2K,KAAK8B,EAAShC,KAAM6Z,EAAQ7X,EAASN,KAAM0+Q,GAASl2N,QAASloD,EAAShC,KAAM6Z,EAAQ7X,EAASN,KAAM0+Q,GAAS/3J,KAEhI,EACIm5J,GAAiB,SAAU9jE,EAAS+7D,EAAgBn0L,EAAUtpC,GAChE,IAAI/5C,EAAO43Q,GAAkBn8D,EAAS1hK,GAClCmlO,EAAeR,GAAalH,EAAgBn0L,EAAUrjF,GAC1D,OAAO0+Q,GAAalH,EAAgBn0L,EAAUrjF,GAAMb,KAAKgZ,EAAMmnQ,GAAoB7jE,IAAUz8M,SAAQ,WACnG,OArBuB,SAAUy8M,EAAS+7D,EAAgBn0L,EAAU67L,EAAcnlO,GACpF,IAAI/5C,EAAO43Q,GAAkBn8D,EAAS1hK,GAOtC,OANS8+K,GAAapd,EAASp4H,EAAUrjF,GAAMf,IAAIkZ,EAAMy/P,GAAmBn8D,IAC1Dx9M,MAAK,WACrB,OAAOihR,EAAajgR,IAAI2/Q,GAC1B,IAAG,SAAU7lQ,GACX,OAAO2lQ,GAAalH,EAAgBn0L,EAAUtqE,GAAI9Z,IAAIkZ,EAAM0mQ,GAAgBpjE,EAAS+7D,EAAgBn0L,EAAUrjF,EAAM+Y,IAAKzZ,OAAO6Y,EAAM8mQ,GAAgBC,GACzJ,IACgB5/Q,OAAOm/Q,GACzB,CAYWe,CAAqB/jE,EAAS+7D,EAAgBn0L,EAAU67L,EAAcnlO,EAC/E,GACF,EACA5hC,EAAMonQ,IAAgB,GACtBpnQ,EAAMonQ,IAAgB,GAEtB,IAuBIE,GApBAprF,GAAU,SAAUonB,EAASv1M,EAAW6zC,GAC1C,IAAIjH,EAAQ2oK,EAAU,GAAK,EAG3B,OAFAv1M,EAAU6E,OAAO6iN,GAAc7zK,EAAIvY,YAAauY,EAAIx0B,SAAWutB,GAAOo7K,WACtEhoN,EAAUm5N,SAASqgD,OAAO,OAAQjkE,EAAU,UAAY,WAAY,SAC7D,CACT,GAgBC,SAAUgkE,GACTA,EAAUA,EAAc,GAAI,GAAK,KACjCA,EAAUA,EAAiB,MAAI,GAAK,QACpCA,EAAUA,EAAgB,KAAI,GAAK,OACnCA,EAAUA,EAAe,IAAI,GAAK,KACpC,CALA,CAKEA,KAAcA,GAAY,CAAC,IAC7B,IA+HIE,GA/HAxyJ,GAAO,SAAU77E,EAAWiV,GAC9B,OAAOjV,IAAco9K,GAAW+J,UAAYl+M,GAAQgsC,GAAaA,CACnE,EACIqzI,GAAO,SAAUtoJ,EAAW8zM,EAAarrM,GAC3C,OAAOzI,IAAco9K,GAAW0J,SAAWgtB,EAAYxgP,KAAKm1C,GAAOqrM,EAAY5iG,KAAKzoG,EACtF,EACI6lO,GAAe,SAAU/iQ,EAAOy0B,EAAWuuO,EAAYC,GACzD,OAAI5jF,GAAO4jF,EAAQ35Q,QAAQmrC,IAAco9K,GAAW0J,WAC3CqnD,GAAUM,IAC+B,IAAvC7pD,GAAc2pD,EAAYC,GAC5BL,GAAUO,MAEVP,GAAUQ,IAErB,EACIC,GAAoB,SAAU97Q,EAAWktC,EAAWz0B,EAAOZ,GAI7D,IAHA,IAAImpO,EAAc5sB,GAAY37M,GAC1BgjQ,EAAa5jQ,EACbsqC,EAAY,GACTs5N,GAAY,CACjB,IAAIC,EAAUlmF,GAAKtoJ,EAAW8zM,EAAay6B,GAC3C,IAAKC,EACH,MAEF,GAAI5jF,GAAO4jF,EAAQ35Q,SAAQ,IACzB,OAAImrC,IAAco9K,GAAW0J,SACpB,CACL7xK,UAAW4mE,GAAK77E,EAAWiV,GAAW5gD,OAAO,CAACm6Q,IAC9CK,UAAWV,GAAUM,GACrBK,QAASrgR,EAASN,KAAKqgR,IAGlB,CACLv5N,UAAW4mE,GAAK77E,EAAWiV,GAC3B45N,UAAWV,GAAUM,GACrBK,QAASrgR,EAASN,KAAKqgR,IAI7B,GAAKA,EAAQt+N,YAAb,CAIA,GAAIp9C,EAAUy7Q,EAAYC,GAAU,CAClC,IAAIK,EAAYP,GAAa/iQ,EAAOy0B,EAAWuuO,EAAYC,GAC3D,MAAO,CACLv5N,UAAW4mE,GAAK77E,EAAWiV,GAC3B45N,UAAWA,EACXC,QAASrgR,EAASN,KAAKqgR,GAE3B,CACAv5N,EAAUnmD,KAAK0/Q,GACfD,EAAaC,CAVb,MAFED,EAAaC,CAajB,CACA,MAAO,CACLv5N,UAAW4mE,GAAK77E,EAAWiV,GAC3B45N,UAAWV,GAAUY,IACrBD,QAASrgR,EAAShC,OAEtB,EACIuiR,GAA2B,SAAUhvO,EAAWivO,EAAwB1jQ,EAAOZ,GACjF,OAAOskQ,EAAuB1jQ,EAAOZ,GAAOmkQ,QAAQnhR,KAAI,SAAU86C,GAChE,IAAIwM,EAAYg6N,EAAuB1jQ,EAAOk9B,GAAKwM,UACnD,OAAOjV,IAAco9K,GAAW+J,UAAYlyK,EAAU5gD,OAAOo0C,GAAO,CAACA,GAAKp0C,OAAO4gD,EACnF,IAAGjoD,MAAM,GACX,EACIkiR,GAAyC,SAAUj6N,EAAW5pD,GAChE,OAAOsd,EAAMssC,GAAW,SAAUr+C,EAAK6yC,GACrC,OAAO7yC,EAAIjK,MAAK,WACd,OAAO8B,EAASN,KAAKs7C,EACvB,IAAG,SAAUmgM,GACX,OAAOv/N,GAAMZ,GAAKmgO,EAAQpvL,kBAAmB/wC,GAAKggC,EAAO+Q,mBAAmB,SAAU20N,EAAUtkJ,GAC9F,IAAIukJ,EAAWxyP,KAAK89D,IAAIrvF,EAAI8jR,EAASv/Q,MAErC,OADcgtB,KAAK89D,IAAIrvF,EAAIw/H,EAAQj7H,OACjBw/Q,EAAW3lO,EAASmgM,CACxC,IAAGn8O,GAAGmJ,EACR,GACF,GAAGnI,EAAShC,OACd,EACI4iR,GAAgC,SAAUp6N,EAAWxM,GACvD,OAAOh/B,GAAKg/B,EAAI+R,kBAAkB3sD,MAAK,SAAUyhR,GAC/C,OAAOJ,GAAuCj6N,EAAWq6N,EAAW1/Q,KACtE,GACF,EACI2/Q,GAAgC1oQ,EAAM+nQ,GAAmBtyD,GAAcp1C,SAAU,GACjFsoG,GAA4B3oQ,EAAM+nQ,GAAmBtyD,GAAcn1C,QAAS,GAC5EsoG,GAAoB5oQ,EAAMmoQ,IAA2B,EAAGO,IACxDG,GAAoB7oQ,EAAMmoQ,GAA0B,EAAGQ,IAkBvDG,GAAqB,SAAU92Q,GACjC,IAAI+2Q,EAAkB,SAAUl0D,GAC9B,OAAO52B,EAAM42B,GAAa,SAAU3zK,GAClC,IAAI0zK,EAAatrL,GAAM4X,GAEvB,OADA0zK,EAAW5iN,KAAOA,EACX4iN,CACT,GACF,EACA,GAAI1xB,GAAYlxL,GACd,OAAO+2Q,EAAgB/2Q,EAAK2hD,kBAE9B,GAAIiwI,GAAS5xL,GAAO,CAClB,IAAIhG,EAAMgG,EAAKwa,cAAcykC,cAG7B,OAFAjlD,EAAIklD,SAASl/C,EAAM,GACnBhG,EAAIqlD,OAAOr/C,EAAMA,EAAKzC,KAAKhH,QACpBwgR,EAAgB/8Q,EAAI2nD,iBAC7B,CACF,EACIA,GAAiB,SAAU4wI,GAC7B,OAAOv9L,EAAKu9L,EAAOukF,GACrB,GAGC,SAAUtB,GACTA,EAAWA,EAAe,IAAK,GAAK,KACpCA,EAAWA,EAAiB,KAAI,GAAK,MACvC,CAHA,CAGEA,KAAeA,GAAa,CAAC,IAC/B,IAywKIwB,GAsxBAC,GAxhMAC,GAAc,SAAU/vO,EAAWgwO,EAAWC,EAAYtpO,EAAM89K,EAAalI,GAC/E,IAAIl9K,EAAO,EACP9c,EAAS,GACT/3B,EAAM,SAAUqO,GAClB,IAAI6iN,EAAclhK,GAAe,CAAC3hD,KACf,IAAfmnC,IACF07K,EAAcA,EAAYzyM,WAE5B,IAAK,IAAI/Z,EAAI,EAAGA,EAAIwsN,EAAYtsN,OAAQF,IAAK,CAC3C,IAAIusN,EAAaC,EAAYxsN,GAC7B,IAAI+gR,EAAWx0D,EAAYy0D,GAA3B,CAOA,GAJI3tP,EAAOnzB,OAAS,GAAK4gR,EAAUv0D,EAAYhpI,GAAOlwD,KACpD8c,IAEFo8K,EAAWp8K,KAAOA,EACdolL,EAAYhJ,GACd,OAAO,EAETl5L,EAAOzzB,KAAK2sN,EARZ,CASF,CACF,EACIy0D,EAAmBz9L,GAAO8pI,EAAc/hK,kBAC5C,IAAK01N,EACH,OAAO3tP,EAET,IAAI1pB,EAAO0jN,EAAc1nN,UAGzB,OAFArK,EAAIqO,GAnCU,SAAUmnC,EAAW2G,EAAM89K,EAAa5rN,GACtD,KAAOA,EAAO2rN,GAAW3rN,EAAMmnC,EAAW0yJ,GAA4B/rJ,IACpE,GAAI89K,EAAY5rN,GACd,MAGN,CA8BEiQ,CAAUk3B,EAAW2G,EAAMn8C,EAAKqO,GACzB0pB,CACT,EAOI4tP,GAAUtpQ,EAAMkpQ,GAAa1B,GAAW+B,GAAIr2D,GAAWE,IACvDo2D,GAAYxpQ,EAAMkpQ,GAAa1B,GAAWiC,KAAMr2D,GAAWF,IAgD3Dw2D,GAAc,SAAUC,GAC1B,OAAO,SAAU/0D,GACf,OAzDkB,SAAU+0D,EAAY/0D,GAC1C,OAAOA,EAAWp8K,KAAOmxO,CAC3B,CAuDWC,CAAgBD,EAAY/0D,EACrC,CACF,EACIi1D,GAAS,SAAUF,GACrB,OAAO,SAAU/0D,GACf,OA3De,SAAU+0D,EAAY/0D,GACvC,OAAOA,EAAWp8K,OAASmxO,CAC7B,CAyDWG,CAAaH,EAAY/0D,EAClC,CACF,EAEIm1D,GAA2B7lF,GAC3B8lF,GAAWrsD,GACXssD,GAAqB,SAAUr1D,EAAYphM,GAC7C,OAAOuC,KAAK89D,IAAI+gI,EAAW7rN,KAAOyqB,EACpC,EACI02P,GAAsB,SAAUt1D,EAAYphM,GAC9C,OAAOuC,KAAK89D,IAAI+gI,EAAWt/L,MAAQ9B,EACrC,EACI22P,GAAY,SAAU32P,EAASohM,GACjC,OAAOphM,GAAWohM,EAAW7rN,MAAQyqB,GAAWohM,EAAWt/L,KAC7D,EACI80P,GAAY,SAAU32P,EAASmhM,GACjC,OAAOnhM,GAAWmhM,EAAWvjM,KAAOoC,GAAWmhM,EAAWr/L,MAC5D,EAII80P,GAAwB,SAAUx1D,EAAarhM,EAAS82P,GAI1D,YAHoB,IAAhBA,IACFA,EAAc3kR,GAETi5L,GAAOi2B,GAAa,SAAU01D,EAAe31D,GAClD,GAAIu1D,GAAU32P,EAASohM,GACrB,OAAO01D,EAAY11D,GAAcA,EAAa21D,EAEhD,GAAIJ,GAAU32P,EAAS+2P,GACrB,OAAOD,EAAYC,GAAiBA,EAAgB31D,EAEtD,IAAI41D,EAAcz0P,KAAK6kB,IAAIqvO,GAAmBM,EAAe/2P,GAAU02P,GAAoBK,EAAe/2P,IACtGi3P,EAAc10P,KAAK6kB,IAAIqvO,GAAmBr1D,EAAYphM,GAAU02P,GAAoBt1D,EAAYphM,IACpG,OAAIi3P,IAAgBD,GAfflnQ,GAe+CsxM,EAfvB,SAesCm1D,GAAyBn1D,EAAW5iN,OAGnGy4Q,EAAcD,EAFT51D,EAKF21D,CACT,GACF,EACIG,GAAY,SAAUvxO,EAAW2G,EAAM89K,EAAahvD,EAAW+7G,GACjE,IAAI34Q,EAAOg4Q,GAASp7G,EAAWz1H,EAAW0yJ,GAA4B/rJ,GAAO6qO,GAC7E,GACE,IAAK34Q,GAAQ4rN,EAAY5rN,GACvB,aAEKA,EAAOg4Q,GAASh4Q,EAAMmnC,EAAW0yJ,GAA4B/rJ,GACxE,EA4CI8qO,GAAc,SAAUzhR,EAAQ6C,GAClC7C,EAAO4E,UAAU6E,OAAO5G,GACxB6mO,GAAoB1pO,EAAQA,EAAO4E,UAAUmB,SAC/C,EACI27Q,GAAsB,SAAU1hR,EAAQ2nD,EAAOt2C,GACjD,OAAO5S,EAASN,KAAK27Q,GAAiB95Q,EAAQ2nD,EAAOt2C,GACvD,EACIswQ,GAAmB,SAAU3hR,EAAQgwC,EAAW2X,EAAOi6N,EAAUC,EAASvtI,GAC5E,IAAIk1E,EAAWx5K,IAAco9K,GAAW0J,SACpCgtB,EAAc5sB,GAAYl3N,EAAOoJ,WACjCmxQ,EAAe1jQ,EAAMi/M,GAAwBtM,EAAWs6B,EAAYxgP,KAAOwgP,EAAY5iG,MACvFs5H,EAAahxD,EAAWo4D,EAAWC,EACvC,IAAKl6N,EAAM5kD,UAAW,CACpB,IAAI8F,EAAOshN,GAAgBxiK,GAC3B,GAAI2sF,EAAUzrI,GACZ,OAAO2wQ,GAAUxpO,EAAWhwC,EAAQ6I,EAAMmnC,IAAco9K,GAAW+J,WAAW,EAElF,CACA,IAAI5K,EAAgBoJ,GAA2B3lL,EAAWhwC,EAAOoJ,UAAWu+C,GAC5E,GAAI6yN,EAAWjuD,GACb,OAAO5oI,GAAW3jF,EAAQusN,EAAc1nN,SAAS2kN,IAEnD,IAAIixD,EAAoBnE,GAAkB9sD,EAAU+wD,EAAahuD,IAC7Du1D,EAA0BhgF,GAA6Bn6I,GAC3D,IAAK8yN,EACH,OAAOqH,EAA0BrjR,EAASN,KAAKwpD,GAASlpD,EAAShC,OAEnE,GAAI+9Q,EAAWC,GACb,OAAOjB,GAAUxpO,EAAWhwC,EAAQy6Q,EAAkB51Q,SAAS2kN,GAAWA,GAAU,GAEtF,IAAI0wD,EAAoBK,EAAaE,GACrC,OAAIP,GAAqBM,EAAWN,IAC9BlkD,GAAsBykD,EAAmBP,GACpCV,GAAUxpO,EAAWhwC,EAAQk6Q,EAAkBr1Q,SAAS2kN,GAAWA,GAAU,GAGpFs4D,EACKJ,GAAoB1hR,EAAQy6Q,EAAkB7tD,WAAW,GAE3DnuN,EAAShC,MAClB,EACIslR,GAAiB,SAAU/hR,EAAQgwC,EAAW2X,EAAOi6N,EAAUC,EAASvtI,GAC1E,IAAIi4E,EAAgBoJ,GAA2B3lL,EAAWhwC,EAAOoJ,UAAWu+C,GACxEq6N,EAAkBv/L,GAAO8pI,EAAc/hK,kBACvCg/J,EAAWx5K,IAAcquO,GAAWiC,KACxC,IAAK0B,EACH,OAAOvjR,EAAShC,OAElB,IAUIuoQ,EATAid,GADWz4D,EAAW62D,GAAYF,IACTngR,EAAOoJ,UAAWm3Q,GAAY,GAAIh0D,GAC3D21D,EAAoBltF,EAASitF,EAAevB,GAAO,IACnDr2P,EAAU23P,EAAgBpiR,KAC1BuiR,EAAejB,GAAsBgB,EAAmB73P,GAC5D,GAAI83P,GAAgB7tI,EAAU6tI,EAAat5Q,MAAO,CAChD,IAAIu5Q,EAAQx1P,KAAK89D,IAAIrgE,EAAU83P,EAAaviR,MACxCyiR,EAAQz1P,KAAK89D,IAAIrgE,EAAU83P,EAAah2P,OAC5C,OAAOqtP,GAAUxpO,EAAWhwC,EAAQmiR,EAAat5Q,KAAMu5Q,EAAQC,GAAO,EACxE,CASA,GANErd,EADE4c,EAASr1D,GACGA,EAAc1nN,UACnBg9Q,EAAQt1D,GACHA,EAAc1nN,SAAQ,GAEtBslN,GAAgBxiK,GAEf,CACf,IAAI26N,EAvNa,SAAUtyO,EAAW2G,EAAM89K,EAAa5rN,GAC3D,IACIktN,EACAwsD,EACAvC,EACAzzD,EAJAu3B,EAAc5sB,GAAYvgL,GAK1BpkB,EAAS,GACT8c,EAAO,EACPmzO,EAAgB,SAAUj2D,GAC5B,OACS9pI,GAAO8pI,EAAc/hK,iBAGhC,EACkB,IAAdxa,GACF+lL,EAAS+tB,EAAYxgP,KACrBi/Q,EAAYt4D,GACZ+1D,EAAYj2D,GACZwC,EAAgBD,GAAc1lK,MAAM/9C,KAEpCktN,EAAS+tB,EAAY5iG,KACrBqhI,EAAYx4D,GACZi2D,EAAY/1D,GACZsC,EAAgBD,GAAc3lK,OAAO99C,IAEvC,IAAIq3Q,EAAmBsC,EAAcj2D,GACrC,GACE,GAAKA,EAAcrsK,YAAnB,CAGA,IAAInI,EAAOyqO,EAAcj2D,GACzB,IAAIyzD,EAAUjoO,EAAMmoO,GAApB,CAGI3tP,EAAOnzB,OAAS,GAAKmjR,EAAUxqO,EAAM0qC,GAAOlwD,KAC9C8c,IAEF,IAAIo8K,EAAatrL,GAAM4X,GAGvB,GAFA0zK,EAAWr9L,SAAWm+L,EACtBd,EAAWp8K,KAAOA,EACdolL,EAAYhJ,GACd,OAAOl5L,EAETA,EAAOzzB,KAAK2sN,EAVZ,CAJA,QAeOc,EAAgBwJ,EAAOxJ,IAChC,OAAOh6L,CACT,CAyKyBkwP,CAAezyO,EAAWhwC,EAAOoJ,UAAWm3Q,GAAY,GAAIvb,GAC7E0d,EAAsBxB,GAAsBlsF,EAASstF,EAAgB5B,GAAO,IAAKr2P,GACrF,GAAIq4P,EACF,OAAOhB,GAAoB1hR,EAAQ0iR,EAAoBt0P,SAASw+L,WAAW,GAG7E,GADA81D,EAAsBjgM,GAAOuyG,EAASstF,EAAgB5B,GAAO,KAE3D,OAAOgB,GAAoB1hR,EAAQ0iR,EAAoBt0P,SAASw+L,WAAW,EAE/E,CACA,OAAiC,IAA7Bs1D,EAAkB9iR,OACbujR,GAAgB3iR,EAAQwpN,GAAUxrN,OAAOwrN,EAAWq4D,EAAUD,GAAUjkR,KAAI,SAAU86C,GAC3F,OAAOqhO,GAAiB95Q,EAAQy4C,EAAIm0K,WAAW,EACjD,IAEKnuN,EAAShC,MAClB,EACIkmR,GAAkB,SAAU3iR,EAAQm6M,GACtC,IAAIt3M,EAAM7C,EAAO4E,UAAUmB,SACvBsK,EAAOrQ,EAAOoJ,UAClB,GAAI+wM,EAAS,CACX,IAAIz7M,EAAO4tN,GAAcS,aAAalqN,GAClC0vB,EAASitP,GAA0BnvQ,EAAM3R,GAC7C,OAAOgb,GAAO6Y,EAAO0yB,UACvB,CAGE,OAFIvmD,EAAO4tN,GAAcQ,eAAejqN,GACpC0vB,EAASgtP,GAA8BlvQ,EAAM3R,GAC1C+a,GAAK8Y,EAAO0yB,UAEvB,EACI29N,GAAuB,SAAU5iR,EAAQm6M,EAASgT,GACpD,OAAOw1D,GAAgB3iR,EAAQm6M,GAASn8M,OAAOmvN,GAAmBrvN,QAAO,SAAU26C,GAEjF,OADAz4C,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,YACrB,CACT,GACF,EAEIi2D,GAAmB,SAAU7iR,EAAQy4C,GACvC,IAAI51C,EAAM7C,EAAO+E,IAAI2+E,YACrB7gF,EAAIklD,SAAStP,EAAIvY,YAAauY,EAAIx0B,UAClCphB,EAAIqlD,OAAOzP,EAAIvY,YAAauY,EAAIx0B,UAChCjkB,EAAO4E,UAAU6E,OAAO5G,EAC1B,EACIigR,GAAc,SAAUrzQ,EAAOlN,GAC7BkN,EACFlN,EAAI2iB,aAAa,oBAAqB,mBAEtC3iB,EAAImjB,gBAAgB,oBAExB,EACIq9P,GAAsB,SAAU/iR,EAAQ4yF,EAAOmgF,GACjD,OAAO2pG,GAAY9pL,EAAOmgF,GAAUp1K,KAAI,SAAU86C,GAEhD,OADAoqO,GAAiB7iR,EAAQy4C,GAClBs6H,CACT,GACF,EAuCIiwG,GAAS,SAAUhjR,EAAQ4yF,EAAOunH,GACpC,QAAO+W,GAA0BlxN,IAvChB,SAAUA,EAAQ4yF,EAAOunH,GAC1C,IAAIp4H,EAAW/hF,EAAOoJ,UAClB1K,EAAO4tN,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACrDk9Q,EAAmBpsQ,EAAMq/P,GAAgBl2Q,GAE7C,OADei+Q,GAAe9jE,EAAS8oE,EAAkBlhM,EAAUrjF,GACnDb,MAAK,SAAUk1K,GAC7B,OAAOgwG,GAAoB/iR,EAAQ4yF,EAAOmgF,EAC5C,GACF,CA+B6CmwG,CAAaljR,EAAQ4yF,EAAOunH,GAASr9M,QAClF,EACIqmR,GAAW,SAAUhpE,EAASn6M,EAAQojR,GACxC,QAAOlyD,GAA0BlxN,IAjgBlB,SAAUm6M,EAASn6M,GAClC,IAAI6C,EAAM7C,EAAO4E,UAAUmB,SACvB0yC,EAAM0hK,EAAUmS,GAAcS,aAAalqN,GAAOypN,GAAcQ,eAAejqN,GACnF,QAZ0B,SAAU7C,GACpC,OAAO9D,EAAW8D,EAAO4E,UAAUm5N,SAASqgD,OAC9C,CAUOiF,CAAsBrjR,KAEhBm6M,GAAWhZ,GAAe1oJ,GAC5Bs6I,IAAQ,EAAM/yL,EAAO4E,UAAW6zC,KAC7B0hK,IAAW9Y,GAAc5oJ,KAC5Bs6I,IAAQ,EAAO/yL,EAAO4E,UAAW6zC,GAI5C,CAqf6C6qO,CAAWnpE,EAASn6M,EACjE,EACIujR,GAAqB,SAAUvjR,GACjC,IAAI4yF,EAAQx6D,GAAK,MACb6qP,EAAmBpsQ,EAAMq/P,GAAgBl2Q,GAQ7C,OAPAA,EAAOmS,GAAG,cAAc,SAAUY,IAC5Bm+M,GAA0BlxN,IAAa02L,GAAIh2K,QAAQ5B,QAAU/L,EAAEslB,UAvCnD,SAAU69O,EAAgBnxQ,EAAK0wI,GACjD,IAAI+tI,EAAmB1uF,EAAMvrI,GAAYluC,GAAqBtW,EAAIo+E,WAAY,2CAA2C,SAAUpwE,GACjI,OAAOA,EAAEhO,GACX,IACI0+Q,EAAkBzuF,EAASwuF,EAAkBtN,GAC7CwN,EAAgB1uF,EAASv/C,EAAMygI,GACnCnhF,EAAO77K,GAAWuqQ,EAAiBC,GAAgB7sQ,EAAMisQ,IAAa,IACtE/tF,EAAO77K,GAAWwqQ,EAAeD,GAAkB5sQ,EAAMisQ,IAAa,GACxE,CAgCMa,CAAcV,EAAkBjjR,EAAO+E,IAAKgO,EAAED,SA/BrB,SAAU9S,EAAQ4yF,GAC/C,GAAI5yF,EAAO4E,UAAU2+I,gBAAsC,IAArBvjJ,EAAO0lO,WAAsB9yI,EAAM3rE,MAAO,CAC9E,IAAIwxB,EAAM6zK,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACpDumN,GAAcY,eAAez0K,KAA0B,IArwChD,SAAUA,GACvB,OAAO0oJ,GAAe1oJ,IAAQ4oJ,GAAc5oJ,EAC9C,CAmwC6CmrO,CAASnrO,KAChDoqO,GAAiB7iR,EAAQ4xN,GAAoBh/H,EAAM3rE,MAAOwxB,IAC1Dm6C,EAAMtrE,IAAI,MAEd,CACF,CAwBMu8P,CAAyB7jR,EAAQ4yF,GAvBT,SAAUsjL,EAAgBl2Q,EAAQ4yF,EAAO6iD,GACrE,GAAIz1I,EAAO4E,UAAU2+I,cAAe,CAClC,IAAIugI,EAAU9uF,EAASv/C,EAAMygI,GAC7BnhF,EAAO+uF,GAAS,SAAUC,GACxB,IAAItrO,EAAM6zK,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACxDq3Q,GAAalH,EAAgBl2Q,EAAOoJ,UAAWqvC,GAAK56C,MAAK,SAAUk1K,GACjE,OAAOgwG,GAAoB/iR,EAAQ4yF,EAAOmgF,EAC5C,GACF,GACF,CACF,CAcMixG,CAAwBf,EAAkBjjR,EAAQ4yF,EAAO7/E,EAAED,SAE/D,IACO8/E,CACT,EACIqxL,GAAeptQ,EAAMssQ,IAAU,GAC/Be,GAAertQ,EAAMssQ,IAAU,GAC/BgB,GAAuB,SAAUnkR,EAAQm6M,EAASvnH,GACpD,GAAIs+H,GAA0BlxN,GAAS,CACrC,IAAIokR,EAAYzB,GAAgB3iR,EAAQm6M,GAASl9M,YAAW,WAC1D,IAAI4F,EAAM7C,EAAO4E,UAAUmB,SAC3B,OAAOo0M,EAAUmS,GAAcS,aAAalqN,GAAOypN,GAAcQ,eAAejqN,EAClF,IACA,OAAOu6Q,GAAavmQ,EAAMq/P,GAAgBl2Q,GAASA,EAAOoJ,UAAWg7Q,GAAWtmR,QAAO,SAAUgwB,GAC/F,IAAIu2P,EAAa/G,GAAQxvP,GACzB,OAAO4uP,GAAY9pL,EAAOyxL,GAAYvmR,QAAO,SAAU26C,GAErD,OADAoqO,GAAiB7iR,EAAQy4C,IAClB,CACT,GACF,GACF,CACE,OAAO,CAEX,EAiBI6rO,GAAmB,SAAUtkR,EAAQ4yF,GACvC,OAAO,SAAUmgF,GACf,OAAO2pG,GAAY9pL,EAAOmgF,GAAUj1K,QAAO,SAAU26C,GAEnD,OADAoqO,GAAiB7iR,EAAQy4C,IAClB,CACT,GACF,CACF,EACI8rO,GAAe,SAAUvkR,EAAQ4yF,EAAOl0F,EAAM+Y,GAChD,IAAIsqE,EAAW/hF,EAAOoJ,UAClB65Q,EAAmBpsQ,EAAMq/P,GAAgBl2Q,GAC7CA,EAAO+G,YAAY0pE,QAAO,WACxBzwE,EAAO4E,UAAU6E,OA3BI,SAAU/K,EAAM+Y,GACvC,IAAIkwC,EAAQr2C,SAASw2C,cAGrB,OAFAH,EAAMI,SAASrpD,EAAKwhC,YAAaxhC,EAAKulB,UACtC0jC,EAAMO,OAAOzwC,EAAGyoB,YAAazoB,EAAGwM,UACzB0jC,CACT,CAsB4B68N,CAAmB9lR,EAAM+Y,IACjDzX,EAAOsH,YAAY,UACnB81Q,GAAa6F,EAAkBlhM,EAAUuqI,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,WAAWpI,IAAI0+D,IAAQ1+D,IAAI2mR,GAAiBtkR,EAAQ4yF,GAC7I,IACA5yF,EAAOu/J,aACT,EA2CIklH,GAAoB,SAAUzkR,EAAQ4yF,EAAOunH,GAC/C,GAAIn6M,EAAO4E,UAAU2+I,eAAiB2tE,GAA0BlxN,GAAS,CACvE,IAAItB,EAAO4tN,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACzD,OAzC2B,SAAU/F,EAAQ4yF,EAAOunH,EAASz7M,GAC/D,IAAIqjF,EALQ,SAAUA,EAAUl5E,GAEhC,OADkB8rN,GAAiB9rN,EAAMk5E,IACNA,CACrC,CAEiB2iM,CAAQ1kR,EAAOoJ,UAAW1K,EAAKwhC,aAC1C+iP,EAAmBpsQ,EAAMq/P,GAAgBl2Q,GACzC49Q,EAAeR,GAAa6F,EAAkBlhM,EAAUrjF,GAC5D,OAAOk/Q,EAAa//Q,MAAK,SAAUk1K,GACjC,OAAIonC,EACKpnC,EAASp2K,KAAKP,EAASqC,EAASN,KAAKk+D,GAAO02G,KAAat0K,EAAShC,KAAML,EAASqC,EAASN,KAAKm/Q,GAAQvqG,KAAat0K,EAAShC,MAE7Hs2K,EAASp2K,KAAK8B,EAAShC,KAAML,EAASqC,EAASN,KAAKm/Q,GAAQvqG,KAAat0K,EAAShC,KAAML,EAASqC,EAASN,KAAKk+D,GAAO02G,KAEjI,IAAGp1K,IAAI2mR,GAAiBtkR,EAAQ4yF,IAAQ31F,YAAW,WACjD,IAAI0nR,EAAajgN,GAASy1I,EAASp4H,EAAUrjF,GACzCm/Q,EAAa8G,EAAW9mR,MAAK,SAAU46C,GACzC,OAAO2kO,GAAa6F,EAAkBlhM,EAAUtpC,EAClD,IACA,OAAOp+B,GAAMujQ,EAAcC,GAAY,WACrC,OAAOzH,GAAe6M,EAAkBlhM,EAAUrjF,GAAMZ,QAAO,SAAUyE,GACvE,QAhD4B,SAAUA,GAC5C,OAAO8X,GAAM09M,GAAgBx1N,GAAMy1N,GAAez1N,IAAM,SAAUi3O,EAAUI,GAC1E,IAAIgrC,EAAqBtO,IAAkB,EAAM98B,GAC7CqrC,EAAoBvO,IAAkB,EAAO18B,GACjD,OAAO/hB,GAAat1N,EAAKqiR,GAAoB7mR,QAAO,SAAU06C,GAC5D,OAAOA,EAAIo0K,QAAQg4D,EACrB,GACF,IAAG7nR,OAAM,EACX,CAwCY8nR,CAA8BviR,KAChCq5O,GAAgB57O,EAAQm6M,EAAS9+L,GAAqB9Y,KAC/C,EAIX,GACF,IAAG7E,SAAQ,WACT,OAAOmgR,EAAWhgR,MAAK,SAAUkQ,GAC/B,OAAO42Q,EAAWhnR,KAAI,SAAU8Z,GAM9B,OALI0iM,EACFoqE,GAAavkR,EAAQ4yF,EAAOl0F,EAAM+Y,GAElC8sQ,GAAavkR,EAAQ4yF,EAAOn7E,EAAI/Y,IAE3B,CACT,GACF,GACF,IAAG1B,OAAM,EACX,GACF,CAIW+nR,CAAyB/kR,EAAQ4yF,EAAOunH,EAASz7M,EAC1D,CACA,OAAO,CACT,EAQIsmR,GAAkB,SAAUziR,GAC9B,OAAgC,IAAzB62L,GAAgB72L,EACzB,EAaI0iR,GAAgB,SAAUjlR,EAAQm6M,GACpC,IAAIr7D,EAAUzjI,GAAqBrb,EAAOoJ,WACtCm4O,EAAWlmO,GAAqBrb,EAAO4E,UAAUqM,YACjDi0Q,EAAgBlwF,EAxBC,SAAUl2C,EAASyiG,GACxC,IAAIzuO,EAAU2kO,GAAe8J,EAAUziG,GACvC,OAAOo2C,EAAYpiL,EAASktL,IAAWrjM,KAAKP,EAAS0W,IAAU,SAAUgR,GACvE,OAAOhR,EAAQ+E,MAAM,EAAGiM,EAC1B,GACF,CAmB+BqhQ,CAAiBrmI,EAASyiG,GAAWyjC,IAClE,OAAOtrQ,GAAOwrQ,GAAepnR,QAAO,SAAU0I,GAC5C,IA7uOsCsN,EA6uOlC6tO,EAAUr1B,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UAC5D,SA/2CkC,SAAUo0M,EAASwnC,EAASp/O,GAChE,OAAO8X,GAAM09M,GAAgBx1N,GAAMy1N,GAAez1N,IAAM,SAAUi3O,EAAUI,GAC1E,IAAIgrC,EAAqBtO,IAAkB,EAAM98B,GAC7CqrC,EAAoBvO,IAAkB,EAAO18B,GAC7CwrC,EAAoB9O,IAAkB,EAAO30B,GACjD,OAAIxnC,EACK0d,GAAat1N,EAAK6iR,GAAmBtnR,QAAO,SAAU0gR,GAC3D,OAAOA,EAAQ3xD,QAAQg4D,IAAsBljC,EAAQ90B,QAAQ+3D,EAC/D,IAEO9sD,GAAav1N,EAAK6iR,GAAmBtnR,QAAO,SAAUqhK,GAC3D,OAAOA,EAAQ0tD,QAAQ+3D,IAAuBjjC,EAAQ90B,QAAQg4D,EAChE,GAEJ,IAAG7nR,OAAM,EACX,CAg2CQqoR,CAAgClrE,EAASwnC,EAASn7O,EAAOzB,OA9uOvB+O,EA8uO0DtN,EA7uO3F0xN,GAAYpkN,EAAQ/O,MAAQgkP,GAAsBj1O,EAAQ/O,QA2tO1C,SAAUo1M,EAASn6M,EAAQwG,EAAQ0+Q,GAC1D,IAAII,EAAoBzuQ,EAAMs0O,GAAiBnrP,GAC3CypP,EAAc30D,EAAME,EAASkwF,EAAeI,IAAoB,SAAU/iR,GAC5E,OAAOA,EAAIwC,GACb,IACA,GAA2B,IAAvB0kP,EAAYrqP,OACdw8O,GAAgB57O,EAAQm6M,EAAS3zM,OAC5B,CACL,IAAIiyC,EA/uOqB,SAAUuiH,EAAYyuF,GACjD,IAAI/nD,EAAiBwnD,IAAqB,GACtCq8B,EAAY/7B,GAAoCC,EAAa/nD,EAAe38L,KAGhF,OAFAw0L,GAASl+K,GAAqB2/I,GAAa0mC,GAC3Cj8K,GAASpK,GAAqB2/I,IACvBsxD,GAAci5D,EAAW,EAClC,CAyuOcC,CAAuBh/Q,EAAOzB,IAAK0kP,GAC7CzpP,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,UAC9B,CACF,CAQM64D,CAAmBtrE,EAASn6M,EAAQwG,EAAQ0+Q,GACrC,GAIX,GACF,EACIQ,GAAoB,SAAU1lR,EAAQm6M,GACxC,QAAOn6M,EAAO4E,UAAU2+I,eAAgB0hI,GAAcjlR,EAAQm6M,EAChE,EAEIwrE,GAAgB,SAAU3lR,EAAQm6M,EAASrmM,GAG7C,OAFA9T,EAAOolP,oBAAoBs2B,gBAC3B9/B,GAAgB57O,EAAQm6M,EAAS9+L,GAAqBvH,KAC/C,CACT,EAmBI8xQ,GAAoB,SAAU5lR,EAAQm6M,GACxC,OAAOn6M,EAAO4E,UAAU2+I,cAnBR,SAAUvjJ,EAAQm6M,GAClC,IAAI0rE,EAAc1rE,EAAU28B,GAAgBC,GACxC/mM,EAAYmqK,EAAUiT,GAAW0J,SAAW1J,GAAW+J,UACvDwqB,EAAUhsB,GAA2B3lL,EAAWhwC,EAAOoJ,UAAWpJ,EAAO4E,UAAUmB,UACvF,OAAI8/Q,EAAYlkC,GACPgkC,GAAc3lR,EAAQm6M,EAASwnC,EAAQ98O,SAASs1M,IAEhD17M,EAASC,KAAK43Q,GAAkBn8D,EAASwnC,IAAU3jP,QAAO,SAAUy6C,GACzE,OAAOotO,EAAYptO,IAAQu9K,GAAsB2rB,EAASlpM,EAC5D,IAAG36C,QAAO,SAAU26C,GAClB,OAAOktO,GAAc3lR,EAAQm6M,EAAS1hK,EAAI5zC,SAASs1M,GACrD,GAEJ,CAM0C2rE,CAAY9lR,EAAQm6M,GAL5C,SAAUn6M,EAAQm6M,GAClC,IAAIylC,EAAe5/O,EAAO4E,UAAUC,UACpC,QAAOo2L,GAAU2kD,IAAgB+lC,GAAc3lR,EAAQm6M,EAASylC,EAClE,CAEyEw6B,CAAYp6Q,EAAQm6M,EAC7F,EASI4rE,GAAmB,SAAU5qR,GAC/B,IAAIy5B,EAAS7T,SAAS5lB,EAAO,IAC7B,OAAOksB,MAAMuN,GAAU,EAAIA,CAC7B,EACIoxP,GAAqB,SAAUC,EAAWnyQ,GAG5C,OAFsBmyQ,GAzznBA,UAAfvqR,GAyznBsCoY,GAAW,SAAW,YACtB,QAAhC6zB,GAAM7zB,EAAS,aAAyB,SAAW,QAElE,EAmBIoyQ,GAAa,SAAUlmR,GACzB,IAAIurP,EAAS46B,GAAkBnmR,GAC/B,OAAQA,EAAOwS,KAAKC,eAAiB84O,EAAOnsP,OAAS,GAVlC,SAAUY,EAAQurP,GACrC,OAAOxtP,GAAOwtP,GAAQ,SAAUnsH,GAC9B,IAAIgnJ,EAAkBJ,GAAmBr1D,GAAsB3wN,GAASo/H,GACpEinJ,EAAc9/P,GAAO64G,EAAOgnJ,GAAiBzoR,IAAIooR,IAAkB/oR,MAAM,GAE7E,MAA2B,UADLgD,EAAO+E,IAAIk9E,mBAAmBm9C,EAAMr6H,MACpBshR,EAAc,CACtD,GACF,CAG4DC,CAAetmR,EAAQurP,GACnF,EACIg7B,GAAkB,SAAU78P,GAC9B,OAAO02K,GAAO12K,IAAO22K,GAAW32K,EAClC,EAIIy8P,GAAoB,SAAUnmR,GAChC,OAAOg1L,GAr2diBoG,EAq2dEp7L,EAAO4E,UAAU6mP,oBAp2dpC32D,EAAMsG,EAAO//K,MAo2d6C,SAAUqO,GACzE,OAAQ68P,GAAgB78P,KALA,SAAUA,GACpC,OAAOhG,GAAOgG,GAAI5rB,OAAOyoR,GAC3B,CAGoCC,CAAsB98P,IA7CjD6iB,GA6CmE7iB,GA7CjD,SAAUnnB,GACjC,OAAOu4L,GAAwBv4L,EAAIwC,MAAQg2L,GAAyBx4L,EAAIwC,IAC1E,IAAGjH,QAAO,SAAUyE,GAClB,OAAOu4L,GAAwBv4L,EAAIwC,IACrC,GA0CA,IAv2dc,IAAUq2L,CAw2d1B,EACIzwK,GAAS,SAAU3qB,EAAQmnJ,GAC7B,IAAIpiJ,EAAM/E,EAAO+E,IAAKH,EAAY5E,EAAO4E,UAAWytI,EAAYryI,EAAOqyI,UACnEo0I,EAn8be,SAAUzmR,GAC7B,OAAOA,EAAOE,SAAS,cAAe,OAAQ,SAChD,CAi8boBwmR,CAAe1mR,GAC7B2mR,EAAa,YAAYnwL,KAAKiwL,GAAa,GAC3CG,EAAc7lQ,SAAS0lQ,EAAa,IACpCR,EAAYt1D,GAAsB3wN,GAClC6tP,EAAkB99B,GAAmB/vN,GACpCA,EAAOkoK,kBAAkB,wBAA2BloK,EAAOkoK,kBAAkB,sBACxD,KAApB2lF,GAA2B9oP,EAAIE,UAAUL,EAAUC,UAAWE,EAAIi9E,UACpEqwD,EAAUhzI,MAAM,OAGpB01L,EAAOoxF,GAAkBnmR,IAAS,SAAUo/H,IA7C1B,SAAUr6H,EAAKoiJ,EAAS8+H,EAAW9qR,EAAOw5E,EAAM7gE,GAClE,IAAIsyQ,EAAkBJ,GAAmBC,EAAW5qQ,GAAqBvH,IACzE,GAAgB,YAAZqzI,EAAuB,CACzB,IAAI0/H,EAAaj6P,KAAKnF,IAAI,EAAGs+P,GAAiBjyQ,EAAQoH,MAAMkrQ,IAAoBjrR,GAChF4J,EAAI09M,SAAS3uM,EAASsyQ,EAAiBS,EAAaA,EAAalyM,EAAO,GAC1E,MACMkyM,EAAad,GAAiBjyQ,EAAQoH,MAAMkrQ,IAAoBjrR,EAAQw5E,EAC5E5vE,EAAI09M,SAAS3uM,EAASsyQ,EAAiBS,EAE3C,CAqCIC,CAAc/hR,EAAKoiJ,EAAS8+H,EAAWW,EAAaD,EAAYvnJ,EAAMr6H,IACxE,GACF,EAEIgiR,GAAkB,SAAU/mR,EAAQq5Q,GACtC,GAAIr5Q,EAAO4E,UAAU2+I,eAAiB2iI,GAAWlmR,GAAS,CACxD,IAAI+E,EAAM/E,EAAO+E,IACblC,EAAM7C,EAAO4E,UAAUmB,SACvB0yC,EAAM6zK,GAAcQ,eAAejqN,GACnCu8H,EAAQr6H,EAAIE,UAAUpC,EAAIsG,eAAgBpE,EAAIi9E,SAClD,GAAc,OAAVo9C,GAAkB24G,GAAiB18N,GAAqB+jH,GAAQ3mF,GAElE,OADA9tB,GAAO3qB,EAAQ,YACR,CAEX,CACA,OAAO,CACT,EAEIgnR,GAAgB,SAAUhnR,EAAQmnJ,GACpCnnJ,EAAOqiF,SAAS/6E,YAAY6/I,GAAS,EAAO,KAC9C,EA6DI1kD,GAAW,SAAUh5E,GACvB,YAAsBjsB,IAAlBisB,EAAMi5E,SAAkD,IAAzBj5E,EAAMi5E,QAAQtjG,OACxCX,EAAShC,OAEXgC,EAASN,KAAKsrB,EAAMi5E,QAAQ,GACrC,EAuDIukL,GAAiB,SAAU7kB,EAAev5P,GAC5C,OAAOqR,GAAMkoP,EAAev5P,EAAKrG,SACnC,EACI0kR,GAAgB,SAAU9kB,EAAev5P,GAC3C,QAAI4xL,GAAS5xL,MAEFkxL,GAAYlxL,KACbo+Q,GAAe7kB,EAAev5P,KAAUixN,GAAiBjxN,EAIrE,EAMIs+Q,GAAuB,SAAU/kB,EAAev5P,GAClD,GAAI4xL,GAAS5xL,GAAO,CAClB,GAA8B,IAA1BA,EAAKqgD,UAAU9pD,OACjB,OAAO,EACF,GAAI,QAAQqE,KAAKoF,EAAKqgD,cAAgBrgD,EAAKsiB,aAAe87P,GAAe7kB,EAAev5P,EAAKsiB,cAClG,OAAO,CAEX,CACA,OAAO,CACT,EACIg6O,GAAgB,SAAUnlQ,GAC5B,IAIIklQ,EAAeX,EAAU75O,EAJzB3lB,EAAM/E,EAAO+E,IAAKH,EAAY5E,EAAO4E,UACrCiB,EAAS7F,EAAO6F,OAAQu8P,EAAgBv8P,EAAO+mM,mBAC/C/jM,EAAOjE,EAAUqM,WACjB8wE,EAAW/hF,EAAOoJ,UAElBykP,EAAkB99B,GAAmB/vN,GACzC,GAAK6I,GAASkxL,GAAYlxL,IAAUglP,EAApC,CAGA,IAAIu5B,EAAerlM,EAASv/E,SAASC,cACrC,GAAKoD,EAAOunM,aAAag6E,EAAcv5B,EAAgBprP,iBA1BpC,SAAU2/P,EAAezrN,EAAM9tC,GAClD,OAAO/K,EAAOgV,GAAQuI,GAAqBxS,GAAOwS,GAAqBs7B,KAAQ,SAAUp0C,GACvF,OAAO0kR,GAAe7kB,EAAe7/P,EAAIwC,IAC3C,GACF,CAsB2EsiR,CAAejlB,EAAergL,EAAUl5E,GAAjH,CAGA,IAAIhG,EAAM+B,EAAUmB,SAChBoD,EAAiBtG,EAAIsG,eACrBq/C,EAAc3lD,EAAI2lD,YAClBl/C,EAAezG,EAAIyG,aACnBm/C,EAAY5lD,EAAI4lD,UAChB6+N,EAAmB5wO,GAAS12C,GAEhC,IADA6I,EAAOk5E,EAAS5+E,WACT0F,GACL,GAAIq+Q,GAAc9kB,EAAev5P,GAAO,CACtC,GAAIs+Q,GAAqB/kB,EAAev5P,GAAO,CAC7C07P,EAAW17P,EACXA,EAAOA,EAAKsiB,YACZpmB,EAAImF,OAAOq6P,GACX,QACF,CACKW,IACHA,EAAgBngQ,EAAIqF,OAAOyjP,EAAiB79B,GAAwBhwN,IACpE6I,EAAKmB,WAAWC,aAAai7P,EAAer8P,GAC5C6hB,GAAU,GAEZ65O,EAAW17P,EACXA,EAAOA,EAAKsiB,YACZ+5O,EAAc76P,YAAYk6P,EAC5B,MACEW,EAAgB,KAChBr8P,EAAOA,EAAKsiB,YAGZT,GAAW48P,IACbzkR,EAAIklD,SAAS5+C,EAAgBq/C,GAC7B3lD,EAAIqlD,OAAO5+C,EAAcm/C,GACzB7jD,EAAU6E,OAAO5G,GACjB7C,EAAOu/J,cAjCT,CAJA,CAuCF,EAeI8lF,GAA0B,SAAUrlP,EAAQunR,GAC1CA,EAAoB/hQ,aAAa,oBACnCi8K,GAAwB8lF,GALF,SAAUvnR,GAClCA,EAAO4E,UAAU6E,OAAOzJ,EAAO4E,UAAUmB,SAC3C,CAIIyhR,CAAoBxnR,GACpBA,EAAO4E,UAAUyM,eAAek2Q,GAEpC,EACIE,GAAuB,SAAUznR,EAAQ+S,GAC3C,IAAIw0Q,EAhBwB,SAAUvnR,GACtC,OAAO0sC,GAAWrxB,GAAqBrb,EAAOoJ,WAAY,qBAAqBzL,KAAI,SAAU4E,GAC3F,OAAOA,EAAIwC,GACb,IAAGzH,WACL,CAY4BoqR,CAAwB1nR,GAClD,GAAKunR,EAGL,MAAe,qBAAXx0Q,EAAE7X,MACJ6X,EAAEgC,iBACFhC,EAAEkX,uBACFo7N,GAAwBrlP,EAAQunR,SAG9BrmF,GAAWqmF,KACbliC,GAAwBrlP,EAAQunR,GAChCvnR,EAAO+G,YAAYvM,OAEvB,EAKImtR,GAA2B5sF,GAoB3B6sF,GAAe,SAAU5nR,EAAQgwC,EAAW2X,GAC9C,IAAIm8L,EAAc5sB,GAAYl3N,EAAOoJ,WACjCy+Q,EAA2BhxQ,EAAMi/M,GAAsC,IAAd9lL,EAAkB8zM,EAAYxgP,KAAOwgP,EAAY5iG,MAC9G,GAAIv5F,EAAM5kD,WA3oca,SAAU/C,GACjC,MAAsC,KAA/B+vN,GAAmB/vN,EAC5B,CAyocyB8nR,CAAmB9nR,GAAS,CACjD,IAAI0rP,EAAM1rP,EAAO+E,IAAIE,UAAU0iD,EAAMx+C,eAAgB,OACrD,IAAKuiP,EACH,OAGF,IADem8B,EAAyBv7D,GAAcQ,eAAenlK,IACtD,CACb,IAAIogO,EAjBY,SAAU/nR,GAC9B,IAAIgoR,EAAYhoR,EAAO+E,IAAIqF,OAAO2lN,GAAmB/vN,IAIrD,QAHK02L,GAAIC,IAAMD,GAAIC,IAAM,MACvBqxF,EAAUvsQ,UAAY,2BAEjBusQ,CACT,CAWqBC,CAAgBjoR,GACb,IAAdgwC,EACFhwC,EAAOoR,EAAEs6O,GAAK9kM,MAAMmhO,GAEpB/nR,EAAOoR,EAAEs6O,GAAK/kM,OAAOohO,GAEvB/nR,EAAO4E,UAAUI,OAAO+iR,GAAU,GAClC/nR,EAAO4E,UAAU8P,UACnB,CACF,CACF,EAiBIwzQ,GAAU,SAAUloR,EAAQm6M,GAC9B,OAjBuB,SAAUn6M,EAAQm6M,GACzC,IAAInqK,EAAYmqK,EAAUiT,GAAW0J,SAAW1J,GAAW+J,UACvDxvK,EAAQ3nD,EAAO4E,UAAUmB,SAC7B,OA3C8B,SAAUiqC,EAAWhwC,EAAQ2nD,GAC3D,OAAOg6N,GAAiB3hR,EAAQgwC,EAAW2X,EAAOuvL,GAA8BC,GAA6BwwC,GAC/G,CAyCSQ,CAA0Bn4O,EAAWhwC,EAAQ2nD,GAAOjqD,SAAQ,WAEjE,OADAkqR,GAAa5nR,EAAQgwC,EAAW2X,GACzBlpD,EAAShC,MAClB,GACF,CAUS2rR,CAAmBpoR,EAAQm6M,GAASr8M,QAAO,SAAUuqR,GAE1D,OADA5G,GAAYzhR,EAAQqoR,IACb,CACT,GACF,EACIC,GAAU,SAAUtoR,EAAQuoR,GAC9B,OAfqB,SAAUvoR,EAAQuoR,GACvC,IAAIv4O,EAAYu4O,EAAO,GAAK,EACxB5gO,EAAQ3nD,EAAO4E,UAAUmB,SAC7B,OAhD4B,SAAUiqC,EAAWhwC,EAAQ2nD,GAOzD,OAAOo6N,GAAe/hR,EAAQgwC,EAAW2X,GAN1B,SAAU4kK,GACvB,OAAO2qB,GAA6B3qB,IAAkByqB,GAAczqB,EACtE,IACc,SAAUA,GACtB,OAAO4qB,GAA4B5qB,IAAkB0qB,GAAa1qB,EACpE,GACmEo7D,GACrE,CAwCSa,CAAwBx4O,EAAWhwC,EAAQ2nD,GAAOjqD,SAAQ,WAE/D,OADAkqR,GAAa5nR,EAAQgwC,EAAW2X,GACzBlpD,EAAShC,MAClB,GACF,CAQSgsR,CAAiBzoR,EAAQuoR,GAAMzqR,QAAO,SAAUuqR,GAErD,OADA5G,GAAYzhR,EAAQqoR,IACb,CACT,GACF,EACIK,GAAuB,SAAU1oR,EAAQm6M,GAE3C,OAAOyoE,GAAqB5iR,EAAQm6M,EADhBA,EAAUg9B,GAA8BD,GAE9D,EAEIyxC,GAAW,SAAU9/Q,GACvB,OAAOgsL,EAAW,CAAC,cAAen5L,GAAKmN,GACzC,EACI+/Q,GAAc,SAAUpiR,GAC1B,IAAI3D,EAAMyO,SAASw2C,cAGnB,OAFAjlD,EAAI0G,eAAe/C,EAAOzB,KAC1BlC,EAAIolD,aAAazhD,EAAOzB,KACjBlC,CACT,EACIgmR,GAAgB,SAAUlyO,EAAMp0C,EAAK43M,GACnCA,EACF5uL,GAASorB,EAAMp0C,GAEfytE,GAAQr5B,EAAMp0C,EAElB,EA4BIumR,GAA0B,SAAU9oR,EAAQm6M,GAC9C,IAAIxjK,EAAOt7B,GAAqBrb,EAAOoJ,WACnCqvC,EAAM6zK,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACpDgtN,EAAYhD,GAAmB/vN,GAC/B+oR,EAAiB/4D,GAAwBhwN,GAC7C,OAZ0B,SAAUy4C,EAAK9B,GACzC,IAAI5c,EAASljB,EAAM2L,GAAIm0B,GACvB,OAAOpK,GAAUlxB,GAAqBo9B,EAAIvY,aAAc8/J,GAAWjmK,GAAQ/7B,OAAO2qR,GACpF,CASSK,CAAsBvwO,EAAK9B,GAAM74C,QAAO,WAC7C,GATsB,SAAU64C,EAAMwjK,EAAS1hK,GACjD,OAAO0hK,EA3/BU,SAAU5+L,EAAOk9B,GAClC,OAAO+mO,GAA0BjkQ,EAAOk9B,GAAKqmO,QAAQ/hR,QACvD,CAy/BmBksR,CAAatyO,EAAK5xC,IAAK0zC,GA9/BtB,SAAUl9B,EAAOk9B,GACnC,OAAO8mO,GAA8BhkQ,EAAOk9B,GAAKqmO,QAAQ/hR,QAC3D,CA4/BiDmsR,CAAcvyO,EAAK5xC,IAAK0zC,EACzE,CAOQ0wO,CAAoBxyO,EAAMwjK,EAAS1hK,GAAM,CAC3C,IAAI51C,EArBY,SAAU8zC,EAAM2sN,EAAen5P,EAAOgwM,GAC1D,MAAsB,KAAlBmpD,EAdS,SAAU3sN,EAAMwjK,GAC7B,IAAIsZ,EAAKp4M,GAAqB,MAE9B,OADAwtQ,GAAclyO,EAAM88K,EAAItZ,GACjByuE,GAAYn1D,EACrB,CAWW21D,CAASzyO,EAAMwjK,GAVR,SAAUxjK,EAAMwjK,EAASqZ,EAAWrpN,GACpD,IAAIi1H,EAAQ/jH,GAAqBm4M,GAC7BC,EAAKp4M,GAAqB,MAI9B,OAHA+J,GAASg6G,EAAOj1H,GAChBohB,GAAS6zG,EAAOq0F,GAChBo1D,GAAclyO,EAAMyoF,EAAO+6E,GACpByuE,GAAYn1D,EACrB,CAKW41D,CAAY1yO,EAAMwjK,EAASmpD,EAAen5P,EAErD,CAegBm/Q,CAAgB3yO,EAAMo8K,EAAWg2D,EAAgB5uE,GAE3D,OADAn6M,EAAO4E,UAAU6E,OAAO5G,IACjB,CACT,CACE,OAAO,CAEX,GACF,EACI0mR,GAAU,SAAUvpR,EAAQm6M,GAC9B,QAAIn6M,EAAO4E,UAAU2+I,eACZulI,GAAwB9oR,EAAQm6M,EAI3C,EAsBI/7K,GAAS,SAAU7/B,GAErB,IADA,IAAIlD,EAAI,GACCqb,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCrb,EAAEqb,EAAK,GAAK9U,UAAU8U,GAExB,OAAO,WACL,OAAOnY,EAAEc,MAAM,KAAMhE,EACvB,CACF,EACIiqE,GAAU,SAAU93B,EAAUh8B,GAChC,OAAO8L,EAfK,SAAUkwB,EAAUh8B,GAChC,OAAO3T,EAhBa,SAAU2vC,GAC9B,OAAOsnJ,EAAMtnJ,GAAU,SAAUq5H,GAC/B,OAAOplK,GAAS,CACdyT,UAAU,EACVD,QAAQ,EACRE,SAAS,EACTC,SAAS,EACTJ,QAAS,EACTopB,OAAQjiC,GACP0qK,EACL,GACF,CAKc2iH,CAAgBh8O,IAAW,SAAUq5H,GAC/C,OALe,SAAUA,EAASr1J,GACpC,OAAOA,EAAIwD,UAAY6xJ,EAAQ7xJ,SAAWxD,EAAI0D,WAAa2xJ,EAAQ3xJ,UAAY1D,EAAIyD,SAAW4xJ,EAAQ5xJ,QAAUzD,EAAI2D,UAAY0xJ,EAAQ1xJ,SAAW3D,EAAI4D,UAAYyxJ,EAAQzxJ,OAC7K,CAGWq0Q,CAAa5iH,EAASr1J,GAAO,CAACq1J,GAAW,EAClD,GACF,CAWgB6iH,CAAQl8O,EAAUh8B,IAAM,SAAUq1J,GAC9C,OAAOA,EAAQzoI,QACjB,GACF,EAEIurP,GAAU,SAAU3pR,EAAQm6M,GAC9B,IAAInqK,EAAYmqK,EAAUiT,GAAW0J,SAAW1J,GAAW+J,UACvDxvK,EAAQ3nD,EAAO4E,UAAUmB,SAC7B,OAAO47Q,GAAiB3hR,EAAQgwC,EAAW2X,EAAOmvL,GAAeC,GAAc97C,IAAWn9L,QAAO,SAAUuqR,GAEzG,OADA5G,GAAYzhR,EAAQqoR,IACb,CACT,GACF,EACIuB,GAAU,SAAU5pR,EAAQuoR,GAC9B,IAAIv4O,EAAYu4O,EAAO,GAAK,EACxB5gO,EAAQ3nD,EAAO4E,UAAUmB,SAC7B,OAAOg8Q,GAAe/hR,EAAQgwC,EAAW2X,EAAOmvL,GAAeC,GAAc97C,IAAWn9L,QAAO,SAAUuqR,GAEvG,OADA5G,GAAYzhR,EAAQqoR,IACb,CACT,GACF,EACIwB,GAAqB,SAAU7pR,EAAQm6M,GAEzC,OAAOyoE,GAAqB5iR,EAAQm6M,EADlBA,EAAU48B,GAAeD,GAE7C,EAwCIgzC,GAAiB,SAAUC,EAAeC,EAAgBx6I,EAAOn0I,EAAG+sB,GACtE,IAAIu0E,EAAQpzC,GAAYluC,GAAqBm0H,GAAQ,iBAAiB7xI,KAAI,SAAUoV,GAClF,OAAOA,EAAEhO,GACX,IACIklR,EAAUj1F,EAhCC,SAAU+0F,EAAeG,GACxC,OAAOrsR,EAAKqsR,GAAK,SAAUv0G,GACzB,IAAI59H,EAZM,SAAUA,EAAMvG,GAC5B,MAAO,CACL5xC,KAAMm4C,EAAKn4C,KAAO4xC,EAClBtpB,IAAK6vB,EAAK7vB,IAAMspB,EAChBrlB,MAAO4rB,EAAK5rB,OAAQqlB,EACpBplB,OAAQ2rB,EAAK3rB,QAASolB,EACtBtlB,MAAO6rB,EAAK7rB,MAAQslB,EACpB3pB,OAAQkwB,EAAKlwB,OAAS2pB,EAE1B,CAGe24O,CAAQhqP,GAAMw1I,EAAG/tJ,0BAA2B,GACvD,MAAO,CACL,CACEvsB,EAAG08C,EAAKn4C,KACRwoB,EAAG2hQ,EAAchyO,GACjBmzB,KAAMyqG,GAER,CACEt6K,EAAG08C,EAAK5rB,MACR/D,EAAG2hQ,EAAchyO,GACjBmzB,KAAMyqG,GAGZ,GACF,CAgByBy0G,CAAWL,EAAeptL,IAAQ,SAAU0tL,GACjE,OAAOL,EAAeK,EAAQjiQ,EAChC,IACA,OAlBsB,SAAU6hQ,EAAS5uR,EAAG+sB,GAC5C,OAAOzP,EAAMsxQ,GAAS,SAAUrjR,EAAK0jR,GACnC,OAAO1jR,EAAIjK,MAAK,WACd,OAAO8B,EAASN,KAAKmsR,EACvB,IAAG,SAAUC,GACX,IAAIC,EAAU59P,KAAK2sE,KAAK3sE,KAAK89D,IAAI6/L,EAAUlvR,EAAIA,GAAKuxB,KAAK89D,IAAI6/L,EAAUniQ,EAAIA,IACvEqiQ,EAAU79P,KAAK2sE,KAAK3sE,KAAK89D,IAAI4/L,EAAUjvR,EAAIA,GAAKuxB,KAAK89D,IAAI4/L,EAAUliQ,EAAIA,IAC3E,OAAO3pB,EAASN,KAAKssR,EAAUD,EAAUF,EAAYC,EACvD,GACF,GAAG9rR,EAAShC,OACd,CAQSiuR,CAAkBT,EAAS5uR,EAAG+sB,GAAGzqB,KAAI,SAAU0sR,GACpD,OAAOA,EAAOn/M,IAChB,GACF,EAaIy/M,GAAsB9zQ,EAAMizQ,IAZX,SAAU/xO,GAC7B,OAAOA,EAAK3rB,MACd,IAIc,SAAUi+P,EAAQjiQ,GAC9B,OAAOiiQ,EAAOjiQ,EAAIA,CACpB,IAKIwiQ,GAAsB/zQ,EAAMizQ,IAVd,SAAU/xO,GAC1B,OAAOA,EAAK7vB,GACd,IAIc,SAAUmiQ,EAAQjiQ,GAC9B,OAAOiiQ,EAAOjiQ,EAAIA,CACpB,IA6BIyiQ,GAAoB,SAAUjM,EAAmBrjQ,EAAOk9B,GAC1D,IAAIqyO,EAAWlM,EAAkBrjQ,EAAOk9B,GACxC,OARwB,SAAUqyO,GAClC,OAAOA,EAASjM,YAAcV,GAAUQ,MAAsC,IAA9BmM,EAAS7lO,UAAU7lD,MACrE,CAMM2rR,CAAoBD,KAAclwF,GAAOniJ,EAAI5zC,YAL3B,SAAUimR,GAChC,OAAOA,EAASjM,YAAcV,GAAUM,IAAoC,IAA9BqM,EAAS7lO,UAAU7lD,MACnE,CAGiE4rR,CAAkBF,IAbhE,SAAUlM,EAAmBrjQ,EAAOuvQ,GACrD,OAAOA,EAAShM,QAAQhhR,QAAO,SAAUmtR,GACvC,OAAOrM,EAAkBrjQ,EAAO0vQ,GAAUnM,QAAQhiR,QACpD,GACF,CAUYouR,CAAatM,EAAmBrjQ,EAAOuvQ,GAExCA,EAAShM,QAAQ/hR,QAE5B,EACIouR,GAAyBt0Q,EAAMg0Q,GAAmBtL,IAClD6L,GAAwBv0Q,EAAMg0Q,GAAmBrL,IAOjD6L,GAAuB,SAAUrrR,EAAQm6M,EAAS3qE,EAAO87I,GAC3D,IAAIzoR,EAAM7C,EAAO4E,UAAUmB,SACvBiqC,EAAYmqK,EAAU,GAAK,EAC/B,SAAI0Z,OAT2B,SAAU1Z,EAASt3M,EAAK2sI,GACvD,IAAIm8F,EAAWrf,GAAcQ,eAAejqN,GAC5C,OAAO80N,IAAYxd,EAAS3qE,GAAO1xI,QAAO,SAAU26C,GAClD,OAAOA,EAAIo0K,QAAQ8e,EACrB,GACF,CAImC4/C,CAA2BpxE,EAASt3M,EAAK2sI,KACxEgqI,GAAUxpO,EAAWhwC,EAAQwvI,GAAQ2qE,GAAS,GAAOv8M,MAAK,SAAUsuN,GAClEu1D,GAAYzhR,EAAQksN,EACtB,IACO,GAGX,EAwCI2vB,GAAY,SAAU77O,EAAQuoR,EAAM9vO,GACtC,IAAI+2F,EA1BS,SAAU2lC,EAAU18H,GACjC,IAAI5vC,EAAO4vC,EAAI5zC,QAAQswK,GACvB,OAAO4kB,GAAYlxL,IAA2B,UAAlBA,EAAKrG,SAAuB/D,EAASN,KAAK0K,GAAQpK,EAAShC,MACzF,CAuBqBiiP,GAAP6pC,EAAsB9vO,GAC9BkS,GAAgB,IAAT49N,EACX/4I,EAAM7yI,MAAK,WACT,OAAO8kR,GAAYzhR,EAAQy4C,EAAIm0K,UACjC,IAAG,SAAUp9E,GACX,OAAOmoF,GAAWhtK,EAAM3qD,EAAOoJ,WAAWpL,QAAO,SAAU47O,GACzD,OAAOA,EAAQ/sB,QAAQp0K,EACzB,IAAG97C,MAAK,WACN,OAAO8kR,GAAYzhR,EAAQy4C,EAAIm0K,UACjC,IAAG,SAAU7+M,GACX,OAhCY,SAAUw6Q,EAAMvoR,EAAQwvI,EAAO/2F,GAC/C,IAAIo1M,EAAkB99B,GAAmB/vN,GACrC6tP,EACF7tP,EAAO+G,YAAYC,UAAS,WAC1B,IAAI8M,EAAUuH,GAAqBwyO,GACnCzoO,GAAStR,EAASk8M,GAAwBhwN,IAC1CurB,GAASzX,EAASuH,GAAqB,OACnCktQ,EACF/uF,GAAQn+K,GAAqBm0H,GAAQ17H,GAErCylL,GAASl+K,GAAqBm0H,GAAQ17H,GAExC,IAAIjR,EAAM7C,EAAO+E,IAAI2+E,YACrB7gF,EAAIklD,SAASj0C,EAAQ/O,IAAK,GAC1BlC,EAAIqlD,OAAOp0C,EAAQ/O,IAAK,GACxB08Q,GAAYzhR,EAAQ6C,EACtB,IAEA4+Q,GAAYzhR,EAAQy4C,EAAIm0K,UAE5B,CAYa4+D,CAAYjD,EAAMvoR,EAAQwvI,EAAO/2F,EAC1C,GACF,GACF,EACIgzO,GAAqB,SAAUzrR,EAAQuoR,EAAM/4I,EAAOmmC,GACtD,IAAI9yK,EAAM7C,EAAO4E,UAAUmB,SACvB0yC,EAAM6zK,GAAcQ,eAAejqN,GACnC8zC,EAAO32C,EAAOoJ,UAClB,IAAKm/Q,GAAQ4C,GAAuBx1G,EAAIl9H,GAAM,CAC5C,IAAIgB,EA3DsB,SAAU9C,EAAM64F,EAAO70H,GACnD,OAtDmC,SAAU60H,EAAO/2F,GACpD,OAAOh/B,GAAKg/B,EAAI+R,kBAAkB3sD,MAAK,SAAUk6C,GAC/C,OAAO4yO,GAAoBn7I,EAAOz3F,EAAKn4C,KAAMm4C,EAAK7vB,IACpD,IAAGrqB,MAAK,SAAUqtE,GAChB,OAAOm0M,GAtoCFrnD,GAD4Bz8M,EAuoCyB2vD,GAtoC/BvtE,KAAI,SAAU86C,GACzC,OAAO8mO,GAA8BhkQ,EAAOk9B,GAAKwM,UAAU5gD,OAAOo0C,EACpE,IAAGz7C,MAAM,IAooC0Dy7C,GAvoC1C,IAAUl9B,CAwoCnC,GACF,CAgDSmwQ,CAA+Bl8I,EAAO70H,GAAOjd,SAAQ,WAC1D,OAAO+b,GAAKkB,EAAM6vC,kBAAkB3sD,MAAK,SAAUk6C,GACjD,OAAOmnO,GAAuCO,GAAkB9oO,EAAM21K,GAAc3lK,OAAO6oF,IAASz3F,EAAKn4C,KAC3G,GACF,IAAG5C,MAAMsvN,GAAc3lK,OAAO6oF,GAChC,CAqDiBm8I,CAAwBh1O,EAAM64F,EAAO/2F,GAElD,OADAojM,GAAU77O,EAAQuoR,EAAM9uO,IACjB,CACT,CAAO,SAAI8uO,IAAQ6C,GAAsBz1G,EAAIl9H,MACvCgB,EAxDsB,SAAU9C,EAAM64F,EAAO70H,GACnD,OAtDmC,SAAU60H,EAAO/2F,GACpD,OAAO/+B,GAAO++B,EAAI+R,kBAAkB3sD,MAAK,SAAUk6C,GACjD,OAAO6yO,GAAoBp7I,EAAOz3F,EAAKn4C,KAAMm4C,EAAK7vB,IACpD,IAAGrqB,MAAK,SAAUqtE,GAChB,OAAOm0M,GAlpCFtnD,GAD6Bx8M,EAmpCyB2vD,GAlpC/BvtE,KAAI,SAAU86C,GAC1C,MAAO,CAACA,GAAKp0C,OAAOm7Q,GAA0BjkQ,EAAOk9B,GAAKwM,UAC5D,IAAGjoD,MAAM,IAgpC2Dy7C,GAnpC1C,IAAUl9B,CAopCpC,GACF,CAgDSqwQ,CAA+Bp8I,EAAO70H,GAAOjd,SAAQ,WAC1D,OAAO+b,GAAKkB,EAAM6vC,kBAAkB3sD,MAAK,SAAUk6C,GACjD,OAAOmnO,GAAuCQ,GAAkB/oO,EAAM21K,GAAc1lK,MAAM4oF,IAASz3F,EAAKn4C,KAC1G,GACF,IAAG5C,MAAMsvN,GAAc1lK,MAAM4oF,GAC/B,CAkDiBq8I,CAAwBl1O,EAAM64F,EAAO/2F,GAClDojM,GAAU77O,EAAQuoR,EAAM9uO,IACjB,EAIX,EACI4tB,GAAS,SAAUrnE,EAAQm6M,EAAS2xE,GACtC,OAAOrtR,EAASC,KAAKsB,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUC,UAAW,UAAUhH,MAAK,SAAU83K,GAC7F,OAAOl3K,EAASC,KAAKsB,EAAO+E,IAAIE,UAAU0wK,EAAI,UAAUh4K,KAAI,SAAU6xI,GACpE,OAAOs8I,EAAM9rR,EAAQm6M,EAAS3qE,EAAOmmC,EACvC,GACF,IAAG34K,OAAM,EACX,EACI+uR,GAAQ,SAAU/rR,EAAQm6M,GAC5B,OAAO9yI,GAAOrnE,EAAQm6M,EAASkxE,GACjC,EACIW,GAAQ,SAAUhsR,EAAQm6M,GAC5B,OAAO9yI,GAAOrnE,EAAQm6M,EAASsxE,GACjC,EAgNIQ,GAAsB,SAAUjsR,EAAQ22C,GAC1C,IAAI9tC,EAAMo0N,EAAWtmL,EACjB5xC,EAAM/E,EAAO+E,IACb6jM,EAAoC5oM,EAAO6F,OAAOmnM,oCACtD,GAAKr2J,EAAL,CAGA,GAAI,eAAelzC,KAAKkzC,EAAKn0C,UAAW,CACtC,IAAIW,EAhB4B,SAAU0F,GAC5C,KAAOA,GAAM,CACX,GAAsB,IAAlBA,EAAK7C,UAAoC,IAAlB6C,EAAK7C,UAAkB6C,EAAKzC,MAAQ,WAAW3C,KAAKoF,EAAKzC,MAClF,OAAOyC,EAETA,EAAOA,EAAKsiB,WACd,CACF,CASqB+gQ,CAA8Bv1O,EAAKxzC,YAChDA,GAAc,eAAeM,KAAKN,EAAWX,WAC/Cm0C,EAAK1sC,aAAalF,EAAIigB,IAAIlJ,eAAe2kL,IAAO9pJ,EAAKxzC,WAEzD,CACA,IAAIN,EAAMkC,EAAI2+E,YAEd,GADA/sC,EAAK6rC,YACD7rC,EAAKj7B,gBAAiB,CAExB,IADA,IAAIxY,EAAS,IAAIs8L,GAAc7oJ,EAAMA,GAC9B9tC,EAAO3F,EAAOG,WAAW,CAC9B,GAAIo3L,GAAS5xL,GAAO,CAClBhG,EAAIklD,SAASl/C,EAAM,GACnBhG,EAAIqlD,OAAOr/C,EAAM,GACjB,KACF,CACA,GAAI+/L,EAAkC//L,EAAKrG,SAASC,eAAgB,CAClEI,EAAI0G,eAAeV,GACnBhG,EAAIolD,aAAap/C,GACjB,KACF,CACAo0N,EAAWp0N,EACXA,EAAO3F,EAAOI,MAChB,CACKuF,IACHhG,EAAIklD,SAASk1K,EAAU,GACvBp6N,EAAIqlD,OAAO+0K,EAAU,GAEzB,MACMriC,GAAOjkJ,GACLA,EAAKxrB,aAAepmB,EAAIi9E,QAAQrrC,EAAKxrB,cACvCtoB,EAAI0G,eAAeotC,GACnB9zC,EAAIolD,aAAatR,KAEjB9zC,EAAImlD,cAAcrR,GAClB9zC,EAAI2G,YAAYmtC,KAGlB9zC,EAAIklD,SAASpR,EAAM,GACnB9zC,EAAIqlD,OAAOvR,EAAM,IAGrB32C,EAAO4E,UAAU6E,OAAO5G,GACxB6mO,GAAoB1pO,EAAQ6C,EA5C5B,CA6CF,EAaIspR,GAAiB,SAAUnsR,GAC7B,OAAOvB,EAASC,KAAKsB,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUqM,UAAS,GAAOjR,EAAO+E,IAAIi9E,SACxF,EAmBIoqM,GAAY,SAAU7pR,EAAK0tP,GAC7B,OAAO1tP,GAAOA,EAAIyH,YAAczH,EAAIyH,WAAWxH,WAAaytP,CAC9D,EACIo8B,GAAc,SAAU9pR,GAC1B,OAAOA,GAAO,eAAekB,KAAKlB,EAAIC,SACxC,EAII8pR,GAAoB,SAAUC,GAChC,IAAIC,EAAuBD,EAAeviR,WAC1C,MAAI,eAAevG,KAAK+oR,EAAqBhqR,UACpCgqR,EAEFD,CACT,EACIE,GAAkB,SAAUF,EAAgBvwC,EAAapzK,GAE3D,IADA,IAAI//D,EAAO0jR,EAAe3jN,EAAQ,aAAe,aAC1C//D,IACDkxL,GAAYlxL,IAGhBA,EAAOA,EAAK+/D,EAAQ,cAAgB,mBAEtC,OAAO//D,IAASmzO,CAClB,EA2DI0wC,GAAgB,SAAU3nR,EAAKxC,GACjC,OAAOA,GAAwB,MAAjBA,EAAIC,UAAoBuC,EAAIk/M,QAAQ1hN,EACpD,EAII89O,GAAa,SAAU99O,GACzBA,EAAIkZ,UAAY,yBAClB,EACIkxQ,GAA0B,SAAUzsP,EAAW19B,GACjD,OAAO09B,EAAU19B,WAAaA,GAAY09B,EAAU84J,iBAAmB94J,EAAU84J,gBAAgBx2L,WAAaA,CAChH,EACIoqR,GAAgB,SAAU7nR,EAAK8D,GACjC,OAAOA,GAAQ9D,EAAIi9E,QAAQn5E,KAAU,yBAAyBpF,KAAKoF,EAAKrG,YAAc,qBAAqBiB,KAAKoF,EAAKqS,MAAMkT,WAA8C,SAAjCrpB,EAAIk9E,mBAAmBp5E,EACjK,EA4BIgkR,GAAsB,SAAUlyQ,EAAOulB,EAAWjc,GACpD,OAA4B,IAAxBw2K,GAASv6J,GACJjc,EACEtJ,EACS,IAAXsJ,GAAgBic,EAAU95B,KAAKi9E,OAAOp/D,EAAS,KAAOy8K,GAAS,EAAIz8K,EAEnEA,IAAWic,EAAU95B,KAAKhH,OAAS,GAAK8gC,EAAU95B,KAAKi9E,OAAOp/D,KAAYy8K,GAASxgK,EAAU95B,KAAKhH,OAAS6kB,CAEtH,EAeI6oQ,GAAkB,SAAU/nR,EAAK8D,GACnC,IACI6a,EAAQqpQ,EADRp2O,EAAO5xC,EAAIo+E,UAGf,IADAz/D,EAAS7a,EACF6a,IAAWizB,GAA2C,UAAnC5xC,EAAIk9E,mBAAmBv+D,IACR,SAAnC3e,EAAIk9E,mBAAmBv+D,KACzBqpQ,EAAerpQ,GAEjBA,EAASA,EAAO1Z,WAElB,OAAO0Z,IAAWizB,EAAOo2O,EAAep2O,CAC1C,EAgCIq2O,GAAsB,SAAUhtR,EAAQ6I,GAC1C,IAAI0+O,EAAsBx3B,GAAmB/vN,GACzCunP,GAAuBA,EAAoB9kP,gBAAkBoG,EAAK0xL,QAAQ93L,eAjC1D,SAAUzC,EAAQ6I,EAAMokR,GAC5C,IAAIloR,EAAM/E,EAAO+E,IACjBtG,EAASC,KAAKuuR,EAAqB/xQ,OAAOvd,IAAIoH,EAAIyuI,YAAY51I,MAAK,SAAUsvR,GAC3E,IAAIC,EAAgB1mQ,GAAUpL,GAAqBxS,IAC/CukR,EAAY3rR,GAASA,GAAS,CAAC,EAAG0rR,GAAgBD,GACtDnoR,EAAI49M,UAAU95M,EAAMukR,EACtB,IACA,IAAIC,EAAiB5uR,EAASC,KAAKuuR,EAAqBplR,OAAOlK,KAAI,SAAU2vR,GAC3E,OAAOA,EAAYtpR,MAAM,MAC3B,IACIupR,EAAoB9uR,EAASC,KAAKmK,EAAK5C,WAAWtI,KAAI,SAAU6vR,GAClE,OAAOx4F,EAASw4F,EAAexpR,MAAM,QAAQ,SAAUijC,GACrD,MAAiB,KAAVA,CACT,GACF,IACA5sB,GAAMgzQ,EAAgBE,GAAmB,SAAUD,EAAaE,GAC9D,IAAIC,EAAkBz4F,EAASw4F,GAAgB,SAAUvmP,GACvD,OAAQ4tJ,EAAWy4F,EAAarmP,EAClC,IACIymP,EAAal2Q,GAAcA,GAAc,GAAI81Q,GAAa,GAAOG,GAAiB,GACtF1oR,EAAIu7M,UAAUz3M,EAAM,QAAS6kR,EAAWjpR,KAAK,KAC/C,IACA,IAAIkpR,EAAe,CACjB,QACA,SAEEC,EAAiBt4F,GAAS23F,GAAsB,SAAUl/Q,EAAG5D,GAC/D,OAAQ0qL,EAAW84F,EAAcxjR,EACnC,IACApF,EAAIoC,WAAW0B,EAAM+kR,EACvB,CAKIzlJ,CAAgBnoI,EAAQ6I,EADGmnN,GAAwBhwN,GAGvD,EAoDI6tR,GAAW,SAAU7tR,EAAQwR,GAC/B,IAAIs8Q,EAAQ5tP,EAAWjc,EAAQ+3N,EAC3B+rC,EAAUjoP,EAAUysP,EAAgBwB,EAAiBC,EAAcC,EACnElpR,EAAM/E,EAAO+E,IACbc,EAAS7F,EAAO6F,OAAQ8iM,EAAsB9iM,EAAOknM,sBACrDlqM,EAAM7C,EAAO4E,UAAUmB,SACvBmoR,EAAiB,SAAUxyR,GAC7B,IAAsB0jI,EAAO2nI,EAAY0V,EAArC5zQ,EAAOq3B,EACPqlN,EAAqB1/O,EAAOC,wBAOhC,GADA22Q,EAJEr9I,EADE1jI,GAA4B,UAApBqyR,GAAmD,OAApBA,EACjChpR,EAAIqF,OAAO1O,GAAQsyR,GAEnBhyC,EAAY57M,WAAU,IAGC,IAjsed,SAAUpgC,GAC/B,OAAOA,EAAOE,SAAS,eAAe,EACxC,CA+reQiuR,CAAiBnuR,GACnB+E,EAAIu7M,UAAUlhF,EAAO,QAAS,MAC9Br6H,EAAIu7M,UAAUlhF,EAAO,QAAS,WAE9B,GACE,GAAImmH,EAAmB18O,EAAKrG,UAAW,CACrC,GAAI01N,GAAYrvN,IAASixN,GAAiBjxN,GACxC,SAEFk+P,EAAal+P,EAAKu3B,WAAU,GAC5Br7B,EAAIu7M,UAAUymD,EAAY,KAAM,IAC5B3nI,EAAM1jH,iBACRqrP,EAAW18P,YAAY+0H,EAAMj8H,YAC7Bi8H,EAAM/0H,YAAY08P,KAElB0V,EAAY1V,EACZ3nI,EAAM/0H,YAAY08P,GAEtB,SACQl+P,EAAOA,EAAKmB,aAAenB,IAASkkR,GAIhD,OAFAC,GAAoBhtR,EAAQo/H,GAC5BihH,GAAWo8B,GACJr9I,CACT,EACIgvJ,EAA6B,SAAUzzQ,GACzC,IAAI9R,EAAMnN,EACN2yR,EAAmBxB,GAAoBlyQ,EAAOulB,EAAWjc,GAC7D,GAAIw2K,GAASv6J,KAAevlB,EAAQ0zQ,EAAmB,EAAIA,EAAmBnuP,EAAUgpB,UAAU9pD,QAChG,OAAO,EAET,GAAI8gC,EAAUl2B,aAAegyO,GAAeiyC,IAA+BtzQ,EACzE,OAAO,EAET,GAAIA,GAASo/K,GAAY75J,IAAcA,IAAc87M,EAAY74O,WAC/D,OAAO,EAET,GAAIwpR,GAAwBzsP,EAAW,UAAYysP,GAAwBzsP,EAAW,MACpF,OAAO+tP,IAA+BtzQ,IAAUszQ,GAA8BtzQ,EAEhF,IAAIzX,EAAS,IAAIs8L,GAAct/J,EAAW87M,GAQ1C,IAPIvhD,GAASv6J,KACPvlB,GAA8B,IAArB0zQ,EACXnrR,EAAOg+I,OACGvmI,GAAS0zQ,IAAqBnuP,EAAUgpB,UAAU9pD,QAC5D8D,EAAOI,QAGJuF,EAAO3F,EAAOG,WAAW,CAC9B,GAAI02L,GAAYlxL,IACd,IAAKA,EAAKnF,aAAa,oBACrBhI,EAAOmN,EAAKrG,SAASC,cACjBkmM,EAAoBjtM,IAAkB,OAATA,GAC/B,OAAO,OAGN,GAAI++L,GAAS5xL,KAAUg6L,GAAiBh6L,EAAKqgD,WAClD,OAAO,EAELvuC,EACFzX,EAAOg+I,OAEPh+I,EAAOI,MAEX,CACA,OAAO,CACT,EACIgrR,EAAsB,WAEtBvG,EADE,wBAAwBtkR,KAAKsqR,IAA2C,WAAvBQ,EACxCL,EAAeF,GAEfE,IArweoB,SAAUluR,GAC7C,OAAOA,EAAOE,SAAS,gCAAgC,EACzD,CAqweQsuR,CAA+BxuR,IAAW4sR,GAAc7nR,EAAKwnR,IAAmBxnR,EAAIk/M,QAAQ+3B,GAC9F+rC,EAAWhjR,EAAIf,MAAMuoR,EAAgBvwC,GAErCj3O,EAAI0+M,YAAYskE,EAAU/rC,GAE5BiwC,GAAoBjsR,EAAQ+nR,EAC9B,EACArgD,GAAY3iO,EAAKlC,GAAKjF,MAAK,SAAU+pO,GACnC9kO,EAAIklD,SAAS4/K,EAAQx+N,eAAgBw+N,EAAQn/K,aAC7C3lD,EAAIqlD,OAAOy/K,EAAQr+N,aAAcq+N,EAAQl/K,UAC3C,IACAvoB,EAAYr9B,EAAIsG,eAChB8a,EAASphB,EAAI2lD,YACbwlO,EAAej+D,GAAmB/vN,GAClC,IAAIkV,KAAc1D,IAAOA,EAAI0D,UACzBC,KAAa3D,IAAOA,EAAI2D,SACxB4kL,GAAY75J,IAAcA,EAAUxkB,kBACtCuyQ,EAA6BhqQ,EAASic,EAAUvkB,WAAWvc,OAAS,EACpE8gC,EAAYA,EAAUvkB,WAAWiR,KAAK6kB,IAAIxtB,EAAQic,EAAUvkB,WAAWvc,OAAS,KAAO8gC,EAErFjc,EADEgqQ,GAA8BxzF,GAASv6J,GAChCA,EAAUgpB,UAAU9pD,OAEpB,GAGb,IAAI2tR,EAAeD,GAAgB/nR,EAAKm7B,GACxC,GAAK6sP,EAAL,EAGIiB,IAAiB94Q,IAAa84Q,GAAgB94Q,KAChDgrB,EAzKoC,SAAUlgC,EAAQguR,EAAcnrR,EAAKq9B,EAAWjc,GACtF,IAAI8jQ,EAAU/rC,EAAav2E,EAAW58J,EAAMvF,EAAMggQ,EAC9C9vC,EAAYw6D,GAAgB,IAC5BjpR,EAAM/E,EAAO+E,IAAKgoR,EAAeD,GAAgB/nR,EAAKm7B,GAE1D,KADA87M,EAAcj3O,EAAIE,UAAUi7B,EAAWn7B,EAAIi9E,YACtB4qM,GAAc7nR,EAAKi3O,GAAc,CAOpD,GAJEsnB,GAFFtnB,EAAcA,GAAe+wC,KACT/sR,EAAOoJ,WAvHb,SAAUP,GAC1B,OAAOA,GAAQ,oBAAoBpF,KAAKoF,EAAKrG,SAC/C,CAqH4CisR,CAAYzyC,GAClCA,EAAYx5O,SAASC,cAErBu5O,EAAYhyO,WAAWxH,SAASC,eAE7Cu5O,EAAYtgO,gBAMf,OALAqsQ,EAAWhjR,EAAIqF,OAAOopN,GACtBw5D,GAAoBhtR,EAAQ+nR,GAC5B/rC,EAAY3xO,YAAY09Q,GACxBllR,EAAIklD,SAASggO,EAAU,GACvBllR,EAAIqlD,OAAO6/N,EAAU,GACdA,EAGT,IADAl/Q,EAAOq3B,EACAr3B,EAAKmB,aAAegyO,GACzBnzO,EAAOA,EAAKmB,WAEd,KAAOnB,IAAS9D,EAAIi9E,QAAQn5E,IAC1B48J,EAAY58J,EACZA,EAAOA,EAAKmwL,gBAEd,GAAIvzB,GAAazlK,EAAO6F,OAAOunM,aAAak2D,EAAe9vC,EAAU/wN,eAAgB,CAKnF,IAJAslR,EAAWhjR,EAAIqF,OAAOopN,GACtBw5D,GAAoBhtR,EAAQ+nR,GAC5BtiH,EAAUz7J,WAAWC,aAAa89Q,EAAUtiH,GAC5C58J,EAAO48J,EACA58J,IAAS9D,EAAIi9E,QAAQn5E,IAC1BvF,EAAOuF,EAAKsiB,YACZ48P,EAAS19Q,YAAYxB,GACrBA,EAAOvF,EAETT,EAAIklD,SAAS7nB,EAAWjc,GACxBphB,EAAIqlD,OAAOhoB,EAAWjc,EACxB,CACF,CACA,OAAOic,CACT,CA8HgBwuP,CAAkC1uR,EAAQguR,EAAcnrR,EAAKq9B,EAAWjc,IAEtF+3N,EAAcj3O,EAAIE,UAAUi7B,EAAWn7B,EAAIi9E,SAC3CuqM,EAAiBvwC,EAAcj3O,EAAIE,UAAU+2O,EAAYhyO,WAAYjF,EAAIi9E,SAAW,KACpF+rM,EAAkB/xC,EAAcA,EAAYx5O,SAASuyF,cAAgB,GACrE,IAAIw5L,EAAqBhC,EAAiBA,EAAe/pR,SAASuyF,cAAgB,GACvD,OAAvBw5L,GAAgCp5Q,IAClC6mO,EAAcuwC,EACdA,EAAiBA,EAAeviR,WAChC+jR,EAAkBQ,GAEhB,eAAe9qR,KAAKsqR,IAClBhpR,EAAIk/M,QAAQ+3B,GAlWL,SAAUh8O,EAAQkuR,EAAgB3B,EAAgBvwC,EAAagyC,GAC5E,IAAIjpR,EAAM/E,EAAO+E,IACblC,EAAM7C,EAAO4E,UAAUmB,SAC3B,GAAIwmR,IAAmBvsR,EAAOoJ,UAA9B,CAvBiB,IAAU7G,EACpB8pR,GADoB9pR,EA0BVgqR,IAzBUF,GAAY9pR,EAAIyH,cA0BzCgkR,EAAe,MAEjB,IAAIjG,EAAWiG,EAAeE,EAAeF,GAAgBjpR,EAAIqF,OAAO,MACxE,GAAIqiR,GAAgBF,EAAgBvwC,GAAa,IAASywC,GAAgBF,EAAgBvwC,GAAa,GACrG,GAAIowC,GAAUG,EAAgB,MAAO,CACnC,IAAIC,EAAuBF,GAAkBC,GAC7CxnR,EAAI0+M,YAAYskE,EAAUyE,GA3Cb,SAAUjqR,GAC3B,IAAIkO,EACJ,OAAkC,QAAzBA,EAAKlO,EAAIyH,kBAA+B,IAAPyG,OAAgB,EAASA,EAAGtN,cAAgBZ,CACxF,CAyCUosR,CAAapC,GACfxnR,EAAImF,OAAOsiR,GAEXznR,EAAImF,OAAOqiR,EAEf,MACExnR,EAAIS,QAAQuiR,EAAUwE,QAEnB,GAAIE,GAAgBF,EAAgBvwC,GAAa,GAClDowC,GAAUG,EAAgB,OAC5BxnR,EAAI0+M,YAAYskE,EAAUuE,GAAkBC,IAC5CxE,EAAS19Q,YAAYtF,EAAIigB,IAAIlJ,eAAe,MAC5CisQ,EAAS19Q,YAAYkiR,IAErBA,EAAeviR,WAAWC,aAAa89Q,EAAUwE,GAEnDxnR,EAAImF,OAAO8xO,QACN,GAAIywC,GAAgBF,EAAgBvwC,GAAa,GACtDj3O,EAAI0+M,YAAYskE,EAAUuE,GAAkBC,IAC5CxnR,EAAImF,OAAO8xO,OACN,CACLuwC,EAAiBD,GAAkBC,GACnC,IAAIuB,EAASjrR,EAAIoG,aACjB6kR,EAAO9lO,cAAcg0L,GACrB8xC,EAAOtkR,YAAY+iR,GACnB,IAAIzsP,EAAWguP,EAAOxrM,kBACD,OAAjB0rM,GAzEY,SAAUzrR,EAAK7G,GACjC,OAAO6G,EAAIY,YAwE4C,OAxE9BZ,EAAIY,WAAWX,QAC1C,CAuEiCosR,CAAc9uP,IACzCioP,EAAWjoP,EAAS38B,WACpB4B,EAAI0+M,YAAY3jL,EAAUysP,KAE1BxnR,EAAI0+M,YAAY3jL,EAAUysP,GAC1BxnR,EAAI0+M,YAAYskE,EAAUwE,IAE5BxnR,EAAImF,OAAO8xO,EACb,CACAiwC,GAAoBjsR,EAAQ+nR,EA5C5B,CA6CF,CAiTM8G,CAAS7uR,EAAQkuR,EAAgB3B,EAAgBvwC,EAAagyC,GAI9DA,GAAgBhyC,IAAgBh8O,EAAOoJ,YAG3C4kR,EAAeA,GAAgB,IAC3BjtF,GAAwBi7C,IAC1B+rC,EAAWtmF,GAAwBu6C,GAC/Bj3O,EAAIk/M,QAAQ+3B,IACdqE,GAAWrE,GAEbgxC,GAAoBhtR,EAAQ+nR,GAC5BkE,GAAoBjsR,EAAQ+nR,IACnBqG,IACTE,IACSF,GAA2B,IACpCrG,EAAW/rC,EAAYhyO,WAAWC,aAAaikR,IAAkBlyC,GACjEiwC,GAAoBjsR,EAAQ2sR,GAAwB3wC,EAAa,MAAQ+rC,EAAW/rC,KAEpF8xC,EA3QqB,SAAUjrR,GACjC,IAAIqpN,EAASrpN,EAAIoG,aAGjB,OAFAijN,EAAOnkK,SAASllD,EAAIsG,eAAgB0jR,IAAoB,EAAMhqR,EAAIsG,eAAgBtG,EAAI2lD,cACtF0jK,EAAOhkK,OAAOrlD,EAAIyG,aAAcujR,IAAoB,EAAOhqR,EAAIyG,aAAczG,EAAI4lD,YAC1EyjK,CACT,CAsQa4iE,CAAmBjsR,GAAKoG,aACjC6kR,EAAOtkR,YAAYwyO,GArUR,SAAUl8M,GACvBi1J,EAAOzqG,GAAcjvE,GAAqBykB,GAAW84J,KAAW,SAAU53L,GACxE,IAAI86O,EAAU96O,EAAK+D,IACnB+2O,EAAQ5yL,UAAY03I,GAAOk7C,EAAQ5yL,UACrC,GACF,CAkUI6lO,CADAjvP,EAAWguP,EAAOxrM,mBAvQM,SAAUz5E,GACpC,GACM4xL,GAAS5xL,KACXA,EAAKqgD,UAAYrgD,EAAKqgD,UAAU1jD,QAAQ,WAAY,KAEtDqD,EAAOA,EAAK1F,iBACL0F,EACX,CAkQImmR,CAAsBlvP,GACtBioP,EAAWjoP,EAAS38B,WACpB4B,EAAI0+M,YAAY3jL,EAAUk8M,GArTY,SAAUj3O,EAAK4jM,EAAqBvpE,GAC5E,IAEIlgI,EAFA2J,EAAOu2H,EACP6vJ,EAAc,GAElB,GAAKpmR,EAAL,CAGA,KAAOA,EAAOA,EAAK1F,YAAY,CAC7B,GAAI4B,EAAIi9E,QAAQn5E,GACd,OAEEkxL,GAAYlxL,KAAU8/L,EAAoB9/L,EAAKrG,SAASC,gBAC1DwsR,EAAYnwR,KAAK+J,EAErB,CAEA,IADA3J,EAAI+vR,EAAY7vR,OACTF,QACL2J,EAAOomR,EAAY/vR,IACTwc,iBAAmB7S,EAAK1F,aAAe0F,EAAKswL,WAA2C,KAA9BtwL,EAAK1F,WAAW+lD,WAG7EwjO,GAAc3nR,EAAK8D,KAFvB9D,EAAImF,OAAOrB,EAbf,CAoBF,CA4RIqmR,CAAoCnqR,EAAK4jM,EAAqBo/E,GAtKvC,SAAUhjR,EAAKq6H,GACxCA,EAAM58C,YACN,IAAI22G,EAAY/5D,EAAM+5D,UACjBA,IAAa,mBAAmB11L,KAAKsB,EAAI6nF,SAASusG,EAAW,SAAS,KACzEp0L,EAAIvK,IAAI4kI,EAAO,KAEnB,CAiKI+vJ,CAAqBpqR,EAAKi3O,GACtBj3O,EAAIk/M,QAAQ+3B,IACdqE,GAAWrE,GAEb+rC,EAASvlM,YACLz9E,EAAIk/M,QAAQ8jE,IACdhjR,EAAImF,OAAO69Q,GACXuG,MAEAtB,GAAoBhtR,EAAQ+nR,GAC5BkE,GAAoBjsR,EAAQ+nR,KAGhChjR,EAAIu7M,UAAUynE,EAAU,KAAM,IAC9B/nR,EAAOyV,KAAK,WAAY,CAAEsyQ,SAAUA,IA1DpC,CA2DF,EAYIqH,GAAoB,SAAUpvR,EAAQqvR,EAAOC,GAC/C,IAAIzsR,EAAM7C,EAAO+E,IAAI2+E,YAChB4rM,GAIHzsR,EAAI0G,eAAe8lR,GACnBxsR,EAAIolD,aAAaonO,KAJjBxsR,EAAImlD,cAAcqnO,GAClBxsR,EAAI2G,YAAY6lR,IAKlBrvR,EAAO4E,UAAU6E,OAAO5G,GACxB6mO,GAAoB1pO,EAAQ6C,EAC9B,EA2CI0sR,GAAiB,SAAUvvR,EAAQmuF,GACrC,IAAIslI,EAAKp4M,GAAqB,MAC9Bk+K,GAASl+K,GAAqB8yE,GAASslI,GACvCzzN,EAAO+G,YAAYvM,KACrB,EACIg1R,GAAgB,SAAUxvR,EAAQmuF,GAC/BshM,GAAWzvR,EAAOoJ,UAAW+kF,IAChCqrG,GAAQn+K,GAAqB8yE,GAAS9yE,GAAqB,OAE7D,IAAIo4M,EAAKp4M,GAAqB,MAC9Bm+K,GAAQn+K,GAAqB8yE,GAASslI,GACtC27D,GAAkBpvR,EAAQyzN,EAAG1uN,KAAK,GAClC/E,EAAO+G,YAAYvM,KACrB,EAIIi1R,GAAa,SAAU1tM,EAAU0jF,GACnC,OAJyBhtH,EAIV6zK,GAAc1lK,MAAM6+G,KAH5Bm1B,GAAOniJ,EAAI5zC,YAMTgzN,GAAa91I,EAAUuqI,GAAc1lK,MAAM6+G,IAAY9nK,KAAI,SAAU86C,GAC1E,OAAOmiJ,GAAOniJ,EAAI5zC,UACpB,IAAG7H,OAAM,GATI,IAAUy7C,CAW3B,EACIi3O,GAAe,SAAUntR,GAC3B,OAAOA,GAAwB,MAAjBA,EAAIC,UAAoB,SAAUD,CAClD,EACIotR,GAAiB,SAAU58G,GAC7B,OAAOA,EAASp2K,KAAKJ,EAAOmzR,GAAcA,GAAcnzR,EAC1D,EAMIqzR,GAAwB,SAAU5vR,EAAQ+yK,GAC5CA,EAASp2K,KAAKR,EAAM0a,EAAM04Q,GAAgBvvR,GAAS6W,EAAM24Q,GAAexvR,GAAS7D,EACnF,EACI0zR,GAAW,SAAU7vR,EAAQwR,GAC/B,IAAIs+Q,EATyB,SAAU9vR,GACvC,IAAIijR,EAAmBpsQ,EAAMq/P,GAAgBl2Q,GACzCouB,EAAWk+L,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UAC7D,OAAOq3Q,GAAa6F,EAAkBjjR,EAAOoJ,UAAWglB,GAAUpwB,OAAO2xR,GAC3E,CAKuBI,CAAyB/vR,GAC1C8vR,EAAehzR,SACjBgzR,EAAelyR,KAAKiZ,EAAM+4Q,GAAuB5vR,IArF/B,SAAUA,EAAQwR,GACtC,IAGI69Q,EACAC,EAJA1qR,EAAY5E,EAAO4E,UACnBG,EAAM/E,EAAO+E,IACblC,EAAM+B,EAAUmB,SAGpB2hO,GAAY3iO,EAAKlC,GAAKjF,MAAK,SAAU+pO,GACnC9kO,EAAIklD,SAAS4/K,EAAQx+N,eAAgBw+N,EAAQn/K,aAC7C3lD,EAAIqlD,OAAOy/K,EAAQr+N,aAAcq+N,EAAQl/K,UAC3C,IACA,IAAIxkC,EAASphB,EAAI2lD,YACbtoB,EAAYr9B,EAAIsG,eACpB,GAA2B,IAAvB+2B,EAAUl6B,UAAkBk6B,EAAUxkB,gBAAiB,CACzD,IAAIuyQ,EAA6BhqQ,EAASic,EAAUvkB,WAAWvc,OAAS,EACxE8gC,EAAYA,EAAUvkB,WAAWiR,KAAK6kB,IAAIxtB,EAAQic,EAAUvkB,WAAWvc,OAAS,KAAO8gC,EAErFjc,EADEgqQ,GAAqD,IAAvB/tP,EAAUl6B,SACjCk6B,EAAUgpB,UAAU9pD,OAEpB,CAEb,CACA,IAAI48O,EAAcj3O,EAAIE,UAAUi7B,EAAWn7B,EAAIi9E,SAC3CuqM,EAAiBvwC,EAAcj3O,EAAIE,UAAU+2O,EAAYhyO,WAAYjF,EAAIi9E,SAAW,KACpFusM,EAAqBhC,EAAiBA,EAAe/pR,SAASuyF,cAAgB,GAC9Ei7L,KAAkBx+Q,IAAOA,EAAI2D,SACN,OAAvBo5Q,GAAgCyB,IAClCh0C,EAAcuwC,GAEZrsP,GAAoC,IAAvBA,EAAUl6B,UAAkBie,GAAUic,EAAUgpB,UAAU9pD,SAlDnD,SAAUyG,EAAQq6B,EAAW87M,GAIrD,IAHA,IACInzO,EADA3F,EAAS,IAAIs8L,GAAct/J,EAAW87M,GAEtCrzC,EAAsB9iM,EAAOknM,sBAC1BlkM,EAAO3F,EAAOI,QACnB,GAAIqlM,EAAoB9/L,EAAKrG,SAASC,gBAAkBoG,EAAKzJ,OAAS,EACpE,OAAO,CAGb,CA0CS6wR,CAAoBjwR,EAAO6F,OAAQq6B,EAAW87M,KACjDqzC,EAAQtqR,EAAIqF,OAAO,MACnBvH,EAAI0/E,WAAW8sM,GACfxsR,EAAImlD,cAAcqnO,GAClBxsR,EAAI2G,YAAY6lR,GAChBC,GAAU,IAGdD,EAAQtqR,EAAIqF,OAAO,MACnBkjN,GAAgBvoN,EAAKlC,EAAKwsR,GAC1BD,GAAkBpvR,EAAQqvR,EAAOC,GACjCtvR,EAAO+G,YAAYvM,KACrB,CA8CI01R,CAAgBlwR,EAAQwR,EAE5B,EAEI6nM,GAAkB,SAAUr5M,EAAQkiB,GACtC,OAAOiqQ,GAAensR,GAAQhC,QAAO,SAAUg+O,GAC7C,OAAO95N,EAAS9iB,OAAS,GAAKs5L,GAAKr9K,GAAqB2gO,GAAc95N,EACxE,IAAGplB,QACL,EAQIqzR,GAAgB73P,GAAa,CAC/B,CAAEm7L,GAAI,IACN,CAAEr0F,MAAO,IACT,CAAE3iI,KAAM,MAEN2zR,GAAqB,SAAUpwR,EAAQqwR,GACzC,OAVyB,SAAUrwR,GACnC,OAAOq5M,GAAgBr5M,EAh+eE,SAAUA,GACnC,OAAOA,EAAOE,SAAS,sBAAuB,GAChD,CA89eiCowR,CAAqBtwR,GACtD,CAQSuwR,CAAqBvwR,EAC9B,EACIwwR,GAAW,SAAUC,GACvB,OAAO,SAAUzwR,EAAQqwR,GAEvB,MAD4C,KAA/BtgE,GAAmB/vN,KACdywR,CACpB,CACF,EACIC,GAAc,SAAUD,GAC1B,OAAO,SAAUzwR,EAAQqwR,GACvB,OArkBwB,SAAUrwR,GACpC,OAAOmsR,GAAensR,GAAQhC,QAAO,SAAUuE,GAC7C,OAAO89L,GAAWhlL,GAAqB9Y,GACzC,IAAGzF,QACL,CAikBW6zR,CAAsB3wR,KAAYywR,CAC3C,CACF,EACIG,GAAU,SAAUp9D,EAAWi9D,GACjC,OAAO,SAAUzwR,EAAQqwR,GACvB,IAAI5gR,EA/kBiB,SAAUzP,GACjC,OAAOmsR,GAAensR,GAAQrD,KAAKP,EAAS,KAAK,SAAU4/O,GACzD,OAAOA,EAAYx5O,SAASuyF,aAC9B,GACF,CA2kBgB87L,CAAmB7wR,KAAYwzN,EAAUz+H,cACrD,OAAOtlF,IAAUghR,CACnB,CACF,EACIK,GAAa,SAAUL,GACzB,OAAOG,GAAQ,MAAOH,EACxB,EAIIM,GAAmB,SAAUN,GAC/B,OAAO,SAAUzwR,EAAQqwR,GACvB,OA1hfqB,SAAUrwR,GACjC,OAAOA,EAAOE,SAAS,aAAa,EACtC,CAwhfW8wR,CAAmBhxR,KAAYywR,CACxC,CACF,EACIQ,GAAc,SAAUjxR,EAAQqwR,GAClC,OA5CmB,SAAUrwR,GAC7B,OAAOq5M,GAAgBr5M,EAh+eE,SAAUA,GACnC,OAAOA,EAAOE,SAAS,sBAAuB,iCAChD,CA89eiCgxR,CAAqBlxR,GACtD,CA0CSmxR,CAAenxR,EACxB,EACIoxR,GAAc,SAAUj/H,EAASj9I,GACnC,OAAOA,CACT,EACIm8Q,GAA4B,SAAUrxR,GACxC,IAAI6tP,EAAkB99B,GAAmB/vN,GACrCsxR,EArnBkB,SAAUvsR,EAAK8D,GACrC,IACI6a,EAAQqpQ,EADRp2O,EAAO5xC,EAAIo+E,UAGf,IADAz/D,EAAS7a,EACF6a,IAAWizB,GAA2C,UAAnC5xC,EAAIk9E,mBAAmBv+D,IACR,SAAnC3e,EAAIk9E,mBAAmBv+D,KACzBqpQ,EAAerpQ,GAEjBA,EAASA,EAAO1Z,WAElB,OAAO0Z,IAAWizB,EAAOo2O,EAAep2O,CAC1C,CA0mBqB46O,CAAkBvxR,EAAO+E,IAAK/E,EAAO4E,UAAUqM,YAClE,OAAOqgR,GAAgBtxR,EAAO6F,OAAOunM,aAAakkF,EAAa9uR,SAAUqrP,GAAoC,IAC/G,EACIjrO,GAAQ,SAAU4uQ,EAAYpzP,GAChC,OAAO,SAAUp+B,EAAQkV,GAIvB,OAHcyD,EAAM64Q,GAAY,SAAUpiQ,EAAKvtB,GAC7C,OAAOutB,GAAOvtB,EAAE7B,EAAQkV,EAC1B,IAAG,GACczW,EAASN,KAAKigC,GAAU3/B,EAAShC,MACpD,CACF,EA8CIwyE,GAAS,SAAUjvE,EAAQwR,IA7Cf,SAAUxR,EAAQwR,GAChC,OAAOmrQ,GAAc,CACnB/5P,GAAM,CAACwtQ,IAAqBD,GAAc1zR,QAC1CmmB,GAAM,CA7BDguQ,GAAQ,WAAW,IA6BET,GAAc18D,MACxC7wM,GAAM,CACJkuQ,IAAW,GACXC,IAAiB,GACjBK,IACCjB,GAAc18D,MACjB7wM,GAAM,CACJkuQ,IAAW,GACXC,IAAiB,IAChBZ,GAAc/wJ,SACjBx8G,GAAM,CACJkuQ,IAAW,GACXC,IAAiB,GACjBK,IACCjB,GAAc/wJ,SACjBx8G,GAAM,CACJkuQ,IAAW,GACXC,IAAiB,IAChBZ,GAAc18D,MACjB7wM,GAAM,CACJ8tQ,IAAY,GACZU,IACCjB,GAAc18D,MACjB7wM,GAAM,CAAC8tQ,IAAY,IAAQP,GAAc/wJ,SACzCx8G,GAAM,CACJ4tQ,IAAS,GACTY,GACAC,IACClB,GAAc/wJ,SACjBx8G,GAAM,CAAC4tQ,IAAS,IAAQL,GAAc18D,MACtC7wM,GAAM,CAACquQ,IAAcd,GAAc18D,MACnC7wM,GAAM,CACJ4tQ,IAAS,GACTY,IACCjB,GAAc18D,MACjB7wM,GAAM,CAACyuQ,IAA4BlB,GAAc/wJ,UAChD,CACDp/H,KACGwR,IAAOA,EAAI0D,YACblY,MAAMmzR,GAAc1zR,OACzB,EAGEwzH,CAAUjwH,EAAQwR,GAAK7U,MAAK,WAC1BkzR,GAAS7vR,EAAQwR,EACnB,IAAG,WACDq8Q,GAAS7tR,EAAQwR,EACnB,GAAGrV,EACL,EA6DIukB,GAAU5D,KAAS4D,QAyBnBF,GAAW1D,KAaXolF,GAA2B,SAAUnvF,GACvC,OAAOA,EAAEmvF,0BACX,EACIuvL,GAAe,SAAUjgR,GAC3B,OAAOA,EAAIwD,UAAY6sN,GAAGG,SAAWxwN,EAAIwD,UAAY6sN,GAAGI,SAC1D,EACIyvD,GAAuB,SAAUC,EAAS3xR,EAAQo/H,GAChDA,IAAUuyJ,EAAQ1qQ,MACpBjnB,EAAOmS,GAAG,aAAc+vF,IAA0B,IACxCk9B,GAASuyJ,EAAQ1qQ,OAC3BjnB,EAAOoS,IAAI,aAAc8vF,IAE3ByvL,EAAQrqQ,IAAI83G,EACd,EAsBIwyJ,GAAuB,SAAU5wR,EAAMy3C,GACzC,IAAIvY,EAAYuY,EAAIvY,YAChBjc,EAASw0B,EAAIx0B,SACjB,OAAIw2K,GAASv6J,IACXA,EAAU66M,WAAW92N,EAAQjjB,GACtBvC,EAASN,KAAKmuN,GAAcpsL,EAAWjc,EAASjjB,EAAK5B,UAErDy2N,GAAuBp9K,GAAK96C,KAAI,SAAU4E,GAC/C,IAAI6wN,EAAW/3M,GAAsBra,GAMrC,OALIy3C,EAAI6oJ,UACN9H,GAAQj3L,EAAK6wN,GAEb75B,GAASh3L,EAAK6wN,GAET9G,GAAc8G,EAASruN,IAAK/D,EAAK5B,OAC1C,GAEJ,EACIyyR,GAAuBh7Q,EAAM+6Q,GAAsBnxF,IACnDqxF,GAAwBj7Q,EAAM+6Q,GAAsB,KAepDG,GAAkC,SAAUp7O,EAAM8B,GACpD,OAAO,SAAUu5O,GACf,OA1tVkB,SAAUr7O,EAAM8B,GACpC,OAAIsgM,GAAQtgM,KAJS,SAAU9B,EAAM8B,GACrC,OAPwB,SAAU9B,EAAM8B,GACxC,OAAOq/K,GAAanhL,EAAK5xC,IAAK0zC,GAAK17C,QACrC,CAKSk1R,CAAoBt7O,EAAM8B,IAJf,SAAU9B,EAAM8B,GAClC,OAAOo/K,GAAalhL,EAAK5xC,IAAK0zC,GAAK17C,QACrC,CAE2Cm1R,CAAcv7O,EAAM8B,IAAQs/L,GAAiBphM,EAAM8B,IAAQu/L,GAAerhM,EAAM8B,IAAQ8/L,GAAU5hM,EAAM8B,IAAQ6/L,GAAa3hM,EAAM8B,EAC9K,CAKW05O,CAAiBx7O,EAAM8B,IAAQogM,GAAeliM,EAAM8B,IAAQqgM,GAAcniM,EAAM8B,GAE3F,CAotVW25O,CAAgBz7O,EAAMq7O,GAAYH,GAAqBp5O,GAAOq5O,GAAsBr5O,EAC7F,CACF,EAQI45O,GAA+B,SAAUryR,GAC3C,IAAIy4C,EAAM6zK,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UACpD4wC,EAAOt7B,GAAqBrb,EAAOoJ,WACvC,GAAIpJ,EAAO4E,UAAU2+I,cAAe,CAClC,IAAI0/H,EAAmBpsQ,EAAMq/P,GAAgBl2Q,GACzCusN,EAAgBD,GAAcQ,eAAe9sN,EAAO4E,UAAUmB,UAClE,OAAOq3Q,GAAa6F,EAAkBjjR,EAAOoJ,UAAWmjN,GAAe1uN,KA/B7C,SAAU84C,GACtC,OAAO,SAAUo8H,GACf,OAAOA,EAASp2K,MAAK,SAAUmX,GAC7B,OAAOgkN,GAAanhL,EAAK5xC,IAAKunN,GAAc3lK,OAAO7yC,GACrD,IAAG,SAAUA,GACX,OAAOikN,GAAgBjkN,EACzB,IAAG,SAAUA,GACX,OAAOkkN,GAAelkN,EACxB,IAAG,SAAUA,GACX,OAAO+jN,GAAalhL,EAAK5xC,IAAKunN,GAAc1lK,MAAM9yC,GACpD,GACF,CACF,CAmBgFw+Q,CAAwB37O,IAAO94C,KAAKk0R,GAAgCp7O,EAAM8B,IAAM36C,OAb7I,SAAUkC,GAC3B,OAAO,SAAUy4C,GAGf,OAFAz4C,EAAO4E,UAAU6E,OAAOgvC,EAAIm0K,WAC5B5sN,EAAOu/J,eACA,CACT,CACF,CAOuKgzH,CAAavyR,GAClL,CACE,OAAO,CAEX,EAkBIwyR,GAA4B,SAAUxyR,GACxC,IAAI4yF,EAAQ2wL,GAAmBvjR,GAS/B,OA/hDY,SAAUA,GACtBA,EAAOmS,GAAG,yBAA0B0E,EAAM4wQ,GAAsBznR,GAClE,CAqhDEyyR,CAAQzyR,GApjCI,SAAUA,EAAQ4yF,GAC9B5yF,EAAOmS,GAAG,WAAW,SAAUX,IACI,IAA7BA,EAAIunK,sBArFmB,SAAU/4K,EAAQ4yF,EAAOphF,GACtD,IAAI0P,EAAKpE,KAASoE,GAClBokD,GAAQ,CACN,CACEtwD,QAAS6sN,GAAG5gK,MACZ7iC,OAAQA,GAAO8pP,GAASloR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG9gK,KACZ3iC,OAAQA,GAAO8pP,GAASloR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG7gK,GACZ5iC,OAAQA,GAAOkqP,GAAStoR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG3gK,KACZ9iC,OAAQA,GAAOkqP,GAAStoR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG5gK,MACZ7iC,OAAQA,GAAO2tP,GAAO/rR,GAAQ,IAEhC,CACEgV,QAAS6sN,GAAG9gK,KACZ3iC,OAAQA,GAAO2tP,GAAO/rR,GAAQ,IAEhC,CACEgV,QAAS6sN,GAAG7gK,GACZ5iC,OAAQA,GAAO4tP,GAAOhsR,GAAQ,IAEhC,CACEgV,QAAS6sN,GAAG3gK,KACZ9iC,OAAQA,GAAO4tP,GAAOhsR,GAAQ,IAEhC,CACEgV,QAAS6sN,GAAG5gK,MACZ7iC,OAAQA,GAAOurP,GAAS3pR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG9gK,KACZ3iC,OAAQA,GAAOurP,GAAS3pR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG7gK,GACZ5iC,OAAQA,GAAOwrP,GAAS5pR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG3gK,KACZ9iC,OAAQA,GAAOwrP,GAAS5pR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG5gK,MACZ7iC,OAAQA,GAAO4kP,GAAQhjR,EAAQ4yF,GAAO,IAExC,CACE59E,QAAS6sN,GAAG9gK,KACZ3iC,OAAQA,GAAO4kP,GAAQhjR,EAAQ4yF,GAAO,IAExC,CACE59E,QAAS6sN,GAAG5gK,MACZ9rD,SAAU+L,EAAGpB,QACb7K,OAAQiM,EAAGpB,QACXse,OAAQA,GAAO6lP,GAAcjkR,EAAQ4yF,IAEvC,CACE59E,QAAS6sN,GAAG9gK,KACZ5rD,SAAU+L,EAAGpB,QACb7K,OAAQiM,EAAGpB,QACXse,OAAQA,GAAO8lP,GAAclkR,EAAQ4yF,IAEvC,CACE59E,QAAS6sN,GAAG7gK,GACZ5iC,OAAQA,GAAOmrP,GAASvpR,GAAQ,IAElC,CACEgV,QAAS6sN,GAAG3gK,KACZ9iC,OAAQA,GAAOmrP,GAASvpR,GAAQ,KAEjCwR,GAAK5T,MAAK,SAAUmQ,GACrByD,EAAIuD,gBACN,GACF,CAIM29Q,CAAyB1yR,EAAQ4yF,EAAOphF,EAE5C,GACF,CA+iCEorK,CAAQ58K,EAAQ4yF,GA/8BJ,SAAU5yF,EAAQ4yF,GAC9B5yF,EAAOmS,GAAG,WAAW,SAAUX,IACI,IAA7BA,EAAIunK,sBAhGmB,SAAU/4K,EAAQ4yF,EAAOphF,GACtD8zD,GAAQ,CACN,CACEtwD,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAO2oP,GAAiB/mR,GAAQ,IAE1C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOy9O,GAAmB77Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOy9O,GAAmB77Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOk8O,GAAmBt6Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOk8O,GAAmBt6Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOqmP,GAAmBzkR,EAAQ4yF,GAAO,IAEnD,CACE59E,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOqmP,GAAmBzkR,EAAQ4yF,GAAO,IAEnD,CACE59E,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOgkN,GAAmBpiP,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOgkN,GAAmBpiP,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAO29O,GAAmB/7Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAO29O,GAAmB/7Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOwnP,GAAmB5lR,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOwnP,GAAmB5lR,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOg7O,GAAmBp5Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOg7O,GAAmBp5Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAO45O,GAAmBh4Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAO45O,GAAmBh4Q,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOsnP,GAAmB1lR,GAAQ,IAE5C,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOsnP,GAAmB1lR,GAAQ,KAE3CwR,GAAK5T,MAAK,SAAUmQ,GACrByD,EAAIuD,gBACN,GACF,CAgBM49Q,CAAyB3yR,EAAQ4yF,EAAOphF,EAE5C,IACAxR,EAAOmS,GAAG,SAAS,SAAUX,IACM,IAA7BA,EAAIunK,sBAnBe,SAAU/4K,EAAQwR,GAC3C8zD,GAAQ,CACN,CACEtwD,QAAS6sN,GAAGnhK,UACZtiC,OAAQA,GAAOw9O,GAAkB57Q,IAEnC,CACEgV,QAAS6sN,GAAGC,OACZ1jM,OAAQA,GAAOw9O,GAAkB57Q,KAElCwR,EACL,CASMohR,CAAqB5yR,EAAQwR,EAEjC,GACF,CAq8BEwnI,CAAQh5I,EAAQ4yF,GArMJ,SAAU5yF,GACtBA,EAAOmS,GAAG,WAAW,SAAUsX,GACzBA,EAAMzU,UAAY6sN,GAAGjhK,OAfH,SAAU5gE,EAAQypB,GAt2OZ,IAAU1iB,EAu2OpC0iB,EAAMsvJ,uBAGVtvJ,EAAM1U,kBA12OkChO,EA22Od/G,EAAO+G,aA12OjBkyP,SACdlyP,EAAYkyP,QAAS,EACrBlyP,EAAYvM,OAy2OdwF,EAAO+G,YAAYC,UAAS,YACa,IAAnChH,EAAO4E,UAAU2+I,eACnBvjJ,EAAOsH,YAAY,UAErB2nE,GAAOjvE,EAAQypB,EACjB,IACF,CAIMopQ,CAAoB7yR,EAAQypB,EAEhC,GACF,CAgMEqpQ,CAAQ9yR,GAbI,SAAUA,GACtBA,EAAOmS,GAAG,WAAW,SAAUX,IACI,IAA7BA,EAAIunK,sBAViB,SAAU/4K,EAAQwR,GAC7C8zD,GAAQ,CAAC,CACLtwD,QAAS6sN,GAAGjlG,SACZx+F,OAAQA,GAAOi0P,GAA8BryR,KAC3CwR,GAAK5T,MAAK,SAAUmQ,GACxByD,EAAIuD,gBACN,GACF,CAIMg+Q,CAAuB/yR,EAAQwR,EAEnC,GACF,CAQEi8J,CAAQztK,GAzII,SAAUA,IAfL,SAAUA,GAC3B,IAAIgzR,EAAmBpqN,IAAM,WACtB5oE,EAAO0lO,WACVoU,GAAuB95O,EAE3B,GAAG,GACC0gB,GAAQ5B,SACV9e,EAAOmS,GAAG,YAAY,SAAU4hI,GAC9Bi/I,EAAiBpxM,UACnB,IACA5hF,EAAOmS,GAAG,UAAU,SAAU4hI,GAC5Bi/I,EAAiBrxM,QACnB,IAEJ,CAEEsxM,CAAajzR,GACbA,EAAOmS,GAAG,SAAS,SAAUY,IACL,IAAlBA,EAAEmgR,aACJp5C,GAAuB95O,EAE3B,GACF,CAmIE4mJ,CAAQ5mJ,GAlKI,SAAUA,EAAQ4yF,GAC9B5yF,EAAOmS,GAAG,WAAW,SAAUX,IACI,IAA7BA,EAAIunK,sBAhCmB,SAAU/4K,EAAQ4yF,EAAOphF,GACtD8zD,GAAQ,CACN,CACEtwD,QAAS6sN,GAAGK,IACZ9jM,OAAQA,GAAOsqP,GAAsB1oR,GAAQ,IAE/C,CACEgV,QAAS6sN,GAAGM,KACZ/jM,OAAQA,GAAOsqP,GAAsB1oR,GAAQ,IAE/C,CACEgV,QAAS6sN,GAAGK,IACZ9jM,OAAQA,GAAOyrP,GAAoB7pR,GAAQ,IAE7C,CACEgV,QAAS6sN,GAAGM,KACZ/jM,OAAQA,GAAOyrP,GAAoB7pR,GAAQ,IAE7C,CACEgV,QAAS6sN,GAAGK,IACZ9jM,OAAQA,GAAO+lP,GAAsBnkR,GAAQ,EAAM4yF,IAErD,CACE59E,QAAS6sN,GAAGM,KACZ/jM,OAAQA,GAAO+lP,GAAsBnkR,GAAQ,EAAO4yF,KAErDphF,GAAK5T,MAAK,SAAUmQ,GACrByD,EAAIuD,gBACN,GACF,CAIMo+Q,CAAyBnzR,EAAQ4yF,EAAOphF,EAE5C,GACF,CA6JEgsK,CAAQx9K,EAAQ4yF,GAvGJ,SAAU5yF,EAAQ4yF,GAC9B,IAAIpyE,GAASU,GAAGpB,QAAhB,CAGA,IAAI6xQ,EAAUv5P,IAAK,GACnBp4B,EAAOmS,GAAG,WAAW,SAAUX,GACzBigR,GAAajgR,IACfkgR,GAAqBC,EAAS3xR,GAAQ,EAE1C,IACAA,EAAOmS,GAAG,SAAS,SAAUX,IACM,IAA7BA,EAAIunK,sBArCa,SAAU/4K,EAAQ4yF,EAAOphF,GAChD8zD,GAAQ,CACN,CACEtwD,QAAS6sN,GAAGG,QACZ5jM,OAAQA,GAAO+lP,GAAsBnkR,GAAQ,EAAO4yF,IAEtD,CACE59E,QAAS6sN,GAAGI,UACZ7jM,OAAQA,GAAO+lP,GAAsBnkR,GAAQ,EAAM4yF,KAEpDphF,EACL,CA2BM4hR,CAAmBpzR,EAAQ4yF,EAAOphF,GAEhCigR,GAAajgR,IAAQmgR,EAAQ1qQ,QAC/ByqQ,GAAqBC,EAAS3xR,GAAQ,GACtCA,EAAOu/J,cAEX,GAfA,CAgBF,CAqFEwJ,CAAQ/oK,EAAQ4yF,GACTA,CACT,EASIygM,GAAa,WACf,SAASA,EAAWrzR,GAGlB,IAAI8pD,EAFJ/nD,KAAKuxR,SAAW,GAChBvxR,KAAK/B,OAASA,EAEd,IAAI3B,EAAO0D,KACL,sBAAuB/B,EAAOqiF,UAClCriF,EAAOmS,GAAG,wCAAwC,SAAUY,GAC1D,IAAIwgR,EAAYvzR,EAAO4E,UAAUmB,SAC7BytR,EAAU,CACZrqR,eAAgBoqR,EAAUpqR,eAC1Bq/C,YAAa+qO,EAAU/qO,YACvBl/C,aAAciqR,EAAUjqR,aACxBm/C,UAAW8qO,EAAU9qO,WAER,eAAX11C,EAAE7X,MAA0BurO,GAAO+sD,EAAS1pO,IAC9C9pD,EAAOyV,KAAK,mBAEdq0C,EAAU0pO,CACZ,IAEFxzR,EAAOmS,GAAG,eAAe,WACvBnS,EAAOyV,KAAK,kBACd,IACAzV,EAAOmS,GAAG,mBAAmB,WAC3B,IAAIovO,EAAWvhP,EAAO4E,UAAUqM,UAAS,IACpCswO,IAAa7qD,GAAI/uI,OAAS3nD,EAAO4E,UAAU2+I,eAG5Cg7E,GAAav+N,KAAY3B,EAAKo1R,kBAAkBlyC,IAAavhP,EAAO+E,IAAIy/M,UAAU+8B,EAAUvhP,EAAOoJ,YACrGpJ,EAAOu/J,YAAY,CAAEorE,iBAAiB,GAE1C,IACA3qO,EAAOmS,GAAG,WAAW,SAAUY,IACxBA,EAAEgmK,sBAAwBwlD,GAAav+N,KACE,QAAxCA,EAAO4E,UAAUC,UAAUrC,SAC7Bu6L,GAAMztL,iBAAiBtP,GAAQ,WAC7BA,EAAOu/J,aACT,IAEAv/J,EAAOu/J,cAGb,GACF,CAwCA,OAvCA8zH,EAAW93R,UAAUgkK,YAAc,SAAU9oJ,GAC3C,IACI5N,EAAMiK,EAAS6jC,EADf/xC,EAAY7C,KAAK/B,OAAO4E,UAExB7C,KAAK/B,OAAOqwJ,aAAezrJ,IAAsC7C,KAAK/B,OAlsf9DE,SAAS,wBAksfiE6B,KAAK/B,OAAOwS,KAAKC,eACrGkkC,EAAO50C,KAAK/B,OAAOoJ,WACnBP,EAAOjE,EAAUqM,UAAS,IAAS0lC,GAC1BtzB,gBAAkBthB,KAAK/B,OAAOqiF,UAAatgF,KAAK/B,OAAO+E,IAAIy/M,UAAU37M,EAAM8tC,KAClF9tC,EAAO8tC,GAET7jC,EAAU,GACV/Q,KAAK/B,OAAO+E,IAAIE,UAAU4D,GAAM,SAAUA,GACxC,GAAIA,IAAS8tC,EACX,OAAO,EAET7jC,EAAQhU,KAAK+J,EACf,KACA4N,EAAOA,GAAQ,CAAC,GACX3C,QAAUjL,EACf4N,EAAK3D,QAAUA,EACf/Q,KAAK/B,OAAOyV,KAAK,aAAcgB,GAEnC,EACA48Q,EAAW93R,UAAUk4R,kBAAoB,SAAUlyC,GACjD,IAAIriP,EACAw0R,EAAc3xR,KAAK/B,OAAOoR,EAAEmwO,GAAUtiC,aAAal9M,KAAK/B,OAAOoJ,WAAW5O,IAAI+mP,GAClF,GAAImyC,EAAYt0R,SAAW2C,KAAKuxR,SAASl0R,OAAQ,CAC/C,IAAKF,EAAIw0R,EAAYt0R,OAAQF,GAAK,GAC5Bw0R,EAAYx0R,KAAO6C,KAAKuxR,SAASp0R,GADFA,KAKrC,IAAW,IAAPA,EAEF,OADA6C,KAAKuxR,SAAWI,GACT,CAEX,CAEA,OADA3xR,KAAKuxR,SAAWI,GACT,CACT,EACOL,CACT,CArFiB,GAkHbM,GAAkB,SAAU9qR,GAC9B,OAAOkxL,GAAYlxL,IAASs3L,GAAc9kL,GAAqBxS,GACjE,EA+BI+qR,GAAsB,SAAUrxR,GAClC,IAAIkpN,EAAalpN,EAAIqlB,wBACjB5C,EAAMziB,EAAI8gB,cACVopI,EAAUznI,EAAIxB,gBACdgF,EAAMxD,EAAIvB,YACd,MAAO,CACLyE,IAAKujM,EAAWvjM,IAAMM,EAAII,YAAc6jI,EAAQ1jI,UAChDnpB,KAAM6rN,EAAW7rN,KAAO4oB,EAAIM,YAAc2jI,EAAQzjI,WAEtD,EAqDI6qQ,GAA2B94F,GAA0B+4F,GAA0Bh5F,GAe/Ei5F,GAAc,SAAU/zR,EAAQuC,EAAK2pB,EAAOrE,GAC9C,IAAI9iB,EAAM/E,EAAO+E,IACbivR,EAAYzxR,EAAI69B,WAAU,GAC9Br7B,EAAI49M,UAAUqxE,EAAW,CACvB9nQ,MAAOA,EACPrE,OAAQA,IAEV9iB,EAAIu7M,UAAU0zE,EAAW,oBAAqB,MAC9C,IAAIhwD,EAAWj/N,EAAIqF,OAAO,MAAO,CAC/B,MAAS,qBACT,iBAAkB,MAClB,aAAgB,KAChB,gBAAmB,UAiBrB,OAfArF,EAAI49M,UAAUqhB,EAAU,CACtB51M,SAAU,WACVotJ,QAAS,GACTtyB,SAAU,SACVuyB,OAAQ,EACR99B,QAAS,EACTvzD,OAAQ,EACRl+D,MAAOA,EACPrE,OAAQA,IAEV9iB,EAAI49M,UAAUqxE,EAAW,CACvB5pM,OAAQ,EACR6pM,UAAW,eAEbjwD,EAAS35N,YAAY2pR,GACdhwD,CACT,EAmBIkwD,GAAgB,SAAU3xR,GACxBA,GAAOA,EAAIyH,YACbzH,EAAIyH,WAAW6H,YAAYtP,EAE/B,EAoGI4xR,GAAkB,SAAU1kR,GAC9BA,EAAM0C,IAAG,SAAU1C,GACjBykR,GAAczkR,EAAM2kR,MACtB,IACA3kR,EAAM4sC,OACR,EACIg4O,GAAqB,SAAUr0R,GACjC,IAAIyP,EAAQtU,KACRm5R,EAAUx0E,GAASnzH,IACnBw2I,EAAe7xN,SACfijR,EApGM,SAAU9kR,EAAOzP,GAC3B,OAAO,SAAU+S,GACf,GAX2B,SAAUA,GACvC,OAAoB,IAAbA,EAAEsiH,MACX,CASQm/J,CAAyBzhR,GAAI,CAC/B,IAAI0hR,EAAQn3Q,EAAOtd,EAAO+E,IAAIgF,WAAWgJ,EAAEvM,QA5vhBxC,WAEP,IADA,IAAIiQ,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAEvB,OAAO,SAAUrb,GACf,IAAK,IAAI6D,EAAI,EAAGA,EAAIuX,EAAKrX,OAAQF,IAC/B,GAAIuX,EAAKvX,GAAG7D,GACV,OAAO,EAGX,OAAO,CACT,CACF,CA+uhB0DoC,CAAGo2R,GAA0BC,KAA0B92R,MAAM,MACjH,GAjFsB8hJ,EAiFN9+I,EAAOoJ,UAhFpByqR,GAD4BtxR,EAiFGkyR,IAhFElyR,IAAQu8I,EAgFF,CACxC,IAAI41I,EAAS10R,EAAO+E,IAAIsmK,OAAOopH,GAC3BzoB,EAAUhsQ,EAAOoJ,UACjBu1M,EAAS3+M,EAAOqiF,SAAS7+D,gBAC7B/T,EAAM6X,IAAI,CACRxT,QAAS2gR,EACTE,UAAU,EACVv4J,QAASrpH,EAAEqpH,QACXC,QAAStpH,EAAEspH,QACXzhF,MAAO56C,EAAOmuF,OAAS69K,EAAQ/vI,YAAc0iF,EAAO73L,aAAe,EACnE+zB,MAAO76C,EAAOmuF,OAAS69K,EAAQ9vI,aAAeyiF,EAAO72L,cAAgB,EACrE8sQ,KAAM7hR,EAAEk4J,MAAQypH,EAAOr5R,EACvBw5R,KAAM9hR,EAAEm4J,MAAQwpH,EAAOtsQ,EACvB8D,MAAOuoQ,EAAM3tQ,YACbe,OAAQ4sQ,EAAM3sQ,aACdssQ,MAAOL,GAAY/zR,EAAQy0R,EAAOA,EAAM3tQ,YAAa2tQ,EAAM3sQ,eAE/D,CACF,CAnGc,IAAUg3H,EAASv8I,CAoGnC,CACF,CA4EyBoY,CAAMlL,EAAOzP,GAChC80R,EA5EK,SAAUrlR,EAAOzP,GAC1B,IAAI+0R,EAAwBh4F,GAAMn7G,UAAS,SAAUv3D,EAASC,GAC5DtqB,EAAOolP,oBAAoBs2B,gBAC3B17Q,EAAO4E,UAAUq7P,aAAa51O,EAASC,EACzC,GAAG,GAEH,OADAtqB,EAAOmS,GAAG,SAAU4iR,EAAsB/qQ,MACnC,SAAUjX,GACf,OAAOtD,EAAM0C,IAAG,SAAU1C,GACxB,IAjE4Bu0N,EAAUgoC,EAiElCrlM,EAAW/5C,KAAKnF,IAAImF,KAAK89D,IAAI33E,EAAEqpH,QAAU3sH,EAAM2sH,SAAUxvG,KAAK89D,IAAI33E,EAAEspH,QAAU5sH,EAAM4sH,UACxF,IAAK5sH,EAAMklR,UAAYhuN,EAAW,GAAI,CAEpC,GADW3mE,EAAOyV,KAAK,YAAa,CAAEjP,OAAQiJ,EAAMqE,UAC3CilK,qBACP,OAEFtpK,EAAMklR,UAAW,EACjB30R,EAAOkH,OACT,CACA,GAAIuI,EAAMklR,SAAU,CAClB,IAAIK,EAjDM,SAAUvlR,EAAO2e,GACjC,MAAO,CACL68I,MAAO78I,EAAS68I,MAAQx7J,EAAMmlR,KAC9B1pH,MAAO98I,EAAS88I,MAAQ,EAE5B,CA4CwB+pH,CAAYxlR,EA7HzB,SAAUzP,EAAQypB,GAC3B,OAPgCyrQ,EA1CZ,SAAUl1R,GAC9B,OAAOA,EAAOmuF,OAASylM,GAAoB5zR,EAAOoJ,WAAa,CAC7DxJ,KAAM,EACNsoB,IAAK,EAET,CA4C2BitQ,CAAgBn1R,GAPKo1R,EApCxB,SAAUp1R,GAChC,IAAIqQ,EAAOrQ,EAAOoJ,UAClB,OAAOpJ,EAAOmuF,OAAS,CACrBvuF,KAAMyQ,EAAKwY,WACXX,IAAK7X,EAAKsY,WACR,CACF/oB,KAAM,EACNsoB,IAAK,EAET,CAkCoDmtQ,CAAkBr1R,GAPNs1R,EAdzC,SAAUt1R,EAAQypB,GACvC,GAAIA,EAAMjjB,OAAO6c,gBAAkBrjB,EAAOqiF,SAAU,CAClD,IAAIkzM,EAAiB3B,GAAoB5zR,EAAOkxI,2BAC5CkkJ,EAfY,SAAUp1R,GAC5B,IAAIqQ,EAAOrQ,EAAOoJ,UAAWu1M,EAAS3+M,EAAOqiF,SAAS7+D,gBAClDgyQ,EAAe,CACjB51R,KAAMyQ,EAAKwY,WACXX,IAAK7X,EAAKsY,WAER8sQ,EAAe,CACjB71R,KAAMyQ,EAAKwY,YAAc81L,EAAO91L,WAChCX,IAAK7X,EAAKsY,WAAag2L,EAAOh2L,WAEhC,OAAO3oB,EAAOmuF,OAASqnM,EAAeC,CACxC,CAIyBC,CAAc11R,GACnC,MAAO,CACLJ,KAAM6pB,EAAMwhJ,MAAQsqH,EAAe31R,KAAOw1R,EAAex1R,KACzDsoB,IAAKuB,EAAMyhJ,MAAQqqH,EAAertQ,IAAMktQ,EAAeltQ,IAE3D,CACA,MAAO,CACLtoB,KAAM6pB,EAAMwhJ,MACZ/iJ,IAAKuB,EAAMyhJ,MAEf,CAQ+EyqH,CAAiB31R,EAAQypB,GAN/F,CACLwhJ,MAAOqqH,EAAc11R,KAAOs1R,EAAat1R,KAAOw1R,EAAex1R,KAC/DsrK,MAAOoqH,EAAcptQ,IAAMgtQ,EAAahtQ,IAAMktQ,EAAeltQ,KAHzC,IAAUgtQ,EAAcE,EAAgBE,CAQhE,CA2H2CM,CAAK51R,EAAQ+S,IA3EtBixN,EA4ERv0N,EAAM2kR,MA5EYpoB,EA4ELhsQ,EAAOoJ,UA3ExC46N,EAASh6N,aAAegiQ,GAC1BA,EAAQ3hQ,YAAY25N,GAGR,SAAUA,EAAU51M,EAAUlC,EAAOrE,EAAQ+yB,EAAMC,GACjE,IAAIg7O,EAAY,EAAGjsE,EAAY,EAC/Boa,EAAS9oN,MAAMtb,KAAOwuB,EAAS68I,MAAQ,KACvC+4D,EAAS9oN,MAAMgN,IAAMkG,EAAS88I,MAAQ,KAClC98I,EAAS68I,MAAQ/+I,EAAQ0uB,IAC3Bi7O,EAAYznQ,EAAS68I,MAAQ/+I,EAAQ0uB,GAEnCxsB,EAAS88I,MAAQrjJ,EAASgzB,IAC5B+uK,EAAYx7L,EAAS88I,MAAQrjJ,EAASgzB,GAExCmpL,EAAS9oN,MAAMgR,MAAQA,EAAQ2pQ,EAAY,KAC3C7xD,EAAS9oN,MAAM2M,OAASA,EAAS+hM,EAAY,IAC/C,CA4DQksE,CAAUrmR,EAAM2kR,MAAOY,EAAWvlR,EAAMyc,MAAOzc,EAAMoY,OAAQpY,EAAMmrC,KAAMnrC,EAAMorC,MAC/Ek6O,EAAsBhiR,EAAEsX,QAAStX,EAAEuX,QACrC,CACF,GACF,CACF,CAmDoBs8C,CAAKn3D,EAAOzP,GAC1B+1R,EA9CK,SAAUtmR,EAAOzP,GAC1B,OAAO,SAAU+S,GACftD,EAAM0C,IAAG,SAAU1C,GACjB,GAAIA,EAAMklR,SAAU,CAClB,GAtIgB,SAAU30R,EAAQ0rD,EAAesqO,GACvD,OAAItqO,IAAkBsqO,IAAeh2R,EAAO+E,IAAIy/M,UAAU94J,EAAesqO,KAGjEnC,GAAyBnoO,EACnC,CAiIYuqO,CAAkBj2R,EANO,KAD/BmJ,EAO6CnJ,EAAO4E,UARpCm5N,SAASl0K,WAAW,GACf1gD,gBACHnD,SAAiBmD,EAAea,WAAab,EAMCsG,EAAMqE,SAAU,CAC5E,IAAIoiR,IAhIRC,EAgIqC1mR,EAAMqE,QAhI5BssB,WAAU,IACpB1a,gBAAgB,qBAClBywQ,GA+HYn2R,EAAOyV,KAAK,OAAQ,CAC7B4U,QAAStX,EAAEsX,QACXC,QAASvX,EAAEuX,UAEHyuJ,sBACR/4K,EAAO+G,YAAYC,UAAS,WAC1BktR,GAAczkR,EAAMqE,SACpB9T,EAAOuH,cAAcvH,EAAO+E,IAAIu+M,aAAa4yE,IAC7Cl2R,EAAOolP,oBAAoBs2B,eAC7B,GAEJ,CACA17Q,EAAOyV,KAAK,UACd,CA/Ia,IACb0gR,EAwHAhtR,CAuBF,IACAgrR,GAAgB1kR,EAClB,CACF,CAuBoB4kK,CAAK5kK,EAAOzP,GAC1Bo2R,EAvBK,SAAU3mR,EAAOzP,GAC1B,OAAO,WACLyP,EAAM0C,IAAG,SAAU1C,GACbA,EAAMklR,UACR30R,EAAOyV,KAAK,UAEhB,IACA0+Q,GAAgB1kR,EAClB,CACF,CAcuBua,CAAKva,EAAOzP,GACjCA,EAAOmS,GAAG,YAAaoiR,GACvBv0R,EAAOmS,GAAG,YAAa2iR,GACvB90R,EAAOmS,GAAG,UAAW4jR,GACrBzB,EAAQz2R,KAAKslO,EAAc,YAAa2xD,GACxCR,EAAQz2R,KAAKslO,EAAc,UAAWizD,GACtCp2R,EAAOmS,GAAG,UAAU,WAClBmiR,EAAQzpQ,OAAOs4M,EAAc,YAAa2xD,GAC1CR,EAAQzpQ,OAAOs4M,EAAc,UAAWizD,EAC1C,IACAp2R,EAAOmS,GAAG,WAAW,SAAUY,GACzBA,EAAEiC,UAAY6sN,GAAGE,KACnBq0D,GAEJ,GACF,EA6FI5hJ,GAAwBsmD,GACxBrmD,GAAyBsmD,GACzBs7F,GAAyB,SAAUr2R,EAAQ6I,GAC7C,OAAO04N,GAAyBvhO,EAAOoJ,UAAWP,EACpD,EACIytR,GAAqB,SAAUt2R,GACjC,IAQIiuK,EARArpK,EAAY5E,EAAO4E,UAAWG,EAAM/E,EAAO+E,IAC3Ci9E,EAAUj9E,EAAIi9E,QACdD,EAAW/hF,EAAOoJ,UAClBmtR,EAAY3jE,GAAU5yN,EAAQ+hF,EAAUC,GAAS,WACnD,OAAOtrC,GAAS12C,EAClB,IACIw2R,EAAkB,OAASzxR,EAAIs+M,WAC/B4f,EAAuB,oBAKvBwzD,EAA+B,SAAU5tR,GAC3C,OAAOA,IAASk5E,IAAa0yD,GAAuB5rI,IAASoyL,GAAUpyL,KAAU9D,EAAIy/M,UAAU37M,EAAMk5E,EACvG,EACI20M,EAA6B,SAAUj+O,GACzC,OAAOy+L,GAA6Bz+L,IAAQ0+L,GAA4B1+L,IAAQq+L,GAAcr+L,IAAQs+L,GAAat+L,EACrH,EAKIk+O,EAAW,SAAUhvO,GACnBA,GACF/iD,EAAU6E,OAAOk+C,EAErB,EACIivO,EAAWhyR,EAAUmB,OACrByzQ,EAAY,SAAUxpO,EAAWnnC,EAAM89C,EAAQt1C,GASjD,YARuB,IAAnBA,IACFA,GAAiB,GAEXrR,EAAOyV,KAAK,YAAa,CAC/BjP,OAAQqC,EACRmnC,UAAWA,EACX2W,OAAQA,IAEJoyH,qBACG,MAEL1nK,GACFzM,EAAUyM,eAAexI,GAAqB,IAAfmnC,GAE1BumP,EAAUpqM,KAAKxlC,EAAQ99C,GAChC,EAmKIguR,EAAyB,SAAUhuR,GACrC,OAAOo4L,GAAmBp4L,IAAS04L,GAA2B14L,IAAS24L,GAAyB34L,EAClG,EACIiuR,EAA0B,SAAUj0R,GACtC,OAAOg0R,EAAuBh0R,EAAIsG,iBAAmB0tR,EAAuBh0R,EAAIyG,aAClF,EA+EIytR,EAAsB,SAAUpvO,EAAOwyJ,GACzC,IAAKxyJ,EACH,OAAO,KAET,GAAIA,EAAM5kD,UAAW,CACnB,IAAK+zR,EAAwBnvO,GAAQ,CACnC,IAAI/V,EAAMuoK,EAAU,GAAK,EACrBoS,EAAgBoJ,GAA2B/jL,EAAKmwC,EAAUp6B,GAC1D+kK,EAAaH,EAAc1nN,SAASs1M,GACxC,GAAI2Z,GAAkBpH,GACpB,OAAO8sD,EAAU5nO,EAAK86K,IAAYvS,IAAWoS,EAAcjrB,WAAmB,GAEhF,IAAI01F,EAAYzqE,EAAc1nN,QAAQs1M,GACtC,GAAI2Z,GAAkBkjE,GACpB,OAAOxd,EAAU5nO,EAAKolP,GAAW78E,IAAmBoS,EAAcjrB,WAAW,EAEjF,CACA,OAAO,IACT,CACA,IAAIn4L,EAAiBw+C,EAAMx+C,eACvBq/C,EAAcb,EAAMa,YACpBC,EAAYd,EAAMc,UAMtB,GALgC,IAA5Bt/C,EAAenD,UAAkC,IAAhBwiD,GAAqBisF,GAAuBtrI,EAAea,cAC9Fb,EAAiBA,EAAea,WAChCw+C,EAAczjD,EAAIs1M,UAAUlxM,GAC5BA,EAAiBA,EAAea,YAEF,IAA5Bb,EAAenD,SACjB,OAAO,KAET,GAAIyiD,IAAcD,EAAc,GAAKr/C,IAAmBw+C,EAAMr+C,aAAc,CAC1E,IAAIT,EAAOM,EAAewS,WAAW6sC,GACrC,GAAIiuO,EAA6B5tR,GAC/B,OAxDc,SAAUtG,GAC5B,IAAI00R,EAAc10R,EAAI69B,WAAU,GAC5BrtB,EAAI/S,EAAOyV,KAAK,iBAAkB,CACpCjP,OAAQjE,EACR00R,YAAaA,IAEf,GAAIlkR,EAAEgmK,qBACJ,OAAO,KAET,IAAIpxH,EArCwB,SAAU9+C,EAAMouR,EAAaC,GACzD,IAAI9lR,EAAIpR,EAAOoR,EACX+lR,EAA0BzqP,GAAWrxB,GAAqBrb,EAAOoJ,WAAY,IAAMotR,GAAiB75R,MAAK,WAC3G,OAAOyU,EAAE,GACX,IAAG,SAAU7O,GACX,OAAO6O,EAAE,CAAC7O,EAAIwC,KAChB,IACuC,IAAnCoyR,EAAwB/3R,SAC1B+3R,EAA0B/lR,EAAE,oEAAoEy1B,KAAK,KAAM2vP,IACnFp4E,SAASp+M,EAAOoJ,WAE1C,IAAIi/Q,EAAWtjR,EAAI2+E,YACfuzM,IAAgBC,GAAmBxgG,GAAIC,IACzCwgG,EAAwB3rQ,QAAQskD,OAAO,sDAAyDA,OAAOmnN,GACvG5O,EAASrgO,cAAcmvO,EAAwB,GAAGh0R,WAAWA,YAC7DklR,EAAS7+Q,YAAYytR,KAErBE,EAAwB3rQ,QAAQskD,OAAO2wH,IAAM3wH,OAAOmnN,GAAannN,OAAO2wH,IACxE4nF,EAAStgO,SAASovO,EAAwB,GAAGh0R,WAAY,GACzDklR,EAASngO,OAAOivO,EAAwB,GAAGh+F,UAAW,IAExDg+F,EAAwBjxQ,IAAI,CAAEgC,IAAKnjB,EAAIsmK,OAAOxiK,EAAM7I,EAAOoJ,WAAWgf,IACtE+uQ,EAAwB,GAAGjwR,QAC3B,IAAI+jD,EAAMrmD,EAAUm5N,SAGpB,OAFA9yK,EAAI8zM,kBACJ9zM,EAAI+zM,SAASqpB,GACNA,CACT,CAUc+O,CAAwB70R,EAAKwQ,EAAEkkR,YAAaA,GACpDI,EAAUh8Q,GAAqB9Y,GAWnC,OAVAwyL,EAAOxrI,GAAYluC,GAAqBrb,EAAOoJ,WAAY,yBAAyB,SAAU7G,GACvFigB,GAAG60Q,EAAS90R,IACfqkB,GAASrkB,EAAK0gO,EAElB,IACKl+N,EAAIiI,UAAUzK,EAAK0gO,IACtB1gO,EAAI2iB,aAAa+9M,EAAsB,KAEzCh1D,EAAkB1rK,EAClBm5Q,IACO/zN,CACT,CAkCa2vO,CAAczuR,EAEzB,CACA,OAAO,IACT,EACI0uR,EAAyB,WACvBtpH,GACFA,EAAgBvoJ,gBAAgBu9M,GAElCv2L,GAAWrxB,GAAqBrb,EAAOoJ,WAAY,IAAMotR,GAAiB54R,KAAK6nB,IAC/EwoJ,EAAkB,IACpB,EAKIytG,EAAgB,WAClB6a,EAAU3hR,MACZ,EAIA,OAHI8hL,GAAIO,UAAYilE,GAAMl8P,IAnSL,WACnBA,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IAAI40C,EAAQivO,IACRjvO,EAAM5kD,WAAagpQ,GAAkB/rQ,EAAQ+S,EAAEsX,QAAStX,EAAEuX,UAC5DovP,GAAmB15Q,EAAQ2nD,GAAO,GAAO/pD,KAAK+4R,EAElD,IACA32R,EAAOmS,GAAG,SAAS,SAAUY,GAC3B,IAAIykR,EAAsBnB,GAAuBr2R,EAAQ+S,EAAEvM,QACvDgxR,IACE/iJ,GAAuB+iJ,KACzBzkR,EAAEgC,iBACF/U,EAAOkH,SAELstI,GAAsBgjJ,IACpBzyR,EAAIy/M,UAAUgzE,EAAqB5yR,EAAUC,YAC/C0yR,IAIR,IACAv3R,EAAOmS,GAAG,gBAAiBolR,GAC3Bv3R,EAAOmS,GAAG,sCAAuCokR,EAAUn+O,YA+B3Dp4C,EAAOmS,GAAG,OAAO,SAAUY,GACzB,IAAIk0I,EAAYl0I,EAAEvM,OACdgxR,EAAsBnB,GAAuBr2R,EAAQinJ,GACrDxS,GAAuB+iJ,IACzBzkR,EAAEgC,iBACF4uE,GAAW3jF,EAAQw3R,GAAqB55R,KAAKm5R,IACpCN,EAA6BxvI,IACtCtjE,GAAW3jF,EAAQinJ,GAAWrpJ,KAAKm5R,EAEvC,IAAG,GACH/2R,EAAOmS,GAAG,aAAa,SAAUY,GAC/B,IAtBmCioJ,EAAYyhH,EALnBtnD,EAAOC,EAM/BqiE,EACAzkE,EAoBA/rE,EAAYl0I,EAAEvM,OAClB,IAAIygJ,IAAcllE,GAAmC,SAAvBklE,EAAUzkJ,UAAwBuC,EAAIy/M,UAAUv9D,EAAWllE,MAGjC,IAApDgqL,GAAkB/rQ,EAAQ+S,EAAEsX,QAAStX,EAAEuX,SAA3C,CAGA,IAAIktQ,EAAsBnB,GAAuBr2R,EAAQinJ,GACzD,GAAIuwI,EACE/iJ,GAAuB+iJ,IACzBzkR,EAAEgC,iBACF4uE,GAAW3jF,EAAQw3R,GAAqB55R,KAAKm5R,KAE7CQ,IACM/iJ,GAAsBgjJ,IAAwBzkR,EAAEmC,UAAcssN,GAAgBzuN,EAAEsX,QAAStX,EAAEuX,QAAS1lB,EAAUmB,YAClH21Q,IACA92Q,EAAUq7P,aAAaltP,EAAEsX,QAAStX,EAAEuX,gBAGnC,GAAImsQ,EAA6BxvI,GACtCtjE,GAAW3jF,EAAQinJ,GAAWrpJ,KAAKm5R,QAC9B,IAAqC,IAAjCjjE,GAAkB7sE,GAAsB,CACjDswI,IACA7b,IACA,IAAIgc,EAt1FW,SAAU/gP,EAAMtsB,EAASC,GAC9C,IAAIqtQ,EAAsBntO,GAVF,SAAU7T,GAClC,OAAOq+I,EAASt2L,GAAKi4C,EAAKkrJ,qBAAqB,MAAOiyB,GACxD,CAQ2C8jE,CAAoBjhP,IACzDkhP,EAAkB7iG,EAAS2iG,EAAqB9gR,EAAMoqQ,GAAW32P,IACjEwtQ,EAAc,SAAUrsE,GAC1B,OAAQnxB,GAAUmxB,EAAW5iN,QAAUoyL,GAAUwwB,EAAW5iN,KAC9D,EACIkvR,EAAkB7W,GAAsB2W,EAAiBxtQ,EAASytQ,GACtE,GAAIC,EAAiB,CACnB,IAAIvW,EAAkBsW,EAAYC,GAElC,GADAA,EAAkB7W,GAnCE,SAAUvqO,EAAMqhP,EAAgBxW,QAC9B,IAApBA,IACFA,GAAkB,GAEpB,IAAI91D,EAAc,GACdvK,EAAU,SAAU82E,EAAYpvR,GAClC,IAAIqvR,EAAYljG,EAASxqI,GAAe,CAAC3hD,KAAQ,SAAU4iN,GACzD,OAAQwsE,EAAWxsE,EAAYusE,EACjC,IAEA,OADAtsE,EAAcA,EAAYrnN,OAAO6zR,GACL,IAArBA,EAAU94R,MACnB,EAIA,OAHAssN,EAAY5sN,KAAKk5R,GACjBzW,GAAUlD,GAAW+B,GAAIzpO,EAAM9/B,EAAMsqM,EAAS4I,IAAYiuE,EAAenvR,KAAM24Q,GAC/ED,GAAUlD,GAAWiC,KAAM3pO,EAAM9/B,EAAMsqM,EAAS8I,IAAY+tE,EAAenvR,KAAM24Q,GAC1E91D,CACT,CAmB4CysE,CAAkBxhP,EAAMohP,EAAiBvW,GAAkBn3P,EAASytQ,GACxGC,GAAmBjkE,GAAkBikE,EAAgBlvR,MACvD,OAjBU,SAAU4iN,EAAYphM,GACpC,MAAO,CACLxhB,KAAM4iN,EAAW5iN,KACjB89C,OAAQm6N,GAAmBr1D,EAAYphM,GAAW02P,GAAoBt1D,EAAYphM,GAEtF,CAYa+tQ,CAAUL,EAAiB1tQ,EAEtC,CACA,OAAO,IACT,CAu0F4BguQ,CAAiBt2M,EAAUhvE,EAAEsX,QAAStX,EAAEuX,SAC5D,GAAIotQ,IA/C6B18H,EAgDL/T,EAhDiBw1H,EAgDNib,EAAc7uR,KA/CnD4uR,EAAc1yR,EAAIE,UAAU+1J,EAAYh5E,GACxCgxI,EAAajuN,EAAIE,UAAUw3Q,EAAWz6L,GACtC9rE,EAAWuhR,MAGXz8H,IAAeg4D,GAAcjuN,EAAIy/M,UAAUizE,EAAazkE,KAAuF,IAAxEv+E,GAAuB4hJ,GAAuBr2R,EAAQy3R,MAGzH1yR,EAAIy/M,UAAUwO,EAAYykE,KAdNtiE,EAcqCsiE,EAd9BriE,EAc2CpC,EAbjEjuN,EAAIE,UAAUkwN,EAAOnzI,KACrBj9E,EAAIE,UAAUmwN,EAAOpzI,KAhBP,SAAUz/E,GACrC,IAAIoY,EAAQpY,EAAIY,WAChB,GAAI+S,EAAWyE,GACb,OAAO,EAET,IAAIg8M,EAAWrK,GAAc3lK,OAAOhsC,GACpC,GAAIigL,GAAO+7B,EAAS9xN,YAAwC,IAA1BtC,EAAIoZ,WAAWvc,OAC/C,OAAQs3R,EAA2B//D,GAEnC,IACIl9K,EADcy9K,GAAY30N,GACLe,KAAKqzN,GAC9B,OAAOl9K,IAAWi9O,EAA2Bj9O,EAEjD,CAe+F6+O,CAAuBb,KAuCtD,CACxD1kR,EAAEgC,iBACF,IAAI4yC,EAAQ6xN,EAAU,EAAGke,EAAc7uR,KAAM6uR,EAAc/wO,QAAQ,GACnEgwO,EAAShvO,GACT3nD,EAAOoJ,UAAUlC,OACnB,CAEJ,CA3BA,CA4BF,IACAlH,EAAOmS,GAAG,YAAY,SAAUY,GAC1B8uN,GAAGO,gBAAgBrvN,IAGnB0hI,GAAuB7vI,EAAUC,YACnCkO,EAAEgC,gBAEN,IACA/U,EAAOmS,GAAG,qBAAqB,SAAUY,GACvC,IAAIlQ,EAAMkQ,EAAE40C,MACZ,GAAIsmH,EAAiB,CACnB,IAAKA,EAAgBjkK,WAEnB,YADAikK,EAAkB,OAGpBprK,EAAMA,EAAIoG,cACN06E,WAAWsqF,GACfl7J,EAAE40C,MAAQ9kD,CACZ,CACF,IACA7C,EAAOmS,GAAG,qBAAqB,SAAUY,GACvCA,EAAE40C,MAyCoC,SAAU9kD,GAClD,IAAIutO,EAAqBpwO,EAAO6F,OAAOgnM,wBACnCqf,EAASnnN,EAAI2+E,YACbv6E,EAAiBtG,EAAIsG,eACrBq/C,EAAc3lD,EAAI2lD,YAClBl/C,EAAezG,EAAIyG,aACnBm/C,EAAY5lD,EAAI4lD,UAmBpB,OAlBIvuC,GAAMk2N,EAAoBjnO,EAAe3G,SAASC,eAChC,IAAhB+lD,EACF0jK,EAAO3iN,eAAeJ,GAEtB+iN,EAAOlkK,cAAc7+C,GAGvB+iN,EAAOnkK,SAAS5+C,EAAgBq/C,GAE9BtuC,GAAMk2N,EAAoB9mO,EAAa9G,SAASC,eAChC,IAAdgmD,EACFyjK,EAAOjkK,aAAa3+C,GAEpB4iN,EAAO1iN,YAAYF,GAGrB4iN,EAAOhkK,OAAO5+C,EAAcm/C,GAEvByjK,CACT,CAnEcqsE,CAAoCxlR,EAAE40C,OAChD,IAAI9kD,EAAMk0R,EAAoBhkR,EAAE40C,MAAO50C,EAAEonM,SACrCt3M,IACFkQ,EAAE40C,MAAQ9kD,EAEd,IAIA7C,EAAOmS,GAAG,0BAA0B,SAAUY,GAC5C,IA7KmClK,EA6K/BhG,EAAMkQ,EAAE40C,MACR39C,EAAanH,EAAIsG,eAAea,WAC/B8sR,EAAwBj0R,IALV,gBAK8BmH,EALrCrP,IAMV+gR,IAhLiC7yQ,EAkLPmB,EAjLvBjF,EAAIi4M,SAASn0M,EAAM,4BAkLtB0uR,GAEJ,IACAv3R,EAAOmS,GAAG,QAAQ,SAAUY,GAC1B,IA7KEmtB,EA6KEs4P,EAAgBzlR,EAAEylR,cACtB,IAAKzlR,EAAEgmK,sBAAwBhmK,EAAEylR,gBAAkB9hG,GAAIC,GAAI,CACzD,IAAI8hG,GA/KJv4P,EAAYn7B,EAAIkiB,IAAIuvQ,IACLt2P,EAAU2hK,qBAAqB,KAAK,GAAK3hK,EA+KpDu4P,IACF1lR,EAAEgC,iBACFyjR,EAAcE,YACdF,EAAc7nR,QAAQ,YAAa8nR,EAAqBl1E,WACxDi1E,EAAc7nR,QAAQ,aAAc8nR,EAAqBE,WAAaF,EAAqBrzR,WAE/F,CACF,IA3PS,SAAUpF,GACrBq0R,GAAmBr0R,GAlDH,SAAUA,GAC1BA,EAAOmS,GAAG,QAAQ,SAAUY,GAC1B,IAAI6lR,OAAkC,IAAd7lR,EAAEsX,QAA0BrqB,EAAOqiF,SAAS8jJ,iBAAiBpzN,EAAEsX,QAAStX,EAAEuX,SAAW,MACzGupQ,GAAyB+E,IAAmE,UAApD54R,EAAO+E,IAAIw/M,yBAAyBq0E,KAC9E7lR,EAAEgC,gBAEN,GACF,CA4CE8jR,CAAY74R,GA7kgBmB,SAAUA,GACzC,OAAOA,EAAOE,SAAS,0BAA0B,EAAM,UACzD,CA4kgBM44R,CAA2B94R,IA5CF,SAAUA,GACvC,IAAI+4R,EAAkB,SAAUhmR,GAC9B,IAAKA,EAAEgmK,qBAAsB,CAC3B,IAAIztC,EAAev4H,EAAEu4H,aACjBA,IAAiBupD,EAAWvpD,EAAa8L,MAAO,UAAY9L,EAAaC,MAAMnsI,OAAS,KAC1F2T,EAAEgC,iBACa,SAAXhC,EAAE7X,MACJ2yQ,GAAa7tQ,EAAQ,sCAG3B,CACF,EACIg5R,EAA6B,SAAUjmR,GACrCg4N,GAAY/qO,EAAQ+S,EAAEvM,SACxBuyR,EAAgBhmR,EAEpB,EACI8C,EAAQ,WACV,IAAIy+Q,EAAUx0E,GAASnzH,IACnB5nF,EAAM/E,EAAO+E,IACbigB,EAAM1T,SACN2nR,EAAaj5R,EAAOmuF,OAASnuF,EAAOoJ,UAAYpJ,EAAOqiF,SACvD62M,EAAa,CACf,OACA,YAEFnkG,EAAOmkG,GAAY,SAAUx9R,GAC3B44R,EAAQz2R,KAAKmnB,EAAKtpB,EAAMs9R,GACxBj0R,EAAIlH,KAAKo7R,EAAYv9R,EAAMq9R,EAC7B,IACA/4R,EAAOmS,GAAG,UAAU,WAClB4iL,EAAOmkG,GAAY,SAAUx9R,GAC3B44R,EAAQzpQ,OAAO7F,EAAKtpB,EAAMs9R,GAC1Bj0R,EAAI8lB,OAAOouQ,EAAYv9R,EAAMq9R,EAC/B,GACF,GACF,EACA/4R,EAAOmS,GAAG,QAAQ,WAChB4qL,GAAMztL,iBAAiBtP,EAAQ6V,EAAO,EACxC,GACF,CAKIsjR,CAAyBn5R,EAE7B,CAsPIu0K,CAAOv0K,GApPG,SAAUA,GACtB,IAAIo5R,EAAmBxwN,IAAM,WAC3B,IAAK5oE,EAAO49H,SAAW59H,EAAOoJ,UAAUuZ,SAASrR,SAASslC,eAAgB,CACxE,IAAI/zC,EAAM7C,EAAO4E,UAAUmB,SAC3B,GAAIlD,EAAIE,UAAW,CACjB,IAAIo3Q,EAAaL,GAAiB95Q,EAAQ6C,GAAK,GAC/C7C,EAAO4E,UAAU6E,OAAO0wQ,EAC1B,CACF,CACF,GAAG,GACHn6Q,EAAOmS,GAAG,SAAS,WACjBinR,EAAiBx3M,UACnB,IACA5hF,EAAOmS,GAAG,QAAQ,WAChBinR,EAAiBz3M,QACnB,GACF,CAqOI8uG,CAAQzwL,GAnOA,SAAUA,GACpBA,EAAOmS,GAAG,QAAQ,WAChBnS,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IAAIvM,EAASuM,EAAEvM,OACf,GAAIy0L,GAAUz0L,GAAS,CACrB,IAAIqzQ,EAASt4C,GAAyBvhO,EAAOoJ,UAAW5C,GACpDqC,EAAOkyL,GAAyB8+E,GAAUA,EAASrzQ,EACnDxG,EAAO4E,UAAUC,YAAcgE,GACjC86E,GAAW3jF,EAAQ6I,GAAMjL,MAAK,SAAUiF,GACtC,OAAO7C,EAAO4E,UAAU6E,OAAO5G,EACjC,GAEJ,CACF,GACF,GACF,CAqNIgT,CAAM7V,EACR,CA0IE+sQ,GAEK,CACLyM,UAAWA,EACXn0B,wBA/S4B,SAAUkiC,GAClCA,EAAoB/hQ,aAAa,oBACnCi8K,GAAwB8lF,GACxBoP,EAASC,KACThyR,EAAUyM,eAAek2Q,GAE7B,EA0SE7L,cAAeA,EACfl/N,QAdY,WACZ+5O,EAAU/5O,UACVyxH,EAAkB,IACpB,EAaF,EAscIorH,GAAQv5E,GAASnzH,IAYjB2sM,GAAc,SAAUt5R,GAC1B,OAAOA,EAAOmuF,OAASnuF,EAAOysF,aAAajqF,SAASC,mBAAgBjF,CACtE,EACI+7R,GAAkB,SAAUr3R,GAC9B,OAAOozL,GAASpzL,GAAK,SAAUkG,GAC7B,OAA0B,IAAnB6N,EAAY7N,EACrB,GACF,EACIoxR,GAAmB,SAAUx5R,GAC/B,IAAIyI,EAAWzI,EAAOyI,SACtB,OAAO8wR,GAAgB,CACrB1uF,eAAgBpiM,EAASoiM,eACzB4uF,mBAAoBhxR,EAASgxR,mBAC7BjuF,gBAAiB/iM,EAAS+iM,gBAC1BE,wBAAyBjjM,EAASijM,wBAClCa,iBAAkB9jM,EAAS8jM,iBAC3BpE,eAAgB1/L,EAAS0/L,eACzBuxF,oCAAqCjxR,EAASixR,oCAC9CC,mBAAoBlxR,EAASkxR,mBAC7B9zR,OAAQ4C,EAAS5C,OACjBqtO,sBAAuBzqO,EAASyqO,sBAChC0mD,qBAAsBnxR,EAASmxR,qBAC/BjrN,QAASlmE,EAASkmE,QAClBi8H,oBAAqBniM,EAASmiM,oBAC9BivF,qBAAsBpxR,EAASoxR,qBAC/BpuF,eAAgBhjM,EAASgjM,eACzBpD,cAAe5/L,EAAS4/L,cACxBN,eAAgBt/L,EAASs/L,eACzBE,aAAcx/L,EAASw/L,aACvBH,YAAar/L,EAASq/L,YACtBgyF,oBAAqBrxR,EAASqxR,oBAC9BxuF,iCAAkC7iM,EAASsxR,oBAE/C,EACIC,GAAmB,SAAUh6R,GAC/B,IAAIyI,EAAWzI,EAAOyI,SAClB64P,EAAYthQ,EAAOi6R,aAAa34B,UACpC,OAAOi4B,GAAgB,CACrBlnD,2BAA4B5pO,EAAS4pO,2BACrChE,qBAAsB5lO,EAAS4lO,qBAC/Bt/B,oBAAqBtmM,EAASsmM,oBAC9By2D,2BAA4B/8P,EAAS+8P,2BACrC12D,kBAAmBrmM,EAASqmM,kBAC5Bw2D,yBAA0B78P,EAAS68P,yBACnClF,uBAAwB33P,EAAS23P,uBACjCqF,kBAAmBh9P,EAASg9P,kBAC5BhF,wBAAyBh4P,EAASg4P,wBAClC/O,kBAAmBjpP,EAASipP,kBAC5B3D,wBAAyBtlP,EAASslP,wBAClCsU,mBAAoB55P,EAAS45P,mBAC7B7uB,eAAgB/qO,EAAS+qO,eACzB4xB,oBAAqB38P,EAAS28P,oBAC9BkB,cAAe79P,EAAS69P,cACxBvD,UAAWu2B,GAAYt5R,GACvBkuG,UAAU,EACV03J,WAAYtE,EACZhwP,SAAUtR,EAAOqiF,SACjB4jL,sBAAuBx9P,EAASw9P,uBAEpC,EAyGIi0B,GAAa,SAAUl6R,GACzBA,EAAOm6R,4BACPn6R,EAAOqwJ,aAAc,EAp1eR,SAAUrwJ,GAChBA,EAAOyV,KAAK,OACrB,CAm1eE2kR,CAASp6R,GACTA,EAAOkH,OAAM,GAlByB,SAAUlH,GAChD,IAAI22C,EAAO32C,EAAO+E,IAAIo+E,UACjBnjF,EAAOmuF,QAAYowI,GAAav+N,IAAWA,EAAO4E,UAAUqM,UAAS,KAAU0lC,GAClFohL,GAAgBphL,GAAM/4C,MAAK,SAAU66C,GACnC,IAAI5vC,EAAO4vC,EAAI5zC,UACX8mO,EAAWrxC,GAAUzxL,GAAQkvN,GAAgBlvN,GAAM7L,MAAMy7C,GAAOA,EAChEi+I,GAAIh2K,QAAQ5B,OAtpcJ,SAAU9e,EAAQ6C,GAClC,IAAI8zC,EAAOt7B,GAAqBrb,EAAOoJ,WAEnC+gO,GADQH,GAAYhqO,GAAUvB,EAASC,KAAKmE,GAAOpE,EAAShC,QACxCkB,IAAIssO,IAA6BjsO,OAAO+rO,GAAYpzL,IAC5E32C,EAAO+I,SAAWohO,EAAYrtO,SAAWqtO,EAAcnqO,EAAO+I,QAChE,CAkpcQsxR,CAAYr6R,EAAQ2rO,EAAS/e,WAE7B5sN,EAAO4E,UAAU6E,OAAOkiO,EAAS/e,UAErC,GAEJ,CAME0tE,CAAkCt6R,GAClCA,EAAOu/J,YAAY,CAAElnI,SAAS,IAC9Br4B,EAAOu6R,aAAa,yBAA0Bv6R,GApChC,SAAUA,GACpBA,EAAOyI,SAAS+xR,YAClBz9F,GAAMztL,iBAAiBtP,GAAQ,WAC7B,IAAIy6R,GAEFA,GADiC,IAA/Bz6R,EAAOyI,SAAS+xR,WACJx6R,EAEAA,EAAOknJ,cAAcjgI,IAAIjnB,EAAOyI,SAAS+xR,aAExCE,WACfD,EAAYvzR,OAEhB,GAAG,IAEP,CAuBEyzR,CAAU36R,EACZ,EACI46R,GAAwB,SAAU56R,GACpC,OAAOA,EAAOmuF,OAASnuF,EAAOgT,GAAGw9I,iBAAmBxwJ,EAAO+E,IAAIyrJ,gBACjE,EAaIqqI,GAAiB,SAAU76R,GAC7B,IAAIwwJ,EAAmBoqI,GAAsB56R,GACzC6wN,EAAUD,GAAW5wN,GACrBkmB,EAAMlmB,EAAOoxJ,WACb0pI,EAAY,WACdtqI,EAAiByuC,UAAU/4K,GACtBlmB,EAAOmuF,QACVnuF,EAAOgT,GAAGw9I,iBAAiByuC,UAAU4xB,EAEzC,EACIjqG,EAAS,WACP5mH,EAAO49H,QACTk9J,IAEA96R,EAAOmS,GAAG,SAAU2oR,EAExB,EACA,GAAI96R,EAAO+6R,cAAc37R,OAAS,EAAG,CACnC,IAAI47R,EAAmB,GACvBlgS,GAAM8C,KAAKoC,EAAO+6R,eAAe,SAAU7/Q,GACzC8/Q,GAAoB9/Q,EAAQ,MAC9B,IACAlb,EAAO+E,IAAIk+M,SAAS+3E,EACtB,CACA,IAAIC,EAAiBx+F,GAAWxlL,IApCE,SAAUjX,EAAQkmB,EAAKg1Q,GACzD,IAAIv5B,EAAW,CAAC,IAAIllE,IAAW,SAAU1hM,EAASkwG,GAC9C,OAAO2vL,GAAsB56R,GAAQ4+L,QAAQ14K,EAAKnrB,EAASkwG,EAC7D,KACF,OAAIjrG,EAAOmuF,OACFwzK,EAEAA,EAASt9P,OAAO,CAAC,IAAIo4L,IAAW,SAAU1hM,EAASkwG,GACtD,OAAOjrG,EAAOgT,GAAGw9I,iBAAiBouC,QAAQs8F,EAAangS,EAASkwG,EAClE,KAEN,CAyBsCkwL,CAA8Bn7R,EAAQkmB,EAAK2qM,IAAU5iN,KAAK24G,GAAQ+Y,MAAM/Y,GAI5G,OAHI5mH,EAAOyI,SAAS2yR,eAjOJ,SAAUp7R,EAAQgB,GAClC,IAAIqP,EAAOgL,GAAqBrb,EAAOoJ,WACnC82B,EAAYm5J,GAAkB70K,GAAYnU,IAC1C6K,EAAQG,GAAqB,SACjCs2D,GAAMz2D,EAAO,OAAQ,YACrBqQ,GAASrQ,EAAOG,GAAsBra,IACtCuqB,GAAS2U,EAAWhlB,GACpBlb,EAAOmS,GAAG,UAAU,WAClBsT,GAASvK,EACX,GACF,CAwNImgR,CAAYr7R,EAAQA,EAAOyI,SAAS2yR,eAE/BH,CACT,EACIK,GAAU,SAAUt7R,GACtB,IAAIyI,EAAWzI,EAAOyI,SAAUuc,EAAMhlB,EAAOqiF,SAAUhyE,EAAOrQ,EAAOoJ,WAh5erD,SAAUpJ,GACnBA,EAAOyV,KAAK,UACrB,CA+4eE8lR,CAAYv7R,GACPyI,EAAS+yR,oBAAuB/yR,EAASgzR,mBAC5Cz2Q,EAAI3U,KAAKqrR,YAAa,EACtBrC,GAAM/4E,UAAUjwM,EAAM,aAAc,UAEtCrQ,EAAO27R,OAlrBI,SAAU37R,GACrB,IAgKM47R,EAYAC,EAxHAC,EApDFl+R,EAAO9C,GAAM8C,KACb8iE,EAAYmhK,GAAGnhK,UAAWohK,EAASD,GAAGC,OAAQ/8N,EAAM/E,EAAO+E,IAAKH,EAAY5E,EAAO4E,UAAW6/O,EAASzkP,EAAOykP,OAC9Gs3C,EAAUrlG,GAAIE,MAAO93K,EAAO43K,GAAIC,GAAIqlG,EAAWtlG,GAAIH,OACnD0lG,EAAuB,0BACvBC,EAAsBp9Q,EAAO,OAAS,MACtCq9Q,EAAwB,SAAUnzH,EAAKv5J,GACzC,IACEzP,EAAOqiF,SAAS/6E,YAAY0hK,GAAK,EAAOv5J,EAE1C,CADE,MAAO+7F,GACT,CACF,EACIutE,EAAqB,SAAUhmK,GACjC,OAAOA,EAAEgmK,oBACX,EA2EIqjH,EAAY,WACdp8R,EAAO0kK,UAAUlqK,IAAI,SAAU,KAAM,YACvC,EACI6hS,EAA8B,WAC3Br8R,EAAOmuF,QACVppF,EAAIlH,KAAKmC,EAAOqiF,SAAU,qBAAqB,SAAUtvE,GACvD,IAAIlQ,EACJ,GAAIkQ,EAAEvM,SAAWxG,EAAOqiF,SAAS7+D,gBAG/B,GAFA3gB,EAAM+B,EAAUmB,SAChB/F,EAAOoJ,UAAUlC,QACF,cAAX6L,EAAE7X,KAAsB,CAC1B,GAAI+lM,GAAmBp+L,EAAIsG,gBACzB,OAEFvE,EAAUq7P,aAAaltP,EAAEsX,QAAStX,EAAEuX,QACtC,MACE1lB,EAAU6E,OAAO5G,EAGvB,GAEJ,EAuBI+oO,EAAY,WACT0wD,MAAM/gS,UAAUivD,gBACnBxqD,EAAOmS,GAAG,aAAa,SAAUY,GAC/B,IAAKgmK,EAAmBhmK,IAA4B,SAAtBA,EAAEvM,OAAOhE,SAAqB,CAC1D,IAAI+5R,EAASv8R,EAAOoJ,UACpBmzR,EAAO3rN,OACPmsH,GAAMztL,iBAAiBtP,GAAQ,WAC7Bu8R,EAAOr1R,OACT,GACF,CACF,GAEJ,EACIs1R,EAAwB,WAC1Bx8R,EAAOmS,GAAG,SAAS,SAAUY,GAC3B,IAAIvM,EAASuM,EAAEvM,OACX,aAAa/C,KAAK+C,EAAOhE,WAAsD,UAAzCuC,EAAIw/M,yBAAyB/9M,KACrEuM,EAAEgC,iBACF/U,EAAO4E,UAAUI,OAAOwB,GACxBxG,EAAOu/J,eAEe,MAApB/4J,EAAOhE,UAAoBuC,EAAIi4M,SAASx2M,EAAQ,qBAClDuM,EAAEgC,iBACFnQ,EAAUI,OAAOwB,GAErB,GACF,EAqCIi2R,EAA6B,WAC/Bz8R,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IAAKgmK,EAAmBhmK,IAAMA,EAAEiC,UAAY0rD,GACtC97D,EAAU2+I,eAAoD,IAAnC3+I,EAAUmB,SAASyiD,YAAmB,CACnE,IAAIwwI,EAAkBp0L,EAAUC,UAAUm0L,gBAC1C,GAAIA,GAAmBA,EAAgBx2L,UAAuD,UAA3Cw2L,EAAgBx2L,SAASC,cAE1E,OADAsQ,EAAEgC,kBACK,CAEX,CAEJ,GACF,EA2BI2nR,EAAyB,YArthBZ,SAAU18R,GAC3B,OAAOA,EAAOE,SAAS,WACzB,EA2thBSy8R,CAAa38R,IAChBA,EAAOmS,GAAG,+BARE,WACZgqR,EAAsB,gBAAgB,GACtCA,EAAsB,4BAA4B,GAC7CrrE,GAAkB9wN,IACrBm8R,EAAsB,wBAAwB,EAElD,GAIF,EAqCIS,EAAsB,WACxB58R,EAAO+6R,cAAcj8R,KAAK,kFAC5B,EACI+9R,EAAwB,WACrB78R,EAAOmuF,QACVnuF,EAAOmS,GAAG,WAAW,WACfb,SAASslC,gBAAkBtlC,SAASjB,MACtCrQ,EAAOqnD,SAASngD,OAEpB,GAEJ,EACI41R,EAAa,WACV98R,EAAOmuF,SACVnuF,EAAO+6R,cAAcj8R,KAAK,4BAC1BkB,EAAOmS,GAAG,SAAS,SAAUY,GAC3B,IAAIlQ,EACJ,GAA0B,SAAtBkQ,EAAEvM,OAAOhE,SAAqB,CAChC,GAAIk0L,GAAIC,GAAK,GAEX,YADA32L,EAAOoJ,UAAUlC,QAGnBrE,EAAM7C,EAAO4E,UAAUmB,SACvB/F,EAAOoJ,UAAUlC,QACjBlH,EAAO4E,UAAU6E,OAAO5G,GACxB7C,EAAO4E,UAAU49E,YACjBxiF,EAAOu/J,aACT,CACF,IAEJ,EACIw9H,EAA0B,WACxBrmG,GAAI/lG,KACN3wF,EAAOmS,GAAG,WAAW,SAAUY,IACzB8uN,GAAG/sN,eAAe/B,IAAOA,EAAEmC,UAA2B,KAAdnC,EAAEiC,SAAgC,KAAdjC,EAAEiC,UAChEjC,EAAEgC,iBACgB/U,EAAO4E,UAAUm5N,SACvBqgD,OAAO,OAAsB,KAAdrrQ,EAAEiC,QAAiB,WAAa,UAAW,gBAE1E,GAEJ,EAIIgoR,EAAoB,WACtBh9R,EAAOmS,GAAG,SAAS,SAAUY,GAC3B,IAAIxQ,EAAMwQ,EAAEvM,OACZ,GACE,GAAoB,MAAhBjE,EAAIg4L,QAEN,YADAxnL,EAAEgC,uBAGGxS,EAAMA,EAAIyH,WACrB,IACAhK,EAAO+6R,cAAcj8R,KAAK,kDAC5B,EACIm+R,EAA8B,WAChCj9R,EAAOmS,GAAG,QAAQ,WAChBnS,EAAO+E,IAAIlH,KAAKmC,EAAOoJ,UAAW,UAAU,SAAU2J,GACpDA,EAAEgC,gBACJ,GACF,GACF,EA2BImoR,EAAyB/gS,EAyE7B,OALI+/P,GAAMl8P,IA3DJg8R,IACFK,IACAG,IACAS,IACAb,IACI1lG,GAAIG,MACNgmG,IACAC,IACAE,MAGAjB,IACFnwD,IACA8wD,IACAE,IACAG,OA3LF/8R,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IAAIlQ,EAAK6gB,EACT,IAAIq1J,EAAmBhmK,IAAMA,EAAEiC,UAAY6sN,GAAGnhK,UAA9C,CAIA,IAAIxgC,GADJr9B,EAAM+B,EAAUmB,UACIoD,eAChB8a,EAASphB,EAAI2lD,YACb7R,EAAO5xC,EAAIo+E,UAEf,GADAz/D,EAASwc,EACJr9B,EAAIE,WAAwB,IAAXkhB,EAAtB,CAGA,KAAOP,GAAUA,EAAO1Z,YAAc0Z,EAAO1Z,WAAW7G,aAAeugB,GAAUA,EAAO1Z,aAAe2sC,GACrGjzB,EAASA,EAAO1Z,WAEK,eAAnB0Z,EAAO62K,UACTv6L,EAAOqyI,UAAUxgE,OAAO,aAAc,KAAMnuD,IAC5C7gB,EAAMkC,EAAI2+E,aACN37B,SAAS7nB,EAAW,GACxBr9B,EAAIqlD,OAAOhoB,EAAW,GACtBt7B,EAAU6E,OAAO5G,GATnB,CARA,CAmBF,IApLIi5R,EAAe,SAAUj5R,GAC3B,IAAIwN,EAAOtL,EAAIqF,OAAO,QAClBpH,EAAWH,EAAII,gBAEnB,OADAoN,EAAKhG,YAAYrH,GACV4B,EAAUi7N,WAAW5wB,UAAU5+L,EAAM,CAAE9K,OAAQ,QACxD,EAQAvF,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IACIwwI,EAAalzI,EADb2E,EAAUjC,EAAEiC,QAEhB,IAAK+jK,EAAmBhmK,KAAOiC,IAAY8sN,GAAU9sN,IAAY0rD,GAAY,CAG3E,GAFA6iF,EAAcvjJ,EAAO4E,UAAU2+I,cAC/BlzI,EAAOrQ,EAAOoJ,UACVm6I,IAAgBx+I,EAAIk/M,QAAQ5zM,GAC9B,OAEF,IAAKkzI,IAhBiB,SAAU1gJ,GAClC,IAAI+B,EAAYk3R,EAAaj5R,GACzBs6R,EAASp4R,EAAI2+E,YAGjB,OAFAy5M,EAAOx5M,WAAW3jF,EAAOoJ,WAElBxE,IADYk3R,EAAaqB,EAElC,CAUyBC,CAAoBp9R,EAAO4E,UAAUmB,UACxD,OAEFgN,EAAEgC,iBACF/U,EAAOyxD,WAAW,IACdphD,EAAKlN,YAAc4B,EAAIi9E,QAAQ3xE,EAAKlN,YACtCnD,EAAO4E,UAAU89E,kBAAkBryE,EAAKlN,WAAY,GAEpDnD,EAAO4E,UAAU89E,kBAAkBryE,EAAM,GAE3CrQ,EAAOu/J,aACT,CACF,IA4TKm3B,GAAID,cA9HTz2L,EAAOmS,GAAG,yBAAyB,SAAUY,GACtC8uN,GAAGO,gBAAgBrvN,IACtBnO,EAAU49E,WAEd,IAAG,GA6HCw5M,IACFK,IACAG,IA1IEzsE,GAAmB/vN,IACrBA,EAAOmS,GAAG,QAAQ,WAChBgqR,EAAsB,4BAA6BpsE,GAAmB/vN,GACxE,IAyIAi9R,IACAR,IA/DFh4C,EAAO3kB,cAAc,MAAM,SAAU1kC,GAEnC,IADA,IAAIl8L,EAAIk8L,EAAMh8L,OACPF,KAC0B,8BAA3Bk8L,EAAMl8L,GAAG2nC,KAAK,UAChBu0J,EAAMl8L,GAAGgL,QAGf,IA0DMwsL,GAAIG,KACNgmG,IACAC,IACAE,KAEAZ,KAGA1lG,GAAIC,IAAM,KACZmmG,IACAL,KAEE/lG,GAAIC,KACNylG,IApGFD,EAAsB,iBAAiB,GAgCvCn8R,EAAOmS,GAAG,aAAa,SAAUY,IAvVP,SAAUA,GACpC,IAAIsqR,EAAeC,EACfvqR,EAAEu4H,eACAtrI,EAAO4E,UAAU2+I,eAAsC,QAArBxwI,EAAEvM,OAAO+zL,SAC7C31L,EAAUI,OAAO+N,EAAEvM,SAErB62R,EAAgBr9R,EAAO4E,UAAUU,cACflG,OAAS,IACzBk+R,EAAkBrB,EAAuBzoM,OAAOxzF,EAAOrF,IAAM,IAAM64F,OAAO6pM,GAC1EtqR,EAAEu4H,aAAa36H,QAAQurR,EAAqBoB,IAGlD,CA4UIC,CAAsBxqR,EACxB,IACA/S,EAAOmS,GAAG,QAAQ,SAAUY,GAC1B,IAAKgmK,EAAmBhmK,GAAI,CAC1B,IAAIuqR,EA/UkB,SAAUvqR,GACpC,IAAIuqR,EACJ,OAAIvqR,EAAEu4H,eACJgyJ,EAAkBvqR,EAAEu4H,aAAa//H,QAAQ2wR,KAClBoB,EAAgB1+R,QAAQq9R,IAAyB,GACtEqB,EAAkBA,EAAgB5iR,OAAOuhR,EAAqB78R,QAAQ4E,MAAM,KACrE,CACLrJ,GAAIyzO,SAASkvD,EAAgB,IAC7BhiR,KAAM8yN,SAASkvD,EAAgB,MAI9B,IACT,CAkU4BE,CAAsBzqR,GAC5C,GAAIuqR,GAAmBA,EAAgB3iS,KAAOqF,EAAOrF,GAAI,CACvDoY,EAAEgC,iBACF,IAAIlS,EAAM+iO,GAAU7yN,EAAE1X,EAAG0X,EAAEqV,EAAGpoB,EAAOqiF,UACrCz9E,EAAU6E,OAAO5G,GArUe+8B,EAsUR09P,EAAgBhiR,KArU1Ctb,EAAOy9R,sBAAsB,6BAC/Bz9R,EAAOsH,YAAY,6BAA6B,EAAO,CACrDs4B,QAASA,EACT8zF,UAkUgD,IA/TlD1zH,EAAOsH,YAAY,oBAAoB,EAAOs4B,EAgU5C,CACF,CAxU0B,IAAUA,CAyUtC,KA2DIm8P,IA9TJ/7R,EAAOmS,GAAG,WAAW,SAAUY,GAC7B,IAAKgmK,EAAmBhmK,IAAMA,EAAEiC,UAAY0rD,EAAW,CACrD,IAAK1gE,EAAOoJ,UAAUy4L,qBAAqB,MAAMziM,OAC/C,OAEF,GAAIwF,EAAU2+I,eAAoD,IAAnC3+I,EAAUmB,SAASyiD,YAAmB,CACnE,IAAI3/C,EAAOjE,EAAUC,UACjBm0L,EAAkBnwL,EAAKmwL,gBAC3B,GAAsB,OAAlBnwL,EAAKrG,SAGP,OAFAuC,EAAImF,OAAOrB,QACXkK,EAAEgC,iBAGAikL,GAAmBA,EAAgBx2L,UAAuD,OAA3Cw2L,EAAgBx2L,SAASC,gBAC1EsC,EAAImF,OAAO8uL,GACXjmL,EAAEgC,iBAEN,CACF,CACF,IA6SE62N,IA/QEgwD,EAA4B,WAC9B,IAAI8B,EAAW34R,EAAIs7M,WAAWz7M,EAAUqM,WAAWmvB,WAAU,IAC7D,OAAO,WACL,IAAI55B,EAAS5B,EAAUqM,WACnBzK,IAAWxG,EAAOoJ,YACpBrE,EAAIu7M,UAAU95M,EAAQ,QAAS,MAC/B5I,EAAK8/R,GAAU,SAAU72P,GACvBrgC,EAAOm3R,iBAAiB92P,EAAKzG,WAAU,GACzC,IAEJ,CACF,EACIy7P,EAA4B,WAC9B,OAAQj3R,EAAU2+I,eAAiBx+I,EAAIE,UAAUL,EAAUqM,WAAYlM,EAAIi9E,WAAaj9E,EAAIE,UAAUL,EAAU+9E,SAAU59E,EAAIi9E,QAChI,EACAhiF,EAAOmS,GAAG,YAAY,SAAUY,GAC9B,IAAIo1H,EACJ,IAAK4wC,EAAmBhmK,KAAqB,IAAdA,EAAEiC,SAA+B,KAAdjC,EAAEiC,UAAmB6mR,IAKrE,OAJA1zJ,EAAkByzJ,IAClB57R,EAAOqiF,SAAS/6E,YAAY,UAAU,EAAO,MAC7C6gI,IACAp1H,EAAEgC,kBACK,CAEX,IACAhQ,EAAIlH,KAAKmC,EAAOqiF,SAAU,OAAO,SAAUtvE,GACzC,IAAIo1H,GACC4wC,EAAmBhmK,IAAM8oR,MAC5B1zJ,EAAkByzJ,IAClB7+F,GAAMztL,iBAAiBtP,GAAQ,WAC7BmoI,GACF,IAEJ,IAgPEu0J,IA3KF18R,EAAOmS,GAAG,0BAA0B,SAAUY,GAC7B,eAAXA,EAAE7X,MAAuC,kBAAd6X,EAAEo0I,SAfjCvpJ,EAAKmH,EAAIC,OAAO,MAAM,SAAU6D,GAC9B,IAAImB,EAAanB,EAAKmB,WAClB2sC,EAAO5xC,EAAIo+E,UACf,GAAIn5E,EAAWmvL,YAActwL,EAAM,CACjC,KAAOmB,IAAejF,EAAIi9E,QAAQh4E,IAAa,CAC7C,GAAIA,EAAWA,WAAWmvL,YAAcnvL,GAAcA,IAAe2sC,EACnE,OAEF3sC,EAAaA,EAAWA,UAC1B,CACAjF,EAAIvK,IAAIwP,EAAY,KAAM,CAAE,iBAAkB,GAChD,CACF,GAMF,IAyKE4yR,IACAG,IACAN,MAQG,CACLS,uBAAwBA,EACxBplH,SA1Ea,WACb,IAAKikH,GAAW/7R,EAAO49H,QACrB,OAAO,EAET,IAAI3yE,EAAMjrD,EAAO4E,UAAUm5N,SAC3B,OAAQ9yK,IAAQA,EAAItB,YAAiC,IAAnBsB,EAAItB,UACxC,EAsEF,CAgPkBi0O,CAAO59R,GAn5eJ,SAAUA,GACtBA,EAAOyV,KAAK,aACrB,CAk5eEooR,CAAe79R,GACf,IAAI89R,EAhviBkB,SAAU99R,GAChC,OAAOA,EAAOE,SAAS,iBAAkBgmN,GAAKrjK,QAAU,WAAQrlD,EAClE,CA8uiBuBugS,CAAkB/9R,QAChBxC,IAAnBsgS,IACFztR,EAAKuhC,IAAMksP,GAETr1R,EAASu1R,SACXh+R,EAAOmS,GAAG,oBAAoB,SAAUY,GACtCjY,GAAM8C,KAAK6K,EAASu1R,SAAS,SAAUn3H,GACrC9zJ,EAAE6sB,QAAU7sB,EAAE6sB,QAAQp6B,QAAQqhK,GAAS,SAAUpsJ,GAC/C,MAAO,wBAAuB+4E,OAAO/4E,GAAO,QAC9C,GACF,GACF,IAEFza,EAAOmS,GAAG,cAAc,WACtBnS,EAAOmmP,UAAUnmP,EAAOoJ,UAC1B,IACApJ,EAAOmS,GAAG,mCAAmC,SAAUY,GACrD/S,EAAO0lO,UAAuB,qBAAX3yN,EAAE7X,IACvB,GACF,EAUI+iS,GAA+B,SAAUj+R,IACpB,IAAnBA,EAAO49H,UAVY,SAAU59H,GAC5Bk8P,GAAMl8P,IACTA,EAAOiyE,KAAK,CACV55C,SAAS,EACT9yB,OAAQ,SAGZvF,EAAOk+R,aAAel+R,EAAOsF,WAAW,CAAEC,OAAQ,OACpD,CAGI44R,CAAmBn+R,GACnBk6R,GAAWl6R,GAEf,EACIo+R,GAAkB,SAAUp+R,EAAQq+R,GACtC,IAAI51R,EAAWzI,EAAOyI,SAClBw+I,EAAYjnJ,EAAOysF,aACnBznE,EAAMhlB,EAAOqiF,SACZ55E,EAAS0lF,SACZnuF,EAAOysF,aAAavxE,MAAMmiI,WAAar9I,EAAOs+R,eAE3CD,GAAcr+R,EAAOmuF,SACxBnpE,EAAIlU,OACJkU,EAAIspB,MAAMtuC,EAAOu+R,YACjBv5Q,EAAI9V,SAEFlP,EAAOmuF,SACTkrM,GAAM16H,SAAS1X,EAAW,oBAC1BjnJ,EAAO++M,gBAAkB/5L,EAAM1T,SAC/BtR,EAAOwpI,cAAgB73H,OACvB3R,EAAO6wI,YAAcoW,EACrBjnJ,EAAOw+R,qBAAuBv3I,GAEhC,IAAI52I,EAAOrQ,EAAOoJ,UAClBiH,EAAK4sD,UAAW,EAChBj9D,EAAOivF,WAAaxmF,EAASwmF,SACxBjvF,EAAOivF,WACNjvF,EAAOmuF,QAAqD,WAA3CkrM,GAAMzsM,SAASv8E,EAAM,YAAY,KACpDA,EAAK6K,MAAMkT,SAAW,YAExB/d,EAAKkkI,gBAAkBv0I,EAAOE,SAAS,0BAA0B,IAEnEmQ,EAAK4sD,UAAW,EAChBj9D,EAAOi6R,aAv+LU,SAAUj6R,GAC3B,IACIy+R,EAAUC,EA1RVtmM,EAgCAumM,EAsBAC,EAGA33Q,EAgOAq6O,GAzRAlpK,EAAQ,GAgCRumM,EAAa,SAAUrwQ,GACzB,IAAKA,EAAE6Z,OAAS7Z,EAAE+1F,OAChB,MAAM,IAAIhnH,MAAM,wFAElB,IAnCwBwhS,EAmCpBlkS,EAAK2zB,EAAE3zB,IAAM00Q,GAAK,UAClB3zQ,EAAO4yB,EAAE5yB,MAAQf,EACjBwtC,EAAO7Z,EAAE6Z,KACb,MAAO,CACLxtC,GAAIyB,EAASzB,GACbe,KAAMU,EAASV,GACf20Q,SAAUj0Q,EAASkyB,EAAE+hP,UAAY30Q,EAAO,KAzClBmjS,EAyCkC12P,EAAKjtC,KAxCnD,CACV,aAAc,MACd,YAAa,MACb,YAAa,MACb,YAAa,MACb,aAAc,OACd,aAAc,OACd,gBAAiB,MACjB,aAAc,OACd,YAAa,MACb,aAAc,QAEH2jS,EAAKp8R,gBAAkB,QA6BlC0lC,KAAM/rC,EAAS+rC,GACfk8E,OAAQjoH,EAASkyB,EAAE+1F,QACnB+hJ,QAAShqQ,EAASkyB,EAAE83O,SAAW/gJ,IAAIoB,gBAAgBt+E,IACnD+7E,IAAK9nH,EAASkyB,EAAE41F,KAEpB,EAuCO,CACL95G,OAxEW,SAAUkkB,EAAG6Z,EAAMk8E,EAAQ3oH,EAAM20Q,GAC5C,GAAI57E,EAAWnmK,GAEb,OAAOqwQ,EAAW,CAChBhkS,GAFO2zB,EAGP5yB,KAAMA,EACN20Q,SAAUA,EACVloO,KAAMA,EACNk8E,OAAQA,IAEL,GAAIruG,EAASsY,GAClB,OAAOqwQ,EAAWrwQ,GAElB,MAAM,IAAIjxB,MAAM,qBAEpB,EA0DE7C,IAxCQ,SAAUqnQ,GACb56O,EAAI46O,EAASlnQ,OAChBy9F,EAAMt5F,KAAK+iQ,EAEf,EAqCE56O,IAjCEA,EAAM,SAAUtsB,GAClB,OAAOikS,GAAU,SAAUE,GACzB,OAAOA,EAAenkS,OAASA,CACjC,GACF,EA8BEqnQ,SA7Ba,SAAUoE,GACvB,OAAOw4B,GAAU,SAAU/8B,GACzB,OAAOA,EAASuE,YAAcA,CAChC,GACF,EA0BErE,UAzBc,SAAU19I,EAAQnpH,GAChC,OAAO0jS,GAAU,SAAU/8B,GACzB,OAAOA,EAASx9I,WAAaA,GAAUw9I,EAAS15N,OAAOjtC,OAASA,CAClE,GACF,EAsBE0jS,UAvCEA,EAAY,SAAU97R,GACxB,OAAOwa,EAAO86E,EAAOt1F,GAAWvF,gBAClC,EAsCEwhS,YAtBgB,SAAU34B,GAC1BhuK,EAAQ48F,EAAS58F,GAAO,SAAUypK,GAChC,OAAIA,EAASuE,YAAcA,IACzB/gJ,IAAIC,gBAAgBu8I,EAASuE,YACtB,EAGX,GACF,EAeE5pN,QAdY,WACZu4I,EAAO38F,GAAO,SAAU0mM,GACtBz5K,IAAIC,gBAAgBw5K,EAAe14B,UACrC,IACAhuK,EAAQ,EACV,IAqMIipK,EAAesN,KACfqwB,EAAa,GACbC,EAxBoB,SAAUj/R,GAClC,IAAIk/R,EAAmB9mQ,GAAK,MAgB5B,OAfAp4B,EAAOmS,GAAG,kBAAkB,SAAUY,GACpCmsR,EAAiB53Q,IAAI7lB,GAAS,CAAC,EAAGsR,EAAEsuE,OACtC,IAaO,CAAE89M,cAZW,WAClB,IAAI/4R,EAAOpG,EAAO+G,YAAYX,KAC9BsT,GAAOtT,GAAMpI,QAAO,SAAUqjF,GAC5B,OAAQo3K,GAAOymC,EAAiBj4Q,MAAOo6D,EACzC,IAAGzjF,MAAK,SAAUyjF,GAChBrhF,EAAO25P,UAAS,GAChB35P,EAAOyV,KAAK,SAAU,CACpB4rE,MAAOA,EACPk4K,UAAWlwO,GAAMjjB,EAAMA,EAAKhH,OAAS,GAAG9B,aAE5C,GACF,EAEF,CAMsB8hS,CAAoBp/R,GACpCq/R,EAAa,SAAU9xR,GACzB,OAAO,SAAUglB,GACf,OAAIvyB,EAAO4E,UACF2I,EAASglB,GAEX,EACT,CACF,EAII+sQ,EAAgB,SAAU1/P,EAAShiB,EAAQpY,GAC7C,IAAIse,EAAQ,EACZ,IAEiB,KADfA,EAAQ8b,EAAQhhC,QAAQgf,EAAQkG,MAE9B8b,EAAUA,EAAQqD,UAAU,EAAGnf,GAASte,EAAUo6B,EAAQllB,OAAOoJ,EAAQlG,EAAOxe,QAChF0kB,GAASte,EAAQpG,OAASwe,EAAOxe,OAAS,UAE1B,IAAX0kB,GACT,OAAO8b,CACT,EACI2/P,EAAkB,SAAU3/P,EAAS4/P,EAAWC,GAClD,IAAIC,EAAoB,QAAUD,EAAiB,KAAOA,IAAmB/oG,GAAII,eAAiB,4BAA8B,IAGhI,OAFAl3J,EAAU0/P,EAAc1/P,EAAS,QAAU4/P,EAAY,IAAKE,GAClDJ,EAAc1/P,EAAS,iBAAmB4/P,EAAY,IAAK,iBAAmBC,EAAiB,IAE3G,EACIE,EAAwB,SAAUH,EAAWC,GAC/C1qG,EAAO/0L,EAAO+G,YAAYX,MAAM,SAAUi7E,GACrB,eAAfA,EAAMnmF,KACRmmF,EAAMy1K,UAAYhiE,EAAMzzG,EAAMy1K,WAAW,SAAUh3N,GACjD,OAAOy/P,EAAgBz/P,EAAU0/P,EAAWC,EAC9C,IAEAp+M,EAAMzhD,QAAU2/P,EAAgBl+M,EAAMzhD,QAAS4/P,EAAWC,EAE9D,GACF,EASIG,EAAe,SAAUryR,GAI3B,OAHKkxR,IACHA,EAAWztB,GAAehxQ,EAAQqhQ,IAE7Bw+B,IAAgB5xR,KAAKoxR,GAAW,SAAUS,GAC/C,IAAIrvB,EAAY37E,EAAMgrG,GAAY,SAAUl+B,GAC1C,OAAOA,EAAUC,QACnB,IACA,OAAO48B,EAAS5uB,OAAOY,EAAWC,GAAiB1wQ,IAASiO,KAAKoxR,GAAW,SAAU9sQ,GACpF,IAAIwtQ,EAAiB,GACjBC,EAAiBlrG,EAAMviK,GAAQ,SAAU0tQ,EAAYn8Q,GACvD,IAAI+9O,EAAWi+B,EAAWh8Q,GAAO+9O,SAC7Bn+I,EAAQo8K,EAAWh8Q,GAAO4/F,MAa9B,OAZIu8K,EAAW7tN,QAl8WG,SAAUpyE,GACpC,OAAOA,EAAOE,SAAS,4BAA4B,EAAM,UAC3D,CAg8WmCggS,CAAsBlgS,IAC7CshQ,EAAUy9B,YAAYr7K,EAAMzvB,KACxBioK,GAAMl8P,IAvBQ,SAAU0jH,EAAOorJ,GAC3C,IAhC+BtrQ,EAgC3BywF,EAAMj0F,EAAOoN,WAAW0hQ,EAAW,OACvC6wB,EAAsBj8K,EAAMzvB,IAAK66K,GACjC9uQ,EAAOoR,EAAEsyG,GAAO78E,KAAK,CACnB,IAAOqpL,GAAoBlwN,IAnCEwD,EAmCyBsrQ,EAlCjDtrQ,IAA6B,IAAtBA,EAAI5E,QAAQ,KAAc,IAAM,MAAO,IAAIsiC,MAAOC,WAkCK2tO,EACnE,eAAgB76K,GAEpB,CAiBYksM,CAAsBz8K,EAAOu8K,EAAWz8R,MAEjCy8R,EAAWnyR,QAChBmyR,EAAWnyR,MAAM4xC,QAAQx1C,SAC3By1R,EAAsBj8K,EAAMhgH,aAAa,OAAQgzL,GAAII,gBACrDipG,EAAejhS,KAAK4kH,IArehB,SAAU1jH,EAAQ8L,GAClC+hQ,GAAa7tQ,EAAQkmN,GAAK/9L,UAAU,CAClC,8BACArc,IAEJ,CAkeYs0R,CAAYpgS,EAAQigS,EAAWnyR,MAAMhC,UAEhC,CACLgI,QAAS4vG,EACTtxC,OAAQ6tN,EAAW7tN,OACnBiuN,UAAWJ,EAAWz8R,IACtBq+P,SAAUA,EAEd,IAmBA,OAlBIm+B,EAAe5gS,OAAS,GAC1B6/R,EAAcE,gBAEZY,EAAe3gS,OAAS,IACtB88P,GAAMl8P,GACR4b,QAAQ9N,MAAM,sEAEd9N,EAAO+G,YAAYC,UAAS,WAC1B+tL,EAAOgrG,GAAgB,SAAUjsR,GAC/B9T,EAAO+E,IAAImF,OAAO4J,GAClBwtP,EAAUy9B,YAAYjrR,EAAQmgF,IAChC,GACF,KAGA1mF,GACFA,EAASyyR,GAEJA,CACT,IACF,IACF,EACIM,EAAmB,SAAU/yR,GAC/B,GAAI0iN,GAA0BjwN,GAC5B,OAAO4/R,EAAaryR,EAExB,EACIgzR,EAAsB,SAAUC,GAClC,IAES,IAFLziS,GAAOihS,GAAY,SAAUhhS,GAC7B,OAAOA,EAAOwiS,EAChB,IACA,OAAO,EAET,GAAoD,IAAhDA,EAAO98R,aAAa,OAAO9E,QAAQ,SAAgB,CACrD,IAAI6hS,EAhgXmB,SAAUzgS,GACrC,OAAOA,EAAOE,SAAS,wBAAyB1D,EAAQ,WAC1D,CA8/W0BkkS,CAAuB1gS,GAC3C,OAAOygS,EAAcD,EACvB,CACA,OAAO,CACT,EAIIX,EAAgB,WAIlB,OAHKnB,IACHA,EAAet9B,GAAaC,EAAcC,IAErCo9B,EAAar9D,QAAQrhO,EAAOoJ,UAAWm3R,GAAqBtyR,KAAKoxR,GAAW,SAAU9sQ,GAe3F,OAdAA,EAASyiK,EAASziK,GAAQ,SAAUouQ,GAClC,MAA0B,iBAAfA,IACT9yB,GAAa7tQ,EAAQ2gS,IACd,EAGX,IACIzkC,GAAMl8P,IACR+0L,EAAOxiK,GAAQ,SAAUouQ,GACvBhB,EAAsBgB,EAAWj9K,MAAMzvB,IAAK0sM,EAAW9+B,SAASuE,WAChEu6B,EAAWj9K,MAAMzvB,IAAM0sM,EAAW9+B,SAASuE,UAC3Cu6B,EAAWj9K,MAAMh+F,gBAAgB,eACnC,IAEK6M,CACT,IACF,EAMIquQ,EAAkB,SAAUhhQ,GAC9B,OAAOA,EAAQp6B,QAAQ,uBAAuB,SAAUod,EAAOwjP,GAC7D,IAAI0I,EAAYzN,EAAa2N,aAAa5I,GAC1C,GAAI0I,EACF,MAAO,QAAUA,EAAY,IAE/B,IAAIjN,EAAWP,EAAUU,SAASoE,GAMlC,OALKvE,IACHA,EAAWlpP,EAAM3Y,EAAOknJ,cAAcjgI,OAAO,SAAUsL,EAAQvyB,GAC7D,OAAOuyB,GAAUvyB,EAAOi6R,cAAgBj6R,EAAOi6R,aAAa34B,UAAUU,SAASoE,EACjF,GAAG,OAEDvE,EAEK,aADIA,EAAS15N,OACOjtC,KAAO,WAAa2mQ,EAASx9I,SAAW,IAE9DzhG,CACT,GACF,EA+BA,OA9BA5iB,EAAOmS,GAAG,cAAc,WAClB89M,GAA0BjwN,GAC5BsgS,IAEAT,GAEJ,IACA7/R,EAAOmS,GAAG,kBAAkB,SAAUY,GACpCA,EAAE6sB,QAAUghQ,EAAgB7tR,EAAE6sB,QAChC,IACA5/B,EAAOmS,GAAG,cAAc,SAAUY,GAC5BA,EAAE8tR,aAA4B,QAAb9tR,EAAExN,QAAiC,SAAbwN,EAAExN,SAG7CwN,EAAE6sB,QAAUghQ,EAAgB7tR,EAAE6sB,SAChC,IACA5/B,EAAOmS,GAAG,cAAc,WACtBnS,EAAOykP,OAAO3kB,cAAc,OAAO,SAAU0hC,GAC3CzsE,EAAOysE,GAAQ,SAAU13P,GACvB,IAAImqF,EAAMnqF,EAAI+8B,KAAK,OACnB,IAAIy6N,EAAUU,SAAS/tK,GAAvB,CAGA,IAAI66K,EAAYzN,EAAa2N,aAAa/6K,GACtC66K,GACFhlQ,EAAI+8B,KAAK,MAAOioO,EAHlB,CAKF,GACF,GACF,IACO,CACLxN,UAAWA,EACXw/B,UAjFc,SAAU9iS,GACxBghS,EAAWlgS,KAAKd,EAClB,EAgFE4hS,aAAcA,EACdU,iBAAkBA,EAClBT,cAAeA,EACfrjP,QA5DY,WACZ8kN,EAAU9kN,UACV6kN,EAAa7kN,UACbkiP,EAAeD,EAAW,IAC5B,EA0DF,CAoxLwBsC,CAAa/gS,GACnCA,EAAO6F,OAAS6gM,GAAO8yF,GAAiBx5R,IACxCA,EAAO+E,IAAM+6M,GAAS96L,EAAK,CACzB2/L,aAAa,EACb3W,cAAehuM,EAAOoN,WACtB8gM,oBAAqBluM,EACrBghS,WAAYv4R,EAASw4R,uBACrBv+E,eAAe,EACf/B,aAAc3gN,EAAOmuF,OAASnuF,EAAOoJ,UAAY,KACjD+3M,QAAS,WACP,OAAOnhN,EAAOmuF,MAChB,EACAtoF,OAAQ7F,EAAO6F,OACf24L,eAAgBgyB,GAAwBxwN,GACxCy+L,eAAgBgyB,GAAkBzwN,GAClCwgN,YAAa,SAAUztM,GACrB/S,EAAOyV,KAAK,YAAa1C,EAC3B,IAEF/S,EAAOykP,OA9OU,SAAUzkP,GAC3B,IAAIykP,EAASme,GAAUo3B,GAAiBh6R,GAASA,EAAO6F,QA2DxD,OA1DA4+O,EAAOwe,mBAAmB,2BAA2B,SAAU7nE,EAAO1/L,GAIpE,IAHA,IAAsBmN,EAAM1N,EAAxB+D,EAAIk8L,EAAMh8L,OACV2F,EAAM/E,EAAO+E,IACb2hQ,EAAe,YAAchrQ,EAC1BwD,KAGL,IADA/D,GADA0N,EAAOuyL,EAAMl8L,IACA2nC,KAAKnrC,MACJmN,EAAKg+B,KAAK6/N,GAAe,CACrC,GAA+B,IAA3BvrQ,EAAMyD,QAAQ,UAA6C,IAA3BzD,EAAMyD,QAAQ,SAChD,SAEW,UAATlD,IACFP,EAAQ4J,EAAIi+M,eAAej+M,EAAIyuI,WAAWr4I,GAAQ0N,EAAKnN,OAC5C0D,SACTjE,EAAQ,MAEV0N,EAAKg+B,KAAK6/N,EAAcvrQ,GACxB0N,EAAKg+B,KAAKnrC,EAAMP,IACE,aAATO,GACTmN,EAAKg+B,KAAK6/N,EAAcvrQ,GACxB0N,EAAKg+B,KAAKnrC,EAAM,OAEhBmN,EAAKg+B,KAAK6/N,EAAc1mQ,EAAOoN,WAAWjS,EAAOO,EAAMmN,EAAKnN,MAEhE,CAEJ,IACA+oP,EAAO3kB,cAAc,UAAU,SAAU1kC,GAEvC,IADA,IAAIl8L,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACbhE,EAAO2N,EAAKg+B,KAAK,SAAW,UACH,IAAzB3rC,EAAK0D,QAAQ,SACfiK,EAAKg+B,KAAK,OAAQ,OAAS3rC,EAE/B,CACF,IACI8E,EAAOyI,SAAS+qO,gBAClBiR,EAAO3kB,cAAc,UAAU,SAAU1kC,GAEvC,IADA,IAAIl8L,EAAIk8L,EAAMh8L,OACPF,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACjB2J,EAAK3N,KAAO,EACZ2N,EAAKnN,KAAO,WACZmN,EAAK1N,MAAQ,UAAY6E,EAAO+E,IAAI0C,OAAOoB,EAAK1N,OAAS,IAC3D,CACF,IAEFspP,EAAO3kB,cAAc,2BAA2B,SAAU1kC,GAGxD,IAFA,IAAIl8L,EAAIk8L,EAAMh8L,OACVyjP,EAAmB7iP,EAAO6F,OAAOknM,sBAC9B7tM,KAAK,CACV,IAAI2J,EAAOuyL,EAAMl8L,GACb2J,EAAKo7M,QAAQ4+B,IAAkD,IAA7Bh6O,EAAKs3F,OAAO,MAAM/gG,SACtDyJ,EAAKinE,OAAO,IAAI08J,GAAQ,KAAM,IAAII,YAAa,EAEnD,CACF,IACO6X,CACT,CAiLkBy8C,CAAalhS,GAC7BA,EAAO6/N,WAAamoC,GA5PK,SAAUhoQ,GACnC,IAAIyI,EAAWzI,EAAOyI,SACtB,OAAOhH,GAASA,GAASA,GAAS,CAAC,EAAGu4R,GAAiBh6R,IAAUw5R,GAAiBx5R,IAAUu5R,GAAgB,CAC1GvrF,cAAevlM,EAASulM,cACxBE,oBAAqBzlM,EAASylM,oBAC9BknC,eAAgB3sO,EAAS2sO,eACzBjwC,SAAU18L,EAAS08L,SACnB+vC,gBAAiBzsO,EAASysO,gBAC1BL,OAAQpsO,EAASosO,OACjBI,aAAcxsO,EAASwsO,aACvBF,cAAetsO,EAASssO,gBAE5B,CAgPoCosD,CAAqBnhS,GAASA,GAChEA,EAAO4E,UAAYs4P,GAAgBl9P,EAAO+E,IAAK/E,EAAOqnD,SAAUrnD,EAAO6/N,WAAY7/N,GACnFA,EAAOohS,UAAYzhE,GAAU3/N,GAC7BA,EAAOqyI,UAAYmgI,GAAUxyQ,GAC7BA,EAAO+G,YAAcquQ,GAAYp1Q,GACjCA,EAAOqhS,sBAAwB,IAAIhO,GAAWrzR,GAC9CA,EAAOolP,oBAAsBkxC,GAAmBt2R,GAnzGpC,SAAUA,GACtB,IAAI+iG,EAAY5nG,KACZ6nG,EAAiB5qE,IAAK,GACtBkpQ,EAAoB32O,IAAK,SAAU53C,GACrC/S,EAAOyV,KAAK,YAAahU,GAASA,GAAS,CAAC,EAAGsR,GAAI,CAAE7X,KAAM,eAC3D8nG,EAAe17E,KAAI,EACrB,GAlBoB,KAmBpBtnB,EAAOmS,GAAG,cAAc,SAAUY,GAChC0vF,GAAS1vF,GAAGnV,MAAK,SAAUslG,GACzBo+L,EAAkB3/M,SAClB,IAAIv7E,EAAO,CACT/K,EAAG6nG,EAAM74E,QACTjC,EAAG86E,EAAM54E,QACT9jB,OAAQuM,EAAEvM,QAEZ86R,EAAkB1/M,SAAS7uE,GAC3BiwF,EAAe17E,KAAI,GACnBy7E,EAAUz7E,IAAIlhB,EAChB,GACF,IAAG,GACHpG,EAAOmS,GAAG,aAAa,SAAUY,GAC/BuuR,EAAkB3/M,SAClB8gB,GAAS1vF,GAAGnV,MAAK,SAAUslG,GACzBH,EAAU5wF,IAAG,SAAU/L,IA5BX,SAAU88F,EAAO98F,GACjC,IAAI+8F,EAAQv2E,KAAK89D,IAAIwY,EAAM74E,QAAUjkB,EAAK/K,GACtC+nG,EAAQx2E,KAAK89D,IAAIwY,EAAM54E,QAAUlkB,EAAKgiB,GAC1C,OAAO+6E,EAXc,GAWcC,EAXd,CAYvB,EAyBYC,CAAYH,EAAO98F,KACrB28F,EAAU1mD,QACV2mD,EAAe17E,KAAI,GACnBtnB,EAAOyV,KAAK,mBAEhB,GACF,GACF,IAAG,GACHzV,EAAOmS,GAAG,wBAAwB,SAAUY,GAC1CuuR,EAAkB3/M,SACH,gBAAX5uE,EAAE7X,MAGN6nG,EAAU97E,MAAMjpB,QAAO,SAAUoI,GAC/B,OAAOA,EAAKI,OAAO+6R,YAAYxuR,EAAEvM,OACnC,IAAG5I,MAAK,WACFolG,EAAe/7E,MACjBlU,EAAEgC,iBAEF/U,EAAOyV,KAAK,MAAOhU,GAASA,GAAS,CAAC,EAAGsR,GAAI,CAAE7X,KAAM,QAEzD,GACF,IAAG,EACL,CAqwGEsmS,CAAQxhS,GA5/CI,SAAUA,IAtBG,SAAUA,GACnCA,EAAOmS,GAAG,SAAS,SAAUY,GACvB/S,EAAO+E,IAAIE,UAAU8N,EAAEvM,OAAQ,YACjCuM,EAAEgC,gBAEN,GACF,CAiBE0sR,CAAqBzhS,GAhBH,SAAUA,GAC5BA,EAAOykP,OAAO3kB,cAAc,WAAW,SAAUrqF,GAC/Cs/C,EAAOt/C,GAAM,SAAUn6C,GACrBA,EAAQz0D,KAAK,gBAAiBy0D,EAAQz0D,KAAK,SAC3Cy0D,EAAQz0D,KAAK,OAAQ,OACvB,GACF,IACA7mC,EAAO6/N,WAAWC,cAAc,WAAW,SAAUrqF,GACnDs/C,EAAOt/C,GAAM,SAAUn6C,GACrB,IAAIxqF,EAAOwqF,EAAQz0D,KAAK,iBACxBy0D,EAAQz0D,KAAK,OAAQ4tJ,EAAW3jL,GAAQA,EAAO,MAC/CwqF,EAAQz0D,KAAK,gBAAiB,KAChC,GACF,GACF,CAGE66P,CAAc1hS,EAChB,CA0/CEk6K,CAAQl6K,GACHk8P,GAAMl8P,IAh+CC,SAAUA,GACtBA,EAAOmS,GAAG,SAAS,SAAUY,GACvBA,EAAEwrB,QAAU,GAxBK,SAAUv+B,GACjC,IAAI6C,EAAM7C,EAAO4E,UAAUmB,SACvB4wN,EAAWrK,GAAcQ,eAAejqN,GACxCy2N,EAAShN,GAAcS,aAAalqN,GACxC,GAAIypN,GAAca,kBAAkBwJ,GAAW,CAC7C,IAAIz2L,EAAYy2L,EAASz2L,YACrByzP,GAAgBzzP,IAClB63L,GAAgB73L,GAAWtiC,MAAK,SAAU66C,GACxC,OAAO51C,EAAIklD,SAAStP,EAAIvY,YAAauY,EAAIx0B,SAC3C,GAEJ,CACIqoM,GAAca,kBAAkBmM,KAC9Bp5L,EAAYy2L,EAASz2L,YACrByzP,GAAgBzzP,IAClB83L,GAAe93L,GAAWtiC,MAAK,SAAU66C,GACvC,OAAO51C,EAAIqlD,OAAOzP,EAAIvY,YAAauY,EAAIx0B,SACzC,KAGJjkB,EAAO4E,UAAU6E,OAAO+4E,GAAU3/E,GACpC,CAIM8+R,CAAmB3hS,EAEvB,GACF,CA29CIowL,CAAQpwL,GAEV,IAAI4yF,EAtnDQ,SAAU5yF,GACtB,OAAKk8P,GAAMl8P,GAGFo4B,GAAK,MAFLo6P,GAA0BxyR,EAIrC,CAgnDcq2K,CAAQr2K,IA/0GR,SAAUA,EAAQ4yF,GAC9B5yF,EAAOuV,WAAW,UAAU,YAlDV,SAAUvV,EAAQ4yF,GAChCm0L,GAAgB/mR,IAET67Q,GAAkB77Q,GAAQ,IAE1Bs6Q,GAAkBt6Q,GAAQ,IAE1BykR,GAAkBzkR,EAAQ4yF,GAAO,IAEjColL,GAAkBh4Q,GAAQ,IAE1BoiP,GAAkBpiP,IAElB+7Q,GAAkB/7Q,GAAQ,IAE1B4lR,GAAkB5lR,GAAQ,IAE1Bo5Q,GAAkBp5Q,IAElB0lR,GAAkB1lR,GAAQ,KAGnCgnR,GAAchnR,EAAQ,UACtB42Q,GAAc52Q,GAElB,CA0BI4hS,CAAc5hS,EAAQ4yF,EACxB,IACA5yF,EAAOuV,WAAW,iBAAiB,YA3BV,SAAUvV,EAAQ4yF,GACvCipL,GAAkB77Q,GAAQ,IAEnBs6Q,GAAkBt6Q,GAAQ,IAE1BykR,GAAkBzkR,EAAQ4yF,GAAO,IAEjColL,GAAkBh4Q,GAAQ,IAE1BoiP,GAAkBpiP,IAElB+7Q,GAAkB/7Q,GAAQ,IAE1B4lR,GAAkB5lR,GAAQ,IAE1Bo5Q,GAAkBp5Q,IAElB0lR,GAAkB1lR,GAAQ,IAGnCgnR,GAAchnR,EAAQ,gBAE1B,CAMI6hS,CAAqB7hS,EAAQ4yF,EAC/B,GACF,EAy0GEkvM,CAAQ9hS,EAAQ4yF,GA7rGJ,SAAU5yF,GAClB+vN,GAAmB/vN,IACrBA,EAAOmS,GAAG,aAAc0E,EAAMsuP,GAAenlQ,GAEjD,CA0rGE2iG,CAAQ3iG,GA79JI,SAAUA,GACtB,IAAI+E,EAAM/E,EAAO+E,IACbguN,EAAYhD,GAAmB/vN,GAC/B22D,EAv2Ye,SAAU32D,GAC7B,OAAOA,EAAOE,SAAS,cAAeyvN,GAAM3iN,UAAUhN,EAAOysF,aAAc,eAAgB,SAC7F,CAq2YoBs1M,CAAe/hS,GAC7BgiS,EAAoB,SAAUjvR,EAAGslB,GACnC,IA/B2B,SAAUtlB,GACvC,GAAIgjQ,GAAgBhjQ,GAAI,CACtB,IAAIiC,EAAUjC,EAAEiC,QAChB,OAAQghQ,GAAcjjQ,KAAO8uN,GAAG/sN,eAAe/B,IAAMA,EAAEkC,QAAUD,GAAW,KAAOA,GAAW,KAAO6/K,EAAWghF,GAAmB7gQ,GACrI,CACE,OAAO,CAEX,CAwBQitR,CAAyBlvR,GAA7B,CAGA,IAAI1C,EAAOrQ,EAAOoJ,UACd84R,GA3BoB,SAAUnvR,GACpC,OAAOgjQ,GAAgBhjQ,MAAQijQ,GAAcjjQ,IAAiB,UAAXA,EAAE7X,MAAkC,MAAd6X,EAAEiC,QAC7E,CAyB0BmtR,CAAsBpvR,IAxB1B,SAAUhO,EAAK+5I,EAAS+uG,GAC5C,GAAIxqD,GAAUhoL,GAAqByjI,IAAU,GAAQ,CACnD,IAAIsjJ,EAA6C,KAApBv0C,EACzB1yD,EAAer8C,EAAQ8kF,kBAC3B,OAAKzoC,IAEMp2L,EAAI6nF,SAASkyD,EAAQ8kF,kBAAmB,kBAAmB7+N,EAAI6nF,SAASkyD,EAAQ8kF,kBAAmB,mBAGrGw+D,GAA0Br9R,EAAIi9E,QAAQm5G,GAAgB0yD,IAAoB1yD,EAAa34L,SAASC,cAE3G,CACE,OAAO,CAEX,CAU6D4/R,CAAgBt9R,EAAKsL,EAAM0iN,IAClB,KAAzChuN,EAAIiI,UAAUqD,EAAMylQ,MAClBosB,GAAmB7pQ,KAC5CtzB,EAAIu7M,UAAUjwM,EAAMylQ,GAAiBosB,EAAkBvrO,EAAc,MACrE5xD,EAAIu7M,UAAUjwM,EAAM,mBAAoB6xR,EAAkBvrO,EAAc,MAjiVlD,SAAU32D,EAAQyP,GACrCzP,EAAOyV,KAAK,oBAAqB,CAAEhG,MAAOA,GACnD,CAgiVM6yR,CAAsBtiS,EAAQkiS,GAC9BliS,EAAOmS,GAAG+vR,EAAkB,UAAY,QAASF,GACjDhiS,EAAOoS,IAAI8vR,EAAkB,QAAU,UAAWF,GATpD,CAWF,EACIrrO,GACF32D,EAAOmS,GAAG,QAAQ,SAAUY,GAC1BivR,EAAkBjvR,GAAG,GACrB/S,EAAOmS,GAAG,gCAAiC6vR,GAC3ChiS,EAAOmS,GAAG,SAAS,SAAUY,GAC3B,OAAOgqL,GAAMztL,iBAAiBtP,GAAQ,WACpC,OAAOgiS,EAAkBjvR,EAC3B,GACF,GACF,GAEJ,CAg8JEwvR,CAAQviS,GACR,IAAIwiS,EA7zRQ,SAAUxiS,GACtB,IAAIyiS,EAAaziS,EACjB,OAPgB,SAAUA,GAC1B,OAAO8rB,GAAM9rB,EAAOm8P,QAAS,OAAOt+P,MAAK,SAAU6kS,GACjD,OAAOjkS,EAASC,KAAKgkS,EAAU7sR,MACjC,GACF,CAGS8sR,CAAY3iS,GAAQrD,MAAK,WAE9B,OADA8lS,EAAWpmC,YAAclD,GAAiBn5P,GACnCvB,EAAShC,MAClB,IAAG,SAAUoZ,GAEX,OADA4sR,EAAWpmC,YApDO,WACpB,IAAIumC,EAAMxmS,EAAS,MACfovB,EAAQpvB,EAAS,IACrB,MAAO,CACL2K,YAAa,CACXqyP,aAAcj9P,EACd3B,IAAKooS,EACLjvK,KAAMivK,EACNhvK,KAAMgvK,EACNvmP,MAAOlgD,EACPkyD,MAAOlyD,EACP89P,QAAS19P,EACT49P,QAAS59P,EACTyK,SAAU47R,EACVnyN,OAAQt0E,EACRk3B,MAAOl3B,GAETk2I,UAAW,CACTzvH,MAAOrmB,EACPm+P,SAAUt+P,EAAS,IACnB4rP,UAAW5rP,OAASoB,GACpBm2J,SAAUp3J,EACV6lG,QAAS52E,EACTnsB,MAAOlD,EACP+N,OAAQ/N,EACR01E,OAAQ11E,EACRw1J,cAAev1J,EAAS,CAAEyuB,OAAQ1uB,KAEpC6D,OAAQ,CACNsF,WAAYkmB,EACZimC,WAAYjmC,EACZjkB,cAAepL,EACfgqP,UAAWhqP,GAEbyI,UAAW,CAAEU,WAAYkmB,GACzBhF,IAAK,CAAEy1O,SAAU7/P,EAASqC,EAAShC,SAEvC,CAe6BomS,GAClBpkS,EAASN,MAAK,WACnB,OAAO0X,IAAQ5H,MAAK,SAAU60R,GAE5B,OADAL,EAAWpmC,YAjIE,SAAUymC,GAC7B,IAAIC,EAAc,SAAUloE,GAC1B,OAAO7kN,EAAS6kN,GAAQA,EAAO,CAAC,CAClC,EACI9zN,EAAc+7R,EAAU/7R,YAAasrI,EAAYywJ,EAAUzwJ,UAAWryI,EAAS8iS,EAAU9iS,OAAQ4E,EAAYk+R,EAAUl+R,UAAW4hB,EAAMs8Q,EAAUt8Q,IACtJ,MAAO,CACLzf,YAAa,CACXqyP,aAAcryP,EAAYqyP,aAC1B5+P,IAAKuM,EAAYvM,IACjBm5H,KAAM5sH,EAAY4sH,KAClBC,KAAM7sH,EAAY6sH,KAClBv3E,MAAOt1C,EAAYs1C,MACnBgS,MAAOtnD,EAAYsnD,MACnB4rM,QAASlzP,EAAYkzP,QACrBE,QAASpzP,EAAYozP,QACrBnzP,SAAU,SAAUg8R,EAAcC,EAAQnsR,GACxC,OAAO/P,EAAYC,SAAS8P,EAC9B,EACA25D,OAAQ,SAAUwyN,EAAQ11R,GACxB,OAAOxG,EAAY0pE,OAAOljE,EAC5B,EACA8lB,MAAO,SAAU2vQ,EAAc71I,EAAQotG,EAAWC,GAChD,OAAOzzP,EAAYssB,MAAMknO,EAAWC,EACtC,GAEFnoH,UAAW,CACTzvH,MAAO,SAAUlnB,EAAMm/N,EAAMqoE,EAAOn7C,GAClC,OAAO11G,EAAUzvH,MAAMlnB,EAAMqnS,EAAYloE,GAAOktB,EAClD,EACA2S,SAAUroH,EAAUqoH,SACpB1S,UAAW31G,EAAU21G,UACrBr0F,SAAU,SAAUj4J,GAClB,OAAO22I,EAAUshB,SAASj4J,EAC5B,EACA0mG,QAAS,SAAUppC,GACjB,OAAOq5E,EAAUjwC,QAAQppC,EAC3B,EACA35D,MAAO,SAAU3D,EAAMm/N,EAAMqoE,GAC3B,OAAO7wJ,EAAUhzI,MAAM3D,EAAMqnS,EAAYloE,GAC3C,EACA3wN,OAAQ,SAAUxO,EAAMm/N,EAAMqoE,EAAOC,GACnC,OAAO9wJ,EAAUnoI,OAAOxO,EAAMqnS,EAAYloE,GAC5C,EACAhpJ,OAAQ,SAAUn2E,EAAMm/N,EAAMqoE,GAC5B,OAAO7wJ,EAAUxgE,OAAOn2E,EAAMqnS,EAAYloE,GAC5C,EACAlpE,cAAe,SAAUyxI,EAAMvxJ,EAAStkI,EAAUw6O,EAASltB,GACzD,OAAOxoF,EAAUsf,cAAc9f,EAAStkI,EAAUw6O,EAASltB,EAC7D,GAEF76N,OAAQ,CACNsF,WAAY,SAAUmR,EAAMg9I,GAC1B,OAAOzzJ,EAAOsF,WAAWmR,EAC3B,EACAg7C,WAAY,SAAU7xB,EAASnpB,GAC7B,OAAOzW,EAAOyxD,WAAW7xB,EAASnpB,EACpC,EACAlP,cAAe,SAAUq4B,EAASyjQ,GAChC,OAAOrjS,EAAOuH,cAAcq4B,EAC9B,EACAumN,UAAWnmP,EAAOmmP,WAEpBvhP,UAAW,CACTU,WAAY,SAAUmuJ,EAASh9I,GAC7B,OAAO7R,EAAUU,WAAWmR,EAC9B,GAEF+P,IAAK,CACHy1O,SAAU,WACR,OAAOx9P,EAASN,KAAKqoB,EAAI88Q,cAC3B,GAGN,CAwDiCC,CAAeT,GACjCA,EAAUU,IAAIC,QACvB,GACF,GACF,GACF,CA+yRsBC,CAAQ1jS,GAC5Bs7R,GAAQt7R,GACRwiS,EAAc7lS,MAAK,WACjBk+R,GAAe76R,GAAQiO,MAAK,WAC1B,OAAOgwR,GAA6Bj+R,EACtC,GACF,IAAG,SAAU2jS,GACX3jS,EAAO4jS,kBAAiB,GACxB/I,GAAe76R,GAAQiO,MAAK,WAC1B01R,IAAW11R,MAAK,SAAU41R,GACxB7jS,EAAO4jS,kBAAiB,GACxB3F,GAA6Bj+R,EAC/B,IAAG,SAAU4N,GACX5N,EAAO4tQ,oBAAoB98P,KAAK,CAC9B5V,KAAM,QACN8F,KAAMrF,OAAOiS,KAEfqwR,GAA6Bj+R,EAC/B,GACF,GACF,GACF,EAEI8jS,GAAQhkF,GAASnzH,IAwCjBo3M,GAAe,SAAU/jS,EAAQsuB,GACnC,IA5BkC3zB,EAAIsG,EAAe+iS,EACjD/6J,EA2BAg7J,EAAcjkS,EAAOmoB,UAAU,kBAC/B+7Q,GA7B8BvpS,EA6BJqF,EAAOrF,GA7BCsG,EA6BGgjS,EAAa31Q,EAAEzG,OA7BHm8Q,EA/+iBlC,SAAUhkS,GAC7B,OAAOA,EAAOE,SAAS,eAAgB,CAAC,EAC1C,CA0gjBkEikS,CAAenkS,GA5B3EipI,EAAS5tH,GAAqB,UAClC+J,GAAS6jH,EAAQ+6J,GACjB5+Q,GAAS6jH,EAAQ,CACftuI,GAAIA,EAAK,OACTypS,YAAa,IACbC,kBAAmB,OACnBpjS,MAAOA,IAETwmC,GAAMwhG,EAAQ,yBACPA,GAmBiFlkI,IACxFm/R,EAAInmG,OAAS,WACXmmG,EAAInmG,OAAS,KACb/9L,EAAOyV,KAAK,OACd,EACA,IAAI6uR,EA9CY,SAAUtkS,EAAQkkS,GAClC,GAAI5yR,SAASizR,SAAW5yR,OAAOohK,SAASyxH,UAAY9tG,GAAIh2K,QAAQ5B,OAAQ,CACtE,IAAI2lR,EAAWp1B,GAAK,OACpBrvQ,EAAOykS,GAAY,WACjBrG,GAAgBp+R,EAClB,EACA,IAAI0kS,EAAiB,2DAAkEpzR,SAASizR,OAA3E,yCAAoIvkS,EAAOrF,GAA3I,wDAA+M8pS,EAAW,cAE/O,OADAX,GAAMxjF,UAAU4jF,EAAK,MAAOQ,IACrB,CACT,CACA,OAAO,CACT,CAmCwBC,CAAY3kS,EAAQkkS,GAK1C,OAJAlkS,EAAOw+R,qBAAuBlwQ,EAAE+tI,gBAChCr8J,EAAOsnJ,cAAgB48I,EACvBlkS,EAAOu+R,WAzBW,SAAUv+R,GAC5B,IAAIu+R,EAz/iBW,SAAUv+R,GACzB,OAAOA,EAAOE,SAAS,UAAW,kBACpC,CAu/iBmB0kS,CAAW5kS,GAAU,gBAt/iBf,SAAUA,GACjC,OAAOA,EAAOE,SAAS,oBAAqB,GAC9C,EAq/iBMuuO,CAAmBzuO,KAAYA,EAAO6kS,kBACxCtG,GAAc,eAAiBv+R,EAAOixJ,gBAAgB49E,SAAW,QAEnE0vD,GAAc,wEACd,IAAIuG,EAx/iBU,SAAU9kS,GACxB,OAAO4vN,GAAe5vN,EAAQ,UAAW,UAC3C,CAs/iBe+kS,CAAU/kS,GACnBglS,EAt/iBa,SAAUhlS,GAC3B,OAAO4vN,GAAe5vN,EAAQ,aAAc,GAC9C,CAo/iBkBilS,CAAajlS,GACzBklS,EAAqBllS,EAAOmoB,UAlyiBV,SAAUnoB,GAChC,OAAOA,EAAOE,SAAS,mBAAoB,wCAAyC,SACtF,CAgyiB4CilS,CAAkBnlS,IAK5D,OAJI8vN,GAAyB9vN,KAC3Bu+R,GAAc,uDAAyDzuE,GAAyB9vN,GAAU,QAE5Gu+R,EAAc,oBAA4BuG,EAAS,6BAA+BE,EAAY,cAAgBhlS,EAAOrF,GAAK,iBAAmBuqS,EAA/H,sBAEhB,CAWsBE,CAAcplS,GAClC8jS,GAAMtpS,IAAI8zB,EAAE+tI,gBAAiB6nI,GACtBI,CACT,EAcIe,GAAQvlF,GAASnzH,IACjB24M,GAAa,SAAUtlS,EAAQulS,EAAoB38B,GACrD,IAAI48B,EAASj9E,GAActhM,IAAI2hP,GAC3BtgD,EAAYC,GAAc1pB,KAAK+pE,IAAW5oQ,EAAO6kS,gBAAgBr/R,QAAQ,MAAO,IAEpF,GADAojQ,EAAS9tQ,GAAMyJ,KAAKqkQ,GAChB48B,IAAyD,IAA/C1qS,GAAMqJ,QAAQohS,EAAoB38B,GAAgB,CAI9D,GAHA9tQ,GAAM8C,KAAK2qN,GAAcnB,aAAawhD,IAAS,SAAUz7N,GACvDm4P,GAAWtlS,EAAQulS,EAAoBp4P,EACzC,IACIntC,EAAOm8P,QAAQyM,GACjB,OAEF,IACE,IAAI68B,EAAiB,IAAID,EAAOxlS,EAAQsoN,EAAWtoN,EAAOoR,GAC1DpR,EAAOm8P,QAAQyM,GAAU68B,EACrBA,EAAe1hQ,OACjB0hQ,EAAe1hQ,KAAK/jC,EAAQsoN,GAC5Bi9E,EAAmBzmS,KAAK8pQ,GAI5B,CAFE,MAAO71P,IA7/MS,SAAU/S,EAAQtE,EAAMkS,GAC5C,IAAI9B,EAAUo6M,GAAK/9L,UAAU,CAC3B,mCACAzsB,IAEF+lO,GAAUzhO,EAAQ,kBAAmB,CAAE8L,QAASA,IAChDmiQ,GAAUniQ,EAAS8B,GACnBigQ,GAAa7tQ,EAAQ8L,EACvB,CAs/MM45R,CAAgB1lS,EAAQ4oQ,EAAQ71P,EAClC,CACF,CACF,EACI4yR,GAAmB,SAAUjqS,GAC/B,OAAOA,EAAK8J,QAAQ,MAAO,GAC7B,EA8CIogS,GAAyB,SAAU9xR,GACrC,MAAO,CACLmqI,gBAAiBnqI,EACjBuoJ,gBAAiBvoJ,EACjB7E,IAAK,CAAC,EAEV,EAUI42R,GAAgB,SAAU7lS,GAC5B,IAAIuC,EAAMvC,EAAOysF,aAEjB,OADAzsF,EAAO8lS,WAAavjS,EAAI2Y,MAAMymF,QAC1B8yF,EAAWu8B,GAAShxN,IAnCE,SAAUA,GACpC,OAAOA,EAAO2qQ,MAAMttF,UACtB,CAkCW0oH,CAAsB/lS,GACpB9D,EAAW80N,GAAShxN,IAlCP,SAAUA,GAClC,IAAIuC,EAAMvC,EAAOysF,aAEb19E,EADQiiN,GAAShxN,EACV2qQ,CAAM3qQ,EAAQuC,GAQzB,OAPIwM,EAAKkvI,gBAAgBj4I,WACvB+I,EAAKkvI,gBAAgBtjJ,GAAKoU,EAAKkvI,gBAAgBtjJ,IAAMqF,EAAOrF,GAAK,WAE/DoU,EAAKstJ,iBAAmBttJ,EAAKstJ,gBAAgBr2J,WAC/C+I,EAAKstJ,gBAAgB1hK,GAAKoU,EAAKstJ,gBAAgB1hK,IAAMqF,EAAOrF,GAAK,oBAEnEoU,EAAK8Y,OAAS9Y,EAAKi3R,aAAej3R,EAAKi3R,aAAezjS,EAAIulB,aACnD/Y,CACT,CAuBWk3R,CAAoBjmS,GAVR,SAAUA,GAC/B,IAAI0rD,EAAgB1rD,EAAOysF,aAC3B,OAAOzsF,EAAOmuF,OAASy3M,GAAuB,MAPnB,SAAUl6O,GACrC,IAAI2wG,EAAkBgpI,GAAMj7R,OAAO,OAEnC,OADAi7R,GAAM5hF,YAAYpnD,EAAiB3wG,GAC5Bk6O,GAAuBvpI,EAChC,CAGwD6pI,CAAuBx6O,EAC/E,CASWy6O,CAAiBnmS,EAE5B,EAeI+jC,GAAO,SAAU/jC,GACnBA,EAAOyV,KAAK,iBAjFE,SAAUzV,GACxB,IAAIomS,EAAetrS,GAAMyJ,KAAK4rN,GAAgBnwN,IAC1CqmS,EAAermS,EAAOgT,GAAGC,SAASktF,SAAS1lG,MAC3C6rS,EAAY7kS,GAASA,GAAS,CAAC,EAAGlH,GAAY0sB,IAAI,WAAWxsB,OAAQF,GAAY0sB,IAAIm/Q,GAAc3rS,OACvG26L,GAAOkxG,GAAW,SAAUC,EAASpzR,GAC9B+G,GAAMmsR,EAAclzR,IACvBnT,EAAOgT,GAAGC,SAASuzR,QAAQrzR,EAAMozR,EAErC,GACF,CAyEEE,CAAUzmS,GAxEI,SAAUA,GACxB,IAAI2qQ,EAAQ35C,GAAShxN,GACrB,GAAIy0L,EAAWk2E,GAAQ,CACrB3qQ,EAAOyI,SAASkiQ,MAAQg7B,GAAiBh7B,GACzC,IAAI+7B,EAAQl+E,GAAavhM,IAAI0jP,GAC7B3qQ,EAAO2qQ,MAAQ,IAAI+7B,EAAM1mS,EAAQwoN,GAAa3pB,KAAK8rE,IAC/C3qQ,EAAO2qQ,MAAM5mO,MACf/jC,EAAO2qQ,MAAM5mO,KAAK/jC,EAAQwoN,GAAa3pB,KAAK8rE,IAAU3qQ,EAAO6kS,gBAAgBr/R,QAAQ,MAAO,IAAKxF,EAAOoR,EAE5G,MACEpR,EAAO2qQ,MAAQ,CAAC,CAEpB,CA6DEg8B,CAAU3mS,GAzFM,SAAUA,GAC1B,IAAIulS,EAAqB,GACzBzqS,GAAM8C,KAAKwzN,GAAWpxN,GAAQgE,MAAM,SAAS,SAAUtI,GACrD4pS,GAAWtlS,EAAQulS,EAAoBI,GAAiBjqS,GAC1D,GACF,CAqFEkrS,CAAY5mS,GACZ,IAAI6mS,EAAahB,GAAc7lS,IAnBR,SAAUA,EAAQiP,GACzC,IAAI63R,EAAc,CAChB36M,KAAM1tF,EAASC,KAAKuQ,EAAIk9E,MAAMnvF,MAAMb,GACpCyY,KAAMnW,EAASC,KAAKuQ,EAAI2F,MAAM5X,MAAMb,GACpCgiE,QAAS1/D,EAASC,KAAKuQ,EAAIkvD,SAASnhE,MAAMb,GAC1C2hE,WAAYr/D,EAASC,KAAKuQ,EAAI6uD,YAAY9gE,MAAMT,GAChD2hE,OAAQ,WACDl+D,EAAOwS,KAAKC,cACfhU,EAASC,KAAKuQ,EAAIivD,QAAQvgE,IAAIjD,EAElC,GAEFsF,EAAOgT,GAAKvR,GAASA,GAAS,CAAC,EAAGzB,EAAOgT,IAAK8zR,EAChD,CAOEC,CAAmB/mS,EAAQvB,EAASC,KAAKmoS,EAAW53R,KAAKjS,MAAM,CAAC,IAChE,IAAIgqS,EAAU,CACZ/oJ,gBAAiB4oJ,EAAW5oJ,gBAC5Boe,gBAAiBwqI,EAAWxqI,iBAI9B,OAFAr8J,EAAOi+I,gBAAkB+oJ,EAAQ/oJ,gBAAkB+oJ,EAAQ/oJ,gBAAkB,KAC7EqwH,GAA6BtuQ,GACzBA,EAAOmuF,OACFiwM,GAAgBp+R,GA5Id,SAAUA,EAAQgnS,GAC7B,IAAI1C,EAAkBP,GAAa/jS,EAAQgnS,GACvCA,EAAQ/oJ,kBACV6lJ,GAAM78Q,IAAI+/Q,EAAQ/oJ,iBAAiB/iI,MAAMymF,QAAU3hG,EAAO8lS,WAC1D9lS,EAAOinS,OAASnD,GAAMhsH,SAASkvH,EAAQ/oJ,kBAEzCj+I,EAAOysF,aAAavxE,MAAMymF,QAAU,OACpCmiM,GAAMxjF,UAAUtgN,EAAOrF,GAAI,cAAe,QACrC2pS,GACHlG,GAAgBp+R,EAEpB,CAmIW80K,CAAO90K,EAAQgnS,EAE1B,EAEIE,GAAQpnF,GAASnzH,IACjBw6M,GAAoB,SAAUzrS,GAChC,MAA0B,MAAnBA,EAAK2nF,OAAO,EACrB,EAuCI+jN,GAA0B,SAAUpnS,EAAQtE,EAAMof,GACpD,OAAOrc,EAASC,KAAKhD,GAAMsC,QAAO,SAAUtC,GAC1C,OAAOA,EAAK0D,OAAS,IAAM7E,GAAY0H,IAAIvG,EAC7C,IAAGiC,KAAI,SAAUjC,GACf,MAAO,CACL8H,IAAKxD,EAAOknJ,cAAcgK,QAAU,UAAYx1J,EAAO,SAAWof,EAAS,MAC3Epf,KAAM+C,EAASN,KAAKzC,GAExB,GACF,EAoDIgqN,GAAc,SAAU1lN,EAAQ8a,GAClC,IAAIusR,EAAeriF,GAAaA,cA1FlB,SAAUqiF,EAAcrnS,EAAQ8a,EAAQvN,GACtD,IAAIo9P,EAAQ35C,GAAShxN,GACrB,GAAIy0L,EAAWk2E,GAAQ,CACrB,IAAKw8B,GAAkBx8B,KAAWzwP,GAAMsuM,GAAa3pB,KAAM8rE,GAAQ,CACjE,IAAI28B,EAjhjBQ,SAAUtnS,GAC1B,OAAOA,EAAOE,SAAS,YACzB,CA+gjBqBqnS,CAAYvnS,GACvBsnS,EACF9+E,GAAav2I,KAAK04L,EAAO3qQ,EAAOixJ,gBAAgBpsG,WAAWyiP,IAE3D9+E,GAAav2I,KAAK04L,EAAO,UAAYA,EAAQ,SAAW7vP,EAAS,MAErE,CACAusR,EAAa5hF,WAAU,WACrB+C,GAAaX,QAAQ8iD,EAAOp9P,EAC9B,GACF,MACEA,GAEJ,CA0EEi6R,CAAUH,EAAcrnS,EAAQ8a,GAAQ,YArGvB,SAAUusR,EAAcrnS,GACzC,IAAIynS,EAAe/2E,GAAgB1wN,GAC/B0nS,EAlljBe,SAAU1nS,GAC7B,OAAOA,EAAOE,SAAS,eAAgB,GAAI,SAC7C,CAgljBoBynS,CAAe3nS,GACjC,IAAmC,IAA/BkmN,GAAKa,QAAQ0gF,IAA4C,OAAjBA,EAAuB,CACjE,IAAIG,EAAwB,KAAhBF,EAAqBA,EAAc1nS,EAAOknJ,cAAcgK,QAAU,UAAYu2I,EAAe,MACzGJ,EAAa7sS,IAAIotS,EAAOzrS,OAAMqB,GAAW,YA3nNrB,SAAUwC,EAAQwD,EAAK9H,GAC7CoyQ,GAAS9tQ,EAAQ,oBAAqB+tQ,GAAgB,WAAYvqQ,EAAK9H,GACzE,CA0nNMmsS,CAAkB7nS,EAAQ4nS,EAAOH,EACnC,GACF,CACF,EA6FIK,CAAaT,EAAcrnS,GAtDf,SAAUqnS,EAAcrnS,EAAQ8a,GAC9C,IAAIitR,EAAkBX,GAAwBpnS,EAAQ,UAAW8a,GAC7DktR,EAtBuB,SAAUhoS,GACrC,OAAOvB,EAASC,KArojBA,SAAUsB,GAC1B,OAAOA,EAAOE,SAAS,YAAa,GAAI,SAC1C,CAmojBuB+nS,CAAYjoS,IAAShC,QAAO,SAAUwF,GACzD,OAAOA,EAAIpE,OAAS,CACtB,IAAGzB,KAAI,SAAU6F,GACf,MAAO,CACLA,IAAKA,EACL9H,KAAM+C,EAAShC,OAEnB,GACF,CAauByrS,CAAuBloS,GAAQtC,SAAQ,WAC1D,OAAO0pS,GAAwBpnS,EAAQmwN,GAAgBnwN,GAAS,GAClE,IACA+0L,EA7vxBQ,SAAUx1L,GAKlB,IAJA,IAAIN,EAAI,GACJH,EAAO,SAAUzD,GACnB4D,EAAEH,KAAKzD,EACT,EACS6D,EAAI,EAAGA,EAAIK,EAAIH,OAAQF,IAC9BK,EAAIL,GAAGtB,KAAKkB,GAEd,OAAOG,CACT,CAovxBSY,CAAI,CACTkoS,EACAC,KACE,SAAUG,GACZd,EAAa7sS,IAAI2tS,EAAQ3kS,IAAKrH,OAAMqB,GAAW,YAlrN9B,SAAUwC,EAAQwD,EAAK9H,GAC1CoyQ,GAAS9tQ,EAAQ,iBAAkB+tQ,GAAgB,QAASvqQ,EAAK9H,GACnE,CAirNM0sS,CAAepoS,EAAQmoS,EAAQ3kS,IAAK2kS,EAAQzsS,KAAK6B,iBACnD,GACF,GACF,CA0CI+oS,CAAUe,EAAcrnS,EAAQ8a,GAzClB,SAAU9a,EAAQ8a,GAClChgB,GAAM8C,KA3hjBmB,SAAUoC,GACnC,OAAOA,EAAOE,SAAS,mBACzB,CAyhjBamoS,CAAqBroS,IAAS,SAAUwD,EAAK9H,GACtD6sN,GAAct2I,KAAKv2E,EAAM8H,EAAKrH,OAAMqB,GAAW,WAC7CwwQ,GAAgBhuQ,EAAQwD,EAAK9H,EAC/B,IACAsE,EAAOyI,SAAS0zP,SAAW,IAAMzgQ,CACnC,IACAZ,GAAM8C,KAAKwzN,GAAWpxN,GAAQgE,MAAM,SAAS,SAAU4kQ,GAErD,IADAA,EAAS9tQ,GAAMyJ,KAAKqkQ,MACLrgD,GAAc1pB,KAAK+pE,GAChC,GAAIu+B,GAAkBv+B,GAAS,CAC7BA,EAASA,EAAOluP,OAAO,EAAGkuP,EAAOxpQ,QACjC,IAAIgoN,EAAemB,GAAcnB,aAAawhD,GAC9C9tQ,GAAM8C,KAAKwpN,GAAc,SAAUkhF,GACjC,IAAIv9B,EAAkB,CACpB/pO,OAAQ,WACRumL,SAAU+gF,EACVxtR,OAAQ,UAAYA,EAAS,OAE3BqyB,EAAMo7K,GAAclB,UAAU0jD,EAAiBu9B,GACnD//E,GAAct2I,KAAK9kC,EAAIo6K,SAAUp6K,EAAKhxC,OAAMqB,GAAW,WACrDwwQ,GAAgBhuQ,EAAQmtC,EAAInM,OAASmM,EAAIo6K,SAAWp6K,EAAIryB,OAAQqyB,EAAIo6K,SACtE,GACF,GACF,KAAO,CACL,IAAIghF,EAAQ,CACVvnQ,OAAQ,WACRumL,SAAUqhD,EACV9tP,OAAQ,UAAYA,EAAS,OAE/BytM,GAAct2I,KAAK22L,EAAQ2/B,EAAOpsS,OAAMqB,GAAW,WACjDwwQ,GAAgBhuQ,EAAQuoS,EAAMvnQ,OAASunQ,EAAMhhF,SAAWghF,EAAMztR,OAAQ8tP,EACxE,GACF,CAEJ,GACF,CAMI4/B,CAAYxoS,EAAQ8a,GACpBusR,EAAa5hF,WAAU,WAChBzlN,EAAO49H,SACV75F,GAAK/jC,EAET,GAAGA,GAAQ,WACJA,EAAO49H,SACV75F,GAAK/jC,EAET,GACF,GACF,EAqGIyoS,GAAkB,CACpB,YAAa,OACb,cAAe,QA2BbC,GAAc,SAAUj9B,GAC1B,OAAO,SAAU3sH,EAASv8I,GACxB,OAAO9D,EAASC,KAAK6D,GAAK5E,IAAI0d,IAAsBrd,OAAO26L,IAAa96L,MAAK,SAAUiW,GACrF,OA5BqB,SAAU23P,EAAU3sH,EAASv8I,GAetD,OAAOsqC,GAAUxxB,GAAqB9Y,IAAM,SAAUA,GACpD,OAfgB,SAAUA,GAC1B,OAAOgkB,GAAOhkB,EAAKkpQ,GAAU/tQ,SAAQ,WACnC,MAAkB,SAAdhC,GAAK6G,GACAupB,GAAM28Q,GAAiBh9B,GAAU5tQ,MAAK,SAAU8qS,GACrD,OAAOrjR,GAAO/iB,EAAKomS,EACrB,IAEOlqS,EAAShC,MAEpB,GACF,CAKSmsS,CAAYrmS,EACrB,IALa,SAAUA,GACrB,OAAOigB,GAAGnH,GAAqByjI,GAAUv8I,EAC3C,GAIF,CAUasmS,CAAqBp9B,EAAU3sH,EAAShrI,EAAQ/O,KAAKtH,GANxC,SAAUguQ,EAAUlpQ,GAC5C,OAAO9D,EAASC,KAAKohN,GAASnzH,IAAIC,SAASrqF,EAAKkpQ,GAAU,GAC5D,CAIqEq9B,CAAoBr9B,EAAU33P,EAAQ/O,KACvG,IAAG/H,MAAM,GACX,CACF,EACI+rS,GAAcL,GAAY,aAC1BM,GAAgB1yR,GAdM,SAAUw9I,GAClC,OAAOA,EAAWtuJ,QAAQ,YAAa,IAAIA,QAAQ,QAAS,IAC9D,GAYiDkjS,GAAY,gBAEzDO,GAAwB,SAAUjpS,GACpC,OAAO+3N,GAAgB/3N,EAAOoJ,WAAWzL,KAAI,SAAUi1F,GACrD,IAAI1yD,EAAY0yD,EAAM1yD,YACtB,OAAOu6J,GAASv6J,GAAaA,EAAUl2B,WAAak2B,CACtD,GACF,EAWIgpQ,GAAW,SAAUlpS,EAAQmpS,GAC/B,OAJc,SAAUnpS,EAAQuqB,GAChC,OARoB,SAAUvqB,GAC9B,OAAOvB,EAASC,KAAKsB,EAAO4E,UAAUmB,UAAUlI,MAAK,SAAUgF,GAC7D,IAAI8zC,EAAO32C,EAAOoJ,UAElB,OADoBvG,EAAIsG,iBAAmBwtC,GAA4B,IAApB9zC,EAAI2lD,YAChC/pD,EAAShC,OAASgC,EAASC,KAAKsB,EAAO4E,UAAUqM,UAAS,GACnF,GACF,CAESm4R,CAAgBppS,GAAQtC,QAAQmZ,EAAMoyR,GAAuBjpS,IAASrC,IAAI0d,IAAsBrd,OAAO26L,IAAa96L,KAAK0sB,EAClI,CAES8+Q,CAAUrpS,EAAQ20L,EAASl2L,EAASN,KAAMgrS,GACnD,EAEIG,GAAqB,SAAUtpS,EAAQ7E,GACzC,GAAI,YAAYsI,KAAKtI,GAAQ,CAC3B,IAAIouS,EAAiBxoR,SAAS5lB,EAAO,IACrC,GAAIouS,GAAkB,GAAKA,GAAkB,EAAG,CAC9C,IAAIlpC,EAp5jBe,SAAUrgQ,GACjC,OAAOlF,GAAM4wI,QAAQ1rI,EAAOE,SAAS,yBAA0B,wDACjE,CAk5jBsBspS,CAAmBxpS,GAC/BypS,EAl5jBe,SAAUzpS,GACjC,OAAOlF,GAAM4wI,QAAQ1rI,EAAOE,SAAS,oBAAqB,IAC5D,CAg5jBwBwpS,CAAmB1pS,GACrC,OAAIypS,EACKA,EAAYF,EAAiB,IAAMpuS,EAEnCklQ,EAAUkpC,EAAiB,IAAMpuS,CAE5C,CACE,OAAOA,CAEX,CACE,OAAOA,CAEX,EACIwuS,GAAqB,SAAU31I,GACjC,IAAID,EAAQC,EAAKhwJ,MAAM,WACvB,OAAO8wL,EAAM/gC,GAAO,SAAUC,GAC5B,OAA2B,IAAvBA,EAAKp1J,QAAQ,MAAiBg2F,GAAWo/D,EAAM,MAAQp/D,GAAWo/D,EAAM,KAGnEA,EAFA,IAAOA,EAAO,GAIzB,IAAGvvJ,KAAK,IACV,EA6DImlS,GAAS9uS,GAAM8C,KACfD,GAAM7C,GAAM6C,IAAKwG,GAAUrJ,GAAMqJ,QACjC0lS,GAAiB,WACnB,SAASA,EAAe7pS,GACtB+B,KAAKuS,SAAW,CACd7E,MAAO,CAAC,EACR+mF,KAAM,CAAC,EACPr7F,MAAO,CAAC,GAEV4G,KAAK/B,OAASA,EACd+B,KAAK+nS,cAAc9pS,EACrB,CA+YA,OA9YA6pS,EAAetuS,UAAU+L,YAAc,SAAU6/I,EAASn0I,EAAI7X,EAAOsb,GACnE,IAAIqmL,EAAMrtL,GAAQ,EACdpR,EAAO0D,KACX,IAAI1D,EAAK2B,OAAO49H,QAAhB,CAn5dU,IAAU59H,EAk6dpB,GAZ8B,aAA1BmnJ,EAAQ1kJ,gBACL,mEAAmEgB,KAAK0jJ,IAAc1wI,GAASA,EAAKszR,YAv5dvF/pS,EA05dR3B,EAAK2B,OAz5dnB+F,GAAO/F,GAAQpC,MAAK,SAAUiF,GAC5B,OAAO7C,EAAO4E,UAAU6E,OAAO5G,EACjC,KAq5dMxE,EAAK2B,OAAOkH,UAKhBuP,EAAOpY,EAAK2B,OAAOyV,KAAK,oBAAqB,CAC3C0xI,QAASA,EACTn0I,GAAIA,EACJ7X,MAAOA,KAEA49K,qBACP,OAAO,EAET,IAAIixH,EAAgB7iJ,EAAQ1kJ,cAC5B,GAAIq6L,EAAOz+L,EAAKiW,SAASkiF,KAAKwzM,GAO5B,OANAltG,EAAKktG,EAAeh3R,EAAI7X,GACxBkD,EAAK2B,OAAOyV,KAAK,cAAe,CAC9B0xI,QAASA,EACTn0I,GAAIA,EACJ7X,MAAOA,KAEF,EAaT,GAXAyuS,GAAO7nS,KAAK/B,OAAOm8P,SAAS,SAAUt6P,GACpC,GAAIA,EAAEyF,aAAezF,EAAEyF,YAAY6/I,EAASn0I,EAAI7X,GAO9C,OANAkD,EAAK2B,OAAOyV,KAAK,cAAe,CAC9B0xI,QAASA,EACTn0I,GAAIA,EACJ7X,MAAOA,IAETsU,GAAQ,GACD,CAEX,IACIA,EACF,OAAOA,EAET,GAAIpR,EAAK2B,OAAO2qQ,OAAStsQ,EAAK2B,OAAO2qQ,MAAMrjQ,aAAejJ,EAAK2B,OAAO2qQ,MAAMrjQ,YAAY6/I,EAASn0I,EAAI7X,GAMnG,OALAkD,EAAK2B,OAAOyV,KAAK,cAAe,CAC9B0xI,QAASA,EACTn0I,GAAIA,EACJ7X,MAAOA,KAEF,EAET,IACEsU,EAAQpR,EAAK2B,OAAOqiF,SAAS/6E,YAAY6/I,EAASn0I,EAAI7X,EAExD,CADE,MAAOqwG,GACT,CACA,QAAI/7F,IACFpR,EAAK2B,OAAOyV,KAAK,cAAe,CAC9B0xI,QAASA,EACTn0I,GAAIA,EACJ7X,MAAOA,KAEF,EA1DT,CA6DF,EACA0uS,EAAetuS,UAAU2sK,kBAAoB,SAAU/gB,GACrD,IAAI21C,EACJ,IAAI/6L,KAAK/B,OAAO27R,OAAO7jH,aAAc/1K,KAAK/B,OAAO49H,QAAjD,CAIA,GADAupB,EAAUA,EAAQ1kJ,cACdq6L,EAAO/6L,KAAKuS,SAAS7E,MAAM03I,GAC7B,OAAO21C,EAAK31C,GAEd,IACE,OAAOplJ,KAAK/B,OAAOqiF,SAAS6lF,kBAAkB/gB,EAEhD,CADE,MAAO37C,GACT,CACA,OAAO,CATP,CAUF,EACAq+L,EAAetuS,UAAU84J,kBAAoB,SAAUlN,GACrD,IAAI21C,EACJ,IAAI/6L,KAAK/B,OAAO27R,OAAO7jH,aAAc/1K,KAAK/B,OAAO49H,QAAjD,CAIA,GADAupB,EAAUA,EAAQ1kJ,cACdq6L,EAAO/6L,KAAKuS,SAASnZ,MAAMgsJ,GAC7B,OAAO21C,EAAK31C,GAEd,IACE,OAAOplJ,KAAK/B,OAAOqiF,SAASgyE,kBAAkBlN,EAEhD,CADE,MAAO37C,GACT,CARA,CASF,EACAq+L,EAAetuS,UAAU0uS,YAAc,SAAUC,EAAahvS,QAC/C,IAATA,IACFA,EAAO,QAET,IAAImD,EAAO0D,KACX6nS,GAAOM,GAAa,SAAU38R,EAAU45I,GACtCyiJ,GAAOziJ,EAAQ1kJ,cAAcuB,MAAM,MAAM,SAAUmjJ,GACjD9oJ,EAAKiW,SAASpZ,GAAMisJ,GAAW55I,CACjC,GACF,GACF,EACAs8R,EAAetuS,UAAUga,WAAa,SAAU4xI,EAAS55I,EAAUgO,GACjE,IAAIgyL,EAAQxrM,KACZolJ,EAAUA,EAAQ1kJ,cAClBV,KAAKuS,SAASkiF,KAAK2wD,GAAW,SAAUA,EAASn0I,EAAI7X,EAAOsb,GAC1D,OAAOlJ,EAAS7S,KAAK6gB,GAASgyL,EAAMvtM,OAAQgT,EAAI7X,EAAOsb,EACzD,CACF,EACAozR,EAAetuS,UAAUkiS,sBAAwB,SAAUt2I,GAEzD,GADAA,EAAUA,EAAQ1kJ,cACdV,KAAKuS,SAASkiF,KAAK2wD,GACrB,OAAO,EAET,IACE,OAAOplJ,KAAK/B,OAAOqiF,SAASo7M,sBAAsBt2I,EAEpD,CADE,MAAO37C,GACT,CACA,OAAO,CACT,EACAq+L,EAAetuS,UAAUmgL,qBAAuB,SAAUv0B,EAAS55I,EAAUgO,GAC3E,IAAIgyL,EAAQxrM,KACZolJ,EAAUA,EAAQ1kJ,cAClBV,KAAKuS,SAAS7E,MAAM03I,GAAW,WAC7B,OAAO55I,EAAS7S,KAAK6gB,GAASgyL,EAAMvtM,OACtC,CACF,EACA6pS,EAAetuS,UAAU4gK,qBAAuB,SAAUhV,EAAS55I,EAAUgO,GAC3E,IAAIgyL,EAAQxrM,KACZolJ,EAAUA,EAAQ1kJ,cAClBV,KAAKuS,SAASnZ,MAAMgsJ,GAAW,WAC7B,OAAO55I,EAAS7S,KAAK6gB,GAASgyL,EAAMvtM,OACtC,CACF,EACA6pS,EAAetuS,UAAU4uS,iBAAmB,SAAUhjJ,GAEpD,OADAA,EAAUA,EAAQ1kJ,gBACTV,KAAKuS,SAASkiF,KAAK2wD,EAC9B,EACA0iJ,EAAetuS,UAAU6uS,kBAAoB,SAAUjjJ,EAASn0I,EAAI7X,GAOlE,YANWqC,IAAPwV,IACFA,GAAK,QAEOxV,IAAVrC,IACFA,EAAQ,MAEH4G,KAAK/B,OAAOqiF,SAAS/6E,YAAY6/I,EAASn0I,EAAI7X,EACvD,EACA0uS,EAAetuS,UAAU8uS,cAAgB,SAAU3uS,GACjD,OAAOqG,KAAK/B,OAAOqyI,UAAUzvH,MAAMlnB,EACrC,EACAmuS,EAAetuS,UAAUs5Q,aAAe,SAAUn5Q,EAAMP,GACtD4G,KAAK/B,OAAOqyI,UAAUxgE,OAAOn2E,EAAMP,GACnC4G,KAAK/B,OAAOu/J,aACd,EACAsqI,EAAetuS,UAAU+uS,eAAiB,SAAUpvS,GAClD6G,KAAKwoS,kBAAoBxoS,KAAK/B,OAAO4E,UAAUoE,YAAY9N,EAC7D,EACA2uS,EAAetuS,UAAU+rR,iBAAmB,WAC1CvlR,KAAK/B,OAAO4E,UAAU8E,eAAe3H,KAAKwoS,kBAC5C,EACAV,EAAetuS,UAAUuuS,cAAgB,SAAU9pS,GACjD,IAAI3B,EAAO0D,KACXA,KAAKkoS,YAAY,CACf,uCAAwC9tS,EACxC,kCAAmC,WACjC6D,EAAO+G,YAAYvM,KACrB,EACA,SAAY,SAAUgwS,EAAUtuI,EAAK/gK,IAx0d/B,SAAU6E,EAAQyqS,GACxBzqS,EAAO49H,UAGP6sK,EACFz+D,GAAehsO,GAtCD,SAAUA,GAC1B,IAAI4E,EAAY5E,EAAO4E,UACnByL,EAAOrQ,EAAOoJ,UACdvG,EAAM+B,EAAUmB,SACpB/F,EAAO27R,OAAOuB,8BACU1/R,IAApBwC,EAAO+I,WAA+C,IAArB2tC,GAAS12C,IAC5C+F,GAAO/F,GAAQpC,MAAK,SAAU8sS,GAC5B1qS,EAAO4E,UAAU6E,OAAOihS,GACxB7nS,EAAM6nS,CACR,IAEF,IAAIC,EAzEuB,SAAU3qS,EAAQ6I,GAC7C,OAAO7I,EAAO+E,IAAIE,UAAU4D,GAAM,SAAUA,GAC1C,MAA+C,SAAxC7I,EAAO+E,IAAIk9E,mBAAmBp5E,EACvC,GACF,CAqE4B+hS,CAAuB5qS,EAAQ4E,EAAUC,WACnE,GAAI7E,EAAOoR,EAAEuR,SAAStS,EAAMs6R,GAI1B,OAHA/+D,GAAU++D,GACVn/D,GAAqBxrO,EAAQ6C,QAC7BmpO,GAAehsO,GAGZA,EAAOmuF,SACLuoG,GAAIp4K,OACPstN,GAAUv7N,GAEZrQ,EAAOqnD,SAASngD,UAEdwvL,GAAIE,OAAS52L,EAAOmuF,UACtBy9I,GAAUv7N,GACVm7N,GAAqBxrO,EAAQ6C,IAE/BmpO,GAAehsO,EACjB,CAWIy6R,CAAYz6R,GAEhB,CAg0dQkH,CAAMlH,EAAQ7E,EAChB,EACA,iBAAkB,SAAUgsJ,GAC1B,IACI02C,EADA74K,EAAMhlB,EAAOqiF,SAEjB,IACEhkF,EAAK+rS,kBAAkBjjJ,EAGzB,CAFE,MAAO37C,GACPqyF,GAAS,CACX,CAIA,GAHgB,UAAZ12C,GAAwBniI,EAAI6lR,oBAAoB1jJ,KAClD02C,GAAS,GAEPA,IAAW74K,EAAIy4Q,sBAAsBt2I,GAAU,CACjD,IAAI/pJ,EAAM4C,EAAOmoB,UAAU,sHACvBuuK,GAAI/lG,MACNvzF,EAAMA,EAAIoI,QAAQ,UAAW,OAE/BxF,EAAO4tQ,oBAAoB98P,KAAK,CAC9B9P,KAAM5D,EACNlC,KAAM,SAEV,CACF,EACA,OAAU,WACR,GAAI8E,EAAO4E,UAAU2+I,cAArB,CACE,IAAIhhJ,EAAMvC,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUqM,WAAY,KACxD1O,GACFvC,EAAO+E,IAAImF,OAAO3H,GAAK,EAG3B,MACAvC,EAAOqyI,UAAUnoI,OAAO,OAC1B,EACA,iEAAkE,SAAUi9I,GAC1E,IAAItzD,EAAQszD,EAAQlkH,UAAU,GAChB,SAAV4wD,IACFA,EAAQ,WAEV+1M,GAAO,4BAA4B5lS,MAAM,MAAM,SAAUtI,GACnDm4F,IAAUn4F,GACZsE,EAAOqyI,UAAUnoI,OAAO,QAAUxO,EAEtC,IACc,SAAVm4F,GACFx1F,EAAKw2Q,aAAa,QAAUhhL,EAEhC,EACA,wCAAyC,SAAUszD,GACjD,IAAI2jJ,EACJzsS,EAAK+rS,kBAAkBjjJ,GACvB,IAAI4sG,EAAU/zP,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUC,UAAW,SAC3DkvP,IACF+2C,EAAa/2C,EAAQ/pP,WACjB,2BAA2BvG,KAAKqnS,EAAWtoS,YAC7CnE,EAAKisS,iBACLtqS,EAAO+E,IAAIf,MAAM8mS,EAAY/2C,GAC7B11P,EAAKipR,oBAGX,EACA,4DAA6D,SAAUngI,GACrE9oJ,EAAKw2Q,aAAa1tH,EACpB,EACA,wBAAyB,SAAUA,EAASn0I,EAAI7X,GAC9CkD,EAAKw2Q,aAAa1tH,EAAS,CAAEhsJ,MAAOA,GACtC,EACA,SAAY,SAAUgsJ,EAASn0I,EAAI7X,IAxTpB,SAAU6E,EAAQ7E,GACrC,IAAI64J,EAAOs1I,GAAmBtpS,EAAQ7E,GACtC6E,EAAOqyI,UAAUxgE,OAAO,WAAY,CAAE12E,MAAOwuS,GAAmB31I,KAChEh0J,EAAOu/J,aACT,CAqTQwrI,CAAe/qS,EAAQ7E,EACzB,EACA,SAAY,SAAUgsJ,EAASn0I,EAAI7X,IAjTpB,SAAU6E,EAAQ7E,GACrC6E,EAAOqyI,UAAUxgE,OAAO,WAAY,CAAE12E,MAAOmuS,GAAmBtpS,EAAQ7E,KACxE6E,EAAOu/J,aACT,CA+SQyrI,CAAehrS,EAAQ7E,EACzB,EACA,WAAc,SAAUgsJ,EAASn0I,EAAI7X,IA5RpB,SAAU6E,EAAQ+zQ,GACvC/zQ,EAAOqyI,UAAUxgE,OAAO,aAAc,CAAE12E,MAAOQ,OAAOo4Q,KACtD/zQ,EAAOu/J,aACT,CA0RQ0rI,CAAiBjrS,EAAQ7E,EAC3B,EACA,KAAQ,SAAUgsJ,EAASn0I,EAAI43J,GAC7BvsK,EAAKw2Q,aAAa1tH,EAAS,CACzBhsJ,MAAOyvK,EAAKH,KACZC,YAAaE,EAAKJ,YAEtB,EACA,aAAgB,SAAUrjB,GACxBnnJ,EAAOqyI,UAAUnoI,OAAOi9I,EAC1B,EACA,cAAiB,WACf9oJ,EAAKw2Q,aAAa,aACpB,EACA,YAAe,SAAU1tH,EAASn0I,EAAI7X,GACpC,OAAOkD,EAAKw2Q,aAAa15Q,GAAS,IACpC,EACA,WAAc,WACZ,IAAI4N,EAAW/I,EAAO4E,UAAUoE,cAChChJ,EAAOyxD,WAAWzxD,EAAOsF,cACzBtF,EAAO4E,UAAU8E,eAAeX,EAClC,EACA,cAAiB,SAAUo+I,EAASn0I,EAAI7X,GACtC,IAAI0N,EAAO1N,GAAS6E,EAAO4E,UAAUC,UACjCgE,IAAS7I,EAAOoJ,YAClB/K,EAAKisS,iBACLtqS,EAAO+E,IAAImF,OAAOrB,GAAM,GACxBxK,EAAKipR,mBAET,EACA,mBAAsB,SAAUngI,EAASn0I,EAAI7X,GAC3C,IAAI6kN,EAAU,EACdhgN,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUC,WAAW,SAAUgE,GACzD,GAAsB,IAAlBA,EAAK7C,UAAkBg6M,MAAc7kN,EAEvC,OADA6E,EAAO4E,UAAUI,OAAO6D,IACjB,CAEX,GAAG7I,EAAOoJ,UACZ,EACA,cAAiB,SAAU+9I,EAASn0I,EAAI7X,GACtC6E,EAAO4E,UAAUI,OAAO7J,EAC1B,EACA,iBAAoB,SAAUgsJ,EAASn0I,EAAI7X,IAlT7B,SAAU6E,EAAQ7E,GACpC,IAAIo3B,EAjBa,SAAUp3B,GAC3B,GAAqB,iBAAVA,EAAoB,CAC7B,IAAImgG,EAAUxgG,GAAM88L,OAAO,CACzBgtD,MAAOzpP,EAAMypP,MACbx+O,KAAM,CAAEw+O,MAAOzpP,EAAMypP,QACpBzpP,GACH,MAAO,CACLykC,QAASzkC,EAAMykC,QACf07D,QAASA,EAEb,CACA,MAAO,CACL17D,QAASzkC,EACTmgG,QAAS,CAAC,EAEd,CAEe4vM,CAAa/vS,IA3ySR,SAAU6E,EAAQ7E,EAAOmgG,GACpC8gK,GAA2Bp8P,GAAQA,OAAOuH,cAAcpM,EAAOmgG,EACxE,CA0ySE/zF,CAAcvH,EAAQuyB,EAAOqN,QAASrN,EAAO+oE,QAC/C,CAgTQ6vM,CAAcnrS,EAAQ7E,EACxB,EACA,iBAAoB,SAAUgsJ,EAASn0I,EAAI7X,GACzC6E,EAAO4E,UAAU6sD,WAAW,mBAC5B,IAAI7xB,EAAU5/B,EAAOsF,aACrBtF,EAAOyxD,WAAW7xB,EAAQp6B,QAAQ,oBAAoB,WACpD,OAAOrK,CACT,IACF,EACA,iBAAoB,SAAUgsJ,EAASn0I,EAAI7X,GACzC8zE,GAAOjvE,EAAQ7E,EACjB,EACA,gBAAmB,SAAUgsJ,EAASn0I,EAAI7X,GACxCkD,EAAKw2Q,aAAa15Q,EACpB,EACA,cAAiB,SAAUgsJ,EAASn0I,EAAI7X,GACtC6E,EAAOyxD,WAAWt2D,EACpB,EACA,iBAAkB,SAAUgsJ,GAC1Bx8H,GAAO3qB,EAAQmnJ,EACjB,EACA,WAAchrJ,EACd,qBAAwB,WACtB6D,EAAOsH,YAAY,oBAAoB,EAAO,SAChD,EACA,mBAAsB,WACpBtH,EAAO8oK,WAAa9oK,EAAO8oK,UAC3B9oK,EAAOmmP,WACT,EACA,kBAAqB,SAAUh/F,EAASn0I,EAAI7X,GAC1C6E,EAAOsH,YAAY,oBAAoB,EAAOnM,EAAMqK,QAAQ,mBAAoBxF,EAAO4E,UAAUU,WAAW,CAAEC,OAAQ,UACxH,EACA,cAAiB,SAAU4hJ,EAASn0I,EAAI7X,GACjB,iBAAVA,IACTA,EAAQ,CAAEsL,KAAMtL,IAElB,IAAI8P,EAASjL,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUC,UAAW,KAC9D1J,EAAMsL,KAAOtL,EAAMsL,KAAKjB,QAAQ,KAAM,OACjCyF,GAAW9P,EAAMsL,MACpBzG,EAAOqyI,UAAUnoI,OAAO,QAEtB/O,EAAMsL,MACRzG,EAAOqyI,UAAUhzI,MAAM,OAAQlE,EAAO8P,EAE1C,EACA,UAAa,WACX,IAAImgS,EAAcprS,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUqM,WAAY6pL,IACpE,GAAIswG,EAAa,CACf,IAAIvoS,EAAM7C,EAAO+E,IAAI2+E,YACrB7gF,EAAIwoS,mBAAmBD,GACvBprS,EAAO4E,UAAU6E,OAAO5G,EAC1B,CACF,EACA,eAAkB,WAChB7C,EAAOyxD,WAAW,GACpB,EACA,gBAAmB,SAAU01F,EAASn0I,EAAI7X,GAExC,OADA00R,GAAS7vR,EAAQ7E,IACV,CACT,IAEF,IAAImwS,EAAc,SAAU5vS,GAC1B,OAAO,WACL,IAAIkJ,EAAY5E,EAAO4E,UACnBw2L,EAAQx2L,EAAU2+I,cAAgB,CAACvjJ,EAAO+E,IAAIE,UAAUL,EAAUC,UAAW7E,EAAO+E,IAAIi9E,UAAYp9E,EAAU6mP,oBAC9GlrO,EAAU5iB,GAAIy9L,GAAO,SAAUvyL,GACjC,QAAS7I,EAAOqyI,UAAU21G,UAAUn/O,EAAMnN,EAC5C,IACA,OAAmC,IAA5ByI,GAAQoc,GAAS,EAC1B,CACF,EACAliB,EAAK4rS,YAAY,CACf,YAAeqB,EAAY,aAC3B,cAAiBA,EAAY,eAC7B,aAAgBA,EAAY,cAC5B,YAAeA,EAAY,gBAC3B,4DAA6D,SAAUnkJ,GACrE,OAAO9oJ,EAAKgsS,cAAcljJ,EAC5B,EACA,cAAiB,WACf,OAAO9oJ,EAAKgsS,cAAc,aAC5B,EACA,QAAW,WACT,OAAOnkB,GAAWlmR,EACpB,EACA,wCAAyC,SAAUmnJ,GACjD,IAAItmJ,EAAOb,EAAO+E,IAAIE,UAAUjF,EAAO4E,UAAUC,UAAW,SAC5D,OAAOhE,IAAqB,wBAAZsmJ,GAAsD,OAAjBtmJ,EAAK05L,SAAgC,sBAAZpzC,GAAoD,OAAjBtmJ,EAAK05L,QACxH,GACC,SACHl8L,EAAK4rS,YAAY,CACfsB,KAAM,WACJvrS,EAAO+G,YAAY4sH,MACrB,EACA63K,KAAM,WACJxrS,EAAO+G,YAAY6sH,MACrB,IAEFv1H,EAAK89J,qBAAqB,YAAY,WACpC,OAxcc,SAAUn8J,GAC5B,OAAOkpS,GAASlpS,GAAQ,SAAUuC,GAChC,OAAOymS,GAAchpS,EAAOoJ,UAAW7G,EAAIwC,IAC7C,IAAG/H,MAAM,GACX,CAocayuS,CAAczrS,EACvB,GAAG+B,MACH1D,EAAK89J,qBAAqB,YAAY,WACpC,OAlcc,SAAUn8J,GAC5B,OAAOkpS,GAASlpS,GAAQ,SAAUuC,GAChC,OAAOwmS,GAAY/oS,EAAOoJ,UAAW7G,EAAIwC,IAC3C,IAAG/H,MAAM,GACX,CA8ba0uS,CAAc1rS,EACvB,GAAG+B,MACH1D,EAAK89J,qBAAqB,cAAc,WACtC,OA/bgB,SAAUn8J,GAC9B,OAAOkpS,GAASlpS,GAAQ,SAAUuC,GAChC,IAAIo0C,EAAOt7B,GAAqBrb,EAAOoJ,WACnCuiS,EAAiB9+P,GAAUtqC,GAAK,SAAUA,GAC5C,OAAOgkB,GAAOhkB,EAAK,cACrB,GAAGsU,EAAM2L,GAAIm0B,IAMb,OAAOg1P,EAAe1uS,YALF,WAClB,IAAI82Q,EAAa7sP,WAAWygB,GAAMplC,EAAK,gBACnCoyJ,EAAWztI,WAAWygB,GAAMplC,EAAK,cACrC,OAAO5G,OAAOo4Q,EAAap/G,EAC7B,GAEF,IAAG33J,MAAM,GACX,CAkba4uS,CAAgB5rS,EACzB,GAAG+B,KACL,EACO8nS,CACT,CAzZqB,GA2ZjBgC,GAA8B,2BAC9Bp6N,GAAc,SAAUlvE,EAAKqF,EAAK6H,GA19mBvB,IAAUqE,EAASmzB,EA29mB5BhlC,GAAIM,EAAKqF,KAAkB,IAAV6H,GA39mBWw3B,EA49mBhBr/B,EA39mBZk/B,GADmBhzB,EA49mBZvR,GA19mBOuR,EAAQ/O,IAAIgiC,UAClB78B,OAAO+8B,GApBN,SAAUnzB,EAASmzB,IArBnB,SAAUnzB,EAAS+yB,EAAMlsC,GACtC,IAAIkiB,EAAKm4K,EAASyzB,GAAO30M,EAAS+yB,IAAO,SAAUz+B,GACjD,OAAOA,IAAMzN,CACf,IACIkiB,EAAGzd,OAAS,EACduyE,GAAM79D,EAAS+yB,EAAMhqB,EAAGpY,KAAK,MAE7BmiB,GAAS9S,EAAS+yB,EAGtB,EAYSnb,CAAS5X,EAAS,QAASmzB,EACpC,CAoBII,CAASvzB,EAASmzB,GAXL,SAAUnzB,GACzB,IAAIizB,EAAYD,GAAShzB,GAAWA,EAAQ/O,IAAIgiC,UAlBtC,SAAUjzB,GACpB,OAAO20M,GAAO30M,EAAS,QACzB,CAgB8DqvC,CAAMrvC,GACzC,IAArBizB,EAAU3nC,QACZwnB,GAAS9S,EAAS,QAEtB,CAQE0zB,CAAW1zB,IAs9mBArE,GACTg4B,GAAMllC,EAAKqF,EAEf,EACIu0R,GAAwB,SAAUn8R,EAAQgpK,EAAKv5J,GACjD,IACEzP,EAAOqiF,SAAS/6E,YAAY0hK,GAAK,EAAOrtK,OAAO8T,GAEjD,CADE,MAAO+7F,GACT,CACF,EACIsgM,GAAqB,SAAUvpS,EAAKkN,GACtClN,EAAIwC,IAAIwvI,gBAAkB9kI,EAAQ,OAAS,OAC7C,EAqBIs8R,GAAiB,SAAU/rS,EAAQyP,GACrC,IAAIY,EAAOgL,GAAqBrb,EAAOoJ,WACvCqoE,GAAYphE,EAAM,uBAAwBZ,GACtCA,GACFzP,EAAO4E,UAAU06P,iBAAiBt6B,iBAClChlO,EAAOolP,oBAAoBs2B,gBAbL,SAAU17Q,GAClCvB,EAASC,KAAKsB,EAAO4E,UAAUC,WAAWjH,MAAK,SAAU2E,GACvDA,EAAImjB,gBAAgB,oBACtB,GACF,CAUIsmR,CAAoBhsS,GACpBA,EAAOivF,UAAW,EAClB68M,GAAmBz7R,GAAM,GA3B3B0kL,EAAOxrI,GA4BwBl5C,EA5BP,8BAA8B,SAAU9N,GAC9DovE,GAAMpvE,EAAKspS,GAA6B,QACxCC,GAAmBvpS,GAAK,EAC1B,MA2BEvC,EAAOivF,UAAW,EAClB68M,GAAmBz7R,GAAM,GAzB3B0kL,EAAOxrI,GA0BuBl5C,EA1BN,uCAAkD,SAAU9N,GAClFqkB,GAASrkB,EAAKspS,IACdC,GAAmBvpS,GAAK,EAC1B,IAwBE45R,GAAsBn8R,EAAQ,gBAAgB,GAC9Cm8R,GAAsBn8R,EAAQ,4BAA4B,GAC1Dm8R,GAAsBn8R,EAAQ,wBAAwB,GAtoejC,SAAUA,GACjC,OAAO02C,GAAS12C,IAVD,SAAUA,GACzB,IAAIujB,EAAMiB,GAAYnJ,GAAqBrb,EAAOysF,eAClD,OAAO/3C,GAAOnxB,GAAKvlB,QAAO,SAAU+O,GAClC,aArIgBvP,KADdupC,EAsIiCh6B,EAAKhI,IAtItBgiC,aAEXA,EAAUpkB,SAAS,kBAAoBokB,EAAUpkB,SAAS,0BAA4BokB,EAAUpkB,SAAS,uBAoIhEooN,GAAY/qO,EAAQ+M,EAAKhI,KAvI5C,IAC3BgiC,CAuIJ,IAAGjqC,QACL,CAK6BmvS,CAAWjsS,EACxC,CAqoeQksS,CAAmBlsS,IACrBA,EAAOkH,QArBc,SAAUlH,GACnCA,EAAO4E,UAAU6E,OAAOzJ,EAAO4E,UAAUmB,SAC3C,CAqBIomS,CAAqBnsS,GACrBA,EAAOu/J,cAEX,EACI9sJ,GAAa,SAAUzS,GACzB,OAAOA,EAAOivF,QAChB,EACIm9M,GAAkB,SAAUpsS,GAC9BA,EAAOykP,OAAOwe,mBAAmB,mBAAmB,SAAU7nE,GACxD3oL,GAAWzS,IACb+0L,EAAOqG,GAAO,SAAUvyL,GACtBA,EAAKg+B,KAAKglQ,GAA6BhjS,EAAKg+B,KAAK,oBACjDh+B,EAAKg+B,KAAK,kBAAmB,QAC/B,GAEJ,IACA7mC,EAAO6/N,WAAWojC,mBAAmB4oC,IAA6B,SAAUzwG,GACtE3oL,GAAWzS,IACb+0L,EAAOqG,GAAO,SAAUvyL,GACtBA,EAAKg+B,KAAK,kBAAmBh+B,EAAKg+B,KAAKglQ,IACzC,GAEJ,IACA7rS,EAAO6/N,WAAW0mC,YAAYslC,GAChC,EAkDIQ,GAAevxS,GAAMw7I,QAAQ,qXAAqY,KAClag2J,GAAkB,WACpB,SAASA,EAAgB7jS,GACvB1G,KAAKwqS,SAAW,CAAC,EACjBxqS,KAAK0G,SAAWA,GAAY,CAAC,EAC7B1G,KAAKwZ,MAAQxZ,KAAK0G,SAAS8S,OAASxZ,KACpCA,KAAKyqS,YAAczqS,KAAK0G,SAAS+jS,aAAejwS,CAClD,CA+GA,OA9GA+vS,EAAgBG,SAAW,SAAU/wS,GACnC,QAAS2wS,GAAa3wS,EAAK+G,cAC7B,EACA6pS,EAAgB/wS,UAAUka,KAAO,SAAU/Z,EAAM+a,GAC/C,IAAI4oE,EAAS3jF,EAAK+G,cACdgnB,EAAQymL,GAAY7wH,EAAQ5oE,GAAQ,CAAC,EAAG1U,KAAKwZ,OAC7CxZ,KAAK0G,SAASikS,YAChB3qS,KAAK0G,SAASikS,WAAWjjR,GAE3B,IAAIgc,EAAW1jC,KAAKwqS,SAASltN,GAC7B,GAAI55C,EACF,IAAK,IAAIvmC,EAAI,EAAG0Y,EAAI6tB,EAASrmC,OAAQF,EAAI0Y,EAAG1Y,IAAK,CAC/C,IAAIqO,EAAWk4B,EAASvmC,GACxB,IAAIqO,EAASqwH,QAAb,CAMA,GAHIrwH,EAASqkJ,MACX7vJ,KAAKqQ,IAAIitE,EAAQ9xE,EAASuvL,MAExBrzK,EAAMinL,gCACR,OAAOjnL,EAET,IAA8C,IAA1Clc,EAASuvL,KAAKpiM,KAAKqH,KAAKwZ,MAAOkO,GAEjC,OADAA,EAAM1U,iBACC0U,CATT,CAWF,CAEF,OAAOA,CACT,EACA6iR,EAAgB/wS,UAAU4W,GAAK,SAAUzW,EAAM6R,EAAUyiE,EAAS38C,GAIhE,IAHiB,IAAb9lB,IACFA,EAAWhR,GAETgR,EAAU,CACZ,IAAIo/R,EAAkB,CACpB7vG,KAAMvvL,EACNqwH,SAAS,GAEPvqG,GACFv4B,GAAM88L,OAAO+0G,EAAiBt5Q,GAIhC,IAFA,IAAI2lC,EAAQt9D,EAAK+G,cAAcuB,MAAM,KACjC9E,EAAI85D,EAAM55D,OACPF,KAAK,CACV,IAAI0tS,EAAc5zO,EAAM95D,GACpBumC,EAAW1jC,KAAKwqS,SAASK,GACxBnnQ,IACHA,EAAW,GACX1jC,KAAKyqS,YAAYI,GAAa,IAG9BnnQ,EADEuqC,EACSx4D,GAAc,CAACm1R,GAAkBlnQ,GAAU,GAE3CjuB,GAAcA,GAAc,GAAIiuB,GAAU,GAAO,CAACknQ,IAAkB,GAEjF5qS,KAAKwqS,SAASK,GAAennQ,CAC/B,CACF,CACA,OAAO1jC,IACT,EACAuqS,EAAgB/wS,UAAU6W,IAAM,SAAU1W,EAAM6R,GAC9C,IAAIggM,EAAQxrM,KACZ,GAAIrG,EAGF,IAFA,IAAIs9D,EAAQt9D,EAAK+G,cAAcuB,MAAM,KACjC9E,EAAI85D,EAAM55D,OACPF,KAAK,CACV,IAAI0tS,EAAc5zO,EAAM95D,GACpBumC,EAAW1jC,KAAKwqS,SAASK,GAC7B,IAAKA,EAKH,OAJAx3G,GAAOrzL,KAAKwqS,UAAU,SAAU9hM,EAAQoiM,GACtCt/F,EAAMi/F,YAAYK,GAAa,UACxBt/F,EAAMg/F,SAASM,EACxB,IACO9qS,KAET,GAAI0jC,EAAU,CACZ,GAAKl4B,EAEE,CACL,IAAIu/R,EAAmB1jJ,EAAU3jH,GAAU,SAAUjb,GACnD,OAAOA,EAAQsyK,OAASvvL,CAC1B,IACAk4B,EAAWqnQ,EAAiBv0R,KAC5BxW,KAAKwqS,SAASK,GAAennQ,EAC7BsvJ,EAAO+3G,EAAiBx0R,MAAM,SAAUkS,GACtCA,EAAQozG,SAAU,CACpB,GACF,MAVEn4F,EAASrmC,OAAS,EAWfqmC,EAASrmC,SACZ2C,KAAKyqS,YAAY9wS,GAAM,UAChBqG,KAAKwqS,SAASK,GAEzB,CACF,MAEAx3G,GAAOrzL,KAAKwqS,UAAU,SAAU9hM,EAAQ/uG,GACtC6xM,EAAMi/F,YAAY9wS,GAAM,EAC1B,IACAqG,KAAKwqS,SAAW,CAAC,EAEnB,OAAOxqS,IACT,EACAuqS,EAAgB/wS,UAAUq2J,KAAO,SAAUl2J,EAAM6R,EAAUyiE,GACzD,OAAOjuE,KAAKoQ,GAAGzW,EAAM6R,EAAUyiE,EAAS,CAAE4hF,MAAM,GAClD,EACA06I,EAAgB/wS,UAAU0G,IAAM,SAAUvG,GAExC,OADAA,EAAOA,EAAK+G,iBACFV,KAAKwqS,SAAS7wS,IAAwC,IAA/BqG,KAAKwqS,SAAS7wS,GAAM0D,OACvD,EACOktS,CACT,CAtHsB,GAwHlBS,GAAqB,SAAU7qS,GAWjC,OAVKA,EAAI8qS,mBACP9qS,EAAI8qS,iBAAmB,IAAIV,GAAgB,CACzC/wR,MAAOrZ,EACPsqS,YAAa,SAAU9wS,EAAM+T,GACvB68R,GAAgBG,SAAS/wS,IAASwG,EAAI+qS,mBACxC/qS,EAAI+qS,kBAAkBvxS,EAAM+T,EAEhC,KAGGvN,EAAI8qS,gBACb,EACIE,GAAa,CACfz3R,KAAM,SAAU/Z,EAAM+a,EAAMs5B,GAC1B,IAAI1xC,EAAO0D,KACX,GAAI1D,EAAKu/H,SAAoB,WAATliI,GAA8B,WAATA,EACvC,OAAO+a,EAET,IAAI02R,EAAiBJ,GAAmB1uS,GAAMoX,KAAK/Z,EAAM+a,GACzD,IAAe,IAAXs5B,GAAoB1xC,EAAKqlB,OAE3B,IADA,IAAIo1J,EAAWz6K,EAAKqlB,SACbo1J,IAAaq0H,EAAen0H,wBACjCF,EAASrjK,KAAK/Z,EAAMyxS,GAAgB,GACpCr0H,EAAWA,EAASp1J,SAGxB,OAAOypR,CACT,EACAh7R,GAAI,SAAUzW,EAAM6R,EAAUyiE,GAC5B,OAAO+8N,GAAmBhrS,MAAMoQ,GAAGzW,EAAM6R,EAAUyiE,EACrD,EACA59D,IAAK,SAAU1W,EAAM6R,GACnB,OAAOw/R,GAAmBhrS,MAAMqQ,IAAI1W,EAAM6R,EAC5C,EACAqkJ,KAAM,SAAUl2J,EAAM6R,GACpB,OAAOw/R,GAAmBhrS,MAAM6vJ,KAAKl2J,EAAM6R,EAC7C,EACAq5P,kBAAmB,SAAUlrQ,GAC3B,OAAOqxS,GAAmBhrS,MAAME,IAAIvG,EACtC,GAGE0xS,GAAQttF,GAASnzH,IAEjB0gN,GAAiB,SAAUrtS,EAAQ+kC,GACrC,GAAkB,oBAAdA,EACF,OAAO/kC,EAAOqiF,SAEhB,IAAKriF,EAAOmuF,QAAU,uDAAuD1qF,KAAKshC,GAChF,OAAO/kC,EAAOqiF,SAAS7+D,gBAEzB,IAAI8pR,EAAYv8E,GAAa/wN,GAC7B,OAAIstS,GACGttS,EAAOstS,YACVttS,EAAOstS,UAAYF,GAAMpoS,OAAOsoS,GAAW,IAEtCttS,EAAOstS,WAETttS,EAAOoJ,SAChB,EAIIqjQ,GAAY,SAAUzsQ,EAAQ+kC,EAAWhyB,IAH3B,SAAU/S,GAC1B,OAAQA,EAAOinS,SAAWx0R,GAAWzS,EACvC,CAEMutS,CAAYvtS,GAELyS,GAAWzS,IAzNI,SAAUA,EAAQ+S,GAC5C,GAZiB,SAAUA,GAC3B,MAAkB,UAAXA,EAAE7X,IACX,CAUMsyS,CAAaz6R,KAAO8uN,GAAG/sN,eAAe/B,GAAI,CAC5C,IAAIxQ,EAAM8Y,GAAqBtI,EAAEvM,SAVd,SAAUxG,EAAQuC,GAIvC,OAAOiqC,GAAUjqC,EAAK,KAHT,SAAUA,GACrB,OAAOigB,GAAGjgB,EAAK8Y,GAAqBrb,EAAOoJ,WAC7C,IACmCvL,MAAK,SAAU7B,GAChD,OAAOspB,GAAOtpB,EAAG,OACnB,GACF,EAIIyxS,CAAiBztS,EAAQuC,GAAK3E,MAAK,SAAU6I,GAE3C,GADAsM,EAAEgC,iBACE,KAAKtR,KAAKgD,GAAO,CACnB,IAAI0K,EAAWnR,EAAO+E,IAAIC,OAAOyB,EAAO,YArj1BvCmuF,GADqBn6E,EAsj1B6ChU,EAAM,KA7j1B3D,SAAUgU,EAAKo6E,GACnC,OAAOp6E,EAAIwoB,UAAU4xD,EACvB,CAMmCC,CAAgBr6E,EAqj1B8B,IArj1BlBrb,QAAUqb,GAqj1Be,MAC5EtJ,EAAS/R,QACXY,EAAO4E,UAAUyM,eAAeF,EAAS,IAAI,EAEjD,MACEQ,OAAOb,KAAKrK,EAAM,SAAU,wGA3j1BhB,IAAUgU,CA6j1B1B,GACF,CACF,CA2MIizR,CAAsB1tS,EAAQ+S,GAF9B/S,EAAOyV,KAAKsvB,EAAWhyB,EAI3B,EACI46R,GAAoB,SAAU3tS,EAAQ+kC,GACxC,IAAI7R,EAIJ,GAHKlzB,EAAO4tS,YACV5tS,EAAO4tS,UAAY,CAAC,IAElB5tS,EAAO4tS,UAAU7oQ,KAAc/kC,EAAO49H,QAA1C,CAGA,IAAIiwK,EAAeR,GAAertS,EAAQ+kC,GAC1C,GAAIgsL,GAAa/wN,GAAS,CAcxB,GAbK6/Q,KACHA,GAA2B,CAAC,EAC5B7/Q,EAAOknJ,cAAc/0I,GAAG,gBAAgB,WACjCnS,EAAOknJ,cAAcokF,cACpBu0C,KACFzqF,GAAOyqF,IAA0B,SAAUp1K,EAAQ/uG,GACjDsE,EAAO+E,IAAI8lB,OAAOwiR,GAAertS,EAAQtE,GAC3C,IACAmkR,GAA2B,KAGjC,KAEEA,GAAyB96O,GAC3B,OAEF7R,EAAW,SAAUngB,GAInB,IAHA,IAAIvM,EAASuM,EAAEvM,OACXsnS,EAAU9tS,EAAOknJ,cAAcjgI,MAC/B/nB,EAAI4uS,EAAQ1uS,OACTF,KAAK,CACV,IAAImR,EAAOy9R,EAAQ5uS,GAAGkK,WAClBiH,IAAS7J,GAAU4mS,GAAM5oF,UAAUh+M,EAAQ6J,KAC7Co8P,GAAUqhC,EAAQ5uS,GAAI6lC,EAAWhyB,EAErC,CACF,EACA8sQ,GAAyB96O,GAAa7R,EACtCk6Q,GAAMvvS,KAAKgwS,EAAc9oQ,EAAW7R,EACtC,MACEA,EAAW,SAAUngB,GACnB05P,GAAUzsQ,EAAQ+kC,EAAWhyB,EAC/B,EACAq6R,GAAMvvS,KAAKgwS,EAAc9oQ,EAAW7R,GACpClzB,EAAO4tS,UAAU7oQ,GAAa7R,CArChC,CAuCF,EACI66Q,GAAmBtsS,GAASA,GAAS,CAAC,EAAGyrS,IAAa,CACxD/S,0BAA2B,WACzB,IAAI97R,EAAO0D,KACXjH,GAAM8C,KAAKS,EAAK2vS,sBAAsB,SAAUtyS,GAC9CiyS,GAAkBtvS,EAAM3C,EAC1B,GACF,EACAuxS,kBAAmB,SAAUvxS,EAAM+T,GACjC,IAAIpR,EAAO0D,KACE,UAATrG,GAA6B,SAATA,IAGpB2C,EAAKu/H,UAGLnuH,EACEpR,EAAKgyJ,YACPs9I,GAAkBtvS,EAAM3C,GAEnB2C,EAAK2vS,qBAGR3vS,EAAK2vS,qBAAqBlvS,KAAKpD,GAF/B2C,EAAK2vS,qBAAuB,CAACtyS,GAKxB2C,EAAKgyJ,cACdhyJ,EAAK0G,IAAI8lB,OAAOwiR,GAAehvS,EAAM3C,GAAOA,EAAM2C,EAAKuvS,UAAUlyS,WAC1D2C,EAAKuvS,UAAUlyS,KAE1B,EACAuyS,sBAAuB,WACrB,IAAI5vS,EAAO0D,KACPsO,EAAOhS,EAAK+K,UACZrE,EAAM1G,EAAK0G,IACX1G,EAAKuvS,YACPx4G,GAAO/2L,EAAKuvS,WAAW,SAAUzyS,EAAOO,GACtC2C,EAAK0G,IAAI8lB,OAAOwiR,GAAehvS,EAAM3C,GAAOA,EAAMP,EACpD,WACOkD,EAAKuvS,YAETvvS,EAAK8vF,QAAU99E,GAAQtL,IAC1BsL,EAAK0tL,OAAS,KACdh5L,EAAI8lB,OAAOxsB,EAAKgpD,UAChBtiD,EAAI8lB,OAAOxsB,EAAKgkF,WAEdt9E,IACFA,EAAI8lB,OAAOxa,GACXtL,EAAI8lB,OAAOxsB,EAAKqvG,gBAEpB,IAGEwgM,GAAe,CACjB,SACA,YAEEC,GAAe,SAAUnuS,EAAQouS,EAAYC,EAAgB77R,GAC/D,IAAI87R,EAAUD,EAAeD,EAAWnnR,OACpCk3I,EAAUkwI,EAAe77R,GAC7B,IACE2rJ,EAAQowI,UAIV,CAHE,MAAOx7R,GAEP,YADA6I,QAAQ9N,MAAM,wCAA0C0E,EAAO,IAAKO,EAEtE,CACAu7R,EAAQE,aACJF,EAAQG,iBAAmBtwI,EAAQswI,gBACrC1C,GAAe/rS,EAAQm+J,EAAQswI,gBAEjCL,EAAW9mR,IAAI9U,GAj7hBI,SAAUxS,EAAQwS,GAC9BxS,EAAOyV,KAAK,aAAc,CAAEjD,KAAMA,GAC3C,CAg7hBEk8R,CAAe1uS,EAAQwS,EACzB,EA+DIm8R,GAAS7zS,GAAM8C,KAAMgxS,GAAY9zS,GAAM4wI,QACvCmjK,GAAgB,CAClBC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,IAAK,IACLC,IAAK,IACLC,IAAK,KAEHC,GAAgB50S,GAAMw7I,QAAQ,8BAC9Bq5J,GAAgB,SAAU9oI,GAC5B,IAAI1kK,EACAuR,EAAW,CAAC,EAChBi7R,GAAOC,GAAU/nI,EAAQpkK,cAAe,MAAM,SAAUtH,GAClDA,KAASu0S,GACXh8R,EAASvY,IAAS,EAEd,cAAcsI,KAAKtI,GACrBuY,EAASsB,QAAU+L,SAAS5lB,EAAO,KAEnCuY,EAASk8R,SAAWz0S,EAAM6pH,WAAW,GACrCtxG,EAASsB,QAAU65R,GAAc1zS,IAAUA,EAAM45F,cAAciwB,WAAW,GAGhF,IACA,IAAIrqH,EAAK,CAAC+Y,EAASsB,SACnB,IAAK7S,KAAOutS,GACNh8R,EAASvR,GACXxH,EAAGmE,KAAKqD,GAERuR,EAASvR,IAAO,EAoBpB,OAjBAuR,EAAS/Y,GAAKA,EAAG8J,KAAK,KAClBiP,EAASq9E,SACXr9E,EAASk9E,KAAM,EACX8lG,GAAI/lG,IACNj9E,EAASm9E,MAAO,EAEhBn9E,EAASo9E,OAAQ,GAGjBp9E,EAAStI,OACPsrL,GAAI/lG,IACNj9E,EAAStI,MAAO,GAEhBsI,EAASm9E,MAAO,EAChBn9E,EAAStI,MAAO,IAGbsI,CACT,EACIm8R,GAAY,WACd,SAASA,EAAU7vS,GACjB+B,KAAK2iK,UAAY,CAAC,EAClB3iK,KAAK+tS,gBAAkB,GACvB/tS,KAAK/B,OAASA,EACd,IAAI3B,EAAO0D,KACX/B,EAAOmS,GAAG,0BAA0B,SAAUY,IACvC1U,EAAK0xS,YAAYh9R,KAAM1U,EAAK2xS,cAAcj9R,IAAQA,EAAEgmK,uBACvD41H,GAAOtwS,EAAKqmK,WAAW,SAAUhxJ,GAC/B,GAAIrV,EAAK4xS,cAAcl9R,EAAGW,GAKxB,OAJArV,EAAKyxS,gBAAkBp8R,EAASw8R,YAAYr4R,MAAM,GACnC,YAAX9E,EAAE7X,MACJmD,EAAK8xS,sBAAsBz8R,IAEtB,CAEX,IACIrV,EAAK4xS,cAAcl9R,EAAG1U,EAAKyxS,gBAAgB,MACT,IAAhCzxS,EAAKyxS,gBAAgB1wS,QACR,YAAX2T,EAAE7X,MACJmD,EAAK8xS,sBAAsB9xS,EAAKyxS,gBAAgB,IAGpDzxS,EAAKyxS,gBAAgBh/M,SAG3B,GACF,CAqEA,OApEA++M,EAAUt0S,UAAUf,IAAM,SAAUqsK,EAASupI,EAAMC,EAAS90R,GAC1D,IAAIld,EAAO0D,KACP+6L,EAAOz+L,EAAKiyS,qBAAqBD,GAKrC,OAJA1B,GAAOC,GAAU9zS,GAAMyJ,KAAKsiK,KAAW,SAAUA,GAC/C,IAAInzJ,EAAWrV,EAAKkyS,eAAe1pI,EAASupI,EAAMtzG,EAAMvhL,GACxDld,EAAKqmK,UAAUhxJ,EAAS/Y,IAAM+Y,CAChC,KACO,CACT,EACAm8R,EAAUt0S,UAAU2O,OAAS,SAAU28J,GACrC,IAAInzJ,EAAW3R,KAAKwuS,eAAe1pI,GACnC,QAAI9kK,KAAK2iK,UAAUhxJ,EAAS/Y,aACnBoH,KAAK2iK,UAAUhxJ,EAAS/Y,KACxB,EAGX,EACAk1S,EAAUt0S,UAAU+0S,qBAAuB,SAAUD,GACnD,IAAIhyS,EAAO0D,KACPinK,EAAMqnI,EACV,MAAmB,iBAARrnI,EACF,WACL3qK,EAAK2B,OAAOsH,YAAY0hK,GAAK,EAAO,KACtC,EACSluK,GAAMgB,QAAQktK,GAChB,WACL3qK,EAAK2B,OAAOsH,YAAY0hK,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAC9C,EAEOA,CAEX,EACA6mI,EAAUt0S,UAAUg1S,eAAiB,SAAU1pI,EAASupI,EAAMC,EAAS90R,GACrE,IAAImpJ,EAAY5pK,GAAM6C,IAAIixS,GAAU/nI,EAAS,KAAM8oI,IAKnD,OAJAjrI,EAAUA,EAAUtlK,OAAS,GAAKtE,GAAM88L,OAAOlzB,EAAUA,EAAUtlK,OAAS,GAAI,CAC9E09L,KAAMuzG,EACN90R,MAAOA,GAASxZ,KAAK/B,SAEhBlF,GAAM88L,OAAOlzB,EAAU,GAAI,CAChC0rI,KAAMruS,KAAK/B,OAAOmoB,UAAUioR,GAC5BF,YAAaxrI,EAAU7sJ,MAAM,IAEjC,EACAg4R,EAAUt0S,UAAUw0S,YAAc,SAAUh9R,GAC1C,OAAOA,EAAEkC,QAAUlC,EAAEoC,SAAWpC,EAAEqC,OACpC,EACAy6R,EAAUt0S,UAAUy0S,cAAgB,SAAUj9R,GAC5C,MAAkB,YAAXA,EAAE7X,MAAsB6X,EAAEiC,SAAW,KAAOjC,EAAEiC,SAAW,GAClE,EACA66R,EAAUt0S,UAAU00S,cAAgB,SAAUl9R,EAAGW,GAC/C,QAAKA,GAGDA,EAASm9E,OAAS99E,EAAEoC,SAAWzB,EAAStI,OAAS2H,EAAEqC,SAGnD1B,EAASk9E,MAAQ79E,EAAEkC,QAAUvB,EAASo9E,QAAU/9E,EAAEmC,aAGlDnC,EAAEiC,UAAYtB,EAASsB,SAAWjC,EAAE68R,UAAY78R,EAAE68R,WAAal8R,EAASk8R,YAC1E78R,EAAEgC,kBACK,EAGX,EACA86R,EAAUt0S,UAAU40S,sBAAwB,SAAUz8R,GACpD,OAAOA,EAASopL,KAAOppL,EAASopL,KAAKpiM,KAAKgZ,EAAS6H,OAAS,IAC9D,EACOs0R,CACT,CAjGgB,GAqKZW,GAAQ1wF,GAASnzH,IACjB8jN,GAAW31S,GAAM88L,OAAQ84G,GAAS51S,GAAM8C,KACxC7C,GAAUD,GAAMC,QAChB47L,GAAKD,GAAIC,GACTg6G,GAAS,WACX,SAASA,EAAOh2S,EAAI8N,EAAUy+I,GAC5B,IAvEE32I,EACAwmE,EACAmpB,EACAzlG,EACA0zK,EACA1L,EACA6a,EACA9iL,EAsCAo2S,EA0BErjG,EAAQxrM,KACZA,KAAKo6P,QAAU,CAAC,EAChBp6P,KAAKqvJ,WAAa,GAClBrvJ,KAAKg5R,cAAgB,GACrBh5R,KAAK8uS,UAAY,CAAC,EAClB9uS,KAAK+uS,YAAa,EAClB/uS,KAAKmlJ,cAAgBA,EACrBnlJ,KAAK8iS,gBAAkB39I,EAAc6pJ,gBACrCN,GAAS1uS,KAAMgsS,IACfhsS,KAAK0G,SA78Qe,SAAUzI,EAAQrF,EAAIkqS,EAAiB36B,EAAyBzhQ,GACtF,IAAIsiQ,EApFmB,SAAUtiQ,EAAU9N,EAAIkqS,EAAiBrjR,EAASxhB,GACzE,IAAIgxS,EAAe,CACjBr2S,GAAIA,EACJgwQ,MAAO,SACPjB,aAAc97K,GAAenlF,EAAU,YACvC0zP,QAAS,GACT80C,kBAAmBpM,EACnBqM,yBAAyB,EACzBC,cAAc,EACdC,oBAAoB,EACpBC,cAAc,EACdC,eAAe,EACfC,oBAAoB,EACpBroC,iBAAiB,EACjB93B,QAAS,kBACTogE,QAAQ,EACR/wC,wBAAyB,oDACzB/O,kBAAmB,IACnB+/C,cAAc,EACdnrC,eAAe,EACflG,wBAAwB,EACxBvrB,QAAQ,EACRE,cAAe,oMACfE,aAAc,oMACdC,gBAAiB,QACjBlnC,cAAehuM,EAAOoN,WACtB8gM,oBAAqBluM,GAEvB,OAAOyB,GAASA,GAAS,CAAC,EAAGuvS,GAAexvR,EAAUwnP,GAAuB,CAAC,EAChF,CAuDwB0oC,CAAmBjpS,EAAU9N,EAAIkqS,EAAiBrjR,GAASxhB,GAC7E2xS,EAAgB7mC,GAAgBppP,IAAWD,GAAUC,GAASqpP,EAAiBb,EAAyBzhQ,GAI5G,OAH2C,IAAvCkpS,EAAcC,sBAlKS,SAAUhvM,EAAa+uM,GAClD,IAAItpC,EAAqBG,GAAsB5lK,GAC3C0lK,EAAoBK,GAAqBgpC,GACzCE,EAAuBvpC,EAAkBlpQ,OAAS,EAClD0yS,EAAwBzpC,EAAmBjpQ,OAAS,EACpD2yS,EAA8C,WAAxBJ,EAAchnC,MACxC,GAAIknC,GAAwBC,GAAyBC,EAAqB,CACxE,IACIC,EAAgBD,EAAsB,wBAAwC,GAC9EE,EAAiBJ,EAAuB,mBAA8BvpC,EAAkB7jQ,KAF3E,QAE8F,GAC3GytS,EAAkBJ,EAAwB,oBAA+BzpC,EAAmB5jQ,KAH/E,QAGkG,GACnHmX,QAAQ+kB,KAAK,2LAAkMqxQ,EAAgBC,EAAiBC,EAClP,CACF,CAsJIC,CAAuB1pS,EAAUkpS,GAE5BA,CACT,CAs8QoBS,CAAkBrwS,KAAMpH,EAAIoH,KAAK8iS,gBAAiB39I,EAAc6jH,gBAAiBtiQ,GAC7F1G,KAAK0G,SAASqS,SAChBosI,EAAcpsI,OAAS/Y,KAAK0G,SAASqS,QAEvC/Y,KAAK+Y,OAASosI,EAAcpsI,OACxB/Y,KAAK0G,SAAS4pS,UAChBnrJ,EAAcorJ,YAAYvwS,KAAK0G,SAAS4pS,UAE1CtwS,KAAK4rO,QAAUzmF,EAAcqrJ,QACzBxwS,KAAK0G,SAAS+pS,kBAChBxtF,GAAaA,aAAa9lB,mBAAmBn9L,KAAK0G,SAAS+pS,iBAC3D1yF,GAASnzH,IAAI6jE,iBAAiB0uC,mBAAmBn9L,KAAK0G,SAAS+pS,kBAEjExrF,GAAagB,aAAejmN,KAAK0G,SAASgqS,cAC1CzrF,GAAa91D,QAAUhK,EAAcgK,QACrCnvJ,KAAKpH,GAAKA,EACVoH,KAAK43P,UAAS,GACd53P,KAAKkvJ,gBAAkB,IAAIy8E,GAAI3rO,KAAK0G,SAASwoS,kBAAmB,CAAEjiH,SAAUjtL,KAAK4rO,UACjF5rO,KAAKwwS,QAAUxwS,KAAK4rO,QACpB5rO,KAAKosF,SAAWpsF,KAAK0G,SAAS0lF,OAC9BpsF,KAAK2iK,UAAY,IAAImrI,GAAU9tS,MAC/BA,KAAK2wS,eAAiB,IAAI7I,GAAe9nS,MACrCA,KAAK0G,SAASkqS,eAChBj8G,GAAIQ,YAAcn1L,KAAK0G,SAASkqS,aAAantS,QAAQ,WAAY,KAEnEzD,KAAKiR,GAAK,CACRC,UAzGA8jE,EAAY,CAAC,EACbmpB,EAAS,CAAC,EACVzlG,EAAQ,CAAC,EACT0zK,EAAe,CAAC,EAChB1L,EAAkB,CAAC,EACnB6a,EAAW,CAAC,EACZ9iL,EAAM,SAAUqtI,EAAY3sI,GAC9B,OAAO,SAAUQ,EAAMmV,GACrB,OAAOg3H,EAAWnsI,EAAK+G,eAAiBhB,GAASA,GAAS,CAAC,EAAGoP,GAAO,CAAE3V,KAAMA,GAC/E,CACF,EAkCI01S,EA9BG,CACLr9R,UAAW/Y,EAhBT+V,EAAU,CAAC,EAgBW,UACxBotK,sBAAuBnjL,EAAI+V,EAAS,sBACpC2C,gBAAiB1Y,EAAI+V,EAAS,gBAC9Bi3J,cAAehtK,EAAI+V,EAAS,cAC5BgqF,eAAgB//F,EAAI+V,EAAS,eAC7BkD,YAAajZ,EAAIu8E,EAAW,YAC5BikB,kBAAmBxgG,EAAIu8E,EAAW,kBAClCmzF,kBAAmB1vK,EAAIu8E,EAAW,kBAClC67N,iBAAkBp4S,EAAI0lG,EAAQ,iBAC9BtsF,eAAgBpZ,EAAI2zK,EAAc,eAClC0kI,kBAAmBr4S,EAAIioK,EAAiB,kBACxCvuJ,eAAgB1Z,EAAIioK,EAAiB,eACrCqwI,WAAYt4S,EAAI8iL,EAAU,WAC1BkpH,QAjBY,SAAU9qS,EAAM6qS,GAC5B,OAAO9rS,EAAMiB,EAAK+G,eAAiB8jS,CACrC,EAgBEpmM,OAAQ,WACN,MAAO,CACL5vF,QAASA,EACTwmE,UAAWA,EACXt8E,MAAOA,EACPylG,OAAQA,EACRiuE,aAAcA,EACd1L,gBAAiBA,EACjB6a,SAAUA,EAEd,GAMK,CACLs1H,iBAAkBhC,EAAOgC,iBACzBr/R,UAAWq9R,EAAOr9R,UAClBW,eAAgB08R,EAAO18R,eACvBN,eAAgBg9R,EAAOh9R,eACvBi/R,kBAAmBjC,EAAOiC,kBAC1BrM,QAASoK,EAAOpK,QAChBh/H,cAAeopI,EAAOppI,cACtB/zJ,YAAam9R,EAAOn9R,YACpBunF,kBAAmB41M,EAAO51M,kBAC1B83M,WAAYlC,EAAOkC,WACnBv4M,eAAgBq2M,EAAOr2M,eACvBrnF,gBAAiB09R,EAAO19R,gBACxByqK,sBAAuBizH,EAAOjzH,sBAC9BzT,kBAAmB0mI,EAAO1mI,kBAC1B/pE,OAAQywM,EAAOzwM,SA8CbqwD,sBAAkBhzJ,EAClB2uF,KAAMhwF,EACNyY,KAAMzY,EACN+hE,OAAQ/hE,EACRgiE,QAAShiE,EACT2hE,WAAYvhE,GAEd,IAhTqByD,EACnBouS,EACAC,EA+SE0E,GAjTiB/yS,EAgTV+B,KA/STqsS,EAAah2Q,GAAK,UAClBi2Q,EAAiBj2Q,GAAK,CACxB46Q,OAAQ,CACNzE,SAAUpyS,EACVqyS,WAAYryS,EACZsyS,gBAAgB,GAElBx/M,SAAU,CACRs/M,SAAUpyS,EACVqyS,WAAYryS,EACZsyS,gBAAgB,KAjZe,SAAUzuS,GACzCA,EAAO6/N,WACTusE,GAAgBpsS,GAEhBA,EAAOmS,GAAG,WAAW,WACnBi6R,GAAgBpsS,EAClB,GAEJ,CA4YEizS,CAA+BjzS,GAhXO,SAAUA,GAChDA,EAAOmS,GAAG,aAAa,SAAUY,GAC3BN,GAAWzS,IACb+S,EAAEgC,gBAEN,IACA/U,EAAOmS,GAAG,kBAAkB,SAAUY,GAChCN,GAAWzS,IACb+S,EAAEgC,gBAEN,GACF,CAsWEm+R,CAAkClzS,GAC3B,CACLyS,WAAY,WACV,OAAOA,GAAWzS,EACpB,EACAsnB,IAAK,SAAU9U,GACb,OAnDQ,SAAUxS,EAAQquS,EAAgBD,EAAY57R,GAC1D,GAAIA,IAAS47R,EAAWnnR,MAAxB,CAEO,IAAK/M,GAAMm0R,EAAgB77R,GAChC,MAAM,IAAInV,MAAM,gBAAmBmV,EAAO,gBAExCxS,EAAOqwJ,YACT89I,GAAanuS,EAAQouS,EAAYC,EAAgB77R,GAEjDxS,EAAOmS,GAAG,QAAQ,WAChB,OAAOg8R,GAAanuS,EAAQouS,EAAYC,EAAgB77R,EAC1D,GANF,CAQF,CAsCa88E,CAAQtvF,EAAQquS,EAAepnR,MAAOmnR,EAAY57R,EAC3D,EACAyU,IAAK,WACH,OAAOmnR,EAAWnnR,KACpB,EACAtR,SAAU,SAAUnD,EAAMvD,GACxBo/R,EAAe/mR,IA3CF,SAAU+mR,EAAgB77R,EAAMvD,GACjD,IAAIwB,EACJ,GAAIokL,EAAWq5G,GAAc17R,GAC3B,MAAM,IAAInV,MAAM,gCAAkCmV,GAEpD,OAAO/Q,GAASA,GAAS,CAAC,EAAG4sS,KAAkB59R,EAAK,CAAC,GAAM+B,GAAQ/Q,GAASA,GAAS,CAAC,EAAGwN,GAAM,CAC7Fu/R,WAAY,WACV,IACEv/R,EAAIu/R,YAGN,CAFE,MAAOz7R,GACP6I,QAAQ9N,MAAM,0CAA4C0E,EAAO,IAAKO,EACxE,CACF,IACEtC,GACN,CA6ByB0iS,CAAa9E,EAAepnR,MAAOzU,EAAMvD,GAC9D,IAsRAlN,KAAKyQ,KAAOugS,EACZhxS,KAAKutF,QAAUyjN,EAAazrR,IAC5B4/H,EAAczxI,KAAK,cAAe,CAAEzV,OAAQ+B,OAC5CA,KAAKw4R,aAAa,QAASx4R,MAC3BA,KAAKqP,EAAI0rM,GAASsC,kBAAiB,WACjC,MAAO,CACLj7H,QAASopH,EAAMp/G,OAASo/G,EAAMnkM,UAAYmkM,EAAMlrH,SAChDvuE,QAASy5L,EAAMnkM,UAEnB,GACF,CAoSA,OAnSAunS,EAAOp1S,UAAUwjG,OAAS,YAn6Cf,SAAU/+F,GACrB,IAAIrF,EAAKqF,EAAOrF,GAChBurN,GAAKC,QAAQuK,GAAgB1wN,IAC7B,IAAIuxM,EAAe,WACjB21F,GAAMr8Q,OAAOlZ,OAAQ,QAAS4/L,GAC9BvxM,EAAO++F,QACT,EACA,GAAK0yG,GAAWzB,MAAMsB,WAItB,GAAKtxM,EAAOysF,cAGPiqG,GAAIniD,gBAAT,CAGA,IAAIzgI,EAAUuH,GAAqBrb,EAAOysF,cACtC78C,EA7xxBQ,SAAU97B,GACtB,OAAO6E,EAAM7E,EAAQ/O,IAAIu/B,YAAY,SAAU19B,EAAKigC,GAElD,OADAjgC,EAAIigC,EAAKnrC,MAAQmrC,EAAK1rC,MACfyL,CACT,GAAG,CAAC,EACN,CAwxxBiBwsS,CAAQt/R,GACvB9T,EAAOmS,GAAG,UAAU,WAClBuG,EAAM5E,EAAQ/O,IAAIu/B,YAAY,SAAUuC,GACtC,OAAOjgB,GAAS9S,EAAS+yB,EAAKnrC,KAChC,IACA0pB,GAAStR,EAAS87B,EACpB,IACA5vC,EAAOgT,GAAGw9I,iBA/Bc,SAAU18I,EAAS9T,GAC3C,OAAOy6H,GAAS2kE,WAAWtrL,EAAS,CAClC0qL,eAAgB2yB,GAAkBnxN,GAClCy+L,eAAgBgyB,GAAkBzwN,IAEtC,CA0B+BqzS,CAAoBv/R,EAAS9T,GAnpjB7C,SAAUA,GACvB,OAAOA,EAAOE,SAAS,SACzB,CAkpjBO4wJ,CAAS9wJ,GAIZA,EAAOmuF,QAAS,GAHhBnuF,EAAOs+R,cAAgBt+R,EAAOysF,aAAavxE,MAAMmiI,WACjDr9I,EAAOysF,aAAavxE,MAAMmiI,WAAa,UAIzC,IAAI9gC,EAAOv8G,EAAOysF,aAAa8vB,MAAQ2qL,GAAMjiS,UAAUtK,EAAI,QACvD4hH,IACFv8G,EAAOszS,YAAc/2L,EAzpjBJ,SAAUv8G,GAC7B,OAAOA,EAAOE,SAAS,eACzB,CAwpjBQqzS,CAAevzS,KAAYw6L,GAAkBx6L,EAAOysF,gBACtDy6M,GAAMzjF,YAAYyjF,GAAM98R,OAAO,QAAS,CACtClP,KAAM,SACNQ,KAAMf,IACJA,GACJqF,EAAOuzS,gBAAiB,GAE1BvzS,EAAOwzS,kBAAoB,SAAUzgS,GACnC/S,EAAOyV,KAAK1C,EAAE7X,KAAM6X,EACtB,EACAm0R,GAAMrpS,KAAK0+G,EAAM,eAAgBv8G,EAAOwzS,mBACxCxzS,EAAOmS,GAAG,SAAS,WACjBnS,EAAOyzS,cACT,KApqjBoB,SAAUzzS,GAChC,OAAOA,EAAOE,SAAS,eACzB,CAmqjBQwzS,CAAkB1zS,IAAYu8G,EAAKkjE,OAAOz5K,UAAau2G,EAAKkjE,OAAOrgL,QAAWm9G,EAAKo3L,gBACrFp3L,EAAKo3L,cAAgBp3L,EAAKkjE,OAC1BljE,EAAKkjE,OAAS,WAGZ,OAFAz/K,EAAOknJ,cAAc0sJ,cACrB5zS,EAAO25P,UAAS,GACTp9I,EAAKo3L,cAAcp3L,EAC5B,IAGJv8G,EAAOuP,cAAgBy9P,GAAchtQ,GACrCA,EAAO4tQ,oBAAsBzB,GAAoBnsQ,GA5qjB/B,SAAUA,GAC5B,MAAuC,QAAhCA,EAAOE,SAAS,WACzB,CA2qjBM2zS,CAAc7zS,IAChBA,EAAOmS,GAAG,cAAc,SAAUY,GAC5BA,EAAE+gS,OACJ/gS,EAAE6sB,QAAUsnQ,GAAMz/R,OAAOsL,EAAE6sB,SAE/B,IA/qjB6B,SAAU5/B,GACzC,OAAOA,EAAOE,SAAS,0BACzB,CA+qjBM6zS,CAA2B/zS,IAC7BA,EAAOmS,GAAG,UAAU,WACdnS,EAAOqwJ,aACTrwJ,EAAO8zS,MAEX,IAnrjByB,SAAU9zS,GACrC,OAAOA,EAAOE,SAAS,qBACzB,CAmrjBM8zS,CAAuBh0S,KACzBA,EAAOi0S,cAAgB,YACjBj0S,EAAOqwJ,aAAgBrwJ,EAAO06R,WAAc16R,EAAO83K,YACrD93K,EAAO8zS,KAAK,CACVvuS,OAAQ,MACRqhP,WAAW,EACXstD,WAAW,GAGjB,EACAl0S,EAAOknJ,cAAc/0I,GAAG,eAAgBnS,EAAOi0S,gBAEjDj0S,EAAOknJ,cAAc1sJ,IAAIwF,GACzB0lN,GAAY1lN,EAAQA,EAAO8a,OAvE3B,OAREosR,GAAMrpS,KAAK8T,OAAQ,QAAS4/L,EAgFhC,CA40CIxyG,CAAOh9F,KACT,EACA4uS,EAAOp1S,UAAU2L,MAAQ,SAAUujS,GACjC1oS,KAAKuF,YAAY,YAAY,EAAOmjS,EACtC,EACAkG,EAAOp1S,UAAUm7C,SAAW,WAC1B,OAAOA,GAAS30C,KAClB,EACA4uS,EAAOp1S,UAAUg/R,aAAe,SAAU7+R,GAExC,IADA,IAAIL,EAAI,GACCqb,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCrb,EAAEqb,EAAK,GAAK9U,UAAU8U,GAExB,IACoC6E,EADhCld,EAAO0D,KACPwL,EAAWlP,EAAKoK,SAAS/M,GAC7B,GAAK6R,EAiBL,OAdIlP,EAAK81S,iBAAmB54R,EAAQld,EAAK81S,eAAez4S,MACtD6R,EAAWgO,EAAMuhL,KACjBvhL,EAAQA,EAAMA,OAEQ,iBAAbhO,IAETgO,GADAA,EAAQhO,EAAS/H,QAAQ,SAAU,KACnBzK,GAAQwgB,GAAS,EACjChO,EAAWxS,GAAQwS,GACnBlP,EAAK81S,eAAiB91S,EAAK81S,gBAAkB,CAAC,EAC9C91S,EAAK81S,eAAez4S,GAAQ,CAC1BohM,KAAMvvL,EACNgO,MAAOA,IAGJhO,EAASlO,MAAMkc,GAASld,EAAMhD,EACvC,EACAs1S,EAAOp1S,UAAU4sB,UAAY,SAAUnnB,GACrC,OAAOklN,GAAK/9L,UAAUnnB,EACxB,EACA2vS,EAAOp1S,UAAU2E,SAAW,SAAUxE,EAAM0kN,EAAYllN,GACtD,OAngRW,SAAU8E,EAAQtE,EAAM0kN,EAAYllN,GACjD,IANwB2G,EAMpB1G,EAAQO,KAAQsE,EAAOyI,SAAWzI,EAAOyI,SAAS/M,GAAQ0kN,EAC9D,MAAa,SAATllN,EAvBe,SAAUC,GAC7B,IAAI6S,EAAS,CAAC,EAad,MAZqB,iBAAV7S,EACT45L,EAAO55L,EAAMyD,QAAQ,KAAO,EAAIzD,EAAM6I,MAAM,6BAA+B7I,EAAM6I,MAAM,MAAM,SAAUE,GACrG,IAAI3E,EAAM2E,EAAIF,MAAM,KAChBzE,EAAIH,OAAS,EACf4O,EAAOlT,GAAMyJ,KAAKhF,EAAI,KAAOzE,GAAMyJ,KAAKhF,EAAI,IAE5CyO,EAAOlT,GAAMyJ,KAAKhF,EAAI,KAAOzE,GAAMyJ,KAAKhF,EAAI,GAEhD,IAEAyO,EAAS7S,EAEJ6S,CACT,CASWomS,CAAej5S,GACJ,WAATD,EACFowQ,GAAY72E,EAAYz0L,EAAQtE,GAAMsB,MAAMojN,GACjC,WAATllN,EACFowQ,GAAYl1P,EAAUpW,EAAQtE,GAAMsB,MAAMojN,GAC/B,YAATllN,EACFowQ,GAAYrvQ,EAAW+D,EAAQtE,GAAMsB,MAAMojN,GAChC,WAATllN,EACFowQ,GAAYt1P,EAAUhW,EAAQtE,GAAMsB,MAAMojN,GAC/B,UAATllN,EACFowQ,GAAY52E,EAAW10L,EAAQtE,GAAMsB,MAAMojN,GAChC,aAATllN,EACFowQ,IApBezpQ,EAoBO4yL,EAnBxB,SAAUz4L,GACf,OAAO04L,EAAU14L,IAAM+B,GAAO/B,EAAG6F,EACnC,GAiB4C7B,EAAQtE,GAAMsB,MAAMojN,GAC5C,aAATllN,EACFowQ,GAAYpvQ,EAAY8D,EAAQtE,GAAMsB,MAAMojN,GAE5CjlN,CAEX,CA8+QW+E,CAAS6B,KAAMrG,EAAM0kN,EAAYllN,EAC1C,EACAy1S,EAAOp1S,UAAUoN,UAAY,SAAUjN,EAAMkrH,GAE3C,SADgBiuE,EAAWu8B,GAAWrvN,MAAMiC,MAAM,QAAStI,IAElDkrH,QAAqCppH,IAA5B+qN,GAActhM,IAAIvrB,GAItC,EACAi1S,EAAOp1S,UAAUgkK,YAAc,SAAU9oJ,GACvC1U,KAAKs/R,sBAAsB9hI,YAAY9oJ,EACzC,EACAk6R,EAAOp1S,UAAUga,WAAa,SAAU7Z,EAAM6R,EAAUgO,GACtDxZ,KAAK2wS,eAAen9R,WAAW7Z,EAAM6R,EAAUgO,EACjD,EACAo1R,EAAOp1S,UAAUmgL,qBAAuB,SAAUhgL,EAAM6R,EAAUgO,GAChExZ,KAAK2wS,eAAeh3H,qBAAqBhgL,EAAM6R,EAAUgO,EAC3D,EACAo1R,EAAOp1S,UAAU4gK,qBAAuB,SAAUzgK,EAAM6R,EAAUgO,GAChExZ,KAAK2wS,eAAev2I,qBAAqBzgK,EAAM6R,EAAUgO,EAC3D,EACAo1R,EAAOp1S,UAAUqa,YAAc,SAAUixJ,EAASupI,EAAMC,EAAS90R,GAC/DxZ,KAAK2iK,UAAUlqK,IAAIqsK,EAASupI,EAAMC,EAAS90R,EAC7C,EACAo1R,EAAOp1S,UAAU+L,YAAc,SAAU0hK,EAAKh2J,EAAI7X,EAAOsb,GACvD,OAAO1U,KAAK2wS,eAAeprS,YAAY0hK,EAAKh2J,EAAI7X,EAAOsb,EACzD,EACAk6R,EAAOp1S,UAAU2sK,kBAAoB,SAAUc,GAC7C,OAAOjnK,KAAK2wS,eAAexqI,kBAAkBc,EAC/C,EACA2nI,EAAOp1S,UAAU84J,kBAAoB,SAAU2U,GAC7C,OAAOjnK,KAAK2wS,eAAer+I,kBAAkB2U,EAC/C,EACA2nI,EAAOp1S,UAAUkiS,sBAAwB,SAAUz0H,GACjD,OAAOjnK,KAAK2wS,eAAejV,sBAAsBz0H,EACnD,EACA2nI,EAAOp1S,UAAU4wF,KAAO,WACtB,IAAI9tF,EAAO0D,KACP1D,EAAK4oS,SACP5oS,EAAK4oS,QAAS,EACV5oS,EAAK8vF,OACP9vF,EAAK+K,UAAUmrI,gBAAkB,QAEjCi8J,GAAMrkN,KAAK9tF,EAAKqvG,gBAChB8iM,GAAM57R,KAAKvW,EAAK1D,KAElB0D,EAAK4zE,OACL5zE,EAAKoX,KAAK,QAEd,EACAk7R,EAAOp1S,UAAUqZ,KAAO,WACtB,IAAIvW,EAAO0D,KAAMijB,EAAM3mB,EAAKgkF,SACvBhkF,EAAK4oS,SACJtwG,IAAM3xK,IAAQ3mB,EAAK8vF,QACrBnpE,EAAI1d,YAAY,aAElBjJ,EAAKy1S,OACDz1S,EAAK8vF,QACP9vF,EAAK+K,UAAUmrI,gBAAkB,QAC7Bl2I,IAASA,EAAK6oJ,cAAcikF,gBAC9B9sO,EAAK6oJ,cAAcikF,cAAgB,QAGrCqlE,GAAM57R,KAAKvW,EAAKqvG,gBAChB8iM,GAAM/tF,SAASpkN,EAAK1D,GAAI,UAAW0D,EAAKynS,aAE1CznS,EAAK4oS,QAAS,EACd5oS,EAAKoX,KAAK,QAEd,EACAk7R,EAAOp1S,UAAUu8K,SAAW,WAC1B,QAAS/1K,KAAKklS,MAChB,EACA0J,EAAOp1S,UAAUqoS,iBAAmB,SAAUn0R,EAAOwxB,GACnDl/B,KAAK0T,KAAK,gBAAiB,CACzBhG,MAAOA,EACPwxB,KAAMA,GAEV,EACA0vQ,EAAOp1S,UAAU02E,KAAO,SAAUx7D,GAChC,IAC6B6E,EADzBjd,EAAO0D,KACPQ,EAAMlE,EAAKouF,aACf,GAAIpuF,EAAKu/H,QACP,MAAO,GAET,GAAIr7H,EAAK,EACPkU,EAAOA,GAAQ,CAAC,GACXw7D,MAAO,EACZ,IAAI92E,EAAQq/L,GAAkBj4L,GAAOA,EAAIpH,MAAQoH,EAAIkZ,UAOrD,OANAH,EAAOjd,EAAKozD,WAAWt2D,EAAOsb,GAC9BA,EAAK3C,QAAUvR,EACVkU,EAAKmwO,WACRvoP,EAAKoX,KAAK,cAAegB,GAE3BA,EAAK3C,QAAUvR,EAAM,KACd+Y,CACT,CACF,EACAq1R,EAAOp1S,UAAUu4S,KAAO,SAAUr9R,GAChC,IAC6B6E,EAAMihG,EAD/Bl+G,EAAO0D,KACPQ,EAAMlE,EAAKouF,aACf,GAAKlqF,GAAQlE,EAAKgyJ,cAAehyJ,EAAKu/H,QAiCtC,OA9BAnnH,EAAOA,GAAQ,CAAC,GACXq9R,MAAO,EACZr9R,EAAK3C,QAAUvR,EACRkU,EAAKmpB,QAAUvhC,EAAKiH,WAAWmR,GACjCA,EAAKmwO,WACRvoP,EAAKoX,KAAK,cAAegB,GAEP,QAAhBA,EAAKlR,QACPlH,EAAKoX,KAAK,iBAAkBgB,GAE9B6E,EAAO7E,EAAKmpB,QACP46J,GAAkBj4L,GAarBA,EAAIpH,MAAQmgB,IAZR7E,EAAK49R,aAAgBh2S,EAAK8vF,SAC5B5rF,EAAIkZ,UAAYH,IAEdihG,EAAOi0L,GAAMvrS,UAAU5G,EAAK1D,GAAI,UAClC+1S,GAAOn0L,EAAKn5G,UAAU,SAAUb,GAC9B,GAAIA,EAAI7G,OAAS2C,EAAK1D,GAEpB,OADA4H,EAAIpH,MAAQmgB,GACL,CAEX,KAKJ7E,EAAK3C,QAAUvR,EAAM,MACE,IAAnBkU,EAAKy9R,WACP71S,EAAKs7P,UAAS,GAETr+O,CACT,EACAq1R,EAAOp1S,UAAUk2D,WAAa,SAAU7xB,EAASnpB,GAC/C,OAAOg7C,GAAW1vD,KAAM69B,EAASnpB,EACnC,EACAk6R,EAAOp1S,UAAU+J,WAAa,SAAUmR,GACtC,OA19Ra,SAAUzW,EAAQyW,GAKjC,YAJa,IAATA,IACFA,EAAO,CAAC,GAnsDO,SAAUzW,EAAQyW,EAAMlR,GACzC,OAAO62P,GAA2Bp8P,GAAQA,OAAOsF,WAAWmR,EAAMlR,EACpE,CAosDS+uS,CAAat0S,EAAQyW,EADfA,EAAKlR,OAASkR,EAAKlR,OALd,OAOpB,CAo9RWD,CAAWvD,KAAM0U,EAC1B,EACAk6R,EAAOp1S,UAAUgM,cAAgB,SAAUq4B,EAASnpB,GAC9CA,IACFmpB,EAAU6wQ,GAAS,CAAE7wQ,QAASA,GAAWnpB,IAE3C1U,KAAKuF,YAAY,oBAAoB,EAAOs4B,EAC9C,EACA+wQ,EAAOp1S,UAAUk4S,aAAe,SAAUc,QACjB/2S,IAAnB+2S,EACF9iP,GAAW1vD,KAAMA,KAAKm8R,aAAc,CAAE34R,OAAQ,QAE9CksD,GAAW1vD,KAAMwyS,GAEnBxyS,KAAKgF,YAAYsnD,QACjBtsD,KAAK43P,UAAS,GACd53P,KAAKw9J,aACP,EACAoxI,EAAOp1S,UAAUi6Q,QAAU,WACzB,OAAQzzQ,KAAK+uS,UACf,EACAH,EAAOp1S,UAAUo+P,SAAW,SAAUlqP,GACpC,IAAI+kS,GAAYzyS,KAAK+uS,WACrB/uS,KAAK+uS,YAAcrhS,EACfA,GAASA,IAAU+kS,GACrBzyS,KAAK0T,KAAK,QAEd,EACAk7R,EAAOp1S,UAAUmyG,aAAe,WAC9B,IAAIrvG,EAAO0D,KAIX,OAHK1D,EAAK6hC,YACR7hC,EAAK6hC,UAAYswQ,GAAMvpR,IAAI5oB,EAAK4/I,iBAAmB5/I,EAAK1D,GAAK,YAExD0D,EAAK6hC,SACd,EACAywQ,EAAOp1S,UAAU21I,wBAA0B,WACzC,OAAOnvI,KAAKy8R,oBACd,EACAmS,EAAOp1S,UAAUkxF,WAAa,WAI5B,OAHK1qF,KAAKklJ,YACRllJ,KAAKklJ,UAAYupJ,GAAMvpR,IAAIllB,KAAKpH,KAE3BoH,KAAKklJ,SACd,EACA0pJ,EAAOp1S,UAAU8rD,OAAS,WACxB,IACI9kD,EADAlE,EAAO0D,KAQX,OANK1D,EAAKmrI,gBACRjnI,EAAMlE,EAAKipJ,iBAETjpJ,EAAKmrI,cAAgBjnI,EAAIinI,eAGtBnrI,EAAKmrI,aACd,EACAmnK,EAAOp1S,UAAU8mF,OAAS,WACxB,IACI75D,EADAnqB,EAAO0D,KAQX,OANK1D,EAAK0gN,kBACRv2L,EAAMnqB,EAAKgpD,YAEThpD,EAAK0gN,gBAAkBv2L,EAAIlX,UAGxBjT,EAAK0gN,eACd,EACA4xF,EAAOp1S,UAAU6N,QAAU,WACzB,IAAI4b,EAAMjjB,KAAKsgF,SACf,OAAOtgF,KAAK8uI,cAAgB7rH,EAAMA,EAAI3U,KAAO,KAC/C,EACAsgS,EAAOp1S,UAAU6R,WAAa,SAAU5J,EAAK9H,EAAM6G,GACjD,IAAIlE,EAAO0D,KAAM0G,EAAWpK,EAAKoK,SACjC,OAAIA,EAASgsS,sBACJp2S,EAAKk8R,aAAa,wBAAyB/2R,EAAKjB,GAAK,EAAM7G,IAE/D+M,EAAS4oS,cAAgB9uS,GAAwB,SAAjBA,EAAIC,UAAgD,IAAzBgB,EAAI5E,QAAQ,UAAiC,IAAf4E,EAAIpE,OACzFoE,EAELiF,EAAS6oS,cACJjzS,EAAK4yJ,gBAAgB69E,WAAWtrO,GAEzCA,EAAMnF,EAAK4yJ,gBAAgBpsG,WAAWrhD,EAAKiF,EAAS8oS,mBAEtD,EACAZ,EAAOp1S,UAAU4qP,UAAY,SAAU5jP,IAjlDzB,SAAUvC,EAAQuC,IAlpShB,SAAUvC,EAAQuC,GAC3B+5P,GAAwBt8P,GAAQA,OAAOmmP,UAAU5jP,EAC1D,EAipSSmyS,CAAY10S,EAAQuC,EAC7B,CAglDI4jP,CAAUpkP,KAAMQ,EAClB,EACAouS,EAAOp1S,UAAU2O,OAAS,YAvgSf,SAAUlK,GACrB,IAAKA,EAAO49H,QAAS,CACnB,IAAIwnH,EAAsBplP,EAAOolP,oBAAqB60C,EAAej6R,EAAOi6R,aACxE5pR,EAAOrQ,EAAOoJ,UACd0K,EAAU9T,EAAOysF,aACjBp8E,GACFrQ,EAAO8zS,KAAK,CAAEO,aAAa,IAE7Br0S,EAAO49H,SAAU,EACjB59H,EAAOiuS,wBACHjuS,EAAOuzS,gBAAkBz/R,GAC3Bq0P,GAAMj+P,OAAO4J,EAAQqX,aApiRV,SAAUnrB,GAClBA,EAAOyV,KAAK,SACrB,CAoiRIk/R,CAAW30S,GACXA,EAAOknJ,cAAch9I,OAAOlK,IACvBA,EAAOmuF,QAAU99E,GAzCE,SAAUrQ,GACpCmoQ,GAAM1lD,SAASziN,EAAOrF,GAAI,UAAWqF,EAAO8lS,WAC9C,CAwCM8O,CAAsB50S,GAtiRX,SAAUA,GAClBA,EAAOyV,KAAK,SACrB,CAsiRIo/R,CAAW70S,GACXmoQ,GAAMj+P,OAAOlK,EAAO0tG,gBACpB06J,GAAYhjB,GACZgjB,GAAY6xB,GACZj6R,EAAOw8C,SACT,CACF,CAg/RItyC,CAAOnI,KACT,EACA4uS,EAAOp1S,UAAUihD,QAAU,SAAUs4P,IAj/RzB,SAAU90S,EAAQ80S,GAC9B,IAAIlwS,EAAY5E,EAAO4E,UAAWG,EAAM/E,EAAO+E,IAC3C/E,EAAO06R,YAGNoa,GAAc90S,EAAO49H,SAIrBk3K,IACH90S,EAAOknJ,cAAc90I,IAAI,eAAgBpS,EAAOi0S,eAC5Cj0S,EAAO2qQ,OAAS3qQ,EAAO2qQ,MAAMnuN,SAC/Bx8C,EAAO2qQ,MAAMnuN,UAEf4rN,GAAYxjQ,GACZwjQ,GAAYrjQ,IAlDE,SAAU/E,GAC1B,IAAIu8G,EAAOv8G,EAAOszS,YACd/2L,IACEA,EAAKo3L,gBACPp3L,EAAKkjE,OAASljE,EAAKo3L,cACnBp3L,EAAKo3L,cAAgB,MAEvBxrC,GAAMt9O,OAAO0xF,EAAM,eAAgBv8G,EAAOwzS,mBAE9C,CA2CEuB,CAAY/0S,GA5DW,SAAUA,GACjCA,EAAOw+R,qBAAuBx+R,EAAOszS,YAActzS,EAAOkgC,UAAYlgC,EAAOi+I,gBAAkB,KAC/Fj+I,EAAO6wI,YAAc7wI,EAAO++M,gBAAkB/+M,EAAOwpI,cAAgB,KACrExpI,EAAOsnJ,cAAgBtnJ,EAAOinJ,UAAY,KACtCjnJ,EAAO4E,YACT5E,EAAO4E,UAAY5E,EAAO4E,UAAU4jB,IAAMxoB,EAAO4E,UAAUG,IAAM/E,EAAO4E,UAAUG,IAAIigB,IAAM,KAEhG,CAsDEgwR,CAAmBh1S,GACnBA,EAAO06R,WAAY,GAbjB16R,EAAOkK,SAcX,CA89RIsyC,CAAQz6C,KAAM+yS,EAChB,EACAnE,EAAOp1S,UAAUqkS,aAAe,SAAUryR,GACxC,OAAOxL,KAAKk4R,aAAa2F,aAAaryR,EACxC,EACAojS,EAAOp1S,UAAU05S,eAAiB,WAChC,OAAOlzS,KAAKk4R,aAAa4F,eAC3B,EACA8Q,EAAOp1S,UAAUgY,UAAY,WAC3B,MAAM,IAAIlW,MAAM,uKAClB,EACAszS,EAAOp1S,UAAUu3S,WAAa,WAC5B,MAAM,IAAIz1S,MAAM,8FAClB,EACAszS,EAAOp1S,UAAUkY,YAAc,WAC7B,MAAM,IAAIpW,MAAM,gGAClB,EACAszS,EAAOp1S,UAAUs3S,kBAAoB,WACnC,MAAM,IAAIx1S,MAAM,4GAClB,EACOszS,CACT,CA9Va,GAgWThkN,GAAMmzH,GAASnzH,IACf++C,GAAU5wI,GAAM4wI,QAAS7kI,GAAS/L,GAAM8C,KAAMs3S,GAAWp6S,GAAM88L,OAC/Du9G,GAAkB,EAAGC,IAAoB,EAEzCC,GAAgB,GAChBvH,GAAU,GAIVwH,GAAsB,SAAUviS,GAClC,IAAI7X,EAAO6X,EAAE7X,KACb2L,GAAO0uS,GAActuR,OAAO,SAAUjnB,GACpC,OAAQ9E,GACR,IAAK,SACH8E,EAAOyV,KAAK,eAAgB1C,GAC5B,MACF,IAAK,SACH/S,EAAOyV,KAAK,eAAgB1C,GAGhC,GACF,EACIyiS,GAAqB,SAAU/lS,GAC7BA,IAAU2lS,KACR3lS,EACFqtM,GAASnrM,QAAQQ,GAAG,gBAAiBmjS,IAErCx4F,GAASnrM,QAAQS,IAAI,gBAAiBkjS,IAExCF,GAAoB3lS,EAExB,EACIgmS,GAAuB,SAAUC,GACnC,IAAIC,EAAa7H,UACVuH,GAAcK,EAAa/6S,IAClC,IAAK,IAAIuE,EAAI,EAAGA,EAAIm2S,GAAcj2S,OAAQF,IACxC,GAAIm2S,GAAcn2S,KAAOw2S,EAAc,CACrCL,GAAc/8M,OAAOp5F,EAAG,GACxB,KACF,CAWF,OATA4uS,GAAU94G,EAAS84G,IAAS,SAAU9tS,GACpC,OAAO01S,IAAiB11S,CAC1B,IACIu1S,GAAcjqE,eAAiBoqE,IACjCH,GAAcjqE,aAAewiE,GAAQ1uS,OAAS,EAAI0uS,GAAQ,GAAK,MAE7DyH,GAAcpqE,gBAAkBuqE,IAClCH,GAAcpqE,cAAgB,MAEzBwqE,EAAWv2S,SAAW0uS,GAAQ1uS,MACvC,EAWIw2S,GAAuC,eAAxBtkS,SAASukS,WACxBN,GAAgB9zS,GAASA,GAAS,CAAC,EAAGyrS,IAAa,CACrDqF,QAAS,KACTrhJ,QAAS,KACT65G,gBAAiB,CAAC,EAClBgmC,gBAAiB,KACjBj2R,OAAQ,KACR1J,EAAG0rM,GACHg5F,aAAc,IACdC,aAAc,OACdC,YAAa,aACblI,QAASuH,GACTY,KAAM/vF,GACNolB,aAAc,KACdH,cAAe,KACf1iO,SAAU,CAAC,EACXoN,MAAO,WACL,IACIq7I,EAAS6/I,EADT1yS,EAAO0D,KACmB+Y,EAAS,GACvCi2R,EAAkBrjE,GAAIe,mBAAmBn9N,SAASyhK,UAC9C,yBAAyBtvK,KAAKstS,KAChCA,EAAkBA,EAAgBvrS,QAAQ,WAAY,IAAIA,QAAQ,gBAAiB,IAC9E,UAAU/B,KAAKstS,KAClBA,GAAmB,MAGvB,IApygBoB7pJ,EAoygBhBo0I,EAAU3pR,OAAOrX,SAAWqX,OAAOukS,eACvC,GAAI5a,EACFpqI,EAAUoqI,EAAQ/hQ,MAAQ+hQ,EAAQpqI,QAClCp2I,EAASwgR,EAAQxgR,WACZ,CAEL,IADA,IAAI6qM,EAAUr0M,SAASuwL,qBAAqB,UACnC3iM,EAAI,EAAGA,EAAIymN,EAAQvmN,OAAQF,IAAK,CACvC,IAAI+0F,EACJ,GAAY,MADRA,EAAM0xH,EAAQzmN,GAAG+0F,KAAO,IAC5B,CAGA,IAAIkiN,EAAYliN,EAAIhxD,UAAUgxD,EAAI1Q,YAAY,MAC9C,GAAI,8CAA8C9/E,KAAKwwF,GAAM,EACxB,IAA/BkiN,EAAUv3S,QAAQ,UACpBkc,EAAS,QAEXo2I,EAAUj9D,EAAIhxD,UAAU,EAAGgxD,EAAI1Q,YAAY,MAC3C,KACF,CARA,CASF,EACK2tE,GAAW5/I,SAAS8kS,iBAEM,KADzBniN,EAAM3iF,SAAS8kS,cAAcniN,KACzBr1F,QAAQ,UACdkc,EAAS,QAEXo2I,EAAUj9D,EAAIhxD,UAAU,EAAGgxD,EAAI1Q,YAAY,MAE/C,CACAllF,EAAK6yJ,QAAU,IAAIw8E,GAAIqjE,GAAiBlsP,WAAWqsG,GACnD7yJ,EAAK0yS,gBAAkBA,EACvB1yS,EAAKk0S,QAAU,IAAI7kE,GAAIrvO,EAAK6yJ,SAC5B7yJ,EAAKyc,OAASA,GAn0gBMosI,EAo0gBZ7oJ,GAn0gBI8T,GAAG,YAAa0E,EAAMq0N,GAAkBhkF,IACtDA,EAAc/0I,GAAG,eAAgB0E,EAAM00N,GAA0BrkF,GAm0gBjE,EACAk4D,iBAAkB,SAAU2rD,GAC1B,IAAIzjD,EAAUyjD,EAAgBsnC,SAC1B/qF,GACFvlN,KAAKuwS,YAAYhrF,GAEnB,IAAIxsM,EAASiwP,EAAgBjwP,OACzBiwP,EAAgBjwP,SAClB/Y,KAAK+Y,OAASA,GAEhB/Y,KAAKgpQ,gBAAkBA,EACvB,IAAIsrC,EAAiBtrC,EAAgBurC,sBACd94S,IAAnB64S,GACFjhH,GAAOihH,GAAgB,SAAUE,EAAeluF,GAC9CrB,GAAauB,cAAc1pB,KAAKwpB,GAAckuF,CAChD,GAEJ,EACAxyQ,KAAM,SAAUt7B,GACd,IACI8pB,EADAl0B,EAAO0D,KAEPy0S,EAAuB17S,GAAMw7I,QAAQ,6MAAmN,KAIxPmgK,EAAW,SAAUl0S,GACvB,IAAI5H,EAAK4H,EAAI5H,GAOb,OANKA,IACHA,EAAKmxB,GAAMvpB,EAAK,QAAQvE,QAAO,SAAUtC,GACvC,OAAQixF,GAAI1lE,IAAIvrB,EAClB,IAAGuB,WAAW0vF,GAAI02H,UAClB9gN,EAAI2iB,aAAa,KAAMvqB,IAElBA,CACT,EAQIqiN,EAAW,SAAUz6M,EAAK0D,GAC5B,OAAOA,EAAUxK,cAAgB83F,OAASttF,EAAUxC,KAAKlB,EAAI0D,WAAa0mF,GAAIqwH,SAASz6M,EAAK0D,EAC9F,EAwDIywS,EAAiB,SAAU5I,GAC7Bv7Q,EAASu7Q,CACX,EACI6I,EAAc,WAChB,IAEIpoS,EAtEAhB,EAoEAqpS,EAAY,EACZ9I,EAAU,GAEV+I,EAAe,SAAUl8S,EAAI8N,EAAUw+I,GACzC,IAAIjnJ,EAAS,IAAI2wS,GAAOh2S,EAAI8N,EAAUpK,GACtCyvS,EAAQhvS,KAAKkB,GACbA,EAAOmS,GAAG,QAAQ,aACVykS,IAAcroS,EAAQnP,QAC1Bs3S,EAAe5I,EAEnB,IACA9tS,EAAOinJ,UAAYjnJ,EAAOinJ,WAAaA,EACvCjnJ,EAAO++F,QACT,EACApS,GAAI9hE,OAAOlZ,OAAQ,QAASglS,IAlFxBppS,EAAW9E,EAAa,aAIrB8E,EAASlO,MAAMhB,EAAM,IAgF5BkQ,EAAUuuM,GAASh8K,OA3EH,SAAUr4B,GAC1B,IAAI8F,EAAU,GACd,GAAImoL,GAAIh2K,QAAQ5B,QAAU43K,GAAIh2K,QAAQhC,QAAQhC,MAAQ,GAEpD,OADAuxP,GAAU,kKACH,GACF,GAAI2nC,GAET,OADA3nC,GAAU,8GACH,GAET,GAAIxlQ,EAAS2uI,MAIX,OAHAvwI,GAAO4B,EAAS2uI,OAAO,SAAUl8I,GAC/BqT,EAAUA,EAAQlK,OAAOsoF,GAAI3nF,OAAO9J,EAAKgnB,UAC3C,IACO3T,EACF,GAAI9F,EAASyZ,SAClB,OAAOyqE,GAAI3nF,OAAOyD,EAASyZ,UACtB,GAAIzZ,EAASjC,OAClB,MAAO,CAACiC,EAASjC,QAEnB,OAAQiC,EAAS+J,MACjB,IAAK,QACH,IAAIoF,EAAInP,EAASrF,UAAY,GACzBwU,EAAExY,OAAS,GACbyH,GAAO6kI,GAAQ9zH,IAAI,SAAUjd,GAC3B,IAAI4H,EAAMoqF,GAAI1lE,IAAItsB,GACd4H,EACFgM,EAAQzP,KAAKyD,GAEbsE,GAAOyK,SAASsxJ,OAAO,SAAUrkK,GAC/BsI,GAAOtI,EAAE6E,UAAU,SAAU2P,GACvBA,EAAErX,OAASf,IACbA,EAAK,cAAgBw6S,KACrBxoN,GAAI2zH,UAAUvtM,EAAG,KAAMpY,GACvB4T,EAAQzP,KAAKiU,GAEjB,GACF,GAEJ,IAEF,MACF,IAAK,YACL,IAAK,qBACHlM,GAAO8lF,GAAI3nF,OAAO,aAAa,SAAUzC,GACnCkG,EAASquS,mBAAqB95F,EAASz6M,EAAKkG,EAASquS,oBAGpDruS,EAASsuS,kBAAmB/5F,EAASz6M,EAAKkG,EAASsuS,kBACtDxoS,EAAQzP,KAAKyD,EAEjB,IAGF,OAAOgM,CACT,CAqB4ByoS,CAAYvuS,IAClCA,EAAS2uI,MACXvwI,GAAO4B,EAAS2uI,OAAO,SAAUl8I,GAC/BJ,GAAM8C,KAAK2Q,GAAS,SAAUhM,GAC5B,OAAIoqF,GAAIntF,GAAG+C,EAAKrH,EAAKgnB,YACnB20R,EAAaJ,EAASl0S,GAAM2yS,GAAS,CAAC,EAAGzsS,EAAUvN,GAAOqH,IACnD,EAGX,GACF,KAGFzH,GAAM8C,KAAK2Q,GAAS,SAAUhM,GA1MT,IAAUvC,KA2MR3B,EAAK4oB,IAAI1kB,EAAI5H,MA1M1BqF,EAAOqwJ,eAAiBrwJ,EAAO0tG,gBAAkB1tG,EAAOoJ,WAAWY,aAC/EyrS,GAAqBz1S,GACrBA,EAAOiuS,wBACPjuS,EAAOw8C,SAAQ,GACfx8C,EAAO49H,SAAU,EACjB59H,EAAS,KAsMP,IAIuB,KAHvBuO,EAAUzT,GAAM4K,KAAK6I,GAAS,SAAUhM,GACtC,OAAQlE,EAAK4oB,IAAI1kB,EAAI5H,GACvB,KACYyE,OACVs3S,EAAe,IAEf7vS,GAAO0H,GAAS,SAAUhM,IAxHF,SAAUkG,EAAUlG,GAC9C,OAAOkG,EAAS0lF,QAAU5rF,EAAIg4L,QAAQ93L,gBAAiB+zS,CACzD,CAuHUS,CAAsBxuS,EAAUlG,GAGlCs0S,EAAaJ,EAASl0S,GAAMkG,EAAUlG,GAFtC0rQ,GAAU,sEAAuE1rQ,EAIrF,IAEJ,EAGA,OAFAlE,EAAKoK,SAAWA,EAChBkkF,GAAI9uF,KAAK8T,OAAQ,QAASglS,GACnB,IAAIl6G,IAAW,SAAU1hM,GAC1Bw3B,EACFx3B,EAAQw3B,GAERmkR,EAAiB,SAAU5I,GACzB/yS,EAAQ+yS,EACV,CAEJ,GACF,EACA7mR,IAAK,SAAUtsB,GACb,OAAyB,IAArBiH,UAAUxC,OACL0uS,GAAQj2R,MAAM,GACZ48K,EAAW95L,GACb2iB,EAAOwwR,IAAS,SAAU9tS,GAC/B,OAAOA,EAAOrF,KAAOA,CACvB,IAAGqC,MAAM,MACAoZ,EAASzb,IACXmzS,GAAQnzS,GAAMmzS,GAAQnzS,GAEtB,IAEX,EACAH,IAAK,SAAUwF,GACb,IAAI3B,EAAO0D,KAEX,OADqBszS,GAAcr1S,EAAOrF,MACnBqF,IAGK,OAAxB3B,EAAK4oB,IAAIjnB,EAAOrF,MAxSR,WAySWqF,EAAOrF,KAC1B06S,GAAcr1S,EAAOrF,IAAMqF,GAE7Bq1S,GAAcv2S,KAAKkB,GACnB8tS,GAAQhvS,KAAKkB,IAEfw1S,IAAmB,GACnBn3S,EAAKitO,aAAetrO,EACpB3B,EAAKoX,KAAK,YAAa,CAAEzV,OAAQA,IAC5B8/Q,KACHA,GAAuB,SAAU/sQ,GAC/B,IAAI0W,EAAQprB,EAAKoX,KAAK,gBACtB,GAAIgU,EAAMimL,YAGR,OAFA38L,EAAEgC,iBACFhC,EAAE28L,YAAcjmL,EAAMimL,YACfjmL,EAAMimL,WAEjB,EACA/9L,OAAOiZ,iBAAiB,eAAgBk1P,MArBjC9/Q,CAwBX,EACA62S,aAAc,SAAUl8S,EAAI8N,GAC1B,OAAO1G,KAAKvH,IAAI,IAAIm2S,GAAOh2S,EAAI8N,EAAU1G,MAC3C,EACAmI,OAAQ,SAAUgY,GAChB,IACIhjB,EAAGc,EADH3B,EAAO0D,KAEX,GAAKmgB,EAAL,CAMA,IAAIuyK,EAAWvyK,GAUf,OADAliB,EAASkiB,EACLnmB,EAAOsC,EAAK4oB,IAAIjnB,EAAOrF,KAClB,MAEL86S,GAAqBz1S,IACvB3B,EAAKoX,KAAK,eAAgB,CAAEzV,OAAQA,IAEf,IAAnB8tS,GAAQ1uS,QACVuS,OAAOmZ,oBAAoB,eAAgBg1P,IAE7C9/Q,EAAOkK,SACPsrS,GAAmB1H,GAAQ1uS,OAAS,GAC7BY,GApBL6G,GAAO8lF,GAAI3nF,OAAOkd,IAAW,SAAU3f,IACrCvC,EAAS3B,EAAK4oB,IAAI1kB,EAAI5H,MAEpB0D,EAAK6L,OAAOlK,EAEhB,GAPF,MAJE,IAAKd,EAAI4uS,GAAQ1uS,OAAS,EAAGF,GAAK,EAAGA,IACnCb,EAAK6L,OAAO4jS,GAAQ5uS,GA0B1B,EACAoI,YAAa,SAAU0hK,EAAKh2J,EAAI7X,GAC9B,IAAIkD,EAAO0D,KAAM/B,EAAS3B,EAAK4oB,IAAI9rB,GACnC,OAAQ6tK,GACR,IAAK,eAIH,OAHK3qK,EAAK4oB,IAAI9rB,IACZ,IAAIw1S,GAAOx1S,EAAOkD,EAAKoK,SAAUpK,GAAM0gG,UAElC,EACT,IAAK,kBAIH,OAHI/+F,GACFA,EAAOkK,UAEF,EACT,IAAK,kBACH,OAAKlK,GAIDA,EAAO83K,WACT93K,EAAOmsF,OAEPnsF,EAAO4U,QAEF,IARLvW,EAAKiJ,YAAY,gBAAgB,EAAOnM,IACjC,GASX,QAAIkD,EAAKitO,cACAjtO,EAAKitO,aAAahkO,YAAY0hK,EAAKh2J,EAAI7X,EAGlD,EACAy4S,YAAa,WACX/sS,GAAOinS,IAAS,SAAU9tS,GACxBA,EAAO8zS,MACT,GACF,EACAoD,QAAS,SAAUzsI,EAAMrpK,GACvB8kN,GAAK1rN,IAAIiwK,EAAMrpK,EACjB,EACA+mB,UAAW,SAAUnnB,GACnB,OAAOklN,GAAK/9L,UAAUnnB,EACxB,EACAuR,UAAW,SAAUvS,GACnB,IAAIsrO,EAAevpO,KAAKupO,aACpBvpO,KAAKupO,eAAiBtrO,IACpBsrO,GACFA,EAAa71N,KAAK,aAAc,CAAE6mK,cAAet8K,IAEnDA,EAAOyV,KAAK,WAAY,CAAE6mK,cAAegvD,KAE3CvpO,KAAKupO,aAAetrO,CACtB,EACAsyS,YAAa,SAAUhrF,GACrBvlN,KAAKmvJ,QAAU,IAAIw8E,GAAI3rO,KAAKgvS,iBAAiBlsP,WAAWyiK,EAAQ9hN,QAAQ,OAAQ,KAChFzD,KAAKwwS,QAAU,IAAI7kE,GAAI3rO,KAAKmvJ,QAC9B,IAEFqkJ,GAAc1/R,QAEd,IAgJMshS,GACAC,GAmCFC,GAAaC,GApLbC,GAAQ3qR,KAAK6kB,IAAK+lQ,GAAQ5qR,KAAKnF,IAAK6tE,GAAU1oE,KAAK+wB,MACnD85P,GAAmB,SAAU1/P,EAAMunO,EAAY17Q,GACjD,IAAIvI,EAAIikR,EAAWjkR,EACf+sB,EAAIk3P,EAAWl3P,EACf8F,EAAI6pB,EAAK7pB,EACT3G,EAAIwwB,EAAKxwB,EACTmwR,EAAUp4B,EAAWpxP,EACrBypR,EAAUr4B,EAAW/3P,EACrBqwR,GAAYh0S,GAAO,IAAII,MAAM,IAyBjC,MAxBoB,MAAhB4zS,EAAS,KACXxvR,GAAKuvR,GAEa,MAAhBC,EAAS,KACXv8S,GAAKq8S,GAEa,MAAhBE,EAAS,KACXxvR,GAAKktE,GAAQqiN,EAAU,IAEL,MAAhBC,EAAS,KACXv8S,GAAKi6F,GAAQoiN,EAAU,IAEL,MAAhBE,EAAS,KACXxvR,GAAKb,GAEa,MAAhBqwR,EAAS,KACXv8S,GAAK6yB,GAEa,MAAhB0pR,EAAS,KACXxvR,GAAKktE,GAAQ/tE,EAAI,IAEC,MAAhBqwR,EAAS,KACXv8S,GAAKi6F,GAAQpnE,EAAI,IAEZq3F,GAASlqH,EAAG+sB,EAAG8F,EAAG3G,EAC3B,EA+CIg+F,GAAW,SAAUlqH,EAAG+sB,EAAG8F,EAAG3G,GAChC,MAAO,CACLlsB,EAAGA,EACH+sB,EAAGA,EACH8F,EAAGA,EACH3G,EAAGA,EAEP,EAIIswR,GAAO,CACTj3K,QAhDY,SAAU7oF,EAAM7pB,EAAG3G,GAC/B,OAAOg+F,GAASxtE,EAAK18C,EAAI6yB,EAAG6pB,EAAK3vB,EAAIb,EAAGwwB,EAAK7pB,EAAQ,EAAJA,EAAO6pB,EAAKxwB,EAAQ,EAAJA,EACnE,EA+CEkwR,iBAAkBA,GAClBK,yBA5D6B,SAAU//P,EAAMunO,EAAYy4B,EAAeh0S,GACxE,IAAI00C,EAAKv5C,EACT,IAAKA,EAAI,EAAGA,EAAI6E,EAAK3E,OAAQF,IAE3B,IADAu5C,EAAMg/P,GAAiB1/P,EAAMunO,EAAYv7Q,EAAK7E,KACtC7D,GAAK08S,EAAc18S,GAAKo9C,EAAIp9C,EAAIo9C,EAAIvqB,GAAK6pR,EAAc7pR,EAAI6pR,EAAc18S,GAAKo9C,EAAIrwB,GAAK2vR,EAAc3vR,GAAKqwB,EAAIrwB,EAAIqwB,EAAIlxB,GAAKwwR,EAAcxwR,EAAIwwR,EAAc3vR,EACjK,OAAOrkB,EAAK7E,GAGhB,OAAO,IACT,EAoDE84S,UAhDc,SAAUjgQ,EAAMkoF,GAC9B,IAAIg4K,EAAKT,GAAMz/P,EAAK18C,EAAG4kI,EAAS5kI,GAC5B68S,EAAKV,GAAMz/P,EAAK3vB,EAAG63G,EAAS73G,GAC5BgtO,EAAKmiD,GAAMx/P,EAAK18C,EAAI08C,EAAK7pB,EAAG+xG,EAAS5kI,EAAI4kI,EAAS/xG,GAClDinO,EAAKoiD,GAAMx/P,EAAK3vB,EAAI2vB,EAAKxwB,EAAG04G,EAAS73G,EAAI63G,EAAS14G,GACtD,OAAI6tO,EAAK6iD,EAAK,GAAK9iD,EAAK+iD,EAAK,EACpB,KAEF3yL,GAAS0yL,EAAIC,EAAI9iD,EAAK6iD,EAAI9iD,EAAK+iD,EACxC,EAwCElxL,MAvCU,SAAUjvE,EAAM0hF,EAAW0+K,GACrC,IAAIF,EAAKlgQ,EAAK18C,EACV68S,EAAKngQ,EAAK3vB,EACVgtO,EAAKr9M,EAAK18C,EAAI08C,EAAK7pB,EACnBinO,EAAKp9M,EAAK3vB,EAAI2vB,EAAKxwB,EACnB6wR,EAAM3+K,EAAUp+H,EAAIo+H,EAAUvrG,EAC9BmqR,EAAM5+K,EAAUrxG,EAAIqxG,EAAUlyG,EAC9B+wR,EAAcd,GAAM,EAAG/9K,EAAUp+H,EAAI48S,GACrCM,EAAcf,GAAM,EAAG/9K,EAAUrxG,EAAI8vR,GACrCM,EAAahB,GAAM,EAAGpiD,EAAKgjD,GAC3BK,EAAajB,GAAM,EAAGriD,EAAKkjD,GAW/B,OAVAJ,GAAMK,EACNJ,GAAMK,EACFJ,IACF/iD,GAAMkjD,EACNnjD,GAAMojD,EACNN,GAAMO,EACNN,GAAMO,GAIDlzL,GAAS0yL,EAAIC,GAFpB9iD,GAAMojD,GAEuBP,GAD7B9iD,GAAMsjD,GACgCP,EACxC,EAkBE9tS,OAAQm7G,GACRmzL,eAVmB,SAAUjtF,GAC7B,OAAOlmG,GAASkmG,EAAW7rN,KAAM6rN,EAAWvjM,IAAKujM,EAAWv/L,MAAOu/L,EAAW5jM,OAChF,GAsFI8wR,IAjCExB,GAAQ,CAAC,EACTC,GAAY,CAAC,EA2BV,CACLnlO,KA3BS,SAAUt3E,EAAI6I,GACvB,IAAIo1S,EAAa,kBAAoBp1S,EAAM,mBACvCq1S,EAAY,kBAAoBr1S,EAAM,0CAA4C7I,EAAK,4BAC3F,QAAkB6C,IAAd25S,GAAMx8S,GACR,OAAOw8S,GAAMx8S,GAEb,IAAIm+S,EAAO,IAAIr8G,IAAW,SAAU1hM,EAASkwG,GAC3C,IAAI8tM,EAnDE,SAAUC,EAAWC,EAAU/yK,QAC3B,IAAZA,IACFA,EAAU,KAEZ,IAAI56B,GAAO,EACPrtD,EAAQ,KACRumD,EAAW,SAAUspC,GACvB,OAAO,WAEL,IADA,IAAIr3H,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAElB40F,IACHA,GAAO,EACO,OAAVrtD,IACFD,aAAaC,GACbA,EAAQ,MAEV6vF,EAAUzuI,MAAM,KAAMoX,GAE1B,CACF,EACI1b,EAAUypG,EAASw0M,GACnB/tM,EAASzG,EAASy0M,GAYtB,MAAO,CACLt+R,MAZU,WAEV,IADA,IAAIlE,EAAO,GACFC,EAAK,EAAGA,EAAK9U,UAAUxC,OAAQsX,IACtCD,EAAKC,GAAM9U,UAAU8U,GAElB40F,GAAkB,OAAVrtD,IACXA,EAAQe,YAAW,WACjB,OAAOisD,EAAO5rG,MAAM,KAAMoX,EAC5B,GAAGyvH,GAEP,EAGEnrI,QAASA,EACTkwG,OAAQA,EAEZ,CAWqBiuM,CAAQn+S,EAASkwG,GAC9BmsM,GAAUz8S,GAAMo+S,EAAOh+S,QACvBiqN,GAAaA,aAAaK,WAAW7hN,GAAK,WACxC,OAAOu1S,EAAOp+R,MAAMk+R,EACtB,IAAG,WACD,OAAOE,EAAO9tM,OAAO2tM,EACvB,GACF,IAEA,OADAzB,GAAMx8S,GAAMm+S,EACLA,CAEX,EAUEt+S,IATQ,SAAUG,EAAIyL,QACA5I,IAAlB45S,GAAUz8S,KACZy8S,GAAUz8S,GAAIyL,UACPgxS,GAAUz8S,IAEnBw8S,GAAMx8S,GAAM8hM,GAAW1hM,QAAQqL,EACjC,IAQExI,GAAO9C,GAAM8C,KAAMu7S,GAAWr+S,GAAM88L,OAEpCwhH,GAAQ,WACZ,EACAA,GAAMxhH,OAASy/G,GAAc,SAAUpvS,GACrC,IACIoxS,EADOt3S,KACOxG,UACd69S,EAAQ,WACV,IAAIl6S,EAAGo6S,EAAQC,EACXl7S,EAAO0D,KACX,IAAKu1S,KACCj5S,EAAK0lC,MACP1lC,EAAK0lC,KAAK1kC,MAAMhB,EAAMuD,WAExB03S,EAASj7S,EAAKm7S,QAGZ,IADAt6S,EAAIo6S,EAAOl6S,OACJF,MACLq6S,EAAQD,EAAOp6S,IACL6kC,MACRw1Q,EAAMx1Q,KAAK1kC,MAAMhB,EAAMuD,UAKjC,EACI63S,EAAQ,WACV,OAAO13S,IACT,EAWAu1S,IAAe,EACf,IAAI/7S,EAAY,IAnCLwG,KAqFX,OAjDAu1S,IAAe,EACXrvS,EAAMuxS,SACR57S,GAAKqK,EAAMuxS,QAAQ,SAAUD,GAC3B,IAAK,IAAIjxI,KAAUixI,EACF,SAAXjxI,IACFrgK,EAAMqgK,GAAUixI,EAAMjxI,GAG5B,IACI+wI,EAAOG,SACTvxS,EAAMuxS,OAASH,EAAOG,OAAOn1S,OAAO4D,EAAMuxS,UAG1CvxS,EAAMyxS,SACR97S,GAAKqK,EAAMyxS,QAAQ11S,MAAM,MAAM,SAAUtI,GACvCuM,EAAMvM,GAAQ+9S,CAChB,IAEExxS,EAAM0xS,YACR/7S,GAAKqK,EAAM0xS,WAAW31S,MAAM,MAAM,SAAUtI,GAC1C,IAAIsP,EAAY,IAAMtP,EACtBuM,EAAMvM,GAAQ,SAAUP,GACtB,IAAIkD,EAAO0D,KACX,YAAcvE,IAAVrC,GACFkD,EAAK2M,GAAa7P,EACXkD,GAEFA,EAAK2M,EACd,CACF,IAEE/C,EAAM2xS,SACRh8S,GAAKqK,EAAM2xS,SAAS,SAAU98G,EAAMphM,GAClC09S,EAAM19S,GAAQohM,CAChB,IAEE70L,EAAM4xS,UAAYR,EAAOQ,WAC3B5xS,EAAM4xS,SAAWV,GAAS,CAAC,EAAGE,EAAOQ,SAAU5xS,EAAM4xS,WAEvDzkH,GAAOntL,GAAO,SAAU6xS,EAAQp+S,GACR,mBAAXo+S,GAAyBT,EAAO39S,GACzCH,EAAUG,GArDK,SAAUA,EAAMob,GACjC,OAAO,WACL,IAAIzY,EAAO0D,KACP42M,EAAMt6M,EAAKg7S,OACfh7S,EAAKg7S,OAASA,EAAO39S,GACrB,IAAI00B,EAAMtZ,EAAGzX,MAAMhB,EAAMuD,WAEzB,OADAvD,EAAKg7S,OAAS1gG,EACPvoL,CACT,CACF,CA4CsB2pR,CAAar+S,EAAMo+S,GAErCv+S,EAAUG,GAAQo+S,CAEtB,IACAV,EAAM79S,UAAYA,EAClB69S,EAAM39S,YAAc29S,EACpBA,EAAMxhH,OAASy/G,GACR+B,CACT,EAEA,IAsTIY,GAtTAvoQ,GAAM7kB,KAAK6kB,IAAKhqB,GAAMmF,KAAKnF,IAAKk2B,GAAQ/wB,KAAK+wB,MAwJ7Cs8P,GAAY,CACdhrG,UAXc,SAAU/sM,GACxB,IAAIkE,EAAOsH,KAAK6jB,UAAUrvB,GAC1B,OAAKuyL,EAAWruL,GAGTA,EAAKZ,QAAQ,oBAAoB,SAAUod,GAChD,IAAIs3R,EAAUt3R,EAAMoiG,WAAW,GAAG9mH,SAAS,IAC3C,MAAO,MAAQ,OAAO+kC,UAAUi3Q,EAAQ96S,QAAU86S,CACpD,IALS9zS,CAMX,EAGEuH,MAAO,SAAU3M,GACf,IACE,OAAO0M,KAAKC,MAAM3M,EAEpB,CADE,MAAOwqG,GACT,CACF,GAGE2uM,GAAQ,CACV9tM,UAAW,CAAC,EACZ1zE,MAAO,EACPnrB,KAAM,SAAU/E,GACd,IAAIpK,EAAO0D,KAAMgD,EAAM+6M,GAASnzH,IAAKh0D,OAA2Bn7B,IAAnBiL,EAASkwB,MAAsBlwB,EAASkwB,MAAQt6B,EAAKs6B,MAC9Fh+B,EAAK,iBAAmBg+B,EAC5Bt6B,EAAKguG,UAAU1zE,GAAS,SAAUs3O,GAChClrQ,EAAImF,OAAOvP,UACJ0D,EAAKguG,UAAU1zE,GACtBlwB,EAAS8E,SAAS0iQ,EACpB,EACAlrQ,EAAIvK,IAAIuK,EAAIigB,IAAI3U,KAAM,SAAU,CAC9B1V,GAAIA,EACJs5F,IAAKxrF,EAASjF,IACdtI,KAAM,oBAERmD,EAAKs6B,OACP,GAGEyhR,GAAM34S,GAASA,GAAS,CAAC,EAAGyrS,IAAa,CAC3C1/R,KAAM,SAAU/E,GACd,IAAIinQ,EAAK/2O,EAAQ,EACb0hR,EAAQ,YACL5xS,EAAS6xS,OAA4B,IAAnB5qC,EAAIl+D,YAAoB74K,IAAU,KACnDlwB,EAASgF,SAAWkrB,EAAQ,KAAwB,MAAf+2O,EAAIt9L,OAC3C3pE,EAASgF,QAAQ/S,KAAK+N,EAAS8xS,cAAe,GAAK7qC,EAAIQ,aAAcR,EAAKjnQ,GACjEA,EAASqF,OAClBrF,EAASqF,MAAMpT,KAAK+N,EAAS+xS,YAAa7hR,EAAQ,IAAQ,YAAc,UAAW+2O,EAAKjnQ,GAE1FinQ,EAAM,MAEN3yE,GAAM/9I,WAAWq7P,EAAO,GAE5B,EA6BA,GA5BA5xS,EAAS8S,MAAQ9S,EAAS8S,OAASxZ,KACnC0G,EAAS8xS,cAAgB9xS,EAAS8xS,eAAiB9xS,EAAS8S,MAC5D9S,EAAS+xS,YAAc/xS,EAAS+xS,aAAe/xS,EAAS8S,MACxD9S,EAAS6xS,OAA2B,IAAnB7xS,EAAS6xS,MAC1B7xS,EAASrC,KAAOqC,EAASrC,MAAQ,GACjCg0S,GAAI3kS,KAAK,mBAAoB,CAAEhN,SAAUA,KACzCinQ,EAAM,IAAI1O,gBACFy5C,kBACN/qC,EAAI+qC,iBAAiBhyS,EAASiyS,cAEhChrC,EAAI5+P,KAAKrI,EAASvN,OAASuN,EAASrC,KAAO,OAAS,OAAQqC,EAASjF,IAAKiF,EAAS6xS,OAC/E7xS,EAASkyS,cACXjrC,EAAIC,iBAAkB,GAEpBlnQ,EAASiyS,cACXhrC,EAAIkrC,iBAAiB,eAAgBnyS,EAASiyS,cAE5CjyS,EAASoyS,gBACX//S,GAAM8C,KAAK6K,EAASoyS,gBAAgB,SAAUprK,GAC5CigI,EAAIkrC,iBAAiBnrK,EAAOttI,IAAKstI,EAAOt0I,MAC1C,IAEFu0Q,EAAIkrC,iBAAiB,mBAAoB,mBACzClrC,EAAM0qC,GAAI3kS,KAAK,aAAc,CAC3Bi6P,IAAKA,EACLjnQ,SAAUA,IACTinQ,KACCliQ,KAAK/E,EAASrC,OACbqC,EAAS6xS,MACZ,OAAOD,IAETt9G,GAAM/9I,WAAWq7P,EAAO,GAC1B,IAGEziH,GAAS98L,GAAM88L,OACfkjH,GAAc,WAChB,SAASA,EAAYryS,GACnB1G,KAAK0G,SAAWmvL,GAAO,CAAC,EAAGnvL,GAC3B1G,KAAK42B,MAAQ,CACf,CA+BA,OA9BAmiR,EAAYC,QAAU,SAAUzsR,GAC9B,OAAO,IAAIwsR,GAActtS,KAAK8gB,EAChC,EACAwsR,EAAYv/S,UAAUiS,KAAO,SAAUiJ,GACrC,IAAIukS,EAAMvkS,EAAK3I,MAAOmtS,EAAMxkS,EAAKhJ,QAC7BytS,EAAUtjH,GAAO71L,KAAK0G,SAAUgO,GACpCykS,EAAQztS,QAAU,SAAUo4B,EAAGxqC,QAEZ,KADjBwqC,EAAIo0Q,GAAUtsS,MAAMk4B,MAElBA,EAAI,CAAE/3B,MAAO,sBAEX+3B,EAAE/3B,MACJktS,EAAItgT,KAAKwgT,EAAQV,aAAeU,EAAQ3/R,MAAOsqB,EAAE/3B,MAAOzS,GAExD4/S,EAAIvgT,KAAKwgT,EAAQX,eAAiBW,EAAQ3/R,MAAOsqB,EAAEtT,OAEvD,EACA2oR,EAAQptS,MAAQ,SAAUqtS,EAAI9/S,GACxB2/S,GACFA,EAAItgT,KAAKwgT,EAAQV,aAAeU,EAAQ3/R,MAAO4/R,EAAI9/S,EAEvD,EACA6/S,EAAQ90S,KAAO6zS,GAAUhrG,UAAU,CACjCt0M,GAAI8b,EAAK9b,IAAM,IAAMoH,KAAK42B,QAC1ByiR,OAAQ3kS,EAAK2kS,OACbniR,OAAQxiB,EAAKwiB,SAEfiiR,EAAQR,aAAe,mBACvBN,GAAI5sS,KAAK0tS,EACX,EACOJ,CACT,CApCkB,GA8ElB,IACE,IAAIr3S,GAAO,oBACXu2S,GAAeroS,OAAOqoS,cACTvhN,QAAQh1F,GAAMA,IAC3Bu2S,GAAaqB,WAAW53S,GAG1B,CAFE,MAAOsP,GACPinS,GA7CO,WACL,IAAI5zS,EAAO,CAAC,EACRpE,EAAO,GACPktH,EAAU,CACZh3B,QAAS,SAAU/1F,GAEjB,OADWiE,EAAKjE,IACK,IACvB,EACAs2F,QAAS,SAAUt2F,EAAKhH,GACtB6G,EAAKlD,KAAKqD,GACViE,EAAKjE,GAAOxG,OAAOR,EACrB,EACAgH,IAAK,SAAU2hB,GACb,OAAO9hB,EAAK8hB,EACd,EACAu3R,WAAY,SAAUl5S,GACpBH,EAAOA,EAAKhE,QAAO,SAAUkK,GAC3B,OAAOA,IAAM/F,CACf,WACOiE,EAAKjE,EACd,EACAk6C,MAAO,WACLr6C,EAAO,GACPoE,EAAO,CAAC,CACV,EACAhH,OAAQ,GASV,OAPAsC,OAAOggC,eAAewtF,EAAS,SAAU,CACvCjoG,IAAK,WACH,OAAOjlB,EAAK5C,MACd,EACAk8S,cAAc,EACdC,YAAY,IAEPrsL,CACT,CAnCO,EA8CT,CACA,IAEIssL,GAAY,CACdC,KAAM,CAAE5D,KAAMA,IACdh9S,KAAM,CACJyvG,QAASmyF,GACTM,MAAOA,GACPjiM,MAAOA,GACP+mO,GAAIA,GACJ6L,IAAKA,GACL0rE,MAAOA,GACP9M,gBAAiBA,GACjBY,WAAYA,GACZhnF,KAAMA,GACNk0F,IAAKA,GACL1sS,KAAMusS,GACNa,YAAaA,GACbX,MAAOA,GACPuB,aAlBe1B,GAmBf2B,MAjVQ,SAAUxgT,GACpB,IAAIkD,EAAO,CAAC,EACRY,EAAI,EAAG05D,EAAI,EAAGr8D,EAAI,EAmGlBqR,EAAQ,SAAUxS,GACpB,IAAIolB,EA2BJ,MA1BqB,iBAAVplB,EACL,MAAOA,GACT8D,EAAI9D,EAAM8D,EACV05D,EAAIx9D,EAAMw9D,EACVr8D,EAAInB,EAAMmB,GACD,MAAOnB,GA5EP,SAAU06F,EAAKC,EAAYC,GAMxC,GALAF,GAAO90E,SAAS80E,EAAK,KAAO,GAAK,IACjCC,EAAa/0E,SAAS+0E,EAAY,IAAM,IACxCC,EAAah1E,SAASg1E,EAAY,IAAM,IACxCD,EAAaruE,GAAI,EAAGgqB,GAAIqkD,EAAY,IACpCC,EAAatuE,GAAI,EAAGgqB,GAAIskD,EAAY,IACjB,IAAfD,EAAJ,CAIA,IAAIE,EAAOH,EAAM,GACbI,EAASF,EAAaD,EACtBz6F,EAAI46F,GAAU,EAAIrpE,KAAK89D,IAAIsL,EAAO,EAAI,IACtCpzE,EAAQmzE,EAAaE,EACzB,OAAQrpE,KAAKwU,MAAM40D,IACnB,KAAK,EACH/2F,EAAIg3F,EACJt9B,EAAIt9D,EACJiB,EAAI,EACJ,MACF,KAAK,EACH2C,EAAI5D,EACJs9D,EAAIs9B,EACJ35F,EAAI,EACJ,MACF,KAAK,EACH2C,EAAI,EACJ05D,EAAIs9B,EACJ35F,EAAIjB,EACJ,MACF,KAAK,EACH4D,EAAI,EACJ05D,EAAIt9D,EACJiB,EAAI25F,EACJ,MACF,KAAK,EACHh3F,EAAI5D,EACJs9D,EAAI,EACJr8D,EAAI25F,EACJ,MACF,KAAK,EACHh3F,EAAIg3F,EACJt9B,EAAI,EACJr8D,EAAIjB,EACJ,MACF,QACE4D,EAAI05D,EAAIr8D,EAAI,EAEd2C,EAAI0+C,GAAM,KAAO1+C,EAAI2jB,IACrB+1C,EAAIhb,GAAM,KAAOgb,EAAI/1C,IACrBtmB,EAAIqhD,GAAM,KAAOrhD,EAAIsmB,GAzCrB,MAFE3jB,EAAI05D,EAAIr8D,EAAIqhD,GAAM,IAAMo4C,EA4C5B,CA0BM6lN,CAASzgT,EAAMosB,EAAGpsB,EAAMqD,EAAGrD,EAAMiN,IAG/BmY,EAAU,8DAA8Di2E,KAAKr7F,KAC/E8D,EAAI8hB,SAASR,EAAQ,GAAI,IACzBo4C,EAAI53C,SAASR,EAAQ,GAAI,IACzBjkB,EAAIykB,SAASR,EAAQ,GAAI,MAChBA,EAAU,oCAAoCi2E,KAAKr7F,KAC5D8D,EAAI8hB,SAASR,EAAQ,GAAI,IACzBo4C,EAAI53C,SAASR,EAAQ,GAAI,IACzBjkB,EAAIykB,SAASR,EAAQ,GAAI,MAChBA,EAAU,2BAA2Bi2E,KAAKr7F,MACnD8D,EAAI8hB,SAASR,EAAQ,GAAKA,EAAQ,GAAI,IACtCo4C,EAAI53C,SAASR,EAAQ,GAAKA,EAAQ,GAAI,IACtCjkB,EAAIykB,SAASR,EAAQ,GAAKA,EAAQ,GAAI,KAG1CthB,EAAIA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,EAChC05D,EAAIA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,EAChCr8D,EAAIA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,EACzB+B,CACT,EAQA,OAPIlD,GACFwS,EAAMxS,GAERkD,EAAKw9S,MA3CO,WACV,MAAO,CACL58S,EAAGA,EACH05D,EAAGA,EACHr8D,EAAGA,EAEP,EAsCA+B,EAAKy9S,MArCO,WACV,OAhGY,SAAU78S,EAAG05D,EAAGr8D,GAC5B,IAAOkC,EAAG4J,EAGVA,EAAI,EAIJ,IAAI8uF,EAASzlD,GAHbxyC,GAAQ,IAGYwyC,GAFpBknB,GAAQ,IACRr8D,GAAQ,MAEJ66F,EAAS1vE,GAAIxoB,EAAGwoB,GAAIkxC,EAAGr8D,IAC3B,OAAI46F,IAAWC,EAEN,CACL5vE,EAAG,EACH/oB,EAAG,EACH4J,EAAO,KAJTA,EAAI8uF,KAUN14F,GAAK24F,EAASD,GAAUC,EACxB/uF,EAAI+uF,EACG,CACL5vE,EAAGo2B,GAJD,KADA1+C,IAAMi4F,EAAS,EAAI56F,IAAM46F,EAAS,EAAI,IADlCj4F,IAAMi4F,EAASv+B,EAAIr8D,EAAIA,IAAM46F,EAASj4F,EAAI05D,EAAIr8D,EAAI2C,IAEvCk4F,EAASD,KAK1B14F,EAAGm/C,GAAU,IAAJn/C,GACT4J,EAAGu1C,GAAU,IAAJv1C,IAEb,CAoES2zS,CAAQ98S,EAAG05D,EAAGr8D,EACvB,EAoCA+B,EAAK22F,MApDO,WACV,IAAIN,EAAM,SAAUxwF,GAElB,OADAA,EAAM6c,SAAS7c,EAAK,IAAIhG,SAAS,KACtBkB,OAAS,EAAI8E,EAAM,IAAMA,CACtC,EACA,MAAO,IAAMwwF,EAAIz1F,GAAKy1F,EAAI/7B,GAAK+7B,EAAIp4F,EACrC,EA+CA+B,EAAKsP,MAAQA,EACNtP,CACT,EAuMI29S,cAvlSgB,SAAUh8S,GAC5B,IAAIqhQ,EAAesN,KACf8vB,EAAWztB,GAAehxQ,EAAQqhQ,GACtC,MAAO,CACLwO,OAAQ,SAAUY,EAAWwrC,GAI3B,YAHyB,IAArBA,IACFA,GAAmB,GAEdxd,EAAS5uB,OAAOY,EAAWwrC,EAAmBvrC,GAAiB1wQ,QAAUxC,EAClF,EAEJ,GA8kSEuH,IAAK,CACH0sM,WAAYA,GACZ2D,OAAQA,GACR0H,SAAUA,GACVo/F,WAAY18G,GACZ6pB,WAAYA,GACZvJ,SAAUA,GACVkF,aAAcA,GACd4iB,WAAYA,GACZu0E,WAAYn0C,GACZ5qE,iBAAkBA,GAClBklC,iBAAkBA,GAClBhB,gBAAiBA,GACjB86E,UAAWl/C,GACXltD,MAAOyB,GAAWzB,OAEpB10L,KAAM,CACJgyL,OAAQA,GACRlI,SAAUA,GACVtiL,KAAM0pN,GACN9lC,OAAQA,GACRqqC,UAAWA,GACX6xB,UAAWA,GACXhuB,OAAQA,GACRunE,WAAY9mE,IAEd3+C,IAAKA,GACLswB,aAAcA,GACd2Y,UAAWA,GACX6yC,UAAWA,GACX4C,YAAaA,GACby0B,eAAgBA,GAChB78B,cAAeA,GACfb,oBAAqBA,GACrB4hC,iBAAkBA,GAClB8B,UAAWA,GACXc,OAAQA,GACRvmE,aAAcA,GACdmrE,cAAeA,GACf5oN,IAAKmzH,GAASnzH,IACdq4H,aAAcA,GAAaA,aAC3BuD,cAAeA,GACfC,aAAcA,GACdjuN,YAAaA,GACbo+S,SAAUA,GACVp0S,KAAMzJ,GAAMyJ,KACZzI,QAAShB,GAAMgB,QACf0D,GAAI1E,GAAM0E,GACVvB,QAASnD,GAAMmD,QACfq4I,QAASx7I,GAAMw7I,QACf14I,KAAM9C,GAAM8C,KACZD,IAAK7C,GAAM6C,IACX+H,KAAM5K,GAAM4K,KACZvB,QAASrJ,GAAMqJ,QACfyzL,OAAQ98L,GAAM88L,OACdxtL,OAAQtP,GAAMsP,OACdkuL,KAAMx9L,GAAMw9L,KACZF,SAAUt9L,GAAMs9L,SAChBr9L,QAASD,GAAMC,QACf2wI,QAAS5wI,GAAM4wI,QACf6sD,gBAAiBz9L,GAAMy9L,gBACvBx5K,QAAS23K,GAAIp4K,MACb09Q,SAAUtlG,GAAIH,OACdz3K,KAAM43K,GAAIC,GACVolG,QAASrlG,GAAIE,MACbylH,MAAO3lH,GAAI/lG,KAETr2F,GAAUQ,GAAM88L,OAAO29G,GAAeiG,KAUf,SAAUlhT,GACnCqX,OAAOrX,QAAUA,EACjBqX,OAAO2qS,QAAUhiT,CACnB,CACAiiT,CAAqBjiT,IAZO,SAAUA,GAElC,IACEuvG,EAAOC,QAAUxvG,CAEnB,CADE,MAAOyT,GACT,CAEJ,CAMAyuS,CAAsBliT,GAE1B,CAn36BA,E","sources":["webpack://ab_platform_web/./node_modules/tinymce/icons/default/icons.js","webpack://ab_platform_web/./node_modules/tinymce/icons/default/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/plugin.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/index.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/theme.js","webpack://ab_platform_web/./node_modules/tinymce/tinymce.js"],"sourcesContent":["tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-style': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"6\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"3\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"6.8\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"10.6\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"14.4\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"18.2\" y=\"16\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"13\" y=\"11\" rx=\"1\"/></g></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"5\" x=\"3\" y=\"5\" rx=\"1\"/><rect width=\"18\" height=\"3.5\" x=\"3\" y=\"11.5\" rx=\"1\"/><rect width=\"18\" height=\"2\" x=\"3\" y=\"17\" rx=\"1\"/></g></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'cell-background-color': '<svg width=\"24\" height=\"24\"><path d=\"M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z\"/></svg>',\n    'cell-border-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z\" opacity=\".2\"/><path fill-rule=\"nonzero\" d=\"M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z\"/><path d=\"M13 11l-2 2H5v-2h6V6h2z\"/><path fill-rule=\"nonzero\" d=\"M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z\"/></g></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z\"/><path d=\"M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'language': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-caption': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"12\" height=\"2\" x=\"3\" y=\"4\" rx=\"1\"/><path d=\"M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></g></svg>',\n    'table-cell-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z\"/><path fill-rule=\"nonzero\" d=\"M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z\" opacity=\".2\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/><path fill-rule=\"nonzero\" d=\"M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z\" opacity=\".2\"/></g></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-numbering-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z\"/></svg>',\n    'table-row-numbering': '<svg width=\"24\" height=\"24\"><path d=\"M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'vertical-align': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><path d=\"M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z\"/></g></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.6 (2022-10-19)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$4(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$5.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$5.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$5.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      var attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var sanitizeData = function (editor, data) {\n      var href = data.href;\n      return __assign(__assign({}, data), { href: global$3.isDomSafe(href, 'a', editor.settings) ? href : '' });\n    };\n    var link = function (editor, attachState, data) {\n      var sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$2.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$1.resolve(data);\n      }, function (transform) {\n        return new global$1(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$1(function (callback) {\n        if (isString(linkList)) {\n          global.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = is(initialTarget, '_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !is(info.anchor[key], value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open$1(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$6.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return noop;\n      };\n      var getLinkText = function (value) {\n        var anchor = getAnchorElement(editor);\n        var onlyText = isOnlyTextSelected(editor);\n        if (!anchor && onlyText) {\n          var text = getAnchorText(editor.selection, anchor);\n          return Optional.some(text.length > 0 ? text : value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var value = formApi.getValue();\n              var text = getLinkText(value);\n              var attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text: text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.none(),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global$7.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.6 (2022-10-19)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant$1 = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity$1 = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant$1(false);\n    var always = constant$1(true);\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity$1;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant$1(null),\n        getOrUndefined: constant$1(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant$1('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant$1(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$2 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk$1 = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map$2 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition$3 = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$5 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex$1 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$3 = function (xs, f) {\n      return flatten(map$2(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$2(a1, function (x) {\n        return !contains$2(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure$2 = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$f = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$f(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$f(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$4 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity$1);\n    };\n    var get$e = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var equals = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var addToEnd = function (str, suffix) {\n      return str + suffix;\n    };\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var ensureTrailing = function (str, suffix) {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$1 = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml$2 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var name$2 = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement$2 = isType(ELEMENT);\n    var isText$1 = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$3 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    var detect$4 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    var unknown$3 = function () {\n      return nu$d(0, 0);\n    };\n    var nu$d = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$d,\n      detect: detect$4,\n      unknown: unknown$3\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$3 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$5(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$3(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$3(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$2 = function () {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$c = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chrome: constant$1(chrome),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$1 = function () {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$b = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      osx: constant$1(osx),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    var detect$2 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$1 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$3 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$1().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var owner$4 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner$4(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map$2(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$2 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$2(element, 0);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant$1(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$2(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$1(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$8 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$d = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$d(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$7 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$c = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$7(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$c(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$c(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$3 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$b = function (element) {\n      return api$3.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$3.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api$3.max(element, value, inclusions);\n      set$7(element, 'max-height', absMax + 'px');\n    };\n\n    var r$1 = function (left, top) {\n      var translate = function (x, y) {\n        return r$1(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r$1;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute$3 = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport$1 = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$6 = function (element, h) {\n      return api$2.set(element, h);\n    };\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$2.max(element, value, inclusions);\n      set$7(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var before$2 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$2 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$2(v, element);\n        });\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n    var prepend$1 = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$2 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$2(parent, index).fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$2(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$2(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$1(children(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$5(wrapper);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$8 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$8(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant$1([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$3 = function (element) {\n      return owner$4(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), function (frames) {\n        var offset = viewport$1(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box$1 = function (element) {\n      var xy = absolute$3(element);\n      var w = getOuter$1(element);\n      var h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    var absolute$2 = function (element) {\n      var position = find$2(element);\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds$3(window);\n    };\n\n    var value$3 = function (o) {\n      var or = function (_opt) {\n        return value$3(o);\n      };\n      var orThunk = function (_f) {\n        return value$3(o);\n      };\n      var map = function (f) {\n        return value$3(f(o));\n      };\n      var mapError = function (_f) {\n        return value$3(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant$1(o),\n        getOrThunk: constant$1(o),\n        getOrDie: constant$1(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error$1 = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity$1;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error$1(message);\n      };\n      var mapError = function (f) {\n        return error$1(f(message));\n      };\n      var bind = function (_f) {\n        return error$1(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity$1,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error$1(err);\n      }, value$3);\n    };\n    var Result = {\n      value: value$3,\n      error: error$1,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold$1 = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each$1(results, function (obj) {\n        fold$1(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult$1 = function (res) {\n      return fold$1(res, Result.error, Result.value);\n    };\n    var fromResult$1 = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map,\n      mapError: mapError,\n      fold: fold$1\n    };\n\n    var field$2 = function (key, newKey, presence, prop) {\n      return {\n        tag: 'field',\n        key: key,\n        newKey: newKey,\n        presence: presence,\n        prop: prop\n      };\n    };\n    var customField$1 = function (newKey, instantiator) {\n      return {\n        tag: 'custom',\n        newKey: newKey,\n        instantiator: instantiator\n      };\n    };\n    var fold = function (value, ifField, ifCustom) {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge$1 = baseMerge(shallow$1);\n\n    var required$2 = function () {\n      return {\n        tag: 'required',\n        process: {}\n      };\n    };\n    var defaultedThunk = function (fallbackThunk) {\n      return {\n        tag: 'defaultedThunk',\n        process: fallbackThunk\n      };\n    };\n    var defaulted$1 = function (fallback) {\n      return defaultedThunk(constant$1(fallback));\n    };\n    var asOption = function () {\n      return {\n        tag: 'option',\n        process: {}\n      };\n    };\n    var mergeWithThunk = function (baseThunk) {\n      return {\n        tag: 'mergeWithThunk',\n        process: baseThunk\n      };\n    };\n    var mergeWith = function (base) {\n      return mergeWithThunk(constant$1(base));\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu$a = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingRequired = function (path, key, obj) {\n      return nu$a(path, function () {\n        return 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu$a(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu$a(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu$a(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu$a(path, constant$1(err));\n    };\n\n    var value$2 = function (validator) {\n      var extract = function (path, val) {\n        return SimpleResult.bindError(validator(val), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = constant$1('val');\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue$1 = value$2(SimpleResult.svalue);\n\n    var requiredAccess = function (path, obj, key, bundle) {\n      return get$e(obj, key).fold(function () {\n        return missingRequired(path, key, obj);\n      }, bundle);\n    };\n    var fallbackAccess = function (obj, key, fallback, bundle) {\n      var v = get$e(obj, key).getOrThunk(function () {\n        return fallback(obj);\n      });\n      return bundle(v);\n    };\n    var optionAccess = function (obj, key, bundle) {\n      return bundle(get$e(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback, bundle) {\n      var opt = get$e(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return bundle(opt);\n    };\n    var extractField = function (field, path, obj, key, prop) {\n      var bundle = function (av) {\n        return prop.extract(path.concat([key]), av);\n      };\n      var bundleAsOption = function (optValue) {\n        return optValue.fold(function () {\n          return SimpleResult.svalue(Optional.none());\n        }, function (ov) {\n          var result = prop.extract(path.concat([key]), ov);\n          return SimpleResult.map(result, Optional.some);\n        });\n      };\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), function (v) {\n            var result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    var extractFields = function (path, obj, fields) {\n      var success = {};\n      var errors = [];\n      for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n        var field = fields_1[_i];\n        fold(field, function (key, newKey, presence, prop) {\n          var result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, function (err) {\n            errors.push.apply(errors, err);\n          }, function (res) {\n            success[newKey] = res;\n          });\n        }, function (newKey, instantiator) {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, val) {\n        return getDelegate().extract(path, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, isNonNullable));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, value) {\n        return fold(value, function (key) {\n          var _a;\n          return deepMerge(acc, (_a = {}, _a[key] = true, _a));\n        }, constant$1(acc));\n      }, {});\n      var extract = function (path, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter$2(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (values) {\n      var extract = function (path, o) {\n        return extractFields(path, o, values);\n      };\n      var toString = function () {\n        var fieldStrings = map$2(values, function (value) {\n          return fold(value, function (key, _okey, _presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (newKey, _instantiator) {\n            return 'state(' + newKey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, array) {\n        var results = map$2(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map$2(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf$1 = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$2(validator)).extract(path, keys);\n      };\n      var extract = function (path, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map$2(validKeys, function (vk) {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (_desc, processor) {\n      var getP = cached(processor);\n      var extract = function (path, val) {\n        return getP().extract(path, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOfObj = compose(arrOf, objOf);\n\n    var anyValue = constant$1(anyValue$1);\n    var typedValue = function (validator, expectedType) {\n      return value$2(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$2(function (a) {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    var chooseFrom = function (path, input, branches, ch) {\n      var fields = get$e(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), input);\n      });\n    };\n    var choose$2 = function (key, branches) {\n      var extract = function (path, input) {\n        var choice = get$e(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var arrOfVal = function () {\n      return arrOf(anyValue$1);\n    };\n    var valueOf = function (validator) {\n      return value$2(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf = function (validator, prop) {\n      return setOf$1(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extractValue = function (label, prop, obj) {\n      var res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extractValue(label, prop, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity$1);\n    };\n    var asRawOrDie$1 = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var choose$1 = function (key, branches) {\n      return choose$2(key, map$1(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n\n    var field$1 = field$2;\n    var customField = customField$1;\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains$2(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var required$1 = function (key) {\n      return field$1(key, key, required$2(), anyValue());\n    };\n    var requiredOf = function (key, schema) {\n      return field$1(key, key, required$2(), schema);\n    };\n    var requiredNumber = function (key) {\n      return requiredOf(key, number);\n    };\n    var requiredString = function (key) {\n      return requiredOf(key, string);\n    };\n    var requiredStringEnum = function (key, values) {\n      return field$1(key, key, required$2(), validateEnum(values));\n    };\n    var requiredBoolean = function (key) {\n      return requiredOf(key, boolean);\n    };\n    var requiredFunction = function (key) {\n      return requiredOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field$1(key, key, asOption(), value$2(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var requiredObjOf = function (key, objSchema) {\n      return field$1(key, key, required$2(), objOf(objSchema));\n    };\n    var requiredArrayOfObj = function (key, objFields) {\n      return field$1(key, key, required$2(), arrOfObj(objFields));\n    };\n    var requiredArrayOf = function (key, schema) {\n      return field$1(key, key, required$2(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field$1(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field$1(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted = function (key, fallback) {\n      return field$1(key, key, defaulted$1(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field$1(key, key, defaulted$1(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var generate$7 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$1(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each$1(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      var r = {};\n      each(obj, function (v, k) {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap$2 = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll$1 = function (keyvalues) {\n      var r = {};\n      each$1(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude = function (obj, fields) {\n      return exclude$1(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap$2(key, value);\n    };\n    var wrapAll = function (keyvalues) {\n      return wrapAll$1(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$4 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element, simulatedEvent.event.target);\n    };\n\n    var defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    var nu$9 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return __assign(__assign({}, defaultEventHandler), parts);\n    };\n    var all$2 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read$2 = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse$1 = function (handlers) {\n      var can = all$2(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each$1(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can: can,\n        abort: abort,\n        run: run\n      };\n    };\n\n    var constant = constant$1;\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitioncancel = constant('transitioncancel');\n    var transitionend = constant('transitionend');\n    var transitionstart = constant('transitionstart');\n    var selectstart = constant('selectstart');\n\n    var prefixName = function (name) {\n      return constant$1('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus$4 = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute$5 = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight$1 = prefixName('highlight');\n    var dehighlight$1 = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute$5());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive$2 = function (configs) {\n      return wrapAll(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run$1 = function (name, handler) {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run$1(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$9({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run$1(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run$1(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).getOrThunk(function () {\n          var closest = closest$4(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute$1 = runOnName(execute$5());\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$5 = function (element, content) {\n      var owner = owner$4(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$7(container);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element) && !eq(originator, target);\n    };\n    var events$i = derive$2([can(focus$4(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    var unique = 0;\n    var generate$6 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix$1 = constant$1('alloy-id-');\n    var idAttr$1 = constant$1('data-alloy-id');\n\n    var prefix = prefix$1();\n    var idAttr = idAttr$1();\n    var write = function (label, elem) {\n      var id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement$2(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    var generate$5 = function (prefix) {\n      return generate$6(prefix);\n    };\n\n    var make$8 = identity$1;\n\n    var NoContextApi = function (getComp) {\n      var getMessage = function (event) {\n        return 'The component must be in a context to execute: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      };\n      var fail = function (event) {\n        return function () {\n          throw new Error(getMessage(event));\n        };\n      };\n      var warn = function (event) {\n        return function () {\n          console.warn(getMessage(event));\n        };\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    var singleton$1 = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map$2(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$6('alloy-premade');\n    var premade$1 = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$e(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArray([\n          component.getApis(),\n          component\n        ], rest, false));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$8({ readState: constant$1('No State required') });\n      }\n    };\n    var nu$8 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom$1 = function (spec, all) {\n      var schema = map$2(all, function (a) {\n        return optionObjOf(a.name(), [\n          required$1('config'),\n          defaulted('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity$1);\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return constant$1(output);\n        })\n      };\n    };\n    var getBehaviours$3 = function (bData) {\n      return bData.list;\n    };\n    var getData$2 = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each(data, function (detail, key) {\n        each(detail, function (value, indexKey) {\n          var chain = get$e(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$7 = function (s) {\n      return {\n        classes: isUndefined(s.classes) ? [] : s.classes,\n        attributes: isUndefined(s.attributes) ? {} : s.attributes,\n        styles: isUndefined(s.styles) ? {} : s.styles\n      };\n    };\n    var merge = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine$2 = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each$1(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each$1(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read$2(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map$2(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse$1(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var _a$2;\n    var baseBehaviour = 'alloy.base.behaviour';\n    var schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option('value'),\n        option('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith((_a$2 = {}, _a$2[execute$5()] = [\n        'disabling',\n        baseBehaviour,\n        'toggling',\n        'typeaheadevents'\n      ], _a$2[focus$4()] = [\n        baseBehaviour,\n        'focusing',\n        'keying'\n      ], _a$2[systemInit()] = [\n        baseBehaviour,\n        'disabling',\n        'toggling',\n        'representing'\n      ], _a$2[input()] = [\n        baseBehaviour,\n        'representing',\n        'streaming',\n        'invalidating'\n      ], _a$2[detachedFromDom()] = [\n        baseBehaviour,\n        'representing',\n        'item-events',\n        'tooltipping'\n      ], _a$2[mousedown()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[touchstart()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[mouseover()] = [\n        'item-type-events',\n        'tooltipping'\n      ], _a$2[receive()] = [\n        'receiving',\n        'reflecting',\n        'tooltipping'\n      ], _a$2)), anyValue()),\n      option('domModification')\n    ]);\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', schema$z, spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map$2(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$7({});\n      }, nu$7);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read = function (element, attr) {\n      var value = get$d(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$4 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$8(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$8(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$3 = function (element, clazz) {\n      return add$4(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n    var hasAll = function (element, classes) {\n      return forall(classes, function (clazz) {\n        return has(element, clazz);\n      });\n    };\n\n    var get$5 = function (element) {\n      return element.dom.value;\n    };\n    var set$4 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set$5(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$4(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$2 = function (spec) {\n      var behaviours = get$e(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), function (name) {\n        var behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    var generateFrom = function (spec, all) {\n      return generateFrom$1(spec, all);\n    };\n    var generate$4 = function (spec) {\n      var all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build$2 = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton$1);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$4(spec);\n      var bList = getBehaviours$3(bBlob);\n      var bData = getData$2(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind$3(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, pure$2);\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$e(spec, 'components').getOr([]);\n      return map$2(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make$8(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build$2(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external$2({ element: element });\n    };\n    var external$2 = function (spec) {\n      var extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      var uid = extSpec.uid.getOrThunk(function () {\n        return generate$5('external');\n      });\n      writeOnly(extSpec.element, uid);\n      var me = {\n        uid: uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    var uids = generate$5;\n    var isSketchSpec$1 = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var build$1 = function (spec) {\n      return getPremade(spec).getOrThunk(function () {\n        var userSpecWithUid = isSketchSpec$1(spec) ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      });\n    };\n    var premade = premade$1;\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$3(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    var find$1 = function (queryElem) {\n      var dependent = closest$3(queryElem, function (elem) {\n        if (!isElement$2(elem)) {\n          return false;\n        }\n        var id = get$d(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$d(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$6('aria-owns');\n      var link = function (elem) {\n        set$8(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$7(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$1(queryElem).exists(function (owner) {\n        return isPartOf$1(component, owner);\n      });\n    };\n    var isPartOf$1 = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, function (s) {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$e(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find$5(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant$1(ignoreEvent);\n\n    var menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    var itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    var itemSchema$3 = constant$1(objOf(itemFields()));\n\n    var _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return requiredOf('markers', itemSchema$3());\n    };\n    var tieredMenuMarkers = function () {\n      return requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers$1 = function (required) {\n      return requiredObjOf('markers', map$2(required, required$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, required$2());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    };\n    var output$1 = function (name, value) {\n      return customField(name, constant$1(value));\n    };\n    var snapshot = function (name) {\n      return customField(name, identity$1);\n    };\n    var initSize = constant$1(_initSize);\n\n    var nu$6 = function (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit) {\n      if (alwaysFit === void 0) {\n        alwaysFit = false;\n      }\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        placement: placement,\n        restriction: boundsRestriction,\n        label: labelPrefix + '-' + placement,\n        alwaysFit: alwaysFit\n      };\n    };\n\n    var adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata$2 = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast$3 = adt$a.southeast;\n    var southwest$3 = adt$a.southwest;\n    var northeast$3 = adt$a.northeast;\n    var northwest$3 = adt$a.northwest;\n    var south$3 = adt$a.south;\n    var north$3 = adt$a.north;\n    var east$3 = adt$a.east;\n    var west$3 = adt$a.west;\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp$1 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$e(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds$1, restriction, bubbleOffset) {\n      var applyRestriction = function (dir, current) {\n        return restriction[dir].map(function (pos) {\n          var isVerticalAxis = dir === 'top' || dir === 'bottom';\n          var offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n          var comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n          var newPos = comparator(pos, current) + offset;\n          return isVerticalAxis ? clamp$1(newPos, bounds$1.y, bounds$1.bottom) : clamp$1(newPos, bounds$1.x, bounds$1.right);\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds$1.x);\n      var adjustedTop = applyRestriction('top', bounds$1.y);\n      var adjustedRight = applyRestriction('right', bounds$1.right);\n      var adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var labelPrefix$2 = 'layout';\n    var eastX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY$2 = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY$1 = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var north$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    };\n    var south$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    };\n    var east$2 = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    };\n    var west$2 = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    };\n    var all$1 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$2,\n        northwest$2,\n        southeast$2,\n        southwest$2,\n        north$2,\n        south$2\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$2,\n        northeast$2,\n        southwest$2,\n        southeast$2,\n        north$2,\n        south$2\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter$2(channels, function (ch) {\n        return contains$2(message.channels, ch);\n      });\n    };\n    var events$h = function (receiveConfig) {\n      return derive$2([run$1(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each$1(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute$1(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create$8 = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes$1 = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie$1(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: function (info, base) {\n          return lift2(getConfig(info), get$e(active, 'exhibit'), function (behaviourInfo, exhibitor) {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(function () {\n            return nu$7({});\n          });\n        },\n        name: constant$1(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$e(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var create$7 = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$8(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var createModes = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant$1(undefined);\n\n    var Receiving = create$7({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit$6 = function (base, posConfig) {\n      return nu$7({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$3 = function (element) {\n      return element.dom.focus();\n    };\n    var blur$1 = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve$1 = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      var toPx = function (num) {\n        return num + 'px';\n      };\n      return {\n        position: position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    var toOptions = function (position) {\n      return __assign(__assign({}, position), { position: Optional.some(position.position) });\n    };\n    var applyPositionCss = function (element, position) {\n      setOptions(element, toOptions(position));\n    };\n\n    var adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionRect = decision.rect;\n      var decisionX = decisionRect.x - x;\n      var decisionY = decisionRect.y - y;\n      var decisionWidth = decisionRect.width;\n      var decisionHeight = decisionRect.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata$2(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        var decisionRect = decision.rect;\n        return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$2, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var viewport = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds$1 = b();\n          var pos = translate$2(origin, bounds$1.x, bounds$1.y);\n          return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n        });\n      });\n    };\n    var translate$2 = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    adt$9.none;\n    var relative$1 = adt$9.relative;\n    var fixed$1 = adt$9.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var placementAttribute = 'data-alloy-placement';\n    var setPlacement$1 = function (element, placement) {\n      set$8(element, placementAttribute, placement);\n    };\n    var getPlacement = function (element) {\n      return getOpt(element, placementAttribute);\n    };\n    var reset$2 = function (element) {\n      return remove$7(element, placementAttribute);\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    var determinePosition = function (box, bounds) {\n      var boundsX = bounds.x, boundsY = bounds.y, boundsRight = bounds.right, boundsBottom = bounds.bottom;\n      var x = box.x, y = box.y, right = box.right, bottom = box.bottom, width = box.width, height = box.height;\n      var xInBounds = x >= boundsX && x <= boundsRight;\n      var yInBounds = y >= boundsY && y <= boundsBottom;\n      var originInBounds = xInBounds && yInBounds;\n      var rightInBounds = right <= boundsRight && right >= boundsX;\n      var bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      var sizeInBounds = rightInBounds && bottomInBounds;\n      var visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      var visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        visibleW: visibleW,\n        visibleH: visibleH\n      };\n    };\n    var calcReposition = function (box, bounds$1) {\n      var boundsX = bounds$1.x, boundsY = bounds$1.y, boundsRight = bounds$1.right, boundsBottom = bounds$1.bottom;\n      var x = box.x, y = box.y, width = box.width, height = box.height;\n      var maxX = Math.max(boundsX, boundsRight - width);\n      var maxY = Math.max(boundsY, boundsBottom - height);\n      var restrictedX = clamp$1(x, boundsX, maxX);\n      var restrictedY = clamp$1(y, boundsY, maxY);\n      var restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      var restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    var calcMaxSizes = function (direction, box, bounds) {\n      var upAvailable = constant$1(box.bottom - bounds.y);\n      var downAvailable = constant$1(bounds.bottom - box.y);\n      var maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant$1(box.right - bounds.x);\n      var eastAvailable = constant$1(bounds.right - box.x);\n      var maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth: maxWidth,\n        maxHeight: maxHeight\n      };\n    };\n    var attempt = function (candidate, width, height, bounds$1) {\n      var bubble = candidate.bubble;\n      var bubbleOffset = bubble.offset;\n      var adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      var newX = candidate.x + bubbleOffset.left;\n      var newY = candidate.y + bubbleOffset.top;\n      var box = bounds(newX, newY, width, height);\n      var _a = determinePosition(box, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, visibleW = _a.visibleW, visibleH = _a.visibleH;\n      var fits = originInBounds && sizeInBounds;\n      var fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      var isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      var _b = calcMaxSizes(candidate.direction, fittedBox, bounds$1), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\n      var reposition = {\n        rect: fittedBox,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    var attempts = function (element, candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, visibleW, visibleH, isVisible) {\n        var next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), function (newReposition, newVisibleW, newVisibleH, newIsVisible) {\n          var improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity$1, identity$1);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return singleton(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var api$1 = function () {\n      var subject = destroyable();\n      var run = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { run: run });\n    };\n    var value$1 = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$2(element, event, filter, handler);\n    };\n    var capture = function (element, event, handler) {\n      return capture$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    var timerAttr = 'data-alloy-transition-timer';\n    var isTransitioning$1 = function (element, transition) {\n      return hasAll(element, transition.classes);\n    };\n    var shouldApplyTransitionCss = function (transition, decision, lastPlacement) {\n      return lastPlacement.exists(function (placer) {\n        var mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    var hasChanges = function (position, intermediate) {\n      var round = function (value) {\n        return parseFloat(value).toFixed(3);\n      };\n      return find$4(intermediate, function (value, key) {\n        var newValue = position[key].map(round);\n        var val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    var getTransitionDuration = function (element) {\n      var get = function (name) {\n        var style = get$c(element, name);\n        var times = isString(style) ? style.split(/\\s*,\\s*/) : [];\n        return filter$2(times, isNotEmpty);\n      };\n      var parse = function (value) {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          var num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      var delay = get('transition-delay');\n      var duration = get('transition-duration');\n      return foldl(duration, function (acc, dur, i) {\n        var time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    var setupTransitionListeners = function (element, transition) {\n      var transitionEnd = unbindable();\n      var transitionCancel = unbindable();\n      var timer;\n      var isSourceTransition = function (e) {\n        var _a;\n        var pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      var transitionDone = function (e) {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          var type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      var transitionStarted = function () {\n        transitionEnd.set(bind(element, transitionend(), transitionDone));\n        transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n      };\n      if ('ontransitionstart' in element.dom) {\n        var transitionStart_1 = bind(element, transitionstart(), function (e) {\n          if (isSourceTransition(e)) {\n            transitionStart_1.unbind();\n            transitionStarted();\n          }\n        });\n      } else {\n        transitionStarted();\n      }\n      var duration = getTransitionDuration(element);\n      requestAnimationFrame(function () {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$8(element, timerAttr, timer);\n      });\n    };\n    var startTransitioning = function (element, transition) {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(function (timerId) {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    var applyTransitionCss = function (element, origin, position, transition, decision, lastPlacement) {\n      var shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$7(element, 'position', position.position);\n        var rect = toBox(origin, element);\n        var intermediatePosition_1 = reposition(origin, __assign(__assign({}, decision), { rect: rect }));\n        var intermediateCssOptions = mapToObject(properties, function (prop) {\n          return intermediatePosition_1[prop];\n        });\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$1(p),\n        height: getOuter$2(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position$2 = function (element, decision, options) {\n      var positionCss = reposition(options.origin, decision);\n      options.transition.each(function (transition) {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    var setPlacement = function (element, decision) {\n      setPlacement$1(element, decision.placement);\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    var anchored = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable$1 = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, lastPlacement, getBounds, overrideOptions, transition) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction,\n        lastPlacement: lastPlacement,\n        transition: transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    var nu$5 = function (xOffset, yOffset, classes, insetModifier) {\n      if (insetModifier === void 0) {\n        insetModifier = 1;\n      }\n      var insetXOffset = xOffset * insetModifier;\n      var insetYOffset = yOffset * insetModifier;\n      var getClasses = function (prop) {\n        return get$e(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-xOffset, yOffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(xOffset, yOffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-xOffset / 2, yOffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-xOffset, -yOffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(xOffset, -yOffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-xOffset / 2, -yOffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(xOffset, -yOffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-xOffset, -yOffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        insetNortheast: function () {\n          return make(insetXOffset, insetYOffset, [\n            'top',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetNorthwest: function () {\n          return make(-insetXOffset, insetYOffset, [\n            'top',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetNorth: function () {\n          return make(-insetXOffset / 2, insetYOffset, [\n            'top',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetSoutheast: function () {\n          return make(insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetSouthwest: function () {\n          return make(-insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetSouth: function () {\n          return make(-insetXOffset / 2, -insetYOffset, [\n            'bottom',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetEast: function () {\n          return make(-insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'right',\n            'inset'\n          ]);\n        },\n        insetWest: function () {\n          return make(insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'left',\n            'inset'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$5(0, 0, {});\n    };\n\n    var nu$4 = identity$1;\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$c(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement$2(current) && get$d(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$y = function () {\n      return optionObjOf('layouts', [\n        required$1('onLtr'),\n        required$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$4 = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement$4 = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$4(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$4(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity$1, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity$1, identity$1);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$1 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner$4(frame);\n        var compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner$4(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var getBox = function (left, top, width, height) {\n      var point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$4(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$4({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$6 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$6 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity$1, identity$1, identity$1);\n    };\n    var before = adt$6.before;\n    var on$1 = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before,\n      on: on$1,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$1\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    var getBounds$2 = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant$1(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText$1, 'text');\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name$2(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name$2(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all$3(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner$4(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getBounds$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    var point$1 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce$1 = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point$1(element, offset);\n      } else if (offset < children$1.length) {\n        return point$1(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText$1(last) ? get$3(last).length : children(last).length;\n        return point$1(last, len);\n      }\n    };\n\n    var descendOnce = function (element, offset) {\n      return isText$1(element) ? point$1(element, offset) : descendOnce$1(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce(sel.start, sel.soffset);\n        var modFinish = descendOnce(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$1 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before$2(sel.start, x);\n          var rect = getFirstRect(win, SimSelection.exact(x, 0, x, 1));\n          remove$5(x);\n          return rect;\n        });\n        return optRect.bind(function (rawRect) {\n          return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement$2(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    var labelPrefix$1 = 'link-layout';\n    var eastX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var all = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1\n      ];\n    };\n\n    var placement = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$4(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    var PositionSchema = [\n      defaulted('useFixed', never),\n      option('getBounds')\n    ];\n    var PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute$3(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee, lastPlace, transition) {\n      var anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, getBounds, anchoring.overrides, transition);\n    };\n    var position$1 = function (component, posConfig, posState, placee, placementSpec) {\n      positionWithin(component, posConfig, posState, placee, placementSpec, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, placee, placementSpec, boxElement) {\n      var boundsBox = boxElement.map(box$1);\n      return positionWithinBounds(component, posConfig, posState, placee, placementSpec, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, placee, placementSpec, bounds) {\n      var placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      var anchorage = placeeDetail.anchor;\n      var element = placee.element;\n      var placeeState = posState.get(placee.uid);\n      preserve$1(function () {\n        set$7(element, 'position', 'fixed');\n        var oldVisibility = getRaw(element, 'visibility');\n        set$7(element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant$1).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          var newState = doPlace(component, origin, anchoring, getBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(function () {\n          remove$6(element, 'visibility');\n        }, function (vis) {\n          set$7(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n    var reset$1 = function (component, pConfig, posState, placee) {\n      var element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (prop) {\n        return remove$6(element, prop);\n      });\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    var init$g = function () {\n      var state = {};\n      var set = function (id, data) {\n        state[id] = data;\n      };\n      var get = function (id) {\n        return get$e(state, id);\n      };\n      var clear = function (id) {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: function () {\n          return state;\n        },\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    var Positioning = create$7({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each$1(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach$1 = function (parent, child) {\n      append$2(parent.element, child.element);\n    };\n    var detachChildren$1 = function (component) {\n      each$1(component.components(), function (childComp) {\n        return remove$5(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren$1(component);\n      var deleted = difference(subs, newChildren);\n      each$1(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach = function (parent, child) {\n      attachWith(parent, child, append$2);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren = function (component) {\n      var subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open$1 = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close$1 = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen$1 = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen$1(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState$2 = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$7(sandbox.element, attr);\n      }, function (v) {\n        set$8(sandbox.element, attr, v);\n      });\n      set$7(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$7(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$7(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    var events$g = function (sandboxConfig, sandboxState) {\n      return derive$2([run$1(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close$1(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init$f = function () {\n      var contents = value$1();\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        readState: readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Sandboxing = create$7({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant$1('dismiss.popups');\n    var repositionPopups = constant$1('reposition.popups');\n    var mouseReleased = constant$1('mouse.released');\n\n    var schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([required$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad$5 = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    var events$f = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var memory$1 = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$8({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$e(dataByValue.get(), itemString).orThunk(function () {\n          return get$e(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each$1(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$e(item, 'meta').each(function (meta) {\n            get$e(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$8({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$e = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    var setValue$2 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$2 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(function () {\n        return store.getFallbackEntry(key);\n      });\n    };\n    var onLoad$4 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$1 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$1 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$3 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue,\n        getValue: getValue,\n        onLoad: onLoad$2,\n        onUnload: onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    var Representing = create$7({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map$2(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([customField('dump', identity$1)]));\n    };\n    var get$2 = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, derive$1(original)), data.dump);\n    };\n    var SketchBehaviours = {\n      field: field,\n      augment: augment,\n      get: get$2\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has$2(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$e(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$e(value, 'components').getOr([]);\n        var substituted = bind$3(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity$1);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind$3(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant$1(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single$2 = adt$3.single;\n    var multiple = adt$3.multiple;\n    var placeholder = constant$1(_placeholder);\n\n    var adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted('factory', { sketch: identity$1 });\n    var fSchema = defaulted('schema', []);\n    var fName = required$1('name');\n    var fPname = field$1('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$6(typeSpec.name) + '>';\n    }), anyValue());\n    var fGroupSchema = customField('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted('defaults', constant$1({}));\n    var fOverrides = defaulted('overrides', constant$1({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity$1, identity$1, identity$1, identity$1);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie$1('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$2.required, requiredSpec);\n    var external$1 = convert(adt$2.external, externalSpec);\n    var optional = convert(adt$2.optional, optionalSpec);\n    var group = convert(adt$2.group, groupSpec);\n    var original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each$1(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single$2(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single$2(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map$2(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    var generate$3 = function (owner, parts) {\n      var r = {};\n      each$1(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne$1 = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind$3(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return requiredObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map$2(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components$1 = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, _k) {\n        return constant$1(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll(map$2(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field$1('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite$1 = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$5('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var single = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$3(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var inside = function (target) {\n      return name$2(target) === 'input' && get$d(target, 'type') !== 'radio' || name$2(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [required$1('find')];\n\n    var Composing = create$7({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$1 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains$2(nativeDisabled, name$2(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$8(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$7(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$d(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$8(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$8(component.element, 'aria-disabled', 'false');\n    };\n    var disable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$3 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable$1,\n        disable: disable$1,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$3\n    });\n\n    var exhibit$5 = function (base, disableConfig) {\n      return nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$e = function (disableConfig, disableState) {\n      return derive$2([\n        abort(execute$5(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$1)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$7({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    var highlight = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find$5(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta$2 = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex$1(items, function (item) {\n        return has(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$7({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains$2(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose = function (transitions, event) {\n      var transition = find$5(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom$2 = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted('focusManager', dom$2()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains$2([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output$1('handler', me),\n          output$1('state', stateInit),\n          output$1('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run$1(focus$4(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run$1(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$5 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$1(element, sel);\n        }).getOr(element);\n        return get$b(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter$2(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$1(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant$1([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant$1([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$5(customField('cyclic', never));\n\n    var CyclicType = create$5(customField('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    var execute$4 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    var getKeyupRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, function () {\n      return Optional.none();\n    });\n\n    var flatgrid$1 = function () {\n      var dimensions = value$1();\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set({\n          numRows: numRows,\n          numColumns: numColumns\n        });\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$8({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$d = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$1 = useV;\n    var south$1 = useV;\n    var move$1 = useV;\n\n    var isHidden$1 = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden$1(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex$1(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex = function (elements, target) {\n      return findIndex$1(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp$1(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, -1);\n    };\n    var cycleUp$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, -1);\n    };\n    var cycleDown$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, +1);\n    };\n\n    var schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    var focusIn$3 = function (component, gridConfig, _gridState) {\n      descendant(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent$1 = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, gridConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent$1(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove$2 = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape$1 = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1);\n    var moveRight$3 = doMove$2(cycleRight$1);\n    var moveNorth$1 = doMove$2(cycleUp$1);\n    var moveSouth$1 = doMove$2(cycleDown$1);\n    var getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    var getKeyupRules$4 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name$2(candidate) === 'button' && get$d(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true)\n    ];\n    var findCurrent = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, flowConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$2 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$3 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2),\n        rule(inSet(ESCAPE), doEscape)\n      ];\n    };\n    var getKeyupRules$3 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp$1(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp$1(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, -1);\n    };\n    var cycleUp = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, -1);\n    };\n    var cycleDown = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    var focusIn$1 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$1 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map$2(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$1(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft = doMove(cycleLeft, moveLeft$1);\n    var moveRight = doMove(cycleRight, moveRight$1);\n    var moveNorth = doMove(cycleUp, moveUp$1);\n    var moveSouth = doMove(cycleDown, moveDown$1);\n    var getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    var getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    var execute = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn = function (component, menuConfig, _state) {\n      descendant(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    var getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$2 = function (component, replaceConfig, replaceState, data) {\n      preserve$1(function () {\n        var newChildren = map$2(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append$2, appendee);\n    };\n    var prepend = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend$1, prependee);\n    };\n    var remove = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find$5(children, function (child) {\n        return eq(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex$1(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$2,\n        contents: contents\n    });\n\n    var Replacing = create$7({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$d = function (name, eventHandlers) {\n      var events = derive$2(eventHandlers);\n      return create$7({\n        fields: [required$1('enabled')],\n        name: name,\n        active: { events: constant$1(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    var exhibit$4 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    var events$c = function (focusConfig) {\n      return derive$2([run$1(focus$4(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    var Focusing = create$7({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle$2 = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$1 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$1\n    });\n\n    var exhibit$3 = function () {\n      return nu$7({});\n    };\n    var events$b = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      var load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$7({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$a = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute$1(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus$1 = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant$1(hoverEvent);\n    var focus$1 = constant$1(focusEvent);\n\n    var builder$2 = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArray(__spreadArray([], pointerEvents(), true), [\n            run$1(mouseover(), onHover),\n            run$1(focusItem(), Focusing.focus)\n          ], false))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive$2([stopper(focusItem())])\n      };\n    };\n    var schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    var owner$2 = constant$1('item-widget');\n    var parts$h = constant$1([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts$h());\n      var components = components$1(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    var itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$g = constant$1([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return has$2(u, 'uid') ? u : __assign(__assign({}, u), { uid: generate$5('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector')\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus = constant$1('alloy.menu-focus');\n\n    var make$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive$2([\n          run$1(focus$1(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run$1(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    var transpose$1 = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$e(byMenu, finish).bind(function (triggerItem) {\n        return get$e(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$2 = function (menus, expansions) {\n      var items = {};\n      each(menus, function (menuItems, menu) {\n        each$1(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose$1(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return get$e(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$c = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = value$1();\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$4(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter$2(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind$3(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return is$1(primary.get(), menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$e(expansions.get(), itemValue).map(function (menu) {\n          var current = get$e(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$e(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$e(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$e(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$c,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$6 = function (detail, _rawUiSpec) {\n      var submenuParentItems = value$1();\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom$2()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find$5(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$1(detail.data.menus, function (data, _menuName) {\n          return bind$3(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map$2(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each$1(others, function (o) {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter$2(items, function (i) {\n            return get$d(i, 'aria-haspopup') === 'true';\n          });\n          each$1(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(r);\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each(parentItems, function (v, k) {\n          var expanded = contains$2(path, k);\n          set$8(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each$1(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          var value = getItemValue(item);\n          return layeredState.expand(value).bind(function (path) {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(function (menuName) {\n              return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n                var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n                if (!inBody(activeMenu.element)) {\n                  Replacing.append(container, premade(activeMenu));\n                }\n                detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n                if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                  Highlighting.highlightFirst(activeMenu);\n                  return updateMenuPath(container, layeredState, path);\n                } else {\n                  Highlighting.dehighlightAll(activeMenu);\n                  return Optional.some(item);\n                }\n              });\n            });\n          });\n        }\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$1(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive$2([\n        run$1(focus(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute$1(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run$1(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$d(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem$1 = constant$1('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem = function (text) {\n      return {\n        value: generate$6(collapseItem$1()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightImmediately', true),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, placementSpec, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: __assign({\n              type: 'submenu',\n              item: item\n            }, getSubmenuLayouts(triggeringPaths))\n          });\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: __assign({\n                type: 'submenu',\n                item: st.triggeringItem\n              }, submenuLayouts)\n            });\n          });\n        }\n      });\n    };\n    var factory$m = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf$1(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, thing, placementSpec) {\n        showWithin(sandbox, thing, placementSpec, Optional.none());\n      };\n      var showWithin = function (sandbox, thing, placementSpec, boxElement) {\n        showWithinBounds(sandbox, thing, placementSpec, function () {\n          return boxElement.map(function (elem) {\n            return box$1(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, thing, placementSpec, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, placementSpec, menuSpec) {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      var showMenuWithinBounds = function (sandbox, placementSpec, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$m,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var labelPrefix = 'layout-inset';\n    var westEdgeX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor) {\n      return anchor.y;\n    };\n    var southY = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var southwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var southeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var northwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), labelPrefix);\n    };\n    var northeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), labelPrefix);\n    };\n    var north = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    };\n    var south = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    };\n    var east = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    };\n    var west = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    };\n    var lookupPreserveLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    var preserve = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    var lookupFlippedLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    var flip$2 = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$l = function (detail) {\n      var events = events$a(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single({\n      name: 'Button',\n      factory: factory$l,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    var defaultIconName = 'temporary-placeholder';\n    var defaultIcon = function (icons) {\n      return function () {\n        return get$e(icons, defaultIconName).getOr('!not found!');\n      };\n    };\n    var getIconName = function (name, icons) {\n      var lcName = name.toLowerCase();\n      if (global$e.isRtl()) {\n        var rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    var lookupIcon = function (name, icons) {\n      return get$e(icons, getIconName(name, icons));\n    };\n    var get$1 = function (name, iconProvider) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    var getOr = function (name, iconProvider, fallbackIcon) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    var needsRtlTransform = function (iconName) {\n      return global$e.isRtl() ? has$2(rtlTransform, iconName) : false;\n    };\n    var addFocusableBehaviour = function () {\n      return config('add-focusable', [runOnAttached(function (comp) {\n          child(comp.element, 'svg').each(function (svg) {\n            return set$8(svg, 'focusable', 'false');\n          });\n        })]);\n    };\n    var renderIcon$2 = function (spec, iconName, icons, fallbackIcon) {\n      var _a, _b;\n      var rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      var iconHtml = get$e(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1(__spreadArray(__spreadArray([], (_b = spec.behaviours) !== null && _b !== void 0 ? _b : [], true), [addFocusableBehaviour()], false))\n      };\n    };\n    var render$3 = function (iconName, spec, iconProvider, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      return renderIcon$2(spec, iconName, iconProvider(), fallbackIcon);\n    };\n    var renderFirst = function (iconNames, spec, iconProvider) {\n      var icons = iconProvider();\n      var iconName = find$5(iconNames, function (name) {\n        return has$2(icons, getIconName(name, icons));\n      });\n      return renderIcon$2(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$k = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      var notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      var components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single({\n      name: 'Notification',\n      factory: factory$k,\n      configFields: [\n        option('level'),\n        required$1('progress'),\n        required$1('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var sharedBackstage = extras.backstage.shared;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south;\n        case 'tc-tc':\n          return north;\n        case 'tc-bc':\n          return north$2;\n        case 'bc-tc':\n        default:\n          return south$2;\n        }\n      };\n      var reposition = function (notifications) {\n        if (notifications.length > 0) {\n          each$1(notifications, function (notification, index) {\n            if (index === 0) {\n              notification.moveRel(null, 'banner');\n            } else {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {}\n        }, sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$f.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        var getBounds = function () {\n          var contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n          var win$1 = win();\n          var x = clamp$1(win$1.x, contentArea.x, contentArea.right);\n          var y = clamp$1(win$1.y, contentArea.y, contentArea.bottom);\n          var right = Math.max(contentArea.right, win$1.right);\n          var bottom = Math.max(contentArea.bottom, win$1.bottom);\n          return Optional.some(bounds(x, y, right - x, bottom - y));\n        };\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, premade(notification), {\n              anchor: {\n                type: 'makeshift',\n                x: x,\n                y: y\n              }\n            });\n          },\n          moveRel: function (element, rel) {\n            var notificationSpec = premade(notification);\n            var anchorOverrides = { maxHeightFunction: expandable$1() };\n            if (rel !== 'banner' && isNonNullable(element)) {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            } else {\n              var anchor = __assign(__assign({}, sharedBackstage.anchors.banner()), { overrides: anchorOverrides });\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: anchor }, getBounds);\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains$2([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$d(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$2(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect = function (elm) {\n      return closest$1(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup$e = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup$e };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText(node)) {\n        return point(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup$2 = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter$2(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$c.all(map$2(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted('type', 'autocompleteitem'),\n      defaulted('active', false),\n      defaulted('disabled', false),\n      defaulted('meta', {}),\n      requiredString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      requiredString('type'),\n      requiredString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      requiredFunction('fetch'),\n      requiredFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted('type', 'contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionString('label'),\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted('type', 'contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each$1(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register$b = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, identity$1);\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter$2(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$e(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    var chunk = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk$1(items, numColumns);\n        return map$2(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity$1\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each$1(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      requiredString('type'),\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      requiredString('type'),\n      requiredString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$1 = valueThunk(function () {\n      return choose$2('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      requiredString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field$1('value', 'value', defaultedThunk(function () {\n        return generate$6('menuitem-value');\n      }), anyValue()),\n      defaulted('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('label'),\n      requiredArrayOf('items', itemSchema$1),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      requiredString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var baseFields = [\n      requiredString('type'),\n      requiredString('fancytype'),\n      defaultedFunction('onAction', noop)\n    ];\n    var insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    var colorSwatchFields = [defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        optionArrayOf('colors', anyValue())\n      ])].concat(baseFields);\n    var fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      requiredString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      requiredFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex$1(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$6('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$6('tooltip.exclusive');\n    var ShowTooltipEvent = generate$6('tooltip.show');\n    var HideTooltipEvent = generate$6('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$9 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run$1(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run$1(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run$1(highlight$1(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(dehighlight$1(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaulted('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted('anchor', function (comp) {\n        return {\n          type: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ]),\n            onRtl: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$b = function () {\n      var timer = value$1();\n      var popup = value$1();\n      var clearTimer = function () {\n        timer.on(clearTimeout);\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Tooltipping = create$7({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$a.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$b.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getContentLanguages = function (editor) {\n      return editor.getParam('content_langs', undefined, 'array');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range$2(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter$2(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedToolbarContainerTarget = function (editor) {\n      return editor.getParam('fixed_toolbar_container_target');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerTarget = function (editor) {\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      var selector = fixedContainerSelector(editor);\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      var element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerTarget(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var getStickyToolbarOffset = function (editor) {\n      return editor.getParam('toolbar_sticky_offset', 0, 'number');\n    };\n    var isDraggableModal$1 = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$1(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a$1;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute$1(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a$1 = {}, _a$1[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a$1);\n\n    var componentRenderPipeline = cat;\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$9.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map$2(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return global$9.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon$1 = function (name, icons, classes) {\n      if (classes === void 0) {\n        classes = [iconClass];\n      }\n      return render$3(name, {\n        tag: 'div',\n        classes: classes\n      }, icons);\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$e.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$e.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return renderIcon$1('checkmark', icons, [checkmarkClass]);\n    };\n    var renderSubmenuCaret = function (icons) {\n      return renderIcon$1('chevron-right', icons, [caretClass]);\n    };\n    var renderDownwardsCaret = function (icons) {\n      return renderIcon$1('chevron-down', icons, [caretClass]);\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (item, providerBackstage, fallbackIcon) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var itemText = item.ariaLabel;\n      var itemValue = item.value;\n      var iconSvg = item.iconContent.map(function (name) {\n        return getOr(name, providerBackstage.icons, fallbackIcon);\n      });\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatches__picker-btn'], false),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatch--remove'], false),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$e.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ]\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      var iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      var renderIcon = function (iconName) {\n        return render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      };\n      var renderEmptyIcon = function () {\n        return Optional.some({ dom: iconSpec });\n      };\n      var leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$e(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                type: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable$1 }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external$2({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$b.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$e.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant$1({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render$2 = function (items, extras) {\n      return map$2(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render$2(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains$2(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each$1(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$f = generate$3(owner$2(), parts$h());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round$1 = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded$1 = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError$1 = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var hexToHsv = function (hex) {\n      return fromRgb(fromHex(hex));\n    };\n    var hsvToHex = function (hsv) {\n      return fromRgba(fromHsv(hsv));\n    };\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols$2 = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors$1 = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors$2 = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map$2(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var fallbackColor = '#000000';\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return Optional.from(color);\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors$2(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols$2(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, fallbackColor);\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch$1 = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = getCurrentColor(editor, format);\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch$1(getColors$2(editor), hasCustomColors$1(editor)),\n        onAction: function (_splitButtonApi) {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var isValid = false;\n        var onSubmit = function (api) {\n          var data = api.getData();\n          var hex = data.colorpicker;\n          if (isValid) {\n            callback(Optional.from(hex));\n            api.close();\n          } else {\n            editor.windowManager.alert(editor.translate([\n              'Invalid hex color code: {0}',\n              hex\n            ]));\n          }\n        };\n        var onAction = function (_api, details) {\n          if (details.name === 'hex-valid') {\n            isValid = details.value;\n          }\n        };\n        var initialData = { colorpicker: value };\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: onSubmit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$a = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(fallbackColor);\n      var lastBackColor = Cell(fallbackColor);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map$2(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColorItems(spec, backstage);\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    var getColorItems = function (spec, backstage) {\n      var useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(function () {\n        return getColors$1(backstage.colorinput.getColors(), useCustomColors);\n      }, function (colors) {\n        return colors.concat(getAdditionalColors(useCustomColors));\n      });\n    };\n\n    var cellOverEvent = generate$6('cell-over');\n    var cellExecuteEvent = generate$6('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind$3(cells, function (cellRow) {\n        return map$2(cellRow, premade);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 'x' + row);\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$6('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var emptyLabelText = makeLabelText(0, 0);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(function (c) {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return get$e(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator$3 = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator$3(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator$3(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map$2(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom$2();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$9 = function (editor, sharedBackstage) {\n      var activeAutocompleter = value$1();\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run$1(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.clear();\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register$b(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind$3(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          });\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')), {\n          anchor: {\n            type: 'node',\n            root: SugarElement.fromDom(editor.getBody()),\n            node: Optional.from(ac.element)\n          }\n        });\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup$2(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$9 };\n\n    var closest = function (scope, selector, isRoot) {\n      return closest$1(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = value$1();\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$e(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$2(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$1().browser.isFirefox();\n    };\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'focus', handler);\n      } else {\n        return bind(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'blur', handler);\n      } else {\n        return bind(container, 'focusout', handler);\n      }\n    };\n    var setup$d = function (container, rawSettings) {\n      var settings = __assign({ stopBackspace: true }, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = value$1();\n      var onPaste = bind(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      var onKeydown = bind(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = value$1();\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      var unbind = function () {\n        each$1(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive = function (rawEvent, rawTarget) {\n      var source = get$e(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).bind(function (id) {\n          return get$e(handlers, id);\n        }).map(function (descHandler) {\n          return eventHandler(elem, descHandler);\n        });\n      };\n      var filterByType = function (type) {\n        return get$e(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return get$e(registry, type).bind(function (handlers) {\n          return closest$4(target, function (elem) {\n            return findHandler(handlers, elem);\n          }, isAboveRoot);\n        });\n      };\n      var unregisterId = function (id) {\n        each(registry, function (handlersById, _eventName) {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).getOrThunk(function () {\n          return write('uid-', component.element);\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$e(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$j = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$2(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$d(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$3(target);\n          }, function (_alloyId) {\n            monitorEvent(focus$4(), target, function (logger) {\n              triggerHandler(lookup, focus$4(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText$1(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText$1(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach(root, component);\n      };\n      var remove = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each$1(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$l = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$e = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$i = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$6(detail.prefix);\n            ps.label().each(function (label) {\n              set$8(label.element, 'for', id);\n              set$8(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$6(detail.prefix);\n              set$8(descriptor.element, 'id', descriptorId);\n              set$8(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite({\n      name: 'FormField',\n      configFields: schema$l(),\n      partFields: parts$e(),\n      factory: factory$i,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$2 = function (base, tabConfig) {\n      return nu$7({\n        attributes: wrapAll([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$7({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel$2 = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$6('form-component-change');\n    var formCloseEvent = generate$6('form-close');\n    var formCancelEvent = generate$6('form-cancel');\n    var formActionEvent = generate$6('form-action');\n    var formSubmitEvent = generate$6('form-submit');\n    var formBlockEvent = generate$6('form-block');\n    var formUnblockEvent = generate$6('form-unblock');\n    var formTabChangeEvent = generate$6('form-tabchange');\n    var formResizeEvent = generate$6('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$1(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$d(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map$2(items, function (item) {\n          var itemText = global$e.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$7.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        var html = map$2(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set$5(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run$1(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(function (comp) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n        })),\n        runOnExecute$1(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity$1 },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$8(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$k = constant$1([\n      option('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$5(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$5(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element);\n              if (current !== data) {\n                set$4(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$h = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single({\n      name: 'Input',\n      configFields: schema$k(),\n      factory: factory$h\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module));\n    var Promise$1 = module.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$1(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$5 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$5(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$5(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$5(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$5(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$2 = function (baseFn) {\n      return make$5(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make$5(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$2,\n      pure: pure\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name = name$2(elem);\n      return contains$2(ariaElements, name);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    var events$8 = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive$2([run$1(validatorInfo.onEvent, function (component) {\n            run(component, invalidConfig, invalidState).get(identity$1);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$7({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    var init$a = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$e(coupled, name).getOrThunk(function () {\n            var builder = get$e(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Coupling = create$7({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant$1('sink');\n    var partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var type = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$5(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, menu, { anchor: anchor });\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, submenu, {\n                anchor: {\n                  type: 'submenu',\n                  item: item\n                }\n              });\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, primaryMenu, { anchor: anchor });\n              each$1(submenuTriggers, function (st) {\n                Positioning.position(sink, st.triggeredMenu, {\n                  anchor: {\n                    type: 'submenu',\n                    item: st.triggeringItem\n                  }\n                });\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$a(hotspot.element);\n      if (useMinWidth) {\n        set$7(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$6(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox$1 = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel$1({ isExtraPart: never })), receivingChannel({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$j = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$d = constant$1([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$g = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$g,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$1 = function () {\n      return nu$7({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$7 = function () {\n      return derive$2([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    var Unselecting = create$7({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$6('color-input-change');\n    var colorSwatchChangeEvent = generate$6('color-swatch-change');\n    var colorPickerCancelEvent = generate$6('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$7(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$2,\n              southeast$2,\n              south$2\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$2,\n              southwest$2,\n              south$2\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$7(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive$2([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [customField('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant$1(_sliderChangeEvent);\n    var isTouchEvent$2 = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange$3 = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue$2 = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$2(xValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(min));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(max));\n    };\n    var moveBy$2 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$2(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$a(thumb.element) / 2;\n      set$7(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1);\n    var onRight$2 = handleMovement$2(1);\n    var onUp$2 = Optional.none;\n    var onDown$2 = Optional.none;\n    var edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      var yValue = findValueOfOffset(spectrum, detail, value.top);\n      var val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    var moveBy = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var setToMax = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$a(thumb.element) / 2;\n      var thumbYRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$7(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft = handleMovement(-1, false);\n    var onRight = handleMovement(1, false);\n    var onUp = handleMovement(-1, true);\n    var onDown = handleMovement(1, true);\n    var edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch$2 = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var setValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      var changeValue = function (slider, newValue) {\n        setValue(slider, newValue);\n        var thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), onDragStart),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          setValue: setValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: function (apis, slider, value) {\n          apis.setValue(slider, value);\n        },\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var fieldsUpdate = generate$6('rgb-hex-update');\n    var sliderUpdate = generate$6('slider-update');\n    var paletteUpdate = generate$6('palette-update');\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$1 = 'form';\n    var schema$i = [field('formBehaviours', [Representing])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field: field,\n          record: constant$1(record)\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    var toResult = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$6('valid-input');\n    var invalidInput = generate$6('invalid-input');\n    var validatingInput = generate$6('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$7(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex: hex });\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run$1(validInput, onValidInput),\n                run$1(invalidInput, onInvalidInput),\n                run$1(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setPaletteHue = function (slider, hue) {\n        var canvas = slider.components()[0].element.dom;\n        var hsv = hsvColour(hue, 100, 100);\n        var rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      var setPaletteThumb = function (slider, hex) {\n        var hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: function (_apis, slider, hue) {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: function (_apis, slider, hex) {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var hueSliderToDegrees = function (hue) {\n          return (100 - hue) / 100 * 360;\n        };\n        var hueDegreesToSlider = function (hue) {\n          return 100 - hue / 360 * 100;\n        };\n        var state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        var memSlider = record(sliderFactory(translate, getClass));\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, _hex, hue) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var updateSlider = function (anyInSystem, _hex, hue) {\n          memSlider.getOpt(anyInSystem).each(function (slider) {\n            Slider.setValue(slider, { y: hueDegreesToSlider(hue) });\n          });\n        };\n        var updatePaletteThumb = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        var updateState = function (hex, hue) {\n          var rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        var runUpdates = function (anyInSystem, hex, hue, updates) {\n          updateState(hex, hue);\n          each$1(updates, function (update) {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        var onPaletteUpdate = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldHue = state.paletteHue.get();\n            var newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        var onSliderUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var hue = hueSliderToDegrees(simulatedEvent.event.value.y);\n            var oldRgb = state.paletteRgba.get();\n            var oldHsv = fromRgb(oldRgb);\n            var newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        var onFieldsUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return function (form, simulatedEvent) {\n            var hex = simulatedEvent.event.hex;\n            var hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento$1 = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child$2(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento$1,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return has$2(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = value$1();\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = value$1();\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$6.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.on(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(value);\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted('preprocess', identity$1),\n      defaulted('postprocess', identity$1)\n    ]);\n    var memento = function (mem, rawProcessors) {\n      var ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$4);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$7, set$5);\n    };\n    var memory = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$5.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each$1(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run$1('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragover', stopper),\n              run$1('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run$1(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$6('alloy-fake-before-tabstop');\n    var afterObject = generate$6('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$1().browser.isIE() || detect$1().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$8(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$8(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$3 = function (width, height) {\n      return resize$3(document.createElement('canvas'), width, height);\n    };\n    var clone = function (canvas) {\n      var tCanvas = create$3(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize$3 = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth$1 = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight$1 = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$3(getWidth$1(image), getHeight$1(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$2 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant$1(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant$1(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$2(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$2(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert$1 = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness$1 = complexAdjustableColorFilter(adjustBrightness);\n    var contrast$1 = complexAdjustableColorFilter(adjustContrast);\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen$1 = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma$1 = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth$1(image);\n      var sH = getHeight$1(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth$1(image);\n        var sH = getHeight$1(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$3(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var ceilWithPrecision = function (num, precision) {\n      if (precision === void 0) {\n        precision = 2;\n      }\n      var mul = Math.pow(10, precision);\n      var upper = Math.round(num * mul);\n      return Math.ceil(upper / mul);\n    };\n    var rotate$1 = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var degrees = angle < 0 ? 360 + angle : angle;\n      var rad = degrees * Math.PI / 180;\n      var width = image.width;\n      var height = image.height;\n      var sin = Math.sin(rad);\n      var cos = Math.cos(rad);\n      var newWidth = ceilWithPrecision(Math.abs(width * cos) + Math.abs(height * sin));\n      var newHeight = ceilWithPrecision(Math.abs(width * sin) + Math.abs(height * cos));\n      var canvas = create$3(newWidth, newHeight);\n      var context = get2dContext(canvas);\n      context.translate(newWidth / 2, newHeight / 2);\n      context.rotate(rad);\n      context.drawImage(image, -width / 2, -height / 2);\n      return fromCanvas(canvas, type);\n    };\n    var flip$1 = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$3(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$3(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$2 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert = function (ir) {\n      return invert$1(ir);\n    };\n    var sharpen = function (ir) {\n      return sharpen$1(ir);\n    };\n    var gamma = function (ir, value) {\n      return gamma$1(ir, value);\n    };\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorize$1(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness = function (ir, adjust) {\n      return brightness$1(ir, adjust);\n    };\n    var contrast = function (ir, adjust) {\n      return contrast$1(ir, adjust);\n    };\n    var flip = function (ir, axis) {\n      return flip$1(ir, axis);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return crop$1(ir, x, y, w, h);\n    };\n    var resize$1 = function (ir, w, h) {\n      return resize$2(ir, w, h);\n    };\n    var rotate = function (ir, angle) {\n      return rotate$1(ir, angle);\n    };\n\n    var renderIcon = function (iconName, iconsProvider, behaviours) {\n      return render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-tbtn__icon-wrap'\n        ],\n        behaviours: behaviours\n      }, iconsProvider);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, []);\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, [Replacing.config({})]);\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a;\n    var internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute$1(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a = {}, _a[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a);\n\n    var updateMenuText = generate$6('update-menu-text');\n    var updateMenuIcon = generate$6('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [prefix + '__select-chevron']\n      }, sharedBackstage.providers.icons);\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map$2(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArray(__spreadArray([], spec.dropdownBehaviours, true), [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ], false)),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator$1 = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has$2(item, 'getSubmenuItems');\n    };\n    var separator$2 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$1(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$1(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator$1(item)) {\n        return item;\n      } else {\n        var itemValue = get$e(item, 'value').getOrThunk(function () {\n          return generate$6('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$6('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$8(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-tbtn--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$3(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map$2(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], !spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], true), icon.isSome() ? ['tox-button--icon'] : [], true), spec.borderless ? ['tox-button--naked'] : [], true), extraClasses, true);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$f = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$f,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return has$2(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$6('ratio-event');\n      var makeIcon = function (iconName) {\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-lock-icon__' + iconName\n          ]\n        }, providersBackstage.icons);\n      };\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run$1(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run$1(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant$1(generate$6('undo'));\n    var redo = constant$1(generate$6('redo'));\n    var zoom = constant$1(generate$6('zoom'));\n    var back = constant$1(generate$6('back'));\n    var apply = constant$1(generate$6('apply'));\n    var swap = constant$1(generate$6('swap'));\n    var transform$1 = constant$1(generate$6('transform'));\n    var tempTransform = constant$1(generate$6('temp-transform'));\n    var transformApply = constant$1(generate$6('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform$1,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant$1('save-state');\n    var disable = constant$1('disable');\n    var enable = constant$1('enable');\n    var external = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable,\n      enable: enable\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$1(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip, 'h');\n      var verticalFlip = makeValueTransform(flip, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate, -90);\n      var clockwiseRotate = makeValueTransform(rotate, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant$1({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run$1(external.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run$1(external.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen);\n      var invertTransform = Optional.some(invert);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var isTouchEvent$1 = function (e) {\n      return isNonNullable(e.changedTouches);\n    };\n    var updateWithTouchData = function (e) {\n      if (isTouchEvent$1(e)) {\n        var keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (var i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var _a, _b, _c;\n      var eventOverlay;\n      var handleEvents = [];\n      var overlayEvents = [];\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var root = (_b = settings.root) !== null && _b !== void 0 ? _b : doc;\n      var sugarDoc = SugarElement.fromDom(doc);\n      var downButton;\n      var startX;\n      var startY;\n      var handleElement = SugarElement.fromDom(root.getElementById((_c = settings.handle) !== null && _c !== void 0 ? _c : id));\n      var start = function (e) {\n        var rawEvent = e.raw;\n        var docSize = getDocumentSize(doc);\n        updateWithTouchData(rawEvent);\n        e.prevent();\n        downButton = rawEvent.button;\n        startX = rawEvent.screenX;\n        startY = rawEvent.screenY;\n        var cursor = get$c(handleElement, 'cursor');\n        eventOverlay = SugarElement.fromTag('div', doc);\n        setAll(eventOverlay, {\n          'position': 'absolute',\n          'top': '0',\n          'left': '0',\n          'width': docSize.width + 'px',\n          'height': docSize.height + 'px',\n          'z-index': 2147483647 + '',\n          'opacity': '0.0001',\n          cursor: cursor\n        });\n        append$2(getBody(sugarDoc), eventOverlay);\n        overlayEvents.push(bind(sugarDoc, 'mousemove', drag), bind(sugarDoc, 'touchmove', drag), bind(sugarDoc, 'mouseup', stop), bind(sugarDoc, 'touchend', stop));\n        settings.start(rawEvent);\n      };\n      var drag = function (e) {\n        var rawEvent = e.raw;\n        updateWithTouchData(rawEvent);\n        if (rawEvent.button !== downButton) {\n          return stop(e);\n        }\n        rawEvent.deltaX = rawEvent.screenX - startX;\n        rawEvent.deltaY = rawEvent.screenY - startY;\n        e.prevent();\n        settings.drag(rawEvent);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e.raw);\n        each$1(overlayEvents, function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        remove$5(eventOverlay);\n        if (settings.stop) {\n          settings.stop(e.raw);\n        }\n      };\n      var destroy = function () {\n        each$1(overlayEvents.concat(handleEvents), function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        handleEvents = [];\n        if (isNonNullable(eventOverlay)) {\n          remove$5(eventOverlay);\n        }\n      };\n      handleEvents.push(bind(handleElement, 'mousedown', start), bind(handleElement, 'touchstart', start));\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$1 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var events = [];\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var container = SugarElement.fromDom(containerElm);\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x = startRect.x + deltaX * handle.deltaX;\n        var y = startRect.y + deltaY * handle.deltaY;\n        var w = Math.max(20, startRect.w + deltaX * handle.deltaW);\n        var h = Math.max(20, startRect.h + deltaY * handle.deltaH);\n        var rect = currentRect = global$4.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            root: getRootNode(container).dom,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        var cropContainer = SugarElement.fromTag('div');\n        setAll$1(cropContainer, {\n          id: id,\n          'class': prefix + 'croprect-container',\n          'role': 'grid',\n          'aria-dropeffect': 'execute'\n        });\n        append$2(container, cropContainer);\n        each$1(blockers, function (blocker) {\n          descendant(container, '#' + id).each(function (blockerElm) {\n            var cropBlocker = SugarElement.fromTag('div');\n            setAll$1(cropBlocker, {\n              'id': id + '-' + blocker,\n              'class': prefix + 'croprect-block',\n              'data-mce-bogus': 'all'\n            });\n            set$7(cropBlocker, 'display', 'none');\n            append$2(blockerElm, cropBlocker);\n          });\n        });\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id).each(function (handleElm) {\n            var cropHandle = SugarElement.fromTag('div');\n            setAll$1(cropHandle, {\n              'id': id + '-' + handle.name,\n              'aria-label': handle.label,\n              'aria-grabbed': 'false',\n              'data-mce-bogus': 'all',\n              'role': 'gridcell',\n              'tabindex': '-1',\n              'title': handle.label\n            });\n            add$1(cropHandle, [\n              prefix + 'croprect-handle',\n              prefix + 'croprect-handle-' + handle.name\n            ]);\n            set$7(cropHandle, 'display', 'none');\n            append$2(handleElm, cropHandle);\n          });\n        });\n        dragHelpers = map$2(handles, createDragHelper);\n        repaint(currentRect);\n        var handleFocus = function (e) {\n          set$8(e.target, 'aria-grabbed', e.raw.type === 'focus' ? 'true' : 'false');\n        };\n        var handleKeydown = function (e) {\n          var activeHandle;\n          each$1(handles, function (handle) {\n            if (get$d(e.target, 'id') === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.raw.keyCode) {\n          case global$2.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$2.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$2.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$2.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$2.ENTER:\n          case global$2.SPACEBAR:\n            e.prevent();\n            action();\n            break;\n          }\n        };\n        events.push(bind(container, 'focusin', handleFocus), bind(container, 'focusout', handleFocus), bind(container, 'keydown', handleKeydown));\n      };\n      var toggleVisibility = function (state) {\n        var selectors = __spreadArray(__spreadArray([], map$2(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }), true), map$2(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        }), true).join(',');\n        var elems = descendants(container, selectors);\n        if (state) {\n          each$1(elems, function (elm) {\n            return remove$6(elm, 'display');\n          });\n        } else {\n          each$1(elems, function (elm) {\n            return set$7(elm, 'display', 'none');\n          });\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, newRect) {\n          descendant(container, '#' + id + '-' + name).each(function (elm) {\n            setAll(elm, {\n              left: newRect.x + 'px',\n              top: newRect.y + 'px',\n              width: Math.max(0, newRect.w) + 'px',\n              height: Math.max(0, newRect.h) + 'px'\n            });\n          });\n        };\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id + '-' + handle.name).each(function (elm) {\n            setAll(elm, {\n              left: rect.w * handle.xMul + rect.x + 'px',\n              top: rect.h * handle.yMul + rect.y + 'px'\n            });\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        each$1(dragHelpers, function (helper) {\n          return helper.destroy();\n        });\n        dragHelpers = [];\n        each$1(events, function (e) {\n          return e.unbind();\n        });\n        events = [];\n      };\n      render();\n      var instance = __assign(__assign({}, global$3), {\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      });\n      return instance;\n    };\n    var CropRect = { create: create$1 };\n\n    var loadImage = function (image) {\n      return new global$c(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = api$1();\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll(bg.element, css);\n          });\n          cropRect.run(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$8(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          if (anyInSystem.getSystem().isConnected()) {\n            memContainer.getOpt(anyInSystem).map(function (panel) {\n              var aImg = external$2({ element: img });\n              Replacing.replaceAt(panel, 1, Optional.some(aImg));\n              var lastViewRect = viewRectState.get();\n              var viewRect = {\n                x: 0,\n                y: 0,\n                w: img.dom.naturalWidth,\n                h: img.dom.naturalHeight\n              };\n              viewRectState.set(viewRect);\n              var rect = global$4.inflate(viewRect, -20, -20);\n              rectState.set(rect);\n              if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n                zoomFit(panel, img);\n              }\n              repaintImg(panel, img);\n            });\n          }\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [\n                runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(cRect);\n                  });\n                }),\n                runOnDetached(function () {\n                  cropRect.clear();\n                })\n              ])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = value$1();\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().getOrThunk(blobState.get);\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(newTempState);\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$5.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.on(destroyState);\n        tempState.clear();\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(newState);\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url);\n        }).then(function () {\n          updateButtonUndoStates(anyInSystem);\n          swap();\n          unblock(anyInSystem);\n        }).catch(function (err) {\n          console.log(err);\n          if (anyInSystem.getSystem().isConnected()) {\n            unblock(anyInSystem);\n          }\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run$1(internal.undo(), undo),\n            run$1(internal.redo(), redo),\n            run$1(internal.zoom(), zoom),\n            run$1(internal.back(), back),\n            run$1(internal.apply(), apply),\n            run$1(internal.transform(), transform),\n            run$1(internal.tempTransform(), tempTransform),\n            run$1(internal.transformApply(), transformApply),\n            run$1(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has$2(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map$2(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant$1(noop),\n              getApi: constant$1({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$d(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$8(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map$2(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$e = function (detail, _spec) {\n      var options = map$2(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find$5(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$4(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$e\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map$2(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map$2(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map$2(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map$2(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant$1({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant$1({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$6 = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run$1(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$6\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$9 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$9\n    });\n\n    var setup$c = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$7({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$5(el);\n      var node = el.dom;\n      if (get$d(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    var make$3 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind$3(menus, function (menu) {\n              return filter$2(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map$2(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$4(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute$1(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run$1(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$g = constant$1([\n      option('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$k()).concat(sandboxFields()));\n    var parts$b = constant$1([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    var wrap = function (delegate) {\n      var toCached = function () {\n        return wrap(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$1 = function (worker) {\n      return wrap(Future.nu(worker));\n    };\n    var value = function (value) {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    var error = function (error) {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    var fromResult = function (result) {\n      return wrap(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$1(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$1,\n      wrap: wrap,\n      pure: value,\n      value: value,\n      error: error,\n      fromResult: fromResult,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$1 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map$2(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter$2(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map$2(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$6('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$8(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run$1(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run$1(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run$1(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return render$3(icon, {\n          tag: 'div',\n          classes: [\n            'tox-icon',\n            'tox-control-wrap__status-icon-' + name\n          ],\n          attributes: __assign({\n            'title': providersBackstage.translate(label),\n            'aria-live': 'polite'\n          }, errId.fold(function () {\n            return {};\n          }, function (id) {\n            return { id: id };\n          }))\n        }, providersBackstage.icons);\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$6('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$1(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                },\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity$1 },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$2 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$e(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$2(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$2(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$2(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$2(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$2(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$2(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$2(function (spec, backstage) {\n        return renderLabel(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$2(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$2(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$2(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$2(renderColorPicker),\n      dropzone: make$2(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$2(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$2(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$2(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$2(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$2(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2(renderHtmlPanel),\n      imagetools: make$2(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$2(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$2(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$e(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubbleSize = 12;\n      var overrides = { maxHeightFunction: expandable$1() };\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [northeast];\n            },\n            onLtr: function () {\n              return [northwest];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [southeast$2];\n            },\n            onLtr: function () {\n              return [southwest$2];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north];\n            },\n            onLtr: function () {\n              return [north];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$2];\n            },\n            onLtr: function () {\n              return [south$2];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          type: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor$1 = function (bodyElement) {\n      return function (element) {\n        return {\n          type: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors = function (editor) {\n      return function () {\n        return hasCustomColors$1(editor);\n      };\n    };\n    var getColors = function (editor) {\n      return function () {\n        return getColors$2(editor);\n      };\n    };\n    var getColorCols = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors(editor),\n        getColors: getColors(editor),\n        getColorCols: getColorCols(editor)\n      };\n    };\n\n    var isDraggableModal = function (editor) {\n      return function () {\n        return isDraggableModal$1(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has$2(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has$2(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has$2(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has$2(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each$1(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$8 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$6(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map$2(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), { getStyleItems: constant$1(newItems) });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains$2(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$8 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind$3(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$8(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind$3(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$8(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind$3(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim = global$5.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map$2(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$4(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$8.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$8.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return get$e(history, fileType).getOr([]);\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = get$e(history, fileType).getOr([]);\n      var itemsWithoutUrl = filter$2(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$5.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$7 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$e.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$8(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var setup$b = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var doc = getDocument();\n      var onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      var onTouchmove = bind(doc, 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind(doc, 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      var onMouseup = bind(doc, 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onContentMousedown = function () {\n        each$1(editor.editorManager.get(), function (loopEditor) {\n          if (editor !== loopEditor) {\n            loopEditor.fire('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      var onDismissPopups = function (event) {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$a = AlloyParts;\n    var partType = PartType;\n\n    var schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$9 = constant$1([itemsPart]);\n    var name = constant$1('CustomList');\n\n    var factory$d = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each$1(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each$1(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$d,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$c = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var setup$a = noop;\n    var isDocked$2 = never;\n    var getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append$2(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute$3).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPos().map(function (pos) {\n        return bounds(pos.bounds.x, pos.bounds.y, get$a(elem), get$b(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$c(elem, 'position') || 'static',\n        bounds: box\n      });\n    };\n    var revertToOriginal = function (elem, box, state) {\n      return state.getInitialPos().bind(function (position) {\n        state.clearInitialPos();\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box$1).getOrThunk(function () {\n            return box$1(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$e(position.style, 'left').map(function (_left) {\n            return box.x - offsetBox_1.x;\n          }), get$e(position.style, 'top').map(function (_top) {\n            return box.y - offsetBox_1.y;\n          }), get$e(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box.right;\n          }), get$e(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box = box$1(elem);\n      if (!isVisibleForModes(state.getModes(), box, viewport)) {\n        storePrior(elem, box, state);\n        var winBox = win();\n        var left = box.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config, state) {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, state, position) {\n      var isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      var method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, state, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$5 = function (dockInfo, dockState) {\n      return derive$2([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has(component.element, contextInfo.transitionClass)) {\n              remove$1(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run$1(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run$1(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$6 = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = value$1();\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$6\n    });\n\n    var Docking = create$7({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner$4(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$2(markerElement);\n      var markerHeight = get$b(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute$3(containerHeader);\n      var editorHeaderHeight = get$b(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains$2(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$2(elm) + (parseInt(get$c(elm, 'margin-top'), 10) || 0) + (parseInt(get$c(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$a(parentElem);\n          set$7(elm, 'width', parentWidth + 'px');\n          set$7(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner$4(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm);\n      }).each(function () {\n        return focus$3(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$9 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours = function (editor, sharedBackstage) {\n      var focusedElm = value$1();\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArray([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$2(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box = box$1(SugarElement.fromDom(container));\n              var boxHeight = box.height - headerHeight;\n              var topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds(box.x, topBound, box.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: function (comp) {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          lazyViewport: function (comp) {\n            var win$1 = win();\n            var offset = getStickyToolbarOffset(editor);\n            var top = win$1.y + (isDockedMode(comp, 'top') ? offset : 0);\n            var height = win$1.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n            return bounds(win$1.x, top, win$1.width, height);\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours, true);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredOf('items', oneOf([\n        arrOfObj([\n          requiredString('name'),\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArray([requiredString('type')], baseMenuButtonFields, true));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      requiredString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted('columns', 1),\n      requiredFunction('onAction'),\n      requiredFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var factory$b = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map$2(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), function (comp, se) {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$b,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$7(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$7(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$3 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$4 = function (slideConfig, slideState) {\n      return derive$2([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$4\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', function (elem) {\n            return get$a(elem) + 'px';\n          })\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', function (elem) {\n            return get$b(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$5 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$8({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Sliding = create$7({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var owner = 'container';\n    var schema$d = [field('slotBehaviours', [])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot: slot,\n          record: constant$1(record)\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    var make$1 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each$1(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$d(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$7(element, 'display', 'none');\n          set$8(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$8 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each$1(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map$2(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find$5(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find$5(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$6('FixSizeEvent');\n    var autoSize = generate$6('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$a(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run$1(fixSize, function (comp, se) {\n              set$7(comp.element, 'width', se.event.width);\n            }),\n            run$1(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var block = function (component, config, state, getBusySpec) {\n      set$8(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$4 = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Blocking = create$7({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$7(elem) };\n      return __assign({\n        tag: name$2(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var getBusySpec$1 = function (providerBackstage) {\n      return function (_root, _behaviours) {\n        return {\n          dom: {\n            tag: 'div',\n            attributes: {\n              'aria-label': providerBackstage.translate('Loading...'),\n              'tabindex': '0'\n            },\n            classes: ['tox-throbber__busy-spinner']\n          },\n          components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n        };\n      };\n    };\n    var focusBusyComponent = function (throbber) {\n      return Composing.getCurrent(throbber).each(function (comp) {\n        return focus$3(comp.element);\n      });\n    };\n    var toggleEditorTabIndex = function (editor, state) {\n      var tabIndexAttr = 'tabindex';\n      var dataTabIndexAttr = 'data-mce-' + tabIndexAttr;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(function (iframe) {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(function (tabIndex) {\n            return set$8(iframe, dataTabIndexAttr, tabIndex);\n          });\n          set$8(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(function (tabIndex) {\n            set$8(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    var toggleThrobber = function (editor, comp, state, providerBackstage) {\n      var element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        var throbberFocus = Composing.getCurrent(comp).exists(function (busyComp) {\n          return hasFocus(busyComp.element);\n        });\n        Blocking.unblock(comp);\n        set$7(element, 'display', 'none');\n        set$8(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Blocking.config({ focus: false }),\n          Composing.config({\n            find: function (comp) {\n              return head(comp.components());\n            }\n          })\n        ]),\n        components: []\n      };\n    };\n    var isFocusEvent = function (event) {\n      return event.type === 'focusin';\n    };\n    var isPasteBinTarget = function (event) {\n      if (isFocusEvent(event)) {\n        var node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$2).exists(function (targetElm) {\n          return has(targetElm, 'mce-pastebin');\n        });\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = value$1();\n      var stealFocus = function (e) {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', function () {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', function (e) {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.on(global$f.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$f.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    var generate$1 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant$1(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$1(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter$2(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map$2(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups$1 = function (toolbar, storedGroups) {\n      var bGroups = map$2(storedGroups, function (g) {\n        return premade(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh$2 = function (toolbar, detail, setOverflow) {\n      var builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$7(primary.element, 'visibility', 'hidden');\n      var groups = builtGroups.concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      var availableWidth = get$a(primary.element);\n      var overflows = partition(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$a(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$c()));\n    var parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var expandable = constant$1(function (element, available) {\n      setMax(element, Math.floor(available));\n    });\n\n    var schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y()\n    ]);\n    var parts$6 = constant$1([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts: layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    var setGroups = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    var parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$9\n    });\n\n    var buildGroups = function (comps) {\n      return map$2(comps, function (g) {\n        return premade(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh$2(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$8 = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$2,\n              southeast$2\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$2,\n              southwest$2\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$2,\n              northeast$2\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$2,\n              northwest$2\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$8,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    var parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh$2(toolbar, detail, function (groups) {\n          var builtGroups = map$2(groups, function (g) {\n            return premade(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$7 = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$7,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$2(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$2(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var factory$6 = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$a.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$6('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    var partToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    var partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    var partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    var partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    var partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map$2(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map$2(ts, function (g) {\n            return map$2(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind$3(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter$2(menubar, function (menuName) {\n        var isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$e(registry.menus, menuName).exists(function (menu) {\n            return has$2(menu, 'items');\n          });\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      var menus = map$2(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError = function (editor, err) {\n      return function () {\n        return fireSkinLoadError$1(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$c(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$b.DOM.styleSheetLoader);\n      } else {\n        return global$c.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$c.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          boundCallback.clear();\n        };\n      };\n    };\n    var onSetupEvent = function (editor, event, f) {\n      return function (api) {\n        var handleEvent = function () {\n          return f(api);\n        };\n        var init = function () {\n          f(api);\n          editor.on(event, handleEvent);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          editor.off(event, handleEvent);\n        };\n      };\n    };\n    var onActionToggleFormat$1 = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n    var onActionExecCommand = function (editor, command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind$3(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind$3(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map$2(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return { getComponent: constant$1(comp) };\n      };\n      var onSetup = onSetupEvent(editor, 'NodeChange', function (api) {\n        var comp = api.getComponent();\n        spec.updateText(comp);\n      });\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map$2(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec$4 = function (editor) {\n      var getMatchingValue = function () {\n        return find$5(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return Optional.none;\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(constant$1('left'), function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find$5(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuIcon,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$4(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$3 = function (editor) {\n      var systemFont = 'System Font';\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find$5(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          return someIf(isSystemFontStack(font), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(constant$1(font), function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$e(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$e(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find$5(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant$1(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(constant$1(size), function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        text: Optional.some('12pt'),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map$2(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find$5(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$1 = function (editor) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec = function (editor, dataset) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind$3(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      return {\n        tooltip: 'Formats',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var events$3 = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map$2(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive$2([\n        run$1(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var getState = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$3 = function () {\n      var cell = Cell(Optional.none());\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var readState = function () {\n        return cell.get().getOr('none');\n      };\n      return {\n        readState: readState,\n        get: cell.get,\n        set: cell.set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$3\n    });\n\n    var Reflecting = create$7({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$5 = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$6('aria');\n            set$8(descriptor.element, 'id', descriptorId);\n            set$8(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$a(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$6('focus-button');\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(iconName, providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run$1(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(iconName, providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$6('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$8(comp.element, 'aria-pressed', state);\n            descendant(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$1('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$e(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map$2(defaultToolbar, function (group) {\n        var items = filter$2(group.items, function (subItem) {\n          return has$2(buttons, subItem) || has$2(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter$2(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has$2(t, 'name') && has$2(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$e(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$e(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$e(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map$2(toolbarGroups, function (group) {\n        var items = bind$3(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter$2(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$1();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents$1 = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$7(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents$1(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$b.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(constant$1(0), function (tbar) {\n          return tbar.components().length > 1 ? get$b(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$b(container.element) - offset;\n          var targetBounds = box$1(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$b(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$8(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$c(body(), 'margin-left')).getOr(0);\n          return get$a(body()) - absolute$3(targetElm).left + bodyMargin;\n        });\n        set$7(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box$1(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$b(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$7(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$7(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$7(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$f.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute = function (memInput, original) {\n      return run$1(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var generateOne = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate = function (memInput, buttons, providersBackstage) {\n      var mementos = map$2(buttons, function (button) {\n        return record(generateOne(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map$2(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$6('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var isVerticalOverlap = function (a, b, threshold) {\n      if (threshold === void 0) {\n        threshold = 0.01;\n      }\n      return b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    };\n    var getRangeRect = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        var elm = isText$1(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$2).map(function (e) {\n          return e.dom.getBoundingClientRect();\n        }).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    var getSelectionBounds = function (editor) {\n      var rng = editor.selection.getRng();\n      var rect = getRangeRect(rng);\n      if (editor.inline) {\n        var scroll_1 = get$9();\n        return bounds(scroll_1.left + rect.left, scroll_1.top + rect.top, rect.width, rect.height);\n      } else {\n        var bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    var getAnchorElementBounds = function (editor, lastElement) {\n      return lastElement.filter(inBody).map(absolute$2).getOrThunk(function () {\n        return getSelectionBounds(editor);\n      });\n    };\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds, margin) {\n      var x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      var right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x: x,\n        width: right - x\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant(container, '.tox-editor-header').getOr(container);\n      var headerBox = box$1(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage, toolbarType, margin) {\n      if (margin === void 0) {\n        margin = 0;\n      }\n      var viewportBounds = getBounds$3(window);\n      var contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds, margin), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin), y = _b.y, bottom = _b.bottom;\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    var isEntireElementSelected = function (editor, elem) {\n      var rng = editor.selection.getRng();\n      var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    var preservePosition = function (elem, position, f) {\n      var currentPosition = getRaw(elem, 'position');\n      set$7(elem, 'position', position);\n      var result = f(elem);\n      currentPosition.each(function (pos) {\n        return set$7(elem, 'position', pos);\n      });\n      return result;\n    };\n    var shouldUseInsetLayouts = function (position) {\n      return position === 'node';\n    };\n    var determineInsetLayout = function (editor, contextbar, elem, data, bounds) {\n      var selectionBounds = getSelectionBounds(editor);\n      var isSameAnchorElement = data.lastElement().exists(function (prev) {\n        return eq(elem, prev);\n      });\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), function () {\n          var isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar));\n          return isOverlapping && !data.isReposition() ? flip$2 : preserve;\n        });\n      } else {\n        var yBounds = data.getMode() === 'fixed' ? bounds.y + get$9().top : bounds.y;\n        var contextbarHeight = get$b(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    var getAnchorSpec$2 = function (editor, mobile, data, position) {\n      var smartInsetLayout = function (elem) {\n        return function (anchor, element, bubbles, placee, bounds) {\n          var layout = determineInsetLayout(editor, placee, elem, data, bounds);\n          var newAnchor = __assign(__assign({}, anchor), {\n            y: bounds.y,\n            height: bounds.height\n          });\n          return __assign(__assign({}, layout(newAnchor, element, bubbles, placee, bounds)), { alwaysFit: true });\n        };\n      };\n      var getInsetLayouts = function (elem) {\n        return shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      };\n      var desktopAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northeast$2,\n            southeast$2,\n            northwest$2,\n            southwest$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northwest$2,\n            southwest$2,\n            northeast$2,\n            southeast$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      var mobileAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            south$2,\n            southeast$2,\n            southwest$2,\n            northeast$2,\n            northwest$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            south$2,\n            southwest$2,\n            southeast$2,\n            northwest$2,\n            northeast$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    var getAnchorLayout = function (editor, position, isTouch, data) {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$2];\n            },\n            onRtl: function () {\n              return [west$2];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter$2(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition$3(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter$2(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map$2(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find$5(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter$2(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, function (ancestorElem) {\n          if (isElement$2(ancestorElem)) {\n            var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n            var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars: toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each$1(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$6('forward-slide');\n    var backSlideEvent = generate$6('backward-slide');\n    var changeSlideEvent = generate$6('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$a(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$a(elem);\n              set$7(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$f.setTimeout(function () {\n                set$7(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, function (comp, _se) {\n              last$2(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last$2(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var transitionClass = 'tox-pop--transition';\n    var register$7 = function (editor, registryContextToolbars, sink, extras) {\n      var backstage = extras.backstage;\n      var sharedBackstage = backstage.shared;\n      var isTouch = detect$1().deviceType.isTouch;\n      var lastElement = value$1();\n      var lastTrigger = value$1();\n      var lastContextPosition = value$1();\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        var position = lastContextPosition.get().getOr('node');\n        var margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      var canLaunchToolbar = function () {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      var isSameLaunchElement = function (elem) {\n        return is$1(lift2(elem, lastElement.get(), eq), true);\n      };\n      var shouldContextToolbarHide = function () {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          var contextToolbarBounds = getBounds();\n          var anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds);\n        }\n      };\n      var close = function () {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        if (InlineView.isOpen(contextbar)) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$7(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextFormGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map$2(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        var anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: function () {\n            return is$1(lastTrigger.get(), 0);\n          },\n          getMode: function () {\n            return Positioning.getMode(sink);\n          }\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      var launchContext = function (toolbarApi, elem) {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var position = toolbarApi[0].position;\n        var anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor: anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, function () {\n          return Optional.some(getBounds());\n        });\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$7(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = last(function () {\n        if (!editor.hasFocus() || editor.removed) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          var scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, function (info) {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', function () {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, function (e) {\n          var scopes = getScopes();\n          get$e(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', function (_e) {\n          global$f.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    var register$6 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var registerController = function (editor, spec) {\n      var getMenuItems = function () {\n        var options = spec.getOptions(editor);\n        var initial = spec.getCurrent(editor).map(spec.hash);\n        var current = value$1();\n        return map$2(options, function (value) {\n          return {\n            type: 'togglemenuitem',\n            text: spec.display(value),\n            onSetup: function (api) {\n              var setActive = function (active) {\n                if (active) {\n                  current.on(function (oldApi) {\n                    return oldApi.setActive(false);\n                  });\n                  current.set(api);\n                }\n                api.setActive(active);\n              };\n              setActive(is$1(initial, spec.hash(value)));\n              var unbindWatcher = spec.watcher(editor, value, setActive);\n              return function () {\n                current.clear();\n                unbindWatcher();\n              };\n            },\n            onAction: function () {\n              return spec.setCurrent(editor, value);\n            }\n          };\n        });\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: function (callback) {\n          return callback(getMenuItems());\n        },\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    var lineHeightSpec = {\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: function (input) {\n        return normalise(input, [\n          'fixed',\n          'relative',\n          'empty'\n        ]).getOr(input);\n      },\n      display: identity$1,\n      watcher: function (editor, value, callback) {\n        return editor.formatter.formatChanged('lineheight', callback, false, { value: value }).unbind;\n      },\n      getCurrent: function (editor) {\n        return Optional.from(editor.queryCommandValue('LineHeight'));\n      },\n      setCurrent: function (editor, value) {\n        return editor.execCommand('LineHeight', false, value);\n      }\n    };\n    var languageSpec = function (editor) {\n      var settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(function (settings) {\n        return {\n          name: 'language',\n          text: 'Language',\n          icon: 'language',\n          getOptions: constant$1(settings),\n          hash: function (input) {\n            return isUndefined(input.customCode) ? input.code : input.code + '/' + input.customCode;\n          },\n          display: function (input) {\n            return input.title;\n          },\n          watcher: function (editor, value, callback) {\n            return editor.formatter.formatChanged('lang', callback, false, {\n              value: value.code,\n              customValue: value.customCode\n            }).unbind;\n          },\n          getCurrent: function (editor) {\n            var node = SugarElement.fromDom(editor.selection.getNode());\n            return closest$4(node, function (n) {\n              return Optional.some(n).filter(isElement$2).bind(function (ele) {\n                var codeOpt = getOpt(ele, 'lang');\n                return codeOpt.map(function (code) {\n                  var customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n                  return {\n                    code: code,\n                    customCode: customCode,\n                    title: ''\n                  };\n                });\n              });\n            });\n          },\n          setCurrent: function (editor, lang) {\n            return editor.execCommand('Lang', false, lang);\n          },\n          onToolbarSetup: function (api) {\n            var unbinder = unbindable();\n            api.setActive(editor.formatter.match('lang', {}, undefined, true));\n            unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n            return unbinder.clear;\n          }\n        };\n      });\n    };\n    var register$5 = function (editor) {\n      registerController(editor, lineHeightSpec);\n      languageSpec(editor).each(function (spec) {\n        return registerController(editor, spec);\n      });\n    };\n\n    var register$4 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var onSetupOutdentState = function (editor) {\n      return onSetupEvent(editor, 'NodeChange', function (api) {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    var register$3 = function (editor) {\n      registerButtons$2(editor);\n    };\n\n    var onActionToggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: onActionToggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$5.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$2 = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var onSetupUndoRedoState = function (editor, type) {\n      return onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function (api) {\n        api.setDisabled(editor.mode.isReadOnly() || !editor.undoManager[type]());\n      });\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var register$1 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    var onSetupVisualAidState = function (editor) {\n      return onSetupEvent(editor, 'VisualAid', function (api) {\n        api.setActive(editor.hasVisual);\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var register = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    var setup$6 = function (editor, backstage) {\n      register$6(editor);\n      register$2(editor);\n      register$4(editor, backstage);\n      register$1(editor);\n      register$a(editor);\n      register(editor);\n      register$3(editor);\n      register$5(editor);\n    };\n\n    var nu = function (x, y) {\n      return {\n        type: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$b.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor = function (editor) {\n      return {\n        type: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n    var getAnchorSpec$1 = function (editor, e, anchorType) {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2,\n          north,\n          south,\n          northeast,\n          southeast,\n          northwest,\n          southwest\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2,\n          north,\n          south,\n          northwest,\n          southwest,\n          northeast,\n          southeast\n        ];\n      }\n    };\n    var bubbleSize = 12;\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$f.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var getAnchorSpec = function (editor, e, anchorType) {\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      var bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return __assign({\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        }\n      }, anchorSpec);\n    };\n    var show = function (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) {\n      var anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection'));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var detection = detect$1();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && anchorType !== 'node') {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter$2(patchPipeConfig(defaultItems), function (item) {\n          return has$2(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator = { type: 'separator' };\n    var makeContextItem = function (item) {\n      var commonMenuItem = function (item) {\n        return {\n          text: item.text,\n          icon: item.icon,\n          disabled: item.disabled,\n          shortcut: item.shortcut\n        };\n      };\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return __assign(__assign({ type: 'nestedmenuitem' }, commonMenuItem(item)), {\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          });\n        default:\n          return __assign(__assign({ type: 'menuitem' }, commonMenuItem(item)), { onAction: noarg(item.onAction) });\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last$2(xs).filter(function (item) {\n        return !isSeparator(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        return get$e(contextMenus, name.toLowerCase()).map(function (menu) {\n          var items = menu.update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(function () {\n          return acc.concat([name]);\n        });\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var getAnchorType = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      var anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        var target = getSelectedElement(editor, e);\n        var selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    var setup$5 = function (editor, lazySink, backstage) {\n      var detection = detect$1();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var anchorType = getAnchorType(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform([\n        add(origin),\n        subtract(scroll)\n      ]), transform([subtract(scroll)]), transform([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform([]), transform([subtract(origin)]), transform([\n        add(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    var offset = adt.offset;\n    var absolute = adt.absolute;\n    var fixed = adt.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$d(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$8(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$8(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed$1) {\n        return fixed(fixed$1.left + delta.left, fixed$1.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo$1 = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo$1(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$7(root, 'z-index', zIndex);\n        });\n        remove$7(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$8(root, initialAttribute, zindex);\n        });\n        set$7(root, 'z-index', get$c(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    var schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity$1),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute$3(target);\n        return absolute(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp$1(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp$1(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), function () {\n        var fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$2(comp.element),\n        width: getOuter$1(comp.element)\n      };\n    };\n    var move = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive$2(__spreadArray([run$1(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState), true));\n      };\n    };\n\n    var init$2 = function (dragApi) {\n      return derive$2([\n        run$1(mousedown(), dragApi.forceDrop),\n        run$1(mouseup(), dragApi.drop),\n        run$1(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run$1(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$2 = function (dragConfig, dragState, updateStartState) {\n      return [run$1(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$5 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$2) })], false);\n\n    var init$1 = function (dragApi) {\n      return derive$2([\n        run$1(touchstart(), dragApi.forceDrop),\n        run$1(touchend(), dragApi.drop),\n        run$1(touchcancel(), dragApi.drop),\n        run$1(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    var events$1 = function (dragConfig, dragState, updateStartState) {\n      var blockerSingleton = value$1();\n      var stopBlocking = function (component) {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop = function () {\n            return stopBlocking(component);\n          };\n          var dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: function (event) {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$1(dragApi));\n          blockerSingleton.set(blocker);\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    var schema$4 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$1) })], false);\n\n    var events = function (dragConfig, dragState, updateStartState) {\n      return __spreadArray(__spreadArray([], events$2(dragConfig, dragState, updateStartState), true), events$1(dragConfig, dragState, updateStartState), true);\n    };\n    var schema$3 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events) })], false);\n\n    var mouse = schema$5;\n    var touch = schema$4;\n    var mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$4 = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = value$1();\n      var finishCell = value$1();\n      var getTopLeftSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map$2(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map$2(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$7(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$1().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(e.start);\n          finishCell.set(e.finish);\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var isHidden = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map$2(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$b(container), get$a(container));\n      each(dimensions, function (val, dim) {\n        return set$7(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var getResizeType = function (editor) {\n      var fallback = !editor.hasPlugin('autoresize');\n      var resize = editor.getParam('resize', fallback);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    var keyboardHandler = function (editor, resizeType, x, y) {\n      var scale = 20;\n      var delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    var renderResizeHandler = function (editor, providersBackstage) {\n      var resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: { title: providersBackstage.translate('Resize') },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: function (_comp, _target, delta) {\n              return resize(editor, delta, resizeType);\n            },\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: function () {\n              return keyboardHandler(editor, resizeType, -1, 0);\n            },\n            onRight: function () {\n              return keyboardHandler(editor, resizeType, 1, 0);\n            },\n            onUp: function () {\n              return keyboardHandler(editor, resizeType, 0, -1);\n            },\n            onDown: function () {\n              return keyboardHandler(editor, resizeType, 0, 1);\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ]\n      }, providersBackstage.icons));\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderBranding = function () {\n        var label = global$e.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$3 = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$1();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$e.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$7(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq(body(), uiContainer) && get$c(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$7(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$e.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$b(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$7(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$7(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$7(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$6(editor, backstage);\n        setup$5(editor, lazySink, backstage);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$1(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$7(editor, contextToolbars, sink, { backstage: backstage });\n        setup$4(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$d(describedElement, 'id')).fold(function () {\n        var id = generate$6('dialog-describe');\n        set$8(describeElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$6('dialog-label');\n        set$8(labelElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$2 = constant$1([\n      required$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity$1 };\n    var parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = value$1();\n      var showDialog = function (dialog) {\n        dialogComp.set(dialog);\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.clear();\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$6('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArray(__spreadArray([], baseFooterButtonFields, true), [requiredString('text')], false);\n    var normalFooterButtonFields = __spreadArray([requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields, true);\n    var menuFooterButtonFields = __spreadArray([\n      requiredStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields, true);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      requiredString('type'),\n      requiredString('text'),\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      requiredString('icon'),\n      defaulted('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      requiredString('type'),\n      requiredString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      requiredString('type'),\n      requiredString('name'),\n      requiredString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      requiredString('type'),\n      requiredString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj([\n      requiredString('value'),\n      requiredString('text'),\n      requiredString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      requiredString('type'),\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([requiredOf('currentState', objOf([\n        required$1('blob'),\n        requiredString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      requiredString('text'),\n      requiredString('value')\n    ];\n    var listBoxNestedItemFields = [\n      requiredString('text'),\n      requiredArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        requiredString('text'),\n        requiredString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    var tableFields = [\n      requiredString('type'),\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      requiredString('value'),\n      defaulted('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field$1('items', 'items', required$2(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema = valueThunk(function () {\n      return choose$2('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      requiredString('type'),\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('tab-name');\n      }), string),\n      requiredString('title'),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var tabPanelFields = [\n      requiredString('type'),\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      requiredArrayOf('buttons', dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArray([requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields, true));\n    var urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter$2(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind$3(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [requiredOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map$2(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, identity$1);\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$3 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$a(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$6('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue()),\n        option('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    var schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$1 = constant$1([tabsPart]);\n\n    var factory$2 = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    var factory$1 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    var schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    var factory = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find$5(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$8(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find$5(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory: factory,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map$2(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$c(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$b(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$a(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$b(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$c(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$c(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$b(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$7(tabview, 'height', height + 'px');\n      if (!detect$1().browser.isIE()) {\n        set$7(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$7(tabview, 'height', '0');\n            set$7(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = value$1();\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$7(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$f.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run$1(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run$1(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$7(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(newHeight);\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$3);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map$2(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map$2(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$6('update-dialog');\n    var titleChannel = generate$6('update-title');\n    var bodyChannel = generate$6('update-body');\n    var footerChannel = generate$6('update-footer');\n    var bodySendMessageChannel = generate$6('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$9.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog$1 = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArray([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray(), true),\n        parts: {\n          blocker: {\n            dom: fromHtml('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArray([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$2(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours, true)),\n        eventOrder: __assign((_a = {}, _a[execute$5()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon']\n          }, providersBackstage.icons)],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog$1(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArray([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours, true),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map$2(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map$2(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run$1(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run$1(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })], false);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ], false);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup = function (compInSystem, footerButtons, buttonName) {\n      return find$5(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition$3(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map$2(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map$2(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData$1 = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$1(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData$1(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, function (v, k) {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: constant$1(dialog),\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$6('dialog-label');\n      var dialogContentId = generate$6('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute$5()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name$2(elem) !== 'button' || get$d(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: constant$1(dialog),\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$1(internalDialog.url, { base_uri: new global$1(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = unbindable();\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$1(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$2 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$1 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run$1(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$2(extras);\n      var confirmDialog = setup$1(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData(internalInitialData, dataValidator);\n          var inlineDialog = value$1();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArray([config('window-manager-inline-events', [run$1(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop), true)),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, premade(dialogUi.dialog), { anchor: anchor }, Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$g.add('silver', function (editor) {\n        var _a = setup$3(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.6 (2022-10-19)\n */\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString$1 = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray$1 = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var apply = function (f) {\n      return f();\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf$2 = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$3 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$3 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$k = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$4 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$k(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil$1 = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$3 = function (xs, pred) {\n      return findUntil$1(xs, pred, never);\n    };\n    var findIndex$2 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map$3(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$4(a1, function (x) {\n        return !contains$3(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$a = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$a(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$a(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$j = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$3 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$j(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var get$9 = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal$1 = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray = Array.isArray;\n    var toArray$1 = function (obj) {\n      if (!isArray(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$i = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$i(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$i(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$4(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$4(0, 0);\n    };\n    var nu$4 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$4,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$3(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$3(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$4 = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$3 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie$1),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$3,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform$2 = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform$2();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect();\n    var browser$4 = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser$4.isOpera(),\n      webkit: webkit,\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\n      gecko: browser$4.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser$4.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser$4.current,\n        version: browser$4.version,\n        isChrome: browser$4.isChrome,\n        isEdge: browser$4.isEdge,\n        isFirefox: browser$4.isFirefox,\n        isIE: browser$4.isIE,\n        isOpera: browser$4.isOpera,\n        isSafari: browser$4.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$3 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var is$3 = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap$4 = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = has$2;\n    var create$9 = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend$6 = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (has$2(ext, name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk$3 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$i(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk$3(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$3 = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode$4 = function (s, d) {\n      if (!s || is$3(s, 'array')) {\n        return s;\n      }\n      return map$1(s.split(d || ','), trim$3);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$3,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$i,\n      map: map$1,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty,\n      extend: extend$6,\n      create: create$9,\n      walk: walk$3,\n      createNS: createNS,\n      resolve: resolve$3,\n      explode: explode$4,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    var fromDom$2 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$1\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment$1 = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement$6 = isType(ELEMENT);\n    var isText$8 = isType(TEXT);\n    var isDocument$2 = isType(DOCUMENT);\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement$6(e) && name(e) === tag;\n      };\n    };\n\n    var owner$1 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument$2(dos) ? dos : owner$1(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents$1 = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter$4(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$1 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$1(element, 0);\n    };\n    var lastChild = function (element) {\n      return child$1(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$6(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$3 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap$3 = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$k(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$k(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$k(children(element), function (rogue) {\n        remove$7(rogue);\n      });\n    };\n    var remove$7 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$3(wrapper, children$1);\n      }\n      remove$7(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$7 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$8(SugarElement.fromDom(doc));\n      return get$7(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$5 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains$3(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        if (isElement$5(node)) {\n          for (var i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$5(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus$2 = function (node) {\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll$1 = function (node) {\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable$3 = function (node) {\n      return isElement$5(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$5(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$7 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$5 = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue$4 = hasContentEditableState('true');\n    var isContentEditableFalse$b = hasContentEditableState('false');\n    var isTableCell$5 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$j(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$6 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$6(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$6 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$3 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString$1(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$j(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$3 = detect().browser;\n    var firstElement = function (nodes) {\n      return find$3(nodes, isElement$6);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$3.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains$3(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0;\n      var doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          var pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          var castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module$1));\n    var Promise$1 = module$1.exports.boltExport;\n\n    var nu$1 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$1(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$k(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$1(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu = function (baseFn) {\n      return make(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu,\n      pure: pure\n    };\n\n    var par$1 = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each$k(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par = function (futures) {\n      return par$1(futures, Future.nu);\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$k(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$3(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    var sibling$2 = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq(scope, x) && predicate(x);\n      });\n    };\n    var child = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$3(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$3(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$2 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    var promiseObj = window.Promise ? window.Promise : Promise$1;\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (cb) {\n        window.setTimeout(cb, 0);\n      };\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append$1(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$7);\n      };\n      var getOrCreateState = function (url) {\n        return get$9(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$1(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$1(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par(map$3(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each$k(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    };\n\n    var create$8 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$8();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock$2 = lazyLookup(blocks);\n    var isTable$2 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline$1 = function (node) {\n      return isElement$6(node) && !isBlock$2(node);\n    };\n    var isBr$4 = function (node) {\n      return isElement$6(node) && name(node) === 'br';\n    };\n    var isTextBlock$2 = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems$1);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$4 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp$1 = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP$1 = zeroWidth;\n    var isZwsp = isZwsp$1;\n    var trim$2 = removeZwsp;\n\n    var isElement$4 = isElement$5;\n    var isText$6 = isText$7;\n    var isCaretContainerBlock$1 = function (node) {\n      if (isText$6(node)) {\n        node = node.parentNode;\n      }\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$6(node) && isZwsp(node.data);\n    };\n    var isCaretContainer$2 = function (node) {\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\n    };\n    var insertInline$1 = function (node, before) {\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP$1);\n      var parentNode = node.parentNode;\n      if (!before) {\n        var sibling = node.nextSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        var sibling = node.previousSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock$1 = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock$1(range.startContainer);\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\n    var isContentEditableFalse$a = isContentEditableFalse$b;\n    var isBr$3 = isBr$5;\n    var isText$5 = isText$7;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$1 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer$2;\n    var isCaretCandidate$3 = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$5(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$3(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$3(elm);\n      }, false) !== true;\n    };\n    var isAtomic$1 = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate$1 = function (node, root) {\n      return isCaretCandidate$3(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent$1 = function (node, rootNode) {\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        var node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$5(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$2 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode$2 = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument = function (node) {\n      return isDocumentFragment(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$5(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\n    var split$1 = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var createMap = function (defaultValue, extendWith) {\n      var value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$5(value, extendWith);\n    };\n    var getTextRootBlockElements = function (schema) {\n      return createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split$1(children);\n        }\n        var names = split$1(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split$1(name);\n        ni = names.length;\n        var attrs = split$1(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$h(split$1(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$h(split$1(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$h(split$1('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$h(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    var Schema = function (settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = createMap(defaultValue, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split$1(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$j(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split$1(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$h(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$h(split$1(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$5({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$h(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$5({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$h(split$1(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$h(split$1(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$h(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$h(split$1('strong/b em/i'), function (item) {\n            var items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$h(textInlineElementsMap, function (_val, name) {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('ol ul blockquote a table tbody'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$h(split$1('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$h({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$h(explode$3(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = constant(validStyles);\n      var getInvalidStyles = constant(invalidStyles);\n      var getValidClasses = constant(validClasses);\n      var getBoolAttrs = constant(boolAttrMap);\n      var getBlockElements = constant(blockElementsMap);\n      var getTextBlockElements = constant(textBlockElementsMap);\n      var getTextInlineElements = constant(textInlineElementsMap);\n      var getShortEndedElements = constant(shortEndedElementsMap);\n      var getSelfClosingElements = constant(selfClosingElementsMap);\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\n      var getSpecialElements = constant(specialElements);\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = constant(customElementsMap);\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var _this = this;\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || _this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$j(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    var isNativeEvent = function (event) {\n      return event instanceof Event || isFunction(event.initEvent);\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    };\n    var needsNormalizing = function (event) {\n      return isNullable(event.preventDefault) || isNativeEvent(event);\n    };\n    var clone$2 = function (originalEvent, data) {\n      var event = data !== null && data !== void 0 ? data : {};\n      for (var name_1 in originalEvent) {\n        if (!has$2(deprecated, name_1)) {\n          event[name_1] = originalEvent[name_1];\n        }\n      }\n      if (isNonNullable(event.composedPath)) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      return event;\n    };\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\n      var _a;\n      var event = clone$2(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = function () {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.returnValue = false;\n          }\n        };\n        event.stopPropagation = function () {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.cancelBubble = true;\n          }\n        };\n        event.stopImmediatePropagation = function () {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return isNonNullable(event) && mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        var mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      if (isUndefined(event.metaKey)) {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$j(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix({\n          type: name,\n          target: target\n        }, args);\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr$1.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            input[0] = null;\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each$k([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each$k([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n            checkContext = null;\n            return ret;\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event$1 = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment$1 = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString(sourceItem)) {\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$2 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var each$g = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep$2 = function (array, callback) {\n      var out = [];\n      each$g(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event$1.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$2(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$2(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$g(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$g(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event$1.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event$1.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event$1.fire(this, name.type, name);\n          } else {\n            Event$1.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return DomQuery(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$g,\n      trim: trim$1,\n      grep: grep$2,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$g({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$g({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$f = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter && value !== null) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    var DOMUtils = function (doc, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$f(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$f(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$f(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each$k(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$f(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$f(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$5(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$5(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$5(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$j(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        if (!isIE) {\n          return node === parent || parent.contains(node);\n        } else {\n          while (node) {\n            if (parent === node) {\n              return true;\n            }\n            node = node.parentNode;\n          }\n          return false;\n        }\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    var DOM$a = DOMUtils.DOM;\n    var each$e = Tools.each, grep = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM$a;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep(scripts);\n          scripts.length = 0;\n          each$e(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$e(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has$2(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray$1(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$9(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add$4 = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$j(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl$1 = function () {\n      return getLanguageData().bind(function (items) {\n        return get$9(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has$2(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add$4,\n      translate: translate,\n      isRtl: isRtl$1,\n      hasCode: hasCode\n    };\n\n    var AddOnManager = function () {\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter$4(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each$k(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = urls[pluginName];\n        each$k(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$k(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has$2(lookup, name) && state === 'added') {\n          callback();\n        } else if (has$2(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read$4 = function (element, attr) {\n      var value = get$6(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$3 = function (element, attr, id) {\n      var old = read$4(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$5 = function (element, attr, id) {\n      var nu = filter$4(read$4(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$6(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$4(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$3(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$5(element, 'class', clazz);\n    };\n\n    var add$1 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$6(element, 'class');\n      }\n    };\n    var remove$3 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$k(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child$1(start, rng.startOffset).getOr(start);\n      var closest = closest$2(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$6(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement$6(elem) && has(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each$k(markers, function (m) {\n        var uid = get$6(m, dataAnnotationId());\n        var nodesAlready = get$9(directory, uid).getOr([]);\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup$n = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: value()\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = get$9(callbackMap, name).getOrThunk(initData);\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map$3(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each$k(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.clear();\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!is$1(prev, uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$m = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each$k(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$7 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return get$9(annotations, name).map(function (a) {\n          return a.settings;\n        });\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add = function (element, classes) {\n      each$k(classes, function (x) {\n        add$1(element, x);\n      });\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map$3(nodes, SugarElement.fromDom);\n    };\n\n    var get$3 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner = owner$1(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep$1 = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$7(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$7);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$7);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$7(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var round$2 = Math.round;\n    var clone = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove$1 = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow$1 = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var clamp$2 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode$1 = function (container, offset) {\n      if (isElement$5(container) && container.hasChildNodes()) {\n        var childNodes = container.childNodes;\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    var getNodeUnsafe = function (container, offset) {\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$5;\n    var isCaretCandidate$2 = isCaretCandidate$3;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$7;\n    var isBr$2 = isBr$5;\n    var nodeIndex$1 = DOMUtils.nodeIndex;\n    var resolveIndex$1 = getNodeUnsafe;\n    var createRange$1 = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    };\n    var isWhiteSpace$1 = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\n        var text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange$1(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect$1 = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone(clientRects[0]);\n      } else {\n        clientRect = clone(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$4(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$3(container)) {\n        if (caretPosition.isAtEnd()) {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    var CaretPosition = function (container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex$1(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    };\n    CaretPosition.fromRangeStart = function (range) {\n      return CaretPosition(range.startContainer, range.startOffset);\n    };\n    CaretPosition.fromRangeEnd = function (range) {\n      return CaretPosition(range.endContainer, range.endOffset);\n    };\n    CaretPosition.after = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    };\n    CaretPosition.before = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\n    };\n    CaretPosition.isAbove = function (pos1, pos2) {\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    };\n    CaretPosition.isBelow = function (pos1, pos2) {\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    };\n    CaretPosition.isAtStart = function (pos) {\n      return pos ? pos.isAtStart() : false;\n    };\n    CaretPosition.isAtEnd = function (pos) {\n      return pos ? pos.isAtEnd() : false;\n    };\n    CaretPosition.isTextPosition = function (pos) {\n      return pos ? isText$7(pos.container()) : false;\n    };\n    CaretPosition.isElementPosition = function (pos) {\n      return CaretPosition.isTextPosition(pos) === false;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$3 = isText$7;\n    var isBogus = isBogus$2;\n    var nodeIndex = DOMUtils.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$3(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$3(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil$1 = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$6 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$3(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil$1(root, container);\n      parents = filter$2(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$3(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$3(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$3(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$3(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex(container) + 1;\n        } else {\n          offset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$7(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      if (isRangeInCaretContainerBlock(rng)) {\n        bookmark.isFakeCaret = true;\n      }\n      return bookmark;\n    };\n    var findIndex = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint$1 = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$5(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$5(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark$2 = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$9 = DOMUtils.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre$1 = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString$1(contentCss)) {\n        return map$3(contentCss.split(','), trim$4);\n      } else if (isArray$1(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getFontCss = function (editor) {\n      var fontCss = editor.getParam('font_css', []);\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$4);\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString$1(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins$1 = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n    var getIframeAriaText = function (editor) {\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\n    };\n\n    var isElement$2 = isElement$5;\n    var isText$2 = isText$7;\n    var removeNode$1 = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$2(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$2 = function (caretContainerNode) {\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$2(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect().browser;\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\n    var isMedia$1 = isMedia$2;\n    var isTableCell$3 = isTableCell$5;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var scrollX;\n      var scrollY;\n      if (root.tagName === 'BODY') {\n        var docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        var rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      var margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = value();\n      var cursorInterval;\n      var caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var rng;\n        hide();\n        if (isTableCell$3(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\n          var clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\n          lastVisualCaret.set({\n            caret: caret,\n            element: element,\n            before: before\n          });\n          if (before) {\n            DomQuery(caret).addClass('mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.on(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$8(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\n    var isMedia = isMedia$2;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer = isCaretContainer$2;\n    var isCaretContainerBlock = isCaretContainerBlock$1;\n    var isElement$1 = isElement$5;\n    var isCaretCandidate$1 = isCaretCandidate$3;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock$2 = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$1(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\n      while (node && node !== root) {\n        var sibling = node[siblingName];\n        if (isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$2 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        if (!isElement$1(container)) {\n          container = container.parentNode;\n        }\n        var location_1 = container.getAttribute('data-mce-caret');\n        if (location_1 === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location_1 === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$7(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$5(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\n    var isText$1 = isText$7;\n    var isElement = isElement$5;\n    var isBr$1 = isBr$5;\n    var isCaretCandidate = isCaretCandidate$3;\n    var isAtomic = isAtomic$1;\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\n    var getParents$3 = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$1(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$1(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    var findCaretPosition$1 = function (direction, startPos, root) {\n      var node;\n      var nextNode;\n      var innerNode;\n      var caretPosition;\n      if (!isElement(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$1(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$1(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode$1(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$7(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID$1 = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$5(node) && node.id === CARET_ID$1;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID$1) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return isString$1(bookmark.start);\n    };\n    var isRangeBookmark = function (bookmark) {\n      return has$2(bookmark, 'rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return has$2(bookmark, 'id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return has$2(bookmark, 'name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(never, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$7(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$7(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$1 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark$2(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$1(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is(nbsp);\n    var isWhiteSpace = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container === rng.endContainer) {\n        if (isInlineBlock(container.childNodes[offset])) {\n          return;\n        }\n      }\n      if (isElement$5(container)) {\n        var nodes = container.childNodes;\n        var walker = void 0;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (var node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$7(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (isFunction(value)) {\n        value = value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq$5 = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$2 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$9(format, key).exists(function (field) {\n            var fieldValues = isArray$1(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$3(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n    var isMixedFormat = function (format) {\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\n    };\n    var shouldExpandToSelector = function (format) {\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    };\n\n    var isBookmarkNode = isBookmarkNode$1;\n    var getParents$1 = getParents$2;\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\n    var isTextBlock = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$1(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < formatList.length; y++) {\n          var curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\n      var node = container;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock(editor, node);\n        }, scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, formatList, container, offset, start) {\n      var parent = container;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    };\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      var format = formatList[0];\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$7(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$7(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$7(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$7(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$5(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$5(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var walk$2 = function (dom, rng, callback) {\n      var startOffset = rng.startOffset;\n      var startContainer = getNode$1(rng.startContainer, startOffset);\n      var endOffset = rng.endOffset;\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      var exclude = function (nodes) {\n        var firstNode = nodes[0];\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        var lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        return dom.getParent(node, function (node) {\n          return node.parentNode === root;\n        }, root);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$2(cell, 'table', isRoot);\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$7(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$7(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains$3([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$k(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$1 = NodeValue(isText$8, 'text');\n    var get$2 = function (element) {\n      return api$1.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$1(master, annotation());\n      set$1(master, '' + dataAnnotationId(), uid);\n      set$1(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll$1(master, attributes);\n      add(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = value();\n      var finishWrapper = function () {\n        wrapper.clear();\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(nu);\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each$k(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$3(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$2(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$7();\n      setup$m(editor, registry);\n      var changes = setup$n(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each$k(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map$3(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    var BookmarkManager = function (selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$5(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n    var fireFormatApply = function (editor, format, node, vars) {\n      return editor.fire('FormatApply', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n    var fireFormatRemove = function (editor, format, node, vars) {\n      return editor.fire('FormatRemove', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\n    var ControlSelection = function (selection, editor) {\n      var elementSelectionAttr = 'data-mce-selected';\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isMedia = function (elm) {\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTargets = function (elm) {\n        if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else {\n          return [elm];\n        }\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object')) {\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$2(SugarElement.fromDom(elm), selector);\n        }\n      };\n      var createGhostElement = function (elm) {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      var setSizeProp = function (element, name, value) {\n        if (isNonNullable(value)) {\n          var targets = getResizeTargets(element);\n          each$k(targets, function (target) {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              var target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\n        }\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$j(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$j(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (pointDoc.caretRangeFromPoint) {\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent$1 = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent$1(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$2 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr$5(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse$b(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$7(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$7(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$7(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$5(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$7(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var RangeUtils = function (dom) {\n      var walk = function (rng, callback) {\n        return walk$2(dom, rng, callback);\n      };\n      var split$1 = split;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split$1,\n        normalize: normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$1 = function (element) {\n      return api.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    var find$1 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$8(last)) {\n            return {\n              element: last,\n              offset: get$2(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$1(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$4(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$7(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$8(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$1(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus$1 = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$5 };\n\n    var adt$1 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$2 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$1 = adt$1.before;\n    var on = adt$1.on;\n    var after$1 = adt$1.after;\n    var Situ = {\n      before: before$1,\n      on: on,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$2\n    };\n\n    var adt = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt.domRange;\n    var relative = adt.relative;\n    var exact = adt.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$1 = detect().browser;\n    var clamp$1 = function (offset, element) {\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$1.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement$1 = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils.DOM;\n    var isEditorUIElement = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents$1 = function (editorManager, e) {\n      var editor = e.editor;\n      register$3(editor);\n      editor.on('focusin', function () {\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.fire('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        Delay.setEditorTimeout(editor, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$l = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$1(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection$1 = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus$1(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active(dos).filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection$1(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection$1(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$7(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint(dom, rng, node, true);\n          moveEndPoint(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map$3(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$1 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$j(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$j(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.children = function () {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$1(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$1(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html,\n          re: re\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join(''),\n          re: re\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(result.re, function (imageId) {\n        return get$9(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var each$d = Tools.each, trim = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$3(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$d(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.isDomSafe = function (uri, context, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          var decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          try {\n            decodedUri = decodeURIComponent(decodedUri);\n          } catch (ex) {\n            decodedUri = unescape(decodedUri);\n          }\n          if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n            return false;\n          }\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$d(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var lazyTempDocument$1 = cached(function () {\n      return document.implementation.createHTMLDocument('parser');\n    });\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      var shortEndedElements = schema.getShortEndedElements();\n      var count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          var startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            var endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    var SaxParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      settings = settings || {};\n      var doc = lazyTempDocument$1();\n      var form = doc.createElement('form');\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return restoreDataUris(value, base64Extract);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            var attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              var i_1 = validAttributePatterns.length;\n              while (i_1--) {\n                attrRule = validAttributePatterns[i_1];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i_1 === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          var isNameOrId = name === 'name' || name === 'id';\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\n            return;\n          }\n          if (filteredUrlAttrs[name] && !URI.isDomSafe(value, tagName, settings)) {\n            return;\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    };\n    SaxParser.findEndTag = findMatchingEndTagIndex;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var schema = serializer.schema;\n      var content = trimHtml(serializer.getTempAttrs(), html);\n      var shortEndedElements = schema.getShortEndedElements();\n      var matches;\n      while (matches = bogusAllRegExp.exec(content)) {\n        var index = bogusAllRegExp.lastIndex;\n        var matchLength = matches[0].length;\n        var endTagIndex = void 0;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$2(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var setupArgs$3 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        getInner: true\n      });\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var defaultedArgs = setupArgs$3(args, format);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\n      var content;\n      if (updatedArgs.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (updatedArgs.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\n      } else if (updatedArgs.format === 'tree') {\n        content = editor.serializer.serialize(body, updatedArgs);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\n      }\n      if (!contains$3([\n          'text',\n          'tree'\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        updatedArgs.content = Tools.trim(content);\n      } else {\n        updatedArgs.content = content;\n      }\n      if (updatedArgs.no_events) {\n        return updatedArgs.content;\n      } else {\n        return editor.fire('GetContent', updatedArgs).content;\n      }\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$c = Tools.each;\n    var ElementUtils = function (dom) {\n      var compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$c(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (has$2(obj1, name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      return { compare: compare };\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$1(settings.indent_before || '');\n      var indentAfter = makeMap$1(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          if (!handler) {\n            var name_1 = node.name;\n            var isEmpty = node.shortEnded;\n            var attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              var sortedAttrs = [];\n              sortedAttrs.map = {};\n              var elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  var attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (var i = 0, l = attrs.length; i < l; i++) {\n                  var attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name_1);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var nonInheritableStyles = new Set();\n    (function () {\n      var nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$k(nonInheritableStylesArr, function (style) {\n        nonInheritableStyles.add(style);\n      });\n    }());\n    var shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    var getStyleProps = function (dom, node) {\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    };\n    var isNonInheritableStyle = function (style) {\n      return nonInheritableStyles.has(style);\n    };\n    var hasInheritableStyles = function (dom, node) {\n      return forall(getStyleProps(dom, node), function (style) {\n        return !isNonInheritableStyle(style);\n      });\n    };\n    var getLonghandStyleProps = function (styles) {\n      return filter$4(styles, function (style) {\n        return exists(shorthandStyleProps, function (prop) {\n          return startsWith(style, prop);\n        });\n      });\n    };\n    var hasStyleConflict = function (dom, node, parentNode) {\n      var nodeStyleProps = getStyleProps(dom, node);\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\n      var valueMismatch = function (prop) {\n        var nodeValue = dom.getStyle(node, prop);\n        var parentValue = dom.getStyle(parentNode, prop);\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, function (nodeStyleProp) {\n        var propExists = function (props) {\n          return exists(props, function (prop) {\n            return prop === nodeStyleProp;\n          });\n        };\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\n    var isAfterTable = matchesElementPosition(false, isTable$3);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants(elm, 'br');\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\n      if (allBrs.length === brs.length) {\n        each$k(brs, remove$7);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$7(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil = function (start, root, predicate) {\n      if (contains$1(root, start)) {\n        return dropLast(parents$1(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents = function (start, root) {\n      return parentsUntil(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock$1(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock$1(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$4);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\n    };\n    var isBeforeBr$1 = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock = function (root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains$3([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest$3(elm, isElement$6);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map$3(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$7(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection$1 = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock = function (editor, elm) {\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$2(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\n      remove$7(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has$2(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq(root, cur);\n      };\n    };\n    var getTableCells = function (table) {\n      return descendants(table, 'td,th');\n    };\n    var getTableDetailsFromRange = function (rng, isRoot) {\n      var getTable = function (node) {\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\n      };\n      var startTable = getTable(rng.startContainer);\n      var endTable = getTable(rng.endContainer);\n      var isStartInTable = startTable.isSome();\n      var isEndInTable = endTable.isSome();\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable: startTable,\n        endTable: endTable,\n        isStartInTable: isStartInTable,\n        isEndInTable: isEndInTable,\n        isSameTable: isSameTable,\n        isMultiTable: isMultiTable\n      };\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (isRoot) {\n      return function (startCell) {\n        return getClosestTable(startCell, isRoot).bind(function (table) {\n          return last$2(getTableCells(table)).map(function (endCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getCellRangeFromEndTable = function (isRoot) {\n      return function (endCell) {\n        return getClosestTable(endCell, isRoot).bind(function (table) {\n          return head(getTableCells(table)).map(function (startCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getTableSelectionFromCellRng = function (isRoot) {\n      return function (cellRng) {\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n          return tableSelection(cellRng, table, getTableCells(table));\n        });\n      };\n    };\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex$2(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.exists(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      });\n    };\n    var unselectCells = function (rng, selectionDetails) {\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\n      var otherContentRng = rng.cloneRange();\n      startTable.each(function (table) {\n        return otherContentRng.setStartAfter(table.dom);\n      });\n      endTable.each(function (table) {\n        return otherContentRng.setEndBefore(table.dom);\n      });\n      return otherContentRng;\n    };\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        return start.or(end);\n      }).bind(function (tableSelection) {\n        var isSameTable = selectionDetails.isSameTable;\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\n        } else if (selectedCells.length > 0) {\n          if (isSameTable) {\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n          } else {\n            var otherContentRng = unselectCells(rng, selectionDetails);\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\n          }\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n          var otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(function (cellRng) {\n          return deleteAction.singleCellTable(rng, cellRng.start);\n        });\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var cleanCells = function (cells) {\n      return each$k(cells, function (cell) {\n        remove$6(cell, 'contenteditable');\n        fillWithPaddingBr(cell);\n      });\n    };\n    var getOutsideBlock = function (editor, container) {\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    };\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\n      emptyBlock.each(function (block) {\n        if (startInTable) {\n          remove$7(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    var deleteContentInsideCell = function (editor, cell, rng, isFirstCellInSelection) {\n      var insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false);\n    };\n    var collapseAndRestoreCellSelection = function (editor) {\n      var selectedCells = getCellsFromEditor(editor);\n      var selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$5(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, function (cell) {\n          return eq(cell, selectedNode);\n        })) {\n        set$1(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\n      var editorRng = editor.selection.getRng();\n      var cellsToClean = outsideDetails.bind(function (_a) {\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        var endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\n      var rng = editor.selection.getRng();\n      var startCell = startTableCells[0];\n      var endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      var startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      var endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell, moveSelection) {\n      if (moveSelection === void 0) {\n        moveSelection = true;\n      }\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(cell, lastBlock)) {\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock) && isEmpty$2(node)) {\n            remove$7(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement$2(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret$3 = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$9 = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    var createRange = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems = function (elm) {\n      return filter$4(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr$5(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$1 = isTableCell$5;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody();\n        var elementUtils_1 = ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils_1.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom;\n      var selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (isText$7(node)) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          var node2 = marker.nextSibling;\n          if (isText$7(node2)) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode;\n      var rng, node;\n      var selection = editor.selection;\n      var dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      var args = editor.fire('BeforeSetContent', {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      });\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        var marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        var rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each$k(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each$k(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (has$2(nodeMatches, name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (has$2(attrMatches, name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each$k(matches, function (match) {\n        each$k(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html, noSelection) {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    var setContentString = function (editor, body, content, args) {\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        var padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        var forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content, args.no_selection);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content, args.no_selection);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setupArgs$2 = function (args, content) {\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\n        set: true,\n        content: isTreeNode(content) ? '' : content\n      });\n    };\n    var setContentInternal = function (editor, content, args) {\n      var defaultedArgs = setupArgs$2(args, content);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\n      if (!isTreeNode(content)) {\n        content = updatedArgs.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\n      });\n    };\n\n    var sibling = function (scope, predicate) {\n      return sibling$2(scope, predicate).isSome();\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isEq$3 = isEq$5;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars, similar) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return !!matchNode(editor, node, name, vars, similar);\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var items = format[itemName];\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (isUndefined(items.length)) {\n          for (var key in items) {\n            if (has$2(items, key)) {\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              var expectedValue = replaceVars(items[key], vars);\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            var classes = format.classes;\n            if (classes) {\n              for (var x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match$2 = function (editor, name, vars, node, similar) {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var dom = editor.dom;\n      if (formatList) {\n        var startNode = editor.selection.getStart();\n        var parents = getParents$2(dom, startNode);\n        for (var x = formatList.length - 1; x >= 0; x--) {\n          var format = formatList[x];\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\n            return true;\n          }\n          for (var i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$2(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$k = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\n      remove$7(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter = filter$2;\n    var each$b = each$i;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess$1 = function (name, editor) {\n      each$b(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$b(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$a = Tools.each;\n    var isElementNode$1 = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var elementUtils = ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\n            var tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$a(dom.select(selector, node), function (node) {\n          if (isElementNode$1(node)) {\n            each$a(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$a(node.childNodes, function (node) {\n        if (isElementNode$1(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$9 = Tools.each;\n    var isEq$2 = isEq$5;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$5(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$7(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$1 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$4(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$3(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName = function (dom, node, format) {\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$5(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find = function (dom, node, next, inc) {\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\n    };\n    var removeNode = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each$k(from(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = null;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each$k(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$9(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$9(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each$k(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(name);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$9(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$1 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var removeNodeFormat = function (node) {\n        return exists(formatList, function (fmt) {\n          return removeFormat$1(ed, fmt, vars, node, node);\n        });\n      };\n      var process = function (node) {\n        var lastContentEditable = true;\n        var hasContentEditableState = false;\n        if (isElement$5(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          var removed = removeNodeFormat(node);\n          var currentNodeMatches = removed || exists(formatList, function (f) {\n            return matchName$1(dom, node, f);\n          });\n          var parentNode = node.parentNode;\n          if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n            removeNodeFormat(parentNode);\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n        var textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$k(textDecorations, function (decoration) {\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, null, node);\n          }\n        });\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$7(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$2(dom, newRng, function (nodes) {\n              each$k(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$2(dom, expandedRng, function (nodes) {\n          each$k(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    var each$8 = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$8(formatList, function (format) {\n        if (isInlineFormat(format)) {\n          each$8(editor.dom.select(format.inline, node), function (child) {\n            if (!isElementNode$1(child)) {\n              return;\n            }\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$7 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = getTextRootBlockElements(editor.schema);\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat$1 = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        if (fmt === void 0) {\n          fmt = format;\n        }\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        each$7(fmt.styles, function (value, name) {\n          dom.setStyle(elm, name, replaceVars(value, vars));\n        });\n        if (fmt.styles) {\n          var styleVal = dom.getAttrib(elm, 'style');\n          if (styleVal) {\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\n          }\n        }\n        each$7(fmt.attributes, function (value, name) {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$7(fmt.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!dom.hasClass(elm, value)) {\n            dom.addClass(elm, value);\n          }\n        });\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        each$7(formatList, function (format) {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var createWrapElement = function (wrapName) {\n        if (isString$1(wrapName)) {\n          var wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = createWrapElement(wrapName);\n        walk$2(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentNode = node.parentNode;\n            var parentName = parentNode.nodeName.toLowerCase();\n            if (isElement$5(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$k(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$k(nodes, process);\n        });\n        if (format.links === true) {\n          each$k(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$k(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$k(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$k(node.childNodes, function (node) {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var mergeStyles = function (node) {\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\n              return matchName$1(dom, child, format);\n            });\n            return childElement.map(function (child) {\n              var clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            break;\n          }\n        }\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat$1(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize(selection.getRng()));\n            preserve(selection, true, function () {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    var hasVars = function (value) {\n      return has$2(value, 'vars');\n    };\n    var setup$j = function (registeredFormatListeners, editor) {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', function (e) {\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\n        }).bind(function (node) {\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\n        }).getOrThunk(function () {\n          return fallbackElement(editor);\n        });\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    var fallbackElement = function (editor) {\n      return editor.selection.getStart();\n    };\n    var matchingNode = function (editor, parents, format, similar, vars) {\n      var isMatchingNode = function (node) {\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      var isUnableToMatch = function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    var getParents = function (editor, elm) {\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$4(getParents$2(editor.dom, element), function (node) {\n        return isElement$5(node) && !isBogus$2(node);\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\n      var parents = getParents(editor, elm);\n      each$j(registeredCallbacks, function (data, format) {\n        var runIfChanged = function (spec) {\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          var isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            var node_1 = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node: node_1,\n                format: format,\n                parents: parents\n              });\n            } else {\n              each$k(spec.callbacks, function (callback) {\n                return callback(isSet, {\n                  node: node_1,\n                  format: format,\n                  parents: parents\n                });\n              });\n            }\n          }\n        };\n        each$k([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$k(data.withVars, runIfChanged);\n      });\n    };\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\n          var base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        var getCurrent = function () {\n          var parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar: similar,\n            vars: vars,\n            callback: callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        return get$9(formatChangeItems, format).each(function (group) {\n          formatChangeItems[format] = {\n            withSimilar: __assign(__assign({}, group.withSimilar), {\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withVars: filter$4(group.withVars, function (item) {\n              return item.callback !== callback;\n            })\n          };\n        });\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      if (registeredFormatListeners.get() === null) {\n        setup$j(registeredFormatListeners, editor);\n      }\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$1(editor, name, vars, node);\n      } else {\n        applyFormat$1(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$k(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$6(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map$3(table.rows, function (row) {\n        var cells = map$3(row.cells, function (cell) {\n          var td = deep$1(cell);\n          remove$6(td, 'colspan');\n          remove$6(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\n        each$k(descendants(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter$4(parents, function (elm) {\n        return isInline$1(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$3 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$2(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$2(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var setupArgs$1 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        selection: true\n      });\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs$1(args, format);\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\n      if (updatedArgs.isDefaultPrevented()) {\n        editor.fire('GetContent', updatedArgs);\n        return updatedArgs.content;\n      }\n      if (updatedArgs.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        updatedArgs.getInner = true;\n        var content = getSerializedContent(editor, updatedArgs);\n        if (updatedArgs.format === 'tree') {\n          return content;\n        } else {\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', updatedArgs);\n          return updatedArgs.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$5(elm)) {\n        return elm.outerHTML;\n      } else if (isText$7(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each$k(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter$4(map$3(from(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var lazyTempDocument = cached(function () {\n      return document.implementation.createHTMLDocument('undo');\n    });\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\n      set(elm, getLevelContent(level));\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$1 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo$1 = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset$1 = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo$1 = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact$1 = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore$1 = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each$k(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange$1(editor, locks, beforeBookmark);\n          },\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo$1(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo$1(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear$1(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset$1(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo$1(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo$1(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact$1(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore$1(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra$1(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node, similar) {\n            return match$2(editor, name, vars, node, similar);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat$1(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$1(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\n      return {\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: function (_undoManager, _locks, fn) {\n            return undoManager.transact(fn);\n          },\n          ignore: function (_locks, callback) {\n            return undoManager.ignore(callback);\n          },\n          extra: function (_undoManager, _index, callback1, callback2) {\n            return undoManager.extra(callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, _node, similar) {\n            return formatter.match(name, defaultVars(vars), similar);\n          },\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: function (name) {\n            return formatter.canApply(name);\n          },\n          closest: function (names) {\n            return formatter.closest(names);\n          },\n          apply: function (name, vars, _node) {\n            return formatter.apply(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return formatter.remove(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return formatter.toggle(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\n            return formatter.formatChanged(formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, _format) {\n            return editor.getContent(args);\n          },\n          setContent: function (content, args) {\n            return editor.setContent(content, args);\n          },\n          insertContent: function (content, _details) {\n            return editor.insertContent(content);\n          },\n          addVisual: editor.addVisual\n        },\n        selection: {\n          getContent: function (_format, args) {\n            return selection.getContent(args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(raw.getRawModel());\n          }\n        }\n      };\n    };\n    var makeNoopAdaptor = function () {\n      var nul = constant(null);\n      var empty = constant('');\n      return {\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: empty,\n          insertContent: noop,\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    var isRtc = function (editor) {\n      return has$2(editor.plugins, 'rtc');\n    };\n    var getRtcSetup = function (editor) {\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\n        return Optional.from(rtcPlugin.setup);\n      });\n    };\n    var setup$i = function (editor) {\n      var editorCast = editor;\n      return getRtcSetup(editor).fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (setup) {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(function () {\n          return setup().then(function (rtcEditor) {\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n            return rtcEditor.rtc.isRemote;\n          });\n        });\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node, similar) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    };\n    var getContent$2 = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent$2 = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual$1 = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove$7(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$8).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs(args, content);\n      var updatedArgs = defaultedArgs;\n      if (!defaultedArgs.no_events) {\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\n        if (eventArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', eventArgs);\n          return;\n        } else {\n          updatedArgs = eventArgs;\n        }\n      }\n      updatedArgs.content = cleanContent(editor, updatedArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!updatedArgs.no_events) {\n        editor.fire('SetContent', updatedArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && has$2(callbackMap, selector)) {\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      var findMatchingNode = function (selector, nodes) {\n        return find$3(nodes, function (node) {\n          return dom.is(node, selector);\n        });\n      };\n      var getParents = function (elem) {\n        return dom.getParents(elem, null, dom.getRoot());\n      };\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element;\n              var parents = getParents(node);\n              var matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                findMatchingNode(selector, parents).each(function (node) {\n                  if (!currentSelectors[selector]) {\n                    each$k(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(function () {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart$1 = function (real) {\n        return getStart(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select$1 = function (node, content) {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        var doc = win.document;\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode$1 = function () {\n        return getNode(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select$1,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode$1,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each$k(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr_1 = new XMLHttpRequest();\n          xhr_1.open('GET', url, true);\n          xhr_1.responseType = 'blob';\n          xhr_1.onload = function () {\n            if (xhr_1.status === 200) {\n              resolve(xhr_1.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr_1.onerror = rejectWithError;\n          xhr_1.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count$1 = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count$1++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    var ImageScanner = function (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter$4(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map$3(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return isNonNullable(img.attr('data-mce-bogus'));\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$j(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri$1(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each$k(nodes, processImage);\n        });\n      }\n    };\n    var register$1 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var validClasses = schema.getValidClasses();\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            var classList = node.attr('class').split(' ');\n            var classValue = '';\n            for (var ci = 0; ci < classList.length; ci++) {\n              var className = classList[ci];\n              var valid = false;\n              var validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap = Tools.makeMap, each$6 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\n          if (originalNodeParent === void 0) {\n            originalNodeParent = node.parent;\n          }\n          if (specialElements[node.name]) {\n            node.empty().remove();\n          } else {\n            var children = node.children();\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n              var childNode = children_1[_i];\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\n              }\n            }\n            node.unwrap();\n          }\n        };\n        for (var ni = 0; ni < nodes.length; ni++) {\n          var node = nodes[ni];\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            var sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap();\n            continue;\n          }\n          var parents = [node];\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\n            parents.push(parent_1);\n          }\n          if (parent_1 && parents.length > 1) {\n            if (schema.isValidChild(parent_1.name, node.name)) {\n              parents.reverse();\n              newParent = filterNode(parents[0].clone());\n              var currentNode = newParent;\n              for (var i = 0; i < parents.length - 1; i++) {\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                  tempNode = filterNode(parents[i].clone());\n                  currentNode.append(tempNode);\n                } else {\n                  tempNode = currentNode;\n                }\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                  var nextNode = childNode.next;\n                  tempNode.append(childNode);\n                  childNode = nextNode;\n                }\n                currentNode = tempNode;\n              }\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n                parent_1.insert(newParent, parents[0], true);\n                parent_1.insert(node, newParent);\n              } else {\n                parent_1.insert(node, parents[0], true);\n              }\n              parent_1 = parents[0];\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\n                parent_1.empty().remove();\n              }\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              var sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var name = node.name;\n        if (name in nodeFilters) {\n          var list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        var i = attributeFilters.length;\n        while (i--) {\n          var attrName = attributeFilters[i].name;\n          if (attrName in node.attributes.map) {\n            var list = matchedAttributes[attrName];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[attrName] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (has$2(nodeFilters, name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var textRootBlockElements = getTextRootBlockElements(schema);\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, rootBlockNode = null;\n          var trim = function (rootBlock) {\n            if (rootBlock) {\n              node = rootBlock.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlock.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            var next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var blockElements = schema.getBlockElements();\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            var textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            var sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var output = {};\n          for (var name_2 in input) {\n            if (name_2 !== 'li' && name_2 !== 'p') {\n              output[name_2] = input[name_2];\n            }\n          }\n          return output;\n        };\n        var isTextRootBlockEmpty = function (node) {\n          var tempNode = node;\n          while (isNonNullable(tempNode)) {\n            if (tempNode.name in textRootBlockElements) {\n              return isEmpty(schema, nonEmptyElements, whiteSpaceElements, tempNode);\n            } else {\n              tempNode = tempNode.parent;\n            }\n          }\n          return false;\n        };\n        var parser = SaxParser({\n          validate: validate,\n          document: settings.document,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              var newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              var parent_2 = children[node.name];\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              var attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                var attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              var isNodeEmpty = isEmpty(schema, nonEmptyElements, whiteSpaceElements, node);\n              var parentNode = node.parent;\n              if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              } else if (elementRule.removeEmpty && isNodeEmpty) {\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n              } else if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isNodeEmpty)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = parentNode;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!has$2(matchedNodes, name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$1(exports, settings);\n      register$2(exports, settings);\n      return exports;\n    };\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            var type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each$k(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var oldDoc;\n      var dom = editor.dom;\n      var clonedNode = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        var doc_1 = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\n          doc_1.body.appendChild(doc_1.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc_1.body.firstChild;\n        } else {\n          clonedNode = doc_1.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc_1;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat = 'html';\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat;\n      return getContent$2(editor, args, format);\n    };\n\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent$2(editor, content, args);\n    };\n\n    var DOM$7 = DOMUtils.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$7.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$7.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var deprecatedSettings = ('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    var deprecatedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    var movedToPremiumPlugins = 'imagetools,toc'.split(',');\n    var getDeprecatedSettings = function (settings) {\n      var settingNames = filter$4(deprecatedSettings, function (setting) {\n        return has$2(settings, setting);\n      });\n      var forcedRootBlock = settings.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    var getDeprecatedPlugins = function (settings) {\n      var plugins = Tools.makeMap(settings.plugins, ' ');\n      var hasPlugin = function (plugin) {\n        return has$2(plugins, plugin);\n      };\n      var pluginNames = __spreadArray(__spreadArray([], filter$4(deprecatedPlugins, hasPlugin), true), bind(movedToPremiumPlugins, function (plugin) {\n        return hasPlugin(plugin) ? [plugin + ' (moving to premium)'] : [];\n      }), true);\n      return sort(pluginNames);\n    };\n    var logDeprecationsWarning = function (rawSettings, finalSettings) {\n      var deprecatedSettings = getDeprecatedSettings(rawSettings);\n      var deprecatedPlugins = getDeprecatedPlugins(finalSettings);\n      var hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      var hasDeprecatedSettings = deprecatedSettings.length > 0;\n      var isLegacyMobileTheme = finalSettings.theme === 'mobile';\n      if (hasDeprecatedPlugins || hasDeprecatedSettings || isLegacyMobileTheme) {\n        var listJoiner = '\\n- ';\n        var themesMessage = isLegacyMobileTheme ? '\\n\\nThemes:' + listJoiner + 'mobile' : '';\n        var pluginsMessage = hasDeprecatedPlugins ? '\\n\\nPlugins:' + listJoiner + deprecatedPlugins.join(listJoiner) : '';\n        var settingsMessage = hasDeprecatedSettings ? '\\n\\nSettings:' + listJoiner + deprecatedSettings.join(listJoiner) : '';\n        console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. ' + 'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.' + themesMessage + pluginsMessage + settingsMessage);\n      }\n    };\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$4);\n      return filter$4(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains$3(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = get$9(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return has$2(sectionResult.sections(), name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      var finalSettings = combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n      if (finalSettings.deprecation_warnings !== false) {\n        logDeprecationsWarning(settings, finalSettings);\n      }\n      return finalSettings;\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray$1(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has = function (id) {\n        return has$2(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = function () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    var NotificationManager = function (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex$2(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find$3(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus$1(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = constant(notifications);\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each$k(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter$4(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each$k(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message: message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArray([message], x, false));\n        } else {\n          console.log.apply(console, __spreadArray([message], x, false));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    var getFontCssUrls = function (editor) {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    var transformToUrls = function (editor, cssLinks) {\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map$3(cssLinks, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    var UploadStatus = function () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    };\n\n    var count = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString$1(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find$3(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter$4(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each$k(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var Uploader = function (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(function () {\n                return Optional.from(openNotification).map(apply);\n              }).each(function (n) {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    };\n\n    var openNotification = function (editor) {\n      return function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n    };\n    var createUploader = function (editor, uploadStatus) {\n      return Uploader(uploadStatus, {\n        url: getImageUploadUrl(editor),\n        basePath: getImageUploadBasePath(editor),\n        credentials: getImagesUploadCredentials(editor),\n        handler: getImagesUploadHandler(editor)\n      });\n    };\n    var ImageUploader = function (editor) {\n      var uploadStatus = UploadStatus();\n      var uploader = createUploader(editor, uploadStatus);\n      return {\n        upload: function (blobInfos, showNotification) {\n          if (showNotification === void 0) {\n            showNotification = true;\n          }\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\n        }\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last$2(data).filter(function (level) {\n          return !isEq$1(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get$a(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each$k(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map$3(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each$k(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter$4(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          if (isRtc(editor)) ; else {\n            each$k(result, function (resultItem) {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each$k(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$5(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': function (vars) {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    var FormatRegistry = function (editor) {\n      var formats = {};\n      var get$1 = function (name) {\n        return isNonNullable(name) ? formats[name] : formats;\n      };\n      var has = function (name) {\n        return has$2(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (!isString$1(name)) {\n            each$j(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$k(format, function (format) {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString$1(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get$1,\n        has: has,\n        register: register,\n        unregister: unregister\n      };\n    };\n\n    var each$5 = Tools.each;\n    var dom = DOMUtils.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$9(format, 'preview');\n        if (is$1(previewOpt, false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$5(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$5(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$5(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$5(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$h = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$h(editor);\n      setup$k(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node, similar) {\n          return matchFormat(editor, name, vars, node, similar);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, name, vars, similar) {\n          return matchNodeFormat(editor, node, name, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar, vars) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var shouldIgnoreCommand = function (cmd) {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcerepaint':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    var registerEvents = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = value();\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear(editor, undoManager, index);\n        },\n        reset: function () {\n          reset(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$g = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock$2(node1, rootNode);\n      var block2 = getParentBlock$2(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var isTextBlockOrListItem = function (element) {\n      return isTextBlock$2(element) || isListItem(element);\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      if (contains$1(rootNode, elm)) {\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable$1 = function (blockBoundary) {\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each$k(children, remove$7);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find$3(parents.reverse(), function (element) {\n        return isEmpty$2(element);\n      }).each(remove$7);\n    };\n    var isEmptyBefore = function (el) {\n      return filter$4(prevSiblings(el), function (el) {\n        return !isEmpty$2(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$4(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$k(extractChildren(fromBlock), function (child) {\n        before$4(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$2(toBlock)) {\n        remove$7(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each$k(extractChildren(fromBlock), function (child) {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$8 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$7 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$7(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, always);\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isText = isText$7;\n    var startsWithCaretContainer = function (node) {\n      return isText(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP$1);\n    };\n    var insertBefore = function (node) {\n      if (isText(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline, true);\n    var insertInlineAfter = curry(insertInline, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$7(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$2(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition(text, 1);\n          } else {\n            return CaretPosition(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition(text, text.length - 1);\n          } else {\n            return CaretPosition(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$2(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    curry(findLocation$1, false);\n    curry(findLocation$1, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start;\n      var positions = [];\n      while (currentPos) {\n        var nextPos = walk(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$5(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map$3(clientRects, function (rect) {\n          var clientRect = clone(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$5(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$7(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (var i = 0; i < clientRects.length; i++) {\n          var clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn;\n      var isBelowFn;\n      var isAboveFn;\n      var caretPosition;\n      var result = [];\n      var line = 0;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        var rect = getClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        var clientRect = clone(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\n    var findNode = findNode$1;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var isNodeClientRect = function (rect) {\n      return hasNonNullableKey(rect, 'node');\n    };\n    var findClosestClientRect = function (clientRects, clientX, allowInside) {\n      if (allowInside === void 0) {\n        allowInside = always;\n      }\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        if (isInsideX(clientX, clientRect)) {\n          return allowInside(clientRect) ? clientRect : oldClientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return allowInside(oldClientRect) ? oldClientRect : clientRect;\n        }\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$3(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var checkInside = function (clientRect) {\n        return !isTable$3(clientRect.node) && !isMedia$2(clientRect.node);\n      };\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX, checkInside);\n      if (closestNodeRect) {\n        var includeChildren = checkInside(closestNodeRect);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX, checkInside);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter$4(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last$2(result.positions);\n      } else {\n        var from = CaretPosition.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter$4(elms, isInlineTarget);\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter$4(elms, isInlineTarget);\n        each$k(inlines, function (_inline) {\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$2 = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\n      if (isInlineBoundariesEnabled(editor)) {\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\n          var rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\n          var outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return childNodesCount(elm) === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$2(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteElement = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n    };\n\n    var isEditable = function (target) {\n      return closest$3(target, function (elm) {\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue$4(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).exists(isListComponent);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each$k(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$f = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$e = function (editor) {\n      var startData = value();\n      var longpressFired = Cell(false);\n      var debounceLongpress = last(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return has$2(blockElements, node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$7(node)) {\n        return true;\n      } else if (isElement$5(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$7(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$d = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\n        return elm.dom;\n      }).getOrNull();\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH$2 = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$3 = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains$3(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append$1(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll$1(block, attrs);\n      append$1(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map$3(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find$3(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$1 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last$2(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll$1(element, getForcedRootBlockAttrs(editor));\n          append$1(element, SugarElement.fromTag('br'));\n          if (down) {\n            after$3(SugarElement.fromDom(table), element);\n          } else {\n            before$4(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\n      var os = detect().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$7(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$5(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var isFirstChild = function (elm) {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    var hasParent = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$5(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          var containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$7(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$7(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\n          return !contains$3(attrClasses, clazz);\n        });\n        var newClasses = __spreadArray(__spreadArray([], attrClasses, true), filteredClasses, true);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains$3(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$7(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$5(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$5(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$7(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\n      var rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before$4(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after$3(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr = function (pos) {\n      return isBr$5(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\n          return isBr$5(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$1 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine$1 = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine = function (editor, _shiftKey) {\n      return shouldBlockNewLine$1(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction = function (editor, evt) {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match([isBrMode(true)], newLineAction.br()),\n        match([inBrContext], newLineAction.br()),\n        match([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert = function (editor, evt) {\n      getAction(editor, evt).fold(function () {\n        insert$1(editor, evt);\n      }, function () {\n        insert$2(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n    };\n\n    var browser = detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$7 = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var platform = detect();\n    var executeKeyupAction = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    var stopImmediatePropagation = function (e) {\n      return e.stopImmediatePropagation();\n    };\n    var isPageUpDown = function (evt) {\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    };\n    var setNodeChangeBlocker = function (blocked, editor, block) {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    var setup$6 = function (editor, caret) {\n      if (platform.os.isOSX()) {\n        return;\n      }\n      var blocked = Cell(false);\n      editor.on('keydown', function (evt) {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$3(elm, textNode);\n          } else {\n            before$4(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$5 = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$c(editor);\n      setup$b(editor, caret);\n      setup$a(editor, caret);\n      setup$9(editor);\n      setup$5(editor);\n      setup$7(editor);\n      setup$8(editor, caret);\n      setup$6(editor, caret);\n      return caret;\n    };\n    var setup$4 = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString$1(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$3 = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\n    };\n    var normalizeSelection = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize(rng));\n    };\n    var setup$2 = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$1(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value();\n      var pageDom = DOMUtils.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start(state, editor);\n      var dragHandler = move(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', function (e) {\n        if (e.keyCode === VK.ESC) {\n          dragEndHandler();\n        }\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.isDefaultPrevented()) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$k(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each$k(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init$2 = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$1 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia$2(target)) {\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue = isContentEditableTrue$4;\n    var isContentEditableFalse = isContentEditableFalse$b;\n    var getContentEditableRoot = function (editor, node) {\n      return getContentEditableRoot$1(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var start = elm.firstChild;\n          if (isNullable(start)) {\n            return false;\n          }\n          var startPos = CaretPosition.before(start);\n          if (isBr$5(startPos.getNode()) && elm.childNodes.length === 1) {\n            return !isNearFakeSelectionElement(startPos);\n          } else {\n            var caretWalker = CaretWalker(elm);\n            var newPos = caretWalker.next(startPos);\n            return newPos && !isNearFakeSelectionElement(newPos);\n          }\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (isNullable(targetBlock)) {\n            return false;\n          }\n          if (targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return !dom.isChildOf(caretBlock, targetBlock) && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                setRange(range);\n                editor.getBody().focus();\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init$2(editor);\n        setup$1(editor);\n        setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq(nodeElm, elm)) {\n            remove$6(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse && !isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var documentElementEditingFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = noop;\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      var setupRtc = function () {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      var setup = function () {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (Env.ie >= 11) {\n          bodyHeight();\n          disableBackspaceIntoATable();\n        }\n        if (Env.ie) {\n          selectAll();\n          disableAutoUrlDetect();\n          ieInternalDragAndDrop();\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$6 = DOMUtils.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set$1(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', function () {\n        remove$7(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$3(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkSchemaSettings = function (editor) {\n      var settings = editor.settings;\n      return removeUndefined({\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements,\n        padd_empty_block_inline_children: settings.format_empty_lines\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc(),\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign(__assign({}, mkParserSettings(editor)), mkSchemaSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader$1 = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\n      var promises = [new promiseObj(function (resolve, reject) {\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\n        })];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([new promiseObj(function (resolve, reject) {\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\n          })]);\n      }\n    };\n    var loadContentCss = function (editor) {\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\n      var fontCss = getFontCss(editor);\n      var css = editor.contentCSS;\n      var removeCss = function () {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      var loaded = function () {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      if (editor.settings.content_style) {\n        appendStyle(editor, editor.settings.content_style);\n      }\n      return allStylesheets;\n    };\n    var preInit = function (editor) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    var loadInitialContent = function (editor) {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    var initEditorWithInitialContent = function (editor) {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$e(editor);\n      setup$3(editor);\n      if (!isRtc(editor)) {\n        setup$2(editor);\n      }\n      var caret = setup$4(editor);\n      setup$f(editor, caret);\n      setup$d(editor);\n      setup$g(editor);\n      var setupRtcThunk = setup$i(editor);\n      preInit(editor);\n      setupRtcThunk.fold(function () {\n        loadContentCss(editor).then(function () {\n          return initEditorWithInitialContent(editor);\n        });\n      }, function (setupRtc) {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(function () {\n          setupRtc().then(function (_rtcMode) {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n          }, function (err) {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n          });\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$1(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      var translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + ('<body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\" aria-label=\"' + translatedAriaText + '\">') + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var iframeTitle = editor.translate('Rich Text Area');\n      var ifr = createIframeElement(editor.id, iframeTitle, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$4 = DOMUtils.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$j(loadIcons, function (svgData, icon) {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString$1(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$3 = DOMUtils.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each$k(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone$3(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$6(element, attr.name);\n        });\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual = function (editor, elm) {\n      return addVisual$1(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$7(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var bindRange = function (editor, binder) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\n    };\n    var mapRange = function (editor, mapper) {\n      return bindRange(editor, compose1(Optional.some, mapper));\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$1(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    var processValue = function (value) {\n      if (typeof value !== 'string') {\n        var details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$4 = Tools.each;\n    var map = Tools.map, inArray = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (command.toLowerCase() !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n            self.editor.focus();\n          } else {\n            restore(self.editor);\n          }\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$4(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$4(commandList, function (callback, command) {\n          each$4(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'mceFocus': function (_command, _ui, value) {\n            focus(editor, value);\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$4('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, { value: value });\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'Lang': function (command, ui, lang) {\n            self.toggleFormat(command, {\n              value: lang.code,\n              customValue: lang.customCode\n            });\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': noop,\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$1(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has(elm, cls) && state === false) {\n        remove$3(elm, cls);\n      } else if (state) {\n        add$1(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set$1(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$6(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var lcName = name.toLowerCase();\n        var event = normalize$3(lcName, args || {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        var handlers = this.bindings[lcName];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = __spreadArray([wrappedCallback], handlers, true);\n            } else {\n              handlers = __spreadArray(__spreadArray([], handlers, true), [wrappedCallback], false);\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$j(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var filteredHandlers = partition(handlers, function (handler) {\n                  return handler.func === callback;\n                });\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$k(filteredHandlers.pass, function (handler) {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$j(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$2 = DOMUtils.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$j(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$j(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains$3(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$3 = Tools.each, explode$1 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var parseShortcut = function (pattern) {\n      var key;\n      var shortcut = {};\n      each$3(explode$1(pattern.toLowerCase(), '+'), function (value) {\n        if (value in modifierNames) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      var id = [shortcut.keyCode];\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (Env.mac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (Env.mac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$3(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$3(explode$1(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$3 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var DOM$1 = DOMUtils.DOM;\n    var extend$3 = Tools.extend, each$2 = Tools.each;\n    var resolve = Tools.resolve;\n    var ie = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager.languageLoad = this.settings.language_load;\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve(scope) : 0;\n          callback = resolve(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$1.getParent(self.id, 'form')) {\n            each$2(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM = DOMUtils.DOM;\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$1(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter$4(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '10.6',\n      releaseDate: '2022-10-19',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$l(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$9(elm, 'name').filter(function (name) {\n              return !DOM.get(name);\n            }).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              targets = targets.concat(DOM.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$1(explode(l), function (id) {\n                var elm = DOM.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$1(document.forms, function (f) {\n                    each$1(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$1(DOM.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$1(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString$1(id)) {\n          return find$3(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString$1(selector)) {\n          each$1(DOM.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', false, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$1(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max$1(rect.x, cropRect.x);\n      var y1 = max$1(rect.y, cropRect.y);\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max$1(0, clampRect.x - x1);\n      var underflowY1 = max$1(0, clampRect.y - y1);\n      var overflowX2 = max$1(0, x2 - cx2);\n      var overflowY2 = max$1(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$2 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp,\n      create: create$2,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$1 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$1();\n\n    var each = Tools.each, extend$1 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\n      }\n      each$j(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min = Math.min, max = Math.max, round = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min(r, min(g, b));\n        var maxRGB = max(r, max(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round(h),\n          s: round(s * 100),\n          v: round(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max(0, min(saturation, 1));\n        brightness = max(0, min(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round(255 * (r + match));\n        g = round(255 * (g + match));\n        b = round(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString$1(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color,\n        ImageUploader: ImageUploader\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n"],"names":["tinymce","IconManager","add","icons","call","id","global$7","util","Tools","resolve","global$6","isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isNull","a","isBoolean","isFunction","noop","constant","tripleEquals","b","never","always","none","NONE","fold","n","_s","isSome","isNone","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","f","s","Optional","from","nativeIndexOf","indexOf","nativePush","push","flatten","xs","r","i","len","length","apply","findMap","arr","is","lhs","rhs","comparator","left","cat","someIf","assumeExternalTargets","editor","externalTargets","getParam","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","global$5","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","menu","items","sanitizeWith","extracter","ListOptions","label","__assign","Object","assign","arguments","p","hasOwnProperty","this","keys","has","obj","key","global$4","global$3","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","predicate","collapsed","contents","cloneContents","walker","firstChild","elements","current","next","hasProtocol","url","test","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","selection","getNode","isImageFigure","dom","select","getParent","getAnchorText","anchorElm","innerText","textContent","getContent","format","replace","hasLinks","grep","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","getRng","nodeType","className","linkDomMutation","attachState","data","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","applyLinkOverrides","acc","each$1","getLinkAttrs","undoManager","transact","attach","focus","setAttribs","updateLink","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","unwrapOptions","cls","class","pred","onTrue","onFalse","props","k","internalFilter","v","_k","link","sanitizedData","isDomSafe","settings","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","findTextByValue","catalog","isListGroup","DialogChanges","initialData","linkCatalog","persistentData","onCatalogChange","change","catalogs","fieldName","anchor","persistentText","hasPersistentText","meta","getDelta","onChange","getData","getTitleFromUrlChange","ts","rawIndexOf","global$2","global$1","tryEmailTransform","message","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","AnchorListOptions","anchorNodes","anchors","ClassListOptions","getLinkClassList","global","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","extractor","convertURL","linkList","getLinkList","callback","send","success","JSON","parse","err","parseJson","error","_","output","then","optItems","LinkListOptions","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open$1","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","transform","setEditorTimeout","windowManager","confirm","state","delayedConfirm","DialogConfirms","pData","handleSubmit","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","buttons","primary","_a","newData","setData","makeDialog","spec","open","getLink","getSelectedLink","getStart","gotoLink","targetEl","$","scrollIntoView","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","openDialog","gotoSelectedLink","toggleState","toggler","on","off","toggleActiveState","updateState","setActive","mode","isReadOnly","toggleEnabledState","setDisabled","toggleUnlinkState","hasLinks$1","parents","e","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","addButton","setupButtons","addMenuItem","shortcut","setupMenuItems","addContextMenu","update","element","setupContextMenu","onSetupLink","buttonApi","addContextForm","launch","hasContextToolbar","initValue","commands","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","setupContextToolbars","metaKeyPressed","preventDefault","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","useQuickLink","fire","toolbarKey","register","addShortcut","setup","isType$1","eq$1","isObject","isUndefined","isNullable","isNonNullable","isNumber","isArrayOf","compose","fa","fb","args","_i","constant$1","identity$1","curry","fn","initialArgs","restArgs","all","not","die","global$g","__rest","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","pack","ar","l","slice","nativeSlice","contains$2","range$2","num","chunk$1","array","map$2","partition$3","pass","fail","filter$2","foldr","eachr","foldl","find$5","until","findUntil","findIndex$1","bind$3","reverse","difference","a1","a2","mapToObject","pure$2","copy","get$f","head","last$2","map$1","tupleMap","tuple","mapToArray","find$4","values","get$e","has$2","hasNonNullableKey","is$1","lift2","oa","ob","checkRange","str","substr","start","contains$1","endsWith","suffix","trim$1","isNotEmpty","isSupported$1","style","getPropertyValue","fromDom","SugarElement","html","scope","div","innerHTML","hasChildNodes","childNodes","console","tag","createTextNode","Function","SimpleResultType","name$2","isElement$2","isText$1","isDocument","isDocumentFragment","cached","called","unknown$3","nu$d","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$3","unknown","detect$3","candidates","userAgent","candidate","search","normalVersionRegex","checkContains","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$c","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$b","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","mediaMatch","query","matchMedia","matches","platform","userAgentDataOpt","browser","userAgentData","brands","uaBrand","lcBrand","parseInt","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","PlatformDetection","navigator","detect$1","selector","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq","e1","e2","contains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","owner$4","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","offsetParent","children","child$2","index","cs","spot","offset","leaf","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","getShadowRoot","getShadowHost","inBody","fbc","fab","doc","rawSet","setAttribute","set$8","setAll$1","get$d","getOpt","has$1","hasAttribute","remove$7","removeAttribute","internalSet","property","setProperty","internalRemove","removeProperty","set$7","setAll","css","setOptions","get$c","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue","remove$6","reflow","offsetWidth","Dimension","getOffset","get","parseFloat","aggregate","properties","isNaN","set","h","getOuter","max","cumulativeInclusions","api$3","getBoundingClientRect","height","offsetHeight","get$b","getOuter$2","r$1","top","translate","y","SugarPosition","firstDefinedOrZero","absolute$3","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport$1","box","boxPosition","api$2","get$a","getOuter$1","fromRawEvent$1","rawEvent","event","el","shadowRoot","isOpenShadowHost","composed","composedPath","getOriginalEventTarget","stop","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","handler","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","before$2","marker","after$2","sibling","nextSibling","append$2","prepend$1","firstChild$1","append$1","empty","rogue","remove$5","unwrap","wrapper","children$1","get$9","_DOC","scrollTo","bounds$1","width","right","bottom","getBounds$3","_win","scroll","get$8","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","walkUp","navigation","view","owner","rest","Navigation","freeze","__proto__","frameElement","find$2","path","d","paths","pathTo","frames","loc","bounds","box$1","xy","w","absolute$2","position","value$3","o","isValue","isError","_opt","_f","onValue","mapError","toOptional","error$1","onError","Result","fromOption","opt","fold$1","res","stype","serror","svalue","Value","SimpleResult","field$2","newKey","presence","prop","ifField","ifCustom","instantiator","baseMerge","merger","objects","ret","j","curObject","deepMerge","old","merge$1","defaultedThunk","fallbackThunk","process","defaulted$1","fallback","mergeWithThunk","baseThunk","ResultCombine","errors","partitions","results","formatObj","input","stringify","nu$a","getErrorInfo","value$2","validator","extract","custom","anyValue$1","fallbackAccess","bundle","extractField","field","av","bundleAsOption","optValue","ov","result","missingRequired","requiredAccess","optionAccess","optionDefaultedAccess","valueThunk","getDelegate","getSetKeys","filter$1","objOfOnly","fields","delegate","objOf","fieldNames","extra","unsupported","unsupportedFields","fields_1","extractFields","fieldStrings","_okey","_presence","_instantiator","arrOf","oneOf","props_1","setOf$1","keys$1","validatedKeys","validateKeys","validKeys","vk","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","postMessageable","choose$2","branches","missingKey","chosen","ch","branch","missingBranch","vp","chooseFrom","valueOf","setOf","asRaw","errs","extraction","errInfo","formatError","asRawOrDie$1","es","choose$1","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredFunction","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","Cell","initial","Adt","cases","constructors","adt","acase","count","argLength","branchKeys","reqKey","foldArgs","log","params","bothErrors","firstError","secondError","bothValues","_a$2","base","wrap$1","wrap$2","wrapAll","keyvalues","kv","wrapAll$1","ensureIsRoot","isRoot","ancestor$2","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","can","abort","run","nu$9","parts","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","tap","focus$4","postBlur","postPaste","receive","execute$5","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","dispatch","getSystem","triggerEvent","derive$2","configs","run$1","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","runOnName","get$7","set$5","content","docDom","fragment","createDocumentFragment","contentElements","getHtml","container","clone","cloneNode","isDeep","clone$1","shallow","events$i","originator","isRecursive","warn","DefaultEvents","events","unique","generate$6","prefix","time","Date","getTime","floor","random","prefix$1","idAttr$1","idAttr","writeOnly","defineProperty","writable","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","debugInfo","triggerFocus","triggerEscape","broadcast","broadcastOn","broadcastEvent","build","addToWorld","removeFromWorld","addToGui","removeFromGui","isConnected","singleton$1","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","toFunctionAnnotation","premadeTag","premade$1","comp","makeApi","apiFunction","markAsSketchApi","getApis","NoState","init","nu$8","readState","byInnerKey","indexKey","chain","nu$7","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","fuse","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","handlers","all$2","any","fuse$1","c","missingOrderError","combineGroups","byEventName","assembled","rawHandler","read$2","assemble","purpose","uncurried","partition$1","mergeValues","baseBehaviour","schema$z","toEvents","read","attr","supports","classList","add$2","clazz","add$4","add$3","remove$2","remove$4","remove$3","get$6","cleanClass","add$1","remove$1","get$5","set$4","generate$4","behaviours","behaviour","getBehaviours$2","validated","optBlobThunk","blob","config","generateFrom$1","generateFrom","getEvents","bList","bData","baseEvents","behaviourEvents","nameToHandlers","groupByEvents","combine$1","build$2","getMe","systemApi","toInfo","bBlob","getBehaviours$3","getData$2","definition","subject","innerHtml","domChildren","renderToDom","defnA","mod","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine$2","getDomDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","child","external$2","extSpec","uids","build$1","getPremade","userSpec","specEvents","buildSubcomponents","completeSpec","buildFromSpec","isSketchSpec$1","premade","ClosestOrAncestor","ancestor","EventConfiguration","ancestor$1","closest$3","closest$2","child$1","descendant","querySelector","one","closest$1","manager","ariaId","isPartOf$1","queryElem","dependent","dep","find$1","isAriaPartOf","eventConfig","monitorEvent","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","outcome","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","processEvent","menuFields","itemFields","itemSchema$3","_initSize","tieredMenuMarkers","markers$1","required","onPresenceHandler","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","restriction","adt$a","southeast","southwest","northeast","northwest","south","north","east","west","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","min","clamp$1","restrictions","dir","getRestriction","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","eastEdgeX$1","west$2","westEdgeX$1","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","apiName","bName","markAsBehaviourApi","wrapApi","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$7","create$8","modeSchema","createModes","modes","createModes$1","branchKey","Receiving","ActivePosition","posConfig","useFixed","getDocument","focus$3","hasFocus","root","activeElement","preserve$1","refocus","focused","descend","child_1","oldFocus","newFocus","NuPositionCss","toPx","applyPositionCss","toOptions","adt$9","relative","fixed","positionWithDirection","posName","decision","decisionRect","rect","decisionX","decisionY","decisionRight","decisionBottom","reposition","origin","toBox","viewport","getBounds","pos","translate$2","outerScroll","AttributeValue","relative$1","fixed$1","placementAttribute","getPlacement","adt$8","fit","nofit","attempt","bubbleOffset","adjustedBounds","applyRestriction","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","newX","newY","boundsX","boundsY","boundsRight","boundsBottom","originInBounds","sizeInBounds","visibleW","visibleH","determinePosition","fits","fittedBox","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcReposition","isPartlyVisible","_b","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","calcMaxSizes","classesOn","classesOff","layout","testY","singleton","doRevoke","clear","isSet","destroyable","destroy","unbindable","value$1","bind$2","capture","capture$1","fromRawEvent","timerAttr","applyTransitionCss","transition","lastPlacement","shouldTransition","placer","shouldApplyTransitionCss","hasAll","isTransitioning$1","intermediatePosition_1","intermediateCssOptions","intermediate","round","toFixed","newValue","hasChanges","timerId","clearTimeout","timer","transitionEnd","transitionCancel","isSourceTransition","pseudoElement","propertyName","transitionDone","transitionStarted","transitionStart_1","duration","times","delay","dur","getTransitionDuration","requestAnimationFrame","setTimeout","setupTransitionListeners","startTransitioning","setMaxHeight","absMax","setMax$1","anchored","available","expandable$1","defaultOr","options","dephault","go","anchorBox","elementBox","panelWidth","panelHeight","attemptBestFit","isVisible","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","bestNext","attempts","preference","positionCss","position$2","setPlacement$1","setPlacement","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","insetNortheast","insetNorthwest","insetNorth","insetSoutheast","insetSouthwest","insetSouth","insetEast","insetWest","nu$4","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$y","get$4","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","MakeshiftAnchor","adt$7","screen","absolute","point","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$1","getRootPoint","frame","frameOwner","compOwner","getBox","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","NodeAnchor","nodeBox","SimRange","soffset","finish","foffset","adt$6","before","after","Situ","situ","adt$5","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","range","relativeToNative","finishSitu","createRange","setStart","setStartAfter","setEndBefore","setEnd","setFinish","exactToNative","toRect","adt$4","fromRange","startOffset","endOffset","asLtrRange","ranges","getRanges","rev","doDiagnose","diagnose","FocusInsideModes","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","descendants","querySelectorAll","all$3","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","focusNode","focus_1","makeRange","same","anchorOffset","focusOffset","getFirstRect","rects","getClientRects","point$1","descendOnce","last","get$3","descendOnce$1","getAnchorSelection","getSelection","getNativeSelection","sel","getExact","modStart","modFinish","SelectionAnchor","selectionBox","optRect","getBounds$1","rawRect","targetElement","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","TransitionSchema","PositionSchema","PlacementSchema","place","anchoring","placee","lastPlace","overrideOptions","simple","positionWithin","posState","placementSpec","boxElement","boundsBox","positionWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","getRelativeOrigin","newState","doPlace","vis","PositionApis","getMode","pConfig","_pState","reset","reset$2","PositioningState","Positioning","fireDetaching","fireAttaching","attach$1","replaceChildren","newChildren","childComp","detachChildren$1","deleted","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","onOpen","close$1","onClose","isOpen$1","_sandbox","_sConfig","isOpen","cloak","_sState","sink","cssKey","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","isPartOf","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","isExtraPart","fireEventInstead","fe","schema$w","receivingChannel","doReposition","onLoad$5","repConfig","repState","onLoad","onUnload$2","onUnload","RepresentApis","setValue","ActiveRepresenting","resetOnDom","_se","memory$1","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","memory","manual","setValue$2","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","forbidden","_v","get$2","dump","augment","SketchBehaviours","_placeholder","adt$3","single","multiple","isSubstituted","substitute","compSpec","placeholders","uiType","newSpec","subPlaceholder","scan","req","childSpecs","substituted","valuesThunk","preprocessor","single$2","placeholder","adt$2","external","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine","partSpec","partValidated","defaults","generate$3","np","g","doGenerateOne","pname","generateOne$1","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","components$1","ps","ph","replacements","used","substituteAll","substitutePlaces","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","generateOne","asRawOrDie","partSchemas","partUidsSchemas","baseS","composite$1","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","rawConfig","extraApis","configFields","single$1","composite","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","find","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disabled","disable$1","enable$1","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","enable","disable","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight","isHighlighted","onHighlight","queryTarget","getFirst","_hState","itemClass","getLast","getDelta$2","selected","dest","getCandidates","HighlightApis","dehighlightAll","dehighlight","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","getByIndex","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","isControl","isNotShift","rule","classification","reportFocusShifting","prevFocus","dom$2","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$5","cyclicField","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","cycle","findCurrent","tabstop","stopIndex","useTabstopAt","isTabstop","cyclic","goFromTabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","execute","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid$1","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","flatgrid","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locateVisible","locate","findIndex","withGrid","numCols","address","newIndex","row","column","cycleHorizontal$1","oldRow","oldColumn","colsInRow","newColumn","cycleVertical$1","newRow","newCol","schema$u","focusIn$3","gridConfig","_gridState","first","doMove$2","gridState","identified","handleTab","captureTab","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","findCurrent$1","getKeyupRules$4","FlatgridType","horizontal","tryCycle","schema$t","execute$2","flowConfig","focusIn$2","_state","getInitial","moveLeft$2","moveRight$2","doMove$1","flowState","executeOnMove","doEscape","getKeyupRules$3","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$s","focusIn$1","matrixConfig","previousSelector","selectors","doMove","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","getKeydownRules$1","menuState","moveOnTab","getKeyupRules$1","MenuType","schema$q","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","execution","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","replaceState","removee","foundChild","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","ReplaceApis","append","appendee","prepend","prependee","replaceBy","replaceePred","Replacing","eventHandlers","events$d","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","blur$1","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","ariaInfo","aria","updateClass","toggleClass","toggle$2","set$1","ToggleApis","toggle","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$a","optAction","hoverEvent","focusEvent","onHover","onFocus$1","hover","focus$1","schema$p","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$o","owner$2","parts$h","schema$n","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$2","separator","parts$g","itemInfo","builder","unit","fakeFocus","markers","schema$m","grid","movementInfo","rowSelector","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","extractPreparedMenu","prep","LayeredState","expansions","menus","directory","getPreparedMenu","menuValue","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","menuItems","menuPaths","_triggerItem","generate$2","expand","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","getItemByValue","extraPath","revPath","menuIndex","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggerData","collapseItem$1","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","getItemValue","toDirectory","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","nbMenu","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","componentMap","primaryName","makeSketch","buildMenus","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","maybeActivePrimary","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","collapseItem","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip$2","global$f","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","asSpec","global$e","rtlTransform","defaultIconName","defaultIcon","getIconName","lcName","rtlName","addToEnd","ensureTrailing","lookupIcon","get$1","iconProvider","addFocusableBehaviour","svg","renderIcon$2","iconName","fallbackIcon","rtlIconClasses","needsRtlTransform","iconHtml","render$3","notificationIconMap","warning","Notification","iconNames","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","level","memButton","notificationIconSpec","closeButton","ItemResponse","rate","cancel","throttle","global$d","repeatLeft","rootNode","isBlock","getContentEditable","isBoundary","backwards","create$4","getDoc","extractContents","insertNode","normalize","last$1","setCursorLocation","getEnd","isWhitespace","chr","stripTriggerChar","triggerCh","getContext","initRange","minChars","getRoot","char","charAt","findChar","lastIndexOf","triggerChar","findStart","createRng","selectNode","global$c","toLast","isText","toLeaf","isElement$1","lookupWithContext","getDatabase","context","fetchOptions","database","startText","autocompleters","lookupByChar","autocompleter","isPreviousCharContent","isStartOfWord","lookupData","ac","fetch","maxResults","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ToolbarMode","ItemResponse$1","navClass","selectableClass","presetClasses","normal","color","tickedClass","iconClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","menuClasses","dom$1","chunk","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","inserttable","colorswatch","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","abs","ceil","SimpleBehaviours","namedEvents","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","getTooltip","ActiveTooltipping","tooltipConfig","clearTooltip","clearTimer","resetTimer","isShowing","popup","tooltipDom","tooltipComponents","setTooltip","show","TooltippingSchema","Tooltipping","global$b","global$a","getHeightSetting","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","_a$1","FocusMode","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerTarget","inline","fixedContainerSelector","fixedToolbarContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","uiMothership","setupReadonlyModeSwitch","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$9","convertText","mac","alt","ctrl","shift","access","updated","segment","renderIcon$1","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","ariaLabel","domTitle","renderItemStructure","providersBackstage","renderIcons","providerBackstage","baseDom","itemText","iconSvg","iconContent","colorClass","renderColorStructure","iconSpec","leftIcon","checkmark","checkMark","textRender","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","getSink","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","RegExp","escape","render$2","extras","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","shouldHighlight","cardText","parts$f","hexColour","shorthandRegex","longformRegex","isHexString","hex","normalizeHex","startsWith","numChars","removeFromStart","toUpperCase","toHex","fromRgba","rgbaColour","red","green","blue","round$1","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","longForm","splitForm","hexString","m","getLongForm","exec","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireResizeContent","hsvColour","fromRgb","minRGB","maxRGB","hsvToHex","anyToHex","canvas","canvasContext","clearRect","fillStyle","fillRect","getImageData","global$8","storageName","choiceItem","defaultColors","colorCache","storageString","getItem","localstorage","cache","idx","splice","unshift","pop","setItem","ColorCache","hasCustomColors$1","getColors$2","unmapped","getColorMap","colorMap","colors","mapColors","addColor","fallbackColor","getColorCols$1","defaultCols","getColorCols$2","sqrt","getAdditionalColors","hasCustom","applyColor","onChoice","colorPickerDialog","dialog","colorOpt","getColors$1","getFetch$1","setIconColor","splitButtonApi","newColor","setIconFill","registerTextColorButton","lastColor","addSplitButton","optCurrentRgb","getCurrentColor","currentRgb","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","isValid","colorpicker","_api","details","alert","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","isActive","renderChoiceItem","deriveMenuMovement","menuMarkers","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","sizeLabelId","makeCells","emptyLabelText","memLabel","selectedRow","selectedColumn","selectCells","backstage","useCustomColors","initData","allowCustomColors","colorinput","hasCustomColors","getColors","getColorItems","getColorCols","shared","providers","widgetSpec","separator$3","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","downwardsCaret","renderSubmenuCaret","nested","createToggleMenuItem","toggle$1","createSeparatorMenuItem","createFancyMenuItem","render","fancy","createAutocompleteItems","createCardMenuItem","card","createAutocompleterItem","autocomplete","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","cancelIfNecessary","hideIfNecessary","lastElement","getAutocompleters","popups","getAll","triggerChars","stringArray","datasetValues","dv","register$b","newContext","getTriggerContext","lookup$2","doLookup","lookupInfo","matchLength","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","ld","focusMode","ContentFocus","createMenuFrom","display","autocompleterUiApi","onKeypress","isMenuOpen","isProcessingAction","getView","redirectKeyToItem","stopImmediatePropagation","AutocompleterEditorEvents","closest","DelayedFunction","fun","ref","schedule","getTouch","touches","setup$d","rawSettings","stopBackspace","tapEvent","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","monitor","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive","rawTarget","adt$1","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerOnUntilStopped","Registry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","unregister","tagId","readOrTag","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","listeners","_logger","fromExternal","listener","schema$l","parts$e","excludeFactory","exclude$1","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel$2","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","schema$k","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","inputAttributes","inputStyles","inputClasses","Input","exports$1","module","exports","define","require","globalThis","EphoxContactWrapper","commonjsGlobal","promise","setTimeoutFunc","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","finale","thisArg","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","race","setImmediate","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","boltExport","HighlightOnOpen","Promise$1","nu$3","baseFn","callbacks","nCallback","isReady","LazyValue","pure","errorReporter","make$5","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","CouplingState","coupled","Coupling","partType$1","kernel","colorFn","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","highlightOnOpen","processed","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","_onOpenSync","_highlightOnOpen","togglePopup","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaOwner","sandboxClasses","sandboxBehaviours","matchWidth","useMinWidth","buttonWidth","set$6","sandboxFields","schema$j","parts$d","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","getValueFromEvent","spectrum","SliderParts","sliderChangeEvent","getEventSource","isTouchEvent$2","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange$3","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","sliderValue$2","findValueOfOffset$1","handleMovement$2","moveBy$2","findPositionOfValue$1","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","sliderVal","setToMin","setToMax","findValueOfOffset","findPositionOfValue","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$1","sliderValue$1","handleMovement$1","moveBy$1","findOffsetOfValue","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange","sliderValue","handleMovement","isVerticalMovement","moveBy","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","choose","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","changeValue","getInitialValue","onInit","resetToMin","resetToMax","fieldsUpdate","sliderUpdate","paletteUpdate","owner$1","schema$i","getPartName$1","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","getClass","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","rgbFormSketcher","setValueRgb","onInvalidInput","onValidInput","isHexInputEvent","hexField","copyRgbToHex","onValidRgb","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","makeFactory","colourPickerSketcher","updates","rgbForm","onInvalidHex","sbPalette","_translate","setColour","ctx","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_thumb","_slider","setHue","_apis","setPaletteHue","setThumb","setPaletteThumb","paletteFactory","hueDegreesToSlider","paletteRgba","paletteHue","memSlider","sliderFactory","memPalette","memRgb","updatePalette","_hex","palette","updateFields","runUpdates","hexToHsv","oldHue","newHsv","newHex","onPaletteUpdate","hueSliderToDegrees","oldRgb","oldHsv","onSliderUpdate","ComposingConfigs","english","translate$1","getEnglishText","processors","withComp","optInitialValue","getter","setter","RepresentingConfigs","mem","rawProcessors","other","rawValue","postprocess","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","targetComp","isPseudoStop","platformNeedsSandboxing","create$3","resize$3","tCanvas","get2dContext","drawImage","getWidth$1","image","naturalWidth","getHeight$1","naturalHeight","canvasToBlob","quality","HTMLCanvasElement","toBlob","uri","toDataURL","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","revokeImageUrl","URL","revokeObjectURL","create$2","getCanvas","initialType","getType","toAdjustedDataURL","canvasToDataURL","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","blobUrl","createObjectURL","Image","removeListeners","loaded","blobToImage","blobToCanvas","fromCanvas","clamp","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","applyColorFilter","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","complexAdjustableColorFilter","matrixAdjustFn","adjust","invert$1","basicColorFilter","brightness$1","contrast$1","sharpen$1","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","convoluteFilter","gamma$1","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","ceilWithPrecision","precision","mul","upper","invert","sharpen","gamma","contrast","flip","axis","applyFlip","flip$1","crop","applyCrop","crop$1","rotate","angle","rad","PI","sin","cos","newWidth","newHeight","applyRotate","rotate$1","renderIcon","iconsProvider","renderIconFromPack","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayIcon","isSeparator$1","separator$2","realItems","isMenuItemReference","unwrapReferences","itemWithValue","generateValueIfRequired","isExpandingMenuItem","submenuItems","getFromExpandingItem","getFromItem","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","schema$h","coupledPart","selfName","otherName","lock","onLockedChange","parts$c","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","renderSizeInput","converter","ratioEvent","makeIcon","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","otherFieldText","cValue","oValue","optCurrent","optOther","value1","value2","cSize","oSize","ratioSizeConversion","internal","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","cropPanelComponents","getRect","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","newCanvas","resize$2","resize$1","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","adjustR","adjustG","adjustB","adjustColors","colorize$1","colorize","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","updateWithTouchData","changedTouches","isTouchEvent$1","Delimiter","CropRect","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","deltaX","deltaY","deltaW","deltaH","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","instance","setInnerRect","repaint","updateElementRect","newRect","setRect","relativeRect","cropContainer","blocker","blockerElm","cropBlocker","handleElm","cropHandle","_c","eventOverlay","downButton","startX","startY","handleEvents","overlayEvents","sugarDoc","handleElement","getElementById","docSize","scrollWidth","scrollHeight","getDocumentSize","screenX","screenY","cursor","drag","DragHelper","handleFocus","activeHandle","moveAndBlock","SPACEBAR","toggleVisibility","elems","setClampRect","getInnerRect","setViewPortRect","helper","setButtonEnabled","enabled","renderImageTools","initialState","canUndo","canRedo","blobState","tempState","undoStack","removed","setBlobState","createState","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","updateTempState","newTempState","addTempState","applyTempState","postApply","temp","currentState","getHistoryStates","undoEnabled","redoEnabled","makeState","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","block","unblock","editPanel","applyButton","updateSrc","blobManipulate","blobToImageResult","catch","manipulate","currentUrl","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","aImg","lastViewRect","viewRect","inflate","zoomFit","currentZoom","newZoom","renderImagePanel","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","itemExecute","schema$g","parts$b","previewing","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","attemptSelectOver","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","timeout","errorThunk","timedOut","FutureResult","worker","separator$1","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","errorId","make$2","factories","bar","interpreter","renderBar","collection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","encodeAllRaw","renderCollection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel","iframe","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","renderIFrame","iframeSpec","renderDialogButton","checkbox","repBehaviour","toggleCheckboxHandler","memIcons","renderCheckbox","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","valueOpt","colorButton","_field","renderColorInput","colourPickerFactory","memPicker","picker","dropzone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","getSetting","file","filterByExtension","memInput","accept","renderDropZone","renderGrid","listbox","initialItem","listBoxWrap","sketchSpec","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","urlBackstage","updateHistory","urlEntry","addToHistory","fileType","urlInputValue","getLinkInformation","history","historyTargets","getHistory","getItems","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","table","header","renderTd","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments$2","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","ColorInputBackstage","isDraggableModal","isDraggableModal$1","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$8","doEnrich","newItems","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$8","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","hasContentEditableState","isElement","contentEditable","isContentEditableTrue","isContentEditableFalse","getElementText","isValidAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","hasTitle","LinkTargets","elms","getTargetElements","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getFilePickerCallback","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","types","getPickerTypes","getPickerSetting","entry","parts$a","partType","schema$f","itemsPart","parts$9","CustomList","_external","shell","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","schema$e","parts$8","Toolbar","toolbarBehaviours","setGroups","groups","setup$a","isDocked$2","getBehaviours$1","StaticHeader","isDocked","getBehaviours","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPos","revertToOriginal","clearInitialPos","offsetBox_1","_left","_top","_right","_bottom","getMorph","getModes","morphToOriginal","setInitialPos","storePrior","winBox","top_1","isTop","morphToFixed","morphToStatic","setDocked","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","refresh$4","lazyViewport","morph","refreshInternal","getMorphToOriginal","resetInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","visible","initialBounds","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","isDockedMode","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","headerElem","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","win$1","getStickyToolbarOffset","getDockingMode","StickyHeader","lazyHeader","isPositionedAtTop","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isTransitioning","toggleGrow","ActiveSliding","onGrown","SlidingSchema","Sliding","schema$d","getPartName","make$1","getSlotNames","onSlot","def","slot","doShowing","_key","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","bridged","createSidebar","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","fromHtml","getAttrs","focusBusyComponent","throbber","setup$7","lazyThrobber","throbberState","stealFocus","isFocusEvent","targetElm","editorManager","command","tabIndexAttr","dataTabIndexAttr","iframeElement","tabIndex","toggleEditorTabIndex","_root","_behaviours","getBusySpec$1","throbberFocus","busyComp","toggleThrobber","within","withinWidth","apportion","total","parray","toUnit","setGroups$1","storedGroups","bGroups","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","overflows","overflower","divide","tryFit","fitLast","overflow","fitAll","partition","schema$c","schema$b","parts$7","expandable","setMax","schema$a","parts$6","toggledClass","toolbarSandbox","bounder","FloatingToolbarButton","makeSandbox","getToolbar","schema$9","parts$5","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","schema$8","parts$4","onClosed","onOpened","toggleToolbar","overf","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","moreDrawerData","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","sliding","floating","toolbarFactory","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","fireSkinLoaded","_skinLoaded","fireSkinLoaded$1","initialized","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError$1","fireSkinLoadError","onSetupFormatToggle","boundCallback","binding","formatChanged","once","onSetupEvent","handleEvent","onActionToggleFormat$1","rawItem","onActionExecCommand","generateSelectItems","_editor","generateItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","getSpec$4","_format","alignment","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$3","systemFont","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","legacyFontSizes","keywordFontSizes","getSpec$2","fontSize","_loop_1","pt","factor","toPt","legacy","toLegacy","Space","findNearest","getStyles","getSpec$1","fallbackFormat","getSpec","getFormatItems","flattenedItems","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","schema$7","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$3","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","_d","renderCommonToolbarButton","specialisation","itemApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","setIconStroke","buttonComp","renderSplitButton","grouptoolbarbutton","TopToBottom","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","styleselect","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","toolbarConfig","prefixes","toolbarGroups","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","createToolbar","toolbarItem","extractFrom","lookupButton","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","fireScrollContent","elementLoad","setupEvents$1","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getWidth","baseWidth","minWidth","getTargetPosAndBounds","Inline","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","setDockingMode","verticalDir","setupMode","addClass","removeClass","InlineHeader","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","setupEvents","nodeChanged","hideContextToolbarEvent","runOnExecute","getFormApi","ContextForm","findPrimary","mementos","renderContextToggleButton","renderContextButton","asSpecs","compInSystem","isVerticalOverlap","threshold","getSelectionBounds","leaf$1","getRangeRect","scroll_1","bodyPos","getContextToolbarBounds","toolbarType","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","getHorizontalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","bubbleAlignments$1","inset","anchorOverrides","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","isEntireElementSelected","currentPosition","isReposition","preservePosition","getAnchorSpec$2","mobile","smartInsetLayout","newAnchor","getInsetLayouts","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","contextForm","registerForm","contextToolbar","registerToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","register$7","registryContextToolbars","lastTrigger","lastContextPosition","currentWidth","newContents","oldContents","forwardContents","canLaunchToolbar","isContextMenuOpen","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","getAnchorElementBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","scopes","allButtons","default","buildContextToolbarGroups","buildContextFormGroups","launchContext","launchContextToolbar","anchorLayout","getAnchorLayout","isSameLaunchElement","rootElem","startNode","isOutsideRoot","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchStartNode","ancestorElem","findPosition_1","filterByPositionForAncestorNode","matchAncestor","lookup$1","unsupportedLength","pattern","decimalDigits","dot","registerController","getMenuItems","getOptions","hash","oldApi","unbindWatcher","watcher","setCurrent","addMenuButton","onToolbarSetup","onMenuSetup","lineHeightSpec","accepted","unitRaw","check","isUnit","normalise","onSetupOutdentState","queryCommandState","onActionToggleFormat","register$2","_idx","name_1","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems$2","onSetupUndoRedoState","onSetupVisualAidState","hasVisual","setup$6","cmd","register$6","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","register$4","registerMenuItems$1","registerButtons","register$1","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","register$a","registerToolbarButton","addToggleMenuItem","registerMenuItems","registerButtons$2","register$3","settingsOpt","getContentLanguages","customCode","code","customValue","ele","lang","languageSpec","register$5","isTouchEvent","getPointAnchor","pageX","pageY","fromPageXY","containerPos","getPos","dx","dy","transpose","transposeContentAreaContainer","fromClientXY","getSelectionAnchor","getAnchorSpec$1","anchorType","getNodeAnchor","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","initAndShow","getAnchorSpec","openiOS_1","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","makeContextItem","commonMenuItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$5","setContextMenuState","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","getAnchorType","selectedElement","defaultItems","contextMenus","getContextMenu","sections","allItems","generateContextMenu","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","moveOrSnap","snapInfo","newCoord","snapsInfo","leftAttr","topAttr","getCoords","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","findMatchingSnap","snaps","sensor","inRange","coord1","coord2","withinRange","getSnapPoints","bestSnap","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","origin_1","snapPin","snapTo$1","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","zIndex","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","currentCoord","oc","location","getCurrentCoord","optSnaps","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcNewCoord","onDrag","dragBy","stopDrag","updateStartState","setStartData","MouseData","events$2","stop$1","delayDrop","dragApi","drop","forceDrop","init$2","schema$5","TouchData","getDataFrom","events$1","blockerSingleton","stopBlocking","init$1","mouse","mouseOrTouch","DraggingBranches","DragState","previous","dragEvent","nuData","calculateDelta","Dragging","dragger","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","isHidden","getP","resize","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","keyboardHandler","renderStatusbar","getTextComponents","newPathElements","divider","newPath","parent_1","isDefaultPrevented","isPropagationStopped","updatePath","_btn","newAcc","renderElementPath","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","resizeHandler","None","Vertical","getResizeType","_target","renderResizeHandler","getComponents","setup$3","isGridUiContainer","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","memAnchorBar","contextMenuState","HeaderBackstage","interpretWithoutForm","init$7","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","opacity","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","loopEditor","relatedTarget","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","onDismissPopups","setup$b","setEditorSize","parsedHeight","baseHeight","minHeight","getHeight","getHeightWithFallback","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$8","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$2","basic","parts$2","dragBlockClass","getDragBounds","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","TabButton","tabButtonBehaviours","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$1","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","barPart","tabs","viewPart","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","allTabs","tabMode","extraEvents","smartTabHeight","tabviewComp","heights","_tab","measureHeights","maxTabHeightOpt","getMaxHeight","oldHeight","naiveTabHeight","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","dialogState","validateData$1","tabSection","dialogInit","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","bodySpec","currentDialog","iframeUri","base_uri","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$2","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$1","openModalDialog","internalInitialData","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","modalAccess","outerForm","renderDialog","openInlineDialog","config$1","refreshDocking","dialogUi","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","renderInlineDialog","inlineDialogComp","isAlertOrConfirmDialog","openModalUrlDialog","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","closeCallback","hideCloseButton","notificationWrapper","notification","progressBar","contentArea","moveTo","moveRel","notificationSpec","layoutDirection_1","getLayoutDirection","nodeAnchor","nuText","getEl","notifications","getArgs","NotificationManagerImpl","typeOf$1","eq$2","eqString","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","sort$1","eqSortedArray","q","eqAny","tx","isEquatableType","isString$1","isArray$1","compose1","identity","contains$3","map$3","each$k","filter$4","findUntil$1","findIndex$2","hasOwnProperty$1","each$j","objAcc","filter$3","each$i","indexOf$1","reduce","iteratee","accumulator","unknown$2","detect$2","blank","trim$4","lTrim","rTrim","isEmpty$3","nu$2","platform$2","platform$1","browser$4","webkit","fileApi","windowsPhone","Env","ie","gecko","iOS","transparentSrc","caretAfter","documentMode","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$3","is$3","walk$3","delim","hasOwn","extend","exts","ext","sp","scn","de","cn","ns","createNS","onCreate","walk","_addCacheSuffix","fromDom$2","recurse","is$2","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","prevSibling","previousSibling","prevSiblings","nextSiblings","lastChild","childNodesCount","getStyleContainer","getHead","before$4","after$3","intoView","alignToTop","scrollIntoViewIfNeeded","isNodeType","isRestrictedNode","getPrototypeOf","isElement$5","matchNodeNames","lowercasedNames","matchStyleValues","computed","attrName","isBogus$2","isTable$3","tagName","isTextareaOrInput","isText$7","isComment","isDocument$1","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","browser$3","firstElement","nodes","hasChild","module$1","nu$1","unite","requestAnimationFramePromise","support","Expr","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","documentIsHTML","rbuggyQSA","rbuggyMatches","ancestor$3","promiseObj","wrappedSetTimeout","wrappedSetInterval","setInterval","debounce","func","Delay","requestAnimationFrameFunc","vendors","setEditorInterval","clearInterval","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","maxLoadTime","failure","urlWithSuffix","passed","failed","getOrCreateState","onload","onerror","waitForWebKitLinkLoaded","waitCallback","styleSheets","ownerNode","testCallback","now","linkElem","contentCssCors","referrerPolicy","loadF","styleContainer","loadAll","urls","futures","asyncValues","asyncValue","unloadAll","_setReferrerPolicy","WeakMap","forElement","referenceElement","rootDom","sl","DomTreeWalker","prev2","findSibling","findPreviousNode","startName","siblingName","lazyLookup","isHeading","isBlock$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","nbsp","ZWSP$1","isZwsp","trim$2","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","lastBr","brs","getElementsByTagName","isRangeInCaretContainerBlock","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","isContent$1","rootElement","hasWhitespacePreserveParent","isNamedAnchor","isBookmark","isBogus$1","isBogusAll","isEmpty$2","skipBogus","brCount","isEmptyNode","isInlineContent","isBookmarkNode$2","isSpan","trimNode","currentChildren","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","radix","entity","fromCharCode","namedEntities","encodeRaw","encodeNumeric","encodeNamed","entities","Entities","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","nativeDecode","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","createMap","defaultValue","extendWith","getTextRootBlockElements","getTextBlockElements","compileElementMap","Schema","patternElements","customElementsMap","specialElements","createLookupTable","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","caption","script","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","th","tr","tbody","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","getCustomElements","isValidChild","attrPatterns","Styles","_this","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","allow_svg_data_urls","lastIndex","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","Event","initEvent","normalize$3","originalEvent","fallbackTarget","clone$2","srcElement","needsNormalizing","defaultPrevented","cancelBubble","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","attachEvent","removeEvent","detachEvent","fix","isMouseEvent","eventDoc","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","ci","eventMap","parentWindow","clean","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","push_native","push$1","slice$1","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","seed","nid","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","checkNonElements","doneName","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","attrId","tmp","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","excess","unquoted","nodeNameSelector","operator","what","forward","ofType","nodeIndex","useCache","pseudo","matched","elemLang","selectedIndex","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","matcherFromGroupMatchers","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","createFragment$1","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","whiteSpaceRegExp","each$g","grep$2","hook","removeAttr","camel","dashed","currentStyle","appendTo","prependTo","replaceWith","wrapInner","classState","existingClassName","trigger","docElm","object","sibling$1","firstSibling","contentDocument","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$f","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","counter","boundEvents","ownEvents","$$","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","attrValue","root_element","getPos$1","castOffsetParent","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getSize","collect","selectorVal","_findSib","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","oldElm","replaceChild","isNonEmptyElement","rv","stdMode","boxModel","deep","clone_1","getViewPort","argWin","getPrev","outHtml","createFragment","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","cssText","serializeStyle","addStyle","styleElm","styleSheet","loadCSS","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","rgbVal","isEmpty","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","getContentEditableParent","isChildOf","dumpRng","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOM$a","each$e","ScriptLoader","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","currentCode","getLanguageData","I18n","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","dependencies","createUrl","baseUrl","resource","addOnUrl","urlString","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","read$4","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","an","newStart","getAttr","findMarkers","deep$1","TextWalker","TextSeeker","isBlockBoundary","newOffset","forwards","round$2","toStart","isValidOverflow","overflowY","rect1","rect2","isAbove$1","halfHeight","isBelow$1","containsXY","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","getCaretPositionClientRects","toRange","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","trimEmptyTextNode$1","rangeInsertNode","insertFragment","isText$3","isBogus","normalizedParent","getChildNodes","equal","createPathItem","numTextFragments","normalizedNodeIndex","create$6","outputOffset","normalizedTextOffset","parentsUntil$1","resolve$2","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$9","getPoint","trimmedOffset","getNormalizedTextOffset","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","getUndoBookmark","DOM$9","getBodySetting","bodyObj","getContentSecurityPolicy","getForcedRootBlock","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getFontCss","fontCss","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","indexOf$2","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","getAbsoluteClientRect","scrollX","scrollY","rootRect","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","blockName","br","blockNode","insertBlock$1","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","isContentEditableFalse$6","isBr$1","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isPathBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","getBookmark$2","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","resolveIndex","isRangeBookmark","resolve$1","isBookmarkNode$1","isNbsp","actual","isWhiteSpace","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","allowSpaces","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","isInlineFormat","shouldExpandToSelector","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","siblings_1","startPoint","endPoint","getCellsFromElementOrRanges","selectedCells","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getClosestTable","getFirstChildren","getLastChildren$1","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint","hasAnyRanges","runOnRanges","fakeSelectionNodes","fakeNodeRng","fillBookmark","api$1","makeAnnotation","eDoc","decorate","master","annotate","newWrappers","finishWrapper","processElements","processElement","wrapName","isZeroWidth","isAnnotation","wrap$3","processNodes","Annotator","annotations","serializer","addNodeFilter","spans","identifyParserNode","persistent","setup$m","_registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","onNodeChange","fireNoAnnotation","fireCallbacks","addListener","setup$n","initialRng","hasFakeSelection","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","nodesAlready","findAll","BookmarkManager","getContentEditableRoot$1","isXYWithinRange","fireError","errorType","fireFormatApply","fireFormatRemove","VK","DELETE","ESC","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","isContentEditableFalse$5","ControlSelection","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","elementSelectionAttr","editableDoc","rootDocument","resizeHandles","nw","ne","sw","isImage","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTargets","firstElementChild","isResizable","setSizeProp","setGhostElmSize","ghostElm","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","getResizeImgProportional","selectedElmX","selectedElmY","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","startDrag","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","elementFromPoint","moveToElementText","findClosestIeRange","parentElement","findParent$1","moveOutOfContentEditableFalse","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","RangeUtils","normalizedRng","compareRanges","getCaretRangeFromPoint","documentFocusInHandler","excludeFromDescend","markerInfo","cleanupFun","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","withElement","elementMarker","startElement","endElement","scrollToMarker","intoWindowIfNeeded","viewportBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","browser$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","bookmarkToNativeRng","newBookmark","FocusManager","isEditorUIElement","throttledStore","mouseUpPage","registerPageMouseUp","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","DOM$8","isUIElement","customSelector","getCustomUiSelector","registerEvents$1","focusedEditor","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","normalizeSelection$1","getCollapsedNode","getFocusInElement","caretPos","focusBody","rawBody","hasInlineFocus","hasIframeFocus","activateEditor","getEndpointElement","real","skipEmptyTextNodes","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","restoreDataUris","re","imageId","uris","each$d","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","URI","baseUri","isProtocolRelative","toAbsPath","urlMatch","userInfo","parseDataUri","uriComponents","decodeURIComponent","decodedUri","unescape","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","isInvalidUri","getDocumentBaseUrl","pathname","setPath","pathMatch","getURI","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","filteredClobberElements","lazyTempDocument$1","implementation","createHTMLDocument","findMatchingEndTagIndex","startIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","lcHtml","isConditionalComment","endIfIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","comment","cdata","pi","doctype","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","elementRule","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","filteredUrlAttrs","parsingMode","processEndTag","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","parseAttribute","val2","val3","processAttr","fillAttrsMap","isValidPrefixAttrName","attrRule","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","bogusValue","preserve_cdata","parseInternal","dataImageUri","extractBase64DataUris","findEndTag","trimInternal","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","endTagIndex","trimExternal","each$c","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","HtmlSerializer","writer","sortedAttrs","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll$1","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbsps","newText","firstPos","normalizeNbspAtStart","chars","normalizeNbspMiddle","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition","setSelection$1","paddEmptyBlock","deleteElement$2","moveCaret","rawNode","afterDeletePos","parentBlock","normalizedAfterDeletePos","afterDeletePosOpt","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","paddPos","getTableCells","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","getSelectedCells","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","optCellRng","getCellRng","getTable","isStartInTable","isEndInTable","isMultiTable","getTableDetailsFromRange","isSingleCellTable","isSingleCellTableContentSelected","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","freefallRtl","cleanCells","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","getOutsideBlock","deleteContents","startInTable","emptyBlock","handleEmptyBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","moveSelection","lastBlock","additionalCleanupNodes","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret$3","startElm","fromCell","deleteBetweenCells","deleteCaretCells","fromPos","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete$9","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange$2","commonAncestorContainer","newEndPos","normalizeBlockSelectionRange","isListFragment","nonEmptyElements","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","findFirstIn","insertBefore$1","insertAfter$1","beforeRng","afterRng","getSplit","insertMiddle","isTableCell$1","insertHtmlAtCaret","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","validInsertion","textInlineElements","root_1","elementUtils_1","isNonInheritableStyle","hasInheritableStyles","reduceInlineTextElements","nextRng","parentEditableElm","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","isTreeNode","setEditorHtml","noSelection","setContentInternal","defaultedArgs","setupArgs$2","updatedArgs","no_events","nodeFilters","attributeFilters","getNodeFilters","getAttributeFilters","attrMatches","name_2","findMatchingNodes","no_selection","setContentTree","padd","forcedRootBlockName","isRootContent","setContentString","sibling$2","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchNode","matchName$1","matchItems","onmatch","expectedValue","isEmptyValue","match$2","matchAllOnNode","formatNames","matchSimilar","isVariableValue","fieldValues","isVariableFormatName","ZWSP","CARET_ID","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","allBrs","getLastChildren","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","otherFormatName","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","isFormatElement","inlineElements","postProcessHooks","each$b","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","each$a","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$9","isEq$2","isChildOfInlineParent","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","isMixedFormat","removeFormat$1","newName","removeFormatFromClone","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeNodeFormat","lastContentEditable","currentNodeMatches","textDecoration","isRemoveBookmarkNode","removeRngStyle","ceFalseOverride","each$8","each$7","isElementNode","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","importNode","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess$1","formatItem","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","node_1","withSimilar","withoutSimilar","withVars","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","emptyFragment","getFragmentFromRange","innerElm","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","getWrapElements","getTableFragment","selectedTableCells","tableElm","firstCell","lastCell","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","subTable","sectionedTableModel","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","setupArgs$1","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","getInner","tmpElm","getSelectionFragment","read$3","getSerializedContent","getOuterHtml","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","insertAt","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","lazyTempDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","beforeChange","beforeChange$1","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","addUndoLevel$1","undo$1","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","transact$1","ignore$1","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","rawElm","registeredFormatListeners","nodeOrRange","setup$j","formatChangeItems","toAppendTo","addListeners","formatChangedInternal","setupArgs$3","emptyRegExp","trimEmptyContents","getContentFromBody","getContentInternal","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","SelectorChanged","setupArgs","eventArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","isForward","anchorRange","focusRange","bookmarkManager","controlSelection","getSelectedContent","getContent$1","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFilters","domParser","convert_fonts_to_spans","fontSizes","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","addStrikeToSpanFilter","uriParts","buildBlob","uriToBlob","rejectWithError","xhr_1","XMLHttpRequest","responseType","blobUriToBlob","count$1","ImageScanner","uploadStatus","blobCache","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","blobInfo","newPromise","getByData","getByUri","dataUri","imageToBlobInfo","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","whitespaceElements","isPadded","each$6","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","addAttributeFilter","fi","fl","invalidChildren","textRootBlockElements","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","createNode","removeWhitespaceBefore","textVal","textNodeNext","cloneAndExcludeBlocks","isLineBreakNode","parent_2","attrFiltersLen","isNodeEmpty","tempNode","isTextRootBlockEmpty","isPaddedWithNbsp","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","currentNode","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","images_dataimg_filter","imgElem_1","isValidDataImg","blobUri","registerBase64ImageFilter","inline_styles","addTempAttr","htmlParser","DomSerializerImpl","internalName","hasChildren","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","doc_1","firePreProcess","preProcess","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","serializeNode","outArgs","firePostProcess","postProcess","toHtml","addRules","setRules","DomSerializer","domSerializer","setContent$2","DOM$7","safeDestroy","deprecatedSettings","deprecatedPlugins","movedToPremiumPlugins","getDeprecatedSettings","settingNames","setting","getDeprecatedPlugins","plugin","pluginNames","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","normalizePlugins","trimmedPlugins","hasSection","sectionResult","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","mobilePlugins","theme","isSectionTheme","getPlatformPlugins","combineSettings","defaultSettings","defaultDeviceSettings","extractSections","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","iconPack","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","isInsideElementContentArea","NotificationManager","getImplementation","unimplemented","getTopNotification","closeNotification","otherNotification","fireEvent","isEditorAttachedToDom","addNotification","getNotifications","serviceMessage","getServiceMessage","registerEvents","WindowManager","dialogs","getParams","setParams","funcBind","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","fireOpenEvent","addDialog","windowManagerImpl","displayNotification","notificationManager","displayError","logError","createLoadError","pluginLoadError","initError","transformToUrls","cssLinks","contentCssFile","isContentCssSkinName","appendContentCssFromSettings","contentCss","getContentCss","getContentCssUrls","getFontCssUrls","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","uuid","rnd","Uploader","pendingPromises","defaultHandler","xhr","withCredentials","credentials","upload","onprogress","path1","path2","json","responseText","basePath","FormData","filename","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","pendingUploadBlobInfo","closeNotification_1","failureOptions","uploadBlobInfo","uploadBlobs","createUploader","each$5","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontsize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","removeformat","getFormats","FormatRegistry","formatChangeState","setup$h","disableCaretContainer","setup$k","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","isTextBlockOrListItem","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","blockPosition","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$8","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable$1","readFromRange","isRawNodeInTable","deleteRange$1","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$6","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$5","backspaceDeleteRange","backspaceDelete$4","deleteCaret$2","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation$1","findLocationTraverse","BreakType","modify","VDirection","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil$1","isAboveFn","isBeflowFn","targetClientRect","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","allowInside","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","move$2","isInlineTarget$1","findLocation","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$3","rescope","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","hasOnlyOneChild","deleteCaret$1","parentInlines","getParentInlines","normalizedFromPos","willDeleteLastPositionInElement","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteLastPosition","backspaceDelete$2","deleteElement","backspaceDelete$1","isNearMedia","deleteCaret","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","styleValue","indentElement","backspaceDelete","nativeCommand","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$2","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","moveH$2","moveToCeFalseHorizontally","getHorizontalRange","newRange","moveV$3","down","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","isAtLastLine","isAtFirstLine","isAtFirstOrLastLine","insertBr","insertBlock","insertEmptyLine","moveV$2","defaultPatterns","matchesEvent","match$1","moveH$1","moveV$1","moveToLineEndPoint","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","mover","moveH","moveV","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock","hasParent","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","insert$2","tmpRng","parentBlockName","newBlockName","isAfterLastNodeInContainer","createNewBlock","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell","wrapSelfAndSiblingsInDefaultBlock","isFirstChild","hasFirstChild","insert$3","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","moveSelectionToBr","brElm","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$1","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","newLineAction","shouldBlockNewLine","_shiftKey","getNoNewLineSelector","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre","shouldPutBrInPre$1","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","canInsertIntoEditableRoot","rootEditable","getEditableRoot$1","predicates","isPageUpDown","setNodeChangeBlocker","blocked","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection","registerKeyboardOverrides","setup$c","executeKeydownOverride$3","executeKeydownOverride$2","executeKeyupOverride","handleEnterKeyEvent","setup$9","executeKeydownOverride","keypressThrotter","setupIeInput","isComposing","executeKeydownOverride$1","executeKeyupAction","NodeChange","lastPath","nativeRng","fakeRng","isSameElementPath","currentPath","isTextBlockNode","getAbsolutePosition","isContentEditableFalse$1","isContentEditableTrue$1","createGhost","clonedElm","boxSizing","removeElement","removeDragState","ghost","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","elmPos","dragging","relX","relY","dragHandler","throttledPlaceCaretAt","targetPos","applyRelPos","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","overflowX","moveGhost","dropHandler","dragElement","isValidDropTarget","targetClone_1","cloneElm","dragEndHandler","getContentEditableRoot","SelectionOverrides","fakeCaret","realSelectionId","isFakeSelectionTargetElement","isNearFakeSelectionElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setElementSelection","afterNode","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","targetBlock","fakeCaretInfo","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","checkInside","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","closestFakeCaret","hasNormalCaretPosition","normalizeShortEndedElementSelection","clipboardData","realSelectionElement","clearData","outerText","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","renderFocusCaret","DOM$6","getRootName","removeUndefined","mkSchemaSettings","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","format_empty_lines","mkParserSettings","editorUpload","initEditor","bindPendingEventDelegates","fireInit","storeNative","moveSelectionToFirstCaretPosition","execCallback","auto_focus","focusEditor","destroyed","autoFocus","getStyleSheetLoader$1","loadContentCss","removeCss","contentStyles","contentCssText_1","allStylesheets","framedFonts","makeStylesheetLoadingPromises","content_style","appendStyle","preInit","firePreInit","browser_spellcheck","gecko_spellcheck","spellcheck","quirks","getAttributeApplyFunction","isSelectionAcrossElements","serializeRng","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","documentElementEditingFocus","Range","body_1","selectControlElements","disableBackspaceIntoATable","setGeckoEditingOptions","isReadOnly$1","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","refreshContentEditable","allRng","allContentsSelected","selectionHtml","internalContent","setMceInternalContent","getMceInternalContent","queryCommandSupported","template","setAttributeNode","Quirks","firePostRender","directionality","getDirectionality","protect","initEditorWithInitialContent","startContent","loadInitialContent","initContentBody","skipWrite","orgVisibility","iframeHTML","contentAreaContainer","uploader","imageScanner","toBlobInfo","findFirst","mime","cachedBlobInfo","removeByUri","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","getImagesDataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","EditorUpload","hex_colors","force_hex_style_colors","createParser","mkSerializerSettings","annotator","_nodeChangeDispatcher","debounceLongpress","isEqualNode","setup$e","preventSummaryToggle","filterDetails","normalizeSelection","deleteCommand","forwardDeleteCommand","setup$f","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","isVisuallyEmpty","firePlaceholderToggle","setup$g","setupRtcThunk","editorCast","rtcPlugin","getRtcSetup","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_node","_similar","_rfl","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","setup$i","setupRtc","setProgressState","_rtcMode","DOM$5","createIframe","customAttrs","iframeTitle","ifr","getIframeAttrs","frameBorder","allowTransparency","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","getDocType","documentBaseUrl","bodyId","getBodyId","bodyClass","getBodyClass","translatedAriaText","getIframeAriaText","getIframeHtml","DOM$4","initPlugin","initializedPlugins","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeUi","orgDisplay","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeFalseIframe","renderThemeFalse","iconPackName","currentIcons","loadIcons","svgData","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","augmentEditorUiApi","boxInfo","hidden","DOM$3","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","themeUrl","getThemeUrl","loadTheme","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","urlMeta","iconsLoadError","getExternalPlugins$1","depPlugin","url_2","loadPlugins","legacyPropNames","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","getCaretElement","bindRange","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","each$4","EditorCommands","setupCommands","skip_focus","customCommand","addCommands","commandList","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","skipFocus","bookmarkRng","contentEditableHost","getContentEditableHost","queryCommandEnabled","listParent","fontNameAction","fontSizeAction","lineHeightAction","processValue","insertAtCaret","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","internalContentEditableAttr","setContentEditable","toggleReadOnly","removeFakeSelection","hasUiFocus","hasEditorOrUiFocus","restoreFakeSelection","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","beforeFire","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","dispatcherArgs","DOM$2","getEventTarget","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","processReadonlyEvents","bindEventDelegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","activate","deactivate","editorReadOnly","fireSwitchMode","each$3","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","charCode","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","normalizeCommandFunc","createShortcut","DOM$1","extend$3","each$2","Editor","bridge","loadedCSS","isNotDirty","documentBaseURL","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","finalSettings","deprecation_warnings","hasDeprecatedPlugins","hasDeprecatedSettings","isLegacyMobileTheme","themesMessage","pluginsMessage","settingsMessage","logDeprecationsWarning","getEditorSettings","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","addAutocompleter","addContextToolbar","addSidebar","modeInstance","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","registerMode","clone$3","getStyleSheetLoader","formElement","hasHiddenInput","formEventDelegate","resetContent","shouldPatchSubmit","_mceOldSubmit","triggerSave","isEncodingXml","save","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","_beforeUnload","set_dirty","callbackLookup","getParamObject","is_removing","getContent$2","initialContent","oldState","urlconverter_callback","addVisual$1","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","extend$2","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","min$1","max$1","relativePosition","targetW","targetH","relChars","Rect","findBestRelativePosition","constrainRect","intersect","x1","y1","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","awaiter","extend$1","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","Statics","Defaults","member","createMethod","localStorage","JSONUtils","hexCode","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","removeItem","configurable","enumerable","publicApi","geom","LocalStorage","Color","hsvToRgb","toRgb","toHsv","rgb2hsv","ImageUploader","showNotification","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders"],"sourceRoot":""}