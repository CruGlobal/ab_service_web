{"version":3,"file":"226.4ad9c4fb635cee5c3145.js","mappings":"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zD,GAAiB,CACtB,IAAIG,EAAOlC,GAAyB+B,EAAQlzD,GAC5C,GAAIqzD,EAAM,CACR,GAAIA,EAAKj8D,IACP,OAAOy6D,GAAQwB,EAAKj8D,KAEtB,GAA0B,mBAAfi8D,EAAKhoF,MACd,OAAOwmF,GAAQwB,EAAKhoF,MAExB,CACA6nF,EAAShC,GAAegC,EAC1B,CAKA,OAJA,SAAuBlvE,GAErB,OADA+H,QAAQglB,KAAK,qBAAsB/sB,GAC5B,IACT,CAEF,CACA,IAAIsvE,GAAS91D,GAAO,CAClB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,QAEE+1D,GAAQ/1D,GAAO,CACjB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,UAEEg2D,GAAah2D,GAAO,CACtB,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,iBAEEi2D,GAAgBj2D,GAAO,CACzB,UACA,gBACA,SACA,UACA,eACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,QAEEk2D,GAAWl2D,GAAO,CACpB,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,eAEEm2D,GAAmBn2D,GAAO,CAC5B,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,SAEEtsB,GAAOssB,GAAO,CAAC,UACf/R,GAAO+R,GAAO,CAChB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,QACA,SAEEo2D,GAAMp2D,GAAO,CACf,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,eAEEq2D,GAASr2D,GAAO,CAClB,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,UAEEs2D,GAAMt2D,GAAO,CACf,aACA,SACA,cACA,YACA,gBA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","sources":["webpack://ab_platform_web/./node_modules/tinymce/icons/default/icons.js","webpack://ab_platform_web/./node_modules/tinymce/icons/default/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/plugin.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/index.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/theme.js","webpack://ab_platform_web/./node_modules/tinymce/tinymce.js"],"sourcesContent":["tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-style': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"6\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"3\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"6.8\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"10.6\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"14.4\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"18.2\" y=\"16\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"13\" y=\"11\" rx=\"1\"/></g></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"5\" x=\"3\" y=\"5\" rx=\"1\"/><rect width=\"18\" height=\"3.5\" x=\"3\" y=\"11.5\" rx=\"1\"/><rect width=\"18\" height=\"2\" x=\"3\" y=\"17\" rx=\"1\"/></g></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'cell-background-color': '<svg width=\"24\" height=\"24\"><path d=\"M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z\"/></svg>',\n    'cell-border-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z\" opacity=\".2\"/><path fill-rule=\"nonzero\" d=\"M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z\"/><path d=\"M13 11l-2 2H5v-2h6V6h2z\"/><path fill-rule=\"nonzero\" d=\"M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z\"/></g></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z\"/><path d=\"M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'language': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-caption': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"12\" height=\"2\" x=\"3\" y=\"4\" rx=\"1\"/><path d=\"M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></g></svg>',\n    'table-cell-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z\"/><path fill-rule=\"nonzero\" d=\"M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z\" opacity=\".2\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/><path fill-rule=\"nonzero\" d=\"M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z\" opacity=\".2\"/></g></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-numbering-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z\"/></svg>',\n    'table-row-numbering': '<svg width=\"24\" height=\"24\"><path d=\"M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'vertical-align': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><path d=\"M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z\"/></g></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.9 (2023-11-15)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$4(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$5.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$5.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$5.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      var attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var sanitizeData = function (editor, data) {\n      var href = data.href;\n      return __assign(__assign({}, data), { href: global$3.isDomSafe(href, 'a', editor.settings) ? href : '' });\n    };\n    var link = function (editor, attachState, data) {\n      var sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$2.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$1.resolve(data);\n      }, function (transform) {\n        return new global$1(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$1(function (callback) {\n        if (isString(linkList)) {\n          global.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = is(initialTarget, '_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !is(info.anchor[key], value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open$1(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$6.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return noop;\n      };\n      var getLinkText = function (value) {\n        var anchor = getAnchorElement(editor);\n        var onlyText = isOnlyTextSelected(editor);\n        if (!anchor && onlyText) {\n          var text = getAnchorText(editor.selection, anchor);\n          return Optional.some(text.length > 0 ? text : value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var value = formApi.getValue();\n              var text = getLinkText(value);\n              var attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text: text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.none(),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global$7.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.9 (2023-11-15)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant$1 = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity$1 = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant$1(false);\n    var always = constant$1(true);\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity$1;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant$1(null),\n        getOrUndefined: constant$1(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant$1('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant$1(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$2 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk$1 = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map$2 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition$3 = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$5 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex$1 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$3 = function (xs, f) {\n      return flatten(map$2(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$2(a1, function (x) {\n        return !contains$2(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure$2 = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$f = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$f(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$f(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$4 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity$1);\n    };\n    var get$e = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var equals = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var addToEnd = function (str, suffix) {\n      return str + suffix;\n    };\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var ensureTrailing = function (str, suffix) {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$1 = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml$2 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var name$2 = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement$2 = isType(ELEMENT);\n    var isText$1 = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$3 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    var detect$4 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    var unknown$3 = function () {\n      return nu$d(0, 0);\n    };\n    var nu$d = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$d,\n      detect: detect$4,\n      unknown: unknown$3\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$3 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$5(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$3(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$3(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$2 = function () {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$c = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chrome: constant$1(chrome),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$1 = function () {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$b = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      osx: constant$1(osx),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    var detect$2 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$1 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$3 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$1().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var owner$4 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner$4(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map$2(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$2 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$2(element, 0);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant$1(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$2(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$1(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$8 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$d = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$d(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$7 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$c = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$7(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$c(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$c(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$3 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$b = function (element) {\n      return api$3.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$3.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api$3.max(element, value, inclusions);\n      set$7(element, 'max-height', absMax + 'px');\n    };\n\n    var r$1 = function (left, top) {\n      var translate = function (x, y) {\n        return r$1(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r$1;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute$3 = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport$1 = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$6 = function (element, h) {\n      return api$2.set(element, h);\n    };\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$2.max(element, value, inclusions);\n      set$7(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var before$2 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$2 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$2(v, element);\n        });\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n    var prepend$1 = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$2 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$2(parent, index).fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$2(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$2(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$1(children(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$5(wrapper);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$8 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$8(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant$1([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$3 = function (element) {\n      return owner$4(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), function (frames) {\n        var offset = viewport$1(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box$1 = function (element) {\n      var xy = absolute$3(element);\n      var w = getOuter$1(element);\n      var h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    var absolute$2 = function (element) {\n      var position = find$2(element);\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds$3(window);\n    };\n\n    var value$3 = function (o) {\n      var or = function (_opt) {\n        return value$3(o);\n      };\n      var orThunk = function (_f) {\n        return value$3(o);\n      };\n      var map = function (f) {\n        return value$3(f(o));\n      };\n      var mapError = function (_f) {\n        return value$3(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant$1(o),\n        getOrThunk: constant$1(o),\n        getOrDie: constant$1(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error$1 = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity$1;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error$1(message);\n      };\n      var mapError = function (f) {\n        return error$1(f(message));\n      };\n      var bind = function (_f) {\n        return error$1(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity$1,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error$1(err);\n      }, value$3);\n    };\n    var Result = {\n      value: value$3,\n      error: error$1,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold$1 = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each$1(results, function (obj) {\n        fold$1(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult$1 = function (res) {\n      return fold$1(res, Result.error, Result.value);\n    };\n    var fromResult$1 = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map,\n      mapError: mapError,\n      fold: fold$1\n    };\n\n    var field$2 = function (key, newKey, presence, prop) {\n      return {\n        tag: 'field',\n        key: key,\n        newKey: newKey,\n        presence: presence,\n        prop: prop\n      };\n    };\n    var customField$1 = function (newKey, instantiator) {\n      return {\n        tag: 'custom',\n        newKey: newKey,\n        instantiator: instantiator\n      };\n    };\n    var fold = function (value, ifField, ifCustom) {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge$1 = baseMerge(shallow$1);\n\n    var required$2 = function () {\n      return {\n        tag: 'required',\n        process: {}\n      };\n    };\n    var defaultedThunk = function (fallbackThunk) {\n      return {\n        tag: 'defaultedThunk',\n        process: fallbackThunk\n      };\n    };\n    var defaulted$1 = function (fallback) {\n      return defaultedThunk(constant$1(fallback));\n    };\n    var asOption = function () {\n      return {\n        tag: 'option',\n        process: {}\n      };\n    };\n    var mergeWithThunk = function (baseThunk) {\n      return {\n        tag: 'mergeWithThunk',\n        process: baseThunk\n      };\n    };\n    var mergeWith = function (base) {\n      return mergeWithThunk(constant$1(base));\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu$a = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingRequired = function (path, key, obj) {\n      return nu$a(path, function () {\n        return 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu$a(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu$a(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu$a(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu$a(path, constant$1(err));\n    };\n\n    var value$2 = function (validator) {\n      var extract = function (path, val) {\n        return SimpleResult.bindError(validator(val), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = constant$1('val');\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue$1 = value$2(SimpleResult.svalue);\n\n    var requiredAccess = function (path, obj, key, bundle) {\n      return get$e(obj, key).fold(function () {\n        return missingRequired(path, key, obj);\n      }, bundle);\n    };\n    var fallbackAccess = function (obj, key, fallback, bundle) {\n      var v = get$e(obj, key).getOrThunk(function () {\n        return fallback(obj);\n      });\n      return bundle(v);\n    };\n    var optionAccess = function (obj, key, bundle) {\n      return bundle(get$e(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback, bundle) {\n      var opt = get$e(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return bundle(opt);\n    };\n    var extractField = function (field, path, obj, key, prop) {\n      var bundle = function (av) {\n        return prop.extract(path.concat([key]), av);\n      };\n      var bundleAsOption = function (optValue) {\n        return optValue.fold(function () {\n          return SimpleResult.svalue(Optional.none());\n        }, function (ov) {\n          var result = prop.extract(path.concat([key]), ov);\n          return SimpleResult.map(result, Optional.some);\n        });\n      };\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), function (v) {\n            var result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    var extractFields = function (path, obj, fields) {\n      var success = {};\n      var errors = [];\n      for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n        var field = fields_1[_i];\n        fold(field, function (key, newKey, presence, prop) {\n          var result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, function (err) {\n            errors.push.apply(errors, err);\n          }, function (res) {\n            success[newKey] = res;\n          });\n        }, function (newKey, instantiator) {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, val) {\n        return getDelegate().extract(path, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, isNonNullable));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, value) {\n        return fold(value, function (key) {\n          var _a;\n          return deepMerge(acc, (_a = {}, _a[key] = true, _a));\n        }, constant$1(acc));\n      }, {});\n      var extract = function (path, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter$2(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (values) {\n      var extract = function (path, o) {\n        return extractFields(path, o, values);\n      };\n      var toString = function () {\n        var fieldStrings = map$2(values, function (value) {\n          return fold(value, function (key, _okey, _presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (newKey, _instantiator) {\n            return 'state(' + newKey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, array) {\n        var results = map$2(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map$2(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf$1 = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$2(validator)).extract(path, keys);\n      };\n      var extract = function (path, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map$2(validKeys, function (vk) {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (_desc, processor) {\n      var getP = cached(processor);\n      var extract = function (path, val) {\n        return getP().extract(path, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOfObj = compose(arrOf, objOf);\n\n    var anyValue = constant$1(anyValue$1);\n    var typedValue = function (validator, expectedType) {\n      return value$2(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$2(function (a) {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    var chooseFrom = function (path, input, branches, ch) {\n      var fields = get$e(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), input);\n      });\n    };\n    var choose$2 = function (key, branches) {\n      var extract = function (path, input) {\n        var choice = get$e(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var arrOfVal = function () {\n      return arrOf(anyValue$1);\n    };\n    var valueOf = function (validator) {\n      return value$2(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf = function (validator, prop) {\n      return setOf$1(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extractValue = function (label, prop, obj) {\n      var res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extractValue(label, prop, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity$1);\n    };\n    var asRawOrDie$1 = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var choose$1 = function (key, branches) {\n      return choose$2(key, map$1(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n\n    var field$1 = field$2;\n    var customField = customField$1;\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains$2(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var required$1 = function (key) {\n      return field$1(key, key, required$2(), anyValue());\n    };\n    var requiredOf = function (key, schema) {\n      return field$1(key, key, required$2(), schema);\n    };\n    var requiredNumber = function (key) {\n      return requiredOf(key, number);\n    };\n    var requiredString = function (key) {\n      return requiredOf(key, string);\n    };\n    var requiredStringEnum = function (key, values) {\n      return field$1(key, key, required$2(), validateEnum(values));\n    };\n    var requiredBoolean = function (key) {\n      return requiredOf(key, boolean);\n    };\n    var requiredFunction = function (key) {\n      return requiredOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field$1(key, key, asOption(), value$2(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var requiredObjOf = function (key, objSchema) {\n      return field$1(key, key, required$2(), objOf(objSchema));\n    };\n    var requiredArrayOfObj = function (key, objFields) {\n      return field$1(key, key, required$2(), arrOfObj(objFields));\n    };\n    var requiredArrayOf = function (key, schema) {\n      return field$1(key, key, required$2(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field$1(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field$1(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted = function (key, fallback) {\n      return field$1(key, key, defaulted$1(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field$1(key, key, defaulted$1(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var generate$7 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$1(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each$1(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      var r = {};\n      each(obj, function (v, k) {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap$2 = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll$1 = function (keyvalues) {\n      var r = {};\n      each$1(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude = function (obj, fields) {\n      return exclude$1(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap$2(key, value);\n    };\n    var wrapAll = function (keyvalues) {\n      return wrapAll$1(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$4 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element, simulatedEvent.event.target);\n    };\n\n    var defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    var nu$9 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return __assign(__assign({}, defaultEventHandler), parts);\n    };\n    var all$2 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read$2 = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse$1 = function (handlers) {\n      var can = all$2(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each$1(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can: can,\n        abort: abort,\n        run: run\n      };\n    };\n\n    var constant = constant$1;\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitioncancel = constant('transitioncancel');\n    var transitionend = constant('transitionend');\n    var transitionstart = constant('transitionstart');\n    var selectstart = constant('selectstart');\n\n    var prefixName = function (name) {\n      return constant$1('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus$4 = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute$5 = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight$1 = prefixName('highlight');\n    var dehighlight$1 = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute$5());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive$2 = function (configs) {\n      return wrapAll(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run$1 = function (name, handler) {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run$1(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$9({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run$1(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run$1(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).getOrThunk(function () {\n          var closest = closest$4(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute$1 = runOnName(execute$5());\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$5 = function (element, content) {\n      var owner = owner$4(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$7(container);\n    };\n\n    var clone$2 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$2(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element) && !eq(originator, target);\n    };\n    var events$i = derive$2([can(focus$4(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    var unique = 0;\n    var generate$6 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix$1 = constant$1('alloy-id-');\n    var idAttr$1 = constant$1('data-alloy-id');\n\n    var prefix = prefix$1();\n    var idAttr = idAttr$1();\n    var write = function (label, elem) {\n      var id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement$2(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    var generate$5 = function (prefix) {\n      return generate$6(prefix);\n    };\n\n    var make$8 = identity$1;\n\n    var NoContextApi = function (getComp) {\n      var getMessage = function (event) {\n        return 'The component must be in a context to execute: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      };\n      var fail = function (event) {\n        return function () {\n          throw new Error(getMessage(event));\n        };\n      };\n      var warn = function (event) {\n        return function () {\n          console.warn(getMessage(event));\n        };\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    var singleton$1 = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map$2(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$6('alloy-premade');\n    var premade$1 = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$e(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArray([\n          component.getApis(),\n          component\n        ], rest, false));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$8({ readState: constant$1('No State required') });\n      }\n    };\n    var nu$8 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom$1 = function (spec, all) {\n      var schema = map$2(all, function (a) {\n        return optionObjOf(a.name(), [\n          required$1('config'),\n          defaulted('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity$1);\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return constant$1(output);\n        })\n      };\n    };\n    var getBehaviours$3 = function (bData) {\n      return bData.list;\n    };\n    var getData$2 = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each(data, function (detail, key) {\n        each(detail, function (value, indexKey) {\n          var chain = get$e(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$7 = function (s) {\n      return {\n        classes: isUndefined(s.classes) ? [] : s.classes,\n        attributes: isUndefined(s.attributes) ? {} : s.attributes,\n        styles: isUndefined(s.styles) ? {} : s.styles\n      };\n    };\n    var merge = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine$2 = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each$1(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each$1(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read$2(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map$2(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse$1(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var _a$2;\n    var baseBehaviour = 'alloy.base.behaviour';\n    var schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option('value'),\n        option('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith((_a$2 = {}, _a$2[execute$5()] = [\n        'disabling',\n        baseBehaviour,\n        'toggling',\n        'typeaheadevents'\n      ], _a$2[focus$4()] = [\n        baseBehaviour,\n        'focusing',\n        'keying'\n      ], _a$2[systemInit()] = [\n        baseBehaviour,\n        'disabling',\n        'toggling',\n        'representing'\n      ], _a$2[input()] = [\n        baseBehaviour,\n        'representing',\n        'streaming',\n        'invalidating'\n      ], _a$2[detachedFromDom()] = [\n        baseBehaviour,\n        'representing',\n        'item-events',\n        'tooltipping'\n      ], _a$2[mousedown()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[touchstart()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[mouseover()] = [\n        'item-type-events',\n        'tooltipping'\n      ], _a$2[receive()] = [\n        'receiving',\n        'reflecting',\n        'tooltipping'\n      ], _a$2)), anyValue()),\n      option('domModification')\n    ]);\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', schema$z, spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map$2(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$7({});\n      }, nu$7);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read = function (element, attr) {\n      var value = get$d(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$4 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$8(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$8(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$3 = function (element, clazz) {\n      return add$4(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n    var hasAll = function (element, classes) {\n      return forall(classes, function (clazz) {\n        return has(element, clazz);\n      });\n    };\n\n    var get$5 = function (element) {\n      return element.dom.value;\n    };\n    var set$4 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set$5(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$4(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$2 = function (spec) {\n      var behaviours = get$e(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), function (name) {\n        var behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    var generateFrom = function (spec, all) {\n      return generateFrom$1(spec, all);\n    };\n    var generate$4 = function (spec) {\n      var all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build$2 = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton$1);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$4(spec);\n      var bList = getBehaviours$3(bBlob);\n      var bData = getData$2(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind$3(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, pure$2);\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$e(spec, 'components').getOr([]);\n      return map$2(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make$8(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build$2(completeSpec));\n    };\n    var text$1 = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external$2({ element: element });\n    };\n    var external$2 = function (spec) {\n      var extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      var uid = extSpec.uid.getOrThunk(function () {\n        return generate$5('external');\n      });\n      writeOnly(extSpec.element, uid);\n      var me = {\n        uid: uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    var uids = generate$5;\n    var isSketchSpec$1 = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var build$1 = function (spec) {\n      return getPremade(spec).getOrThunk(function () {\n        var userSpecWithUid = isSketchSpec$1(spec) ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      });\n    };\n    var premade = premade$1;\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$3(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    var find$1 = function (queryElem) {\n      var dependent = closest$3(queryElem, function (elem) {\n        if (!isElement$2(elem)) {\n          return false;\n        }\n        var id = get$d(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$d(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$6('aria-owns');\n      var link = function (elem) {\n        set$8(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$7(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$1(queryElem).exists(function (owner) {\n        return isPartOf$1(component, owner);\n      });\n    };\n    var isPartOf$1 = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, function (s) {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$e(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find$5(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant$1(ignoreEvent);\n\n    var menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    var itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    var itemSchema$3 = constant$1(objOf(itemFields()));\n\n    var _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return requiredOf('markers', itemSchema$3());\n    };\n    var tieredMenuMarkers = function () {\n      return requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers$1 = function (required) {\n      return requiredObjOf('markers', map$2(required, required$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, required$2());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    };\n    var output$1 = function (name, value) {\n      return customField(name, constant$1(value));\n    };\n    var snapshot = function (name) {\n      return customField(name, identity$1);\n    };\n    var initSize = constant$1(_initSize);\n\n    var nu$6 = function (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit) {\n      if (alwaysFit === void 0) {\n        alwaysFit = false;\n      }\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        placement: placement,\n        restriction: boundsRestriction,\n        label: labelPrefix + '-' + placement,\n        alwaysFit: alwaysFit\n      };\n    };\n\n    var adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata$2 = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast$3 = adt$a.southeast;\n    var southwest$3 = adt$a.southwest;\n    var northeast$3 = adt$a.northeast;\n    var northwest$3 = adt$a.northwest;\n    var south$3 = adt$a.south;\n    var north$3 = adt$a.north;\n    var east$3 = adt$a.east;\n    var west$3 = adt$a.west;\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp$1 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$e(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds$1, restriction, bubbleOffset) {\n      var applyRestriction = function (dir, current) {\n        return restriction[dir].map(function (pos) {\n          var isVerticalAxis = dir === 'top' || dir === 'bottom';\n          var offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n          var comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n          var newPos = comparator(pos, current) + offset;\n          return isVerticalAxis ? clamp$1(newPos, bounds$1.y, bounds$1.bottom) : clamp$1(newPos, bounds$1.x, bounds$1.right);\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds$1.x);\n      var adjustedTop = applyRestriction('top', bounds$1.y);\n      var adjustedRight = applyRestriction('right', bounds$1.right);\n      var adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var labelPrefix$2 = 'layout';\n    var eastX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY$2 = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY$1 = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var north$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    };\n    var south$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    };\n    var east$2 = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    };\n    var west$2 = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    };\n    var all$1 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$2,\n        northwest$2,\n        southeast$2,\n        southwest$2,\n        north$2,\n        south$2\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$2,\n        northeast$2,\n        southwest$2,\n        southeast$2,\n        north$2,\n        south$2\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter$2(channels, function (ch) {\n        return contains$2(message.channels, ch);\n      });\n    };\n    var events$h = function (receiveConfig) {\n      return derive$2([run$1(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each$1(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute$1(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create$9 = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes$1 = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie$1(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: function (info, base) {\n          return lift2(getConfig(info), get$e(active, 'exhibit'), function (behaviourInfo, exhibitor) {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(function () {\n            return nu$7({});\n          });\n        },\n        name: constant$1(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$e(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var create$8 = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$9(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var createModes = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant$1(undefined);\n\n    var Receiving = create$8({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit$6 = function (base, posConfig) {\n      return nu$7({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$3 = function (element) {\n      return element.dom.focus();\n    };\n    var blur$1 = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve$1 = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      var toPx = function (num) {\n        return num + 'px';\n      };\n      return {\n        position: position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    var toOptions = function (position) {\n      return __assign(__assign({}, position), { position: Optional.some(position.position) });\n    };\n    var applyPositionCss = function (element, position) {\n      setOptions(element, toOptions(position));\n    };\n\n    var adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionRect = decision.rect;\n      var decisionX = decisionRect.x - x;\n      var decisionY = decisionRect.y - y;\n      var decisionWidth = decisionRect.width;\n      var decisionHeight = decisionRect.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata$2(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        var decisionRect = decision.rect;\n        return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$2, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var viewport = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds$1 = b();\n          var pos = translate$2(origin, bounds$1.x, bounds$1.y);\n          return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n        });\n      });\n    };\n    var translate$2 = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    adt$9.none;\n    var relative$1 = adt$9.relative;\n    var fixed$1 = adt$9.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var placementAttribute = 'data-alloy-placement';\n    var setPlacement$1 = function (element, placement) {\n      set$8(element, placementAttribute, placement);\n    };\n    var getPlacement = function (element) {\n      return getOpt(element, placementAttribute);\n    };\n    var reset$2 = function (element) {\n      return remove$7(element, placementAttribute);\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    var determinePosition = function (box, bounds) {\n      var boundsX = bounds.x, boundsY = bounds.y, boundsRight = bounds.right, boundsBottom = bounds.bottom;\n      var x = box.x, y = box.y, right = box.right, bottom = box.bottom, width = box.width, height = box.height;\n      var xInBounds = x >= boundsX && x <= boundsRight;\n      var yInBounds = y >= boundsY && y <= boundsBottom;\n      var originInBounds = xInBounds && yInBounds;\n      var rightInBounds = right <= boundsRight && right >= boundsX;\n      var bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      var sizeInBounds = rightInBounds && bottomInBounds;\n      var visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      var visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        visibleW: visibleW,\n        visibleH: visibleH\n      };\n    };\n    var calcReposition = function (box, bounds$1) {\n      var boundsX = bounds$1.x, boundsY = bounds$1.y, boundsRight = bounds$1.right, boundsBottom = bounds$1.bottom;\n      var x = box.x, y = box.y, width = box.width, height = box.height;\n      var maxX = Math.max(boundsX, boundsRight - width);\n      var maxY = Math.max(boundsY, boundsBottom - height);\n      var restrictedX = clamp$1(x, boundsX, maxX);\n      var restrictedY = clamp$1(y, boundsY, maxY);\n      var restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      var restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    var calcMaxSizes = function (direction, box, bounds) {\n      var upAvailable = constant$1(box.bottom - bounds.y);\n      var downAvailable = constant$1(bounds.bottom - box.y);\n      var maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant$1(box.right - bounds.x);\n      var eastAvailable = constant$1(bounds.right - box.x);\n      var maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth: maxWidth,\n        maxHeight: maxHeight\n      };\n    };\n    var attempt = function (candidate, width, height, bounds$1) {\n      var bubble = candidate.bubble;\n      var bubbleOffset = bubble.offset;\n      var adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      var newX = candidate.x + bubbleOffset.left;\n      var newY = candidate.y + bubbleOffset.top;\n      var box = bounds(newX, newY, width, height);\n      var _a = determinePosition(box, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, visibleW = _a.visibleW, visibleH = _a.visibleH;\n      var fits = originInBounds && sizeInBounds;\n      var fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      var isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      var _b = calcMaxSizes(candidate.direction, fittedBox, bounds$1), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\n      var reposition = {\n        rect: fittedBox,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    var attempts = function (element, candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, visibleW, visibleH, isVisible) {\n        var next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), function (newReposition, newVisibleW, newVisibleH, newIsVisible) {\n          var improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity$1, identity$1);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return singleton(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var api$1 = function () {\n      var subject = destroyable();\n      var run = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { run: run });\n    };\n    var value$1 = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$2(element, event, filter, handler);\n    };\n    var capture = function (element, event, handler) {\n      return capture$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    var timerAttr = 'data-alloy-transition-timer';\n    var isTransitioning$1 = function (element, transition) {\n      return hasAll(element, transition.classes);\n    };\n    var shouldApplyTransitionCss = function (transition, decision, lastPlacement) {\n      return lastPlacement.exists(function (placer) {\n        var mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    var hasChanges = function (position, intermediate) {\n      var round = function (value) {\n        return parseFloat(value).toFixed(3);\n      };\n      return find$4(intermediate, function (value, key) {\n        var newValue = position[key].map(round);\n        var val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    var getTransitionDuration = function (element) {\n      var get = function (name) {\n        var style = get$c(element, name);\n        var times = isString(style) ? style.split(/\\s*,\\s*/) : [];\n        return filter$2(times, isNotEmpty);\n      };\n      var parse = function (value) {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          var num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      var delay = get('transition-delay');\n      var duration = get('transition-duration');\n      return foldl(duration, function (acc, dur, i) {\n        var time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    var setupTransitionListeners = function (element, transition) {\n      var transitionEnd = unbindable();\n      var transitionCancel = unbindable();\n      var timer;\n      var isSourceTransition = function (e) {\n        var _a;\n        var pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      var transitionDone = function (e) {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          var type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      var transitionStarted = function () {\n        transitionEnd.set(bind(element, transitionend(), transitionDone));\n        transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n      };\n      if ('ontransitionstart' in element.dom) {\n        var transitionStart_1 = bind(element, transitionstart(), function (e) {\n          if (isSourceTransition(e)) {\n            transitionStart_1.unbind();\n            transitionStarted();\n          }\n        });\n      } else {\n        transitionStarted();\n      }\n      var duration = getTransitionDuration(element);\n      requestAnimationFrame(function () {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$8(element, timerAttr, timer);\n      });\n    };\n    var startTransitioning = function (element, transition) {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(function (timerId) {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    var applyTransitionCss = function (element, origin, position, transition, decision, lastPlacement) {\n      var shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$7(element, 'position', position.position);\n        var rect = toBox(origin, element);\n        var intermediatePosition_1 = reposition(origin, __assign(__assign({}, decision), { rect: rect }));\n        var intermediateCssOptions = mapToObject(properties, function (prop) {\n          return intermediatePosition_1[prop];\n        });\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$1(p),\n        height: getOuter$2(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position$2 = function (element, decision, options) {\n      var positionCss = reposition(options.origin, decision);\n      options.transition.each(function (transition) {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    var setPlacement = function (element, decision) {\n      setPlacement$1(element, decision.placement);\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    var anchored = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable$1 = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, lastPlacement, getBounds, overrideOptions, transition) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction,\n        lastPlacement: lastPlacement,\n        transition: transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    var nu$5 = function (xOffset, yOffset, classes, insetModifier) {\n      if (insetModifier === void 0) {\n        insetModifier = 1;\n      }\n      var insetXOffset = xOffset * insetModifier;\n      var insetYOffset = yOffset * insetModifier;\n      var getClasses = function (prop) {\n        return get$e(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-xOffset, yOffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(xOffset, yOffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-xOffset / 2, yOffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-xOffset, -yOffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(xOffset, -yOffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-xOffset / 2, -yOffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(xOffset, -yOffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-xOffset, -yOffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        insetNortheast: function () {\n          return make(insetXOffset, insetYOffset, [\n            'top',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetNorthwest: function () {\n          return make(-insetXOffset, insetYOffset, [\n            'top',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetNorth: function () {\n          return make(-insetXOffset / 2, insetYOffset, [\n            'top',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetSoutheast: function () {\n          return make(insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetSouthwest: function () {\n          return make(-insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetSouth: function () {\n          return make(-insetXOffset / 2, -insetYOffset, [\n            'bottom',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetEast: function () {\n          return make(-insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'right',\n            'inset'\n          ]);\n        },\n        insetWest: function () {\n          return make(insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'left',\n            'inset'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$5(0, 0, {});\n    };\n\n    var nu$4 = identity$1;\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$c(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement$2(current) && get$d(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$y = function () {\n      return optionObjOf('layouts', [\n        required$1('onLtr'),\n        required$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$4 = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement$4 = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$4(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$4(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity$1, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity$1, identity$1);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$1 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner$4(frame);\n        var compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner$4(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var getBox = function (left, top, width, height) {\n      var point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$4(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$4({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$7 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$7 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity$1, identity$1, identity$1);\n    };\n    var before = adt$6.before;\n    var on$1 = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before,\n      on: on$1,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$1\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    var getBounds$2 = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant$1(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText$1, 'text');\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name$2(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name$2(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all$3(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner$4(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getBounds$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    var point$1 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce$1 = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point$1(element, offset);\n      } else if (offset < children$1.length) {\n        return point$1(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText$1(last) ? get$3(last).length : children(last).length;\n        return point$1(last, len);\n      }\n    };\n\n    var descendOnce = function (element, offset) {\n      return isText$1(element) ? point$1(element, offset) : descendOnce$1(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce(sel.start, sel.soffset);\n        var modFinish = descendOnce(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$1 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before$2(sel.start, x);\n          var rect = getFirstRect(win, SimSelection.exact(x, 0, x, 1));\n          remove$5(x);\n          return rect;\n        });\n        return optRect.bind(function (rawRect) {\n          return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement$2(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    var labelPrefix$1 = 'link-layout';\n    var eastX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var all = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1\n      ];\n    };\n\n    var placement = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$4(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    var PositionSchema = [\n      defaulted('useFixed', never),\n      option('getBounds')\n    ];\n    var PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute$3(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee, lastPlace, transition) {\n      var anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, getBounds, anchoring.overrides, transition);\n    };\n    var position$1 = function (component, posConfig, posState, placee, placementSpec) {\n      positionWithin(component, posConfig, posState, placee, placementSpec, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, placee, placementSpec, boxElement) {\n      var boundsBox = boxElement.map(box$1);\n      return positionWithinBounds(component, posConfig, posState, placee, placementSpec, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, placee, placementSpec, bounds) {\n      var placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      var anchorage = placeeDetail.anchor;\n      var element = placee.element;\n      var placeeState = posState.get(placee.uid);\n      preserve$1(function () {\n        set$7(element, 'position', 'fixed');\n        var oldVisibility = getRaw(element, 'visibility');\n        set$7(element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant$1).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          var newState = doPlace(component, origin, anchoring, getBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(function () {\n          remove$6(element, 'visibility');\n        }, function (vis) {\n          set$7(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n    var reset$1 = function (component, pConfig, posState, placee) {\n      var element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (prop) {\n        return remove$6(element, prop);\n      });\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    var init$g = function () {\n      var state = {};\n      var set = function (id, data) {\n        state[id] = data;\n      };\n      var get = function (id) {\n        return get$e(state, id);\n      };\n      var clear = function (id) {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: function () {\n          return state;\n        },\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    var Positioning = create$8({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each$1(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach$1 = function (parent, child) {\n      append$2(parent.element, child.element);\n    };\n    var detachChildren$1 = function (component) {\n      each$1(component.components(), function (childComp) {\n        return remove$5(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren$1(component);\n      var deleted = difference(subs, newChildren);\n      each$1(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach = function (parent, child) {\n      attachWith(parent, child, append$2);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren = function (component) {\n      var subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open$1 = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close$1 = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen$1 = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen$1(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState$2 = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$7(sandbox.element, attr);\n      }, function (v) {\n        set$8(sandbox.element, attr, v);\n      });\n      set$7(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$7(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$7(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    var events$g = function (sandboxConfig, sandboxState) {\n      return derive$2([run$1(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close$1(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init$f = function () {\n      var contents = value$1();\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        readState: readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Sandboxing = create$8({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant$1('dismiss.popups');\n    var repositionPopups = constant$1('reposition.popups');\n    var mouseReleased = constant$1('mouse.released');\n\n    var schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([required$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad$5 = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    var events$f = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var memory$1 = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$8({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$e(dataByValue.get(), itemString).orThunk(function () {\n          return get$e(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each$1(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$e(item, 'meta').each(function (meta) {\n            get$e(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$8({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$e = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    var setValue$2 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$2 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(function () {\n        return store.getFallbackEntry(key);\n      });\n    };\n    var onLoad$4 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$1 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$1 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$3 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue,\n        getValue: getValue,\n        onLoad: onLoad$2,\n        onUnload: onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    var Representing = create$8({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map$2(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([customField('dump', identity$1)]));\n    };\n    var get$2 = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, derive$1(original)), data.dump);\n    };\n    var SketchBehaviours = {\n      field: field,\n      augment: augment,\n      get: get$2\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has$2(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$e(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$e(value, 'components').getOr([]);\n        var substituted = bind$3(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity$1);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind$3(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant$1(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single$2 = adt$3.single;\n    var multiple = adt$3.multiple;\n    var placeholder = constant$1(_placeholder);\n\n    var adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted('factory', { sketch: identity$1 });\n    var fSchema = defaulted('schema', []);\n    var fName = required$1('name');\n    var fPname = field$1('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$6(typeSpec.name) + '>';\n    }), anyValue());\n    var fGroupSchema = customField('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted('defaults', constant$1({}));\n    var fOverrides = defaulted('overrides', constant$1({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity$1, identity$1, identity$1, identity$1);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie$1('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$2.required, requiredSpec);\n    var external$1 = convert(adt$2.external, externalSpec);\n    var optional = convert(adt$2.optional, optionalSpec);\n    var group = convert(adt$2.group, groupSpec);\n    var original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each$1(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single$2(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single$2(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map$2(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    var generate$3 = function (owner, parts) {\n      var r = {};\n      each$1(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne$1 = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind$3(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return requiredObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map$2(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components$1 = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, _k) {\n        return constant$1(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll(map$2(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field$1('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite$1 = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$5('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var single = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$3(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var inside = function (target) {\n      return name$2(target) === 'input' && get$d(target, 'type') !== 'radio' || name$2(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [required$1('find')];\n\n    var Composing = create$8({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$1 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains$2(nativeDisabled, name$2(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$8(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$7(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$d(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$8(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$8(component.element, 'aria-disabled', 'false');\n    };\n    var disable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$3 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable$1,\n        disable: disable$1,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$3\n    });\n\n    var exhibit$5 = function (base, disableConfig) {\n      return nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$e = function (disableConfig, disableState) {\n      return derive$2([\n        abort(execute$5(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$1)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$8({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    var highlight = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find$5(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta$2 = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex$1(items, function (item) {\n        return has(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$8({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains$2(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose = function (transitions, event) {\n      var transition = find$5(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom$2 = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted('focusManager', dom$2()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains$2([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output$1('handler', me),\n          output$1('state', stateInit),\n          output$1('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run$1(focus$4(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run$1(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$6 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$1(element, sel);\n        }).getOr(element);\n        return get$b(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter$2(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$1(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant$1([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant$1([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$6(customField('cyclic', never));\n\n    var CyclicType = create$6(customField('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    var execute$4 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    var getKeyupRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, function () {\n      return Optional.none();\n    });\n\n    var flatgrid$1 = function () {\n      var dimensions = value$1();\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set({\n          numRows: numRows,\n          numColumns: numColumns\n        });\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$8({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$d = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$1 = useV;\n    var south$1 = useV;\n    var move$1 = useV;\n\n    var isHidden$1 = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden$1(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex$1(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex = function (elements, target) {\n      return findIndex$1(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp$1(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, -1);\n    };\n    var cycleUp$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, -1);\n    };\n    var cycleDown$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, +1);\n    };\n\n    var schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    var focusIn$3 = function (component, gridConfig, _gridState) {\n      descendant(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent$1 = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, gridConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent$1(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove$2 = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape$1 = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1);\n    var moveRight$3 = doMove$2(cycleRight$1);\n    var moveNorth$1 = doMove$2(cycleUp$1);\n    var moveSouth$1 = doMove$2(cycleDown$1);\n    var getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    var getKeyupRules$4 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name$2(candidate) === 'button' && get$d(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true)\n    ];\n    var findCurrent = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, flowConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$2 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$3 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2),\n        rule(inSet(ESCAPE), doEscape)\n      ];\n    };\n    var getKeyupRules$3 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp$1(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp$1(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, -1);\n    };\n    var cycleUp = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, -1);\n    };\n    var cycleDown = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    var focusIn$1 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$1 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map$2(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$1(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft = doMove(cycleLeft, moveLeft$1);\n    var moveRight = doMove(cycleRight, moveRight$1);\n    var moveNorth = doMove(cycleUp, moveUp$1);\n    var moveSouth = doMove(cycleDown, moveDown$1);\n    var getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    var getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    var execute = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn = function (component, menuConfig, _state) {\n      descendant(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    var getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$2 = function (component, replaceConfig, replaceState, data) {\n      preserve$1(function () {\n        var newChildren = map$2(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append$2, appendee);\n    };\n    var prepend = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend$1, prependee);\n    };\n    var remove = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find$5(children, function (child) {\n        return eq(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex$1(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$2,\n        contents: contents\n    });\n\n    var Replacing = create$8({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$d = function (name, eventHandlers) {\n      var events = derive$2(eventHandlers);\n      return create$8({\n        fields: [required$1('enabled')],\n        name: name,\n        active: { events: constant$1(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    var exhibit$4 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    var events$c = function (focusConfig) {\n      return derive$2([run$1(focus$4(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    var Focusing = create$8({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle$2 = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$1 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$1\n    });\n\n    var exhibit$3 = function () {\n      return nu$7({});\n    };\n    var events$b = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      var load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$8({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$a = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute$1(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus$1 = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant$1(hoverEvent);\n    var focus$1 = constant$1(focusEvent);\n\n    var builder$2 = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArray(__spreadArray([], pointerEvents(), true), [\n            run$1(mouseover(), onHover),\n            run$1(focusItem(), Focusing.focus)\n          ], false))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive$2([stopper(focusItem())])\n      };\n    };\n    var schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    var owner$2 = constant$1('item-widget');\n    var parts$h = constant$1([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts$h());\n      var components = components$1(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    var itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$g = constant$1([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return has$2(u, 'uid') ? u : __assign(__assign({}, u), { uid: generate$5('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector')\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus = constant$1('alloy.menu-focus');\n\n    var make$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive$2([\n          run$1(focus$1(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run$1(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    var transpose$1 = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$e(byMenu, finish).bind(function (triggerItem) {\n        return get$e(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$2 = function (menus, expansions) {\n      var items = {};\n      each(menus, function (menuItems, menu) {\n        each$1(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose$1(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return get$e(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$c = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = value$1();\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$4(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter$2(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind$3(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return is$1(primary.get(), menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$e(expansions.get(), itemValue).map(function (menu) {\n          var current = get$e(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$e(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$e(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$e(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$c,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$6 = function (detail, _rawUiSpec) {\n      var submenuParentItems = value$1();\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom$2()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find$5(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$1(detail.data.menus, function (data, _menuName) {\n          return bind$3(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map$2(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each$1(others, function (o) {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter$2(items, function (i) {\n            return get$d(i, 'aria-haspopup') === 'true';\n          });\n          each$1(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(r);\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each(parentItems, function (v, k) {\n          var expanded = contains$2(path, k);\n          set$8(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each$1(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          var value = getItemValue(item);\n          return layeredState.expand(value).bind(function (path) {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(function (menuName) {\n              return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n                var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n                if (!inBody(activeMenu.element)) {\n                  Replacing.append(container, premade(activeMenu));\n                }\n                detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n                if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                  Highlighting.highlightFirst(activeMenu);\n                  return updateMenuPath(container, layeredState, path);\n                } else {\n                  Highlighting.dehighlightAll(activeMenu);\n                  return Optional.some(item);\n                }\n              });\n            });\n          });\n        }\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$1(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive$2([\n        run$1(focus(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute$1(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run$1(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$d(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem$1 = constant$1('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem = function (text) {\n      return {\n        value: generate$6(collapseItem$1()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightImmediately', true),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, placementSpec, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: __assign({\n              type: 'submenu',\n              item: item\n            }, getSubmenuLayouts(triggeringPaths))\n          });\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: __assign({\n                type: 'submenu',\n                item: st.triggeringItem\n              }, submenuLayouts)\n            });\n          });\n        }\n      });\n    };\n    var factory$m = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf$1(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, thing, placementSpec) {\n        showWithin(sandbox, thing, placementSpec, Optional.none());\n      };\n      var showWithin = function (sandbox, thing, placementSpec, boxElement) {\n        showWithinBounds(sandbox, thing, placementSpec, function () {\n          return boxElement.map(function (elem) {\n            return box$1(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, thing, placementSpec, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, placementSpec, menuSpec) {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      var showMenuWithinBounds = function (sandbox, placementSpec, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$m,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var labelPrefix = 'layout-inset';\n    var westEdgeX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor) {\n      return anchor.y;\n    };\n    var southY = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var southwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var southeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var northwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), labelPrefix);\n    };\n    var northeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), labelPrefix);\n    };\n    var north = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    };\n    var south = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    };\n    var east = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    };\n    var west = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    };\n    var lookupPreserveLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    var preserve = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    var lookupFlippedLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    var flip$2 = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$l = function (detail) {\n      var events = events$a(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single({\n      name: 'Button',\n      factory: factory$l,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$7(elem) };\n      return __assign({\n        tag: name$2(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    function _typeof(obj) {\n      '@babel/helpers - typeof';\n      return _typeof = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && 'function' == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n      }, _typeof(obj);\n    }\n    function _setPrototypeOf(o, p) {\n      _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n      return _setPrototypeOf(o, p);\n    }\n    function _isNativeReflectConstruct() {\n      if (typeof Reflect === 'undefined' || !Reflect.construct)\n        return false;\n      if (Reflect.construct.sham)\n        return false;\n      if (typeof Proxy === 'function')\n        return true;\n      try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {\n        }));\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n    function _construct(Parent, args, Class) {\n      if (_isNativeReflectConstruct()) {\n        _construct = Reflect.construct;\n      } else {\n        _construct = function _construct(Parent, args, Class) {\n          var a = [null];\n          a.push.apply(a, args);\n          var Constructor = Function.bind.apply(Parent, a);\n          var instance = new Constructor();\n          if (Class)\n            _setPrototypeOf(instance, Class.prototype);\n          return instance;\n        };\n      }\n      return _construct.apply(null, arguments);\n    }\n    function _toConsumableArray(arr) {\n      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n    }\n    function _arrayWithoutHoles(arr) {\n      if (Array.isArray(arr))\n        return _arrayLikeToArray(arr);\n    }\n    function _iterableToArray(iter) {\n      if (typeof Symbol !== 'undefined' && iter[Symbol.iterator] != null || iter['@@iterator'] != null)\n        return Array.from(iter);\n    }\n    function _unsupportedIterableToArray(o, minLen) {\n      if (!o)\n        return;\n      if (typeof o === 'string')\n        return _arrayLikeToArray(o, minLen);\n      var n = Object.prototype.toString.call(o).slice(8, -1);\n      if (n === 'Object' && o.constructor)\n        n = o.constructor.name;\n      if (n === 'Map' || n === 'Set')\n        return Array.from(o);\n      if (n === 'Arguments' || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n        return _arrayLikeToArray(o, minLen);\n    }\n    function _arrayLikeToArray(arr, len) {\n      if (len == null || len > arr.length)\n        len = arr.length;\n      for (var i = 0, arr2 = new Array(len); i < len; i++)\n        arr2[i] = arr[i];\n      return arr2;\n    }\n    function _nonIterableSpread() {\n      throw new TypeError('Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');\n    }\n    var hasOwnProperty = Object.hasOwnProperty, setPrototypeOf = Object.setPrototypeOf, isFrozen = Object.isFrozen, getPrototypeOf = Object.getPrototypeOf, getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var freeze = Object.freeze, seal = Object.seal, create$5 = Object.create;\n    var _ref = typeof Reflect !== 'undefined' && Reflect, apply$1 = _ref.apply, construct = _ref.construct;\n    if (!apply$1) {\n      apply$1 = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return _construct(Func, _toConsumableArray(args));\n      };\n    }\n    var arrayForEach = unapply(Array.prototype.forEach);\n    var arrayPop = unapply(Array.prototype.pop);\n    var arrayPush = unapply(Array.prototype.push);\n    var stringToLowerCase = unapply(String.prototype.toLowerCase);\n    var stringMatch = unapply(String.prototype.match);\n    var stringReplace = unapply(String.prototype.replace);\n    var stringIndexOf = unapply(String.prototype.indexOf);\n    var stringTrim = unapply(String.prototype.trim);\n    var regExpTest = unapply(RegExp.prototype.test);\n    var typeErrorCreate = unconstruct(TypeError);\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply$1(func, thisArg, args);\n      };\n    }\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n    function addToSet(set, array) {\n      if (setPrototypeOf) {\n        setPrototypeOf(set, null);\n      }\n      var l = array.length;\n      while (l--) {\n        var element = array[l];\n        if (typeof element === 'string') {\n          var lcElement = stringToLowerCase(element);\n          if (lcElement !== element) {\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n    function clone$1(object) {\n      var newObject = create$5(null);\n      var property;\n      for (property in object) {\n        if (apply$1(hasOwnProperty, object, [property])) {\n          newObject[property] = object[property];\n        }\n      }\n      return newObject;\n    }\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        var desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue(element) {\n        console.warn('fallback value for', element);\n        return null;\n      }\n      return fallbackValue;\n    }\n    var html$1 = freeze([\n      'a',\n      'abbr',\n      'acronym',\n      'address',\n      'area',\n      'article',\n      'aside',\n      'audio',\n      'b',\n      'bdi',\n      'bdo',\n      'big',\n      'blink',\n      'blockquote',\n      'body',\n      'br',\n      'button',\n      'canvas',\n      'caption',\n      'center',\n      'cite',\n      'code',\n      'col',\n      'colgroup',\n      'content',\n      'data',\n      'datalist',\n      'dd',\n      'decorator',\n      'del',\n      'details',\n      'dfn',\n      'dialog',\n      'dir',\n      'div',\n      'dl',\n      'dt',\n      'element',\n      'em',\n      'fieldset',\n      'figcaption',\n      'figure',\n      'font',\n      'footer',\n      'form',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'head',\n      'header',\n      'hgroup',\n      'hr',\n      'html',\n      'i',\n      'img',\n      'input',\n      'ins',\n      'kbd',\n      'label',\n      'legend',\n      'li',\n      'main',\n      'map',\n      'mark',\n      'marquee',\n      'menu',\n      'menuitem',\n      'meter',\n      'nav',\n      'nobr',\n      'ol',\n      'optgroup',\n      'option',\n      'output',\n      'p',\n      'picture',\n      'pre',\n      'progress',\n      'q',\n      'rp',\n      'rt',\n      'ruby',\n      's',\n      'samp',\n      'section',\n      'select',\n      'shadow',\n      'small',\n      'source',\n      'spacer',\n      'span',\n      'strike',\n      'strong',\n      'style',\n      'sub',\n      'summary',\n      'sup',\n      'table',\n      'tbody',\n      'td',\n      'template',\n      'textarea',\n      'tfoot',\n      'th',\n      'thead',\n      'time',\n      'tr',\n      'track',\n      'tt',\n      'u',\n      'ul',\n      'var',\n      'video',\n      'wbr'\n    ]);\n    var svg$1 = freeze([\n      'svg',\n      'a',\n      'altglyph',\n      'altglyphdef',\n      'altglyphitem',\n      'animatecolor',\n      'animatemotion',\n      'animatetransform',\n      'circle',\n      'clippath',\n      'defs',\n      'desc',\n      'ellipse',\n      'filter',\n      'font',\n      'g',\n      'glyph',\n      'glyphref',\n      'hkern',\n      'image',\n      'line',\n      'lineargradient',\n      'marker',\n      'mask',\n      'metadata',\n      'mpath',\n      'path',\n      'pattern',\n      'polygon',\n      'polyline',\n      'radialgradient',\n      'rect',\n      'stop',\n      'style',\n      'switch',\n      'symbol',\n      'text',\n      'textpath',\n      'title',\n      'tref',\n      'tspan',\n      'view',\n      'vkern'\n    ]);\n    var svgFilters = freeze([\n      'feBlend',\n      'feColorMatrix',\n      'feComponentTransfer',\n      'feComposite',\n      'feConvolveMatrix',\n      'feDiffuseLighting',\n      'feDisplacementMap',\n      'feDistantLight',\n      'feFlood',\n      'feFuncA',\n      'feFuncB',\n      'feFuncG',\n      'feFuncR',\n      'feGaussianBlur',\n      'feImage',\n      'feMerge',\n      'feMergeNode',\n      'feMorphology',\n      'feOffset',\n      'fePointLight',\n      'feSpecularLighting',\n      'feSpotLight',\n      'feTile',\n      'feTurbulence'\n    ]);\n    var svgDisallowed = freeze([\n      'animate',\n      'color-profile',\n      'cursor',\n      'discard',\n      'fedropshadow',\n      'font-face',\n      'font-face-format',\n      'font-face-name',\n      'font-face-src',\n      'font-face-uri',\n      'foreignobject',\n      'hatch',\n      'hatchpath',\n      'mesh',\n      'meshgradient',\n      'meshpatch',\n      'meshrow',\n      'missing-glyph',\n      'script',\n      'set',\n      'solidcolor',\n      'unknown',\n      'use'\n    ]);\n    var mathMl$1 = freeze([\n      'math',\n      'menclose',\n      'merror',\n      'mfenced',\n      'mfrac',\n      'mglyph',\n      'mi',\n      'mlabeledtr',\n      'mmultiscripts',\n      'mn',\n      'mo',\n      'mover',\n      'mpadded',\n      'mphantom',\n      'mroot',\n      'mrow',\n      'ms',\n      'mspace',\n      'msqrt',\n      'mstyle',\n      'msub',\n      'msup',\n      'msubsup',\n      'mtable',\n      'mtd',\n      'mtext',\n      'mtr',\n      'munder',\n      'munderover'\n    ]);\n    var mathMlDisallowed = freeze([\n      'maction',\n      'maligngroup',\n      'malignmark',\n      'mlongdiv',\n      'mscarries',\n      'mscarry',\n      'msgroup',\n      'mstack',\n      'msline',\n      'msrow',\n      'semantics',\n      'annotation',\n      'annotation-xml',\n      'mprescripts',\n      'none'\n    ]);\n    var text = freeze(['#text']);\n    var html = freeze([\n      'accept',\n      'action',\n      'align',\n      'alt',\n      'autocapitalize',\n      'autocomplete',\n      'autopictureinpicture',\n      'autoplay',\n      'background',\n      'bgcolor',\n      'border',\n      'capture',\n      'cellpadding',\n      'cellspacing',\n      'checked',\n      'cite',\n      'class',\n      'clear',\n      'color',\n      'cols',\n      'colspan',\n      'controls',\n      'controlslist',\n      'coords',\n      'crossorigin',\n      'datetime',\n      'decoding',\n      'default',\n      'dir',\n      'disabled',\n      'disablepictureinpicture',\n      'disableremoteplayback',\n      'download',\n      'draggable',\n      'enctype',\n      'enterkeyhint',\n      'face',\n      'for',\n      'headers',\n      'height',\n      'hidden',\n      'high',\n      'href',\n      'hreflang',\n      'id',\n      'inputmode',\n      'integrity',\n      'ismap',\n      'kind',\n      'label',\n      'lang',\n      'list',\n      'loading',\n      'loop',\n      'low',\n      'max',\n      'maxlength',\n      'media',\n      'method',\n      'min',\n      'minlength',\n      'multiple',\n      'muted',\n      'name',\n      'nonce',\n      'noshade',\n      'novalidate',\n      'nowrap',\n      'open',\n      'optimum',\n      'pattern',\n      'placeholder',\n      'playsinline',\n      'poster',\n      'preload',\n      'pubdate',\n      'radiogroup',\n      'readonly',\n      'rel',\n      'required',\n      'rev',\n      'reversed',\n      'role',\n      'rows',\n      'rowspan',\n      'spellcheck',\n      'scope',\n      'selected',\n      'shape',\n      'size',\n      'sizes',\n      'span',\n      'srclang',\n      'start',\n      'src',\n      'srcset',\n      'step',\n      'style',\n      'summary',\n      'tabindex',\n      'title',\n      'translate',\n      'type',\n      'usemap',\n      'valign',\n      'value',\n      'width',\n      'xmlns',\n      'slot'\n    ]);\n    var svg = freeze([\n      'accent-height',\n      'accumulate',\n      'additive',\n      'alignment-baseline',\n      'ascent',\n      'attributename',\n      'attributetype',\n      'azimuth',\n      'basefrequency',\n      'baseline-shift',\n      'begin',\n      'bias',\n      'by',\n      'class',\n      'clip',\n      'clippathunits',\n      'clip-path',\n      'clip-rule',\n      'color',\n      'color-interpolation',\n      'color-interpolation-filters',\n      'color-profile',\n      'color-rendering',\n      'cx',\n      'cy',\n      'd',\n      'dx',\n      'dy',\n      'diffuseconstant',\n      'direction',\n      'display',\n      'divisor',\n      'dur',\n      'edgemode',\n      'elevation',\n      'end',\n      'fill',\n      'fill-opacity',\n      'fill-rule',\n      'filter',\n      'filterunits',\n      'flood-color',\n      'flood-opacity',\n      'font-family',\n      'font-size',\n      'font-size-adjust',\n      'font-stretch',\n      'font-style',\n      'font-variant',\n      'font-weight',\n      'fx',\n      'fy',\n      'g1',\n      'g2',\n      'glyph-name',\n      'glyphref',\n      'gradientunits',\n      'gradienttransform',\n      'height',\n      'href',\n      'id',\n      'image-rendering',\n      'in',\n      'in2',\n      'k',\n      'k1',\n      'k2',\n      'k3',\n      'k4',\n      'kerning',\n      'keypoints',\n      'keysplines',\n      'keytimes',\n      'lang',\n      'lengthadjust',\n      'letter-spacing',\n      'kernelmatrix',\n      'kernelunitlength',\n      'lighting-color',\n      'local',\n      'marker-end',\n      'marker-mid',\n      'marker-start',\n      'markerheight',\n      'markerunits',\n      'markerwidth',\n      'maskcontentunits',\n      'maskunits',\n      'max',\n      'mask',\n      'media',\n      'method',\n      'mode',\n      'min',\n      'name',\n      'numoctaves',\n      'offset',\n      'operator',\n      'opacity',\n      'order',\n      'orient',\n      'orientation',\n      'origin',\n      'overflow',\n      'paint-order',\n      'path',\n      'pathlength',\n      'patterncontentunits',\n      'patterntransform',\n      'patternunits',\n      'points',\n      'preservealpha',\n      'preserveaspectratio',\n      'primitiveunits',\n      'r',\n      'rx',\n      'ry',\n      'radius',\n      'refx',\n      'refy',\n      'repeatcount',\n      'repeatdur',\n      'restart',\n      'result',\n      'rotate',\n      'scale',\n      'seed',\n      'shape-rendering',\n      'specularconstant',\n      'specularexponent',\n      'spreadmethod',\n      'startoffset',\n      'stddeviation',\n      'stitchtiles',\n      'stop-color',\n      'stop-opacity',\n      'stroke-dasharray',\n      'stroke-dashoffset',\n      'stroke-linecap',\n      'stroke-linejoin',\n      'stroke-miterlimit',\n      'stroke-opacity',\n      'stroke',\n      'stroke-width',\n      'style',\n      'surfacescale',\n      'systemlanguage',\n      'tabindex',\n      'targetx',\n      'targety',\n      'transform',\n      'transform-origin',\n      'text-anchor',\n      'text-decoration',\n      'text-rendering',\n      'textlength',\n      'type',\n      'u1',\n      'u2',\n      'unicode',\n      'values',\n      'viewbox',\n      'visibility',\n      'version',\n      'vert-adv-y',\n      'vert-origin-x',\n      'vert-origin-y',\n      'width',\n      'word-spacing',\n      'wrap',\n      'writing-mode',\n      'xchannelselector',\n      'ychannelselector',\n      'x',\n      'x1',\n      'x2',\n      'xmlns',\n      'y',\n      'y1',\n      'y2',\n      'z',\n      'zoomandpan'\n    ]);\n    var mathMl = freeze([\n      'accent',\n      'accentunder',\n      'align',\n      'bevelled',\n      'close',\n      'columnsalign',\n      'columnlines',\n      'columnspan',\n      'denomalign',\n      'depth',\n      'dir',\n      'display',\n      'displaystyle',\n      'encoding',\n      'fence',\n      'frame',\n      'height',\n      'href',\n      'id',\n      'largeop',\n      'length',\n      'linethickness',\n      'lspace',\n      'lquote',\n      'mathbackground',\n      'mathcolor',\n      'mathsize',\n      'mathvariant',\n      'maxsize',\n      'minsize',\n      'movablelimits',\n      'notation',\n      'numalign',\n      'open',\n      'rowalign',\n      'rowlines',\n      'rowspacing',\n      'rowspan',\n      'rspace',\n      'rquote',\n      'scriptlevel',\n      'scriptminsize',\n      'scriptsizemultiplier',\n      'selection',\n      'separator',\n      'separators',\n      'stretchy',\n      'subscriptshift',\n      'supscriptshift',\n      'symmetric',\n      'voffset',\n      'width',\n      'xmlns'\n    ]);\n    var xml = freeze([\n      'xlink:href',\n      'xml:id',\n      'xlink:title',\n      'xml:space',\n      'xmlns:xlink'\n    ]);\n    var MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\n    var ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);\n    var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\n    var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);\n    var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);\n    var DOCTYPE_NAME = seal(/^html$/i);\n    var getGlobal = function getGlobal() {\n      return typeof window === 'undefined' ? null : window;\n    };\n    var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n      if (_typeof(trustedTypes) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n      var suffix = null;\n      var ATTR_NAME = 'data-tt-policy-suffix';\n      if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n        suffix = document.currentScript.getAttribute(ATTR_NAME);\n      }\n      var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML: function createHTML(html) {\n            return html;\n          }\n        });\n      } catch (_) {\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      var DOMPurify = function DOMPurify(root) {\n        return createDOMPurify(root);\n      };\n      DOMPurify.version = '2.3.8';\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== 9) {\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      var originalDocument = window.document;\n      var document = window.document;\n      var DocumentFragment = window.DocumentFragment, HTMLTemplateElement = window.HTMLTemplateElement, Node = window.Node, Element = window.Element, NodeFilter = window.NodeFilter, _window$NamedNodeMap = window.NamedNodeMap, NamedNodeMap = _window$NamedNodeMap === void 0 ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap, HTMLFormElement = window.HTMLFormElement, DOMParser = window.DOMParser, trustedTypes = window.trustedTypes;\n      var ElementPrototype = Element.prototype;\n      var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n      if (typeof HTMLTemplateElement === 'function') {\n        var template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n      var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n      var _document = document, implementation = _document.implementation, createNodeIterator = _document.createNodeIterator, createDocumentFragment = _document.createDocumentFragment, getElementsByTagName = _document.getElementsByTagName;\n      var importNode = originalDocument.importNode;\n      var documentMode = {};\n      try {\n        documentMode = clone$1(document).documentMode ? document.documentMode : {};\n      } catch (_) {\n      }\n      var hooks = {};\n      DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n      var MUSTACHE_EXPR$1 = MUSTACHE_EXPR, ERB_EXPR$1 = ERB_EXPR, DATA_ATTR$1 = DATA_ATTR, ARIA_ATTR$1 = ARIA_ATTR, IS_SCRIPT_OR_DATA$1 = IS_SCRIPT_OR_DATA, ATTR_WHITESPACE$1 = ATTR_WHITESPACE;\n      var IS_ALLOWED_URI$1 = IS_ALLOWED_URI;\n      var ALLOWED_TAGS = null;\n      var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(svgFilters), _toConsumableArray(mathMl$1), _toConsumableArray(text)));\n      var ALLOWED_ATTR = null;\n      var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(mathMl), _toConsumableArray(xml)));\n      var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n      var FORBID_TAGS = null;\n      var FORBID_ATTR = null;\n      var ALLOW_ARIA_ATTR = true;\n      var ALLOW_DATA_ATTR = true;\n      var ALLOW_UNKNOWN_PROTOCOLS = false;\n      var SAFE_FOR_TEMPLATES = false;\n      var WHOLE_DOCUMENT = false;\n      var SET_CONFIG = false;\n      var FORCE_BODY = false;\n      var RETURN_DOM = false;\n      var RETURN_DOM_FRAGMENT = false;\n      var RETURN_TRUSTED_TYPE = false;\n      var SANITIZE_DOM = true;\n      var KEEP_CONTENT = true;\n      var IN_PLACE = false;\n      var USE_PROFILES = {};\n      var FORBID_CONTENTS = null;\n      var DEFAULT_FORBID_CONTENTS = addToSet({}, [\n        'annotation-xml',\n        'audio',\n        'colgroup',\n        'desc',\n        'foreignobject',\n        'head',\n        'iframe',\n        'math',\n        'mi',\n        'mn',\n        'mo',\n        'ms',\n        'mtext',\n        'noembed',\n        'noframes',\n        'noscript',\n        'plaintext',\n        'script',\n        'style',\n        'svg',\n        'template',\n        'thead',\n        'title',\n        'video',\n        'xmp'\n      ]);\n      var DATA_URI_TAGS = null;\n      var DEFAULT_DATA_URI_TAGS = addToSet({}, [\n        'audio',\n        'video',\n        'img',\n        'source',\n        'image',\n        'track'\n      ]);\n      var URI_SAFE_ATTRIBUTES = null;\n      var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n        'alt',\n        'class',\n        'for',\n        'id',\n        'label',\n        'name',\n        'pattern',\n        'placeholder',\n        'role',\n        'summary',\n        'title',\n        'value',\n        'style',\n        'xmlns'\n      ]);\n      var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      var NAMESPACE = HTML_NAMESPACE;\n      var IS_EMPTY_INPUT = false;\n      var PARSER_MEDIA_TYPE;\n      var SUPPORTED_PARSER_MEDIA_TYPES = [\n        'application/xhtml+xml',\n        'text/html'\n      ];\n      var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      var transformCaseFunc;\n      var CONFIG = null;\n      var formElement = document.createElement('form');\n      var isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n      var _parseConfig = function _parseConfig(cfg) {\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n        if (!cfg || _typeof(cfg) !== 'object') {\n          cfg = {};\n        }\n        cfg = clone$1(cfg);\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n        URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone$1(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone$1(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n        USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n        RETURN_DOM = cfg.RETURN_DOM || false;\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n        FORCE_BODY = cfg.FORCE_BODY || false;\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n        IN_PLACE = cfg.IN_PLACE || false;\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$1;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        PARSER_MEDIA_TYPE = SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? function (x) {\n          return x;\n        } : stringToLowerCase;\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, _toConsumableArray(text));\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone$1(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone$1(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone$1(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n        }\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, [\n            'html',\n            'head',\n            'body'\n          ]);\n        }\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n        'mi',\n        'mo',\n        'mn',\n        'ms',\n        'mtext'\n      ]);\n      var HTML_INTEGRATION_POINTS = addToSet({}, [\n        'foreignobject',\n        'desc',\n        'title',\n        'annotation-xml'\n      ]);\n      var COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script'\n      ]);\n      var ALL_SVG_TAGS = addToSet({}, svg$1);\n      addToSet(ALL_SVG_TAGS, svgFilters);\n      addToSet(ALL_SVG_TAGS, svgDisallowed);\n      var ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n      addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n      var _checkValidNamespace = function _checkValidNamespace(element) {\n        var parent = getParentNode(element);\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: HTML_NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        var tagName = stringToLowerCase(element.tagName);\n        var parentTagName = stringToLowerCase(parent.tagName);\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n        return false;\n      };\n      var _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, { element: node });\n        try {\n          node.parentNode.removeChild(node);\n        } catch (_) {\n          try {\n            node.outerHTML = emptyHTML;\n          } catch (_) {\n            node.remove();\n          }\n        }\n      };\n      var _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {\n            }\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {\n            }\n          }\n        }\n      };\n      var _initDocument = function _initDocument(dirty) {\n        var doc;\n        var leadingWhitespace;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {\n          }\n        }\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n          } catch (_) {\n          }\n        }\n        var body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n      var _createIterator = function _createIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n      };\n      var _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function');\n      };\n      var _isNode = function _isNode(object) {\n        return _typeof(Node) === 'object' ? object instanceof Node : object && _typeof(object) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n      };\n      var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], function (hook) {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n      var _sanitizeElements = function _sanitizeElements(currentNode) {\n        var content;\n        _executeHook('beforeSanitizeElements', currentNode, null);\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (regExpTest(/[\\u0080-\\uFFFF]/, currentNode.nodeName)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        var tagName = transformCaseFunc(currentNode.nodeName);\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName: tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName))\n              return false;\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))\n              return false;\n          }\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              var childCount = childNodes.length;\n              for (var i = childCount - 1; i >= 0; --i) {\n                parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n          content = currentNode.textContent;\n          content = stringReplace(content, MUSTACHE_EXPR$1, ' ');\n          content = stringReplace(content, ERB_EXPR$1, ' ');\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n            currentNode.textContent = content;\n          }\n        }\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n      var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$1, lcName));\n        else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$1, lcName));\n        else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (_basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));\n          else {\n            return false;\n          }\n        } else if (URI_SAFE_ATTRIBUTES[lcName]);\n        else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]);\n        else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if (!value);\n        else {\n          return false;\n        }\n        return true;\n      };\n      var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n        return tagName.indexOf('-') > 0;\n      };\n      var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        var attr;\n        var value;\n        var lcName;\n        var l;\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        var attributes = currentNode.attributes;\n        if (!attributes) {\n          return;\n        }\n        var hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n        while (l--) {\n          attr = attributes[l];\n          var _attr = attr, name = _attr.name, namespaceURI = _attr.namespaceURI;\n          value = name === 'value' ? attr.value : stringTrim(attr.value);\n          lcName = transformCaseFunc(name);\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined;\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n          _removeAttribute(name, currentNode);\n          if (!hookEvent.keepAttr) {\n            continue;\n          }\n          if (regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SAFE_FOR_TEMPLATES) {\n            value = stringReplace(value, MUSTACHE_EXPR$1, ' ');\n            value = stringReplace(value, ERB_EXPR$1, ' ');\n          }\n          var lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            continue;\n          }\n          try {\n            if (namespaceURI) {\n              currentNode.setAttributeNS(namespaceURI, name, value);\n            } else {\n              currentNode.setAttribute(name, value);\n            }\n            arrayPop(DOMPurify.removed);\n          } catch (_) {\n          }\n        }\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n      var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        var shadowNode;\n        var shadowIterator = _createIterator(fragment);\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n          _sanitizeAttributes(shadowNode);\n        }\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n      DOMPurify.sanitize = function (dirty, cfg) {\n        var body;\n        var importedNode;\n        var currentNode;\n        var oldNode;\n        var returnNode;\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString !== 'function') {\n            throw typeErrorCreate('toString is not a function');\n          } else {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          }\n        }\n        if (!DOMPurify.isSupported) {\n          if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n            if (typeof dirty === 'string') {\n              return window.toStaticHTML(dirty);\n            }\n            if (_isNode(dirty)) {\n              return window.toStaticHTML(dirty.outerHTML);\n            }\n          }\n          return dirty;\n        }\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n        DOMPurify.removed = [];\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          if (dirty.nodeName) {\n            var tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            body.appendChild(importedNode);\n          }\n        } else {\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n          body = _initDocument(dirty);\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n        var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n        while (currentNode = nodeIterator.nextNode()) {\n          if (currentNode.nodeType === 3 && currentNode === oldNode) {\n            continue;\n          }\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n          _sanitizeAttributes(currentNode);\n          oldNode = currentNode;\n        }\n        oldNode = null;\n        if (IN_PLACE) {\n          return dirty;\n        }\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot) {\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$1, ' ');\n          serializedHTML = stringReplace(serializedHTML, ERB_EXPR$1, ' ');\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n      DOMPurify.setConfig = function (cfg) {\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        var lcTag = transformCaseFunc(tag);\n        var lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    var sanitizeHtmlString = function (html) {\n      return purify().sanitize(html);\n    };\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    var defaultIconName = 'temporary-placeholder';\n    var defaultIcon = function (icons) {\n      return function () {\n        return get$e(icons, defaultIconName).getOr('!not found!');\n      };\n    };\n    var getIconName = function (name, icons) {\n      var lcName = name.toLowerCase();\n      if (global$e.isRtl()) {\n        var rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    var lookupIcon = function (name, icons) {\n      return get$e(icons, getIconName(name, icons));\n    };\n    var get$1 = function (name, iconProvider) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    var getOr = function (name, iconProvider, fallbackIcon) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    var needsRtlTransform = function (iconName) {\n      return global$e.isRtl() ? has$2(rtlTransform, iconName) : false;\n    };\n    var addFocusableBehaviour = function () {\n      return config('add-focusable', [runOnAttached(function (comp) {\n          child(comp.element, 'svg').each(function (svg) {\n            return set$8(svg, 'focusable', 'false');\n          });\n        })]);\n    };\n    var renderIcon$2 = function (spec, iconName, icons, fallbackIcon) {\n      var _a, _b;\n      var rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      var iconHtml = get$e(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1(__spreadArray(__spreadArray([], (_b = spec.behaviours) !== null && _b !== void 0 ? _b : [], true), [addFocusableBehaviour()], false))\n      };\n    };\n    var render$3 = function (iconName, spec, iconProvider, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      return renderIcon$2(spec, iconName, iconProvider(), fallbackIcon);\n    };\n    var renderFirst = function (iconNames, spec, iconProvider) {\n      var icons = iconProvider();\n      var iconName = find$5(iconNames, function (name) {\n        return has$2(icons, getIconName(name, icons));\n      });\n      return renderIcon$2(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$k = function (detail) {\n      var memBannerText = record({\n        dom: fromHtml('<p>' + sanitizeHtmlString(detail.translationProvider(detail.text)) + '</p>'),\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text$1(text)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      var notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      var components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single({\n      name: 'Notification',\n      factory: factory$k,\n      configFields: [\n        option('level'),\n        required$1('progress'),\n        required$1('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var sharedBackstage = extras.backstage.shared;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south;\n        case 'tc-tc':\n          return north;\n        case 'tc-bc':\n          return north$2;\n        case 'bc-tc':\n        default:\n          return south$2;\n        }\n      };\n      var reposition = function (notifications) {\n        if (notifications.length > 0) {\n          each$1(notifications, function (notification, index) {\n            if (index === 0) {\n              notification.moveRel(null, 'banner');\n            } else {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {}\n        }, sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$f.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        var getBounds = function () {\n          var contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n          var win$1 = win();\n          var x = clamp$1(win$1.x, contentArea.x, contentArea.right);\n          var y = clamp$1(win$1.y, contentArea.y, contentArea.bottom);\n          var right = Math.max(contentArea.right, win$1.right);\n          var bottom = Math.max(contentArea.bottom, win$1.bottom);\n          return Optional.some(bounds(x, y, right - x, bottom - y));\n        };\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, premade(notification), {\n              anchor: {\n                type: 'makeshift',\n                x: x,\n                y: y\n              }\n            });\n          },\n          moveRel: function (element, rel) {\n            var notificationSpec = premade(notification);\n            var anchorOverrides = { maxHeightFunction: expandable$1() };\n            if (rel !== 'banner' && isNonNullable(element)) {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            } else {\n              var anchor = __assign(__assign({}, sharedBackstage.anchors.banner()), { overrides: anchorOverrides });\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: anchor }, getBounds);\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains$2([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$d(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$2(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect = function (elm) {\n      return closest$1(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup$e = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup$e };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText(node)) {\n        return point(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup$2 = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter$2(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$c.all(map$2(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted('type', 'autocompleteitem'),\n      defaulted('active', false),\n      defaulted('disabled', false),\n      defaulted('meta', {}),\n      requiredString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      requiredString('type'),\n      requiredString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      requiredFunction('fetch'),\n      requiredFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted('type', 'contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionString('label'),\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted('type', 'contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each$1(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register$b = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, identity$1);\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter$2(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$e(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    var chunk = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk$1(items, numColumns);\n        return map$2(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity$1\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each$1(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      requiredString('type'),\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      requiredString('type'),\n      requiredString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$1 = valueThunk(function () {\n      return choose$2('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      requiredString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field$1('value', 'value', defaultedThunk(function () {\n        return generate$6('menuitem-value');\n      }), anyValue()),\n      defaulted('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('label'),\n      requiredArrayOf('items', itemSchema$1),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      requiredString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var baseFields = [\n      requiredString('type'),\n      requiredString('fancytype'),\n      defaultedFunction('onAction', noop)\n    ];\n    var insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    var colorSwatchFields = [defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        optionArrayOf('colors', anyValue())\n      ])].concat(baseFields);\n    var fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      requiredString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      requiredFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex$1(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$6('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$6('tooltip.exclusive');\n    var ShowTooltipEvent = generate$6('tooltip.show');\n    var HideTooltipEvent = generate$6('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$9 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run$1(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run$1(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run$1(highlight$1(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(dehighlight$1(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaulted('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted('anchor', function (comp) {\n        return {\n          type: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ]),\n            onRtl: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$b = function () {\n      var timer = value$1();\n      var popup = value$1();\n      var clearTimer = function () {\n        timer.on(clearTimeout);\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Tooltipping = create$8({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$a.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$b.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getContentLanguages = function (editor) {\n      return editor.getParam('content_langs', undefined, 'array');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range$2(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter$2(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedToolbarContainerTarget = function (editor) {\n      return editor.getParam('fixed_toolbar_container_target');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerTarget = function (editor) {\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      var selector = fixedContainerSelector(editor);\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      var element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerTarget(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var getStickyToolbarOffset = function (editor) {\n      return editor.getParam('toolbar_sticky_offset', 0, 'number');\n    };\n    var isDraggableModal$1 = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$1(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a$1;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute$1(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a$1 = {}, _a$1[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a$1);\n\n    var componentRenderPipeline = cat;\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$9.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map$2(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return global$9.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon$1 = function (name, icons, classes) {\n      if (classes === void 0) {\n        classes = [iconClass];\n      }\n      return render$3(name, {\n        tag: 'div',\n        classes: classes\n      }, icons);\n    };\n    var renderText = function (text) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text$1(global$e.translate(text))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text$1(global$e.translate(text))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return renderIcon$1('checkmark', icons, [checkmarkClass]);\n    };\n    var renderSubmenuCaret = function (icons) {\n      return renderIcon$1('chevron-right', icons, [caretClass]);\n    };\n    var renderDownwardsCaret = function (icons) {\n      return renderIcon$1('chevron-down', icons, [caretClass]);\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (item, providerBackstage, fallbackIcon) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var itemText = item.ariaLabel;\n      var itemValue = item.value;\n      var iconSvg = item.iconContent.map(function (name) {\n        return getOr(name, providerBackstage.icons, fallbackIcon);\n      });\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatches__picker-btn'], false),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatch--remove'], false),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$e.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ]\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      var iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      var renderIcon = function (iconName) {\n        return render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      };\n      var renderEmptyIcon = function () {\n        return Optional.some({ dom: iconSpec });\n      };\n      var leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$e(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                type: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable$1 }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external$2({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$b.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$e.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant$1({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render$2 = function (items, extras) {\n      return map$2(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render$2(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains$2(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each$1(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$f = generate$3(owner$2(), parts$h());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round$1 = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded$1 = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError$1 = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var hexToHsv = function (hex) {\n      return fromRgb(fromHex(hex));\n    };\n    var hsvToHex = function (hsv) {\n      return fromRgba(fromHsv(hsv));\n    };\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols$2 = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors$1 = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors$2 = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map$2(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var fallbackColor = '#000000';\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return Optional.from(color);\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors$2(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols$2(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, fallbackColor);\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch$1 = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = getCurrentColor(editor, format);\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch$1(getColors$2(editor), hasCustomColors$1(editor)),\n        onAction: function (_splitButtonApi) {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var isValid = false;\n        var onSubmit = function (api) {\n          var data = api.getData();\n          var hex = data.colorpicker;\n          if (isValid) {\n            callback(Optional.from(hex));\n            api.close();\n          } else {\n            editor.windowManager.alert(editor.translate([\n              'Invalid hex color code: {0}',\n              hex\n            ]));\n          }\n        };\n        var onAction = function (_api, details) {\n          if (details.name === 'hex-valid') {\n            isValid = details.value;\n          }\n        };\n        var initialData = { colorpicker: value };\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: onSubmit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$a = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(fallbackColor);\n      var lastBackColor = Cell(fallbackColor);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map$2(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColorItems(spec, backstage);\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    var getColorItems = function (spec, backstage) {\n      var useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(function () {\n        return getColors$1(backstage.colorinput.getColors(), useCustomColors);\n      }, function (colors) {\n        return colors.concat(getAdditionalColors(useCustomColors));\n      });\n    };\n\n    var cellOverEvent = generate$6('cell-over');\n    var cellExecuteEvent = generate$6('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind$3(cells, function (cellRow) {\n        return map$2(cellRow, premade);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text$1(col + 'x' + row);\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$6('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var emptyLabelText = makeLabelText(0, 0);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(function (c) {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return get$e(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator$3 = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator$3(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator$3(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map$2(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom$2();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$9 = function (editor, sharedBackstage) {\n      var activeAutocompleter = value$1();\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run$1(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.clear();\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register$b(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind$3(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          });\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')), {\n          anchor: {\n            type: 'node',\n            root: SugarElement.fromDom(editor.getBody()),\n            node: Optional.from(ac.element)\n          }\n        });\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup$2(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$9 };\n\n    var closest = function (scope, selector, isRoot) {\n      return closest$1(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = value$1();\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$e(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$2(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$1().browser.isFirefox();\n    };\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'focus', handler);\n      } else {\n        return bind(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'blur', handler);\n      } else {\n        return bind(container, 'focusout', handler);\n      }\n    };\n    var setup$d = function (container, rawSettings) {\n      var settings = __assign({ stopBackspace: true }, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = value$1();\n      var onPaste = bind(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      var onKeydown = bind(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = value$1();\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      var unbind = function () {\n        each$1(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive = function (rawEvent, rawTarget) {\n      var source = get$e(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).bind(function (id) {\n          return get$e(handlers, id);\n        }).map(function (descHandler) {\n          return eventHandler(elem, descHandler);\n        });\n      };\n      var filterByType = function (type) {\n        return get$e(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return get$e(registry, type).bind(function (handlers) {\n          return closest$4(target, function (elem) {\n            return findHandler(handlers, elem);\n          }, isAboveRoot);\n        });\n      };\n      var unregisterId = function (id) {\n        each(registry, function (handlersById, _eventName) {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).getOrThunk(function () {\n          return write('uid-', component.element);\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$e(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$j = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$2(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$d(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$3(target);\n          }, function (_alloyId) {\n            monitorEvent(focus$4(), target, function (logger) {\n              triggerHandler(lookup, focus$4(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText$1(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText$1(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach(root, component);\n      };\n      var remove = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each$1(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$l = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$e = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$i = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$6(detail.prefix);\n            ps.label().each(function (label) {\n              set$8(label.element, 'for', id);\n              set$8(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$6(detail.prefix);\n              set$8(descriptor.element, 'id', descriptorId);\n              set$8(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite({\n      name: 'FormField',\n      configFields: schema$l(),\n      partFields: parts$e(),\n      factory: factory$i,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$2 = function (base, tabConfig) {\n      return nu$7({\n        attributes: wrapAll([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$8({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel$2 = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$6('form-component-change');\n    var formCloseEvent = generate$6('form-close');\n    var formCancelEvent = generate$6('form-cancel');\n    var formActionEvent = generate$6('form-action');\n    var formSubmitEvent = generate$6('form-submit');\n    var formBlockEvent = generate$6('form-block');\n    var formUnblockEvent = generate$6('form-unblock');\n    var formTabChangeEvent = generate$6('form-tabchange');\n    var formResizeEvent = generate$6('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$1(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$d(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map$2(items, function (item) {\n          var itemText = global$e.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$7.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        var html = map$2(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set$5(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run$1(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(function (comp) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n        })),\n        runOnExecute$1(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity$1 },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$8(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$k = constant$1([\n      option('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$5(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$5(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element);\n              if (current !== data) {\n                set$4(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$h = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single({\n      name: 'Input',\n      configFields: schema$k(),\n      factory: factory$h\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module));\n    var Promise$1 = module.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$1(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$5 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$5(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$5(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$5(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$5(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$2 = function (baseFn) {\n      return make$5(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make$5(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$2,\n      pure: pure\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name = name$2(elem);\n      return contains$2(ariaElements, name);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    var events$8 = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive$2([run$1(validatorInfo.onEvent, function (component) {\n            run(component, invalidConfig, invalidState).get(identity$1);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$8({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    var init$a = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$e(coupled, name).getOrThunk(function () {\n            var builder = get$e(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Coupling = create$8({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant$1('sink');\n    var partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var type = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$5(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, menu, { anchor: anchor });\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, submenu, {\n                anchor: {\n                  type: 'submenu',\n                  item: item\n                }\n              });\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, primaryMenu, { anchor: anchor });\n              each$1(submenuTriggers, function (st) {\n                Positioning.position(sink, st.triggeredMenu, {\n                  anchor: {\n                    type: 'submenu',\n                    item: st.triggeringItem\n                  }\n                });\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$a(hotspot.element);\n      if (useMinWidth) {\n        set$7(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$6(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox$1 = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel$1({ isExtraPart: never })), receivingChannel({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$j = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$d = constant$1([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$g = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$g,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$1 = function () {\n      return nu$7({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$7 = function () {\n      return derive$2([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    var Unselecting = create$8({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$6('color-input-change');\n    var colorSwatchChangeEvent = generate$6('color-swatch-change');\n    var colorPickerCancelEvent = generate$6('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$7(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$2,\n              southeast$2,\n              south$2\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$2,\n              southwest$2,\n              south$2\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$7(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive$2([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [customField('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant$1(_sliderChangeEvent);\n    var isTouchEvent$2 = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange$3 = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue$2 = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$2(xValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(min));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(max));\n    };\n    var moveBy$2 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$2(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$a(thumb.element) / 2;\n      set$7(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1);\n    var onRight$2 = handleMovement$2(1);\n    var onUp$2 = Optional.none;\n    var onDown$2 = Optional.none;\n    var edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      var yValue = findValueOfOffset(spectrum, detail, value.top);\n      var val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    var moveBy = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var setToMax = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$a(thumb.element) / 2;\n      var thumbYRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$7(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft = handleMovement(-1, false);\n    var onRight = handleMovement(1, false);\n    var onUp = handleMovement(-1, true);\n    var onDown = handleMovement(1, true);\n    var edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch$2 = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var setValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      var changeValue = function (slider, newValue) {\n        setValue(slider, newValue);\n        var thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), onDragStart),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          setValue: setValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: function (apis, slider, value) {\n          apis.setValue(slider, value);\n        },\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var fieldsUpdate = generate$6('rgb-hex-update');\n    var sliderUpdate = generate$6('slider-update');\n    var paletteUpdate = generate$6('palette-update');\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$1 = 'form';\n    var schema$i = [field('formBehaviours', [Representing])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field: field,\n          record: constant$1(record)\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    var toResult = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$6('valid-input');\n    var invalidInput = generate$6('invalid-input');\n    var validatingInput = generate$6('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$7(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex: hex });\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run$1(validInput, onValidInput),\n                run$1(invalidInput, onInvalidInput),\n                run$1(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setPaletteHue = function (slider, hue) {\n        var canvas = slider.components()[0].element.dom;\n        var hsv = hsvColour(hue, 100, 100);\n        var rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      var setPaletteThumb = function (slider, hex) {\n        var hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: function (_apis, slider, hue) {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: function (_apis, slider, hex) {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var hueSliderToDegrees = function (hue) {\n          return (100 - hue) / 100 * 360;\n        };\n        var hueDegreesToSlider = function (hue) {\n          return 100 - hue / 360 * 100;\n        };\n        var state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        var memSlider = record(sliderFactory(translate, getClass));\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, _hex, hue) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var updateSlider = function (anyInSystem, _hex, hue) {\n          memSlider.getOpt(anyInSystem).each(function (slider) {\n            Slider.setValue(slider, { y: hueDegreesToSlider(hue) });\n          });\n        };\n        var updatePaletteThumb = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        var updateState = function (hex, hue) {\n          var rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        var runUpdates = function (anyInSystem, hex, hue, updates) {\n          updateState(hex, hue);\n          each$1(updates, function (update) {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        var onPaletteUpdate = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldHue = state.paletteHue.get();\n            var newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        var onSliderUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var hue = hueSliderToDegrees(simulatedEvent.event.value.y);\n            var oldRgb = state.paletteRgba.get();\n            var oldHsv = fromRgb(oldRgb);\n            var newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        var onFieldsUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return function (form, simulatedEvent) {\n            var hex = simulatedEvent.event.hex;\n            var hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento$1 = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child$2(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento$1,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return has$2(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = value$1();\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = value$1();\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$6.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.on(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(value);\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted('preprocess', identity$1),\n      defaulted('postprocess', identity$1)\n    ]);\n    var memento = function (mem, rawProcessors) {\n      var ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$4);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$7, set$5);\n    };\n    var memory = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$5.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each$1(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run$1('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragover', stopper),\n              run$1('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run$1(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$6('alloy-fake-before-tabstop');\n    var afterObject = generate$6('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$1().browser.isIE() || detect$1().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$8(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$8(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$3 = function (width, height) {\n      return resize$3(document.createElement('canvas'), width, height);\n    };\n    var clone = function (canvas) {\n      var tCanvas = create$3(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize$3 = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth$1 = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight$1 = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$3(getWidth$1(image), getHeight$1(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$2 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant$1(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant$1(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$2(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$2(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert$1 = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness$1 = complexAdjustableColorFilter(adjustBrightness);\n    var contrast$1 = complexAdjustableColorFilter(adjustContrast);\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen$1 = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma$1 = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth$1(image);\n      var sH = getHeight$1(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth$1(image);\n        var sH = getHeight$1(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$3(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var ceilWithPrecision = function (num, precision) {\n      if (precision === void 0) {\n        precision = 2;\n      }\n      var mul = Math.pow(10, precision);\n      var upper = Math.round(num * mul);\n      return Math.ceil(upper / mul);\n    };\n    var rotate$1 = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var degrees = angle < 0 ? 360 + angle : angle;\n      var rad = degrees * Math.PI / 180;\n      var width = image.width;\n      var height = image.height;\n      var sin = Math.sin(rad);\n      var cos = Math.cos(rad);\n      var newWidth = ceilWithPrecision(Math.abs(width * cos) + Math.abs(height * sin));\n      var newHeight = ceilWithPrecision(Math.abs(width * sin) + Math.abs(height * cos));\n      var canvas = create$3(newWidth, newHeight);\n      var context = get2dContext(canvas);\n      context.translate(newWidth / 2, newHeight / 2);\n      context.rotate(rad);\n      context.drawImage(image, -width / 2, -height / 2);\n      return fromCanvas(canvas, type);\n    };\n    var flip$1 = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$3(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$3(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$2 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert = function (ir) {\n      return invert$1(ir);\n    };\n    var sharpen = function (ir) {\n      return sharpen$1(ir);\n    };\n    var gamma = function (ir, value) {\n      return gamma$1(ir, value);\n    };\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorize$1(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness = function (ir, adjust) {\n      return brightness$1(ir, adjust);\n    };\n    var contrast = function (ir, adjust) {\n      return contrast$1(ir, adjust);\n    };\n    var flip = function (ir, axis) {\n      return flip$1(ir, axis);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return crop$1(ir, x, y, w, h);\n    };\n    var resize$1 = function (ir, w, h) {\n      return resize$2(ir, w, h);\n    };\n    var rotate = function (ir, angle) {\n      return rotate$1(ir, angle);\n    };\n\n    var renderIcon = function (iconName, iconsProvider, behaviours) {\n      return render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-tbtn__icon-wrap'\n        ],\n        behaviours: behaviours\n      }, iconsProvider);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, []);\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, [Replacing.config({})]);\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a;\n    var internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute$1(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a = {}, _a[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a);\n\n    var updateMenuText = generate$6('update-menu-text');\n    var updateMenuIcon = generate$6('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [prefix + '__select-chevron']\n      }, sharedBackstage.providers.icons);\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map$2(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArray(__spreadArray([], spec.dropdownBehaviours, true), [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text$1(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ], false)),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator$1 = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has$2(item, 'getSubmenuItems');\n    };\n    var separator$2 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$1(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$1(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator$1(item)) {\n        return item;\n      } else {\n        var itemValue = get$e(item, 'value').getOrThunk(function () {\n          return generate$6('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$6('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$8(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-tbtn--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$3(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map$2(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], !spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], true), icon.isSome() ? ['tox-button--icon'] : [], true), spec.borderless ? ['tox-button--naked'] : [], true), extraClasses, true);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$f = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$f,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return has$2(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$6('ratio-event');\n      var makeIcon = function (iconName) {\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-lock-icon__' + iconName\n          ]\n        }, providersBackstage.icons);\n      };\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run$1(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run$1(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant$1(generate$6('undo'));\n    var redo = constant$1(generate$6('redo'));\n    var zoom = constant$1(generate$6('zoom'));\n    var back = constant$1(generate$6('back'));\n    var apply = constant$1(generate$6('apply'));\n    var swap = constant$1(generate$6('swap'));\n    var transform$1 = constant$1(generate$6('transform'));\n    var tempTransform = constant$1(generate$6('temp-transform'));\n    var transformApply = constant$1(generate$6('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform$1,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant$1('save-state');\n    var disable = constant$1('disable');\n    var enable = constant$1('enable');\n    var external = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable,\n      enable: enable\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$1(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip, 'h');\n      var verticalFlip = makeValueTransform(flip, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate, -90);\n      var clockwiseRotate = makeValueTransform(rotate, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant$1({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run$1(external.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run$1(external.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen);\n      var invertTransform = Optional.some(invert);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var isTouchEvent$1 = function (e) {\n      return isNonNullable(e.changedTouches);\n    };\n    var updateWithTouchData = function (e) {\n      if (isTouchEvent$1(e)) {\n        var keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (var i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var _a, _b, _c;\n      var eventOverlay;\n      var handleEvents = [];\n      var overlayEvents = [];\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var root = (_b = settings.root) !== null && _b !== void 0 ? _b : doc;\n      var sugarDoc = SugarElement.fromDom(doc);\n      var downButton;\n      var startX;\n      var startY;\n      var handleElement = SugarElement.fromDom(root.getElementById((_c = settings.handle) !== null && _c !== void 0 ? _c : id));\n      var start = function (e) {\n        var rawEvent = e.raw;\n        var docSize = getDocumentSize(doc);\n        updateWithTouchData(rawEvent);\n        e.prevent();\n        downButton = rawEvent.button;\n        startX = rawEvent.screenX;\n        startY = rawEvent.screenY;\n        var cursor = get$c(handleElement, 'cursor');\n        eventOverlay = SugarElement.fromTag('div', doc);\n        setAll(eventOverlay, {\n          'position': 'absolute',\n          'top': '0',\n          'left': '0',\n          'width': docSize.width + 'px',\n          'height': docSize.height + 'px',\n          'z-index': 2147483647 + '',\n          'opacity': '0.0001',\n          cursor: cursor\n        });\n        append$2(getBody(sugarDoc), eventOverlay);\n        overlayEvents.push(bind(sugarDoc, 'mousemove', drag), bind(sugarDoc, 'touchmove', drag), bind(sugarDoc, 'mouseup', stop), bind(sugarDoc, 'touchend', stop));\n        settings.start(rawEvent);\n      };\n      var drag = function (e) {\n        var rawEvent = e.raw;\n        updateWithTouchData(rawEvent);\n        if (rawEvent.button !== downButton) {\n          return stop(e);\n        }\n        rawEvent.deltaX = rawEvent.screenX - startX;\n        rawEvent.deltaY = rawEvent.screenY - startY;\n        e.prevent();\n        settings.drag(rawEvent);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e.raw);\n        each$1(overlayEvents, function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        remove$5(eventOverlay);\n        if (settings.stop) {\n          settings.stop(e.raw);\n        }\n      };\n      var destroy = function () {\n        each$1(overlayEvents.concat(handleEvents), function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        handleEvents = [];\n        if (isNonNullable(eventOverlay)) {\n          remove$5(eventOverlay);\n        }\n      };\n      handleEvents.push(bind(handleElement, 'mousedown', start), bind(handleElement, 'touchstart', start));\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$1 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var events = [];\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var container = SugarElement.fromDom(containerElm);\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x = startRect.x + deltaX * handle.deltaX;\n        var y = startRect.y + deltaY * handle.deltaY;\n        var w = Math.max(20, startRect.w + deltaX * handle.deltaW);\n        var h = Math.max(20, startRect.h + deltaY * handle.deltaH);\n        var rect = currentRect = global$4.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            root: getRootNode(container).dom,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        var cropContainer = SugarElement.fromTag('div');\n        setAll$1(cropContainer, {\n          id: id,\n          'class': prefix + 'croprect-container',\n          'role': 'grid',\n          'aria-dropeffect': 'execute'\n        });\n        append$2(container, cropContainer);\n        each$1(blockers, function (blocker) {\n          descendant(container, '#' + id).each(function (blockerElm) {\n            var cropBlocker = SugarElement.fromTag('div');\n            setAll$1(cropBlocker, {\n              'id': id + '-' + blocker,\n              'class': prefix + 'croprect-block',\n              'data-mce-bogus': 'all'\n            });\n            set$7(cropBlocker, 'display', 'none');\n            append$2(blockerElm, cropBlocker);\n          });\n        });\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id).each(function (handleElm) {\n            var cropHandle = SugarElement.fromTag('div');\n            setAll$1(cropHandle, {\n              'id': id + '-' + handle.name,\n              'aria-label': handle.label,\n              'aria-grabbed': 'false',\n              'data-mce-bogus': 'all',\n              'role': 'gridcell',\n              'tabindex': '-1',\n              'title': handle.label\n            });\n            add$1(cropHandle, [\n              prefix + 'croprect-handle',\n              prefix + 'croprect-handle-' + handle.name\n            ]);\n            set$7(cropHandle, 'display', 'none');\n            append$2(handleElm, cropHandle);\n          });\n        });\n        dragHelpers = map$2(handles, createDragHelper);\n        repaint(currentRect);\n        var handleFocus = function (e) {\n          set$8(e.target, 'aria-grabbed', e.raw.type === 'focus' ? 'true' : 'false');\n        };\n        var handleKeydown = function (e) {\n          var activeHandle;\n          each$1(handles, function (handle) {\n            if (get$d(e.target, 'id') === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.raw.keyCode) {\n          case global$2.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$2.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$2.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$2.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$2.ENTER:\n          case global$2.SPACEBAR:\n            e.prevent();\n            action();\n            break;\n          }\n        };\n        events.push(bind(container, 'focusin', handleFocus), bind(container, 'focusout', handleFocus), bind(container, 'keydown', handleKeydown));\n      };\n      var toggleVisibility = function (state) {\n        var selectors = __spreadArray(__spreadArray([], map$2(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }), true), map$2(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        }), true).join(',');\n        var elems = descendants(container, selectors);\n        if (state) {\n          each$1(elems, function (elm) {\n            return remove$6(elm, 'display');\n          });\n        } else {\n          each$1(elems, function (elm) {\n            return set$7(elm, 'display', 'none');\n          });\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, newRect) {\n          descendant(container, '#' + id + '-' + name).each(function (elm) {\n            setAll(elm, {\n              left: newRect.x + 'px',\n              top: newRect.y + 'px',\n              width: Math.max(0, newRect.w) + 'px',\n              height: Math.max(0, newRect.h) + 'px'\n            });\n          });\n        };\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id + '-' + handle.name).each(function (elm) {\n            setAll(elm, {\n              left: rect.w * handle.xMul + rect.x + 'px',\n              top: rect.h * handle.yMul + rect.y + 'px'\n            });\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        each$1(dragHelpers, function (helper) {\n          return helper.destroy();\n        });\n        dragHelpers = [];\n        each$1(events, function (e) {\n          return e.unbind();\n        });\n        events = [];\n      };\n      render();\n      var instance = __assign(__assign({}, global$3), {\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      });\n      return instance;\n    };\n    var CropRect = { create: create$1 };\n\n    var loadImage = function (image) {\n      return new global$c(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = api$1();\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll(bg.element, css);\n          });\n          cropRect.run(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$8(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          if (anyInSystem.getSystem().isConnected()) {\n            memContainer.getOpt(anyInSystem).map(function (panel) {\n              var aImg = external$2({ element: img });\n              Replacing.replaceAt(panel, 1, Optional.some(aImg));\n              var lastViewRect = viewRectState.get();\n              var viewRect = {\n                x: 0,\n                y: 0,\n                w: img.dom.naturalWidth,\n                h: img.dom.naturalHeight\n              };\n              viewRectState.set(viewRect);\n              var rect = global$4.inflate(viewRect, -20, -20);\n              rectState.set(rect);\n              if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n                zoomFit(panel, img);\n              }\n              repaintImg(panel, img);\n            });\n          }\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [\n                runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(cRect);\n                  });\n                }),\n                runOnDetached(function () {\n                  cropRect.clear();\n                })\n              ])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = value$1();\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().getOrThunk(blobState.get);\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(newTempState);\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$5.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.on(destroyState);\n        tempState.clear();\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(newState);\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url);\n        }).then(function () {\n          updateButtonUndoStates(anyInSystem);\n          swap();\n          unblock(anyInSystem);\n        }).catch(function (err) {\n          console.log(err);\n          if (anyInSystem.getSystem().isConnected()) {\n            unblock(anyInSystem);\n          }\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run$1(internal.undo(), undo),\n            run$1(internal.redo(), redo),\n            run$1(internal.zoom(), zoom),\n            run$1(internal.back(), back),\n            run$1(internal.apply(), apply),\n            run$1(internal.transform(), transform),\n            run$1(internal.tempTransform(), tempTransform),\n            run$1(internal.transformApply(), transformApply),\n            run$1(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has$2(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map$2(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant$1(noop),\n              getApi: constant$1({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$d(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$8(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map$2(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$e = function (detail, _spec) {\n      var options = map$2(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find$5(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$4(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$e\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map$2(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map$2(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map$2(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map$2(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant$1({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant$1({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$6 = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run$1(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$6\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$9 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$9\n    });\n\n    var setup$c = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$8({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$5(el);\n      var node = el.dom;\n      if (get$d(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    var make$3 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind$3(menus, function (menu) {\n              return filter$2(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map$2(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$4(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute$1(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run$1(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$g = constant$1([\n      option('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$k()).concat(sandboxFields()));\n    var parts$b = constant$1([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    var wrap = function (delegate) {\n      var toCached = function () {\n        return wrap(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$1 = function (worker) {\n      return wrap(Future.nu(worker));\n    };\n    var value = function (value) {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    var error = function (error) {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    var fromResult = function (result) {\n      return wrap(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$1(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$1,\n      wrap: wrap,\n      pure: value,\n      value: value,\n      error: error,\n      fromResult: fromResult,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$1 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map$2(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter$2(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map$2(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$6('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$8(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run$1(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run$1(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run$1(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return render$3(icon, {\n          tag: 'div',\n          classes: [\n            'tox-icon',\n            'tox-control-wrap__status-icon-' + name\n          ],\n          attributes: __assign({\n            'title': providersBackstage.translate(label),\n            'aria-live': 'polite'\n          }, errId.fold(function () {\n            return {};\n          }, function (id) {\n            return { id: id };\n          }))\n        }, providersBackstage.icons);\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$6('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$1(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                },\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity$1 },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$2 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$e(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$2(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$2(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$2(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$2(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$2(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$2(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$2(function (spec, backstage) {\n        return renderLabel(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$2(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$2(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$2(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$2(renderColorPicker),\n      dropzone: make$2(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$2(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$2(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$2(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$2(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$2(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2(renderHtmlPanel),\n      imagetools: make$2(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$2(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$2(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$e(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubbleSize = 12;\n      var overrides = { maxHeightFunction: expandable$1() };\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [northeast];\n            },\n            onLtr: function () {\n              return [northwest];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [southeast$2];\n            },\n            onLtr: function () {\n              return [southwest$2];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north];\n            },\n            onLtr: function () {\n              return [north];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$2];\n            },\n            onLtr: function () {\n              return [south$2];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          type: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor$1 = function (bodyElement) {\n      return function (element) {\n        return {\n          type: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors = function (editor) {\n      return function () {\n        return hasCustomColors$1(editor);\n      };\n    };\n    var getColors = function (editor) {\n      return function () {\n        return getColors$2(editor);\n      };\n    };\n    var getColorCols = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors(editor),\n        getColors: getColors(editor),\n        getColorCols: getColorCols(editor)\n      };\n    };\n\n    var isDraggableModal = function (editor) {\n      return function () {\n        return isDraggableModal$1(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has$2(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has$2(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has$2(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has$2(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each$1(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$8 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$6(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map$2(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), { getStyleItems: constant$1(newItems) });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains$2(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$8 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind$3(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$8(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind$3(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$8(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind$3(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim = global$5.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map$2(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$4(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$8.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$8.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return get$e(history, fileType).getOr([]);\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = get$e(history, fileType).getOr([]);\n      var itemsWithoutUrl = filter$2(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$5.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$7 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$e.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$8(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var setup$b = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var doc = getDocument();\n      var onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      var onTouchmove = bind(doc, 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind(doc, 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      var onMouseup = bind(doc, 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onContentMousedown = function () {\n        each$1(editor.editorManager.get(), function (loopEditor) {\n          if (editor !== loopEditor) {\n            loopEditor.fire('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      var onDismissPopups = function (event) {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$a = AlloyParts;\n    var partType = PartType;\n\n    var schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$9 = constant$1([itemsPart]);\n    var name = constant$1('CustomList');\n\n    var factory$d = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each$1(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each$1(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$d,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$c = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var setup$a = noop;\n    var isDocked$2 = never;\n    var getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append$2(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute$3).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPos().map(function (pos) {\n        return bounds(pos.bounds.x, pos.bounds.y, get$a(elem), get$b(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$c(elem, 'position') || 'static',\n        bounds: box\n      });\n    };\n    var revertToOriginal = function (elem, box, state) {\n      return state.getInitialPos().bind(function (position) {\n        state.clearInitialPos();\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box$1).getOrThunk(function () {\n            return box$1(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$e(position.style, 'left').map(function (_left) {\n            return box.x - offsetBox_1.x;\n          }), get$e(position.style, 'top').map(function (_top) {\n            return box.y - offsetBox_1.y;\n          }), get$e(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box.right;\n          }), get$e(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box = box$1(elem);\n      if (!isVisibleForModes(state.getModes(), box, viewport)) {\n        storePrior(elem, box, state);\n        var winBox = win();\n        var left = box.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config, state) {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, state, position) {\n      var isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      var method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, state, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$5 = function (dockInfo, dockState) {\n      return derive$2([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has(component.element, contextInfo.transitionClass)) {\n              remove$1(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run$1(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run$1(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$6 = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = value$1();\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$6\n    });\n\n    var Docking = create$8({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner$4(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$2(markerElement);\n      var markerHeight = get$b(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute$3(containerHeader);\n      var editorHeaderHeight = get$b(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains$2(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$2(elm) + (parseInt(get$c(elm, 'margin-top'), 10) || 0) + (parseInt(get$c(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$a(parentElem);\n          set$7(elm, 'width', parentWidth + 'px');\n          set$7(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner$4(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm);\n      }).each(function () {\n        return focus$3(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$9 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours = function (editor, sharedBackstage) {\n      var focusedElm = value$1();\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArray([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$2(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box = box$1(SugarElement.fromDom(container));\n              var boxHeight = box.height - headerHeight;\n              var topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds(box.x, topBound, box.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: function (comp) {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          lazyViewport: function (comp) {\n            var win$1 = win();\n            var offset = getStickyToolbarOffset(editor);\n            var top = win$1.y + (isDockedMode(comp, 'top') ? offset : 0);\n            var height = win$1.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n            return bounds(win$1.x, top, win$1.width, height);\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours, true);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredOf('items', oneOf([\n        arrOfObj([\n          requiredString('name'),\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArray([requiredString('type')], baseMenuButtonFields, true));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      requiredString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted('columns', 1),\n      requiredFunction('onAction'),\n      requiredFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var factory$b = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map$2(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), function (comp, se) {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$b,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$7(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$7(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$3 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$4 = function (slideConfig, slideState) {\n      return derive$2([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$4\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', function (elem) {\n            return get$a(elem) + 'px';\n          })\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', function (elem) {\n            return get$b(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$5 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$8({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Sliding = create$8({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var owner = 'container';\n    var schema$d = [field('slotBehaviours', [])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot: slot,\n          record: constant$1(record)\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    var make$1 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each$1(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$d(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$7(element, 'display', 'none');\n          set$8(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$8 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each$1(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map$2(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find$5(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find$5(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$6('FixSizeEvent');\n    var autoSize = generate$6('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$a(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run$1(fixSize, function (comp, se) {\n              set$7(comp.element, 'width', se.event.width);\n            }),\n            run$1(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var block = function (component, config, state, getBusySpec) {\n      set$8(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$4 = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Blocking = create$8({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var getBusySpec$1 = function (providerBackstage) {\n      return function (_root, _behaviours) {\n        return {\n          dom: {\n            tag: 'div',\n            attributes: {\n              'aria-label': providerBackstage.translate('Loading...'),\n              'tabindex': '0'\n            },\n            classes: ['tox-throbber__busy-spinner']\n          },\n          components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n        };\n      };\n    };\n    var focusBusyComponent = function (throbber) {\n      return Composing.getCurrent(throbber).each(function (comp) {\n        return focus$3(comp.element);\n      });\n    };\n    var toggleEditorTabIndex = function (editor, state) {\n      var tabIndexAttr = 'tabindex';\n      var dataTabIndexAttr = 'data-mce-' + tabIndexAttr;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(function (iframe) {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(function (tabIndex) {\n            return set$8(iframe, dataTabIndexAttr, tabIndex);\n          });\n          set$8(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(function (tabIndex) {\n            set$8(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    var toggleThrobber = function (editor, comp, state, providerBackstage) {\n      var element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        var throbberFocus = Composing.getCurrent(comp).exists(function (busyComp) {\n          return hasFocus(busyComp.element);\n        });\n        Blocking.unblock(comp);\n        set$7(element, 'display', 'none');\n        set$8(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Blocking.config({ focus: false }),\n          Composing.config({\n            find: function (comp) {\n              return head(comp.components());\n            }\n          })\n        ]),\n        components: []\n      };\n    };\n    var isFocusEvent = function (event) {\n      return event.type === 'focusin';\n    };\n    var isPasteBinTarget = function (event) {\n      if (isFocusEvent(event)) {\n        var node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$2).exists(function (targetElm) {\n          return has(targetElm, 'mce-pastebin');\n        });\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = value$1();\n      var stealFocus = function (e) {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', function () {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', function (e) {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.on(global$f.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$f.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    var generate$1 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant$1(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$1(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter$2(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map$2(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups$1 = function (toolbar, storedGroups) {\n      var bGroups = map$2(storedGroups, function (g) {\n        return premade(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh$2 = function (toolbar, detail, setOverflow) {\n      var builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$7(primary.element, 'visibility', 'hidden');\n      var groups = builtGroups.concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      var availableWidth = get$a(primary.element);\n      var overflows = partition(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$a(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$c()));\n    var parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var expandable = constant$1(function (element, available) {\n      setMax(element, Math.floor(available));\n    });\n\n    var schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y()\n    ]);\n    var parts$6 = constant$1([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts: layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    var setGroups = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    var parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$9\n    });\n\n    var buildGroups = function (comps) {\n      return map$2(comps, function (g) {\n        return premade(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh$2(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$8 = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$2,\n              southeast$2\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$2,\n              southwest$2\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$2,\n              northeast$2\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$2,\n              northwest$2\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$8,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    var parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh$2(toolbar, detail, function (groups) {\n          var builtGroups = map$2(groups, function (g) {\n            return premade(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$7 = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$7,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$2(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$2(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var factory$6 = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$a.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$6('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    var partToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    var partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    var partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    var partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    var partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map$2(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map$2(ts, function (g) {\n            return map$2(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind$3(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter$2(menubar, function (menuName) {\n        var isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$e(registry.menus, menuName).exists(function (menu) {\n            return has$2(menu, 'items');\n          });\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      var menus = map$2(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError = function (editor, err) {\n      return function () {\n        return fireSkinLoadError$1(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$c(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$b.DOM.styleSheetLoader);\n      } else {\n        return global$c.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$c.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          boundCallback.clear();\n        };\n      };\n    };\n    var onSetupEvent = function (editor, event, f) {\n      return function (api) {\n        var handleEvent = function () {\n          return f(api);\n        };\n        var init = function () {\n          f(api);\n          editor.on(event, handleEvent);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          editor.off(event, handleEvent);\n        };\n      };\n    };\n    var onActionToggleFormat$1 = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n    var onActionExecCommand = function (editor, command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind$3(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind$3(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map$2(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return { getComponent: constant$1(comp) };\n      };\n      var onSetup = onSetupEvent(editor, 'NodeChange', function (api) {\n        var comp = api.getComponent();\n        spec.updateText(comp);\n      });\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map$2(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec$4 = function (editor) {\n      var getMatchingValue = function () {\n        return find$5(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return Optional.none;\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(constant$1('left'), function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find$5(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuIcon,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$4(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$3 = function (editor) {\n      var systemFont = 'System Font';\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find$5(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          return someIf(isSystemFontStack(font), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(constant$1(font), function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$e(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$e(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find$5(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant$1(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(constant$1(size), function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        text: Optional.some('12pt'),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map$2(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find$5(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$1 = function (editor) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec = function (editor, dataset) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind$3(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      return {\n        tooltip: 'Formats',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var events$3 = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map$2(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive$2([\n        run$1(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var getState = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$3 = function () {\n      var cell = Cell(Optional.none());\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var readState = function () {\n        return cell.get().getOr('none');\n      };\n      return {\n        readState: readState,\n        get: cell.get,\n        set: cell.set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$3\n    });\n\n    var Reflecting = create$8({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$5 = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$6('aria');\n            set$8(descriptor.element, 'id', descriptorId);\n            set$8(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$a(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$6('focus-button');\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(iconName, providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run$1(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(iconName, providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$6('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$8(comp.element, 'aria-pressed', state);\n            descendant(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$1('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$e(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map$2(defaultToolbar, function (group) {\n        var items = filter$2(group.items, function (subItem) {\n          return has$2(buttons, subItem) || has$2(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter$2(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has$2(t, 'name') && has$2(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$e(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$e(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$e(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map$2(toolbarGroups, function (group) {\n        var items = bind$3(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter$2(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$1();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents$1 = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$7(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents$1(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$b.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(constant$1(0), function (tbar) {\n          return tbar.components().length > 1 ? get$b(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$b(container.element) - offset;\n          var targetBounds = box$1(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$b(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$8(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$c(body(), 'margin-left')).getOr(0);\n          return get$a(body()) - absolute$3(targetElm).left + bodyMargin;\n        });\n        set$7(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box$1(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$b(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$7(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$7(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$7(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$f.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute = function (memInput, original) {\n      return run$1(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var generateOne = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate = function (memInput, buttons, providersBackstage) {\n      var mementos = map$2(buttons, function (button) {\n        return record(generateOne(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map$2(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$6('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var isVerticalOverlap = function (a, b, threshold) {\n      if (threshold === void 0) {\n        threshold = 0.01;\n      }\n      return b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    };\n    var getRangeRect = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        var elm = isText$1(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$2).map(function (e) {\n          return e.dom.getBoundingClientRect();\n        }).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    var getSelectionBounds = function (editor) {\n      var rng = editor.selection.getRng();\n      var rect = getRangeRect(rng);\n      if (editor.inline) {\n        var scroll_1 = get$9();\n        return bounds(scroll_1.left + rect.left, scroll_1.top + rect.top, rect.width, rect.height);\n      } else {\n        var bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    var getAnchorElementBounds = function (editor, lastElement) {\n      return lastElement.filter(inBody).map(absolute$2).getOrThunk(function () {\n        return getSelectionBounds(editor);\n      });\n    };\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds, margin) {\n      var x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      var right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x: x,\n        width: right - x\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant(container, '.tox-editor-header').getOr(container);\n      var headerBox = box$1(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage, toolbarType, margin) {\n      if (margin === void 0) {\n        margin = 0;\n      }\n      var viewportBounds = getBounds$3(window);\n      var contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds, margin), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin), y = _b.y, bottom = _b.bottom;\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    var isEntireElementSelected = function (editor, elem) {\n      var rng = editor.selection.getRng();\n      var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    var preservePosition = function (elem, position, f) {\n      var currentPosition = getRaw(elem, 'position');\n      set$7(elem, 'position', position);\n      var result = f(elem);\n      currentPosition.each(function (pos) {\n        return set$7(elem, 'position', pos);\n      });\n      return result;\n    };\n    var shouldUseInsetLayouts = function (position) {\n      return position === 'node';\n    };\n    var determineInsetLayout = function (editor, contextbar, elem, data, bounds) {\n      var selectionBounds = getSelectionBounds(editor);\n      var isSameAnchorElement = data.lastElement().exists(function (prev) {\n        return eq(elem, prev);\n      });\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), function () {\n          var isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar));\n          return isOverlapping && !data.isReposition() ? flip$2 : preserve;\n        });\n      } else {\n        var yBounds = data.getMode() === 'fixed' ? bounds.y + get$9().top : bounds.y;\n        var contextbarHeight = get$b(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    var getAnchorSpec$2 = function (editor, mobile, data, position) {\n      var smartInsetLayout = function (elem) {\n        return function (anchor, element, bubbles, placee, bounds) {\n          var layout = determineInsetLayout(editor, placee, elem, data, bounds);\n          var newAnchor = __assign(__assign({}, anchor), {\n            y: bounds.y,\n            height: bounds.height\n          });\n          return __assign(__assign({}, layout(newAnchor, element, bubbles, placee, bounds)), { alwaysFit: true });\n        };\n      };\n      var getInsetLayouts = function (elem) {\n        return shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      };\n      var desktopAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northeast$2,\n            southeast$2,\n            northwest$2,\n            southwest$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northwest$2,\n            southwest$2,\n            northeast$2,\n            southeast$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      var mobileAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            south$2,\n            southeast$2,\n            southwest$2,\n            northeast$2,\n            northwest$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            south$2,\n            southwest$2,\n            southeast$2,\n            northwest$2,\n            northeast$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    var getAnchorLayout = function (editor, position, isTouch, data) {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$2];\n            },\n            onRtl: function () {\n              return [west$2];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter$2(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition$3(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter$2(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map$2(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find$5(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter$2(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, function (ancestorElem) {\n          if (isElement$2(ancestorElem)) {\n            var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n            var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars: toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each$1(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$6('forward-slide');\n    var backSlideEvent = generate$6('backward-slide');\n    var changeSlideEvent = generate$6('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$a(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$a(elem);\n              set$7(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$f.setTimeout(function () {\n                set$7(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, function (comp, _se) {\n              last$2(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last$2(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var transitionClass = 'tox-pop--transition';\n    var register$7 = function (editor, registryContextToolbars, sink, extras) {\n      var backstage = extras.backstage;\n      var sharedBackstage = backstage.shared;\n      var isTouch = detect$1().deviceType.isTouch;\n      var lastElement = value$1();\n      var lastTrigger = value$1();\n      var lastContextPosition = value$1();\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        var position = lastContextPosition.get().getOr('node');\n        var margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      var canLaunchToolbar = function () {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      var isSameLaunchElement = function (elem) {\n        return is$1(lift2(elem, lastElement.get(), eq), true);\n      };\n      var shouldContextToolbarHide = function () {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          var contextToolbarBounds = getBounds();\n          var anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds);\n        }\n      };\n      var close = function () {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        if (InlineView.isOpen(contextbar)) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$7(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextFormGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map$2(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        var anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: function () {\n            return is$1(lastTrigger.get(), 0);\n          },\n          getMode: function () {\n            return Positioning.getMode(sink);\n          }\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      var launchContext = function (toolbarApi, elem) {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var position = toolbarApi[0].position;\n        var anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor: anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, function () {\n          return Optional.some(getBounds());\n        });\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$7(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = last(function () {\n        if (!editor.hasFocus() || editor.removed) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          var scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, function (info) {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', function () {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, function (e) {\n          var scopes = getScopes();\n          get$e(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', function (_e) {\n          global$f.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    var register$6 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var registerController = function (editor, spec) {\n      var getMenuItems = function () {\n        var options = spec.getOptions(editor);\n        var initial = spec.getCurrent(editor).map(spec.hash);\n        var current = value$1();\n        return map$2(options, function (value) {\n          return {\n            type: 'togglemenuitem',\n            text: spec.display(value),\n            onSetup: function (api) {\n              var setActive = function (active) {\n                if (active) {\n                  current.on(function (oldApi) {\n                    return oldApi.setActive(false);\n                  });\n                  current.set(api);\n                }\n                api.setActive(active);\n              };\n              setActive(is$1(initial, spec.hash(value)));\n              var unbindWatcher = spec.watcher(editor, value, setActive);\n              return function () {\n                current.clear();\n                unbindWatcher();\n              };\n            },\n            onAction: function () {\n              return spec.setCurrent(editor, value);\n            }\n          };\n        });\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: function (callback) {\n          return callback(getMenuItems());\n        },\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    var lineHeightSpec = {\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: function (input) {\n        return normalise(input, [\n          'fixed',\n          'relative',\n          'empty'\n        ]).getOr(input);\n      },\n      display: identity$1,\n      watcher: function (editor, value, callback) {\n        return editor.formatter.formatChanged('lineheight', callback, false, { value: value }).unbind;\n      },\n      getCurrent: function (editor) {\n        return Optional.from(editor.queryCommandValue('LineHeight'));\n      },\n      setCurrent: function (editor, value) {\n        return editor.execCommand('LineHeight', false, value);\n      }\n    };\n    var languageSpec = function (editor) {\n      var settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(function (settings) {\n        return {\n          name: 'language',\n          text: 'Language',\n          icon: 'language',\n          getOptions: constant$1(settings),\n          hash: function (input) {\n            return isUndefined(input.customCode) ? input.code : input.code + '/' + input.customCode;\n          },\n          display: function (input) {\n            return input.title;\n          },\n          watcher: function (editor, value, callback) {\n            return editor.formatter.formatChanged('lang', callback, false, {\n              value: value.code,\n              customValue: value.customCode\n            }).unbind;\n          },\n          getCurrent: function (editor) {\n            var node = SugarElement.fromDom(editor.selection.getNode());\n            return closest$4(node, function (n) {\n              return Optional.some(n).filter(isElement$2).bind(function (ele) {\n                var codeOpt = getOpt(ele, 'lang');\n                return codeOpt.map(function (code) {\n                  var customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n                  return {\n                    code: code,\n                    customCode: customCode,\n                    title: ''\n                  };\n                });\n              });\n            });\n          },\n          setCurrent: function (editor, lang) {\n            return editor.execCommand('Lang', false, lang);\n          },\n          onToolbarSetup: function (api) {\n            var unbinder = unbindable();\n            api.setActive(editor.formatter.match('lang', {}, undefined, true));\n            unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n            return unbinder.clear;\n          }\n        };\n      });\n    };\n    var register$5 = function (editor) {\n      registerController(editor, lineHeightSpec);\n      languageSpec(editor).each(function (spec) {\n        return registerController(editor, spec);\n      });\n    };\n\n    var register$4 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var onSetupOutdentState = function (editor) {\n      return onSetupEvent(editor, 'NodeChange', function (api) {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    var register$3 = function (editor) {\n      registerButtons$2(editor);\n    };\n\n    var onActionToggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: onActionToggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$5.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$2 = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var onSetupUndoRedoState = function (editor, type) {\n      return onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function (api) {\n        api.setDisabled(editor.mode.isReadOnly() || !editor.undoManager[type]());\n      });\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var register$1 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    var onSetupVisualAidState = function (editor) {\n      return onSetupEvent(editor, 'VisualAid', function (api) {\n        api.setActive(editor.hasVisual);\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var register = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    var setup$6 = function (editor, backstage) {\n      register$6(editor);\n      register$2(editor);\n      register$4(editor, backstage);\n      register$1(editor);\n      register$a(editor);\n      register(editor);\n      register$3(editor);\n      register$5(editor);\n    };\n\n    var nu = function (x, y) {\n      return {\n        type: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$b.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor = function (editor) {\n      return {\n        type: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n    var getAnchorSpec$1 = function (editor, e, anchorType) {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2,\n          north,\n          south,\n          northeast,\n          southeast,\n          northwest,\n          southwest\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2,\n          north,\n          south,\n          northwest,\n          southwest,\n          northeast,\n          southeast\n        ];\n      }\n    };\n    var bubbleSize = 12;\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$f.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var getAnchorSpec = function (editor, e, anchorType) {\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      var bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return __assign({\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        }\n      }, anchorSpec);\n    };\n    var show = function (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) {\n      var anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection'));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var detection = detect$1();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && anchorType !== 'node') {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter$2(patchPipeConfig(defaultItems), function (item) {\n          return has$2(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator = { type: 'separator' };\n    var makeContextItem = function (item) {\n      var commonMenuItem = function (item) {\n        return {\n          text: item.text,\n          icon: item.icon,\n          disabled: item.disabled,\n          shortcut: item.shortcut\n        };\n      };\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return __assign(__assign({ type: 'nestedmenuitem' }, commonMenuItem(item)), {\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          });\n        default:\n          return __assign(__assign({ type: 'menuitem' }, commonMenuItem(item)), { onAction: noarg(item.onAction) });\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last$2(xs).filter(function (item) {\n        return !isSeparator(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        return get$e(contextMenus, name.toLowerCase()).map(function (menu) {\n          var items = menu.update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(function () {\n          return acc.concat([name]);\n        });\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var getAnchorType = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      var anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        var target = getSelectedElement(editor, e);\n        var selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    var setup$5 = function (editor, lazySink, backstage) {\n      var detection = detect$1();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var anchorType = getAnchorType(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform([\n        add(origin),\n        subtract(scroll)\n      ]), transform([subtract(scroll)]), transform([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform([]), transform([subtract(origin)]), transform([\n        add(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    var offset = adt.offset;\n    var absolute = adt.absolute;\n    var fixed = adt.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$d(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$8(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$8(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed$1) {\n        return fixed(fixed$1.left + delta.left, fixed$1.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo$1 = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo$1(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$7(root, 'z-index', zIndex);\n        });\n        remove$7(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$8(root, initialAttribute, zindex);\n        });\n        set$7(root, 'z-index', get$c(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    var schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity$1),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute$3(target);\n        return absolute(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp$1(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp$1(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), function () {\n        var fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$2(comp.element),\n        width: getOuter$1(comp.element)\n      };\n    };\n    var move = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive$2(__spreadArray([run$1(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState), true));\n      };\n    };\n\n    var init$2 = function (dragApi) {\n      return derive$2([\n        run$1(mousedown(), dragApi.forceDrop),\n        run$1(mouseup(), dragApi.drop),\n        run$1(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run$1(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$2 = function (dragConfig, dragState, updateStartState) {\n      return [run$1(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$5 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$2) })], false);\n\n    var init$1 = function (dragApi) {\n      return derive$2([\n        run$1(touchstart(), dragApi.forceDrop),\n        run$1(touchend(), dragApi.drop),\n        run$1(touchcancel(), dragApi.drop),\n        run$1(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    var events$1 = function (dragConfig, dragState, updateStartState) {\n      var blockerSingleton = value$1();\n      var stopBlocking = function (component) {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop = function () {\n            return stopBlocking(component);\n          };\n          var dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: function (event) {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$1(dragApi));\n          blockerSingleton.set(blocker);\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    var schema$4 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$1) })], false);\n\n    var events = function (dragConfig, dragState, updateStartState) {\n      return __spreadArray(__spreadArray([], events$2(dragConfig, dragState, updateStartState), true), events$1(dragConfig, dragState, updateStartState), true);\n    };\n    var schema$3 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events) })], false);\n\n    var mouse = schema$5;\n    var touch = schema$4;\n    var mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$4 = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = value$1();\n      var finishCell = value$1();\n      var getTopLeftSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map$2(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map$2(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$7(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$1().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(e.start);\n          finishCell.set(e.finish);\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var isHidden = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map$2(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$b(container), get$a(container));\n      each(dimensions, function (val, dim) {\n        return set$7(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var getResizeType = function (editor) {\n      var fallback = !editor.hasPlugin('autoresize');\n      var resize = editor.getParam('resize', fallback);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    var keyboardHandler = function (editor, resizeType, x, y) {\n      var scale = 20;\n      var delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    var renderResizeHandler = function (editor, providersBackstage) {\n      var resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: { title: providersBackstage.translate('Resize') },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: function (_comp, _target, delta) {\n              return resize(editor, delta, resizeType);\n            },\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: function () {\n              return keyboardHandler(editor, resizeType, -1, 0);\n            },\n            onRight: function () {\n              return keyboardHandler(editor, resizeType, 1, 0);\n            },\n            onUp: function () {\n              return keyboardHandler(editor, resizeType, 0, -1);\n            },\n            onDown: function () {\n              return keyboardHandler(editor, resizeType, 0, 1);\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ]\n      }, providersBackstage.icons));\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text$1(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderBranding = function () {\n        var label = global$e.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$3 = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$1();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$e.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$7(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq(body(), uiContainer) && get$c(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$7(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$e.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$b(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$7(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$7(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$7(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$6(editor, backstage);\n        setup$5(editor, lazySink, backstage);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$1(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$7(editor, contextToolbars, sink, { backstage: backstage });\n        setup$4(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$d(describedElement, 'id')).fold(function () {\n        var id = generate$6('dialog-describe');\n        set$8(describeElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$6('dialog-label');\n        set$8(labelElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$2 = constant$1([\n      required$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity$1 };\n    var parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = value$1();\n      var showDialog = function (dialog) {\n        dialogComp.set(dialog);\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.clear();\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$6('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArray(__spreadArray([], baseFooterButtonFields, true), [requiredString('text')], false);\n    var normalFooterButtonFields = __spreadArray([requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields, true);\n    var menuFooterButtonFields = __spreadArray([\n      requiredStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields, true);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      requiredString('type'),\n      requiredString('text'),\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      requiredString('icon'),\n      defaulted('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      requiredString('type'),\n      requiredString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      requiredString('type'),\n      requiredString('name'),\n      requiredString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      requiredString('type'),\n      requiredString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj([\n      requiredString('value'),\n      requiredString('text'),\n      requiredString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      requiredString('type'),\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([requiredOf('currentState', objOf([\n        required$1('blob'),\n        requiredString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      requiredString('text'),\n      requiredString('value')\n    ];\n    var listBoxNestedItemFields = [\n      requiredString('text'),\n      requiredArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        requiredString('text'),\n        requiredString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    var tableFields = [\n      requiredString('type'),\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      requiredString('value'),\n      defaulted('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field$1('items', 'items', required$2(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema = valueThunk(function () {\n      return choose$2('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      requiredString('type'),\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('tab-name');\n      }), string),\n      requiredString('title'),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var tabPanelFields = [\n      requiredString('type'),\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      requiredArrayOf('buttons', dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArray([requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields, true));\n    var urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter$2(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind$3(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [requiredOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map$2(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, identity$1);\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$3 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$a(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$6('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue()),\n        option('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    var schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$1 = constant$1([tabsPart]);\n\n    var factory$2 = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    var factory$1 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    var schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    var factory = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find$5(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$8(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find$5(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory: factory,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map$2(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$c(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$b(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$a(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$b(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$c(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$c(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$b(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$7(tabview, 'height', height + 'px');\n      if (!detect$1().browser.isIE()) {\n        set$7(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$7(tabview, 'height', '0');\n            set$7(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = value$1();\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$7(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$f.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run$1(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run$1(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$7(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(newHeight);\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$3);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map$2(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map$2(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$6('update-dialog');\n    var titleChannel = generate$6('update-title');\n    var bodyChannel = generate$6('update-body');\n    var footerChannel = generate$6('update-footer');\n    var bodySendMessageChannel = generate$6('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$9.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml('<p>' + sanitizeHtmlString(providersBackstage.translate(message)) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog$1 = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArray([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray(), true),\n        parts: {\n          blocker: {\n            dom: fromHtml('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArray([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$2(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours, true)),\n        eventOrder: __assign((_a = {}, _a[execute$5()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon']\n          }, providersBackstage.icons)],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text$1(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog$1(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArray([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours, true),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map$2(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map$2(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run$1(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run$1(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })], false);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ], false);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup = function (compInSystem, footerButtons, buttonName) {\n      return find$5(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition$3(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map$2(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map$2(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData$1 = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$1(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData$1(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, function (v, k) {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: constant$1(dialog),\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$6('dialog-label');\n      var dialogContentId = generate$6('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute$5()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name$2(elem) !== 'button' || get$d(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: constant$1(dialog),\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$1(internalDialog.url, { base_uri: new global$1(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = unbindable();\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$1(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$2 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$1 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run$1(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$2(extras);\n      var confirmDialog = setup$1(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData(internalInitialData, dataValidator);\n          var inlineDialog = value$1();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArray([config('window-manager-inline-events', [run$1(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop), true)),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, premade(dialogUi.dialog), { anchor: anchor }, Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$g.add('silver', function (editor) {\n        var _a = setup$3(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.9 (2023-11-15)\n */\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString$1 = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray$1 = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var apply = function (f) {\n      return f();\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf$2 = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$3 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$3 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$k = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$4 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$k(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil$1 = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$3 = function (xs, pred) {\n      return findUntil$1(xs, pred, never);\n    };\n    var findIndex$2 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map$3(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$4(a1, function (x) {\n        return !contains$3(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$a = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$a(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$a(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$j = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$3 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$j(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var get$9 = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal$1 = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray = Array.isArray;\n    var toArray$1 = function (obj) {\n      if (!isArray(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$i = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$i(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$i(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$4(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$4(0, 0);\n    };\n    var nu$4 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$4,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$3(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$3(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$5 = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$3 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie$1),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$3,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform$2 = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform$2();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect();\n    var browser$4 = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser$4.isOpera(),\n      webkit: webkit,\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\n      gecko: browser$4.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser$4.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser$4.current,\n        version: browser$4.version,\n        isChrome: browser$4.isChrome,\n        isEdge: browser$4.isEdge,\n        isFirefox: browser$4.isFirefox,\n        isIE: browser$4.isIE,\n        isOpera: browser$4.isOpera,\n        isSafari: browser$4.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$4 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var is$3 = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap$4 = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = has$2;\n    var create$9 = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend$6 = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (has$2(ext, name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk$3 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$i(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk$3(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$3 = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode$4 = function (s, d) {\n      if (!s || is$3(s, 'array')) {\n        return s;\n      }\n      return map$1(s.split(d || ','), trim$4);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$4,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$i,\n      map: map$1,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty,\n      extend: extend$6,\n      create: create$9,\n      walk: walk$3,\n      createNS: createNS,\n      resolve: resolve$3,\n      explode: explode$4,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    var fromDom$2 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$1\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment$1 = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement$6 = isType(ELEMENT);\n    var isText$8 = isType(TEXT);\n    var isDocument$2 = isType(DOCUMENT);\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement$6(e) && name(e) === tag;\n      };\n    };\n\n    var owner$1 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument$2(dos) ? dos : owner$1(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents$1 = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter$4(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$1 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$1(element, 0);\n    };\n    var lastChild = function (element) {\n      return child$1(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$6(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$3 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap$3 = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$k(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$k(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$k(children(element), function (rogue) {\n        remove$7(rogue);\n      });\n    };\n    var remove$7 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$3(wrapper, children$1);\n      }\n      remove$7(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$7 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$8(SugarElement.fromDom(doc));\n      return get$7(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$5 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains$3(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        if (isElement$5(node)) {\n          for (var i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$5(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus$2 = function (node) {\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll$1 = function (node) {\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable$3 = function (node) {\n      return isElement$5(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$5(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$7 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$5 = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue$4 = hasContentEditableState('true');\n    var isContentEditableFalse$b = hasContentEditableState('false');\n    var isTableCell$5 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$j(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$6 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$6(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$6 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$3 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString$1(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$j(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$3 = detect().browser;\n    var firstElement = function (nodes) {\n      return find$3(nodes, isElement$6);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$3.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains$3(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0;\n      var doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          var pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          var castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module$1));\n    var Promise$1 = module$1.exports.boltExport;\n\n    var nu$1 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$1(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$k(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$1(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu = function (baseFn) {\n      return make(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu,\n      pure: pure\n    };\n\n    var par$1 = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each$k(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par = function (futures) {\n      return par$1(futures, Future.nu);\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$k(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$3(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    var sibling$2 = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq(scope, x) && predicate(x);\n      });\n    };\n    var child = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$3(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$3(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$2 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    var promiseObj = window.Promise ? window.Promise : Promise$1;\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (cb) {\n        window.setTimeout(cb, 0);\n      };\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append$1(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$7);\n      };\n      var getOrCreateState = function (url) {\n        return get$9(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$1(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$1(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par(map$3(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each$k(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    };\n\n    var create$8 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$8();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock$2 = lazyLookup(blocks);\n    var isTable$2 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline$1 = function (node) {\n      return isElement$6(node) && !isBlock$2(node);\n    };\n    var isBr$4 = function (node) {\n      return isElement$6(node) && name(node) === 'br';\n    };\n    var isTextBlock$2 = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems$1);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$4 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp$1 = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP$1 = zeroWidth;\n    var isZwsp = isZwsp$1;\n    var trim$3 = removeZwsp;\n\n    var isElement$4 = isElement$5;\n    var isText$6 = isText$7;\n    var isCaretContainerBlock$1 = function (node) {\n      if (isText$6(node)) {\n        node = node.parentNode;\n      }\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$6(node) && isZwsp(node.data);\n    };\n    var isCaretContainer$2 = function (node) {\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\n    };\n    var insertInline$1 = function (node, before) {\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP$1);\n      var parentNode = node.parentNode;\n      if (!before) {\n        var sibling = node.nextSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        var sibling = node.previousSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock$1 = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock$1(range.startContainer);\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\n    var isContentEditableFalse$a = isContentEditableFalse$b;\n    var isBr$3 = isBr$5;\n    var isText$5 = isText$7;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$1 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer$2;\n    var isCaretCandidate$3 = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$5(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$3(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$3(elm);\n      }, false) !== true;\n    };\n    var isAtomic$1 = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate$1 = function (node, root) {\n      return isCaretCandidate$3(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent$1 = function (node, rootNode) {\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        var node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$5(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$2 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode$2 = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument = function (node) {\n      return isDocumentFragment(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$5(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\n    var split$1 = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var createMap = function (defaultValue, extendWith) {\n      var value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$5(value, extendWith);\n    };\n    var getTextRootBlockElements = function (schema) {\n      return createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split$1(children);\n        }\n        var names = split$1(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split$1(name);\n        ni = names.length;\n        var attrs = split$1(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$h(split$1(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$h(split$1(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$h(split$1('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$h(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    var Schema = function (settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = createMap(defaultValue, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split$1(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$j(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split$1(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$h(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$h(split$1(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$5({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$h(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$5({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$h(split$1(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$h(split$1(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$h(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$h(split$1('strong/b em/i'), function (item) {\n            var items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$h(textInlineElementsMap, function (_val, name) {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('ol ul blockquote a table tbody'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$h(split$1('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$h({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$h(explode$3(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = constant(validStyles);\n      var getInvalidStyles = constant(invalidStyles);\n      var getValidClasses = constant(validClasses);\n      var getBoolAttrs = constant(boolAttrMap);\n      var getBlockElements = constant(blockElementsMap);\n      var getTextBlockElements = constant(textBlockElementsMap);\n      var getTextInlineElements = constant(textInlineElementsMap);\n      var getShortEndedElements = constant(shortEndedElementsMap);\n      var getSelfClosingElements = constant(selfClosingElementsMap);\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\n      var getSpecialElements = constant(specialElements);\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = constant(customElementsMap);\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var _this = this;\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || _this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$j(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    var isNativeEvent = function (event) {\n      return event instanceof Event || isFunction(event.initEvent);\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    };\n    var needsNormalizing = function (event) {\n      return isNullable(event.preventDefault) || isNativeEvent(event);\n    };\n    var clone$2 = function (originalEvent, data) {\n      var event = data !== null && data !== void 0 ? data : {};\n      for (var name_1 in originalEvent) {\n        if (!has$2(deprecated, name_1)) {\n          event[name_1] = originalEvent[name_1];\n        }\n      }\n      if (isNonNullable(event.composedPath)) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      return event;\n    };\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\n      var _a;\n      var event = clone$2(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = function () {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.returnValue = false;\n          }\n        };\n        event.stopPropagation = function () {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.cancelBubble = true;\n          }\n        };\n        event.stopImmediatePropagation = function () {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return isNonNullable(event) && mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        var mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      if (isUndefined(event.metaKey)) {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$j(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix({\n          type: name,\n          target: target\n        }, args);\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr$1.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            input[0] = null;\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each$k([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each$k([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n            checkContext = null;\n            return ret;\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event$1 = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment$1 = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString(sourceItem)) {\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$2 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$2 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var each$g = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep$2 = function (array, callback) {\n      var out = [];\n      each$g(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event$1.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$2(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$2(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$g(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$2((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$g(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event$1.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event$1.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event$1.fire(this, name.type, name);\n          } else {\n            Event$1.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return DomQuery(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$g,\n      trim: trim$2,\n      grep: grep$2,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$g({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$g({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$f = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter && value !== null) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    var DOMUtils = function (doc, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$f(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$f(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$f(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each$k(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$f(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$f(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$5(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$5(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$5(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$j(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        if (!isIE) {\n          return node === parent || parent.contains(node);\n        } else {\n          while (node) {\n            if (parent === node) {\n              return true;\n            }\n            node = node.parentNode;\n          }\n          return false;\n        }\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    var DOM$a = DOMUtils.DOM;\n    var each$e = Tools.each, grep = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM$a;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep(scripts);\n          scripts.length = 0;\n          each$e(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$e(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has$2(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray$1(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$9(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add$4 = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$j(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl$1 = function () {\n      return getLanguageData().bind(function (items) {\n        return get$9(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has$2(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add$4,\n      translate: translate,\n      isRtl: isRtl$1,\n      hasCode: hasCode\n    };\n\n    var AddOnManager = function () {\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter$4(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each$k(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = urls[pluginName];\n        each$k(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$k(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has$2(lookup, name) && state === 'added') {\n          callback();\n        } else if (has$2(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read$4 = function (element, attr) {\n      var value = get$6(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$3 = function (element, attr, id) {\n      var old = read$4(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$5 = function (element, attr, id) {\n      var nu = filter$4(read$4(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$6(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$4(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$3(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$5(element, 'class', clazz);\n    };\n\n    var add$1 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$6(element, 'class');\n      }\n    };\n    var remove$3 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$k(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child$1(start, rng.startOffset).getOr(start);\n      var closest = closest$2(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$6(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement$6(elem) && has(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each$k(markers, function (m) {\n        var uid = get$6(m, dataAnnotationId());\n        var nodesAlready = get$9(directory, uid).getOr([]);\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup$n = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: value()\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = get$9(callbackMap, name).getOrThunk(initData);\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map$3(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each$k(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.clear();\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!is$1(prev, uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$m = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each$k(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$7 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return get$9(annotations, name).map(function (a) {\n          return a.settings;\n        });\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add = function (element, classes) {\n      each$k(classes, function (x) {\n        add$1(element, x);\n      });\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map$3(nodes, SugarElement.fromDom);\n    };\n\n    var get$3 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner = owner$1(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep$1 = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$7(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$7);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$7);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$7(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var round$2 = Math.round;\n    var clone = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove$1 = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow$1 = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var clamp$2 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode$1 = function (container, offset) {\n      if (isElement$5(container) && container.hasChildNodes()) {\n        var childNodes = container.childNodes;\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    var getNodeUnsafe = function (container, offset) {\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$5;\n    var isCaretCandidate$2 = isCaretCandidate$3;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$7;\n    var isBr$2 = isBr$5;\n    var nodeIndex$1 = DOMUtils.nodeIndex;\n    var resolveIndex$1 = getNodeUnsafe;\n    var createRange$1 = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    };\n    var isWhiteSpace$1 = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\n        var text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange$1(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect$1 = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone(clientRects[0]);\n      } else {\n        clientRect = clone(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$4(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$3(container)) {\n        if (caretPosition.isAtEnd()) {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    var CaretPosition = function (container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex$1(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    };\n    CaretPosition.fromRangeStart = function (range) {\n      return CaretPosition(range.startContainer, range.startOffset);\n    };\n    CaretPosition.fromRangeEnd = function (range) {\n      return CaretPosition(range.endContainer, range.endOffset);\n    };\n    CaretPosition.after = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    };\n    CaretPosition.before = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\n    };\n    CaretPosition.isAbove = function (pos1, pos2) {\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    };\n    CaretPosition.isBelow = function (pos1, pos2) {\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    };\n    CaretPosition.isAtStart = function (pos) {\n      return pos ? pos.isAtStart() : false;\n    };\n    CaretPosition.isAtEnd = function (pos) {\n      return pos ? pos.isAtEnd() : false;\n    };\n    CaretPosition.isTextPosition = function (pos) {\n      return pos ? isText$7(pos.container()) : false;\n    };\n    CaretPosition.isElementPosition = function (pos) {\n      return CaretPosition.isTextPosition(pos) === false;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$3 = isText$7;\n    var isBogus = isBogus$2;\n    var nodeIndex = DOMUtils.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$3(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$3(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil$1 = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$6 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$3(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil$1(root, container);\n      parents = filter$2(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$3(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$3(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$3(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$3(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex(container) + 1;\n        } else {\n          offset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$7(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      if (isRangeInCaretContainerBlock(rng)) {\n        bookmark.isFakeCaret = true;\n      }\n      return bookmark;\n    };\n    var findIndex = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint$1 = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$5(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$5(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark$2 = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$3, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$9 = DOMUtils.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre$1 = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString$1(contentCss)) {\n        return map$3(contentCss.split(','), trim$5);\n      } else if (isArray$1(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getFontCss = function (editor) {\n      var fontCss = editor.getParam('font_css', []);\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$5);\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString$1(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins$1 = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n    var getIframeAriaText = function (editor) {\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\n    };\n\n    var isElement$2 = isElement$5;\n    var isText$2 = isText$7;\n    var removeNode$1 = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$3(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$2(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$2 = function (caretContainerNode) {\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$2(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect().browser;\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\n    var isMedia$1 = isMedia$2;\n    var isTableCell$3 = isTableCell$5;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var scrollX;\n      var scrollY;\n      if (root.tagName === 'BODY') {\n        var docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        var rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      var margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = value();\n      var cursorInterval;\n      var caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var rng;\n        hide();\n        if (isTableCell$3(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\n          var clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\n          lastVisualCaret.set({\n            caret: caret,\n            element: element,\n            before: before\n          });\n          if (before) {\n            DomQuery(caret).addClass('mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.on(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$8(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\n    var isMedia = isMedia$2;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer = isCaretContainer$2;\n    var isCaretContainerBlock = isCaretContainerBlock$1;\n    var isElement$1 = isElement$5;\n    var isCaretCandidate$1 = isCaretCandidate$3;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock$2 = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$1(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\n      while (node && node !== root) {\n        var sibling = node[siblingName];\n        if (isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$2 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        if (!isElement$1(container)) {\n          container = container.parentNode;\n        }\n        var location_1 = container.getAttribute('data-mce-caret');\n        if (location_1 === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location_1 === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$7(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$5(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\n    var isText$1 = isText$7;\n    var isElement = isElement$5;\n    var isBr$1 = isBr$5;\n    var isCaretCandidate = isCaretCandidate$3;\n    var isAtomic = isAtomic$1;\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\n    var getParents$3 = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$1(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$1(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    var findCaretPosition$1 = function (direction, startPos, root) {\n      var node;\n      var nextNode;\n      var innerNode;\n      var caretPosition;\n      if (!isElement(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$1(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$1(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode$1(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$7(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID$1 = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$5(node) && node.id === CARET_ID$1;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID$1) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return isString$1(bookmark.start);\n    };\n    var isRangeBookmark = function (bookmark) {\n      return has$2(bookmark, 'rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return has$2(bookmark, 'id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return has$2(bookmark, 'name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(never, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$7(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$7(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$1 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark$2(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$1(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is(nbsp);\n    var isWhiteSpace = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container === rng.endContainer) {\n        if (isInlineBlock(container.childNodes[offset])) {\n          return;\n        }\n      }\n      if (isElement$5(container)) {\n        var nodes = container.childNodes;\n        var walker = void 0;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (var node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$7(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (isFunction(value)) {\n        value = value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq$5 = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$2 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$9(format, key).exists(function (field) {\n            var fieldValues = isArray$1(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$3(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n    var isMixedFormat = function (format) {\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\n    };\n    var shouldExpandToSelector = function (format) {\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    };\n\n    var isBookmarkNode = isBookmarkNode$1;\n    var getParents$1 = getParents$2;\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\n    var isTextBlock = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$1(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < formatList.length; y++) {\n          var curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\n      var node = container;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock(editor, node);\n        }, scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, formatList, container, offset, start) {\n      var parent = container;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    };\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      var format = formatList[0];\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$7(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$7(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$7(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$7(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$5(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$5(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var walk$2 = function (dom, rng, callback) {\n      var startOffset = rng.startOffset;\n      var startContainer = getNode$1(rng.startContainer, startOffset);\n      var endOffset = rng.endOffset;\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      var exclude = function (nodes) {\n        var firstNode = nodes[0];\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        var lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        return dom.getParent(node, function (node) {\n          return node.parentNode === root;\n        }, root);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$2(cell, 'table', isRoot);\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$7(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$7(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains$3([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$k(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$1 = NodeValue(isText$8, 'text');\n    var get$2 = function (element) {\n      return api$1.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$1(master, annotation());\n      set$1(master, '' + dataAnnotationId(), uid);\n      set$1(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll$1(master, attributes);\n      add(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = value();\n      var finishWrapper = function () {\n        wrapper.clear();\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(nu);\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each$k(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$3(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$2(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$7();\n      setup$m(editor, registry);\n      var changes = setup$n(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each$k(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map$3(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    var BookmarkManager = function (selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$5(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n    var fireFormatApply = function (editor, format, node, vars) {\n      return editor.fire('FormatApply', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n    var fireFormatRemove = function (editor, format, node, vars) {\n      return editor.fire('FormatRemove', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\n    var ControlSelection = function (selection, editor) {\n      var elementSelectionAttr = 'data-mce-selected';\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isMedia = function (elm) {\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTargets = function (elm) {\n        if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else {\n          return [elm];\n        }\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object')) {\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$2(SugarElement.fromDom(elm), selector);\n        }\n      };\n      var createGhostElement = function (elm) {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      var setSizeProp = function (element, name, value) {\n        if (isNonNullable(value)) {\n          var targets = getResizeTargets(element);\n          each$k(targets, function (target) {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              var target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\n        }\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$j(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$j(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (pointDoc.caretRangeFromPoint) {\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent$1 = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent$1(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$2 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr$5(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse$b(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$7(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$7(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$7(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$5(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$7(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var RangeUtils = function (dom) {\n      var walk = function (rng, callback) {\n        return walk$2(dom, rng, callback);\n      };\n      var split$1 = split;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split$1,\n        normalize: normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$1 = function (element) {\n      return api.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    var find$1 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$8(last)) {\n            return {\n              element: last,\n              offset: get$2(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$1(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$4(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$7(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$8(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$1(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus$1 = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$5 };\n\n    var adt$1 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$2 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$1 = adt$1.before;\n    var on = adt$1.on;\n    var after$1 = adt$1.after;\n    var Situ = {\n      before: before$1,\n      on: on,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$2\n    };\n\n    var adt = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt.domRange;\n    var relative = adt.relative;\n    var exact = adt.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$1 = detect().browser;\n    var clamp$1 = function (offset, element) {\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$1.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement$1 = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils.DOM;\n    var isEditorUIElement = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents$1 = function (editorManager, e) {\n      var editor = e.editor;\n      register$3(editor);\n      editor.on('focusin', function () {\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.fire('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        Delay.setEditorTimeout(editor, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$l = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$1(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection$1 = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus$1(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active(dos).filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection$1(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection$1(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$7(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint(dom, rng, node, true);\n          moveEndPoint(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map$3(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$1 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$j(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$j(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.children = function () {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$1(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$1(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var unescapedTextParents = Tools.makeMap('NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT', ' ');\n    var containsZwsp = function (node) {\n      return isString$1(node.nodeValue) && contains$2(node.nodeValue, ZWSP$1);\n    };\n    var getTemporaryNodeSelector = function (tempAttrs) {\n      return (tempAttrs.length === 0 ? '' : map$3(tempAttrs, function (attr) {\n        return '[' + attr + ']';\n      }).join(',') + ',') + '[data-mce-bogus=\"all\"]';\n    };\n    var getTemporaryNodes = function (tempAttrs, body) {\n      return body.querySelectorAll(getTemporaryNodeSelector(tempAttrs));\n    };\n    var createWalker = function (body, whatToShow, filter) {\n      return document.createTreeWalker(body, whatToShow, filter, false);\n    };\n    var createZwspCommentWalker = function (body) {\n      return createWalker(body, NodeFilter.SHOW_COMMENT, function (node) {\n        return containsZwsp(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n      });\n    };\n    var createUnescapedZwspTextWalker = function (body) {\n      return createWalker(body, NodeFilter.SHOW_TEXT, function (node) {\n        if (containsZwsp(node)) {\n          var parent_1 = node.parentNode;\n          return parent_1 && has$2(unescapedTextParents, parent_1.nodeName) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n        } else {\n          return NodeFilter.FILTER_SKIP;\n        }\n      });\n    };\n    var hasZwspComment = function (body) {\n      return createZwspCommentWalker(body).nextNode() !== null;\n    };\n    var hasUnescapedZwspText = function (body) {\n      return createUnescapedZwspTextWalker(body).nextNode() !== null;\n    };\n    var hasTemporaryNode = function (tempAttrs, body) {\n      return body.querySelector(getTemporaryNodeSelector(tempAttrs)) !== null;\n    };\n    var trimTemporaryNodes = function (tempAttrs, body) {\n      each$k(getTemporaryNodes(tempAttrs, body), function (elm) {\n        var element = SugarElement.fromDom(elm);\n        if (get$6(element, 'data-mce-bogus') === 'all') {\n          remove$7(element);\n        } else {\n          each$k(tempAttrs, function (attr) {\n            if (has$1(element, attr)) {\n              remove$6(element, attr);\n            }\n          });\n        }\n      });\n    };\n    var emptyAllNodeValuesInWalker = function (walker) {\n      var curr = walker.nextNode();\n      while (curr !== null) {\n        curr.nodeValue = null;\n        curr = walker.nextNode();\n      }\n    };\n    var emptyZwspComments = compose(emptyAllNodeValuesInWalker, createZwspCommentWalker);\n    var emptyUnescapedZwspTexts = compose(emptyAllNodeValuesInWalker, createUnescapedZwspTextWalker);\n    var trim$1 = function (body, tempAttrs) {\n      var conditionalTrims = [\n        {\n          condition: curry(hasTemporaryNode, tempAttrs),\n          action: curry(trimTemporaryNodes, tempAttrs)\n        },\n        {\n          condition: hasZwspComment,\n          action: emptyZwspComments\n        },\n        {\n          condition: hasUnescapedZwspText,\n          action: emptyUnescapedZwspTexts\n        }\n      ];\n      var trimmed = body;\n      var cloned = false;\n      each$k(conditionalTrims, function (_a) {\n        var condition = _a.condition, action = _a.action;\n        if (condition(trimmed)) {\n          if (!cloned) {\n            trimmed = body.cloneNode(true);\n            cloned = true;\n          }\n          action(trimmed);\n        }\n      });\n      return trimmed;\n    };\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var setupArgs$3 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        getInner: true\n      });\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var defaultedArgs = setupArgs$3(args, format);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\n      var content;\n      if (updatedArgs.format === 'raw') {\n        content = Tools.trim(trim$3(trim$1(body, editor.serializer.getTempAttrs()).innerHTML));\n      } else if (updatedArgs.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$3(body.innerText || body.textContent);\n      } else if (updatedArgs.format === 'tree') {\n        content = editor.serializer.serialize(body, updatedArgs);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\n      }\n      if (!contains$3([\n          'text',\n          'tree'\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        updatedArgs.content = Tools.trim(content);\n      } else {\n        updatedArgs.content = content;\n      }\n      if (updatedArgs.no_events) {\n        return updatedArgs.content;\n      } else {\n        return editor.fire('GetContent', updatedArgs).content;\n      }\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$d = Tools.each;\n    var ElementUtils = function (dom) {\n      var compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$d(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (has$2(obj1, name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      return { compare: compare };\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$1(settings.indent_before || '');\n      var indentAfter = makeMap$1(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          if (!handler) {\n            var name_1 = node.name;\n            var isEmpty = node.shortEnded;\n            var attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              var sortedAttrs = [];\n              sortedAttrs.map = {};\n              var elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  var attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (var i = 0, l = attrs.length; i < l; i++) {\n                  var attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name_1);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var nonInheritableStyles = new Set();\n    (function () {\n      var nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$k(nonInheritableStylesArr, function (style) {\n        nonInheritableStyles.add(style);\n      });\n    }());\n    var shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    var getStyleProps = function (dom, node) {\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    };\n    var isNonInheritableStyle = function (style) {\n      return nonInheritableStyles.has(style);\n    };\n    var hasInheritableStyles = function (dom, node) {\n      return forall(getStyleProps(dom, node), function (style) {\n        return !isNonInheritableStyle(style);\n      });\n    };\n    var getLonghandStyleProps = function (styles) {\n      return filter$4(styles, function (style) {\n        return exists(shorthandStyleProps, function (prop) {\n          return startsWith(style, prop);\n        });\n      });\n    };\n    var hasStyleConflict = function (dom, node, parentNode) {\n      var nodeStyleProps = getStyleProps(dom, node);\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\n      var valueMismatch = function (prop) {\n        var nodeValue = dom.getStyle(node, prop);\n        var parentValue = dom.getStyle(parentNode, prop);\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, function (nodeStyleProp) {\n        var propExists = function (props) {\n          return exists(props, function (prop) {\n            return prop === nodeStyleProp;\n          });\n        };\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\n    var isAfterTable = matchesElementPosition(false, isTable$3);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants(elm, 'br');\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\n      if (allBrs.length === brs.length) {\n        each$k(brs, remove$7);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$7(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil = function (start, root, predicate) {\n      if (contains$1(root, start)) {\n        return dropLast(parents$1(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents = function (start, root) {\n      return parentsUntil(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock$1(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock$1(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$4);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\n    };\n    var isBeforeBr$1 = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock = function (root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains$3([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest$3(elm, isElement$6);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map$3(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$7(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection$1 = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock = function (editor, elm) {\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$2(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\n      remove$7(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has$2(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq(root, cur);\n      };\n    };\n    var getTableCells = function (table) {\n      return descendants(table, 'td,th');\n    };\n    var getTableDetailsFromRange = function (rng, isRoot) {\n      var getTable = function (node) {\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\n      };\n      var startTable = getTable(rng.startContainer);\n      var endTable = getTable(rng.endContainer);\n      var isStartInTable = startTable.isSome();\n      var isEndInTable = endTable.isSome();\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable: startTable,\n        endTable: endTable,\n        isStartInTable: isStartInTable,\n        isEndInTable: isEndInTable,\n        isSameTable: isSameTable,\n        isMultiTable: isMultiTable\n      };\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (isRoot) {\n      return function (startCell) {\n        return getClosestTable(startCell, isRoot).bind(function (table) {\n          return last$2(getTableCells(table)).map(function (endCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getCellRangeFromEndTable = function (isRoot) {\n      return function (endCell) {\n        return getClosestTable(endCell, isRoot).bind(function (table) {\n          return head(getTableCells(table)).map(function (startCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getTableSelectionFromCellRng = function (isRoot) {\n      return function (cellRng) {\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n          return tableSelection(cellRng, table, getTableCells(table));\n        });\n      };\n    };\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex$2(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.exists(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      });\n    };\n    var unselectCells = function (rng, selectionDetails) {\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\n      var otherContentRng = rng.cloneRange();\n      startTable.each(function (table) {\n        return otherContentRng.setStartAfter(table.dom);\n      });\n      endTable.each(function (table) {\n        return otherContentRng.setEndBefore(table.dom);\n      });\n      return otherContentRng;\n    };\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        return start.or(end);\n      }).bind(function (tableSelection) {\n        var isSameTable = selectionDetails.isSameTable;\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\n        } else if (selectedCells.length > 0) {\n          if (isSameTable) {\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n          } else {\n            var otherContentRng = unselectCells(rng, selectionDetails);\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\n          }\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n          var otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(function (cellRng) {\n          return deleteAction.singleCellTable(rng, cellRng.start);\n        });\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var cleanCells = function (cells) {\n      return each$k(cells, function (cell) {\n        remove$6(cell, 'contenteditable');\n        fillWithPaddingBr(cell);\n      });\n    };\n    var getOutsideBlock = function (editor, container) {\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    };\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\n      emptyBlock.each(function (block) {\n        if (startInTable) {\n          remove$7(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    var deleteContentInsideCell = function (editor, cell, rng, isFirstCellInSelection) {\n      var insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false);\n    };\n    var collapseAndRestoreCellSelection = function (editor) {\n      var selectedCells = getCellsFromEditor(editor);\n      var selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$5(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, function (cell) {\n          return eq(cell, selectedNode);\n        })) {\n        set$1(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\n      var editorRng = editor.selection.getRng();\n      var cellsToClean = outsideDetails.bind(function (_a) {\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        var endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\n      var rng = editor.selection.getRng();\n      var startCell = startTableCells[0];\n      var endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      var startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      var endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell, moveSelection) {\n      if (moveSelection === void 0) {\n        moveSelection = true;\n      }\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(cell, lastBlock)) {\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock) && isEmpty$2(node)) {\n            remove$7(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement$2(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret$3 = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$9 = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    var createRange = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems = function (elm) {\n      return filter$4(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr$5(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$1 = isTableCell$5;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody();\n        var elementUtils_1 = ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils_1.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom;\n      var selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (isText$7(node)) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          var node2 = marker.nextSibling;\n          if (isText$7(node2)) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode;\n      var rng, node;\n      var selection = editor.selection;\n      var dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      var args = editor.fire('BeforeSetContent', {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      });\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (!details.preserve_zwsp) {\n        value = trim$3(value);\n      }\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        var marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        var rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each$k(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each$k(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (has$2(nodeMatches, name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (has$2(attrMatches, name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each$k(matches, function (match) {\n        each$k(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html, noSelection) {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    var setContentString = function (editor, body, content, args) {\n      content = trim$3(content);\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        var padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        var forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content, args.no_selection);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = trim$3(isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html));\n      setEditorHtml(editor, args.content, args.no_selection);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setupArgs$2 = function (args, content) {\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\n        set: true,\n        content: isTreeNode(content) ? '' : content\n      });\n    };\n    var setContentInternal = function (editor, content, args) {\n      var defaultedArgs = setupArgs$2(args, content);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\n      if (!isTreeNode(content)) {\n        content = updatedArgs.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\n      });\n    };\n\n    var sibling = function (scope, predicate) {\n      return sibling$2(scope, predicate).isSome();\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isEq$3 = isEq$5;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars, similar) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return !!matchNode(editor, node, name, vars, similar);\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var items = format[itemName];\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (isUndefined(items.length)) {\n          for (var key in items) {\n            if (has$2(items, key)) {\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              var expectedValue = replaceVars(items[key], vars);\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            var classes = format.classes;\n            if (classes) {\n              for (var x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match$2 = function (editor, name, vars, node, similar) {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var dom = editor.dom;\n      if (formatList) {\n        var startNode = editor.selection.getStart();\n        var parents = getParents$2(dom, startNode);\n        for (var x = formatList.length - 1; x >= 0; x--) {\n          var format = formatList[x];\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\n            return true;\n          }\n          for (var i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$2(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$k = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\n      remove$7(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter = filter$2;\n    var each$c = each$i;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess$1 = function (name, editor) {\n      each$c(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$c(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$b = Tools.each;\n    var isElementNode$1 = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var elementUtils = ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\n            var tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$b(dom.select(selector, node), function (node) {\n          if (isElementNode$1(node)) {\n            each$b(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$b(node.childNodes, function (node) {\n        if (isElementNode$1(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$a = Tools.each;\n    var isEq$2 = isEq$5;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$5(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$7(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$1 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$4(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$3(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName = function (dom, node, format) {\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$5(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find = function (dom, node, next, inc) {\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\n    };\n    var removeNode = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each$k(from(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = null;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each$k(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$a(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$a(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each$k(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(name);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$a(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$1 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var removeNodeFormat = function (node) {\n        return exists(formatList, function (fmt) {\n          return removeFormat$1(ed, fmt, vars, node, node);\n        });\n      };\n      var process = function (node) {\n        var lastContentEditable = true;\n        var hasContentEditableState = false;\n        if (isElement$5(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          var removed = removeNodeFormat(node);\n          var currentNodeMatches = removed || exists(formatList, function (f) {\n            return matchName$1(dom, node, f);\n          });\n          var parentNode = node.parentNode;\n          if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n            removeNodeFormat(parentNode);\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n        var textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$k(textDecorations, function (decoration) {\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, null, node);\n          }\n        });\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$7(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$2(dom, newRng, function (nodes) {\n              each$k(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$2(dom, expandedRng, function (nodes) {\n          each$k(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    var each$9 = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$9(formatList, function (format) {\n        if (isInlineFormat(format)) {\n          each$9(editor.dom.select(format.inline, node), function (child) {\n            if (!isElementNode$1(child)) {\n              return;\n            }\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$8 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = getTextRootBlockElements(editor.schema);\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat$1 = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        if (fmt === void 0) {\n          fmt = format;\n        }\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        each$8(fmt.styles, function (value, name) {\n          dom.setStyle(elm, name, replaceVars(value, vars));\n        });\n        if (fmt.styles) {\n          var styleVal = dom.getAttrib(elm, 'style');\n          if (styleVal) {\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\n          }\n        }\n        each$8(fmt.attributes, function (value, name) {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$8(fmt.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!dom.hasClass(elm, value)) {\n            dom.addClass(elm, value);\n          }\n        });\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        each$8(formatList, function (format) {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var createWrapElement = function (wrapName) {\n        if (isString$1(wrapName)) {\n          var wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = createWrapElement(wrapName);\n        walk$2(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentNode = node.parentNode;\n            var parentName = parentNode.nodeName.toLowerCase();\n            if (isElement$5(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$k(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$k(nodes, process);\n        });\n        if (format.links === true) {\n          each$k(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$k(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$k(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$k(node.childNodes, function (node) {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var mergeStyles = function (node) {\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\n              return matchName$1(dom, child, format);\n            });\n            return childElement.map(function (child) {\n              var clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            break;\n          }\n        }\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat$1(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize(selection.getRng()));\n            preserve(selection, true, function () {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    var hasVars = function (value) {\n      return has$2(value, 'vars');\n    };\n    var setup$j = function (registeredFormatListeners, editor) {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', function (e) {\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\n        }).bind(function (node) {\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\n        }).getOrThunk(function () {\n          return fallbackElement(editor);\n        });\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    var fallbackElement = function (editor) {\n      return editor.selection.getStart();\n    };\n    var matchingNode = function (editor, parents, format, similar, vars) {\n      var isMatchingNode = function (node) {\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      var isUnableToMatch = function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    var getParents = function (editor, elm) {\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$4(getParents$2(editor.dom, element), function (node) {\n        return isElement$5(node) && !isBogus$2(node);\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\n      var parents = getParents(editor, elm);\n      each$j(registeredCallbacks, function (data, format) {\n        var runIfChanged = function (spec) {\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          var isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            var node_1 = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node: node_1,\n                format: format,\n                parents: parents\n              });\n            } else {\n              each$k(spec.callbacks, function (callback) {\n                return callback(isSet, {\n                  node: node_1,\n                  format: format,\n                  parents: parents\n                });\n              });\n            }\n          }\n        };\n        each$k([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$k(data.withVars, runIfChanged);\n      });\n    };\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\n          var base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        var getCurrent = function () {\n          var parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar: similar,\n            vars: vars,\n            callback: callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        return get$9(formatChangeItems, format).each(function (group) {\n          formatChangeItems[format] = {\n            withSimilar: __assign(__assign({}, group.withSimilar), {\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withVars: filter$4(group.withVars, function (item) {\n              return item.callback !== callback;\n            })\n          };\n        });\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      if (registeredFormatListeners.get() === null) {\n        setup$j(registeredFormatListeners, editor);\n      }\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$1(editor, name, vars, node);\n      } else {\n        applyFormat$1(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$k(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$6(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map$3(table.rows, function (row) {\n        var cells = map$3(row.cells, function (cell) {\n          var td = deep$1(cell);\n          remove$6(td, 'colspan');\n          remove$6(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\n        each$k(descendants(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter$4(parents, function (elm) {\n        return isInline$1(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$3 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$3(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$3(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var setupArgs$1 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        selection: true\n      });\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs$1(args, format);\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\n      if (updatedArgs.isDefaultPrevented()) {\n        editor.fire('GetContent', updatedArgs);\n        return updatedArgs.content;\n      }\n      if (updatedArgs.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        updatedArgs.getInner = true;\n        var content = getSerializedContent(editor, updatedArgs);\n        if (updatedArgs.format === 'tree') {\n          return content;\n        } else {\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', updatedArgs);\n          return updatedArgs.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$5(elm)) {\n        return elm.outerHTML;\n      } else if (isText$7(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each$k(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm, trimZwsp) {\n      return filter$4(map$3(from(elm.childNodes), trimZwsp ? compose(trim$3, getOuterHtml) : getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var lazyTempDocument$1 = cached(function () {\n      return document.implementation.createHTMLDocument('undo');\n    });\n    var hasIframes = function (body) {\n      return body.querySelector('iframe') !== null;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var tempAttrs = editor.serializer.getTempAttrs();\n      var body = trim$1(editor.getBody(), tempAttrs);\n      return hasIframes(body) ? createFragmentedLevel(read$2(body, true)) : createCompleteLevel(trim$3(body.innerHTML));\n    };\n    var applyToEditor = function (editor, level, before) {\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument$1());\n      set(elm, getLevelContent(level));\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$1 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo$1 = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset$1 = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo$1 = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact$1 = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore$1 = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each$k(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange$1(editor, locks, beforeBookmark);\n          },\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo$1(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo$1(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear$1(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset$1(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo$1(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo$1(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact$1(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore$1(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra$1(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node, similar) {\n            return match$2(editor, name, vars, node, similar);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat$1(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$1(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\n      return {\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: function (_undoManager, _locks, fn) {\n            return undoManager.transact(fn);\n          },\n          ignore: function (_locks, callback) {\n            return undoManager.ignore(callback);\n          },\n          extra: function (_undoManager, _index, callback1, callback2) {\n            return undoManager.extra(callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, _node, similar) {\n            return formatter.match(name, defaultVars(vars), similar);\n          },\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: function (name) {\n            return formatter.canApply(name);\n          },\n          closest: function (names) {\n            return formatter.closest(names);\n          },\n          apply: function (name, vars, _node) {\n            return formatter.apply(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return formatter.remove(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return formatter.toggle(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\n            return formatter.formatChanged(formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, _format) {\n            return editor.getContent(args);\n          },\n          setContent: function (content, args) {\n            return editor.setContent(content, args);\n          },\n          insertContent: function (content, _details) {\n            return editor.insertContent(content);\n          },\n          addVisual: editor.addVisual\n        },\n        selection: {\n          getContent: function (_format, args) {\n            return selection.getContent(args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(raw.getRawModel());\n          }\n        }\n      };\n    };\n    var makeNoopAdaptor = function () {\n      var nul = constant(null);\n      var empty = constant('');\n      return {\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: empty,\n          insertContent: noop,\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    var isRtc = function (editor) {\n      return has$2(editor.plugins, 'rtc');\n    };\n    var getRtcSetup = function (editor) {\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\n        return Optional.from(rtcPlugin.setup);\n      });\n    };\n    var setup$i = function (editor) {\n      var editorCast = editor;\n      return getRtcSetup(editor).fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (setup) {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(function () {\n          return setup().then(function (rtcEditor) {\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n            return rtcEditor.rtc.isRemote;\n          });\n        });\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node, similar) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    };\n    var getContent$2 = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent$2 = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual$1 = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove$7(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$8).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs(args, content);\n      var updatedArgs = defaultedArgs;\n      if (!defaultedArgs.no_events) {\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\n        if (eventArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', eventArgs);\n          return;\n        } else {\n          updatedArgs = eventArgs;\n        }\n      }\n      updatedArgs.content = cleanContent(editor, updatedArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!updatedArgs.no_events) {\n        editor.fire('SetContent', updatedArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && has$2(callbackMap, selector)) {\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      var findMatchingNode = function (selector, nodes) {\n        return find$3(nodes, function (node) {\n          return dom.is(node, selector);\n        });\n      };\n      var getParents = function (elem) {\n        return dom.getParents(elem, null, dom.getRoot());\n      };\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element;\n              var parents = getParents(node);\n              var matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                findMatchingNode(selector, parents).each(function (node) {\n                  if (!currentSelectors[selector]) {\n                    each$k(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(function () {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart$1 = function (real) {\n        return getStart(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select$1 = function (node, content) {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        var doc = win.document;\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode$1 = function () {\n        return getNode(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select$1,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode$1,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each$k(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr_1 = new XMLHttpRequest();\n          xhr_1.open('GET', url, true);\n          xhr_1.responseType = 'blob';\n          xhr_1.onload = function () {\n            if (xhr_1.status === 200) {\n              resolve(xhr_1.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr_1.onerror = rejectWithError;\n          xhr_1.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri$1(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count$1 = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count$1++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri$1(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri$1(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    var ImageScanner = function (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter$4(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map$3(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    };\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html,\n          re: re\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join(''),\n          re: re\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(result.re, function (imageId) {\n        return get$9(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return isNonNullable(img.attr('data-mce-bogus'));\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$j(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each$k(nodes, processImage);\n        });\n      }\n    };\n    var register$1 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var validClasses = schema.getValidClasses();\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            var classList = node.attr('class').split(' ');\n            var classValue = '';\n            for (var ci = 0; ci < classList.length; ci++) {\n              var className = classList[ci];\n              var valid = false;\n              var validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var each$7 = Tools.each, trim = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$3(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$7(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.isDomSafe = function (uri, context, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          var decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          try {\n            decodedUri = decodeURIComponent(decodedUri);\n          } catch (ex) {\n            decodedUri = unescape(decodedUri);\n          }\n          if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n            return false;\n          }\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$7(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var lazyTempDocument = cached(function () {\n      return document.implementation.createHTMLDocument('parser');\n    });\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      var shortEndedElements = schema.getShortEndedElements();\n      var count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          var startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            var endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    var SaxParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      settings = settings || {};\n      var doc = lazyTempDocument();\n      var form = doc.createElement('form');\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return restoreDataUris(value, base64Extract);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            var attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              var i_1 = validAttributePatterns.length;\n              while (i_1--) {\n                attrRule = validAttributePatterns[i_1];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i_1 === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          var isNameOrId = name === 'name' || name === 'id';\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\n            return;\n          }\n          if (filteredUrlAttrs[name] && !URI.isDomSafe(value, tagName, settings)) {\n            return;\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    };\n    SaxParser.findEndTag = findMatchingEndTagIndex;\n\n    var makeMap = Tools.makeMap, each$6 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\n          if (originalNodeParent === void 0) {\n            originalNodeParent = node.parent;\n          }\n          if (specialElements[node.name]) {\n            node.empty().remove();\n          } else {\n            var children = node.children();\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n              var childNode = children_1[_i];\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\n              }\n            }\n            node.unwrap();\n          }\n        };\n        for (var ni = 0; ni < nodes.length; ni++) {\n          var node = nodes[ni];\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            var sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap();\n            continue;\n          }\n          var parents = [node];\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\n            parents.push(parent_1);\n          }\n          if (parent_1 && parents.length > 1) {\n            if (schema.isValidChild(parent_1.name, node.name)) {\n              parents.reverse();\n              newParent = filterNode(parents[0].clone());\n              var currentNode = newParent;\n              for (var i = 0; i < parents.length - 1; i++) {\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                  tempNode = filterNode(parents[i].clone());\n                  currentNode.append(tempNode);\n                } else {\n                  tempNode = currentNode;\n                }\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                  var nextNode = childNode.next;\n                  tempNode.append(childNode);\n                  childNode = nextNode;\n                }\n                currentNode = tempNode;\n              }\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n                parent_1.insert(newParent, parents[0], true);\n                parent_1.insert(node, newParent);\n              } else {\n                parent_1.insert(node, parents[0], true);\n              }\n              parent_1 = parents[0];\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\n                parent_1.empty().remove();\n              }\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              var sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var name = node.name;\n        if (name in nodeFilters) {\n          var list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        var i = attributeFilters.length;\n        while (i--) {\n          var attrName = attributeFilters[i].name;\n          if (attrName in node.attributes.map) {\n            var list = matchedAttributes[attrName];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[attrName] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (has$2(nodeFilters, name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var textRootBlockElements = getTextRootBlockElements(schema);\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, rootBlockNode = null;\n          var trim = function (rootBlock) {\n            if (rootBlock) {\n              node = rootBlock.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlock.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            var next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var blockElements = schema.getBlockElements();\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            var textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            var sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var output = {};\n          for (var name_2 in input) {\n            if (name_2 !== 'li' && name_2 !== 'p') {\n              output[name_2] = input[name_2];\n            }\n          }\n          return output;\n        };\n        var isTextRootBlockEmpty = function (node) {\n          var tempNode = node;\n          while (isNonNullable(tempNode)) {\n            if (tempNode.name in textRootBlockElements) {\n              return isEmpty(schema, nonEmptyElements, whiteSpaceElements, tempNode);\n            } else {\n              tempNode = tempNode.parent;\n            }\n          }\n          return false;\n        };\n        var parser = SaxParser({\n          validate: validate,\n          document: settings.document,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              var newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              var parent_2 = children[node.name];\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              var attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                var attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              var isNodeEmpty = isEmpty(schema, nonEmptyElements, whiteSpaceElements, node);\n              var parentNode = node.parent;\n              if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              } else if (elementRule.removeEmpty && isNodeEmpty) {\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n              } else if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isNodeEmpty)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = parentNode;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!has$2(matchedNodes, name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$1(exports, settings);\n      register$2(exports, settings);\n      return exports;\n    };\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            var type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each$k(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var oldDoc;\n      var dom = editor.dom;\n      var clonedNode = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        var doc_1 = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\n          doc_1.body.appendChild(doc_1.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc_1.body.firstChild;\n        } else {\n          clonedNode = doc_1.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc_1;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$3(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat = 'html';\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat;\n      return getContent$2(editor, args, format);\n    };\n\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent$2(editor, content, args);\n    };\n\n    var DOM$7 = DOMUtils.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$7.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$7.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var deprecatedSettings = ('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    var deprecatedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    var movedToPremiumPlugins = 'imagetools,toc'.split(',');\n    var getDeprecatedSettings = function (settings) {\n      var settingNames = filter$4(deprecatedSettings, function (setting) {\n        return has$2(settings, setting);\n      });\n      var forcedRootBlock = settings.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    var getDeprecatedPlugins = function (settings) {\n      var plugins = Tools.makeMap(settings.plugins, ' ');\n      var hasPlugin = function (plugin) {\n        return has$2(plugins, plugin);\n      };\n      var pluginNames = __spreadArray(__spreadArray([], filter$4(deprecatedPlugins, hasPlugin), true), bind(movedToPremiumPlugins, function (plugin) {\n        return hasPlugin(plugin) ? [plugin + ' (moving to premium)'] : [];\n      }), true);\n      return sort(pluginNames);\n    };\n    var logDeprecationsWarning = function (rawSettings, finalSettings) {\n      var deprecatedSettings = getDeprecatedSettings(rawSettings);\n      var deprecatedPlugins = getDeprecatedPlugins(finalSettings);\n      var hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      var hasDeprecatedSettings = deprecatedSettings.length > 0;\n      var isLegacyMobileTheme = finalSettings.theme === 'mobile';\n      if (hasDeprecatedPlugins || hasDeprecatedSettings || isLegacyMobileTheme) {\n        var listJoiner = '\\n- ';\n        var themesMessage = isLegacyMobileTheme ? '\\n\\nThemes:' + listJoiner + 'mobile' : '';\n        var pluginsMessage = hasDeprecatedPlugins ? '\\n\\nPlugins:' + listJoiner + deprecatedPlugins.join(listJoiner) : '';\n        var settingsMessage = hasDeprecatedSettings ? '\\n\\nSettings:' + listJoiner + deprecatedSettings.join(listJoiner) : '';\n        console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. ' + 'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.' + themesMessage + pluginsMessage + settingsMessage);\n      }\n    };\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$5);\n      return filter$4(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains$3(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = get$9(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return has$2(sectionResult.sections(), name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      var finalSettings = combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n      if (finalSettings.deprecation_warnings !== false) {\n        logDeprecationsWarning(settings, finalSettings);\n      }\n      return finalSettings;\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray$1(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has = function (id) {\n        return has$2(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = function () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    var NotificationManager = function (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex$2(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find$3(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus$1(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = constant(notifications);\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each$k(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter$4(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each$k(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message: message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArray([message], x, false));\n        } else {\n          console.log.apply(console, __spreadArray([message], x, false));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    var getFontCssUrls = function (editor) {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    var transformToUrls = function (editor, cssLinks) {\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map$3(cssLinks, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    var UploadStatus = function () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    };\n\n    var count = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString$1(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find$3(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter$4(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each$k(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var Uploader = function (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(function () {\n                return Optional.from(openNotification).map(apply);\n              }).each(function (n) {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    };\n\n    var openNotification = function (editor) {\n      return function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n    };\n    var createUploader = function (editor, uploadStatus) {\n      return Uploader(uploadStatus, {\n        url: getImageUploadUrl(editor),\n        basePath: getImageUploadBasePath(editor),\n        credentials: getImagesUploadCredentials(editor),\n        handler: getImagesUploadHandler(editor)\n      });\n    };\n    var ImageUploader = function (editor) {\n      var uploadStatus = UploadStatus();\n      var uploader = createUploader(editor, uploadStatus);\n      return {\n        upload: function (blobInfos, showNotification) {\n          if (showNotification === void 0) {\n            showNotification = true;\n          }\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\n        }\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last$2(data).filter(function (level) {\n          return !isEq$1(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get$a(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each$k(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map$3(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each$k(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter$4(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          if (isRtc(editor)) ; else {\n            each$k(result, function (resultItem) {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each$k(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$5(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': function (vars) {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    var FormatRegistry = function (editor) {\n      var formats = {};\n      var get$1 = function (name) {\n        return isNonNullable(name) ? formats[name] : formats;\n      };\n      var has = function (name) {\n        return has$2(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (!isString$1(name)) {\n            each$j(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$k(format, function (format) {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString$1(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get$1,\n        has: has,\n        register: register,\n        unregister: unregister\n      };\n    };\n\n    var each$5 = Tools.each;\n    var dom = DOMUtils.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$9(format, 'preview');\n        if (is$1(previewOpt, false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$5(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$5(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$5(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$5(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$h = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$h(editor);\n      setup$k(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node, similar) {\n          return matchFormat(editor, name, vars, node, similar);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, name, vars, similar) {\n          return matchNodeFormat(editor, node, name, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar, vars) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var shouldIgnoreCommand = function (cmd) {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcerepaint':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    var registerEvents = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = value();\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear(editor, undoManager, index);\n        },\n        reset: function () {\n          reset(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$g = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock$2(node1, rootNode);\n      var block2 = getParentBlock$2(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var isTextBlockOrListItem = function (element) {\n      return isTextBlock$2(element) || isListItem(element);\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      if (contains$1(rootNode, elm)) {\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable$1 = function (blockBoundary) {\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each$k(children, remove$7);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find$3(parents.reverse(), function (element) {\n        return isEmpty$2(element);\n      }).each(remove$7);\n    };\n    var isEmptyBefore = function (el) {\n      return filter$4(prevSiblings(el), function (el) {\n        return !isEmpty$2(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$4(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$k(extractChildren(fromBlock), function (child) {\n        before$4(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$2(toBlock)) {\n        remove$7(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each$k(extractChildren(fromBlock), function (child) {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$8 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$7 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$7(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, always);\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isText = isText$7;\n    var startsWithCaretContainer = function (node) {\n      return isText(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP$1);\n    };\n    var insertBefore = function (node) {\n      if (isText(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline, true);\n    var insertInlineAfter = curry(insertInline, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$7(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$2(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition(text, 1);\n          } else {\n            return CaretPosition(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition(text, text.length - 1);\n          } else {\n            return CaretPosition(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$2(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    curry(findLocation$1, false);\n    curry(findLocation$1, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start;\n      var positions = [];\n      while (currentPos) {\n        var nextPos = walk(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$5(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map$3(clientRects, function (rect) {\n          var clientRect = clone(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$5(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$7(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (var i = 0; i < clientRects.length; i++) {\n          var clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn;\n      var isBelowFn;\n      var isAboveFn;\n      var caretPosition;\n      var result = [];\n      var line = 0;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        var rect = getClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        var clientRect = clone(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\n    var findNode = findNode$1;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var isNodeClientRect = function (rect) {\n      return hasNonNullableKey(rect, 'node');\n    };\n    var findClosestClientRect = function (clientRects, clientX, allowInside) {\n      if (allowInside === void 0) {\n        allowInside = always;\n      }\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        if (isInsideX(clientX, clientRect)) {\n          return allowInside(clientRect) ? clientRect : oldClientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return allowInside(oldClientRect) ? oldClientRect : clientRect;\n        }\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$3(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var checkInside = function (clientRect) {\n        return !isTable$3(clientRect.node) && !isMedia$2(clientRect.node);\n      };\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX, checkInside);\n      if (closestNodeRect) {\n        var includeChildren = checkInside(closestNodeRect);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX, checkInside);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter$4(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last$2(result.positions);\n      } else {\n        var from = CaretPosition.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter$4(elms, isInlineTarget);\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter$4(elms, isInlineTarget);\n        each$k(inlines, function (_inline) {\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$2 = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\n      if (isInlineBoundariesEnabled(editor)) {\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\n          var rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\n          var outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return childNodesCount(elm) === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$2(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteElement = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n    };\n\n    var isEditable = function (target) {\n      return closest$3(target, function (elm) {\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue$4(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).exists(isListComponent);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each$k(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$f = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$e = function (editor) {\n      var startData = value();\n      var longpressFired = Cell(false);\n      var debounceLongpress = last(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return has$2(blockElements, node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$7(node)) {\n        return true;\n      } else if (isElement$5(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$7(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$d = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\n        return elm.dom;\n      }).getOrNull();\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH$2 = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$3 = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains$3(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append$1(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll$1(block, attrs);\n      append$1(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map$3(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find$3(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$1 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last$2(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll$1(element, getForcedRootBlockAttrs(editor));\n          append$1(element, SugarElement.fromTag('br'));\n          if (down) {\n            after$3(SugarElement.fromDom(table), element);\n          } else {\n            before$4(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\n      var os = detect().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$7(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$5(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var isFirstChild = function (elm) {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    var hasParent = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$5(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          var containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$3(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$7(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$7(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\n          return !contains$3(attrClasses, clazz);\n        });\n        var newClasses = __spreadArray(__spreadArray([], attrClasses, true), filteredClasses, true);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains$3(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$7(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$5(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$5(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$7(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\n      var rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before$4(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after$3(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr = function (pos) {\n      return isBr$5(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\n          return isBr$5(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$1 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine$1 = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine = function (editor, _shiftKey) {\n      return shouldBlockNewLine$1(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction = function (editor, evt) {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match([isBrMode(true)], newLineAction.br()),\n        match([inBrContext], newLineAction.br()),\n        match([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert = function (editor, evt) {\n      getAction(editor, evt).fold(function () {\n        insert$1(editor, evt);\n      }, function () {\n        insert$2(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n    };\n\n    var browser = detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$7 = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var platform = detect();\n    var executeKeyupAction = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    var stopImmediatePropagation = function (e) {\n      return e.stopImmediatePropagation();\n    };\n    var isPageUpDown = function (evt) {\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    };\n    var setNodeChangeBlocker = function (blocked, editor, block) {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    var setup$6 = function (editor, caret) {\n      if (platform.os.isOSX()) {\n        return;\n      }\n      var blocked = Cell(false);\n      editor.on('keydown', function (evt) {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$3(elm, textNode);\n          } else {\n            before$4(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$5 = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$c(editor);\n      setup$b(editor, caret);\n      setup$a(editor, caret);\n      setup$9(editor);\n      setup$5(editor);\n      setup$7(editor);\n      setup$8(editor, caret);\n      setup$6(editor, caret);\n      return caret;\n    };\n    var setup$4 = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString$1(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$3 = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\n    };\n    var normalizeSelection = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize(rng));\n    };\n    var setup$2 = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$1(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value();\n      var pageDom = DOMUtils.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start(state, editor);\n      var dragHandler = move(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', function (e) {\n        if (e.keyCode === VK.ESC) {\n          dragEndHandler();\n        }\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.isDefaultPrevented()) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$k(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each$k(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init$2 = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$1 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia$2(target)) {\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue = isContentEditableTrue$4;\n    var isContentEditableFalse = isContentEditableFalse$b;\n    var getContentEditableRoot = function (editor, node) {\n      return getContentEditableRoot$1(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var start = elm.firstChild;\n          if (isNullable(start)) {\n            return false;\n          }\n          var startPos = CaretPosition.before(start);\n          if (isBr$5(startPos.getNode()) && elm.childNodes.length === 1) {\n            return !isNearFakeSelectionElement(startPos);\n          } else {\n            var caretWalker = CaretWalker(elm);\n            var newPos = caretWalker.next(startPos);\n            return newPos && !isNearFakeSelectionElement(newPos);\n          }\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (isNullable(targetBlock)) {\n            return false;\n          }\n          if (targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return !dom.isChildOf(caretBlock, targetBlock) && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                setRange(range);\n                editor.getBody().focus();\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init$2(editor);\n        setup$1(editor);\n        setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq(nodeElm, elm)) {\n            remove$6(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse && !isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var documentElementEditingFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = noop;\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      var setupRtc = function () {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      var setup = function () {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (Env.ie >= 11) {\n          bodyHeight();\n          disableBackspaceIntoATable();\n        }\n        if (Env.ie) {\n          selectAll();\n          disableAutoUrlDetect();\n          ieInternalDragAndDrop();\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$6 = DOMUtils.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set$1(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', function () {\n        remove$7(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$3(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkSchemaSettings = function (editor) {\n      var settings = editor.settings;\n      return removeUndefined({\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements,\n        padd_empty_block_inline_children: settings.format_empty_lines\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc(),\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign(__assign({}, mkParserSettings(editor)), mkSchemaSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader$1 = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\n      var promises = [new promiseObj(function (resolve, reject) {\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\n        })];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([new promiseObj(function (resolve, reject) {\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\n          })]);\n      }\n    };\n    var loadContentCss = function (editor) {\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\n      var fontCss = getFontCss(editor);\n      var css = editor.contentCSS;\n      var removeCss = function () {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      var loaded = function () {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      if (editor.settings.content_style) {\n        appendStyle(editor, editor.settings.content_style);\n      }\n      return allStylesheets;\n    };\n    var preInit = function (editor) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    var loadInitialContent = function (editor) {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    var initEditorWithInitialContent = function (editor) {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$e(editor);\n      setup$3(editor);\n      if (!isRtc(editor)) {\n        setup$2(editor);\n      }\n      var caret = setup$4(editor);\n      setup$f(editor, caret);\n      setup$d(editor);\n      setup$g(editor);\n      var setupRtcThunk = setup$i(editor);\n      preInit(editor);\n      setupRtcThunk.fold(function () {\n        loadContentCss(editor).then(function () {\n          return initEditorWithInitialContent(editor);\n        });\n      }, function (setupRtc) {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(function () {\n          setupRtc().then(function (_rtcMode) {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n          }, function (err) {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n          });\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$1(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      var translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + ('<body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\" aria-label=\"' + translatedAriaText + '\">') + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var iframeTitle = editor.translate('Rich Text Area');\n      var ifr = createIframeElement(editor.id, iframeTitle, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$4 = DOMUtils.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$j(loadIcons, function (svgData, icon) {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString$1(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$3 = DOMUtils.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each$k(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone$3(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$6(element, attr.name);\n        });\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual = function (editor, elm) {\n      return addVisual$1(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$7(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var bindRange = function (editor, binder) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\n    };\n    var mapRange = function (editor, mapper) {\n      return bindRange(editor, compose1(Optional.some, mapper));\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$1(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    var processValue = function (value) {\n      if (typeof value !== 'string') {\n        var details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$4 = Tools.each;\n    var map = Tools.map, inArray = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (command.toLowerCase() !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n            self.editor.focus();\n          } else {\n            restore(self.editor);\n          }\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$4(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$4(commandList, function (callback, command) {\n          each$4(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'mceFocus': function (_command, _ui, value) {\n            focus(editor, value);\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$4('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, { value: value });\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'Lang': function (command, ui, lang) {\n            self.toggleFormat(command, {\n              value: lang.code,\n              customValue: lang.customCode\n            });\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': noop,\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$1(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has(elm, cls) && state === false) {\n        remove$3(elm, cls);\n      } else if (state) {\n        add$1(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set$1(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$6(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var lcName = name.toLowerCase();\n        var event = normalize$3(lcName, args || {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        var handlers = this.bindings[lcName];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = __spreadArray([wrappedCallback], handlers, true);\n            } else {\n              handlers = __spreadArray(__spreadArray([], handlers, true), [wrappedCallback], false);\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$j(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var filteredHandlers = partition(handlers, function (handler) {\n                  return handler.func === callback;\n                });\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$k(filteredHandlers.pass, function (handler) {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$j(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$2 = DOMUtils.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$j(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$j(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains$3(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$3 = Tools.each, explode$1 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var parseShortcut = function (pattern) {\n      var key;\n      var shortcut = {};\n      each$3(explode$1(pattern.toLowerCase(), '+'), function (value) {\n        if (value in modifierNames) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      var id = [shortcut.keyCode];\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (Env.mac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (Env.mac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$3(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$3(explode$1(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$3 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var DOM$1 = DOMUtils.DOM;\n    var extend$3 = Tools.extend, each$2 = Tools.each;\n    var resolve = Tools.resolve;\n    var ie = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager.languageLoad = this.settings.language_load;\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve(scope) : 0;\n          callback = resolve(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$1.getParent(self.id, 'form')) {\n            each$2(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM = DOMUtils.DOM;\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$1(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter$4(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '10.9',\n      releaseDate: '2023-11-15',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$l(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$9(elm, 'name').filter(function (name) {\n              return !DOM.get(name);\n            }).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              targets = targets.concat(DOM.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$1(explode(l), function (id) {\n                var elm = DOM.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$1(document.forms, function (f) {\n                    each$1(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$1(DOM.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$1(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString$1(id)) {\n          return find$3(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString$1(selector)) {\n          each$1(DOM.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', false, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$1(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max$1(rect.x, cropRect.x);\n      var y1 = max$1(rect.y, cropRect.y);\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max$1(0, clampRect.x - x1);\n      var underflowY1 = max$1(0, clampRect.y - y1);\n      var overflowX2 = max$1(0, x2 - cx2);\n      var overflowY2 = max$1(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$2 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp,\n      create: create$2,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$1 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$1();\n\n    var each = Tools.each, extend$1 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\n      }\n      each$j(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min = Math.min, max = Math.max, round = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min(r, min(g, b));\n        var maxRGB = max(r, max(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round(h),\n          s: round(s * 100),\n          v: round(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max(0, min(saturation, 1));\n        brightness = max(0, min(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round(255 * (r + match));\n        g = round(255 * (g + match));\n        b = round(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString$1(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color,\n        ImageUploader: ImageUploader\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n"],"names":["tinymce","IconManager","add","icons","call","id","global$7","util","Tools","resolve","global$6","isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isNull","a","isBoolean","isFunction","noop","constant","tripleEquals","b","never","always","none","NONE","fold","n","_s","isSome","isNone","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","f","s","Optional","from","nativeIndexOf","indexOf","nativePush","push","flatten","xs","r","i","len","length","apply","findMap","arr","is","lhs","rhs","comparator","left","cat","someIf","assumeExternalTargets","editor","externalTargets","getParam","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","global$5","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","menu","items","sanitizeWith","extracter","ListOptions","label","__assign","Object","assign","arguments","p","hasOwnProperty","this","keys","has","obj","key","global$4","global$3","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","predicate","collapsed","contents","cloneContents","walker","firstChild","elements","current","next","hasProtocol","url","test","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","selection","getNode","isImageFigure","dom","select","getParent","getAnchorText","anchorElm","innerText","textContent","getContent","format","replace","hasLinks","grep","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","getRng","nodeType","className","linkDomMutation","attachState","data","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","applyLinkOverrides","acc","each$1","getLinkAttrs","undoManager","transact","attach","focus","setAttribs","updateLink","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","unwrapOptions","cls","class","pred","onTrue","onFalse","props","k","internalFilter","v","_k","link","sanitizedData","isDomSafe","settings","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","findTextByValue","catalog","isListGroup","DialogChanges","initialData","linkCatalog","persistentData","onCatalogChange","change","catalogs","fieldName","anchor","persistentText","hasPersistentText","meta","getDelta","onChange","getData","getTitleFromUrlChange","ts","rawIndexOf","global$2","global$1","tryEmailTransform","message","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","AnchorListOptions","anchorNodes","anchors","ClassListOptions","getLinkClassList","global","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","extractor","convertURL","linkList","getLinkList","callback","send","success","JSON","parse","err","parseJson","error","_","output","then","optItems","LinkListOptions","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open$1","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","transform","setEditorTimeout","windowManager","confirm","state","delayedConfirm","DialogConfirms","pData","handleSubmit","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","buttons","primary","_a","newData","setData","makeDialog","spec","open","getLink","getSelectedLink","getStart","gotoLink","targetEl","$","scrollIntoView","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","openDialog","gotoSelectedLink","toggleState","toggler","on","off","toggleActiveState","updateState","setActive","mode","isReadOnly","toggleEnabledState","setDisabled","toggleUnlinkState","hasLinks$1","parents","e","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","addButton","setupButtons","addMenuItem","shortcut","setupMenuItems","addContextMenu","update","element","setupContextMenu","onSetupLink","buttonApi","addContextForm","launch","hasContextToolbar","initValue","commands","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","setupContextToolbars","metaKeyPressed","preventDefault","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","useQuickLink","fire","toolbarKey","register","addShortcut","setup","isType$1","eq$1","isObject","isUndefined","isNullable","isNonNullable","isNumber","isArrayOf","compose","fa","fb","args","_i","constant$1","identity$1","curry","fn","initialArgs","restArgs","all","not","die","global$g","__rest","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","pack","ar","l","slice","nativeSlice","contains$2","range$2","num","chunk$1","array","map$2","partition$3","pass","fail","filter$2","foldr","eachr","foldl","find$5","until","findUntil","findIndex$1","bind$3","reverse","difference","a1","a2","mapToObject","pure$2","copy","get$f","head","last$2","hasOwnProperty$1","map$1","tupleMap","tuple","mapToArray","find$4","values","get$e","has$2","hasNonNullableKey","is$1","lift2","oa","ob","checkRange","str","substr","start","contains$1","endsWith","suffix","trim$1","isNotEmpty","isSupported$1","style","getPropertyValue","fromDom","SugarElement","html","scope","div","innerHTML","hasChildNodes","childNodes","console","tag","createTextNode","Function","SimpleResultType","name$2","isElement$2","isText$1","isDocument","isDocumentFragment","cached","called","unknown$3","nu$d","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$3","unknown","detect$3","candidates","userAgent","candidate","search","normalVersionRegex","checkContains","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$c","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$b","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","mediaMatch","query","matchMedia","matches","platform","userAgentDataOpt","browser","userAgentData","brands","uaBrand","lcBrand","parseInt","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","PlatformDetection","navigator","detect$1","selector","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq","e1","e2","contains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","owner$4","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","offsetParent","children","child$2","index","cs","spot","offset","leaf","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","getShadowRoot","getShadowHost","inBody","fbc","fab","doc","rawSet","setAttribute","set$8","setAll$1","get$d","getOpt","has$1","hasAttribute","remove$7","removeAttribute","internalSet","property","setProperty","internalRemove","removeProperty","set$7","setAll","css","setOptions","get$c","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue","remove$6","reflow","offsetWidth","Dimension","getOffset","get","parseFloat","aggregate","properties","isNaN","set","h","getOuter","max","cumulativeInclusions","api$3","getBoundingClientRect","height","offsetHeight","get$b","getOuter$2","r$1","top","translate","y","SugarPosition","firstDefinedOrZero","absolute$3","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport$1","box","boxPosition","api$2","get$a","getOuter$1","fromRawEvent$1","rawEvent","event","el","shadowRoot","isOpenShadowHost","composed","composedPath","getOriginalEventTarget","stop","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","handler","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","before$2","marker","after$2","sibling","nextSibling","append$2","prepend$1","firstChild$1","append$1","empty","rogue","remove$5","unwrap","wrapper","children$1","get$9","_DOC","scrollTo","bounds$1","width","right","bottom","getBounds$3","_win","scroll","get$8","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","walkUp","navigation","view","owner","rest","Navigation","freeze","__proto__","frameElement","find$2","path","d","paths","pathTo","frames","loc","bounds","box$1","xy","w","absolute$2","position","value$3","o","isValue","isError","_opt","_f","onValue","mapError","toOptional","error$1","onError","Result","fromOption","opt","fold$1","res","stype","serror","svalue","Value","SimpleResult","field$2","newKey","presence","prop","ifField","ifCustom","instantiator","baseMerge","merger","objects","ret","j","curObject","deepMerge","old","merge$1","defaultedThunk","fallbackThunk","process","defaulted$1","fallback","mergeWithThunk","baseThunk","ResultCombine","errors","partitions","results","formatObj","input","stringify","nu$a","getErrorInfo","value$2","validator","extract","custom","anyValue$1","fallbackAccess","bundle","extractField","field","av","bundleAsOption","optValue","ov","result","missingRequired","requiredAccess","optionAccess","optionDefaultedAccess","valueThunk","getDelegate","getSetKeys","filter$1","objOfOnly","fields","delegate","objOf","fieldNames","extra","unsupported","unsupportedFields","fields_1","extractFields","fieldStrings","_okey","_presence","_instantiator","arrOf","oneOf","props_1","setOf$1","keys$1","validatedKeys","validateKeys","validKeys","vk","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","postMessageable","choose$2","branches","missingKey","chosen","ch","branch","missingBranch","vp","chooseFrom","valueOf","setOf","asRaw","errs","extraction","errInfo","formatError","asRawOrDie$1","es","choose$1","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredFunction","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","Cell","initial","Adt","cases","constructors","adt","acase","count","argLength","branchKeys","reqKey","foldArgs","log","params","bothErrors","firstError","secondError","bothValues","_a$2","base","wrap$1","wrap$2","wrapAll","keyvalues","kv","wrapAll$1","ensureIsRoot","isRoot","ancestor$2","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","can","abort","run","nu$9","parts","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","tap","focus$4","postBlur","postPaste","receive","execute$5","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","dispatch","getSystem","triggerEvent","derive$2","configs","run$1","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","runOnName","get$7","set$5","content","docDom","fragment","createDocumentFragment","contentElements","fromHtml$1","getHtml","container","clone","cloneNode","isDeep","clone$2","shallow","events$i","originator","isRecursive","warn","DefaultEvents","events","unique","generate$6","prefix","time","Date","getTime","floor","random","prefix$1","idAttr$1","idAttr","writeOnly","defineProperty","writable","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","debugInfo","triggerFocus","triggerEscape","broadcast","broadcastOn","broadcastEvent","build","addToWorld","removeFromWorld","addToGui","removeFromGui","isConnected","singleton$1","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","toFunctionAnnotation","premadeTag","premade$1","comp","makeApi","apiFunction","markAsSketchApi","getApis","NoState","init","nu$8","readState","byInnerKey","indexKey","chain","nu$7","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","fuse","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","handlers","all$2","any","fuse$1","c","missingOrderError","combineGroups","byEventName","assembled","rawHandler","read$2","assemble","purpose","uncurried","partition$1","mergeValues","baseBehaviour","schema$z","toEvents","read","attr","supports","classList","add$2","clazz","add$4","add$3","remove$2","remove$4","remove$3","get$6","cleanClass","add$1","remove$1","get$5","set$4","generate$4","behaviours","behaviour","getBehaviours$2","validated","optBlobThunk","blob","config","generateFrom$1","generateFrom","getEvents","bList","bData","baseEvents","behaviourEvents","nameToHandlers","groupByEvents","combine$1","build$2","getMe","systemApi","toInfo","bBlob","getBehaviours$3","getData$2","definition","subject","innerHtml","domChildren","renderToDom","defnA","mod","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine$2","getDomDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","child","text$1","external$2","extSpec","uids","build$1","getPremade","userSpec","specEvents","buildSubcomponents","completeSpec","buildFromSpec","isSketchSpec$1","premade","ClosestOrAncestor","ancestor","EventConfiguration","ancestor$1","closest$3","closest$2","child$1","descendant","querySelector","one","closest$1","manager","ariaId","isPartOf$1","queryElem","dependent","dep","find$1","isAriaPartOf","eventConfig","monitorEvent","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","outcome","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","processEvent","menuFields","itemFields","itemSchema$3","_initSize","tieredMenuMarkers","markers$1","required","onPresenceHandler","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","restriction","adt$a","southeast","southwest","northeast","northwest","south","north","east","west","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","min","clamp$1","restrictions","dir","getRestriction","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","eastEdgeX$1","west$2","westEdgeX$1","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","apiName","bName","markAsBehaviourApi","wrapApi","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$8","create$9","modeSchema","createModes","modes","createModes$1","branchKey","Receiving","ActivePosition","posConfig","useFixed","getDocument","focus$3","hasFocus","root","activeElement","preserve$1","refocus","focused","descend","child_1","oldFocus","newFocus","NuPositionCss","toPx","applyPositionCss","toOptions","adt$9","relative","fixed","positionWithDirection","posName","decision","decisionRect","rect","decisionX","decisionY","decisionRight","decisionBottom","reposition","origin","toBox","viewport","getBounds","pos","translate$2","outerScroll","AttributeValue","relative$1","fixed$1","placementAttribute","getPlacement","adt$8","fit","nofit","attempt","bubbleOffset","adjustedBounds","applyRestriction","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","newX","newY","boundsX","boundsY","boundsRight","boundsBottom","originInBounds","sizeInBounds","visibleW","visibleH","determinePosition","fits","fittedBox","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcReposition","isPartlyVisible","_b","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","calcMaxSizes","classesOn","classesOff","layout","testY","singleton","doRevoke","clear","isSet","destroyable","destroy","unbindable","value$1","bind$2","capture","capture$1","fromRawEvent","timerAttr","applyTransitionCss","transition","lastPlacement","shouldTransition","placer","shouldApplyTransitionCss","hasAll","isTransitioning$1","intermediatePosition_1","intermediateCssOptions","intermediate","round","toFixed","newValue","hasChanges","timerId","clearTimeout","timer","transitionEnd","transitionCancel","isSourceTransition","pseudoElement","propertyName","transitionDone","transitionStarted","transitionStart_1","duration","times","delay","dur","getTransitionDuration","requestAnimationFrame","setTimeout","setupTransitionListeners","startTransitioning","setMaxHeight","absMax","setMax$1","anchored","available","expandable$1","defaultOr","options","dephault","go","anchorBox","elementBox","panelWidth","panelHeight","attemptBestFit","isVisible","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","bestNext","attempts","preference","positionCss","position$2","setPlacement$1","setPlacement","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","insetNortheast","insetNorthwest","insetNorth","insetSoutheast","insetSouthwest","insetSouth","insetEast","insetWest","nu$4","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$y","get$4","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","MakeshiftAnchor","adt$7","screen","absolute","point","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$1","getRootPoint","frame","frameOwner","compOwner","getBox","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","NodeAnchor","nodeBox","SimRange","soffset","finish","foffset","adt$6","before","after","Situ","situ","adt$5","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","range","relativeToNative","finishSitu","createRange","setStart","setStartAfter","setEndBefore","setEnd","setFinish","exactToNative","toRect","adt$4","fromRange","startOffset","endOffset","asLtrRange","ranges","getRanges","rev","doDiagnose","diagnose","FocusInsideModes","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","descendants","querySelectorAll","all$3","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","focusNode","focus_1","makeRange","same","anchorOffset","focusOffset","getFirstRect","rects","getClientRects","point$1","descendOnce","last","get$3","descendOnce$1","getAnchorSelection","getSelection","getNativeSelection","sel","getExact","modStart","modFinish","SelectionAnchor","selectionBox","optRect","getBounds$1","rawRect","targetElement","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","TransitionSchema","PositionSchema","PlacementSchema","place","anchoring","placee","lastPlace","overrideOptions","simple","positionWithin","posState","placementSpec","boxElement","boundsBox","positionWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","getFixedOrigin","getRelativeOrigin","newState","doPlace","vis","PositionApis","getMode","pConfig","_pState","reset","reset$2","PositioningState","Positioning","fireDetaching","fireAttaching","attach$1","replaceChildren","newChildren","childComp","detachChildren$1","deleted","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","onOpen","close$1","onClose","isOpen$1","_sandbox","_sConfig","isOpen","cloak","_sState","sink","cssKey","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","isPartOf","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","isExtraPart","fireEventInstead","fe","schema$w","receivingChannel","doReposition","onLoad$5","repConfig","repState","onLoad","onUnload$2","onUnload","RepresentApis","setValue","ActiveRepresenting","resetOnDom","_se","memory$1","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","memory","manual","setValue$2","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","forbidden","_v","get$2","dump","augment","SketchBehaviours","_placeholder","adt$3","single","multiple","isSubstituted","substitute","compSpec","placeholders","uiType","newSpec","subPlaceholder","scan","req","childSpecs","substituted","valuesThunk","preprocessor","single$2","placeholder","adt$2","external","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine","partSpec","partValidated","defaults","generate$3","np","g","doGenerateOne","pname","generateOne$1","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","components$1","ps","ph","replacements","used","substituteAll","substitutePlaces","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","generateOne","asRawOrDie","partSchemas","partUidsSchemas","baseS","composite$1","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","rawConfig","extraApis","configFields","single$1","composite","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","find","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disabled","disable$1","enable$1","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","enable","disable","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight","isHighlighted","onHighlight","queryTarget","getFirst","_hState","itemClass","getLast","getDelta$2","selected","dest","getCandidates","HighlightApis","dehighlightAll","dehighlight","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","getByIndex","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","isControl","isNotShift","rule","classification","reportFocusShifting","prevFocus","dom$2","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$6","cyclicField","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","cycle","findCurrent","tabstop","stopIndex","useTabstopAt","isTabstop","cyclic","goFromTabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","execute","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid$1","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","flatgrid","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locateVisible","locate","findIndex","withGrid","numCols","address","newIndex","row","column","cycleHorizontal$1","oldRow","oldColumn","colsInRow","newColumn","cycleVertical$1","newRow","newCol","schema$u","focusIn$3","gridConfig","_gridState","first","doMove$2","gridState","identified","handleTab","captureTab","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","findCurrent$1","getKeyupRules$4","FlatgridType","horizontal","tryCycle","schema$t","execute$2","flowConfig","focusIn$2","_state","getInitial","moveLeft$2","moveRight$2","doMove$1","flowState","executeOnMove","doEscape","getKeyupRules$3","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$s","focusIn$1","matrixConfig","previousSelector","selectors","doMove","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","getKeydownRules$1","menuState","moveOnTab","getKeyupRules$1","MenuType","schema$q","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","execution","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","replaceState","removee","foundChild","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","ReplaceApis","append","appendee","prepend","prependee","replaceBy","replaceePred","Replacing","eventHandlers","events$d","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","blur$1","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","ariaInfo","aria","updateClass","toggleClass","toggle$2","set$1","ToggleApis","toggle","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$a","optAction","hoverEvent","focusEvent","onHover","onFocus$1","hover","focus$1","schema$p","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$o","owner$2","parts$h","schema$n","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$2","separator","parts$g","itemInfo","builder","unit","fakeFocus","markers","schema$m","grid","movementInfo","rowSelector","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","extractPreparedMenu","prep","LayeredState","expansions","menus","directory","getPreparedMenu","menuValue","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","menuItems","menuPaths","_triggerItem","generate$2","expand","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","getItemByValue","extraPath","revPath","menuIndex","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggerData","collapseItem$1","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","getItemValue","toDirectory","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","nbMenu","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","componentMap","primaryName","makeSketch","buildMenus","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","maybeActivePrimary","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","collapseItem","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip$2","global$f","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","fromHtml","getAttrs","record","isSketchSpec","anyInSystem","asSpec","_typeof","Symbol","iterator","_setPrototypeOf","setPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","_construct","Parent","Class","instance","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","_iterableToArray","minLen","_unsupportedIterableToArray","TypeError","_nonIterableSpread","arr2","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","seal","create$5","_ref","apply$1","fun","thisValue","Func","func","arrayForEach","unapply","forEach","arrayPop","pop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","RegExp","typeErrorCreate","_len2","_key2","thisArg","_len","_key","addToSet","lcElement","clone$1","object","newObject","lookupGetter","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","getGlobal","_createTrustedTypesPolicy","trustedTypes","createPolicy","ATTR_NAME","currentScript","policyName","purify","createDOMPurify","DOMPurify","removed","originalDocument","DocumentFragment","HTMLTemplateElement","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","getElementsByTagName","importNode","documentMode","hooks","createHTMLDocument","PARSER_MEDIA_TYPE","transformCaseFunc","MUSTACHE_EXPR$1","ERB_EXPR$1","DATA_ATTR$1","ARIA_ATTR$1","IS_SCRIPT_OR_DATA$1","ATTR_WHITESPACE$1","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","namespaceURI","parentTagName","_forceRemove","outerHTML","_removeAttribute","attribute","getAttributeNode","_initDocument","dirty","leadingWhitespace","dirtyPayload","parseFromString","createDocument","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isClobbered","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","allowedTags","firstElementChild","_basicCustomElementTest","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","forceKeepAttr","setAttributeNS","_sanitizeShadowDOM","shadowNode","shadowIterator","nextNode","sanitize","importedNode","oldNode","returnNode","toStaticHTML","nodeIterator","shadowroot","serializedHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","sanitizeHtmlString","global$e","rtlTransform","defaultIconName","defaultIcon","getIconName","rtlName","addToEnd","ensureTrailing","lookupIcon","get$1","iconProvider","addFocusableBehaviour","renderIcon$2","iconName","fallbackIcon","rtlIconClasses","needsRtlTransform","iconHtml","render$3","notificationIconMap","warning","Notification","iconNames","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","banner","iconChoices","level","memButton","notificationIconSpec","closeButton","ItemResponse","rate","cancel","throttle","global$d","repeatLeft","rootNode","isBlock","getContentEditable","isBoundary","backwards","create$4","getDoc","extractContents","insertNode","normalize","last$1","setCursorLocation","getEnd","isWhitespace","chr","stripTriggerChar","triggerCh","getContext","initRange","minChars","getRoot","char","charAt","findChar","lastIndexOf","triggerChar","findStart","createRng","selectNode","global$c","toLast","isText","toLeaf","isElement$1","lookupWithContext","getDatabase","context","fetchOptions","database","startText","autocompleters","lookupByChar","autocompleter","isPreviousCharContent","isStartOfWord","lookupData","ac","fetch","maxResults","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ToolbarMode","ItemResponse$1","navClass","selectableClass","presetClasses","normal","color","tickedClass","iconClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","menuClasses","dom$1","chunk","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","inserttable","colorswatch","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","abs","ceil","SimpleBehaviours","namedEvents","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","getTooltip","ActiveTooltipping","tooltipConfig","clearTooltip","clearTimer","resetTimer","isShowing","popup","tooltipDom","tooltipComponents","setTooltip","show","TooltippingSchema","Tooltipping","global$b","global$a","getHeightSetting","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","_a$1","FocusMode","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerTarget","inline","fixedContainerSelector","fixedToolbarContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","uiMothership","setupReadonlyModeSwitch","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$9","convertText","mac","alt","ctrl","shift","access","updated","segment","renderIcon$1","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","ariaLabel","domTitle","renderItemStructure","providersBackstage","renderIcons","providerBackstage","baseDom","itemText","iconSvg","iconContent","colorClass","renderColorStructure","iconSpec","leftIcon","checkmark","checkMark","textRender","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","getSink","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","escape","render$2","extras","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","shouldHighlight","cardText","parts$f","hexColour","shorthandRegex","longformRegex","isHexString","hex","normalizeHex","startsWith","numChars","removeFromStart","toUpperCase","toHex","fromRgba","rgbaColour","red","green","blue","round$1","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","longForm","splitForm","hexString","m","getLongForm","exec","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireResizeContent","hsvColour","fromRgb","minRGB","maxRGB","hsvToHex","anyToHex","canvas","canvasContext","clearRect","fillStyle","fillRect","getImageData","global$8","storageName","choiceItem","defaultColors","colorCache","storageString","getItem","localstorage","cache","idx","splice","unshift","setItem","ColorCache","hasCustomColors$1","getColors$2","unmapped","getColorMap","colorMap","colors","mapColors","addColor","fallbackColor","getColorCols$1","defaultCols","getColorCols$2","sqrt","getAdditionalColors","hasCustom","applyColor","onChoice","colorPickerDialog","dialog","colorOpt","getColors$1","getFetch$1","setIconColor","splitButtonApi","newColor","setIconFill","registerTextColorButton","lastColor","addSplitButton","optCurrentRgb","getCurrentColor","currentRgb","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","isValid","colorpicker","_api","details","alert","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","isActive","renderChoiceItem","deriveMenuMovement","menuMarkers","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","sizeLabelId","makeCells","emptyLabelText","memLabel","selectedRow","selectedColumn","selectCells","backstage","useCustomColors","initData","allowCustomColors","colorinput","hasCustomColors","getColors","getColorItems","getColorCols","shared","providers","widgetSpec","separator$3","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","downwardsCaret","renderSubmenuCaret","nested","createToggleMenuItem","toggle$1","createSeparatorMenuItem","createFancyMenuItem","render","fancy","createAutocompleteItems","createCardMenuItem","card","createAutocompleterItem","autocomplete","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","cancelIfNecessary","hideIfNecessary","lastElement","getAutocompleters","popups","getAll","triggerChars","stringArray","datasetValues","dv","register$b","newContext","getTriggerContext","lookup$2","doLookup","lookupInfo","matchLength","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","ld","focusMode","ContentFocus","createMenuFrom","display","autocompleterUiApi","onKeypress","isMenuOpen","isProcessingAction","getView","redirectKeyToItem","stopImmediatePropagation","AutocompleterEditorEvents","closest","DelayedFunction","ref","schedule","getTouch","touches","setup$d","rawSettings","stopBackspace","tapEvent","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","monitor","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive","rawTarget","adt$1","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerOnUntilStopped","Registry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","unregister","tagId","readOrTag","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","listeners","_logger","fromExternal","listener","schema$l","parts$e","excludeFactory","exclude$1","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel$2","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","schema$k","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","inputAttributes","inputStyles","inputClasses","Input","exports$1","module","exports","define","require","globalThis","EphoxContactWrapper","commonjsGlobal","promise","setTimeoutFunc","Promise","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","race","setImmediate","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","boltExport","HighlightOnOpen","Promise$1","nu$3","baseFn","callbacks","nCallback","isReady","LazyValue","pure","errorReporter","make$5","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","CouplingState","coupled","Coupling","partType$1","kernel","colorFn","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","highlightOnOpen","processed","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","_onOpenSync","_highlightOnOpen","togglePopup","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaOwner","sandboxClasses","sandboxBehaviours","matchWidth","useMinWidth","buttonWidth","set$6","sandboxFields","schema$j","parts$d","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","getValueFromEvent","spectrum","SliderParts","sliderChangeEvent","getEventSource","isTouchEvent$2","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange$3","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","sliderValue$2","findValueOfOffset$1","handleMovement$2","moveBy$2","findPositionOfValue$1","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","sliderVal","setToMin","setToMax","findValueOfOffset","findPositionOfValue","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$1","sliderValue$1","handleMovement$1","moveBy$1","findOffsetOfValue","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange","sliderValue","handleMovement","isVerticalMovement","moveBy","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","choose","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","changeValue","getInitialValue","onInit","resetToMin","resetToMax","fieldsUpdate","sliderUpdate","paletteUpdate","owner$1","schema$i","getPartName$1","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","getClass","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","rgbFormSketcher","setValueRgb","onInvalidInput","onValidInput","isHexInputEvent","hexField","copyRgbToHex","onValidRgb","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","makeFactory","colourPickerSketcher","updates","rgbForm","onInvalidHex","sbPalette","_translate","setColour","ctx","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_thumb","_slider","setHue","_apis","setPaletteHue","setThumb","setPaletteThumb","paletteFactory","hueDegreesToSlider","paletteRgba","paletteHue","memSlider","sliderFactory","memPalette","memRgb","updatePalette","_hex","palette","updateFields","runUpdates","hexToHsv","oldHue","newHsv","newHex","onPaletteUpdate","hueSliderToDegrees","oldRgb","oldHsv","onSliderUpdate","ComposingConfigs","english","translate$1","getEnglishText","processors","withComp","optInitialValue","getter","setter","RepresentingConfigs","mem","rawProcessors","other","rawValue","postprocess","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","targetComp","isPseudoStop","platformNeedsSandboxing","create$3","resize$3","tCanvas","get2dContext","drawImage","getWidth$1","image","naturalWidth","getHeight$1","naturalHeight","canvasToBlob","quality","HTMLCanvasElement","toBlob","uri","toDataURL","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","revokeImageUrl","URL","revokeObjectURL","create$2","getCanvas","initialType","getType","toAdjustedDataURL","canvasToDataURL","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","blobUrl","createObjectURL","Image","removeListeners","loaded","blobToImage","blobToCanvas","fromCanvas","clamp","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","applyColorFilter","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","complexAdjustableColorFilter","matrixAdjustFn","adjust","invert$1","basicColorFilter","brightness$1","contrast$1","sharpen$1","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","convoluteFilter","gamma$1","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","ceilWithPrecision","precision","mul","upper","invert","sharpen","gamma","contrast","flip","axis","applyFlip","flip$1","crop","applyCrop","crop$1","rotate","angle","rad","PI","sin","cos","newWidth","newHeight","applyRotate","rotate$1","renderIcon","iconsProvider","renderIconFromPack","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayIcon","isSeparator$1","separator$2","realItems","isMenuItemReference","unwrapReferences","itemWithValue","generateValueIfRequired","isExpandingMenuItem","submenuItems","getFromExpandingItem","getFromItem","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","schema$h","coupledPart","selfName","otherName","lock","onLockedChange","parts$c","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","renderSizeInput","converter","ratioEvent","makeIcon","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","otherFieldText","cValue","oValue","optCurrent","optOther","value1","value2","cSize","oSize","ratioSizeConversion","internal","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","cropPanelComponents","getRect","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","newCanvas","resize$2","resize$1","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","adjustR","adjustG","adjustB","adjustColors","colorize$1","colorize","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","updateWithTouchData","changedTouches","isTouchEvent$1","Delimiter","CropRect","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","deltaX","deltaY","deltaW","deltaH","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","setInnerRect","repaint","updateElementRect","newRect","setRect","relativeRect","cropContainer","blocker","blockerElm","cropBlocker","handleElm","cropHandle","_c","eventOverlay","downButton","startX","startY","handleEvents","overlayEvents","sugarDoc","handleElement","getElementById","docSize","scrollWidth","scrollHeight","getDocumentSize","screenX","screenY","cursor","drag","DragHelper","handleFocus","activeHandle","moveAndBlock","SPACEBAR","toggleVisibility","elems","setClampRect","getInnerRect","setViewPortRect","helper","setButtonEnabled","enabled","renderImageTools","initialState","canUndo","canRedo","blobState","tempState","undoStack","setBlobState","createState","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","updateTempState","newTempState","addTempState","applyTempState","postApply","temp","currentState","getHistoryStates","undoEnabled","redoEnabled","makeState","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","block","unblock","editPanel","applyButton","updateSrc","blobManipulate","blobToImageResult","catch","manipulate","currentUrl","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","aImg","lastViewRect","viewRect","inflate","zoomFit","currentZoom","newZoom","renderImagePanel","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","itemExecute","schema$g","parts$b","previewing","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","attemptSelectOver","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","timeout","errorThunk","timedOut","FutureResult","worker","separator$1","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","errorId","make$2","factories","bar","interpreter","renderBar","collection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","encodeAllRaw","renderCollection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel","iframe","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","renderIFrame","iframeSpec","renderDialogButton","checkbox","repBehaviour","toggleCheckboxHandler","memIcons","renderCheckbox","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","valueOpt","colorButton","_field","renderColorInput","colourPickerFactory","memPicker","picker","dropzone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","getSetting","file","filterByExtension","memInput","accept","renderDropZone","renderGrid","listbox","initialItem","listBoxWrap","sketchSpec","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","urlBackstage","updateHistory","urlEntry","addToHistory","fileType","urlInputValue","getLinkInformation","history","historyTargets","getHistory","getItems","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","header","renderTd","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments$2","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","ColorInputBackstage","isDraggableModal","isDraggableModal$1","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$8","doEnrich","newItems","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$8","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","hasContentEditableState","isElement","contentEditable","isContentEditableTrue","isContentEditableFalse","getElementText","isValidAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","hasTitle","LinkTargets","elms","getTargetElements","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getFilePickerCallback","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","types","getPickerTypes","getPickerSetting","entry","parts$a","partType","schema$f","itemsPart","parts$9","CustomList","_external","shell","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","schema$e","parts$8","Toolbar","toolbarBehaviours","setGroups","groups","setup$a","isDocked$2","getBehaviours$1","StaticHeader","isDocked","getBehaviours","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPos","revertToOriginal","clearInitialPos","offsetBox_1","_left","_top","_right","_bottom","getMorph","getModes","morphToOriginal","setInitialPos","storePrior","winBox","top_1","isTop","morphToFixed","morphToStatic","setDocked","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","refresh$4","lazyViewport","morph","refreshInternal","getMorphToOriginal","resetInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","visible","initialBounds","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","isDockedMode","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","headerElem","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","win$1","getStickyToolbarOffset","getDockingMode","StickyHeader","lazyHeader","isPositionedAtTop","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isTransitioning","toggleGrow","ActiveSliding","onGrown","SlidingSchema","Sliding","schema$d","getPartName","make$1","getSlotNames","onSlot","def","slot","doShowing","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","bridged","createSidebar","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","focusBusyComponent","throbber","setup$7","lazyThrobber","throbberState","stealFocus","isFocusEvent","targetElm","editorManager","command","tabIndexAttr","dataTabIndexAttr","iframeElement","tabIndex","toggleEditorTabIndex","_root","_behaviours","getBusySpec$1","throbberFocus","busyComp","toggleThrobber","within","withinWidth","apportion","total","parray","toUnit","setGroups$1","storedGroups","bGroups","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","overflows","overflower","divide","tryFit","fitLast","overflow","fitAll","partition","schema$c","schema$b","parts$7","expandable","setMax","schema$a","parts$6","toggledClass","toolbarSandbox","bounder","FloatingToolbarButton","makeSandbox","getToolbar","schema$9","parts$5","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","schema$8","parts$4","onClosed","onOpened","toggleToolbar","overf","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","moreDrawerData","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","sliding","floating","toolbarFactory","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","fireSkinLoaded","_skinLoaded","fireSkinLoaded$1","initialized","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError$1","fireSkinLoadError","onSetupFormatToggle","boundCallback","binding","formatChanged","once","onSetupEvent","handleEvent","onActionToggleFormat$1","rawItem","onActionExecCommand","generateSelectItems","_editor","generateItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","getSpec$4","_format","alignment","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$3","systemFont","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","legacyFontSizes","keywordFontSizes","getSpec$2","fontSize","_loop_1","pt","factor","toPt","legacy","toLegacy","Space","findNearest","getStyles","getSpec$1","fallbackFormat","getSpec","getFormatItems","flattenedItems","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","schema$7","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$3","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","_d","renderCommonToolbarButton","specialisation","itemApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","setIconStroke","buttonComp","renderSplitButton","grouptoolbarbutton","TopToBottom","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","styleselect","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","toolbarConfig","prefixes","toolbarGroups","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","createToolbar","toolbarItem","extractFrom","lookupButton","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","fireScrollContent","elementLoad","setupEvents$1","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getWidth","baseWidth","minWidth","getTargetPosAndBounds","Inline","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","setDockingMode","verticalDir","setupMode","addClass","removeClass","InlineHeader","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","setupEvents","nodeChanged","hideContextToolbarEvent","runOnExecute","getFormApi","ContextForm","findPrimary","mementos","renderContextToggleButton","renderContextButton","asSpecs","compInSystem","isVerticalOverlap","threshold","getSelectionBounds","leaf$1","getRangeRect","scroll_1","bodyPos","getContextToolbarBounds","toolbarType","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","getHorizontalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","bubbleAlignments$1","inset","anchorOverrides","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","isEntireElementSelected","currentPosition","isReposition","preservePosition","getAnchorSpec$2","mobile","smartInsetLayout","newAnchor","getInsetLayouts","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","contextForm","registerForm","contextToolbar","registerToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","register$7","registryContextToolbars","lastTrigger","lastContextPosition","currentWidth","newContents","oldContents","forwardContents","canLaunchToolbar","isContextMenuOpen","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","getAnchorElementBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","scopes","allButtons","default","buildContextToolbarGroups","buildContextFormGroups","launchContext","launchContextToolbar","anchorLayout","getAnchorLayout","isSameLaunchElement","rootElem","startNode","isOutsideRoot","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchStartNode","ancestorElem","findPosition_1","filterByPositionForAncestorNode","matchAncestor","lookup$1","unsupportedLength","pattern","decimalDigits","dot","registerController","getMenuItems","getOptions","hash","oldApi","unbindWatcher","watcher","setCurrent","addMenuButton","onToolbarSetup","onMenuSetup","lineHeightSpec","accepted","unitRaw","check","isUnit","normalise","onSetupOutdentState","queryCommandState","onActionToggleFormat","register$2","_idx","name_1","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems$2","onSetupUndoRedoState","onSetupVisualAidState","hasVisual","setup$6","cmd","register$6","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","register$4","registerMenuItems$1","registerButtons","register$1","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","register$a","registerToolbarButton","addToggleMenuItem","registerMenuItems","registerButtons$2","register$3","settingsOpt","getContentLanguages","customCode","code","customValue","ele","lang","languageSpec","register$5","isTouchEvent","getPointAnchor","pageX","pageY","fromPageXY","containerPos","getPos","dx","dy","transpose","transposeContentAreaContainer","fromClientXY","getSelectionAnchor","getAnchorSpec$1","anchorType","getNodeAnchor","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","initAndShow","getAnchorSpec","openiOS_1","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","makeContextItem","commonMenuItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$5","setContextMenuState","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","getAnchorType","selectedElement","defaultItems","contextMenus","getContextMenu","sections","allItems","generateContextMenu","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","moveOrSnap","snapInfo","newCoord","snapsInfo","leftAttr","topAttr","getCoords","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","findMatchingSnap","snaps","sensor","inRange","coord1","coord2","withinRange","getSnapPoints","bestSnap","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","origin_1","snapPin","snapTo$1","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","zIndex","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","currentCoord","oc","location","getCurrentCoord","optSnaps","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcNewCoord","onDrag","dragBy","stopDrag","updateStartState","setStartData","MouseData","events$2","stop$1","delayDrop","dragApi","drop","forceDrop","init$2","schema$5","TouchData","getDataFrom","events$1","blockerSingleton","stopBlocking","init$1","mouse","mouseOrTouch","DraggingBranches","DragState","previous","dragEvent","nuData","calculateDelta","Dragging","dragger","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","isHidden","getP","resize","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","keyboardHandler","renderStatusbar","getTextComponents","newPathElements","divider","newPath","parent_1","isDefaultPrevented","isPropagationStopped","updatePath","_btn","newAcc","renderElementPath","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","resizeHandler","None","Vertical","getResizeType","_target","renderResizeHandler","getComponents","setup$3","isGridUiContainer","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","memAnchorBar","contextMenuState","HeaderBackstage","interpretWithoutForm","init$7","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","opacity","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","loopEditor","relatedTarget","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","onDismissPopups","setup$b","setEditorSize","parsedHeight","baseHeight","minHeight","getHeight","getHeightWithFallback","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$8","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$2","basic","parts$2","dragBlockClass","getDragBounds","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","TabButton","tabButtonBehaviours","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$1","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","barPart","tabs","viewPart","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","allTabs","tabMode","extraEvents","smartTabHeight","tabviewComp","heights","_tab","measureHeights","maxTabHeightOpt","getMaxHeight","oldHeight","naiveTabHeight","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","dialogState","validateData$1","tabSection","dialogInit","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","bodySpec","currentDialog","iframeUri","base_uri","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$2","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$1","openModalDialog","internalInitialData","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","modalAccess","outerForm","renderDialog","openInlineDialog","config$1","refreshDocking","dialogUi","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","renderInlineDialog","inlineDialogComp","isAlertOrConfirmDialog","openModalUrlDialog","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","closeCallback","hideCloseButton","notificationWrapper","notification","progressBar","contentArea","moveTo","moveRel","notificationSpec","layoutDirection_1","getLayoutDirection","nodeAnchor","nuText","getEl","notifications","getArgs","NotificationManagerImpl","typeOf$1","eq$2","eqString","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","sort$1","eqSortedArray","q","eqAny","tx","isEquatableType","isString$1","isArray$1","compose1","identity","contains$3","map$3","each$k","filter$4","findUntil$1","findIndex$2","each$j","objAcc","filter$3","each$i","indexOf$1","reduce","iteratee","accumulator","unknown$2","detect$2","blank","trim$5","lTrim","rTrim","isEmpty$3","nu$2","platform$2","platform$1","browser$4","webkit","fileApi","windowsPhone","Env","ie","gecko","iOS","transparentSrc","caretAfter","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$4","is$3","walk$3","delim","hasOwn","extend","exts","ext","sp","scn","de","cn","ns","createNS","onCreate","walk","_addCacheSuffix","fromDom$2","recurse","is$2","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","prevSibling","previousSibling","prevSiblings","nextSiblings","lastChild","childNodesCount","getStyleContainer","getHead","before$4","after$3","intoView","alignToTop","scrollIntoViewIfNeeded","isNodeType","isRestrictedNode","isElement$5","matchNodeNames","lowercasedNames","matchStyleValues","computed","isBogus$2","isTable$3","isTextareaOrInput","isText$7","isComment","isDocument$1","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","browser$3","firstElement","nodes","hasChild","module$1","nu$1","unite","requestAnimationFramePromise","support","Expr","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","documentIsHTML","rbuggyQSA","rbuggyMatches","ancestor$3","promiseObj","wrappedSetTimeout","wrappedSetInterval","setInterval","debounce","Delay","requestAnimationFrameFunc","vendors","setEditorInterval","clearInterval","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","maxLoadTime","failure","urlWithSuffix","passed","failed","getOrCreateState","onload","onerror","waitForWebKitLinkLoaded","waitCallback","styleSheets","ownerNode","testCallback","now","linkElem","contentCssCors","referrerPolicy","loadF","styleContainer","loadAll","urls","futures","asyncValues","asyncValue","unloadAll","_setReferrerPolicy","WeakMap","forElement","referenceElement","rootDom","sl","DomTreeWalker","prev2","findSibling","findPreviousNode","startName","siblingName","lazyLookup","isHeading","isBlock$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","nbsp","ZWSP$1","isZwsp","trim$3","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","lastBr","brs","isRangeInCaretContainerBlock","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","isContent$1","rootElement","hasWhitespacePreserveParent","isNamedAnchor","isBookmark","isBogus$1","isBogusAll","isEmpty$2","skipBogus","brCount","isEmptyNode","isInlineContent","isBookmarkNode$2","isSpan","trimNode","currentChildren","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","radix","entity","fromCharCode","namedEntities","encodeRaw","encodeNumeric","encodeNamed","entities","Entities","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","nativeDecode","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","createMap","defaultValue","extendWith","getTextRootBlockElements","getTextBlockElements","compileElementMap","Schema","patternElements","customElementsMap","specialElements","createLookupTable","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","caption","script","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","th","tr","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","getCustomElements","isValidChild","attrPatterns","Styles","_this","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","allow_svg_data_urls","lastIndex","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","Event","initEvent","normalize$3","originalEvent","fallbackTarget","srcElement","needsNormalizing","defaultPrevented","cancelBubble","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","attachEvent","removeEvent","detachEvent","fix","isMouseEvent","eventDoc","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","ci","eventMap","parentWindow","clean","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","push_native","push$1","slice$1","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","seed","nid","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","checkNonElements","doneName","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","attrId","tmp","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","excess","unquoted","nodeNameSelector","operator","what","forward","ofType","nodeIndex","useCache","pseudo","matched","elemLang","selectedIndex","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","matcherFromGroupMatchers","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","createFragment$1","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","whiteSpaceRegExp","trim$2","each$g","grep$2","removeAttr","camel","dashed","currentStyle","appendTo","prependTo","replaceWith","wrapInner","classState","existingClassName","trigger","docElm","sibling$1","firstSibling","contentDocument","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$f","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","counter","boundEvents","ownEvents","$$","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","root_element","getPos$1","castOffsetParent","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getSize","collect","selectorVal","_findSib","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","oldElm","replaceChild","isNonEmptyElement","rv","stdMode","boxModel","deep","clone_1","getViewPort","argWin","getPrev","outHtml","createFragment","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","cssText","serializeStyle","addStyle","styleElm","styleSheet","loadCSS","uniqueId","getOuterHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","rgbVal","isEmpty","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","getContentEditableParent","isChildOf","dumpRng","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOM$a","each$e","ScriptLoader","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","currentCode","getLanguageData","I18n","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","dependencies","createUrl","baseUrl","resource","addOnUrl","urlString","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","read$4","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","an","newStart","getAttr","findMarkers","deep$1","TextWalker","TextSeeker","isBlockBoundary","newOffset","forwards","round$2","toStart","isValidOverflow","overflowY","rect1","rect2","isAbove$1","halfHeight","isBelow$1","containsXY","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","getCaretPositionClientRects","toRange","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","trimEmptyTextNode$1","rangeInsertNode","insertFragment","isText$3","isBogus","normalizedParent","equal","createPathItem","numTextFragments","normalizedNodeIndex","outputOffset","normalizedTextOffset","parentsUntil$1","resolve$2","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$9","getPoint","trimmedOffset","getNormalizedTextOffset","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","getUndoBookmark","DOM$9","getBodySetting","bodyObj","getContentSecurityPolicy","getForcedRootBlock","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getFontCss","fontCss","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","indexOf$2","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","getAbsoluteClientRect","scrollX","scrollY","rootRect","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","blockName","br","blockNode","insertBlock$1","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","isContentEditableFalse$6","isBr$1","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isPathBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","getBookmark$2","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","resolveIndex","isRangeBookmark","resolve$1","isBookmarkNode$1","isNbsp","actual","isWhiteSpace","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","allowSpaces","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","isInlineFormat","shouldExpandToSelector","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","siblings_1","startPoint","endPoint","getCellsFromElementOrRanges","selectedCells","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getClosestTable","getFirstChildren","getLastChildren$1","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint","hasAnyRanges","runOnRanges","fakeSelectionNodes","fakeNodeRng","fillBookmark","api$1","makeAnnotation","eDoc","decorate","master","annotate","newWrappers","finishWrapper","processElements","processElement","wrapName","isZeroWidth","isAnnotation","wrap$3","processNodes","Annotator","annotations","serializer","addNodeFilter","spans","identifyParserNode","persistent","setup$m","_registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","onNodeChange","fireNoAnnotation","fireCallbacks","addListener","setup$n","initialRng","hasFakeSelection","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","nodesAlready","findAll","BookmarkManager","getContentEditableRoot$1","isXYWithinRange","fireError","errorType","fireFormatApply","fireFormatRemove","VK","DELETE","ESC","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","isContentEditableFalse$5","ControlSelection","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","elementSelectionAttr","editableDoc","rootDocument","resizeHandles","nw","ne","sw","isImage","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTargets","isResizable","setSizeProp","setGhostElmSize","ghostElm","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","getResizeImgProportional","selectedElmX","selectedElmY","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","startDrag","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","elementFromPoint","moveToElementText","findClosestIeRange","parentElement","findParent$1","moveOutOfContentEditableFalse","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","RangeUtils","normalizedRng","compareRanges","getCaretRangeFromPoint","documentFocusInHandler","excludeFromDescend","markerInfo","cleanupFun","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","withElement","elementMarker","startElement","endElement","scrollToMarker","intoWindowIfNeeded","viewportBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","browser$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","bookmarkToNativeRng","newBookmark","FocusManager","isEditorUIElement","throttledStore","mouseUpPage","registerPageMouseUp","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","DOM$8","isUIElement","customSelector","getCustomUiSelector","registerEvents$1","focusedEditor","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","normalizeSelection$1","getCollapsedNode","getFocusInElement","caretPos","focusBody","rawBody","hasInlineFocus","hasIframeFocus","activateEditor","getEndpointElement","real","skipEmptyTextNodes","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","unescapedTextParents","containsZwsp","getTemporaryNodeSelector","tempAttrs","createWalker","whatToShow","createTreeWalker","createZwspCommentWalker","FILTER_ACCEPT","FILTER_SKIP","createUnescapedZwspTextWalker","hasZwspComment","hasUnescapedZwspText","hasTemporaryNode","trimTemporaryNodes","getTemporaryNodes","emptyAllNodeValuesInWalker","curr","emptyZwspComments","emptyUnescapedZwspTexts","conditionalTrims","condition","trimmed","cloned","each$d","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","HtmlSerializer","writer","sortedAttrs","elementRule","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll$1","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbsps","newText","firstPos","normalizeNbspAtStart","chars","normalizeNbspMiddle","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition","setSelection$1","paddEmptyBlock","deleteElement$2","moveCaret","rawNode","afterDeletePos","parentBlock","normalizedAfterDeletePos","afterDeletePosOpt","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","paddPos","getTableCells","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","getSelectedCells","startIndex","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","optCellRng","getCellRng","getTable","isStartInTable","isEndInTable","isMultiTable","getTableDetailsFromRange","isSingleCellTable","isSingleCellTableContentSelected","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","freefallRtl","cleanCells","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","getOutsideBlock","deleteContents","startInTable","emptyBlock","handleEmptyBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","moveSelection","lastBlock","additionalCleanupNodes","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret$3","startElm","fromCell","deleteBetweenCells","deleteCaretCells","fromPos","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete$9","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange$2","commonAncestorContainer","newEndPos","normalizeBlockSelectionRange","isListFragment","nonEmptyElements","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","findFirstIn","insertBefore$1","insertAfter$1","beforeRng","afterRng","getSplit","insertMiddle","isTableCell$1","insertHtmlAtCaret","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","preserve_zwsp","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","validInsertion","textInlineElements","root_1","elementUtils_1","isNonInheritableStyle","hasInheritableStyles","reduceInlineTextElements","nextRng","parentEditableElm","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","isTreeNode","setEditorHtml","noSelection","setContentInternal","defaultedArgs","setupArgs$2","updatedArgs","no_events","nodeFilters","attributeFilters","getNodeFilters","getAttributeFilters","attrMatches","name_2","findMatchingNodes","no_selection","setContentTree","padd","forcedRootBlockName","isRootContent","setContentString","sibling$2","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchNode","matchName$1","matchItems","onmatch","expectedValue","isEmptyValue","match$2","matchAllOnNode","formatNames","matchSimilar","isVariableValue","fieldValues","isVariableFormatName","ZWSP","CARET_ID","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","allBrs","getLastChildren","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","otherFormatName","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","isFormatElement","inlineElements","postProcessHooks","each$c","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","each$b","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$a","isEq$2","isChildOfInlineParent","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","isMixedFormat","removeFormat$1","newName","removeFormatFromClone","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeNodeFormat","lastContentEditable","currentNodeMatches","textDecoration","isRemoveBookmarkNode","removeRngStyle","ceFalseOverride","each$9","each$8","isElementNode","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess$1","formatItem","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","node_1","withSimilar","withoutSimilar","withVars","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","emptyFragment","getFragmentFromRange","innerElm","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","getWrapElements","getTableFragment","selectedTableCells","tableElm","firstCell","lastCell","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","subTable","sectionedTableModel","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","setupArgs$1","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","getInner","tmpElm","getSelectionFragment","read$3","getSerializedContent","getOuterHtml","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","insertAt","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","lazyTempDocument$1","createFromEditor","getTempAttrs","hasIframes","beforeBookmark","applyToEditor","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","beforeChange","beforeChange$1","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","addUndoLevel$1","undo$1","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","transact$1","ignore$1","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","rawElm","registeredFormatListeners","nodeOrRange","setup$j","formatChangeItems","toAppendTo","addListeners","formatChangedInternal","setupArgs$3","emptyRegExp","trimEmptyContents","getContentFromBody","getContentInternal","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","SelectorChanged","setupArgs","eventArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","isForward","anchorRange","focusRange","bookmarkManager","controlSelection","getSelectedContent","getContent$1","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFilters","domParser","convert_fonts_to_spans","fontSizes","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","addStrikeToSpanFilter","parseDataUri$1","uriParts","decodeURIComponent","buildBlob","uriToBlob","rejectWithError","xhr_1","XMLHttpRequest","responseType","blobUriToBlob","count$1","ImageScanner","uploadStatus","blobCache","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","blobInfo","newPromise","getByData","getByUri","dataUri","imageToBlobInfo","restoreDataUris","re","imageId","uris","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","whitespaceElements","isPadded","each$7","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","URI","baseUri","isProtocolRelative","toAbsPath","urlMatch","userInfo","parseDataUri","uriComponents","decodedUri","unescape","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","isInvalidUri","getDocumentBaseUrl","pathname","setPath","pathMatch","getURI","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","filteredClobberElements","lazyTempDocument","findMatchingEndTagIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","lcHtml","isConditionalComment","endIfIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","filteredUrlAttrs","parsingMode","processEndTag","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","parseAttribute","val2","val3","processAttr","fillAttrsMap","isValidPrefixAttrName","attrRule","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","bogusValue","preserve_cdata","parseInternal","dataImageUri","extractBase64DataUris","findEndTag","each$6","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","addAttributeFilter","fi","fl","invalidChildren","textRootBlockElements","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","createNode","removeWhitespaceBefore","textVal","textNodeNext","cloneAndExcludeBlocks","isLineBreakNode","parent_2","attrFiltersLen","isNodeEmpty","tempNode","isTextRootBlockEmpty","isPaddedWithNbsp","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","images_dataimg_filter","imgElem_1","isValidDataImg","blobUri","registerBase64ImageFilter","inline_styles","addTempAttr","htmlParser","DomSerializerImpl","internalName","hasChildren","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","doc_1","firePreProcess","preProcess","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","serializeNode","outArgs","firePostProcess","postProcess","toHtml","addRules","setRules","DomSerializer","domSerializer","setContent$2","DOM$7","safeDestroy","deprecatedSettings","deprecatedPlugins","movedToPremiumPlugins","getDeprecatedSettings","settingNames","setting","getDeprecatedPlugins","plugin","pluginNames","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","normalizePlugins","trimmedPlugins","hasSection","sectionResult","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","mobilePlugins","theme","isSectionTheme","getPlatformPlugins","combineSettings","defaultSettings","defaultDeviceSettings","extractSections","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","iconPack","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","isInsideElementContentArea","NotificationManager","getImplementation","unimplemented","getTopNotification","closeNotification","otherNotification","fireEvent","isEditorAttachedToDom","addNotification","getNotifications","serviceMessage","getServiceMessage","registerEvents","WindowManager","dialogs","getParams","setParams","funcBind","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","fireOpenEvent","addDialog","windowManagerImpl","displayNotification","notificationManager","displayError","logError","createLoadError","pluginLoadError","initError","transformToUrls","cssLinks","contentCssFile","isContentCssSkinName","appendContentCssFromSettings","contentCss","getContentCss","getContentCssUrls","getFontCssUrls","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","uuid","rnd","Uploader","pendingPromises","defaultHandler","xhr","withCredentials","credentials","upload","onprogress","path1","path2","json","responseText","basePath","FormData","filename","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","pendingUploadBlobInfo","closeNotification_1","failureOptions","uploadBlobInfo","uploadBlobs","createUploader","each$5","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontsize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","removeformat","getFormats","FormatRegistry","formatChangeState","setup$h","disableCaretContainer","setup$k","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","isTextBlockOrListItem","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","blockPosition","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$8","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable$1","readFromRange","isRawNodeInTable","deleteRange$1","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$6","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$5","backspaceDeleteRange","backspaceDelete$4","deleteCaret$2","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation$1","findLocationTraverse","BreakType","modify","VDirection","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil$1","isAboveFn","isBeflowFn","targetClientRect","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","allowInside","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","move$2","isInlineTarget$1","findLocation","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$3","rescope","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","hasOnlyOneChild","deleteCaret$1","parentInlines","getParentInlines","normalizedFromPos","willDeleteLastPositionInElement","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteLastPosition","backspaceDelete$2","deleteElement","backspaceDelete$1","isNearMedia","deleteCaret","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","styleValue","indentElement","backspaceDelete","nativeCommand","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$2","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","moveH$2","moveToCeFalseHorizontally","getHorizontalRange","newRange","moveV$3","down","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","isAtLastLine","isAtFirstLine","isAtFirstOrLastLine","insertBr","insertBlock","insertEmptyLine","moveV$2","defaultPatterns","matchesEvent","match$1","moveH$1","moveV$1","moveToLineEndPoint","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","mover","moveH","moveV","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock","hasParent","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","insert$2","tmpRng","parentBlockName","newBlockName","isAfterLastNodeInContainer","createNewBlock","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell","wrapSelfAndSiblingsInDefaultBlock","isFirstChild","hasFirstChild","insert$3","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","moveSelectionToBr","brElm","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$1","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","newLineAction","shouldBlockNewLine","_shiftKey","getNoNewLineSelector","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre","shouldPutBrInPre$1","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","canInsertIntoEditableRoot","rootEditable","getEditableRoot$1","predicates","isPageUpDown","setNodeChangeBlocker","blocked","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection","registerKeyboardOverrides","setup$c","executeKeydownOverride$3","executeKeydownOverride$2","executeKeyupOverride","handleEnterKeyEvent","setup$9","executeKeydownOverride","keypressThrotter","setupIeInput","isComposing","executeKeydownOverride$1","executeKeyupAction","NodeChange","lastPath","nativeRng","fakeRng","isSameElementPath","currentPath","isTextBlockNode","getAbsolutePosition","isContentEditableFalse$1","isContentEditableTrue$1","createGhost","clonedElm","boxSizing","removeElement","removeDragState","ghost","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","elmPos","dragging","relX","relY","dragHandler","throttledPlaceCaretAt","targetPos","applyRelPos","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","overflowX","moveGhost","dropHandler","dragElement","isValidDropTarget","targetClone_1","cloneElm","dragEndHandler","getContentEditableRoot","SelectionOverrides","fakeCaret","realSelectionId","isFakeSelectionTargetElement","isNearFakeSelectionElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setElementSelection","afterNode","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","targetBlock","fakeCaretInfo","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","checkInside","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","closestFakeCaret","hasNormalCaretPosition","normalizeShortEndedElementSelection","clipboardData","realSelectionElement","clearData","outerText","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","renderFocusCaret","DOM$6","getRootName","removeUndefined","mkSchemaSettings","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","format_empty_lines","mkParserSettings","editorUpload","initEditor","bindPendingEventDelegates","fireInit","storeNative","moveSelectionToFirstCaretPosition","execCallback","auto_focus","focusEditor","destroyed","autoFocus","getStyleSheetLoader$1","loadContentCss","removeCss","contentStyles","contentCssText_1","allStylesheets","framedFonts","makeStylesheetLoadingPromises","content_style","appendStyle","preInit","firePreInit","browser_spellcheck","gecko_spellcheck","spellcheck","quirks","getAttributeApplyFunction","isSelectionAcrossElements","serializeRng","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","documentElementEditingFocus","Range","body_1","selectControlElements","disableBackspaceIntoATable","setGeckoEditingOptions","isReadOnly$1","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","refreshContentEditable","allRng","allContentsSelected","selectionHtml","internalContent","setMceInternalContent","getMceInternalContent","queryCommandSupported","setAttributeNode","Quirks","firePostRender","directionality","getDirectionality","protect","initEditorWithInitialContent","startContent","loadInitialContent","initContentBody","skipWrite","orgVisibility","iframeHTML","contentAreaContainer","uploader","imageScanner","toBlobInfo","findFirst","mime","cachedBlobInfo","removeByUri","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","getImagesDataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","EditorUpload","hex_colors","force_hex_style_colors","createParser","mkSerializerSettings","annotator","_nodeChangeDispatcher","debounceLongpress","isEqualNode","setup$e","preventSummaryToggle","filterDetails","normalizeSelection","deleteCommand","forwardDeleteCommand","setup$f","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","isVisuallyEmpty","firePlaceholderToggle","setup$g","setupRtcThunk","editorCast","rtcPlugin","getRtcSetup","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_node","_similar","_rfl","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","setup$i","setupRtc","setProgressState","_rtcMode","DOM$5","createIframe","customAttrs","iframeTitle","ifr","getIframeAttrs","frameBorder","allowTransparency","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","getDocType","documentBaseUrl","bodyId","getBodyId","bodyClass","getBodyClass","translatedAriaText","getIframeAriaText","getIframeHtml","DOM$4","initPlugin","initializedPlugins","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeUi","orgDisplay","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeFalseIframe","renderThemeFalse","iconPackName","currentIcons","loadIcons","svgData","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","augmentEditorUiApi","boxInfo","hidden","DOM$3","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","themeUrl","getThemeUrl","loadTheme","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","urlMeta","iconsLoadError","getExternalPlugins$1","depPlugin","url_2","loadPlugins","legacyPropNames","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","getCaretElement","bindRange","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","each$4","EditorCommands","setupCommands","skip_focus","customCommand","addCommands","commandList","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","skipFocus","bookmarkRng","contentEditableHost","getContentEditableHost","queryCommandEnabled","listParent","fontNameAction","fontSizeAction","lineHeightAction","processValue","insertAtCaret","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","internalContentEditableAttr","setContentEditable","toggleReadOnly","removeFakeSelection","hasUiFocus","hasEditorOrUiFocus","restoreFakeSelection","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","beforeFire","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","dispatcherArgs","DOM$2","getEventTarget","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","processReadonlyEvents","bindEventDelegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","activate","deactivate","editorReadOnly","fireSwitchMode","each$3","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","charCode","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","cmdFunc","normalizeCommandFunc","createShortcut","DOM$1","extend$3","each$2","Editor","bridge","loadedCSS","isNotDirty","documentBaseURL","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","finalSettings","deprecation_warnings","hasDeprecatedPlugins","hasDeprecatedSettings","isLegacyMobileTheme","themesMessage","pluginsMessage","settingsMessage","logDeprecationsWarning","getEditorSettings","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","addAutocompleter","addContextToolbar","addSidebar","modeInstance","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","registerMode","clone$3","getStyleSheetLoader","hasHiddenInput","formEventDelegate","resetContent","shouldPatchSubmit","_mceOldSubmit","triggerSave","isEncodingXml","save","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","_beforeUnload","set_dirty","callbackLookup","getParamObject","is_removing","getContent$2","initialContent","oldState","urlconverter_callback","addVisual$1","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","extend$2","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinyMCEPreInit","srcScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","min$1","max$1","relativePosition","targetW","targetH","relChars","Rect","findBestRelativePosition","constrainRect","intersect","x1","y1","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","awaiter","extend$1","_super","mixins","mixin","Mixins","dummy","Methods","Properties","Statics","Defaults","member","createMethod","localStorage","JSONUtils","hexCode","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","removeItem","publicApi","geom","LocalStorage","Color","hsvToRgb","toRgb","toHsv","rgb2hsv","ImageUploader","showNotification","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders"],"sourceRoot":""}