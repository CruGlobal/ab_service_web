{"version":3,"file":"HRTeams.js","mappings":"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","sources":["webpack://hrteamwidget/webpack/runtime/chunk loaded","webpack://hrteamwidget/webpack/runtime/load script","webpack://hrteamwidget/webpack/bootstrap","webpack://hrteamwidget/webpack/runtime/chunk prefetch function","webpack://hrteamwidget/webpack/runtime/compat get default export","webpack://hrteamwidget/webpack/runtime/define property getters","webpack://hrteamwidget/webpack/runtime/ensure chunk","webpack://hrteamwidget/webpack/runtime/get javascript chunk filename","webpack://hrteamwidget/webpack/runtime/global","webpack://hrteamwidget/webpack/runtime/hasOwnProperty shorthand","webpack://hrteamwidget/webpack/runtime/make namespace object","webpack://hrteamwidget/webpack/runtime/publicPath","webpack://hrteamwidget/webpack/runtime/jsonp chunk loading","webpack://hrteamwidget/webpack/runtime/nonce","webpack://hrteamwidget/webpack/runtime/startup prefetch","webpack://hrteamwidget/./ABViewOrgChartTeamsCore.js","webpack://hrteamwidget/./ABViewOrgChartTeamsComponent.js","webpack://hrteamwidget/./ABViewOrgChartTeams.js","webpack://hrteamwidget/./ABViewOrgChartTeamsEditor.js","webpack://hrteamwidget/./ABViewOrgChartTeamsProperty.js","webpack://hrteamwidget/./index.js"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"hrteamwidget:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"HR\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t743: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n__webpack_require__.F.j = (chunkId) => {\n\tif((!__webpack_require__.o(installedChunks, chunkId) || installedChunks[chunkId] === undefined) && true) {\n\t\tinstalledChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"script\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhrteamwidget\"] = self[\"webpackChunkhrteamwidget\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","__webpack_require__.O(0, [743], () => {\n\t[556,702,709].map(__webpack_require__.E);\n}, 5);","const ABViewOrgChartTeamsPropertyComponentDefaults = {\n   datacollectionID: \"\",\n   teamLink: \"\",\n   teamName: \"\",\n   topTeam: \"\",\n   teamStrategy: \"\",\n   subStrategy: \"\",\n   strategyCode: \"\",\n   strategyColors: [],\n   fields: \"\",\n   direction: \"t2b\",\n   depth: 99,\n   color: \"#00BCD4\",\n   // visibleLevel: 2,\n   draggable: 1,\n   showGroupTitle: 0,\n   dropContentToCreate: 0,\n   pan: 1,\n   zoom: 1,\n   height: 0,\n   export: 0,\n   exportFilename: \"\",\n   contentField: \"\",\n   editContentFieldsToCreateNew: [],\n   setEditableContentFields: [],\n   contentFieldFilter: null,\n   contentFieldDateStart: \"\",\n   contentFieldDateEnd: \"\",\n   contentGroupByField: \"\",\n   contentDisplayedFields: {},\n   contentDisplayedFieldTypes: {},\n   contentDisplayedFieldMappingData: {},\n   contentDisplayedFieldFilters: {},\n   showDataPanel: 0,\n   dataPanelDCs: {},\n};\n\nconst ABViewOrgChartTeamsDefaults = {\n   key: \"plugin_hr_teams\", // {string} unique key for this view\n   icon: \"users\", // {string} fa-[icon] reference for this view\n   labelKey: \"HR Teams\", // {string} the multilingual label key for the class label\n};\n\nexport default function (ABViewWidget) {\n   return class ABViewOrgChartTeamsCore extends ABViewWidget {\n      constructor(values, application, parent, defaultValues) {\n         super(\n            values,\n            application,\n            parent,\n            defaultValues || ABViewOrgChartTeamsDefaults\n         );\n      }\n\n      static common() {\n         return ABViewOrgChartTeamsDefaults;\n      }\n\n      static defaultValues() {\n         return ABViewOrgChartTeamsPropertyComponentDefaults;\n      }\n\n      ///\n      /// Instance Methods\n      ///\n\n      /**\n       * @method fromValues()\n       *\n       * initialze this object with the given set of values.\n       * @param {obj} values\n       */\n      fromValues(values) {\n         super.fromValues(values);\n\n         this.settings.datacollectionID =\n            this.settings.datacollectionID ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.datacollectionID;\n\n         this.settings.teamLink =\n            this.settings.teamLink ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamLink;\n\n         this.settings.teamName =\n            this.settings.teamName ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamName;\n\n         this.settings.topTeam =\n            this.settings.topTeam ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.topTeam;\n\n         this.settings.teamInactive =\n            this.settings.teamInactive ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamInactive;\n\n         this.settings.teamCanInactivate =\n            this.settings.teamCanInactivate ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamCanInactivate;\n\n         this.settings.teamStrategy =\n            this.settings.teamStrategy ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamStrategy;\n\n         this.settings.subStrategy =\n            this.settings.subStrategy ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.subStrategy;\n\n         this.settings.strategyCode =\n            this.settings.strategyCode ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.strategyCode;\n\n         this.settings.strategyColors =\n            this.settings.strategyColors ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.strategyColors;\n\n         this.settings.direction =\n            this.settings.direction ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.direction;\n\n         this.settings.depth = parseInt(\n            this.settings.depth ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.depth\n         );\n\n         this.settings.color =\n            this.settings.color ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.color;\n\n         this.settings.pan = JSON.parse(\n            this.settings.pan ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.pan\n         );\n\n         this.settings.zoom = JSON.parse(\n            this.settings.zoom ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.zoom\n         );\n\n         this.settings.draggable = JSON.parse(\n            this.settings.draggable ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.draggable\n         );\n\n         this.settings.dropContentToCreate = JSON.parse(\n            this.settings.dropContentToCreate ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.dropContentToCreate\n         );\n\n         this.settings.height = parseInt(\n            this.settings.height ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.height\n         );\n\n         this.settings.export = JSON.parse(\n            this.settings.export ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.export\n         );\n\n         this.settings.exportFilename =\n            this.settings.exportFilename ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.exportFilename;\n         this.settings.contentField =\n            this.settings.contentField ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentField;\n         this.settings.editContentFieldsToCreateNew =\n            this.settings.editContentFieldsToCreateNew ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.editContentFieldsToCreateNew;\n         this.settings.setEditableContentFields =\n            this.settings.setEditableContentFields ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.setEditableContentFields;\n         this.settings.contentFieldFilter =\n            this.settings.contentFieldFilter ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentFieldFilter;\n         this.settings.contentFieldDateStart =\n            this.settings.contentFieldDateStart ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentFieldDateStart;\n         this.settings.connectFieldDateEnd =\n            this.settings.connectFieldDateEnd ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentFieldDateEnd;\n         this.settings.contentGroupByField =\n            this.settings.contentGroupByField ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentGroupByField;\n         this.settings.showGroupTitle =\n            this.settings.showGroupTitle ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.showGroupTitle;\n         this.settings.contentDisplayedFields =\n            this.settings.contentDisplayedFields ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFields;\n         this.settings.contentDisplayedFieldTypes =\n            this.settings.contentDisplayedFieldTypes ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFieldTypes;\n         this.settings.contentDisplayedFieldMappingData =\n            this.settings.contentDisplayedFieldMappingData ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFieldMappingData;\n         this.settings.contentDisplayedFieldFilters =\n            this.settings.contentDisplayedFieldFilters ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFieldFilters;\n         this.settings.showDataPanel =\n            this.settings.showDataPanel ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.showDataPanel;\n         this.settings.dataPanelDCs =\n            this.settings.dataPanelDCs ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.dataPanelDCs;\n      }\n\n      get datacollection() {\n         const datacollectionID = (this.settings || {}).datacollectionID;\n\n         return this.AB.datacollectionByID(datacollectionID);\n      }\n\n      getValueFields(object) {\n         // OrgChart supports only one parent node.\n         return (\n            object?.connectFields(\n               (f) => f.linkType() == \"many\" && f.linkViaType() == \"one\"\n            ) ?? []\n         );\n      }\n\n      /**\n       * @function valueFields()\n       * Return IDs of connect field for each layer of OrgChart, starting from the top to the bottom.\n       *\n       * @return {Array}\n       *\n       */\n      valueFields() {\n         let fieldValues = (this.settings?.fields ?? \"\").split(\",\");\n         if (!Array.isArray(fieldValues)) fieldValues = [fieldValues];\n\n         const result = [];\n\n         let obj = this.datacollection?.datasource;\n         fieldValues.forEach((fId) => {\n            if (!fId) return;\n\n            const field = obj?.fieldByID?.(fId);\n            if (!field) return;\n\n            result.push(field);\n            obj = field.datasourceLink;\n         });\n\n         return result;\n      }\n\n      // descriptionField() {\n      //    return this.valueField()?.datasourceLink?.fieldByID?.(\n      //       this.settings.columnDescription\n      //    );\n      // }\n   };\n}\n","const DC_OFFSET = 20;\nconst RECORD_LIMIT = 20;\nconst TEAM_CHART_MAX_DEPTH = 10; // prevent inifinite loop\nexport default function (ABViewComponent) {\n   return class ABViewOrgChartTeamsComponent extends ABViewComponent {\n      constructor(baseView, idBase, ids) {\n         super(\n            baseView,\n            idBase || `ABViewOrgChart_${baseView.id}`,\n            Object.assign(\n               {\n                  chartView: \"\",\n                  // chartDom: \"\",\n                  chartContent: \"\",\n                  chartHeader: \"\",\n                  dataPanel: \"\",\n                  dataPanelButton: \"\",\n                  dataPanelPopup: \"\",\n                  filterButton: \"\",\n                  filterPopup: \"\",\n                  filterForm: \"\",\n                  contentForm: \"\",\n                  contentFormData: \"\",\n                  teamForm: \"\",\n                  teamFormCode: \"\",\n                  teamFormPopup: \"\",\n                  teamFormStrategy: \"\",\n                  teamFormSubmit: \"\",\n                  teamFormTitle: \"\",\n               },\n               ids\n            )\n         );\n         this._resources = [\n            import(\n               /* webpackPrefetch: true */\n               \"./js/orgchart-webcomponents.js\"\n            ),\n            import(\n               /* webpackPrefetch: true */\n               \"./styles/orgchart-webcomponents.css\"\n            ),\n            import(\n               /* webpackPrefetch: true */\n               \"./styles/team-widget.css\"\n            ),\n         ];\n         this.__filters = {\n            inactive: 0,\n         };\n         this._OrgChart = null;\n         this._resolveInit = null;\n         this._promiseInit = new Promise((resolve) => {\n            this._resolveInit = resolve;\n         });\n         this._promisePageData = null;\n         this._contentDC = null;\n         this._contentGroupDC = null;\n         this._contentDisplayDCs = [];\n         this._dataPanelDCs = [];\n         this._entityDC = null;\n         this._chartData = null;\n\n         // DRAG EVENTS\n         this._fnContentDragEnd = (event) => {\n            // event.target.style.opacity = \"1\";\n         };\n         this._fnContentDragOver = (event) => {\n            event.preventDefault();\n            event.stopPropagation();\n         };\n         this._fnContentDragStart = (event) => {\n            event.stopPropagation();\n            const $eventTarget = event.target;\n            const dataset = $eventTarget.dataset;\n            const dataTransfer = event.dataTransfer;\n            const data = {};\n            switch ($eventTarget.className) {\n               case \"webix_list_item\":\n                  data.pk = dataset.pk;\n                  data.contentLinkedFieldID = dataset.contentLinkedFieldId;\n                  break;\n               default:\n                  data.source = dataset.source;\n                  break;\n            }\n            dataTransfer.setData(\"text/plain\", JSON.stringify(data));\n            // $eventTarget.style.opacity = \"0.5\";\n         };\n         this._fnContentDrop = async (event) => {\n            const settings = this.view.settings;\n            const dropContentToCreate = settings.dropContentToCreate === 1;\n            const nodeObj = this.view.datacollection?.datasource;\n            const nodeObjPK = nodeObj.PK();\n            const contentFieldLink = nodeObj.fieldByID(\n               settings.contentField\n            )?.fieldLink;\n            const contentObj = contentFieldLink?.object;\n            const contentDateStartFieldColumnName = contentObj?.fieldByID(\n               settings.contentFieldDateStart\n            )?.columnName;\n            const contentDateEndFieldColumnName = contentObj?.fieldByID(\n               settings.contentFieldDateEnd\n            )?.columnName;\n            const contentGroupByField = contentObj?.fieldByID(\n               settings.contentGroupByField\n            );\n            const contentGroupByFieldColumnName =\n               contentGroupByField?.columnName;\n            const contentFieldLinkColumnName = contentFieldLink?.columnName;\n            const contentModel = contentObj?.model();\n\n            const dataTransfer = event.dataTransfer;\n            if (dataTransfer.getData(\"isnode\") == 1) return;\n            event.stopPropagation();\n            if (contentFieldLinkColumnName == null) return;\n            this.busy();\n            const $group = event.currentTarget;\n            const $content = $group.parentElement;\n            const newGroupDataPK = $group.dataset.pk;\n            const newNodeDataPK = JSON.parse(\n               $content.parentElement.dataset.source\n            )._rawData[nodeObjPK];\n            let {\n               source: updatedData,\n               pk: dataPK,\n               contentLinkedFieldID,\n            } = JSON.parse(dataTransfer.getData(\"text/plain\"));\n            const draggedNodes = [];\n            let isRefreshed = true;\n            try {\n               if (!updatedData) {\n                  // This is a drop from Employee list (new assignment)\n                  const contentLinkedFieldColumnName =\n                     contentObj.fieldByID(contentLinkedFieldID).columnName;\n                  const pendingPromises = [];\n                  const newDate = new Date();\n\n                  // Employee can have multiple assignments but not the same team, so don't close\n                  // existing\n                  const $contentRecords =\n                     $content.getElementsByClassName(\"team-group-record\");\n                  let isUpdated = false;\n                  for (const $contentRecord of $contentRecords) {\n                     const contentData = JSON.parse(\n                        $contentRecord.dataset.source\n                     );\n                     if (contentData[contentLinkedFieldColumnName] == dataPK) {\n                        this._setUpdatedBy(contentObj, contentData);\n                        if (!isUpdated) {\n                           if (\n                              contentData[contentGroupByFieldColumnName] ==\n                              newGroupDataPK\n                           ) {\n                              isRefreshed = false;\n                              isUpdated = true;\n                              continue;\n                           } else if (\n                              this._isLessThanDay(\n                                 new Date(\n                                    contentData[contentDateStartFieldColumnName]\n                                 )\n                              )\n                           ) {\n                              contentData[contentGroupByFieldColumnName] =\n                                 this._parseDataPK(newGroupDataPK);\n                              pendingPromises.push(\n                                 contentModel.update(\n                                    contentData.id,\n                                    this._parseFormValueByType(\n                                       contentObj,\n                                       contentData,\n                                       contentData\n                                    )\n                                 )\n                              );\n                              draggedNodes.push($contentRecord);\n                              isRefreshed = true;\n                              isUpdated = true;\n                              continue;\n                           }\n                        }\n                        contentData[contentDateEndFieldColumnName] = newDate;\n                        pendingPromises.push(\n                           contentModel.update(\n                              contentData.id,\n                              this._parseFormValueByType(\n                                 contentObj,\n                                 contentData,\n                                 contentData\n                              )\n                           )\n                        );\n                        draggedNodes.push($contentRecord);\n                        isRefreshed = true;\n                     }\n                  }\n                  if (!isUpdated) {\n                     updatedData = {};\n                     updatedData[contentDateStartFieldColumnName] = newDate;\n                     updatedData[contentLinkedFieldColumnName] =\n                        this._parseDataPK(dataPK);\n                     updatedData[contentFieldLinkColumnName] =\n                        this._parseDataPK(newNodeDataPK);\n                     updatedData[contentGroupByFieldColumnName] =\n                        this._parseDataPK(newGroupDataPK);\n                     const entityDC = this._entityDC;\n                     if (entityDC) {\n                        const entityLink = entityDC.datasource.connectFields(\n                           (f) => f.settings.linkObject === contentObj.id\n                        )[0].id;\n                        const entityCol =\n                           this.AB.definitionByID(entityLink).columnName;\n                        updatedData[entityCol] = this._parseDataPK(\n                           entityDC.getCursor()\n                        );\n                     }\n                     this._setUpdatedBy(contentObj, updatedData);\n                     pendingPromises.push(\n                        contentModel.create(\n                           this._parseFormValueByType(\n                              contentObj,\n                              updatedData,\n                              updatedData\n                           )\n                        ),\n                        (async () => {\n                           const $draggedNode =\n                              await this._createUIContentRecord(\n                                 updatedData,\n                                 \"grey\"\n                              );\n                           $group\n                              .querySelector(\".team-group-content\")\n                              .appendChild($draggedNode);\n                           draggedNodes.push($draggedNode);\n                        })()\n                     );\n                  }\n                  await Promise.all(pendingPromises);\n               } else {\n                  updatedData = JSON.parse(updatedData);\n                  const $contentRecords =\n                     $content.getElementsByClassName(\"team-group-record\");\n                  const dataPanelDCs = this._dataPanelDCs;\n                  for (const dataPanelDC of dataPanelDCs) {\n                     const dataPanelLinkedFieldColumnName =\n                        dataPanelDC.datasource.connectFields(\n                           (connectField) =>\n                              connectField.datasourceLink === contentObj\n                        )[0].columnName;\n                     for (const $contentRecord of $contentRecords) {\n                        const contentRecord = JSON.parse(\n                           $contentRecord.dataset.source\n                        );\n                        if (\n                           (updatedData.id != contentRecord.id &&\n                              contentRecord[dataPanelLinkedFieldColumnName] ==\n                                 updatedData[dataPanelLinkedFieldColumnName]) ||\n                           (updatedData.id == contentRecord.id &&\n                              updatedData[contentGroupByFieldColumnName] ==\n                                 $group.dataset.pk)\n                        ) {\n                           this.ready();\n                           return;\n                        }\n                     }\n                  }\n\n                  // This is move form another team node\n                  // Move the child node to the target\n                  const $draggedNode = document.querySelector(\n                     `#${this.contentNodeID(updatedData.id)}`\n                  );\n                  $draggedNode.parentNode.removeChild($draggedNode);\n                  $group\n                     .querySelector(\".team-group-content\")\n                     .appendChild($draggedNode);\n                  draggedNodes.push($draggedNode);\n                  delete updatedData[\"created_at\"];\n                  delete updatedData[\"updated_at\"];\n                  delete updatedData[\"properties\"];\n                  this._setUpdatedBy(contentObj, updatedData);\n                  if (\n                     !dropContentToCreate ||\n                     (updatedData[contentFieldLinkColumnName] ==\n                        newNodeDataPK &&\n                        this._isLessThanDay(\n                           new Date(\n                              updatedData[contentDateStartFieldColumnName]\n                           )\n                        ))\n                  ) {\n                     updatedData[contentFieldLinkColumnName] = newNodeDataPK;\n                     updatedData[contentGroupByFieldColumnName] =\n                        newGroupDataPK;\n                     await contentModel.update(\n                        updatedData.id,\n                        this._parseFormValueByType(\n                           contentObj,\n                           updatedData,\n                           updatedData\n                        )\n                     );\n                  } else {\n                     const pendingPromises = [];\n\n                     // TODO (Guy): Force update Date End with a current date.\n                     updatedData[contentDateEndFieldColumnName] = new Date();\n                     pendingPromises.push(\n                        contentModel.update(\n                           updatedData.id,\n                           this._parseFormValueByType(\n                              contentObj,\n                              updatedData,\n                              updatedData\n                           )\n                        )\n                     );\n                     updatedData[contentDateStartFieldColumnName] =\n                        updatedData[contentDateEndFieldColumnName];\n                     delete updatedData[\"id\"];\n                     delete updatedData[\"uuid\"];\n                     delete updatedData[contentDateEndFieldColumnName];\n                     updatedData[contentFieldLinkColumnName] = newNodeDataPK;\n                     updatedData[contentGroupByFieldColumnName] =\n                        newGroupDataPK;\n                     pendingPromises.push(\n                        contentModel.create(\n                           this._parseFormValueByType(\n                              contentObj,\n                              updatedData,\n                              updatedData\n                           )\n                        )\n                     );\n                     await Promise.all(pendingPromises);\n                  }\n               }\n            } catch (err) {\n               // TODO (Guy): The update data error.\n               console.log(err);\n            }\n            if (!isRefreshed) {\n               this.ready();\n               return;\n            }\n            try {\n               // TODO (Guy): Logic to not reload dcs.\n               await Promise.all([\n                  this._reloadDCData(this.datacollection),\n                  this._reloadDCData(this._contentDC),\n               ]);\n               // await this._reloadAllDC();\n            } catch (err) {\n               // TODO (Guy): The reload DCs error.\n               console.error(err);\n            }\n            await this.refresh();\n            draggedNodes.forEach(($draggedNode) => {\n               $draggedNode.remove();\n            });\n            this.ready();\n         };\n         this._fnCreateNode = async ($node, data) => {\n            // remove built in icon\n            $node.querySelector(\".title > i\")?.remove();\n\n            // customize\n            const $content = $node.children.item(1);\n            $content.innerHTML = \"\";\n            const contentGroupDC = this._contentGroupDC;\n            const groupObjPKColumeName = contentGroupDC.datasource.PK();\n            await this._waitDCReady(contentGroupDC);\n            const contentGroupOptions = contentGroupDC.getData();\n            const contentGroupOptionsLength = contentGroupOptions.length;\n            if (data.filteredOut || contentGroupOptionsLength === 0) {\n               // This node doesn't pass the filter, but it's children do so\n               // simplify the display.\n               $content.style.display = \"none\";\n               return;\n            }\n            const settings = this.settings;\n            const $nodeSpacer = element(\"div\", \"spacer\");\n            $content.appendChild($nodeSpacer);\n            const nodeSpacerStyle = $nodeSpacer.style;\n            nodeSpacerStyle.backgroundColor = \"\";\n            for (const group of contentGroupOptions) {\n               const $group = element(\"div\", \"team-group-section\");\n               $content.appendChild($group);\n               const groupStyle = $group.style;\n               groupStyle[\"minHeight\"] = `${325 / contentGroupOptionsLength}px`;\n\n               // TODO: should this be a config option\n               const groupColor =\n                  group.name === \"Leader\" ? \"#003366\" : \"#DDDDDD\";\n               groupStyle[\"backgroundColor\"] = groupColor;\n               nodeSpacerStyle.backgroundColor === \"\" &&\n                  (nodeSpacerStyle.backgroundColor = groupColor);\n\n               // TODO: should this be a config option\n               const groupText = group.name;\n               $group.setAttribute(\"data-pk\", group[groupObjPKColumeName]);\n               if (settings.showGroupTitle === 1) {\n                  const $groupTitle = element(\"div\", \"team-group-title\");\n                  const groupTitleStyle = $groupTitle.style;\n                  groupTitleStyle[\"backgroundColor\"] = groupColor;\n                  $groupTitle.appendChild(document.createTextNode(groupText));\n                  $group.appendChild($groupTitle);\n               }\n               const $groupContent = element(\"div\", \"team-group-content\");\n               $group.appendChild($groupContent);\n               if (settings.draggable === 1) {\n                  $group.addEventListener(\"dragover\", this._fnContentDragOver);\n                  $group.addEventListener(\"drop\", this._fnContentDrop);\n               }\n            }\n            const $buttons = element(\"div\", \"team-button-section\");\n            $content.appendChild($buttons);\n            const $editButton = element(\"div\", \"team-button\");\n            $editButton.append(element(\"i\", \"fa fa-pencil\"));\n            const $addButton = element(\"div\", \"team-button\");\n            $addButton.append(element(\"i\", \"fa fa-plus\"));\n            $buttons.append($editButton, $addButton);\n            const dataID = this.teamRecordID(data.id);\n            const values = this.datacollection.getData(\n               (e) => e.id == dataID\n            )[0];\n            $addButton.onclick = () => {\n               this.teamForm(\"Add\", { __parentID: dataID });\n            };\n            $editButton.onclick = () => this.teamForm(\"Edit\", values);\n            $node.querySelector(\".title\").ondblclick = () =>\n               this.teamForm(\"Edit\", values);\n            if (this.teamCanDelete(values)) {\n               const $deleteButton = element(\"div\", \"team-button\");\n               $deleteButton.append(element(\"i\", \"fa fa-trash\"));\n               $deleteButton.onclick = () => this.teamDelete(values);\n               $buttons.append($deleteButton);\n            }\n            if (this.__filters.inactive == 1) {\n               const isInactive = data.isInactive;\n               const activeClass = isInactive ? \"is-inactive\" : \"is-active\";\n               const $active = element(\"div\", `team-button ${activeClass}`);\n               const $span = element(\"span\", \"active-text\");\n               $span.innerHTML = isInactive ? \"INACTIVE\" : \"ACTIVE\";\n               $active.append($span);\n               $buttons.append($active);\n            }\n         };\n         this._fnNodeDrop = async (event) => {\n            const eventDetail = event.detail;\n            const dragedRecord = JSON.parse(\n               eventDetail.draggedNode.dataset.source\n            )._rawData;\n            dragedRecord[\n               // Parent node definition.\n               this.AB.definitionByID(\n                  this.getSettingField(\"teamLink\").settings.linkColumn\n               ).columnName\n            ] = JSON.parse(eventDetail.dropZone.dataset.source)._rawData.id;\n            const dc = this.datacollection;\n            this.busy();\n            this._setUpdatedBy(dc.datasource, dragedRecord);\n            try {\n               await dc.model.update(dragedRecord.id, dragedRecord);\n            } catch (err) {\n               // TODO (Guy): The update data error.\n               console.error(err);\n            }\n            try {\n               // TODO (Guy): Logic to not reload dcs.\n               await Promise.all([\n                  this._reloadDCData(dc),\n                  this._reloadDCData(this._contentDC),\n               ]);\n               // await this._reloadAllDC();\n            } catch (err) {\n               // TODO (Guy): The reload DCs error.\n               console.error(err);\n            }\n            await this.refresh();\n            this.ready();\n         };\n         this._fnPageContentCallback = (\n            contentRecords,\n            isContentDone,\n            contentDC,\n            resolve\n         ) => {\n            const linkedContentFieldColumnName = this.AB.definitionByID(\n               this.getSettingField(\"contentField\").settings.linkColumn\n            ).columnName;\n            for (const contentRecord of contentRecords) {\n               const $teamNode = document.getElementById(\n                  this.teamNodeID(contentRecord[linkedContentFieldColumnName])\n               );\n               if ($teamNode == null) continue;\n               this._addContentRecordToGroup($teamNode, contentRecord);\n            }\n\n            // TODO (Guy): Hardcode data panel DCs for Employee.\n            $$(this.ids.dataPanel)\n               ?.getChildViews()[1]\n               .getChildViews()\n               .forEach(($childView) => $childView.callEvent(\"onViewShow\"));\n            if (isContentDone) resolve();\n            else\n               this._callPagingEvent(\n                  contentDC,\n                  this._fnPageContentCallback,\n                  resolve\n               );\n         };\n         this._fnPageContentGroupCallback = async (\n            contentGroupRecords,\n            isContentGroupDone,\n            contentGroupDC,\n            resolve\n         ) => {\n            const teamDC = this.datacollection;\n            this._fnPageTeamCallback(teamDC.getData(), true, teamDC, () => {});\n            if (isContentGroupDone) resolve();\n            else\n               this._callPagingEvent(\n                  contentGroupDC,\n                  this._fnPageContentGroupCallback,\n                  resolve\n               );\n         };\n         this._fnPageContentDisplayCallback = (\n            contentDisplayRecords,\n            isContentDisplayDone,\n            contentDisplayDC,\n            resolve\n         ) => {\n            const contentDC = this._contentDC;\n            this._fnPageContentCallback(\n               contentDC.getData(),\n               true,\n               contentDC,\n               () => {}\n            );\n            if (isContentDisplayDone) resolve();\n            else\n               this._callPagingEvent(\n                  contentDisplayDC,\n                  this._fnPageContentDisplayCallback,\n                  resolve\n               );\n         };\n         this._fnPageData = async (dc, callback, resolve) => {\n            await this._waitDCReady(dc);\n            let records = dc.getData();\n            try {\n               // TODO (Guy): Figure out later why the employee dc which is not reloaded lost the data.\n               if (records.length < DC_OFFSET) await dc.loadData();\n               records = dc.getData();\n               if (\n                  records.length < DC_OFFSET ||\n                  (records.length - DC_OFFSET) % RECORD_LIMIT > 0\n               )\n                  throw null;\n               try {\n                  await dc.loadData(\n                     RECORD_LIMIT * parseInt(records.length / RECORD_LIMIT),\n                     RECORD_LIMIT\n                  );\n               } catch {}\n               if (dc.getData().length === records.length) throw null;\n               records = dc.getData();\n               if ((records.length - DC_OFFSET) % RECORD_LIMIT > 0) throw null;\n               callback && (await callback(records, false, dc, resolve));\n            } catch {\n               callback && (await callback(records, true, dc, resolve));\n            }\n         };\n         this._fnPageTeamCallback = async (\n            teamRecords,\n            isTeamDone,\n            teamDC,\n            resolve\n         ) => {\n            const contentFieldColumnName =\n               this.getSettingField(\"contentField\").columnName;\n            const contentDC = this._contentDC;\n            const contentRecordPK = contentDC.datasource.PK();\n            for (const teamRecord of teamRecords) {\n               const teamNodeID = this.teamNodeID(teamRecord.id);\n               let $teamNode = document.getElementById(teamNodeID);\n               if ($teamNode == null) {\n                  await this.teamAddChild(teamRecord, false);\n                  $teamNode = document.getElementById(teamNodeID);\n                  if ($teamNode == null) continue;\n               } else await this.teamEdit(teamRecord, false);\n               const contentRecords = contentDC.getData(\n                  (contentRecord) =>\n                     teamRecord[contentFieldColumnName].indexOf(\n                        contentRecord[contentRecordPK]\n                     ) > -1\n               );\n               for (const contentRecord of contentRecords)\n                  this._addContentRecordToGroup($teamNode, contentRecord);\n            }\n            if (isTeamDone) {\n               await this.pullData();\n               resolve();\n            } else\n               this._callPagingEvent(\n                  this.datacollection,\n                  this._fnPageTeamCallback,\n                  resolve\n               );\n         };\n         this._fnRefresh = async () => {\n            this.busy();\n            const entityDC = this._entityDC;\n            const teamDC = this.datacollection;\n            const contentDC = this._contentDC;\n            const contentGroupDC = this._contentGroupDC;\n            await Promise.all([\n               teamDC?.datacollectionLink != null &&\n                  this._waitDCPending(teamDC),\n               contentDC?.datacollectionLink != null &&\n                  this._waitDCPending(contentDC),\n               contentGroupDC?.datacollectionLink != null &&\n                  this._waitDCPending(contentGroupDC),\n               ...this._contentDisplayDCs\n                  .filter(\n                     (contentDisplayDC) =>\n                        contentDisplayDC !== entityDC &&\n                        contentDisplayDC !== teamDC &&\n                        contentDisplayDC !== contentDC &&\n                        contentDisplayDC !== contentGroupDC\n                  )\n                  .map(\n                     (contentDisplayDC) =>\n                        contentDisplayDC.datacollectionLink != null &&\n                        this._waitDCPending(contentDisplayDC)\n                  ),\n            ]);\n            this.__orgchart?.remove();\n            this.__orgchart = null;\n            await this.refresh();\n            this.ready();\n         };\n         this._fnShowContentForm = (event) => {\n            const contentDC = this._contentDC;\n            const contentObj = contentDC.datasource;\n            const contentModel = contentDC.model;\n            const settings = this.settings;\n            const editContentFieldsToCreateNew =\n               settings.editContentFieldsToCreateNew;\n            const contentDateStartField = contentObj.fields(\n               (field) => field.id === settings.contentFieldDateStart\n            )[0];\n            const contentDateStartFieldLabel = contentDateStartField?.label;\n            const contentDateStartFieldColumnName =\n               contentDateStartField?.columnName;\n            const contentDateEndFieldColumnName = this.getSettingField(\n               \"contentFieldDateEnd\"\n            )?.columnName;\n            const contentDataRecord = JSON.parse(\n               event.currentTarget.dataset.source ||\n                  event.currentTarget.parentElement.dataset.source\n            );\n            const rules = {};\n            const labelWidth = 200;\n            const ids = this.ids;\n            const contentFormElements = settings.setEditableContentFields.map(\n               (fieldID) => {\n                  const field = contentObj.fields(\n                     (field) => field.id === fieldID\n                  )[0];\n                  if (field == null)\n                     return {\n                        view: \"label\",\n                        label: this.label(\"Missing Field\"),\n                        labelWidth,\n                     };\n                  const fieldKey = field.key;\n                  const fieldName = field.columnName;\n\n                  // TODO (Guy): Add validators.\n                  let invalidMessage = \"\";\n                  switch (fieldName) {\n                     case contentDateEndFieldColumnName:\n                        invalidMessage = `The ${field.label} must be later than the ${contentDateStartFieldLabel}.`;\n                        rules[fieldName] = (value) =>\n                           value >\n                              $$(ids.contentFormData).getValues()[\n                                 contentDateStartFieldColumnName\n                              ] ||\n                           value === \"\" ||\n                           value == null;\n                        break;\n                     default:\n                        rules[fieldName] = () => true;\n                        break;\n                  }\n                  const fieldLabel = field.label;\n                  const settings = field.settings;\n                  switch (fieldKey) {\n                     case \"boolean\":\n                        return {\n                           view: \"checkbox\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           invalidMessage,\n                        };\n                     case \"number\":\n                        return {\n                           view: \"counter\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           type: \"number\",\n                           invalidMessage,\n                        };\n                     case \"list\":\n                        return {\n                           view:\n                              (settings.isMultiple === 1 && \"muticombo\") ||\n                              \"combo\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           options: settings.options.map((option) => ({\n                              id: option.id,\n                              value: option.text,\n                           })),\n                           invalidMessage,\n                        };\n                     case \"user\":\n                     case \"connectObject\":\n                        const abWebix = this.AB.Webix;\n                        const fieldLinkObj = field.datasourceLink;\n\n                        // TODO (Guy): Hardcode for the employee field\n                        if (fieldLabel === \"NS Employee Record\")\n                           return {\n                              view: \"text\",\n                              label: \"Name\",\n                              disabled: true,\n                              labelWidth,\n                              invalidMessage,\n                              on: {\n                                 async onViewShow() {\n                                    abWebix.extend(this, abWebix.ProgressBar);\n                                    this.showProgress({ type: \"icon\" });\n                                    try {\n                                       this.setValue(\n                                          fieldLinkObj.displayData(\n                                             (\n                                                await fieldLinkObj\n                                                   .model()\n                                                   .findAll({\n                                                      where: {\n                                                         glue: \"and\",\n                                                         rules: [\n                                                            {\n                                                               key: fieldLinkObj.PK(),\n                                                               rule: \"equals\",\n                                                               value: contentDataRecord[\n                                                                  fieldName\n                                                               ],\n                                                            },\n                                                         ],\n                                                      },\n                                                   })\n                                             ).data[0]\n                                          )\n                                       );\n                                       this.hideProgress();\n                                    } catch {\n                                       // Close popup before response or possily response fail\n                                    }\n                                 },\n                              },\n                           };\n                        const onViewShow = async function () {\n                           abWebix.extend(this, abWebix.ProgressBar);\n                           this.showProgress({ type: \"icon\" });\n                           try {\n                              this.define(\n                                 \"options\",\n                                 (\n                                    await fieldLinkObj.model().findAll()\n                                 ).data.map((e) => ({\n                                    id: e.id,\n                                    value: fieldLinkObj.displayData(e),\n                                 }))\n                              );\n                              this.refresh();\n                              this.enable();\n                              this.hideProgress();\n                           } catch {\n                              // Close popup before response or possily response fail\n                           }\n                        };\n                        return field.linkType() === \"one\"\n                           ? {\n                                view: \"combo\",\n                                name: fieldName,\n                                label: fieldLabel,\n                                disabled: true,\n                                labelWidth,\n                                invalidMessage,\n                                options: [],\n                                on: {\n                                   onViewShow,\n                                },\n                             }\n                           : {\n                                view: \"multicombo\",\n                                name: fieldName,\n                                label: fieldLabel,\n                                labelWidth,\n                                stringResult: false,\n                                labelAlign: \"left\",\n                                invalidMessage,\n                                options: [],\n                                on: {\n                                   onViewShow,\n                                },\n                             };\n                     case \"date\":\n                     case \"datetime\":\n                        return {\n                           view: \"datepicker\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           stringResult: true,\n                           labelWidth,\n                           invalidMessage,\n                           timepicker: fieldKey === \"datetime\",\n                        };\n                     case \"file\":\n                     case \"image\":\n                        // TODO (Guy): Add logic\n                        return {\n                           // view: \"\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           invalidMessage,\n                        };\n                     // case \"json\":\n                     // case \"LongText\":\n                     // case \"string\":\n                     // case \"email\":\n                     default:\n                        return {\n                           view: \"text\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           invalidMessage,\n                        };\n                  }\n               }\n            );\n            const Webix = AB.Webix;\n            contentFormElements.push({\n               view: \"button\",\n               value: this.label(\"Save\"),\n               css: \"webix_primary\",\n               click: async () => {\n                  const $contentFormData = $$(ids.contentFormData);\n                  if (!$contentFormData.validate()) return;\n                  const newFormData = this._parseFormValueByType(\n                     contentObj,\n                     contentDataRecord,\n                     $contentFormData.getValues()\n                  );\n                  const $contentForm = $$(ids.contentForm);\n                  $contentForm.blockEvent();\n                  $contentForm.$view.remove();\n                  $contentForm.destructor();\n                  if (!this._checkDataIsChanged(contentDataRecord, newFormData))\n                     return;\n                  const teamDC = this.datacollection;\n                  const contentDC = this._contentDC;\n                  const dataID = newFormData.id;\n                  const $contentNode = document.getElementById(\n                     this.contentNodeID(dataID)\n                  );\n                  delete newFormData[\"created_at\"];\n                  delete newFormData[\"updated_at\"];\n                  delete newFormData[\"properties\"];\n                  this._setUpdatedBy(contentObj, newFormData);\n                  if (\n                     !this._isLessThanDay(\n                        new Date(\n                           contentDataRecord[contentDateStartFieldColumnName]\n                        )\n                     )\n                  ) {\n                     let isCreated = false;\n                     for (const editContentFieldToCreateNew of editContentFieldsToCreateNew) {\n                        const editContentFieldToCreateNewColumnName =\n                           contentObj.fieldByID(\n                              editContentFieldToCreateNew\n                           )?.columnName;\n                        if (\n                           !isCreated &&\n                           contentDataRecord[\n                              editContentFieldToCreateNewColumnName\n                           ] != null &&\n                           contentDataRecord[\n                              editContentFieldToCreateNewColumnName\n                           ] !== \"\" &&\n                           JSON.stringify(\n                              newFormData[\n                                 editContentFieldToCreateNewColumnName\n                              ] ?? \"\"\n                           ) !==\n                              JSON.stringify(\n                                 contentDataRecord[\n                                    editContentFieldToCreateNewColumnName\n                                 ]\n                              )\n                        ) {\n                           isCreated = true;\n                           break;\n                        }\n                     }\n                     if (isCreated) {\n                        Webix.confirm({\n                           title: this.label(\n                              \"Caution: Creating New Assignment\"\n                           ),\n                           ok: this.label(\"Continue with new assignment\"),\n                           cancel: this.label(\"Cancel\"),\n                           text: this.label(\n                              \"When you change the Role type or Job title, then the current assignment is closed with the current date and a new assignment is created for this team.\"\n                           ),\n                           css: \"orgchart-teams-edit-content-confirm-popup\",\n                        }).then(async () => {\n                           this.busy();\n                           const pendingPromises = [];\n                           const oldData = {};\n\n                           oldData[contentDateEndFieldColumnName] = new Date();\n                           this._setUpdatedBy(contentObj, oldData);\n                           pendingPromises.push(\n                              contentModel.update(dataID, oldData)\n                           );\n                           newFormData[contentDateStartFieldColumnName] =\n                              oldData[contentDateEndFieldColumnName];\n                           delete newFormData[\"id\"];\n                           delete newFormData[\"uuid\"];\n                           delete newFormData[contentDateEndFieldColumnName];\n                           pendingPromises.push(\n                              contentModel.create(newFormData)\n                           );\n                           try {\n                              await Promise.all(pendingPromises);\n                           } catch (err) {\n                              // TODO (Guy): The update data error.\n                              console.error(err);\n                           }\n                           try {\n                              // TODO (Guy): Logic to not reload dcs.\n                              await Promise.all([\n                                 this._reloadDCData(teamDC),\n                                 this._reloadDCData(contentDC),\n                              ]);\n                              // await this._reloadAllDC();\n                           } catch (err) {\n                              // TODO (Guy): The reload DCs error.\n                              console.error(err);\n                           }\n                           await this.refresh();\n                           $contentNode.remove();\n                           this.ready();\n                        });\n                        return;\n                     }\n                  }\n                  if (\n                     new Date(newFormData[contentDateEndFieldColumnName]) <=\n                     new Date()\n                  ) {\n                     Webix.confirm({\n                        title: this.label(\"Caution: Ending Current Assignment\"),\n                        ok: this.label(\"Continue with ending this assignment\"),\n                        cancel: this.label(\"Cancel\"),\n                        text: [\n                           this.label(\n                              \"When you provide an End Date, the current assignment is ended when the date = the current date and the assignment will no longer show on this team.\"\n                           ),\n                           this.label(\n                              \"This will put the team member back into the unassigned list box if they have no other active assignments.\"\n                           ),\n                        ].join(\"\\n\"),\n                        css: \"orgchart-teams-edit-content-confirm-popup\",\n                     }).then(async () => {\n                        this.busy();\n                        try {\n                           await contentModel.update(dataID, newFormData);\n                        } catch (err) {\n                           // TODO (Guy): The update data error.\n                           console.error(err);\n                        }\n                        try {\n                           // TODO (Guy): Logic to not reload dcs.\n                           await Promise.all([\n                              this._reloadDCData(teamDC),\n                              this._reloadDCData(contentDC),\n                           ]);\n                           // await this._reloadAllDC();\n                        } catch (err) {\n                           // TODO (Guy): The reload DCs error.\n                           console.error(err);\n                        }\n                        await this.refresh();\n                        $contentNode.remove();\n                        this.ready();\n                     });\n                     return;\n                  }\n                  this.busy();\n                  try {\n                     await contentModel.update(dataID, newFormData);\n                  } catch (err) {\n                     // TODO (Guy): The update data error.\n                     console.error(err);\n                  }\n                  try {\n                     // TODO (Guy): Logic to not reload dcs.\n                     await Promise.all([\n                        this._reloadDCData(teamDC),\n                        this._reloadDCData(contentDC),\n                     ]);\n                     // await this._reloadAllDC();\n                  } catch (err) {\n                     // TODO (Guy): The reload DCs error.\n                     console.error(err);\n                  }\n                  await this.refresh();\n                  $contentNode.remove();\n                  this.ready();\n               },\n            });\n            Webix.ui({\n               view: \"popup\",\n               id: ids.contentForm,\n               close: true,\n               position: \"center\",\n               css: { \"border-radius\": \"10px\" },\n               body: {\n                  width: 600,\n                  rows: [\n                     {\n                        view: \"toolbar\",\n                        css: \"webix_dark\",\n                        cols: [\n                           { width: 5 },\n                           {\n                              view: \"label\",\n                              label: `${this.label(\"Edit\")} ${\n                                 contentObj.label\n                              }`,\n                              align: \"left\",\n                           },\n                           {\n                              view: \"icon\",\n                              icon: \"fa fa-times\",\n                              align: \"right\",\n                              width: 60,\n                              click: () => {\n                                 const $contentForm = $$(ids.contentForm);\n                                 $contentForm.blockEvent();\n                                 $contentForm.$view.remove();\n                                 $contentForm.destructor();\n                              },\n                           },\n                        ],\n                     },\n                     {\n                        view: \"form\",\n                        id: ids.contentFormData,\n                        hidden: true,\n                        elements: contentFormElements,\n                        rules,\n                     },\n                  ],\n               },\n               on: {\n                  onHide() {\n                     this.$view.remove();\n                     this.destructor();\n                  },\n               },\n            }).show();\n            const $contentFormData = $$(ids.contentFormData);\n            $contentFormData.setValues(\n               this._convertToFormValueByType(\n                  structuredClone(contentDataRecord)\n               )\n            );\n            $contentFormData.show();\n         };\n         this._fnShowFilterPopup = async (event) => {\n            const contentDisplayedFieldFilters =\n               this.settings.contentDisplayedFieldFilters;\n            const ids = this.ids;\n            let $popup = $$(ids.filterPopup);\n            if (!$popup) {\n               const self = this;\n               $popup = webix.ui({\n                  view: \"popup\",\n                  css: \"filter-popup\",\n                  id: ids.filterPopup,\n                  body: {\n                     rows: [\n                        {\n                           view: \"form\",\n                           borderless: true,\n                           hidden: true,\n                           id: ids.filterForm,\n                           elements: [\n                              {\n                                 view: \"text\",\n                                 label: this.label(\"Team Name\"),\n                                 labelWidth: 100,\n                                 name: \"teamName\",\n                                 clear: true,\n                              },\n                              {\n                                 view: \"combo\",\n                                 label: this.label(\"Strategy\"),\n                                 labelWidth: 100,\n                                 options: [],\n                                 name: \"strategy\",\n                                 clear: \"replace\",\n                                 on: {\n                                    async onViewShow() {\n                                       webix.extend(this, webix.ProgressBar);\n                                       this.showProgress({ type: \"icon\" });\n                                       try {\n                                          this.define(\n                                             \"options\",\n                                             await self.strategyCodeOptions()\n                                          );\n                                          this.refresh();\n                                          this.enable();\n                                          this.hideProgress();\n                                       } catch {\n                                          // Close popup before response or possily response fail\n                                       }\n                                    },\n                                 },\n                              },\n                              {\n                                 view: \"checkbox\",\n                                 name: \"inactive\",\n                                 labelRight: this.label(\"Show Inactive Teams\"),\n                                 labelWidth: 0,\n                              },\n                              ...(() => {\n                                 const contentDisplayedFieldFilterViews = [];\n                                 for (const contentDisplayedFieldFilterKey in contentDisplayedFieldFilters) {\n                                    const [, objID, fieldID, isActive] =\n                                       contentDisplayedFieldFilterKey.split(\n                                          \".\"\n                                       );\n                                    if (isActive == 1)\n                                       switch (fieldID) {\n                                          // TODO (Guy): Hardcode for the role type filter.\n                                          case \"96dc0d8d-7fb4-4bb1-8b80-a262aae41eed\":\n                                             const obj =\n                                                this.AB.objectByID(objID);\n                                             const model = obj.model();\n                                             const fieldColumnName =\n                                                obj.fieldByID(\n                                                   fieldID\n                                                ).columnName;\n                                             contentDisplayedFieldFilterViews.push(\n                                                {\n                                                   view: \"combo\",\n                                                   label: contentDisplayedFieldFilters[\n                                                      contentDisplayedFieldFilterKey\n                                                   ],\n                                                   labelWidth: 100,\n                                                   options: [],\n                                                   name: contentDisplayedFieldFilterKey,\n                                                   clear: \"replace\",\n                                                   on: {\n                                                      async onViewShow() {\n                                                         webix.extend(\n                                                            this,\n                                                            webix.ProgressBar\n                                                         );\n                                                         this.showProgress({\n                                                            type: \"icon\",\n                                                         });\n                                                         try {\n                                                            this.define(\n                                                               \"options\",\n                                                               (\n                                                                  await model.findAll()\n                                                               ).data.map(\n                                                                  (e) => ({\n                                                                     id: e[\n                                                                        fieldColumnName\n                                                                     ],\n                                                                     value: e[\n                                                                        fieldColumnName\n                                                                     ],\n                                                                  })\n                                                               )\n                                                            );\n                                                            this.refresh();\n                                                            this.enable();\n                                                            this.hideProgress();\n                                                         } catch {\n                                                            // Close popup before response or possily response fail\n                                                         }\n                                                      },\n                                                   },\n                                                }\n                                             );\n                                             break;\n                                          default:\n                                             contentDisplayedFieldFilterViews.push(\n                                                {\n                                                   view: \"text\",\n                                                   label: contentDisplayedFieldFilters[\n                                                      contentDisplayedFieldFilterKey\n                                                   ],\n                                                   labelWidth: 100,\n                                                   name: contentDisplayedFieldFilterKey,\n                                                   clear: true,\n                                                }\n                                             );\n                                             break;\n                                       }\n                                 }\n                                 return contentDisplayedFieldFilterViews;\n                              })(),\n                              {\n                                 cols: [\n                                    {},\n                                    {\n                                       view: \"icon\",\n                                       icon: \"fa fa-check\",\n                                       css: \"filter-apply\",\n                                       click: () => this.filterApply(),\n                                    },\n                                 ],\n                              },\n                           ],\n                        },\n                     ],\n                  },\n                  on: {\n                     onShow() {\n                        $$(ids.filterForm).show();\n                     },\n                     onHide() {\n                        $$(ids.filterForm).hide();\n                     },\n                  },\n               });\n            }\n            $popup.show($$(ids.filterButton).$view);\n         };\n\n         // Generate strategy css\n         const css = [\n            \"org-chart .strategy-external .title{background:#989898 !important;}\",\n         ];\n         const colors = this.settings.strategyColors;\n         for (let key in colors) {\n            css.push(\n               `org-chart .strategy-${key} .title{background:${colors[key]} !important;}`\n            );\n         }\n         const style = document.createElement(\"style\");\n         style.innerHTML = css.join(\"\");\n         document.getElementsByTagName(\"head\")[0].appendChild(style);\n         this.on(\"pageData\", this._fnPageData);\n      }\n\n      _addContentRecordToGroup($teamNode, contentRecord) {\n         const contentGroupDC = this._contentGroupDC;\n         const contentGroupDataPK =\n            contentRecord[\n               this.getSettingField(\"contentGroupByField\").columnName\n            ];\n         const contentGroupPKField = contentGroupDC.datasource.PK();\n         if (\n            contentGroupDC.getData(\n               (e) => e[contentGroupPKField] == contentGroupDataPK\n            )[0] == null\n         )\n            return;\n         const $groupSection = $teamNode.querySelector(\n            `.team-group-section[data-pk=\"${contentGroupDataPK}\"] > .team-group-content`\n         );\n         if ($groupSection == null) return;\n         (async () => {\n            await this._callAfterRender(async () => {\n               const contentNodeID = this.contentNodeID(contentRecord.id);\n               let $contentNode = document.getElementById(contentNodeID);\n               while ($contentNode != null) {\n                  $contentNode.remove();\n                  $contentNode = document.getElementById(contentNodeID);\n               }\n               $groupSection.appendChild(\n                  await this._createUIContentRecord(\n                     contentRecord,\n                     this.settings.strategyColors[\n                        $teamNode.classList.item(1).replace(\"strategy-\", \"\")\n                     ]\n                  )\n               );\n            });\n         })();\n      }\n\n      _convertToFormValueByType(contentRecord) {\n         const contentAllFields = this._contentDC.datasource.fields();\n         for (const field of contentAllFields) {\n            const columnName = field.columnName;\n            const value = contentRecord[columnName];\n            switch (field.key) {\n               case \"boolean\":\n                  if (value === true) contentRecord[columnName] = 1;\n                  else if (value === false) contentRecord[columnName] = 0;\n                  else {\n                     const parsedValue = parseInt(value);\n                     contentRecord[columnName] = isNaN(parsedValue)\n                        ? 0\n                        : parsedValue;\n                  }\n                  break;\n               case \"date\":\n               case \"datetime\":\n                  contentRecord[columnName] = new Date(value);\n                  break;\n               default:\n                  break;\n            }\n         }\n         return contentRecord;\n      }\n\n      async _createUIContentRecord(data, color) {\n         const $ui = element(\"div\", \"team-group-record\");\n         $ui.setAttribute(\"id\", this.contentNodeID(data.id));\n         $ui.setAttribute(\"data-source\", JSON.stringify(data));\n         $ui.style.borderColor = color;\n         $ui.addEventListener(\"dblclick\", this._fnShowContentForm);\n         if (this.settings.draggable === 1) {\n            $ui.setAttribute(\"draggable\", \"true\");\n            $ui.addEventListener(\"dragstart\", this._fnContentDragStart);\n            $ui.addEventListener(\"dragend\", this._fnContentDragEnd);\n         }\n\n         // TODO (Guy): Now we are hardcoding for each display\n         const hardcodedDisplays = [\n            element(\"div\", \"display-block\"),\n            element(\"div\", \"display-block\"),\n            element(\"div\", \"display-block display-block-right\"),\n         ];\n         const $hardcodedSpecialDisplay = element(\n            \"div\",\n            \"team-group-record-display\"\n         );\n         let currentDataRecords = [];\n         let currentField = null;\n         let currentDisplayIndex = 0;\n         const contentDC = this._contentDC;\n         const contentObjID = contentDC.datasource.id;\n         const contentDisplayedFields = this.settings.contentDisplayedFields;\n         const contentDisplayedFieldsKeys = Object.keys(contentDisplayedFields);\n         const contentDisplayDCs = this._contentDisplayDCs;\n         for (let j = 0; j < contentDisplayedFieldsKeys.length; j++) {\n            const displayedFieldKey = contentDisplayedFieldsKeys[j];\n            const [atDisplay, objID] = displayedFieldKey.split(\".\");\n            const displayedObj = AB.objectByID(objID);\n            const displayedFieldID = contentDisplayedFields[displayedFieldKey];\n            const displayedField = displayedObj.fieldByID(displayedFieldID);\n            const displayDC = contentDisplayDCs.find(\n               (contentDisplayDC) => contentDisplayDC.datasource.id === objID\n            );\n            switch (objID) {\n               case contentObjID:\n                  currentDataRecords = [data];\n                  break;\n               default:\n                  if (currentField == null) break;\n                  if (currentDataRecords.length > 0) {\n                     const currentFieldColumnName = currentField.columnName;\n                     const currentDataPKs = [];\n                     do {\n                        const currentFieldData =\n                           currentDataRecords.pop()[currentFieldColumnName];\n                        if (Array.isArray(currentFieldData)) {\n                           if (currentFieldData.length > 0)\n                              currentDataPKs.push(...currentFieldData);\n                        } else if (currentFieldData != null)\n                           currentDataPKs.push(currentFieldData);\n                     } while (currentDataRecords.length > 0);\n                     await this._waitDCReady(displayDC);\n                     currentDataRecords = displayDC.getData((r) => {\n                        return currentDataPKs.some((id) => id == r.id);\n                     });\n                  }\n                  break;\n            }\n            if (\n               contentDisplayedFieldsKeys[j + 1]?.split(\".\")[0] === atDisplay\n            ) {\n               currentField = displayedField;\n               continue;\n            }\n            const $currentDisplay = element(\"div\", \"team-group-record-display\");\n            const displayedFieldColumnName = displayedField.columnName;\n            // TODO (Guy): Now we are hardcoding for each display.\n            // $rowData.appendChild($currentDisplay);\n            switch (currentDisplayIndex) {\n               case 0:\n                  hardcodedDisplays[0].appendChild($currentDisplay);\n                  break;\n               case 1:\n                  let i = 0;\n                  while (\n                     currentDataRecords.length > 0 &&\n                     currentDataRecords[i] != null\n                  )\n                     if (\n                        currentDataRecords[i][displayedFieldColumnName] ==\n                           null ||\n                        currentDataRecords[i][displayedFieldColumnName] === \"\"\n                     )\n                        currentDataRecords.splice(i, 1);\n                     else i++;\n                  if (currentDataRecords.length === 0)\n                     hardcodedDisplays[2].style.display = \"none\";\n                  hardcodedDisplays[2].appendChild($currentDisplay);\n                  break;\n               case 2:\n                  hardcodedDisplays[1].appendChild($hardcodedSpecialDisplay);\n                  $hardcodedSpecialDisplay.appendChild($currentDisplay);\n                  break;\n               case 3:\n                  $hardcodedSpecialDisplay.appendChild($currentDisplay);\n                  break;\n               default:\n                  hardcodedDisplays[1].appendChild($currentDisplay);\n                  break;\n            }\n            currentDisplayIndex++;\n            const contentDisplayedFieldTypePrefix = `${displayedFieldKey}.${displayedFieldID}`;\n            const contentDisplayedFieldMappingDataObj =\n               JSON.parse(\n                  this.settings.contentDisplayedFieldMappingData?.[\n                     contentDisplayedFieldTypePrefix\n                  ] || null\n               ) || {};\n            if (\n               this.settings.contentDisplayedFieldTypes[\n                  `${contentDisplayedFieldTypePrefix}.0`\n               ] != null\n            )\n               $currentDisplay.style.display = \"none\";\n            switch (\n               this.settings.contentDisplayedFieldTypes[\n                  `${contentDisplayedFieldTypePrefix}.1`\n               ]\n            ) {\n               case \"icon\":\n                  // TODO (Guy): Add logic.\n                  break;\n               case \"image\":\n                  while (currentDataRecords.length > 0) {\n                     const currentDataRecordValue =\n                        currentDataRecords.pop()[displayedFieldColumnName];\n                     const $img = document.createElement(\"img\");\n                     $currentDisplay.appendChild($img);\n                     $img.setAttribute(\n                        \"src\",\n                        contentDisplayedFieldMappingDataObj[\n                           currentDataRecordValue\n                        ] ?? currentDataRecordValue\n                     );\n                  }\n                  break;\n               case \"svg\":\n                  while (currentDataRecords.length > 0) {\n                     const currentDataRecord = currentDataRecords.pop();\n                     const currentDataRecordID = currentDataRecord.id;\n                     const currentDataRecordValue =\n                        currentDataRecord[displayedFieldColumnName];\n                     const SVG_NS = \"http://www.w3.org/2000/svg\";\n                     const X_LINK_NS = \"http://www.w3.org/1999/xlink\";\n                     const $svg = document.createElementNS(SVG_NS, \"svg\");\n                     $currentDisplay.appendChild($svg);\n                     $svg.setAttribute(\"viewBox\", \"0 0 6 6\");\n                     $svg.setAttribute(\"fill\", \"none\");\n                     $svg.setAttribute(\"xmlns\", SVG_NS);\n                     $svg.setAttribute(\"xmlns:xlink\", X_LINK_NS);\n                     const $rect = document.createElementNS(SVG_NS, \"rect\");\n                     const $defs = document.createElementNS(SVG_NS, \"defs\");\n                     $svg.append($rect, $defs);\n                     $rect.setAttribute(\"width\", \"6\");\n                     $rect.setAttribute(\"height\", \"6\");\n                     const patternID = `display-svg.pattern.${currentDataRecordID}`;\n                     $rect.setAttribute(\"fill\", `url(#${patternID})`);\n                     const $pattern = document.createElementNS(\n                        SVG_NS,\n                        \"pattern\"\n                     );\n                     const $image = document.createElementNS(SVG_NS, \"image\");\n                     $defs.append($pattern, $image);\n                     $pattern.id = patternID;\n                     $pattern.setAttributeNS(\n                        null,\n                        \"patternContentUnits\",\n                        \"objectBoundingBox\"\n                     );\n                     $pattern.setAttribute(\"width\", \"1\");\n                     $pattern.setAttribute(\"height\", \"1\");\n                     const imageID = `display-svg.image.${currentDataRecordID}`;\n                     $image.id = imageID;\n                     $image.setAttribute(\"width\", \"512\");\n                     $image.setAttribute(\"height\", \"512\");\n                     $image.setAttributeNS(\n                        X_LINK_NS,\n                        \"xlink:href\",\n                        contentDisplayedFieldMappingDataObj[\n                           currentDataRecordValue\n                        ] ?? currentDataRecordValue\n                     );\n                     const $use = document.createElementNS(SVG_NS, \"use\");\n                     $pattern.appendChild($use);\n                     $use.setAttributeNS(\n                        X_LINK_NS,\n                        \"xlink:href\",\n                        `#${imageID}`\n                     );\n                     $use.setAttribute(\"transform\", \"scale(0.002)\");\n                  }\n                  break;\n               default:\n                  while (currentDataRecords.length > 0) {\n                     const currentDataRecordValue =\n                        currentDataRecords.pop()[displayedFieldColumnName];\n                     $currentDisplay.appendChild(\n                        document.createTextNode(\n                           contentDisplayedFieldMappingDataObj[\n                              currentDataRecordValue\n                           ] ?? currentDataRecordValue\n                        )\n                     );\n                  }\n\n                  // TODO (Guy): Hardcode limit text.\n                  if (currentDisplayIndex - 1 === 1)\n                     $currentDisplay.textContent =\n                        $currentDisplay.textContent.slice(0, 35);\n                  break;\n            }\n            currentField = null;\n         }\n\n         // TODO (Guy): Now we are hardcoding for each display.\n         const hardcodedDisplaysLength = hardcodedDisplays.length;\n         for (let i = 0; i < hardcodedDisplaysLength; i++) {\n            const $hardcodedDisplay = hardcodedDisplays[i];\n            $ui.appendChild($hardcodedDisplay);\n            const children = $hardcodedDisplay.children;\n            let isShown = false;\n            let j = 0;\n            let child, grandChildren, grandChildrenLength;\n            switch (i) {\n               case 1:\n                  child = children.item(j);\n                  grandChildren = child.children;\n                  grandChildrenLength = grandChildren.length;\n                  for (; j < grandChildrenLength; j++)\n                     if (grandChildren[j].style.display !== \"none\") {\n                        isShown = true;\n                        break;\n                     }\n                  if (isShown) continue;\n                  child.style.display = \"none\";\n                  j = 1;\n                  break;\n               default:\n                  break;\n            }\n            const childrenLength = children.length;\n            const hardcodedDisplayStyle = $hardcodedDisplay.style;\n            for (; j < childrenLength; j++)\n               if (children.item(j).style.display !== \"none\") {\n                  isShown = true;\n                  break;\n               }\n            !isShown && (hardcodedDisplayStyle.display = \"none\");\n         }\n         const $editIcon = element(\"div\", \"team-group-record-edit-icon\");\n         $editIcon.appendChild(element(\"i\", \"fa fa-pencil\"));\n         $editIcon.addEventListener(\"click\", this._fnShowContentForm);\n         $ui.appendChild($editIcon);\n         return $ui;\n      }\n\n      async _callAfterRender(callback, ...params) {\n         await new Promise((resolve, reject) => {\n            requestAnimationFrame(() => {\n               requestAnimationFrame(async () => {\n                  try {\n                     await callback(...params);\n                     resolve();\n                  } catch (err) {\n                     reject(err);\n                  }\n               });\n            });\n         });\n      }\n\n      _callPagingEvent(dc, callback, resolve) {\n         this.emit(\"pageData\", dc, callback, resolve);\n      }\n\n      _checkDataIsChanged(olaValues, newValues) {\n         // TODO (Guy): Check array in the future.\n         for (const key in newValues)\n            if (\n               JSON.stringify(newValues[key]) !== JSON.stringify(olaValues[key])\n            )\n               return true;\n         return false;\n      }\n\n      _isLessThanDay(date) {\n         return Math.abs(new Date() - date) / 36e5 < 24;\n      }\n\n      _initDC(dc) {\n         dc.init();\n         if (dc.dataStatus === dc.dataStatusFlag.notInitial) dc.loadData();\n      }\n\n      _pageData() {\n         if (this._promisePageData != null) return;\n         let resolvePageData = null;\n         this._promisePageData = new Promise((resolve) => {\n            resolvePageData = resolve;\n         });\n         const entityDC = this._entityDC;\n         const teamDC = this.datacollection;\n         const contentDC = this._contentDC;\n         const contentGroupDC = this._contentGroupDC;\n         (async () => {\n            try {\n               await Promise.all([\n                  new Promise((resolve) => {\n                     this._callPagingEvent(\n                        teamDC,\n                        this._fnPageTeamCallback,\n                        resolve\n                     );\n                  }),\n                  new Promise((resolve) => {\n                     this._callPagingEvent(\n                        contentDC,\n                        this._fnPageContentCallback,\n                        resolve\n                     );\n                  }),\n                  new Promise((resolve) => {\n                     this._callPagingEvent(\n                        contentGroupDC,\n                        this._fnPageContentGroupCallback,\n                        resolve\n                     );\n                  }),\n                  ...this._contentDisplayDCs\n                     .filter(\n                        (contentDisplayDC) =>\n                           contentDisplayDC !== entityDC &&\n                           contentDisplayDC !== teamDC &&\n                           contentDisplayDC !== contentDC &&\n                           contentDisplayDC !== contentGroupDC\n                     )\n                     .map(\n                        (contentDisplayDC) =>\n                           new Promise((resolve) => {\n                              this._callPagingEvent(\n                                 contentDisplayDC,\n                                 this._fnPageContentDisplayCallback,\n                                 resolve\n                              );\n                           })\n                     ),\n               ]);\n            } catch (err) {\n               // TODO (Guy): The paging error.\n               console.error(err);\n            }\n            resolvePageData();\n            this._promisePageData = null;\n         })();\n      }\n\n      _parseDataPK(dataPK) {\n         const intDataPk = parseInt(dataPK);\n         return (\n            ((isNaN(intDataPk) ||\n               intDataPk.toString().length !== dataPK.length) &&\n               dataPK) ||\n            intDataPk\n         );\n      }\n\n      _parseFormValueByType(obj, oldFormData, newFormData) {\n         const allFields = obj.fields();\n         for (const field of allFields) {\n            const fieldKey = field.key;\n            const columnName = field.columnName;\n            const oldValue = oldFormData?.[columnName];\n            const newValue = newFormData[columnName];\n            switch (fieldKey) {\n               case \"date\":\n                  if (oldValue === undefined && newValue == null)\n                     delete newFormData[columnName];\n                  else {\n                     newFormData[columnName] = new Date(newValue);\n                     if (isNaN(newFormData[columnName]))\n                        delete newFormData[columnName];\n                     else\n                        newFormData[columnName] = `${newFormData[\n                           columnName\n                        ].getFullYear()}-${String(\n                           newFormData[columnName].getMonth() + 1\n                        ).padStart(2, \"0\")}-${String(\n                           newFormData[columnName].getDate()\n                        ).padStart(2, \"0\")}`;\n                  }\n                  break;\n               case \"datetime\":\n                  if (oldValue === undefined && newValue == null)\n                     delete newFormData[columnName];\n                  try {\n                     newValue instanceof Date &&\n                        (newFormData[columnName] = newValue.toISOString());\n                  } catch {\n                     delete newFormData[columnName];\n                  }\n                  break;\n               case \"connectObject\":\n                  delete newFormData[`${columnName}__relation`];\n                  if (field.linkType() === \"one\") {\n                     if (\n                        oldValue === undefined &&\n                        newFormData[columnName] == null\n                     )\n                        delete newFormData[columnName];\n                     else\n                        switch (typeof oldValue) {\n                           case \"number\":\n                              newFormData[columnName] =\n                                 parseInt(newValue) || null;\n                              break;\n                           case \"string\":\n                              newFormData[columnName] =\n                                 newValue?.toString() || null;\n                              break;\n                           default:\n                              break;\n                        }\n                  }\n                  // TODO (Guy): Many logic in the future. Now we don't have an array data changed.\n                  else delete newFormData[columnName];\n                  break;\n               default:\n                  if (newValue == null || newValue === \"\")\n                     if (oldValue === undefined) {\n                        delete newFormData[columnName];\n                        break;\n                     } else if (oldValue === \"\") {\n                        newFormData[columnName] = \"\";\n                        break;\n                     }\n                  switch (fieldKey) {\n                     case \"boolean\":\n                        switch (typeof oldValue) {\n                           case \"number\":\n                              newFormData[columnName] = newValue;\n                              break;\n                           case \"string\":\n                              newFormData[columnName] =\n                                 newValue === 1 ? \"1\" : \"0\";\n                              break;\n                           default:\n                              newFormData[columnName] = newValue == 1;\n                              break;\n                        }\n                        break;\n                     case \"number\":\n                        const paredNewValue = parseInt(newValue);\n                        if (isNaN(parseInt(newValue))) {\n                           if (oldValue === undefined)\n                              delete newFormData[columnName];\n                           else newFormData[columnName] = oldValue;\n                           break;\n                        }\n                        switch (typeof oldValue) {\n                           case \"string\":\n                              newFormData[columnName] =\n                                 paredNewValue.toString();\n                              break;\n                           default:\n                              newFormData[columnName] = paredNewValue;\n                              break;\n                        }\n                        break;\n                     case \"string\":\n                        newFormData[columnName] = newValue?.toString() || \"\";\n                        break;\n                     default:\n                        break;\n                  }\n                  break;\n            }\n         }\n         return newFormData;\n      }\n\n      async _reloadAllDC() {\n         const entityDC = this._entityDC;\n         const teamDC = this.datacollection;\n         const contentDC = this._contentDC;\n         const contentGroupDC = this._contentGroupDC;\n         await Promise.all([\n            this._reloadDCData(teamDC),\n            ...this._dataPanelDCs.map((dataPanelDC) =>\n               this._reloadDCData(dataPanelDC)\n            ),\n            this._reloadDCData(contentDC),\n            ...this._contentDisplayDCs\n               .filter(\n                  (contentDisplayDC) =>\n                     contentDisplayDC !== entityDC &&\n                     contentDisplayDC !== teamDC &&\n                     contentDisplayDC !== contentDC &&\n                     contentDisplayDC !== contentGroupDC\n               )\n               .map((contentDisplayDC) => this._reloadDCData(contentDisplayDC)),\n         ]);\n      }\n\n      async _reloadDCData(dc) {\n         await this._promisePageData;\n         if (dc.dataStatus === dc.dataStatusFlag.initializing)\n            await this._waitDCReady(dc);\n         dc.clearAll();\n         this._initDC(dc);\n         await this._waitDCReady(dc);\n      }\n\n      _setUpdatedBy(obj, values) {\n         values[\n            // TODO (Guy): This should be the ABDesigner setting.\n            obj.fields(\n               (field) =>\n                  field.columnName.indexOf(\"_last_upd_by_in_app\") > -1 ||\n                  field.columnName.indexOf(\"_update_in_app\") > -1\n            )[0].columnName\n         ] = this.AB.Account.email();\n      }\n\n      _showDataPanel() {\n         let $panel = $$(this.ids.dataPanelPopup);\n         if (!$panel) {\n            $panel = this.AB.Webix.ui({\n               id: this.ids.dataPanelPopup,\n               view: \"popup\",\n               width: 250,\n               body: this._uiDataPanel(),\n               css: \"data-panel-popup\",\n               modal: true,\n            });\n         }\n         const $dpButtonWebix = $$(this.ids.dataPanelButton).$view;\n         const $dpButtonElem =\n            $dpButtonWebix.querySelector(\".data-panel-button\");\n         // Ensure the popup will stay to the right when resizing\n         if (!this._resizeObserver) {\n            this._resizeObserver = new ResizeObserver(([e]) => {\n               // Hide the panel when the widget is hidden (ex. switched to another App)\n               if (e.contentRect.width == 0 && e.contentRect.height == 0) {\n                  return $panel.hide();\n               }\n               $panel.show($dpButtonElem, { x: -30, y: -35 });\n            });\n         }\n         this._resizeObserver.observe($dpButtonWebix);\n         $panel.show($dpButtonElem, { x: -30, y: -35 });\n         $$(this.ids.dataPanel)\n            .getChildViews()[1]\n            .getChildViews()\n            .forEach(($childView) => $childView.callEvent(\"onViewShow\"));\n      }\n\n      _showOrgChart() {\n         const settings = this.settings;\n         const AB = this.AB;\n         const draggable = settings.draggable === 1;\n         const ids = this.ids;\n         const chartData = this._chartData;\n         if (chartData == null) {\n            this.__orgchart = null;\n            return;\n         }\n         const orgchart = new this._OrgChart({\n            data: AB.cloneDeep(chartData),\n            direction: settings.direction,\n            // depth: settings.depth,\n            // chartContainer: `#${ids.chartDom}`,\n            pan: true, // settings.pan == 1,\n            zoom: false, // settings.zoom == 1,\n            draggable,\n            // visibleLevel: settings.visibleLevel,\n            parentNodeSymbol: false,\n            exportButton: settings.export,\n            exportFilename: settings.exportFilename,\n            createNode: this._fnCreateNode,\n            nodeContent: \"description\",\n         });\n\n         // On drop update the parent (dropZone) of the node\n         if (draggable)\n            orgchart.addEventListener(\"nodedropped.orgchart\", this._fnNodeDrop);\n         if (this.__orgchart != null) {\n            const oldOrgchart = this.__orgchart;\n            orgchart.dataset.panStart = oldOrgchart.dataset.panStart;\n            orgchart.setAttribute(\"style\", oldOrgchart.getAttribute(\"style\"));\n            oldOrgchart.remove();\n         }\n         $$(ids.chartContent).$view.appendChild((this.__orgchart = orgchart));\n      }\n\n      _uiDataPanel() {\n         const self = this;\n         const _dataPanelDCs = self._dataPanelDCs;\n         const dataPanelDCs = self.settings.dataPanelDCs;\n         const contentObjID = this._contentDC?.datasource?.id;\n         const cells = [];\n         for (const key in dataPanelDCs) {\n            const [tabIndex, dataPanelDCID] = key.split(\".\");\n\n            // TODO (Guy): Hardcode data panel DCs for Employee.\n            // const _dataPanelDC = _dataPanelDCs.find(\n            //    (dataPanelDC) => dataPanelDC.id === dataPanelDCID\n            // );\n            const _dataPanelDC = self._contentDisplayDCs.find(\n               (contentDisplayDC) =>\n                  contentDisplayDC.datasource.id ===\n                  _dataPanelDCs.find(\n                     (dataPanelDC) => dataPanelDC.id === dataPanelDCID\n                  ).datasource.id\n            );\n            const contentDC = this._contentDC;\n            const header = dataPanelDCs[key];\n            if (_dataPanelDC == null)\n               cells.push({\n                  header,\n                  body: {\n                     view: \"list\",\n                     css: { overflow: \"auto\", \"max-height\": \"90%\" },\n                     data: [],\n                  },\n               });\n            else {\n               const panelObj = _dataPanelDC.datasource;\n               cells.push({\n                  header,\n                  body: {\n                     view: \"list\",\n                     template: (data) =>\n                        `<div class=\"data-panel-employee\">${panelObj.displayData(\n                           data\n                        )}</div>`,\n                     borderless: true,\n                     css: \"data-panel-employee-list\",\n                     data: [],\n                     on: {\n                        async onViewShow() {\n                           await self._waitDCReady(_dataPanelDC);\n                           const contentLinkedField = panelObj.connectFields(\n                              (field) => field.datasourceLink.id == contentObjID\n                           )[0].fieldLink;\n                           const contentLinkedFieldColumnName =\n                              contentLinkedField.columnName;\n                           this.clearAll();\n                           this.define(\n                              \"data\",\n                              // TODO (Guy): Hardcode Employee DC.\n                              (parseInt(tabIndex) < 2\n                                 ? _dataPanelDC.getData(\n                                      (panelRecord) =>\n                                         panelRecord.isinactive !== \"T\" &&\n                                         (tabIndex === \"0\"\n                                            ? contentDC.getData(\n                                                 (contentRecord) =>\n                                                    contentRecord[\n                                                       contentLinkedFieldColumnName\n                                                    ] == panelRecord.id\n                                              )[0] == null\n                                            : contentDC.getData(\n                                                 (contentRecord) =>\n                                                    contentRecord[\n                                                       contentLinkedFieldColumnName\n                                                    ] == panelRecord.id\n                                              )[0] != null)\n                                   )\n                                 : _dataPanelDCs\n                                      .find(\n                                         (dataPanelDC) =>\n                                            dataPanelDC.id === dataPanelDCID\n                                      )\n                                      .getData()\n                              ).sort(sortByEmployeeLastname)\n                           );\n                           await self._callAfterRender(() => {\n                              const $itemElements =\n                                 this.$view.children.item(0).children;\n                              const itemElementsLength = $itemElements.length;\n                              const contentFieldID = contentLinkedField.id;\n                              let count = 0;\n                              while (count < itemElementsLength) {\n                                 const $itemElement = $itemElements.item(\n                                    count++\n                                 );\n                                 $itemElement.setAttribute(\n                                    \"data-content-linked-field-id\",\n                                    contentFieldID\n                                 );\n                                 const dataPanelRecord = _dataPanelDC.getData(\n                                    (e) =>\n                                       e.id ==\n                                       $itemElement.getAttribute(\"webix_l_id\")\n                                 )[0];\n                                 if (dataPanelRecord == null) continue;\n                                 $itemElement.setAttribute(\n                                    \"data-pk\",\n                                    dataPanelRecord[panelObj.PK()]\n                                 );\n                                 $itemElement.setAttribute(\"draggable\", \"true\");\n                                 $itemElement.addEventListener(\n                                    \"dragstart\",\n                                    self._fnContentDragStart\n                                 );\n                                 $itemElement.addEventListener(\n                                    \"dragend\",\n                                    self._fnContentDragEnd\n                                 );\n                              }\n                           });\n                        },\n                     },\n                  },\n               });\n            }\n         }\n         return {\n            height: 600,\n            type: \"clean\",\n            rows: [\n               {\n                  view: \"template\",\n                  borderless: true,\n                  template: `<div style=\"color:#2F27CE;font-family:'Roboto';font-size:17px;font-weight:900\">\n                     ${this.label(\"Staff Assignment\")}\n                     <span class=\"fa fa-compress data-panel-close\"></span>\n                  </div>`,\n                  height: 35,\n                  onClick: {\n                     \"data-panel-close\": () => {\n                        $$(this.ids.dataPanelPopup).hide();\n                        this._resizeObserver?.unobserve(\n                           $$(this.ids.dataPanelButton).$view\n                        );\n                        return false;\n                     },\n                  },\n               },\n               {\n                  id: this.ids.dataPanel,\n                  view: \"tabview\",\n                  css: \"data-panel-tabview\",\n                  width: 250,\n                  borderless: true,\n                  tabbar: {\n                     height: 25,\n                     // width: 300,\n                     align: \"left\",\n                     // type: \"bottom\",\n                     css: \"data-panel-tabbar\",\n                  },\n                  cells,\n               },\n            ],\n         };\n      }\n\n      async _waitDCPending(dc) {\n         switch (dc.dataStatus) {\n            case dc.dataStatusFlag.notInitial:\n            case dc.dataStatusFlag.initialized:\n               await new Promise((resolve) => {\n                  dc.once(\"initializingData\", resolve);\n               });\n               break;\n            default:\n               break;\n         }\n      }\n\n      // TODO (Guy): Some DC.waitReady() won't be resolved.\n      async _waitDCReady(dc) {\n         const dataStatusFlag = dc.dataStatusFlag;\n         switch (dc.dataStatus) {\n            case dataStatusFlag.notInitial:\n            case dataStatusFlag.initializing:\n               await new Promise((resolve) => {\n                  dc.once(\"initializedData\", resolve);\n               });\n               break;\n            default:\n               break;\n         }\n      }\n\n      ui() {\n         const self = this;\n         const ids = self.ids;\n         const AB = self.AB;\n         const Webix = AB.Webix;\n         const _ui = super.ui([\n            {\n               id: ids.chartView,\n               // view: \"template\",\n               responsive: true,\n               type: \"clean\",\n               rows: [\n                  {\n                     responsive: true,\n                     id: ids.chartHeader,\n                     view: \"toolbar\",\n                     height: 50,\n                     type: \"clean\",\n                     cols: [\n                        {\n                           view: \"template\",\n                           id: this.ids.filterButton,\n                           template: `<button class=\"filter-button\">\n                              <i class=\"fa fa-filter\"></i> ${self.label(\n                                 \"Filter\"\n                              )}</button>`,\n                           align: \"left\",\n                           onClick: {\n                              \"filter-button\": (ev) =>\n                                 self._fnShowFilterPopup(ev),\n                           },\n                        },\n                        {\n                           view: \"template\",\n                           id: this.ids.dataPanelButton,\n                           template: `<div class=\"data-panel-button\">\n                              <span class=\"fa fa-2x fa-users\"></span>\n                              <div class=\"data-panel-open\">\n                                 ${self.label(\"Staff Assignment\")}\n                                 <span class=\"fa fa-expand\" style=\"float:right;\"></span>\n                              </div>\n                           </div>`,\n                           align: \"right\",\n                           onClick: {\n                              \"data-panel-open\": (ev) =>\n                                 self._showDataPanel(ev),\n                           },\n                        },\n                     ],\n                  },\n                  {\n                     responsive: true,\n                     id: ids.chartContent,\n                     view: \"template\",\n                     scroll: \"auto\",\n\n                     on: {\n                        onAfterRender() {\n                           Webix.extend(this, Webix.ProgressBar);\n                        },\n                     },\n                  },\n               ],\n            },\n         ]);\n         delete _ui.type;\n         return _ui;\n      }\n\n      async init(AB, accessLevel) {\n         await super.init(AB, accessLevel);\n         const settings = this.settings;\n         this._resources = await Promise.all(this._resources);\n         this._OrgChart ||\n            (this._OrgChart = (() => {\n               const OrgChart = this._resources[0].default;\n               const _oldOnDragStart = OrgChart.prototype._onDragStart;\n               OrgChart.prototype._onDragStart = (event) => {\n                  event.dataTransfer.setData(\"isnode\", 1);\n                  this.__orgchart != null &&\n                     _oldOnDragStart.call(this.__orgchart, event);\n               };\n               return OrgChart;\n            })());\n\n         // Preparing for the entity DC and wait for setting a cursor.\n         const entityDC =\n            (() => {\n               const entityDC = this._entityDC;\n               if (entityDC != null) this._initDC(entityDC);\n               return entityDC;\n            })() ||\n            (this._entityDC = await (async () => {\n               const entityDC = this.AB.datacollectionByID(\n                  settings.entityDatacollection\n               );\n               if (entityDC != null) {\n                  this._initDC(entityDC);\n                  await Promise.all([\n                     this._waitDCReady(entityDC),\n                     new Promise((resolve) => {\n                        const CHANGE_CURSOR = \"changeCursor\";\n                        entityDC.off(CHANGE_CURSOR, this._fnRefresh);\n                        if (entityDC.getCursor() != null) {\n                           entityDC.on(CHANGE_CURSOR, this._fnRefresh);\n                           resolve();\n                        } else\n                           entityDC.once(CHANGE_CURSOR, () => {\n                              entityDC.on(CHANGE_CURSOR, this._fnRefresh);\n                              resolve();\n                           });\n                     }),\n                  ]);\n               }\n               return entityDC;\n            })());\n\n         // Preparing for the data panel DCs.\n         if (settings.showDataPanel === 1) {\n            const _dataPanelDCs = this._dataPanelDCs;\n            const dataPanelDCs = settings.dataPanelDCs;\n            for (const key in dataPanelDCs) {\n               const [, dataPanelDCID] = key.split(\".\");\n               const _dataPanelDC = AB.datacollectionByID(dataPanelDCID);\n               _dataPanelDCs.findIndex(\n                  (_dataPanelDC) => _dataPanelDC.id === dataPanelDCID\n               ) < 0 && _dataPanelDCs.push(_dataPanelDC);\n               this._initDC(_dataPanelDC);\n            }\n         }\n\n         // Preparing for the content DC.\n         const contentDC =\n            this._contentDC ||\n            (this._contentDC = (() => {\n               const contentObj = this.AB.objectByID(\n                  this.getSettingField(\"contentField\").settings.linkObject\n               );\n               const contentObjID = contentObj.id;\n               const contentFieldFilter = JSON.parse(\n                  settings.contentFieldFilter\n               );\n               const contentDCSettings = {\n                  datasourceID: contentObjID,\n                  linkDatacollectionID: null,\n                  linkFieldID: null,\n                  objectWorkspace: {\n                     filterConditions: {\n                        glue: \"and\",\n                        rules: [\n                           // TODO (Guy): Hardcode date start filter.\n                           {\n                              key: contentObj.fieldByID(\n                                 settings.contentFieldDateStart\n                              )?.id,\n                              rule: \"is_not_null\",\n                              value: \"\",\n                           },\n                           {\n                              glue: \"or\",\n                              rules:\n                                 (contentFieldFilter.rules?.length > 0 && [\n                                    contentFieldFilter,\n\n                                    // TODO (Guy): Hardcode date end filter.\n                                    {\n                                       key: contentObj.fieldByID(\n                                          settings.contentFieldDateEnd\n                                       )?.id,\n                                       rule: \"is_null\",\n                                       value: \"\",\n                                    },\n                                 ]) ||\n                                 [],\n                           },\n                        ],\n                     },\n                  },\n               };\n               if (entityDC != null) {\n                  const entityObjID = entityDC.datasource.id;\n                  (contentDCSettings.linkFieldID = contentObj.connectFields(\n                     (f) => f.settings.linkObject === entityObjID\n                  )[0]?.id) &&\n                     (contentDCSettings.linkDatacollectionID = entityDC.id);\n               }\n               const contentDC = AB.datacollectionNew({\n                  id: `dc.${contentObjID}`,\n                  settings: contentDCSettings,\n               });\n               contentDC.$dc.__prevLinkDcCursor = entityDC\n                  ?.getCursor()\n                  ?.id?.toString();\n               this._initDC(contentDC);\n               return contentDC;\n            })());\n\n         // Preparing for the content group DC.\n         const contentGroupDC =\n            this._contentGroupDC ||\n            (this._contentGroupDC = (() => {\n               const contentGroupObjID = contentDC.datasource.fieldByID(\n                  settings.contentGroupByField\n               ).settings.linkObject;\n               const contentGroupDCSettings = {\n                  datasourceID: contentGroupObjID,\n                  linkDatacollectionID: null,\n                  linkFieldID: null,\n               };\n               if (entityDC != null) {\n                  const entityObjID = entityDC.datasource.id;\n                  (contentGroupDCSettings.linkFieldID = this.AB.objectByID(\n                     contentGroupObjID\n                  ).connectFields(\n                     (f) => f.settings.linkObject === entityObjID\n                  )[0]?.id) &&\n                     (contentGroupDCSettings.linkDatacollectionID =\n                        entityDC.id);\n               }\n               const contentGroupDC = this.AB.datacollectionNew({\n                  id: `dc.${contentGroupObjID}`,\n                  settings: contentGroupDCSettings,\n               });\n               contentGroupDC.$dc.__prevLinkDcCursor = entityDC\n                  ?.getCursor()\n                  ?.id?.toString();\n               this._initDC(contentGroupDC);\n               return contentGroupDC;\n            })());\n\n         // Prepare display DCs.\n         const contentDisplayedFieldKeys = Object.keys(\n            settings.contentDisplayedFields\n         );\n         if (contentDisplayedFieldKeys.length > 0) {\n            const teamDC = this.datacollection;\n            const teamObjID = teamDC.datasource.id;\n            const contentObjID = contentDC.datasource.id;\n            const contentGroupObjID = contentGroupDC.datasource.id;\n            const contentDisplayDCSettings = {\n               datasourceID: null,\n               linkDatacollectionID: null,\n               linkFieldID: null,\n               fixSelect: \"\",\n            };\n            const contentDisplayDCs = this._contentDisplayDCs;\n            let [, objID] = contentDisplayedFieldKeys.pop().split(\".\");\n            while (contentDisplayedFieldKeys.length > 0) {\n               if (\n                  contentDisplayDCs.findIndex(\n                     (contentDisplayDC) =>\n                        contentDisplayDC.datasource.id === objID\n                  ) < 0\n               )\n                  switch (objID) {\n                     case teamObjID:\n                        this._initDC(teamDC);\n                        contentDisplayDCs.push(teamDC);\n                        break;\n                     case contentObjID:\n                        this._initDC(contentDC);\n                        contentDisplayDCs.push(contentDC);\n                        break;\n                     case contentGroupObjID:\n                        contentDisplayDCs.push(contentGroupDC);\n                        this._initDC(contentGroupDC);\n                        break;\n                     default:\n                        if (entityDC?.datasource.id === objID) {\n                           this._initDC(entityDC);\n                           contentDisplayDCs.push(entityDC);\n                        } else {\n                           contentDisplayDCSettings.datasourceID = objID;\n                           if (entityDC != null) {\n                              const entityObjID = entityDC.datasource.id;\n                              (contentDisplayDCSettings.linkFieldID =\n                                 AB.objectByID(objID).connectFields(\n                                    (f) => f.settings.linkObject === entityObjID\n                                 )[0]?.id) &&\n                                 (contentDisplayDCSettings.linkDatacollectionID =\n                                    entityDC.id);\n                           }\n                           const contentDisplayDC = AB.datacollectionNew({\n                              id: `dc.${objID}`,\n                              settings: contentDisplayDCSettings,\n                           });\n                           contentDisplayDC.$dc.__prevLinkDcCursor = entityDC\n                              ?.getCursor()\n                              ?.id?.toString();\n                           this._initDC(contentDisplayDC);\n                           contentDisplayDCs.push(contentDisplayDC);\n                        }\n                        break;\n                  }\n               [, objID] = contentDisplayedFieldKeys.pop().split(\".\");\n            }\n         }\n         this._resolveInit();\n      }\n\n      getChartData(id, chartData = this._chartData) {\n         if (this.teamNodeID(id) === chartData.id) return chartData;\n         if (chartData.children?.length > 0) {\n            for (let child of chartData.children) {\n               child = this.getChartData(id, child);\n               if (child != null) return child;\n            }\n         }\n      }\n\n      async onShow() {\n         this.busy();\n         this.AB.performance.mark(\"TeamChart.onShow\");\n         await this._promiseInit;\n         super.onShow();\n         this.AB.performance.mark(\"TeamChart.load\");\n         await this.refresh();\n         this.AB.performance.measure(\"TeamChart.load\");\n         this.AB.performance.measure(\"TeamChart.onShow\");\n         this.ready();\n      }\n\n      /**\n       * load the data and format it for display\n       */\n      async pullData() {\n         this._chartData = null;\n         const dc = this.datacollection;\n         if (dc == null) return;\n         const settings = this.settings;\n         await this._waitDCReady(dc);\n         let topNode = dc.getCursor();\n         const topNodeColumn = this.getSettingField(\"topTeam\").columnName;\n         if (settings.topTeam) {\n            const topFromField = dc.getData((e) => e[topNodeColumn] == 1)[0];\n            topNode = topFromField ? topFromField : topNode;\n         }\n         if (!topNode) return;\n\n         /**\n          * Recursive function to prepare child node data\n          * @param {object} node the current node\n          * @param {number} [depth=0] a count of how many times we have recursed\n          */\n         const teamLinkDef = this.getSettingField(\"teamLink\");\n         const teamLinkDefColumnName = teamLinkDef.columnName;\n         const teamLinkedColumnDefColumnName = this.AB.definitionByID(\n            teamLinkDef.settings.linkColumn\n         ).columnName;\n         const pullChildData = (node, depth = 0) => {\n            if (depth >= TEAM_CHART_MAX_DEPTH) return;\n            node.children = [];\n            node._rawData[this.getSettingField(\"teamLink\").columnName].forEach(\n               (id) => {\n                  const childData = dc.getData((e) => e.id == id)[0];\n\n                  // Don't show inactive teams\n                  if (\n                     !childData ||\n                     childData[teamLinkedColumnDefColumnName] == id ||\n                     (this.__filters?.inactive == 0 &&\n                        childData[\n                           this.getSettingField(\"teamInactive\").columnName\n                        ])\n                  )\n                     return;\n                  const child = {\n                     name: childData[\n                        this.getSettingField(\"teamName\").columnName\n                     ],\n                     id: this.teamNodeID(id),\n                     className: `strategy-${\n                        childData[\n                           `${\n                              this.getSettingField(\"teamStrategy\").columnName\n                           }__relation`\n                        ]?.[this.getSettingField(\"strategyCode\").columnName]\n                     }`,\n                     isInactive:\n                        childData[\n                           this.getSettingField(\"teamInactive\").columnName\n                        ],\n                     _rawData: childData,\n                  };\n                  child.filteredOut = this.filterTeam(child);\n                  if (child.name === \"External Support\")\n                     child.className = `strategy-external`;\n                  if (childData[teamLinkDefColumnName].length > 0) {\n                     pullChildData(child, depth + 1);\n                  }\n                  // If this node is filtered we still need it if it has children\n                  // that pass\n                  if (!child.filteredOut || child.children?.length > 0) {\n                     node.children.push(child);\n                  }\n               }\n            );\n            if (node.children.length === 0) {\n               delete node.children;\n            } else {\n               // sort children alphaetically\n               node.children = node.children.sort(sortByTeamName);\n            }\n         };\n         const chartData = (this._chartData = {\n            id: this.teamNodeID(topNode.id),\n            name: topNode[this.getSettingField(\"teamName\").columnName] ?? \"\",\n            className: `strategy-${\n               topNode[\n                  `${this.getSettingField(\"teamStrategy\").columnName}__relation`\n               ]?.[this.getSettingField(\"strategyCode\").columnName]\n            }`,\n            isInactive:\n               topNode[this.getSettingField(\"teamInactive\").columnName],\n            _rawData: topNode,\n            filteredOut: false,\n         });\n         chartData.filteredOut = this.filterTeam(chartData);\n         pullChildData(chartData);\n      }\n\n      async refresh(force = true) {\n         const ids = this.ids;\n         $$(ids.teamFormPopup)?.destructor();\n         $$(ids.contentForm)?.destructor();\n         await this.pullData();\n         // this._showDataPanel();\n         this._showOrgChart();\n         (force && this._pageData()) ||\n            (await this._callAfterRender(() => {\n               const contentDC = this._contentDC;\n               this._fnPageContentCallback(\n                  contentDC.getData(),\n                  true,\n                  contentDC,\n                  () => {}\n               );\n            }));\n      }\n\n      async filterApply() {\n         this.busy();\n         await this._promisePageData;\n         const ids = this.ids;\n         $$(ids.filterPopup).hide();\n         this.__filters = $$(ids.filterForm).getValues();\n         this.__orgchart?.remove();\n         this.__orgchart = null;\n         await this.refresh(false);\n         this.ready();\n      }\n\n      filterTeam(team) {\n         const filters = this.__filters;\n         let filter = false;\n         filters.strategy = filters.strategy ?? \"\";\n         filters.teamName = filters.teamName ?? \"\";\n\n         // Apply filters (match using or)\n         if (filters.strategy || filters.teamName) {\n            filter = true;\n            if (\n               filters.strategy !== \"\" &&\n               filters.strategy == team.className.replace(\"strategy-\", \"\")\n            )\n               filter = false;\n            if (\n               filters.teamName !== \"\" &&\n               team.name.toLowerCase().includes(filters.teamName.toLowerCase())\n            )\n               filter = false;\n            if (!filter) return filter;\n         }\n         const AB = this.AB;\n         const settings = this.settings;\n         const contentDisplayFieldFilters =\n            settings.contentDisplayedFieldFilters;\n         for (const key in contentDisplayFieldFilters) {\n            filters[key] = filters[key] ?? \"\";\n            if (filters[key] !== \"\") filter = true;\n         }\n         if (!filter) return filter;\n         const contentField = settings.contentField;\n         const teamObj = this.datacollection.datasource;\n         const contentFieldLinkColumnName = teamObj.connectFields(\n            (connectField) => connectField.id === contentField\n         )[0].fieldLink.columnName;\n         const contentDC = this._contentDC;\n         const contentObj = contentDC.datasource;\n         const contentObjID = contentObj.id;\n         const contentObjPK = contentObj.PK();\n         const teamRecordPK = team._rawData[teamObj.PK()];\n         const contentDisplayedFields = settings.contentDisplayedFields;\n         const contentDisplayedFieldKeys = Object.keys(contentDisplayedFields);\n         const contentDisplayDCs = this._contentDisplayDCs;\n         let currentContentDisplayFieldKey = null;\n         let currentContentDisplayDC = null;\n         let currentContentDisplayObjID = null;\n         let currentContentDisplayObjPK = null;\n         let currentContentDisplayFieldColumnName = null;\n         let currentContentDisplayFilterValue = null;\n         let currentContentDisplayRecords = [];\n         while (contentDisplayedFieldKeys.length > 0) {\n            currentContentDisplayFieldKey = contentDisplayedFieldKeys.pop();\n            currentContentDisplayObjID =\n               currentContentDisplayFieldKey.split(\".\")[1];\n            currentContentDisplayFilterValue =\n               filters[\n                  `${currentContentDisplayFieldKey}.${contentDisplayedFields[currentContentDisplayFieldKey]}.0`\n               ];\n            if (currentContentDisplayFilterValue == null)\n               currentContentDisplayFilterValue =\n                  filters[\n                     `${currentContentDisplayFieldKey}.${contentDisplayedFields[currentContentDisplayFieldKey]}.1`\n                  ];\n            if (currentContentDisplayFilterValue != null) {\n               if (currentContentDisplayFilterValue === \"\") continue;\n               currentContentDisplayFilterValue =\n                  currentContentDisplayFilterValue.toString().toLowerCase();\n               currentContentDisplayFieldColumnName = AB.definitionByID(\n                  contentDisplayedFields[currentContentDisplayFieldKey]\n               ).columnName;\n               currentContentDisplayDC = contentDisplayDCs.find(\n                  (contentDisplayDC) =>\n                     contentDisplayDC.datasource.id ===\n                     currentContentDisplayObjID\n               );\n               currentContentDisplayObjPK =\n                  currentContentDisplayDC.datasource.PK();\n               currentContentDisplayRecords = currentContentDisplayDC\n                  .getData(\n                     (contentDisplayRecord) =>\n                        contentDisplayRecord[\n                           currentContentDisplayFieldColumnName\n                        ]\n                           ?.toString()\n                           .toLowerCase()\n                           .indexOf(currentContentDisplayFilterValue) > -1\n                  )\n                  .map((contentDisplayRecord) =>\n                     contentDisplayRecord[\n                        currentContentDisplayObjPK\n                     ]?.toString()\n                  );\n            } else if (currentContentDisplayRecords.length > 0) {\n               currentContentDisplayFieldColumnName = AB.definitionByID(\n                  contentDisplayedFields[currentContentDisplayFieldKey]\n               ).columnName;\n               currentContentDisplayDC = contentDisplayDCs.find(\n                  (contentDisplayDC) =>\n                     contentDisplayDC.datasource.id ===\n                     currentContentDisplayObjID\n               );\n               currentContentDisplayObjPK =\n                  currentContentDisplayDC.datasource.PK();\n               currentContentDisplayRecords = currentContentDisplayDC\n                  .getData((contentDisplayRecord) => {\n                     const contentDisplayRecordData =\n                        contentDisplayRecord[\n                           currentContentDisplayFieldColumnName\n                        ];\n                     return Array.isArray(contentDisplayRecordData)\n                        ? contentDisplayRecordData.findIndex(\n                             (e) =>\n                                currentContentDisplayRecords.indexOf(\n                                   e.toString()\n                                ) > -1\n                          ) > -1\n                        : currentContentDisplayRecords.indexOf(\n                             contentDisplayRecordData?.toString()\n                          ) > -1;\n                  })\n                  .map((contentDisplayRecord) =>\n                     contentDisplayRecord[currentContentDisplayObjPK].toString()\n                  );\n            }\n            if (\n               currentContentDisplayObjID === contentObjID &&\n               currentContentDisplayRecords.length > 0 &&\n               contentDC\n                  .getData(\n                     (contentRecord) =>\n                        contentRecord[contentFieldLinkColumnName] ==\n                        teamRecordPK\n                  )\n                  .findIndex(\n                     (contentRecord) =>\n                        currentContentDisplayRecords.indexOf(\n                           contentRecord[contentObjPK].toString()\n                        ) > -1\n                  ) > -1\n            ) {\n               filter = false;\n               break;\n            }\n         }\n         return filter;\n      }\n\n      /**\n       * Get the ABField from settings\n       * @param {string} setting key in this.view.settings - should be an id for an\n       * ABField\n       */\n      getSettingField(setting) {\n         return this.AB.definitionByID(this.settings[setting]);\n      }\n\n      async teamAddChild(values, isServerSideUpdate = true, children = []) {\n         const entityDC = this._entityDC;\n         const teamDC = this.datacollection;\n         const teamObj = teamDC.datasource;\n         const teamObjID = teamObj.id;\n\n         // Add the entity value\n         if (entityDC) {\n            const connection =\n               isServerSideUpdate &&\n               entityDC.datasource.connectFields(\n                  (f) => f.settings.linkObject === teamObjID\n               )[0];\n            if (connection) {\n               const entity = entityDC.getCursor();\n               const cName = this.AB.definitionByID(\n                  connection.settings.linkColumn\n               ).columnName;\n               values[cName] = entity;\n            }\n         }\n         let _rawData = values;\n         if (isServerSideUpdate) {\n            this.busy();\n            this._setUpdatedBy(teamObj, values);\n            try {\n               _rawData = await teamDC.model.create(values);\n            } catch (err) {\n               // TODO (Guy): The update error.\n               console.error(err);\n            }\n            this.ready();\n         }\n         if (\n            this.__filters?.inactive == 0 &&\n            (_rawData == null ||\n               _rawData[this.getSettingField(\"teamInactive\").columnName])\n         )\n            return;\n         const parent = document.querySelector(\n            `#${this.teamNodeID(\n               _rawData[\n                  this.AB.definitionByID(\n                     this.getSettingField(\"teamLink\").settings.linkColumn\n                  ).columnName\n               ]\n            )}`\n         );\n         if (parent == null) return;\n         const hasChild = parent.parentNode.colSpan > 1;\n         const teamID = _rawData.id;\n         const newChild = {\n            name: _rawData[this.getSettingField(\"teamName\").columnName],\n            filteredOut: false,\n            isInactive:\n               _rawData[this.getSettingField(\"teamInactive\").columnName],\n            id: this.teamNodeID(teamID),\n            relationship: hasChild ? \"110\" : \"100\",\n            className: `strategy-${\n               _rawData[\n                  `${this.getSettingField(\"teamStrategy\").columnName}__relation`\n               ]?.[this.getSettingField(\"strategyCode\").columnName]\n            }`,\n            _rawData,\n         };\n         newChild.filteredOut = this.filterTeam(newChild);\n\n         // Need to add differently if the node already has child nodes\n         if (hasChild)\n            this.__orgchart.addSiblings(\n               // Sibling\n               this.closest(parent, (el) => el.nodeName === \"TABLE\")\n                  .querySelector(\".nodes\")\n                  .querySelector(\".node\"),\n               { siblings: [newChild] }\n            );\n         else this.__orgchart.addChildren(parent, { children: [newChild] });\n         await this.refresh(isServerSideUpdate);\n\n         // TODO(Guy): Render assignment for specific node later.\n         // const contentDC = this._contentDC;\n         // const contentFieldLinkColumnName = teamObj.fieldByID(\n         //    this.settings.contentField\n         // ).fieldLink.columnName;\n         // await this._callAfterRender(async () => {\n         //    this._fnPageContentCallback(\n         //       contentDC.getData((e) => e[contentFieldLinkColumnName] == teamID),\n         //       true,\n         //       contentDC,\n         //       () => {}\n         //    );\n         //    await Promise.all(\n         //       children.map((child) =>\n         //          this.teamAddChild(child._rawData, false, child.children)\n         //       )\n         //    );\n         // });\n      }\n\n      teamCanInactivate(values) {\n         const isInactive = this.getSettingField(\"teamInactive\").columnName;\n         if (values[isInactive]) return true; // Allow activating inactive teams\n         const canInactive =\n            this.getSettingField(\"teamCanInactivate\").columnName;\n         if (!values[canInactive]) return false;\n         const children = this.getSettingField(\"teamLink\").columnName;\n         if (\n            values[children].some(\n               (c) =>\n                  this.datacollection.getData((r) => r.id == c)[0]?.[\n                     isInactive\n                  ] == false\n            )\n         )\n            return false;\n         if (\n            document\n               .getElementById(this.teamNodeID(values.id))\n               .querySelectorAll(\".team-group-record\").length > 0\n         )\n            return false;\n         return true;\n      }\n\n      teamCanDelete(values) {\n         return (\n            values[this.getSettingField(\"teamCanInactivate\").columnName] &&\n            // TODO (Guy): Should not save \"many\" value in the future. Let's fix later.\n            values[this.getSettingField(\"teamLink\").columnName].length === 0 &&\n            values[this.getSettingField(\"contentField\").columnName].length === 0\n         );\n      }\n\n      teamDelete(values, isServerSideUpdate = true) {\n         if (!this.teamCanDelete(values)) {\n            this.AB.Webix.message({\n               text: \"This team cannot be deleted\",\n               type: \"error\",\n               expire: 1001,\n            });\n            return;\n         }\n         const nodeID = this.teamNodeID(values.id);\n         const $teamNode = document.querySelector(`#${nodeID}`);\n         if ($teamNode.querySelectorAll(\".team-group-record\").length > 0)\n            this.AB.Webix.alert({\n               text: this.label(\n                  \"Since there are assignments or teams associated with this team, this action cannot be done until all of its assignments are made inactive\"\n               ),\n            });\n         else\n            this.AB.Webix.confirm({\n               text: this.label(\n                  \"This will permanently remove this team. Click OK to continue or Cancel to not remove the team.\"\n               ),\n            }).then(() => {\n               isServerSideUpdate &&\n                  this.datacollection.model.delete(values.id);\n               this.__orgchart.removeNodes(\n                  document.querySelector(`#${nodeID}`)\n               );\n            });\n      }\n\n      async teamEdit(values, isServerSideUpdate = true) {\n         let _rawData = values;\n         const teamDC = this.datacollection;\n         const teamObj = teamDC.datasource;\n         if (isServerSideUpdate) {\n            this.busy();\n            this._setUpdatedBy(teamObj, values);\n            try {\n               _rawData = await teamDC.model.update(values.id, values);\n            } catch (err) {\n               // TODO (Guy): the update error\n               console.error(err);\n            }\n            this.ready();\n         }\n         const $node = document.querySelector(\n            `#${this.teamNodeID(_rawData.id)}`\n         );\n\n         // Remove inactive node from display, unless the filter setting to show\n         // inctive nodes is on.\n         if (\n            this.__filters?.inactive == 0 &&\n            _rawData[this.getSettingField(\"teamInactive\").columnName]\n         ) {\n            this.__orgchart.removeNodes($node);\n            return;\n         }\n         const oldChartData = JSON.parse($node.dataset.source);\n         const linkFieldColumnName = teamObj.fieldByID(\n            this.getSettingField(\"teamLink\").settings.linkColumn\n         ).columnName;\n         if (\n            oldChartData._rawData[linkFieldColumnName] !=\n            _rawData[linkFieldColumnName]\n         ) {\n            // TODO (Guy): Fix refresh the only updated node and those children and assignments later.\n            await this.refresh(isServerSideUpdate);\n            // this.__orgchart.removeNodes($node);\n            // this.teamAddChild(\n            //    _rawData,\n            //    false,\n            //    this.getChartData(_rawData.id)?.children\n            // );\n            return;\n         }\n         const currentStrategy =\n            $node.classList?.value?.match(/strategy-\\S+/)[0];\n         const strategyCode =\n            _rawData[\n               `${this.getSettingField(\"teamStrategy\").columnName}__relation`\n            ]?.[this.getSettingField(\"strategyCode\").columnName];\n         const newStrategy =\n            (strategyCode && `strategy-${strategyCode}`) || currentStrategy;\n         if (currentStrategy !== newStrategy) {\n            $node.classList?.remove(currentStrategy);\n            $node.classList?.add(newStrategy);\n         }\n         const teamName = _rawData[this.getSettingField(\"teamName\").columnName];\n         $node.querySelector(\".title\").innerHTML = teamName;\n         const newChartData = {\n            className: newStrategy,\n            filteredOut: false,\n            id: this.teamNodeID(_rawData.id),\n            isInactive:\n               _rawData[this.getSettingField(\"teamInactive\").columnName],\n            name: teamName,\n            relationship: oldChartData.relationship,\n            _rawData,\n         };\n         newChartData.filteredOut = this.filterTeam(newChartData);\n         $node.dataset.source = JSON.stringify(newChartData);\n         isServerSideUpdate && (await this.refresh(isServerSideUpdate));\n      }\n\n      async teamForm(mode, values) {\n         const teamObj = this.datacollection.datasource;\n         const ids = this.ids;\n         const settings = this.settings;\n         const nameField = teamObj.fieldByID(settings.teamName);\n         const entityDC = this._entityDC;\n         const entityObjID = entityDC.datasource.id;\n         const entityDCCursorID = entityDC.getCursor().id;\n         const strategyField = teamObj.fieldByID(settings.teamStrategy);\n         const linkField = teamObj.fieldByID(\n            this.getSettingField(\"teamLink\").settings.linkColumn\n         );\n         const linkFieldColumnName = linkField.columnName;\n         const isEditMode = mode === \"Edit\";\n         const teamCond = {\n            glue: \"and\",\n            rules: [\n               {\n                  key: teamObj.connectFields(\n                     (f) => f.settings.linkObject === entityObjID\n                  )[0].columnName,\n                  value: entityDCCursorID,\n                  rule: \"equals\",\n               },\n            ],\n         };\n         isEditMode &&\n            teamCond.rules.push({\n               key: teamObj.PK(),\n               rule: \"not_equal\",\n               value: values.id,\n            });\n         const self = this;\n         const labelWidth = 110;\n         const isDisabled =\n            isEditMode &&\n            (values[this.getSettingField(\"topTeam\").columnName] == 1 ||\n               values.name === \"External Support\" ||\n               values[this.getSettingField(\"teamCanInactivate\").columnName] ==\n                  0);\n         const $teamFormPopup = webix.ui({\n            view: \"popup\",\n            id: ids.teamFormPopup,\n            close: true,\n            position: \"center\",\n            width: 400,\n            css: { \"border-radius\": \"10px\" },\n            body: {\n               rows: [\n                  {\n                     view: \"toolbar\",\n                     css: \"webix_dark\",\n                     cols: [\n                        { width: 5 },\n                        {\n                           view: \"label\",\n                           label: `${this.label(mode)} Team`,\n                           align: \"left\",\n                        },\n                        {\n                           view: \"icon\",\n                           icon: \"fa fa-times\",\n                           align: \"right\",\n                           width: 60,\n                           click: () => {\n                              $teamFormPopup.blockEvent();\n                              $teamFormPopup.$view.remove();\n                              $teamFormPopup.destructor();\n                           },\n                        },\n                     ],\n                  },\n                  {\n                     view: \"form\",\n                     id: ids.teamForm,\n                     hidden: true,\n                     borderless: true,\n                     elements: [\n                        {\n                           view: \"text\",\n                           label: nameField.label,\n                           labelWidth,\n                           name: nameField.columnName,\n                           required: true,\n                        },\n                        {\n                           view: \"richselect\",\n                           label: this.label(\"Strategy\"),\n                           labelWidth,\n                           id: this.ids.teamFormCode,\n                           // no name because we don't actually save this, it's\n                           // used to filter strategyField options\n                           options: [],\n                           required: true,\n                           on: {\n                              async onViewShow() {\n                                 webix.extend(this, webix.ProgressBar);\n                                 this.showProgress({ type: \"icon\" });\n                                 try {\n                                    this.disable();\n                                    this.define(\n                                       \"options\",\n                                       await self.strategyCodeOptions()\n                                    );\n                                    this.refresh();\n                                    !isDisabled && this.enable();\n                                    this.hideProgress();\n                                 } catch {\n                                    // Close popup before response or possily response fail\n                                 }\n                              },\n                              async onChange(code, previous) {\n                                 if (code === previous) return;\n                                 const opts = await self.strategyOptions(code);\n                                 const $strategyField = $$(\n                                    self.ids.teamFormStrategy\n                                 );\n                                 $strategyField.define?.(\"options\", opts);\n                                 $strategyField.refresh();\n                                 !isDisabled && $strategyField.enable();\n                              },\n                           },\n                        },\n                        {\n                           view: \"richselect\",\n                           label: this.label(\"Sub Strategy\"),\n                           labelWidth,\n                           name: strategyField.columnName,\n                           id: this.ids.teamFormStrategy,\n                           options: [],\n                           required: true,\n                           on: {\n                              async onViewShow() {\n                                 webix.extend(this, webix.ProgressBar);\n                                 this.showProgress({ type: \"icon\" });\n                                 try {\n                                    this.disable();\n                                    const value = this.getValue();\n                                    if (value) {\n                                       const { code } = (\n                                          await self.strategyOptions()\n                                       ).find((o) => o.id === value);\n                                       const options =\n                                          self.strategyOptions(code);\n                                       $$(self.ids.teamFormCode).setValue(code);\n                                       this.define(\"options\", options);\n                                       this.refresh();\n                                       !isDisabled && this.enable();\n                                    }\n                                    this.hideProgress();\n                                 } catch {\n                                    // Close popup before response or possily response fail\n                                 }\n                              },\n                           },\n                        },\n                        {\n                           view: \"combo\",\n                           label: linkField.label,\n                           labelWidth,\n                           name: linkFieldColumnName,\n                           options: [],\n                           required: true,\n                           on: {\n                              async onViewShow() {\n                                 webix.extend(this, webix.ProgressBar);\n                                 this.showProgress({ type: \"icon\" });\n                                 try {\n                                    this.disable();\n                                    const data = (\n                                       await linkField.getOptions(teamCond)\n                                    ).map((e) => ({\n                                       id: e.id,\n                                       value: teamObj.displayData(e),\n                                    }));\n                                    this.define(\n                                       \"options\",\n                                       (\n                                          await linkField.getOptions(teamCond)\n                                       ).map((e) => ({\n                                          id: e.id,\n                                          value: teamObj.displayData(e),\n                                       }))\n                                    );\n                                    this.refresh();\n                                    isEditMode && !isDisabled && this.enable();\n                                    this.hideProgress();\n                                 } catch {\n                                    // Close popup before response or possily response fail\n                                 }\n                              },\n                           },\n                        },\n                        {\n                           view: \"switch\",\n                           disabled: !this.teamCanInactivate(values),\n                           name: this.getSettingField(\"teamInactive\")\n                              .columnName,\n                           label: \"Inactive\",\n                        },\n                        { view: \"text\", name: \"id\", hidden: true },\n                        {\n                           id: ids.teamFormSubmit,\n                           view: \"button\",\n                           value: this.label(\"Save\"),\n                           disabled: true,\n                           css: \"webix_primary\",\n                           click: async () => {\n                              let newValues = $$(ids.teamForm).getValues();\n                              if (newValues.id) {\n                                 const $node = document.getElementById(\n                                    this.teamNodeID(newValues.id)\n                                 );\n                                 const oldValues = JSON.parse(\n                                    $node.dataset.source\n                                 )._rawData;\n                                 newValues = this._parseFormValueByType(\n                                    teamObj,\n                                    oldValues,\n                                    newValues\n                                 );\n                                 if (\n                                    !this._checkDataIsChanged(\n                                       oldValues,\n                                       newValues\n                                    )\n                                 )\n                                    return;\n                                 this.teamEdit(newValues);\n                              } else {\n                                 this.teamAddChild(\n                                    this._parseFormValueByType(\n                                       teamObj,\n                                       null,\n                                       newValues\n                                    )\n                                 );\n                              }\n                              $teamFormPopup.blockEvent();\n                              $teamFormPopup.$view.remove();\n                              $teamFormPopup.destructor();\n                           },\n                        },\n                     ],\n                     on: {\n                        onChange: () => {\n                           const values = $$(ids.teamForm).getValues();\n                           let valid =\n                              !!values[strategyField.columnName] &&\n                              !!values[nameField.columnName];\n                           if (isEditMode)\n                              valid = valid && !!values[linkFieldColumnName];\n                           const $teamFormSubmit = $$(ids.teamFormSubmit);\n                           if (valid) $teamFormSubmit.enable();\n                           else $teamFormSubmit.disable();\n                        },\n                     },\n                  },\n               ],\n            },\n            on: {\n               onShow() {\n                  $$(ids.teamForm).show();\n               },\n               onHide() {\n                  this.$view.remove();\n                  this.destructor();\n               },\n            },\n         });\n         if (values.__parentID) {\n            values[linkFieldColumnName] = values.__parentID;\n            delete values.__parentID;\n         }\n         $$(ids.teamForm).setValues(values);\n         $teamFormPopup.show();\n      }\n\n      // HELPERS\n\n      /**\n       * generate a id for the assignment dom node based on it's record id\n       * @param {string} id record id\n       */\n      contentNodeID(id) {\n         return `contentnode_${id}`;\n      }\n\n      /**\n       * Get valid drop down option for strategyCode\n       * @returns {array}\n       */\n      async strategyCodeOptions() {\n         // These shouldn't change often so cache them to prevent extra requests\n         // to NetSuite\n         if (!this._strategyCodeOpts) {\n            const strategyID =\n               this.getSettingField(\"teamStrategy\").settings.linkObject;\n            const strategyObj = this.AB.objectByID(strategyID);\n            const strategyCodeFieldID = this.getSettingField(\"strategyCode\").id;\n            const strategyCodeField = strategyObj.fields(\n               (f) => f.id === strategyCodeFieldID\n            )[0];\n\n            const opts = await strategyCodeField.getOptions();\n            this._strategyCodeOpts = opts.map(fieldToOption).sort();\n         }\n         return this._strategyCodeOpts;\n      }\n\n      /**\n       * Get valid drop down option for teamStrategy based on strategyCode\n       * @param {string} code the id of a strategyCod\n       * @returns {array}\n       */\n      async strategyOptions(code) {\n         // These shouldn't change often so cache instead of querying Netsuite each\n         // time\n         if (!this._strategyOpts) {\n            const teamObj = this.datacollection.datasource;\n            const strategyField = teamObj.fieldByID(this.settings.teamStrategy);\n            const subStrategyCol =\n               this.getSettingField(\"subStrategy\").columnName;\n            const strategyCodeCol =\n               this.getSettingField(\"strategyCode\").columnName;\n            const opts = await strategyField.getOptions(\n               null,\n               null,\n               null,\n               null,\n               [subStrategyCol]\n            );\n            this._strategyOpts = opts\n               .map((e) => ({\n                  id: e.id,\n                  value: e[`${subStrategyCol}__relation`].name,\n                  code: e[strategyCodeCol],\n               }))\n               .sort();\n         }\n         return code\n            ? this._strategyOpts.filter((o) => o.code === code)\n            : this._strategyOpts;\n      }\n\n      /**\n       * generate a id for the team dom node based on it's record id\n       * @param {string} id record id\n       */\n      teamNodeID(id) {\n         return `teamnode_${id}`;\n      }\n\n      /**\n       * extract the record id from the team dom node id\n       * @param {string} id dom node id\n       */\n      teamRecordID(id) {\n         return id.split(\"_\")[1];\n      }\n\n      /**\n       * Recursively finds the closest ancestor element that matches the provided function.\n       * @param {Element} el - The starting element.\n       * @param {Function} fn - The function to test against.\n       * @return {Element|null} The closest matching ancestor element or null if no match is found.\n       */\n      closest(el, fn) {\n         return (\n            el &&\n            (fn(el) &&\n            el !== document.querySelector(`#${this.ids.chartContent}`)\n               ? el\n               : this.closest(el.parentNode, fn))\n         );\n      }\n\n      busy() {\n         const $chartView = $$(this.ids.chartContent);\n         $chartView.disable();\n         $chartView.showProgress({ type: \"icon\" });\n      }\n\n      ready() {\n         const $chartView = $$(this.ids.chartContent);\n         $chartView.enable();\n         $chartView.hideProgress();\n      }\n   };\n}\n\n/**\n * Creates a new HTML element with the given type and classes\n * @param {string} type - The type of the HTML element to create.\n * @param {string} classes - A space-separated list of classes to add to the element.\n * @returns {Element} The newly created HTML element.\n */\nfunction element(type, classes) {\n   const elem = document.createElement(type);\n   elem.classList.add(...classes.split(\" \"));\n   return elem;\n}\n\nfunction fieldToOption(f) {\n   return {\n      id: f.id,\n      value: f.text,\n   };\n}\n\nfunction sortByEmployeeLastname(a, b) {\n   return (a.lastName ?? \"\").toLowerCase() > (b.lastName ?? \"\").toLowerCase()\n      ? 1\n      : -1;\n}\n\nfunction sortByTeamName(a, b) {\n   return (a.name ?? \"\").toLowerCase() > (b.name ?? \"\").toLowerCase() ? 1 : -1;\n}\n","import coreView from \"./ABViewOrgChartTeamsCore\";\nimport component from \"./ABViewOrgChartTeamsComponent\";\n\nexport default function (ABView, ABViewComponent) {\n   const ABViewOrgChartTeamsCore = coreView(ABView);\n   const ABViewOrgChartTeamsComponent = component(ABViewComponent);\n   return class ABViewOrgChartTeams extends ABViewOrgChartTeamsCore {\n      /**\n       * @method component()\n       * return a UI component based upon this view.\n       * @return {obj} UI component\n       */\n      component() {\n         return new ABViewOrgChartTeamsComponent(this);\n      }\n   };\n}\n","/**\n * ABViewOrgChartEditor\n * The widget that displays the UI Editor Component on the screen\n * when designing the UI.\n */\nvar myClass = null;\n// {singleton}\n// we will want to call this factory fn() repeatedly in our imports,\n// but we only want to define 1 Class reference.\n\nexport default function (AB, FABViewDefault) {\n   if (!myClass) {\n      const ABViewDefault = FABViewDefault(AB);\n      // var L = UIClass.L();\n      // var L = ABViewContainer.L();\n\n      myClass = class ABViewOrgChartTeamsEditor extends ABViewDefault {\n         static get key() {\n            return \"plugin_hr_teams\";\n         }\n\n         constructor(view, base = \"interface_editor_viewOrgChartTeans\") {\n            // base: {string} unique base id reference\n\n            super(view, base);\n\n            // this.component = this.view.component();\n         }\n\n         ui() {\n            let _ui = super.ui();\n            return _ui;\n         }\n\n         init(AB) {\n            this.AB = AB;\n            return super.init(AB);\n         }\n\n         detatch() {\n            this.component?.detatch?.();\n         }\n\n         onShow() {\n            this.component?.onShow?.();\n         }\n      };\n   }\n\n   return myClass;\n}\n","/*\n * ABViewChartTeams\n * A Property manager for our ABViewChartTeams definitions\n */\n\nexport default function (AB, FABView) {\n   const BASE_ID = \"properties_abview_org_chart_teams\";\n\n   const ABView = FABView(AB);\n   const uiConfig = AB.Config.uiSettings();\n   const L = ABView.L();\n\n   class ABViewOrgChartTeamsProperty extends ABView {\n      constructor() {\n         super(BASE_ID, {\n            datacollectionID: \"\",\n            strategyCode: \"\",\n            subStrategy: \"\",\n            teamInactive: \"\",\n            teamCanInactivate: \"\",\n            teamLink: \"\",\n            teamName: \"\",\n            teamStrategy: \"\",\n            topTeam: \"\",\n            fields: \"\",\n            direction: \"\",\n            depth: \"\",\n            draggable: \"\",\n            dropContentToCreate: \"\",\n            pan: \"\",\n            zoom: \"\",\n            height: \"\",\n            export: \"\",\n            exportFilename: \"\",\n            groupByField: \"\",\n            showGroupTitle: \"\",\n            editContentFieldsToCreateNew: \"\",\n            setEditableContentFields: \"\",\n            contentField: \"\",\n            contentFieldFilter: \"\",\n            contentFieldDateStart: \"\",\n            contentFieldDateEnd: \"\",\n            contentFieldFilterButton: \"\",\n            contentGroupByField: \"\",\n            contentDisplayedFields: \"\",\n            contentDisplayedFieldsAdd: \"\",\n            contentDisplayedFieldFilters: \"\",\n            contentDisplayedFieldFiltersSet: \"\",\n            contentDisplayedFieldTypes: \"\",\n            contentDisplayedFieldTypesSet: \"\",\n            contentDisplayedFieldMappingData: \"\",\n            contentDisplayedFieldMappingDataSet: \"\",\n            showDataPanel: \"\",\n            dataPanelDCs: \"\",\n            dataPanelDCsAdd: \"\",\n            strategyColorPopup: \"\",\n            strategyColorForm: \"\",\n            entityDatacollection: \"\",\n         });\n         this.AB = AB;\n         const contentFieldFilter = (this.contentFieldFilter =\n            AB.filterComplexNew(this.ids.contentFieldFilter));\n         contentFieldFilter.on(\"save\", () => {\n            if (\n               !contentFieldFilter.isConditionComplete(\n                  contentFieldFilter.getValue()\n               )\n            )\n               contentFieldFilter.setValue({ glue: \"and\", rules: [] });\n            this.onChange();\n         });\n      }\n\n      static get key() {\n         return \"plugin_hr_teams\";\n      }\n\n      _uiDataPanelDC(labelValue = \"\", dcID = \"\") {\n         const self = this;\n         const ids = self.ids;\n         const $dataPanelDCs = $$(ids.dataPanelDCs);\n         const validOBJIDs = this.CurrentView.datacollection.datasource\n            .fieldByID($$(ids.contentField).getValue())\n            .datasourceLink.connectFields(\n               (connectField) => connectField.linkType() === \"one\"\n            )\n            .map((connectField) => connectField.datasourceLink.id);\n         const dcs = this.AB.datacollections(\n            (dc) => validOBJIDs.indexOf(dc.datasource.id) > -1\n         );\n         const dcOptions = dcs.map((dc) => ({\n            id: dc.id,\n            value: dc.label,\n            dc,\n         }));\n         const getUILabel = (dcID, elementIndex) => ({\n            view: \"text\",\n            name: `${elementIndex}.${dcID}`,\n            // label: L(\"Name\"),\n            // labelWidth: uiConfig.labelWidthMedium,\n            on: {\n               onChange: () => {\n                  this.onChange();\n               },\n               onViewShow() {\n                  this.setValue(labelValue);\n               },\n            },\n         });\n         return {\n            cols: [\n               {\n                  view: \"richselect\",\n                  label: `${L(\"Panel\")} ${\n                     $dataPanelDCs.getChildViews().length + 1\n                  }`,\n                  labelWidth: uiConfig.labelWidthMedium,\n                  options: dcOptions,\n                  on: {\n                     onChange(newValue) {\n                        const $parentView = this.getParentView();\n                        const sameLevelViews = $parentView.getChildViews();\n                        if ($parentView.getChildViews().length === 3)\n                           $parentView.removeView(sameLevelViews[1].config.id);\n                        $parentView.addView(\n                           getUILabel(\n                              newValue,\n                              $dataPanelDCs\n                                 .getChildViews()\n                                 .findIndex(\n                                    ($dataPanelDCsChild) =>\n                                       $dataPanelDCsChild === $parentView\n                                 )\n                           ),\n                           1\n                        );\n                     },\n                     onViewShow() {\n                        if (dcID == null || dcID === \"\") return;\n                        this.setValue(dcID);\n                     },\n                  },\n               },\n               {\n                  view: \"button\",\n                  css: \"webix_danger\",\n                  type: \"icon\",\n                  icon: \"wxi-close\",\n                  width: uiConfig.buttonWidthExtraSmall,\n                  click() {\n                     self.deleteDataPanelDC(this.getParentView().config.id);\n                     self.onChange();\n                  },\n               },\n            ],\n         };\n      }\n\n      _uiContentDisplayedField(fieldID = \"\", obj, atDisplay) {\n         const self = this;\n         const ids = self.ids;\n         const datasource = this.CurrentView.datacollection.datasource;\n         const datasourceID = datasource.id;\n         const parentObj = datasource.fieldByID(\n            $$(ids.contentField).getValue()\n         ).datasourceLink;\n         const parentObjID = parentObj.id;\n         const objID = obj?.id || parentObjID;\n         const $contentDisplayedFields = $$(ids.contentDisplayedFields);\n         const $contentDisplayedFieldTypes = $$(ids.contentDisplayedFieldTypes);\n         const $contentDisplayedFieldMappingData = $$(\n            ids.contentDisplayedFieldMappingData\n         );\n         const $contentDisplayedFieldFilters = $$(\n            ids.contentDisplayedFieldFilters\n         );\n         const filterFields = (f) => {\n            const linkedObjID = f.datasourceLink?.id;\n            return linkedObjID !== datasourceID && linkedObjID !== parentObjID;\n         };\n         const getOnSelectChangeFn =\n            (currentObj, currentAtDisplay) => (newValue) => {\n               const field = currentObj.fieldByID(newValue);\n               if (field.key === \"connectObject\") {\n                  $contentDisplayedFields.addView(\n                     this._uiContentDisplayedField(\n                        \"\",\n                        field.datasourceLink,\n                        currentAtDisplay\n                     )\n                  );\n               }\n               this.populateContentDisplayedFields(\n                  $contentDisplayedFields.getValues(),\n                  $contentDisplayedFieldTypes.getValues(),\n                  $contentDisplayedFieldMappingData.getValues(),\n                  $contentDisplayedFieldFilters.getValues()\n               );\n               this.onChange();\n            };\n         if (objID === parentObjID) {\n            const rootAtDisplay = Object.keys(\n               $contentDisplayedFields.elements\n            ).filter((key) => key.includes(objID)).length;\n            return {\n               cols: [\n                  {\n                     view: \"richselect\",\n                     name: `${rootAtDisplay}.${parentObjID}`,\n                     label: `${L(\"Display\")} ${rootAtDisplay + 1}`,\n                     labelWidth: uiConfig.labelWidthMedium,\n                     options:\n                        parentObj.fields(filterFields).map(fieldToOption) || [],\n                     value: fieldID,\n                     on: {\n                        onChange: getOnSelectChangeFn(parentObj, rootAtDisplay),\n                     },\n                  },\n                  {\n                     view: \"button\",\n                     css: \"webix_danger\",\n                     type: \"icon\",\n                     icon: \"wxi-close\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click() {\n                        self.deleteContentDisplayedField(\n                           this.getParentView().getChildViews()[0].config.id\n                        );\n                        self.onChange();\n                     },\n                  },\n               ],\n            };\n         }\n         return {\n            cols: [\n               {\n                  view: \"richselect\",\n                  name: `${atDisplay}.${objID}`,\n                  label: \"->\",\n                  labelWidth: uiConfig.labelWidthMedium,\n                  options: obj.fields(filterFields).map(fieldToOption) || [],\n                  value: fieldID,\n                  on: {\n                     onChange: getOnSelectChangeFn(obj, atDisplay),\n                  },\n               },\n               {\n                  view: \"button\",\n                  css: \"webix_danger\",\n                  type: \"icon\",\n                  icon: \"wxi-close\",\n                  width: uiConfig.buttonWidthExtraSmall,\n                  click() {\n                     self.deleteContentDisplayedField(\n                        this.getParentView().getChildViews()[0].config.id\n                     );\n                     self.onChange();\n                  },\n               },\n            ],\n         };\n      }\n\n      ui() {\n         const ids = this.ids;\n         const contentFieldFilter = this.contentFieldFilter;\n         return super.ui([\n            {\n               id: ids.datacollectionID,\n               name: \"datacollectionID\",\n               view: \"richselect\",\n               label: L(\"Team Data\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: (value) => {\n                     this.CurrentView.settings.datacollectionID = value;\n                     const obj = this.CurrentView?.datacollection?.datasource;\n                     this.populateTeamFieldOptions(obj);\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.teamLink,\n               view: \"richselect\",\n               label: L(\"Team Link\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.teamName,\n               view: \"richselect\",\n               label: L(\"Team Name\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.topTeam,\n               view: \"richselect\",\n               label: L(\"Top Team\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.teamInactive,\n               view: \"richselect\",\n               label: L(\"Team Inactive\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.teamCanInactivate,\n               view: \"richselect\",\n               label: L(\"Can Inactivate\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               cols: [\n                  {\n                     view: \"label\",\n                     label: L(\"Content Field\"),\n                     width: uiConfig.labelWidthLarge,\n                  },\n                  {\n                     id: ids.contentField,\n                     name: \"contentField\",\n                     view: \"richselect\",\n                     options: [],\n                     on: {\n                        onChange: (newValue) => {\n                           const $editContentFieldsToCreateNew = $$(\n                              ids.editContentFieldsToCreateNew\n                           );\n                           const $setEditableContentFields = $$(\n                              ids.setEditableContentFields\n                           );\n                           const $contentDisplayedFieldsAdd = $$(\n                              ids.contentDisplayedFieldsAdd\n                           );\n                           const $contentFieldFilterButton = $$(\n                              ids.contentFieldFilterButton\n                           );\n                           const $contentGroupByField = $$(\n                              ids.contentGroupByField\n                           );\n                           const $contentFieldDateStart = $$(\n                              ids.contentFieldDateStart\n                           );\n                           const $contentFieldDateEnd = $$(\n                              ids.contentFieldDateEnd\n                           );\n                           const $showGroupTitle = $$(ids.showGroupTitle);\n                           contentFieldFilter.init();\n                           contentFieldFilter.setValue({\n                              glue: \"and\",\n                              rules: [],\n                           });\n                           if (newValue != null && newValue !== \"\") {\n                              const contentObj =\n                                 this.CurrentView.datacollection.datasource.fieldByID(\n                                    newValue\n                                 ).datasourceLink;\n                              const contentObjFields = contentObj.fields();\n                              const contentDateFiels = contentObjFields.filter(\n                                 (field) =>\n                                    field.key === \"date\" ||\n                                    field.key === \"datetime\"\n                              );\n                              $contentFieldDateStart.define(\n                                 \"options\",\n                                 contentDateFiels.map(fieldToOption)\n                              );\n                              $contentFieldDateEnd.define(\n                                 \"options\",\n                                 contentDateFiels.map(fieldToOption)\n                              );\n                              const contentObjMappedFields =\n                                 // contentObjFields.map(fieldToOption) *** (Guy) this makes my chrome browser crash (Only multi-selection) it is because { field: f } ***\n                                 contentObjFields.map((contentObjField) => ({\n                                    id: contentObjField.id,\n                                    value: contentObjField.label,\n                                 }));\n                              $editContentFieldsToCreateNew.define(\n                                 \"options\",\n                                 contentObjMappedFields\n                              );\n                              $setEditableContentFields.define(\n                                 \"options\",\n                                 contentObjMappedFields\n                              );\n                              contentFieldFilter.fieldsLoad(contentObjFields);\n                              $contentGroupByField.define(\"options\", [\n                                 { id: \"\", value: \"\", $empty: true },\n                                 ...contentObjFields\n                                    .filter(\n                                       (f) => f.key === \"connectObject\" //&&\n                                       // f.settings.isMultiple === 0\n                                    )\n                                    .map(fieldToOption),\n                              ]);\n                              $editContentFieldsToCreateNew.enable();\n                              $contentFieldFilterButton.enable();\n                              $contentDisplayedFieldsAdd.show();\n                              $contentFieldDateStart.show();\n                              $contentFieldDateEnd.show();\n                              $contentGroupByField.show();\n                              $showGroupTitle.show();\n                           } else {\n                              $editContentFieldsToCreateNew.define(\n                                 \"options\",\n                                 []\n                              );\n                              contentFieldFilter.fieldsLoad([]);\n                              $contentGroupByField.define(\"options\", []);\n                              $editContentFieldsToCreateNew.enable();\n                              $contentFieldFilterButton.disable();\n                              $contentDisplayedFieldsAdd.hide();\n                              $contentFieldDateStart.hide();\n                              $contentFieldDateEnd.hide();\n                              $contentGroupByField.hide();\n                              $showGroupTitle.hide();\n                           }\n                           $editContentFieldsToCreateNew.setValue([]);\n                           $showGroupTitle.setValue(0);\n                           $contentGroupByField.setValue(\"\");\n                           this.populateContentDisplayedFields();\n                           this.onChange();\n                        },\n                     },\n                  },\n                  {\n                     id: ids.contentFieldFilterButton,\n                     view: \"button\",\n                     type: \"icon\",\n                     icon: \"fa fa-filter\",\n                     css: \"webix_primary\",\n                     disabled: true,\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click() {\n                        contentFieldFilter.popUp(this.$view, null, {\n                           pos: \"top\",\n                        });\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.contentFieldDateStart,\n               name: \"contentFieldDateStart\",\n               label: L(\"Date Start\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               view: \"richselect\",\n               options: [],\n               on: {\n                  onChange: () => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.contentFieldDateEnd,\n               name: \"contentFieldDateEnd\",\n               label: L(\"Date End\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               view: \"richselect\",\n               options: [],\n               on: {\n                  onChange: () => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.contentGroupByField,\n               hidden: true,\n               view: \"richselect\",\n               label: L(\"Content Group By Field\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: (/*newValue*/) => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.showGroupTitle,\n               hidden: true,\n               name: \"showGroupTitle\",\n               view: \"checkbox\",\n               label: L(\"Show Group Title\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: {\n                  onChange: (/*newValue*/) => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\n                        \"Force the creation of a new row of data by editing the content fields\"\n                     ),\n                  },\n                  {\n                     id: ids.editContentFieldsToCreateNew,\n                     view: \"multicombo\",\n                     value: [],\n                     options: [],\n                     placeholder: L(\n                        \"Choose the content fields to create a new entry through editing\"\n                     ),\n                     labelAlign: \"left\",\n                     stringResult: false /* returns data as an array of [id] */,\n                     on: {\n                        onChange: () => {\n                           this.onChange();\n                        },\n                     },\n                  },\n                  {\n                     view: \"label\",\n                     label: L(\"Set the editable content fields\"),\n                  },\n                  {\n                     id: ids.setEditableContentFields,\n                     view: \"multicombo\",\n                     value: [],\n                     options: [],\n                     placeholder: L(\"Choose the editable content fields\"),\n                     labelAlign: \"left\",\n                     stringResult: false /* returns data as an array of [id] */,\n                     on: {\n                        onChange: () => {\n                           this.onChange();\n                        },\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFieldsAdd,\n               hidden: true,\n               cols: [\n                  {\n                     view: \"label\",\n                     label: L(\"Content Displayed Fields\"),\n                  },\n                  {\n                     view: \"button\",\n                     type: \"icon\",\n                     icon: \"fa fa-plus\",\n                     css: \"webix_primary\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click: () => {\n                        const $contentDisplayedFields = $$(\n                           ids.contentDisplayedFields\n                        );\n                        if (!$contentDisplayedFields.isVisible())\n                           $contentDisplayedFields.show();\n                        $contentDisplayedFields.addView(\n                           this._uiContentDisplayedField()\n                        );\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFields,\n               view: \"form\",\n               hidden: true,\n               elements: [],\n            },\n            {\n               id: ids.contentDisplayedFieldTypesSet,\n               hidden: true,\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\n                        \"Set content active displays and displayed types\"\n                     ),\n                  },\n                  {\n                     id: ids.contentDisplayedFieldTypes,\n                     view: \"form\",\n                     elements: [],\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFieldMappingDataSet,\n               hidden: true,\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\"Set content mapping displayed data\"),\n                  },\n                  {\n                     id: ids.contentDisplayedFieldMappingData,\n                     view: \"form\",\n                     elements: [],\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFieldFiltersSet,\n               hidden: true,\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\"Set content displayed filters by field\"),\n                  },\n                  {\n                     id: ids.contentDisplayedFieldFilters,\n                     view: \"form\",\n                     elements: [],\n                  },\n               ],\n            },\n            {\n               id: ids.showDataPanel,\n               name: \"showDataPanel\",\n               view: \"checkbox\",\n               label: L(\"Show Data Panel\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: {\n                  onChange: (newValue) => {\n                     const $dataPanelDCsAdd = $$(ids.dataPanelDCsAdd);\n                     if (newValue === 1) $dataPanelDCsAdd.show();\n                     else $dataPanelDCsAdd.hide();\n                     this.populateDataPanelDCs({});\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.dataPanelDCsAdd,\n               hidden: true,\n               cols: [\n                  {\n                     view: \"label\",\n                     label: L(\"Data Panel DCs\"),\n                  },\n                  {\n                     view: \"button\",\n                     type: \"icon\",\n                     icon: \"fa fa-plus\",\n                     css: \"webix_primary\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click: () => {\n                        const $dataPanelDCs = $$(ids.dataPanelDCs);\n                        if (!$dataPanelDCs.isVisible()) $dataPanelDCs.show();\n                        $dataPanelDCs.addView(this._uiDataPanelDC());\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.dataPanelDCs,\n               view: \"form\",\n               hidden: true,\n               elements: [],\n            },\n            {\n               id: ids.teamStrategy,\n               view: \"richselect\",\n               label: L(\"Strategy\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: (value) => {\n                     this.populateStrategyOptions(value);\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               cols: [\n                  {\n                     id: ids.strategyCode,\n                     view: \"richselect\",\n                     label: L(\"Strategy Code\"),\n                     labelWidth: uiConfig.labelWidthLarge,\n                     options: [],\n                     on: {\n                        onChange: () => {\n                           this.onChange();\n                           $$(this.ids.strategyColorPopup)?.close();\n                        },\n                     },\n                  },\n                  {\n                     view: \"icon\",\n                     icon: \"fa fa-paint-brush\",\n                     allign: \"right\",\n                     click: () => this.strategyColorPopup(),\n                  },\n               ],\n            },\n            {\n               id: ids.subStrategy,\n               view: \"richselect\",\n               label: L(\"Sub Strategy\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.draggable,\n               name: \"draggable\",\n               view: \"checkbox\",\n               label: L(\"Drag & Drop\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: {\n                  onChange: (newValue) => {\n                     const $dropContentToCreate = $$(ids.dropContentToCreate);\n                     if (newValue === 0) {\n                        $dropContentToCreate.setValue(0);\n                        $dropContentToCreate.hide();\n                     } else $dropContentToCreate.show();\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.dropContentToCreate,\n               name: \"dropContentToCreate\",\n               view: \"checkbox\",\n               label: L(\"Drop content to create\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               hidden: true,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.direction,\n               name: \"direction\",\n               view: \"richselect\",\n               label: L(\"Direction\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [\n                  { id: \"t2b\", value: L(\"Top to Bottom\") },\n                  { id: \"b2t\", value: L(\"Bottom to Top\") },\n                  { id: \"l2r\", value: L(\"Left to Right\") },\n                  { id: \"r2l\", value: L(\"Right to Left\") },\n               ],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.entityDatacollection,\n               name: \"entityDatacollection\",\n               view: \"richselect\",\n               label: L(\"Entity\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: () => this.onChange(),\n               },\n            },\n            {\n               id: ids.depth,\n               name: \"depth\",\n               hidden: true, // NOTE: use choose Connect Fields option\n               view: \"counter\",\n               label: L(\"Depth\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               hidden: true, // NOTE: does not support\n               id: ids.pan,\n               name: \"pan\",\n               view: \"checkbox\",\n               label: L(\"Pan\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               hidden: true, // NOTE: does not support\n               id: ids.zoom,\n               name: \"zoom\",\n               view: \"checkbox\",\n               label: L(\"Zoom\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.height,\n               view: \"counter\",\n               name: \"height\",\n               label: L(\"Height\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               hidden: true, // NOTE: does not support\n               view: \"fieldset\",\n               label: L(\"Export\"),\n               body: {\n                  view: \"layout\",\n                  borderless: true,\n                  rows: [\n                     {\n                        id: ids.export,\n                        name: \"export\",\n                        view: \"checkbox\",\n                        label: L(\"Is Exportable\"),\n                        labelWidth: uiConfig.labelWidthLarge,\n                        value: 0,\n                        on: {\n                           onChange: () => {\n                              this.onChange();\n                           },\n                        },\n                     },\n                     {\n                        id: ids.exportFilename,\n                        view: \"text\",\n                        name: \"exportFilename\",\n                        label: L(\"File name\"),\n                        placeholder: L(\"Enter file name\"),\n                        labelWidth: uiConfig.labelWidthLarge,\n                     },\n                  ],\n               },\n            },\n         ]);\n      }\n\n      async init(AB) {\n         this.AB = AB;\n         await super.init(AB);\n         webix.extend($$(this.ids.component), webix.ProgressBar);\n         this.contentFieldFilter.queriesLoad(\n            this.CurrentApplication?.queriesIncluded()\n         );\n      }\n\n      deleteContentDisplayedField(id) {\n         const ids = this.ids;\n         const $contentDisplayedFields = $$(ids.contentDisplayedFields);\n         const $elements = $contentDisplayedFields.elements;\n         const $richselect = $$(id);\n         const deletedElementKey = $richselect.config.name;\n         if (\n            deletedElementKey.includes(\n               this.CurrentView.datacollection.datasource.fieldByID(\n                  $$(ids.contentField).getValue()\n               ).datasourceLink.id\n            )\n         ) {\n            const deletedAtDisplay = deletedElementKey.split(\".\")[0];\n            for (const key in $elements) {\n               if (!key.includes(`${deletedAtDisplay}.`)) continue;\n               $contentDisplayedFields.removeView(\n                  $elements[key].getParentView().config.id\n               );\n            }\n         } else\n            $contentDisplayedFields.removeView(\n               $richselect.getParentView().config.id\n            );\n         this.populateContentDisplayedFields(\n            $contentDisplayedFields.getValues()\n         );\n      }\n\n      deleteDataPanelDC(id) {\n         const $dataPanelDCs = $$(this.ids.dataPanelDCs);\n         $dataPanelDCs.removeView(id);\n         this.populateDataPanelDCs($dataPanelDCs.getValues());\n      }\n\n      populate(view) {\n         super.populate(view);\n         const ids = this.ids;\n         const $component = $$(ids.component);\n         const defaultValues = this.defaultValues();\n         const values = Object.assign(\n            $component.getValues(),\n            Object.assign(defaultValues, view.settings)\n         );\n         // const $fieldList = $$(ids.fields);\n         // $fieldList.clearAll();\n         this.populateDatacollection(values.datacollectionId);\n         const teamObj = this.CurrentView?.datacollection?.datasource;\n         if (teamObj) {\n            this.populateTeamFieldOptions(teamObj);\n            [\n               \"teamCanInactivate\",\n               \"teamInactive\",\n               \"teamLink\",\n               \"teamName\",\n               \"teamStrategy\",\n               \"topTeam\",\n               \"contentField\",\n               \"contentGroupByField\",\n               \"editContentFieldsToCreateNew\",\n               \"setEditableContentFields\",\n               \"showGroupTitle\",\n               \"showDataPanel\",\n            ].forEach((f) => $$(ids[f]).setValue(values[f]));\n            this.contentFieldFilter.setValue(\n               JSON.parse(values.contentFieldFilter)\n            );\n            this.populateContentDisplayedFields(\n               values.contentDisplayedFields,\n               values.contentDisplayedFieldTypes,\n               values.contentDisplayedFieldMappingData,\n               values.contentDisplayedFieldFilters\n            );\n            this.populateDataPanelDCs(values.dataPanelDCs);\n            if (values.teamStrategy) {\n               this.populateStrategyOptions(values.teamStrategy);\n               $$(ids.strategyCode).setValue(values.strategyCode);\n               $$(ids.subStrategy).setValue(values.subStrategy);\n            }\n         }\n         $component.setValues(values);\n      }\n\n      populateDatacollection(datacollectionId) {\n         const $dataCollection = $$(this.ids.datacollectionID);\n\n         // Pull data collections to options\n         const dcOptions = this.CurrentView.application\n            .datacollectionsIncluded()\n            .map((d) => {\n               return { id: d.id, value: d.label };\n            });\n         $dataCollection.define(\"options\", dcOptions);\n         $dataCollection.define(\"value\", datacollectionId);\n         $dataCollection.refresh();\n         $$(this.ids.entityDatacollection).define(\"options\", dcOptions);\n         $$(this.ids.entityDatacollection).refresh();\n      }\n\n      refreshValueFieldOptions(fieldValues = []) {\n         const ids = this.ids;\n         const view = this.CurrentView;\n         const $fieldList = $$(ids.fields);\n\n         $fieldList.clearAll();\n\n         // Populate 1:M fields option of the root object\n         this.populateSubValueFieldOptions(view.datacollection?.datasource);\n\n         // Populate sub 1:M fields option of each fields\n         fieldValues.forEach((fId) => {\n            if (!fId) return;\n\n            const $fieldItem = $fieldList.getItem(fId);\n            if ($fieldItem) {\n               const abField = $fieldItem.field;\n               this.populateSubValueFieldOptions(abField.datasourceLink, fId);\n            }\n         });\n\n         // Set check items\n         $fieldList.blockEvent();\n         fieldValues.forEach((fId) => {\n            if ($fieldList.exists(fId)) $fieldList.checkItem(fId);\n         });\n         $fieldList.unblockEvent();\n      }\n\n      populateTeamFieldOptions(object) {\n         const view = this.CurrentView;\n         const ids = this.ids;\n         const m2oFields = view.getValueFields(object).map(fieldToOption);\n         const o2mFields =\n            object.connectFields(\n               (f) => f.linkType() == \"one\" && f.linkViaType() == \"many\"\n            ) ?? [];\n         $$(ids.teamStrategy).define(\"options\", o2mFields.map(fieldToOption));\n         $$(ids.teamLink).define(\"options\", m2oFields);\n         const textFields = object\n            ?.fields((f) => f.key === \"string\")\n            .map(fieldToOption);\n         $$(ids.teamName).define(\"options\", textFields);\n         const booleanFields = object\n            ?.fields((f) => f.key === \"boolean\")\n            .map(fieldToOption);\n\n         // Add an empty option as this is an optional setting.\n         booleanFields.unshift({ id: \"\", value: \"\", $empty: true });\n         $$(ids.topTeam).define(\"options\", booleanFields);\n         $$(ids.teamInactive).define(\"options\", booleanFields);\n         $$(ids.teamCanInactivate).define(\"options\", booleanFields);\n         $$(ids.contentField).define(\"options\", [\n            { id: \"\", value: \"\", $empty: true },\n            ...m2oFields,\n         ]);\n      }\n\n      populateContentDisplayedFields(\n         values = {},\n         types = {},\n         mappingDataValues = {},\n         filters = {}\n      ) {\n         const self = this;\n         const webix = this.AB.Webix;\n         const ids = this.ids;\n         const $contentDisplayedFields = $$(ids.contentDisplayedFields);\n         const contentDisplayedFieldsElements =\n            $contentDisplayedFields.elements;\n         for (const key in contentDisplayedFieldsElements)\n            $contentDisplayedFields.removeView(\n               contentDisplayedFieldsElements[key].getParentView().config.id\n            );\n         const $contentDisplayedFieldTypes = $$(ids.contentDisplayedFieldTypes);\n         const contentDisplayedFieldTypesElements =\n            $contentDisplayedFieldTypes.elements;\n         const $contentDisplayedFieldTypesSet = $$(\n            ids.contentDisplayedFieldTypesSet\n         );\n         for (const key in contentDisplayedFieldTypesElements)\n            $contentDisplayedFieldTypes.removeView(\n               contentDisplayedFieldTypesElements[key].getParentView().config.id\n            );\n         const $contentDisplayedFieldMappingData = $$(\n            ids.contentDisplayedFieldMappingData\n         );\n         const contentDisplayedFieldMappingDataElements =\n            $contentDisplayedFieldMappingData.elements;\n         const $contentDisplayedFieldMappingDataSet = $$(\n            ids.contentDisplayedFieldMappingDataSet\n         );\n         const $contentDisplayedFieldFilters = $$(\n            ids.contentDisplayedFieldFilters\n         );\n         for (const key in contentDisplayedFieldMappingDataElements)\n            $contentDisplayedFieldMappingData.removeView(\n               contentDisplayedFieldMappingDataElements[key].getParentView()\n                  .config.id\n            );\n         const contentDisplayedFieldFiltersElements =\n            $contentDisplayedFieldFilters.elements;\n         const $contentDisplayedFieldFiltersSet = $$(\n            ids.contentDisplayedFieldFiltersSet\n         );\n         for (const key in contentDisplayedFieldFiltersElements)\n            $contentDisplayedFieldFilters.removeView(\n               contentDisplayedFieldFiltersElements[key].getParentView().config\n                  .id\n            );\n         $contentDisplayedFieldTypesSet.hide();\n         $contentDisplayedFieldMappingDataSet.hide();\n         $contentDisplayedFieldFiltersSet.hide();\n         const keys = Object.keys(values);\n         if (keys.length === 0) {\n            $contentDisplayedFields.hide();\n            return;\n         }\n         const obj = this.CurrentView.datacollection.datasource.fieldByID(\n            $$(ids.contentField).getValue()\n         )?.datasourceLink;\n         if (obj == null) {\n            $contentDisplayedFields.hide();\n            $$(ids.contentDisplayedFieldsAdd).hide();\n            return;\n         }\n         const typeKeys = Object.keys(types);\n         const filterKeys = Object.keys(filters);\n         const objID = obj.id;\n         const parentKeys = [];\n         const childKeys = [];\n         const createOptionsView = (key, field) => {\n            const optionPrefix = `${key}.${field.id}`;\n            const fieldLabel = field.label;\n            const typeKeyIndex = typeKeys.findIndex(\n               (typeKey) => typeKey.indexOf(optionPrefix) > -1\n            );\n            const typeSwitchValue = parseInt(\n               typeKeys\n                  .find((typeKey) => typeKey.indexOf(optionPrefix) > -1)\n                  ?.split(\".\")[3]\n            );\n            $contentDisplayedFieldTypes.addView({\n               cols: [\n                  {\n                     view: \"switch\",\n                     label: fieldLabel,\n                     labelWidth: uiConfig.labelWidthMedium,\n                     value: isNaN(typeSwitchValue) ? 1 : typeSwitchValue,\n                     on: {\n                        onChange: (newValue, oldValue) => {\n                           const oldTypes =\n                              $contentDisplayedFieldTypes.getValues();\n                           const oldTypeEntries = Object.entries(oldTypes);\n                           const newTypes = {};\n                           const oldTypePrefix = `${optionPrefix}.${oldValue}`;\n                           for (const [key, value] of oldTypeEntries)\n                              if (key.indexOf(oldTypePrefix) > -1)\n                                 newTypes[`${optionPrefix}.${newValue}`] =\n                                    value;\n                              else newTypes[key] = value;\n                           this.populateContentDisplayedFields(\n                              $contentDisplayedFields.getValues(),\n                              newTypes,\n                              $contentDisplayedFieldMappingData.getValues(),\n                              $contentDisplayedFieldFilters.getValues()\n                           );\n                           this.onChange();\n                        },\n                        onViewShow() {\n                           this.getParentView().addView({\n                              view: \"richselect\",\n                              options: [\n                                 { id: \"icon\", value: \"Icon\" },\n                                 { id: \"image\", value: \"Image\" },\n                                 { id: \"svg\", value: \"SVG\" },\n                                 { id: \"text\", value: \"Text\" },\n                              ],\n                              name: `${optionPrefix}.${this.getValue()}`,\n                              value:\n                                 (typeKeyIndex > -1 &&\n                                    types[typeKeys[typeKeyIndex]]) ||\n                                 \"text\",\n                              on: {\n                                 onChange: () => {\n                                    self.onChange();\n                                 },\n                              },\n                           });\n                        },\n                     },\n                  },\n               ],\n            });\n            const mappingDataValue = mappingDataValues[optionPrefix];\n            $contentDisplayedFieldMappingData.addView({\n               cols: [\n                  {\n                     view: \"label\",\n                     label: fieldLabel,\n                     width: uiConfig.labelWidthMedium,\n                  },\n                  {\n                     view: \"button\",\n                     label: \"Set\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click: () => {\n                        const getValueViewUI = (key = \"\", value = \"\") => ({\n                           cols: [\n                              {\n                                 view: \"text\",\n                                 placeholder: L(\"The value need to map.\"),\n                                 value: key,\n                              },\n                              {\n                                 view: \"label\",\n                                 label: L(\"to\"),\n                                 align: \"center\",\n                                 width: uiConfig.labelWidthSmall,\n                              },\n                              {\n                                 view: \"text\",\n                                 placeholder: (() => {\n                                    switch (value) {\n                                       case \"icon\":\n                                          return L(\"Icon class text.\");\n                                       case \"image\":\n                                       case \"svg\":\n                                          return L(\n                                             \"Image url or Base64 (ex. data:image/png;base64,AAABBBCCC) url.\"\n                                          );\n                                       default:\n                                          return L(\"New text.\");\n                                    }\n                                 })(),\n                                 value,\n                              },\n                              {\n                                 view: \"button\",\n                                 css: \"webix_danger\",\n                                 type: \"icon\",\n                                 icon: \"wxi-close\",\n                                 width: uiConfig.buttonWidthExtraSmall,\n                                 click() {\n                                    const $childView = this.getParentView();\n                                    $childView\n                                       .getParentView()\n                                       .removeView($childView.config.id);\n                                 },\n                              },\n                           ],\n                        });\n                        const $popup = webix.ui({\n                           view: \"window\",\n                           close: true,\n                           title: L(\"Map Data\"),\n                           position: \"center\",\n                           body: {\n                              view: \"form\",\n                              elements: [\n                                 {\n                                    view: \"button\",\n                                    label: L(\"Add a value\"),\n                                    click() {\n                                       this.getParentView()\n                                          .getChildViews()[1]\n                                          .addView(getValueViewUI());\n                                    },\n                                 },\n                                 {\n                                    rows: [],\n                                 },\n                                 {\n                                    view: \"button\",\n                                    label: L(\"Apply\"),\n                                    click() {\n                                       const $valueView =\n                                          this.getParentView().getChildViews()[1];\n                                       const mapingValues = {};\n                                       const valueChildViews =\n                                          $valueView.getChildViews();\n                                       for (const $valueChildView of valueChildViews) {\n                                          const valueChildViewElements =\n                                             $valueChildView.getChildViews();\n                                          mapingValues[\n                                             valueChildViewElements[0].getValue()\n                                          ] =\n                                             valueChildViewElements[2].getValue();\n                                       }\n                                       $contentDisplayedFieldMappingData.elements[\n                                          optionPrefix\n                                       ]?.setValue(\n                                          JSON.stringify(mapingValues)\n                                       );\n                                       $popup.hide();\n                                       self.onChange();\n                                    },\n                                 },\n                              ],\n                           },\n                           on: {\n                              onHide() {\n                                 this.destructor();\n                              },\n                           },\n                        });\n                        try {\n                           const $valueView = $popup\n                              .getChildViews()[1]\n                              .getChildViews()[1];\n                           const mappingDataObj = JSON.parse(mappingDataValue);\n                           for (const key in mappingDataObj)\n                              $valueView.addView(\n                                 getValueViewUI(key, mappingDataObj[key])\n                              );\n                        } catch {}\n                        $popup.show();\n                     },\n                  },\n                  {\n                     view: \"text\",\n                     name: optionPrefix,\n                     disabled: true,\n                     value: mappingDataValue || JSON.stringify({}),\n                  },\n               ],\n            });\n            const filterCheckboxValue = parseInt(\n               filterKeys\n                  .find((filterKey) => filterKey.indexOf(optionPrefix) > -1)\n                  ?.split(\".\")[3]\n            );\n            $contentDisplayedFieldFilters.addView({\n               cols: [\n                  {\n                     view: \"checkbox\",\n                     label: fieldLabel,\n                     labelWidth: uiConfig.labelWidthMedium,\n                     value: isNaN(filterCheckboxValue)\n                        ? 0\n                        : filterCheckboxValue,\n                     on: {\n                        onChange: (newValue, oldValue) => {\n                           const oldFilters =\n                              $contentDisplayedFieldFilters.getValues();\n                           const oldFilterEntries = Object.entries(oldFilters);\n                           const newFilters = {};\n                           const oldFilterKey = `${optionPrefix}.${oldValue}`;\n                           for (const [key, value] of oldFilterEntries)\n                              if (key === oldFilterKey)\n                                 newFilters[`${optionPrefix}.${newValue}`] = \"\";\n                              else newFilters[key] = value;\n                           this.populateContentDisplayedFields(\n                              $contentDisplayedFields.getValues(),\n                              $contentDisplayedFieldTypes.getValues(),\n                              $contentDisplayedFieldMappingData.getValues(),\n                              newFilters\n                           );\n                           this.onChange();\n                        },\n                        onViewShow() {\n                           const currentFilterCheckboxValue = this.getValue();\n                           const filterKey = `${optionPrefix}.${currentFilterCheckboxValue}`;\n                           this.getParentView().addView({\n                              view: \"text\",\n                              placeholder: L(\"Add the new field label.\"),\n                              name: filterKey,\n                              value: filters[filterKey] || fieldLabel,\n                              disabled:\n                                 currentFilterCheckboxValue === 1\n                                    ? false\n                                    : true,\n                              on: {\n                                 onChange: () => {\n                                    self.onChange();\n                                 },\n                              },\n                           });\n                        },\n                     },\n                  },\n               ],\n            });\n         };\n         while (keys.length > 0) {\n            const key = keys.pop();\n            (key.includes(objID) && parentKeys.push(key)) ||\n               childKeys.push(key);\n         }\n         while (parentKeys.length > 0) {\n            const parentKey = parentKeys.pop();\n            const parentFieldID = values[parentKey] ?? \"\";\n            $contentDisplayedFields.addView(\n               this._uiContentDisplayedField(parentFieldID)\n            );\n            const parentField = obj.fieldByID(parentFieldID);\n            if (parentField == null) continue;\n            switch (parentField.key) {\n               case \"connectObject\":\n               case \"user\":\n                  break;\n               default:\n                  createOptionsView(parentKey, parentField);\n                  continue;\n            }\n            const currentAtDisplay =\n               Object.keys($contentDisplayedFields.getValues()).filter(\n                  (currentKey) => currentKey.includes(objID)\n               ).length - 1;\n            while (\n               childKeys.findIndex((childKey) =>\n                  childKey.includes(`${parentKey.split(\".\")[0]}.`)\n               ) > -1\n            ) {\n               const childKey = childKeys.pop();\n               const childObj = this.AB.objectByID(childKey.split(\".\")[1]);\n               const childFieldID = values[childKey] ?? \"\";\n               $contentDisplayedFields.addView(\n                  this._uiContentDisplayedField(\n                     childFieldID,\n                     childObj,\n                     currentAtDisplay\n                  )\n               );\n               const childField = childObj.fieldByID(childFieldID);\n               if (childField == null) continue;\n               switch (childField.key) {\n                  case \"connectObject\":\n                  case \"user\":\n                     break;\n                  default:\n                     createOptionsView(childKey, childField);\n                     continue;\n               }\n            }\n         }\n         $contentDisplayedFields.show();\n         $contentDisplayedFieldTypesSet.show();\n         $contentDisplayedFieldMappingDataSet.show();\n         $contentDisplayedFieldFiltersSet.show();\n      }\n\n      populateDataPanelDCs(values) {\n         const ids = this.ids;\n         const $dataPanelDCs = $$(ids.dataPanelDCs);\n         const dataPanelDCsChidren = $dataPanelDCs.getChildViews();\n         while (dataPanelDCsChidren.length > 0)\n            $dataPanelDCs.removeView(dataPanelDCsChidren[0].config.id);\n         $dataPanelDCs.hide();\n         const contentFieldValue = $$(ids.contentField).getValue();\n         const keys = Object.keys(values);\n         if (\n            contentFieldValue == null ||\n            contentFieldValue === \"\" ||\n            keys.length === 0\n         )\n            return;\n         while (keys.length > 0) {\n            const key = keys.shift();\n            $dataPanelDCs.addView(\n               this._uiDataPanelDC(values[key] ?? \"\", key.split(\".\")[1] ?? \"\")\n            );\n         }\n         $dataPanelDCs.show();\n      }\n\n      populateStrategyOptions(fieldID) {\n         const strategyObj = this.AB.objectByID(\n            this.AB.definitionByID(fieldID).settings.linkObject\n         );\n         const listFields = strategyObj\n            .fields((f) => f.key === \"connectObject\")\n            .map(fieldToOption);\n         $$(this.ids.strategyCode).define(\"options\", listFields);\n         $$(this.ids.subStrategy).define(\"options\", listFields);\n      }\n\n      async strategyColorPopup() {\n         const codeFieldID = $$(this.ids.strategyCode).getValue();\n         if (!codeFieldID) return;\n\n         let $popup = $$(this.ids.strategyColorPopup);\n\n         if (!$popup) {\n            const values = this.CurrentView.settings.strategyColors ?? {};\n            const link =\n               this.AB.definitionByID(codeFieldID).settings.linkObject;\n            const strategies = await this.AB.objectByID(link).model().findAll();\n            const strategyTypes = strategies.data.map((strategy) => {\n               return {\n                  view: \"colorpicker\",\n                  label: strategy.name,\n                  name: strategy.id,\n                  value: values[strategy.id] ?? \"#111111\",\n                  suggest: {\n                     type: \"colorselect\",\n                     body: {\n                        button: true,\n                     },\n                  },\n               };\n            });\n\n            $popup = this.AB.Webix.ui({\n               view: \"window\",\n               id: this.ids.strategyColorPopup,\n               close: true,\n               title: L(\"Set Colors\"),\n               position: \"center\",\n               body: {\n                  view: \"form\",\n                  id: this.ids.strategyColorForm,\n                  elements: [\n                     ...strategyTypes,\n                     {\n                        view: \"button\",\n                        label: L(\"Apply\"),\n                        click: () => {\n                           this.onChange();\n                           $$(this.ids.strategyColorPopup).hide();\n                        },\n                     },\n                  ],\n               },\n            });\n         }\n         $popup.show();\n      }\n\n      // populateDescriptionFieldOptions(fieldId) {\n      //    const valueField = this.CurrentView.valueField();\n      //    const $columnDescription = $$(this.ids.columnDescription);\n\n      //    const connectFieldOpts =\n      //       valueField?.datasourceLink\n      //          ?.fields?.((f) => f.key != \"connectObject\")\n      //          .map?.((f) => {\n      //             return {\n      //                id: f.id,\n      //                value: f.label,\n      //             };\n      //          }) ?? [];\n      //    $columnDescription.define(\"options\", connectFieldOpts);\n      //    $columnDescription.define(\"value\", fieldId);\n      //    $columnDescription.refresh();\n      // }\n\n      defaultValues() {\n         const ViewClass = this.ViewClass();\n\n         let values = null;\n\n         if (ViewClass) {\n            values = ViewClass.defaultValues();\n         }\n\n         return values;\n      }\n\n      /**\n       * @method values\n       * return the values for this form.\n       * @return {obj}\n       */\n      values() {\n         const values = super.values();\n         const ids = this.ids;\n         const settings = (values.settings = Object.assign(\n            $$(ids.component).getValues(),\n            values.settings\n         ));\n         // Retrive the values of your properties from Webix and store them in the view\n         settings.teamLink = $$(ids.teamLink).getValue();\n         settings.teamName = $$(ids.teamName).getValue();\n         settings.topTeam = $$(ids.topTeam).getValue();\n         settings.teamInactive = $$(ids.teamInactive).getValue();\n         settings.teamCanInactivate = $$(ids.teamCanInactivate).getValue();\n         settings.teamStrategy = $$(ids.teamStrategy).getValue();\n         settings.subStrategy = $$(ids.subStrategy).getValue();\n         settings.strategyCode = $$(ids.strategyCode).getValue();\n         settings.dataCollectionId = $$(ids.datacollectionID).getValue();\n         settings.contentField = $$(ids.contentField).getValue();\n         settings.contentGroupByField = $$(ids.contentGroupByField).getValue();\n         settings.editContentFieldsToCreateNew = $$(\n            ids.editContentFieldsToCreateNew\n         ).getValue();\n         settings.setEditableContentFields = $$(\n            ids.setEditableContentFields\n         ).getValue();\n         settings.contentFieldFilter = JSON.stringify(\n            this.contentFieldFilter.getValue()\n         );\n         settings.contentDisplayedFields = $$(\n            ids.contentDisplayedFields\n         ).getValues();\n         settings.contentDisplayedFieldTypes = $$(\n            ids.contentDisplayedFieldTypes\n         ).getValues();\n         settings.contentDisplayedFieldMappingData = $$(\n            ids.contentDisplayedFieldMappingData\n         ).getValues();\n         settings.contentDisplayedFieldFilters = $$(\n            ids.contentDisplayedFieldFilters\n         ).getValues();\n         settings.contentFieldDateStart = $$(\n            ids.contentFieldDateStart\n         ).getValue();\n         settings.contentFieldDateEnd = $$(ids.contentFieldDateEnd).getValue();\n         settings.dataPanelDCs = $$(ids.dataPanelDCs).getValues();\n         const $colorForm = $$(ids.strategyColorForm);\n         settings.strategyColors =\n            $colorForm?.getValues() ?? settings.strategyColors;\n         return values;\n      }\n\n      /**\n       * @method FieldClass()\n       * A method to return the proper ABViewXXX Definition.\n       * NOTE: Must be overwritten by the Child Class\n       */\n      ViewClass() {\n         return super._ViewClass(\"plugin_hr_teams\");\n      }\n   }\n\n   return ABViewOrgChartTeamsProperty;\n}\n\nfunction fieldToOption(f) {\n   return {\n      id: f.id,\n      value: f.label,\n      field: f,\n   };\n}\n","import view from \"./ABViewOrgChartTeams\";\nimport ABViewOrgChartTeamsEditor from \"./ABViewOrgChartTeamsEditor\";\nimport ABViewOrgChartTeamsProperty from \"./ABViewOrgChartTeamsProperty\";\n\nconst plugin = {\n   /* global VERSION -- injected by webpack define plugin */\n   version: VERSION,\n   key: \"HRTeams\",\n   apply: function (AB) {\n      const ABView = AB.Class.ABViewManager.viewClass(\"view\");\n      const ABViewComponent = AB.Class.ABViewComponent;\n\n      // Add our view class to ViewManager\n      const ABViewOrgChartTeams = view(ABView, ABViewComponent);\n      AB.Class.ABViewManager.addViewClass(ABViewOrgChartTeams);\n\n      // Convert Existing Views that have already been loaded (they got loaded\n      // as ABViews since our class wasn't loaded yet)\n      AB.applications().forEach((app) => {\n         app.views((v) => v.key === \"plugin_hr_teams\").forEach(\n            (view, i, views) => {\n               const newView = new ABViewOrgChartTeams(\n                  view.toObj(),\n                  view.application,\n                  view.parent\n               );\n               // Overwrite the view\n               views[i] = newView;\n               // Also update the parent view\n               const parent = view.parent;\n               parent.viewRemove(view);\n               parent.viewInsert(newView);\n            }\n         );\n      });\n\n      AB.pluginLoad({\n         id: this.key,\n         isPlugin: true,\n         label: \"HR Teams Widget\",\n         editor: ABViewOrgChartTeamsEditor,\n         viewProperty: ABViewOrgChartTeamsProperty,\n      });\n   },\n   definitions: () => [],\n   labels: () => [],\n};\n\nwindow.__AB_Plugins = window.__AB_Plugins || [];\n\nwindow.__AB_Plugins.push(plugin);\n"],"names":["deferred","inProgress","dataWebpackPrefix","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","id","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","F","E","chunkId","map","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","e","Promise","all","reduce","promises","u","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","call","l","url","done","push","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","setTimeout","bind","type","target","head","appendChild","Symbol","toStringTag","value","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","test","Error","replace","p","installedChunks","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","link","rel","as","href","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","ABViewOrgChartTeamsPropertyComponentDefaults","datacollectionID","teamLink","teamName","topTeam","teamStrategy","subStrategy","strategyCode","strategyColors","fields","direction","depth","color","draggable","showGroupTitle","dropContentToCreate","pan","zoom","height","export","exportFilename","contentField","editContentFieldsToCreateNew","setEditableContentFields","contentFieldFilter","contentFieldDateStart","contentFieldDateEnd","contentGroupByField","contentDisplayedFields","contentDisplayedFieldTypes","contentDisplayedFieldMappingData","contentDisplayedFieldFilters","showDataPanel","dataPanelDCs","ABViewOrgChartTeamsDefaults","icon","labelKey","classes","elem","classList","add","split","fieldToOption","text","sortByEmployeeLastname","b","lastName","toLowerCase","sortByTeamName","ABView","ABViewComponent","ABViewOrgChartTeamsCore","ABViewWidget","constructor","values","application","parent","defaultValues","super","common","fromValues","settings","teamInactive","teamCanInactivate","parseInt","JSON","parse","connectFieldDateEnd","datacollection","AB","datacollectionByID","getValueFields","object","connectFields","linkType","linkViaType","valueFields","fieldValues","Array","isArray","datasource","fId","field","fieldByID","datasourceLink","ABViewOrgChartTeamsComponent","baseView","idBase","ids","assign","chartView","chartContent","chartHeader","dataPanel","dataPanelButton","dataPanelPopup","filterButton","filterPopup","filterForm","contentForm","contentFormData","teamForm","teamFormCode","teamFormPopup","teamFormStrategy","teamFormSubmit","teamFormTitle","_resources","__filters","inactive","_OrgChart","_resolveInit","_promiseInit","_promisePageData","_contentDC","_contentGroupDC","_contentDisplayDCs","_dataPanelDCs","_entityDC","_chartData","_fnContentDragEnd","_fnContentDragOver","preventDefault","stopPropagation","_fnContentDragStart","$eventTarget","dataset","dataTransfer","className","pk","contentLinkedFieldID","contentLinkedFieldId","source","setData","stringify","_fnContentDrop","async","view","nodeObj","nodeObjPK","PK","contentFieldLink","fieldLink","contentObj","contentDateStartFieldColumnName","columnName","contentDateEndFieldColumnName","contentGroupByFieldColumnName","contentFieldLinkColumnName","contentModel","model","getData","busy","$group","currentTarget","$content","parentElement","newGroupDataPK","newNodeDataPK","_rawData","updatedData","dataPK","draggedNodes","isRefreshed","$contentRecords","getElementsByClassName","dataPanelDC","dataPanelLinkedFieldColumnName","connectField","$contentRecord","contentRecord","ready","$draggedNode","querySelector","contentNodeID","_setUpdatedBy","_isLessThanDay","Date","update","_parseFormValueByType","pendingPromises","create","contentLinkedFieldColumnName","newDate","isUpdated","contentData","_parseDataPK","entityDC","entityLink","linkObject","entityCol","definitionByID","getCursor","_createUIContentRecord","err","console","log","_reloadDCData","refresh","remove","_fnCreateNode","$node","children","item","innerHTML","contentGroupDC","groupObjPKColumeName","_waitDCReady","contentGroupOptions","contentGroupOptionsLength","filteredOut","style","display","$nodeSpacer","nodeSpacerStyle","backgroundColor","group","groupStyle","groupColor","groupText","$groupTitle","createTextNode","$groupContent","addEventListener","$buttons","$editButton","append","$addButton","dataID","teamRecordID","onclick","__parentID","ondblclick","teamCanDelete","$deleteButton","teamDelete","isInactive","$active","$span","_fnNodeDrop","eventDetail","detail","dragedRecord","draggedNode","getSettingField","linkColumn","dropZone","dc","_fnPageContentCallback","contentRecords","isContentDone","contentDC","linkedContentFieldColumnName","$teamNode","getElementById","teamNodeID","_addContentRecordToGroup","$$","getChildViews","$childView","callEvent","_callPagingEvent","_fnPageContentGroupCallback","contentGroupRecords","isContentGroupDone","teamDC","_fnPageTeamCallback","_fnPageContentDisplayCallback","contentDisplayRecords","isContentDisplayDone","contentDisplayDC","_fnPageData","callback","records","loadData","teamRecords","isTeamDone","contentFieldColumnName","contentRecordPK","teamRecord","teamAddChild","teamEdit","indexOf","pullData","_fnRefresh","datacollectionLink","_waitDCPending","filter","__orgchart","_fnShowContentForm","contentDateStartField","contentDateStartFieldLabel","label","contentDataRecord","rules","labelWidth","contentFormElements","fieldID","fieldKey","fieldName","invalidMessage","getValues","fieldLabel","isMultiple","options","option","abWebix","Webix","fieldLinkObj","disabled","on","onViewShow","extend","ProgressBar","showProgress","setValue","displayData","findAll","where","glue","rule","hideProgress","define","enable","stringResult","labelAlign","timepicker","css","click","$contentFormData","validate","newFormData","$contentForm","blockEvent","$view","destructor","_checkDataIsChanged","$contentNode","isCreated","editContentFieldToCreateNew","editContentFieldToCreateNewColumnName","confirm","title","ok","cancel","then","oldData","join","ui","close","position","body","width","rows","cols","align","hidden","elements","onHide","show","setValues","_convertToFormValueByType","structuredClone","_fnShowFilterPopup","$popup","webix","borderless","clear","strategyCodeOptions","labelRight","contentDisplayedFieldFilterViews","contentDisplayedFieldFilterKey","objID","isActive","objectByID","fieldColumnName","filterApply","onShow","hide","colors","contentGroupDataPK","contentGroupPKField","$groupSection","_callAfterRender","contentAllFields","parsedValue","isNaN","$ui","borderColor","hardcodedDisplays","$hardcodedSpecialDisplay","currentDataRecords","currentField","currentDisplayIndex","contentObjID","contentDisplayedFieldsKeys","contentDisplayDCs","displayedFieldKey","atDisplay","displayedObj","displayedFieldID","displayedField","displayDC","find","currentFieldColumnName","currentDataPKs","currentFieldData","pop","$currentDisplay","displayedFieldColumnName","contentDisplayedFieldTypePrefix","contentDisplayedFieldMappingDataObj","currentDataRecordValue","$img","currentDataRecord","currentDataRecordID","SVG_NS","X_LINK_NS","$svg","createElementNS","$rect","$defs","patternID","$pattern","$image","setAttributeNS","imageID","$use","textContent","slice","hardcodedDisplaysLength","$hardcodedDisplay","child","grandChildren","grandChildrenLength","isShown","childrenLength","hardcodedDisplayStyle","$editIcon","params","requestAnimationFrame","emit","olaValues","newValues","date","Math","abs","_initDC","init","dataStatus","dataStatusFlag","notInitial","_pageData","resolvePageData","intDataPk","toString","oldFormData","allFields","oldValue","newValue","getFullYear","String","getMonth","padStart","getDate","toISOString","paredNewValue","_reloadAllDC","initializing","clearAll","Account","email","_showDataPanel","$panel","_uiDataPanel","modal","$dpButtonWebix","$dpButtonElem","_resizeObserver","ResizeObserver","contentRect","x","y","observe","_showOrgChart","chartData","orgchart","cloneDeep","parentNodeSymbol","exportButton","createNode","nodeContent","oldOrgchart","panStart","cells","tabIndex","dataPanelDCID","_dataPanelDC","header","overflow","panelObj","template","contentLinkedField","panelRecord","isinactive","sort","$itemElements","itemElementsLength","contentFieldID","count","$itemElement","dataPanelRecord","onClick","unobserve","tabbar","initialized","once","_ui","responsive","ev","scroll","onAfterRender","accessLevel","OrgChart","default","_oldOnDragStart","_onDragStart","entityDatacollection","CHANGE_CURSOR","off","findIndex","contentDCSettings","datasourceID","linkDatacollectionID","linkFieldID","objectWorkspace","filterConditions","entityObjID","datacollectionNew","$dc","__prevLinkDcCursor","contentGroupObjID","contentGroupDCSettings","contentDisplayedFieldKeys","teamObjID","contentDisplayDCSettings","fixSelect","getChartData","performance","mark","measure","topNode","topNodeColumn","teamLinkDef","teamLinkDefColumnName","teamLinkedColumnDefColumnName","pullChildData","node","childData","filterTeam","force","team","filters","strategy","includes","contentDisplayFieldFilters","teamObj","contentObjPK","teamRecordPK","currentContentDisplayFieldKey","currentContentDisplayDC","currentContentDisplayObjID","currentContentDisplayObjPK","currentContentDisplayFieldColumnName","currentContentDisplayFilterValue","currentContentDisplayRecords","contentDisplayRecord","contentDisplayRecordData","setting","isServerSideUpdate","connection","entity","hasChild","colSpan","teamID","newChild","relationship","addSiblings","closest","el","nodeName","siblings","addChildren","c","querySelectorAll","expire","nodeID","alert","delete","removeNodes","oldChartData","linkFieldColumnName","currentStrategy","match","newStrategy","newChartData","mode","nameField","entityDCCursorID","strategyField","linkField","isEditMode","teamCond","isDisabled","$teamFormPopup","required","disable","onChange","code","previous","opts","strategyOptions","$strategyField","getValue","getOptions","oldValues","valid","$teamFormSubmit","_strategyCodeOpts","strategyID","strategyObj","strategyCodeFieldID","strategyCodeField","_strategyOpts","subStrategyCol","strategyCodeCol","$chartView","component","myClass","FABViewDefault","ABViewDefault","base","detatch","FABView","uiConfig","Config","uiSettings","L","groupByField","contentFieldFilterButton","contentDisplayedFieldsAdd","contentDisplayedFieldFiltersSet","contentDisplayedFieldTypesSet","contentDisplayedFieldMappingDataSet","dataPanelDCsAdd","strategyColorPopup","strategyColorForm","filterComplexNew","isConditionComplete","_uiDataPanelDC","labelValue","dcID","$dataPanelDCs","validOBJIDs","CurrentView","dcOptions","datacollections","getUILabel","elementIndex","labelWidthMedium","$parentView","getParentView","sameLevelViews","removeView","config","addView","$dataPanelDCsChild","buttonWidthExtraSmall","deleteDataPanelDC","_uiContentDisplayedField","parentObj","parentObjID","$contentDisplayedFields","$contentDisplayedFieldTypes","$contentDisplayedFieldMappingData","$contentDisplayedFieldFilters","filterFields","linkedObjID","getOnSelectChangeFn","currentObj","currentAtDisplay","populateContentDisplayedFields","rootAtDisplay","deleteContentDisplayedField","labelWidthLarge","populateTeamFieldOptions","$editContentFieldsToCreateNew","$setEditableContentFields","$contentDisplayedFieldsAdd","$contentFieldFilterButton","$contentGroupByField","$contentFieldDateStart","$contentFieldDateEnd","$showGroupTitle","contentObjFields","contentDateFiels","contentObjMappedFields","contentObjField","fieldsLoad","$empty","popUp","pos","placeholder","isVisible","$dataPanelDCsAdd","populateDataPanelDCs","populateStrategyOptions","allign","$dropContentToCreate","queriesLoad","CurrentApplication","queriesIncluded","$elements","$richselect","deletedElementKey","deletedAtDisplay","populate","$component","populateDatacollection","datacollectionId","$dataCollection","datacollectionsIncluded","refreshValueFieldOptions","$fieldList","populateSubValueFieldOptions","$fieldItem","getItem","abField","exists","checkItem","unblockEvent","m2oFields","o2mFields","textFields","booleanFields","unshift","types","mappingDataValues","contentDisplayedFieldsElements","contentDisplayedFieldTypesElements","$contentDisplayedFieldTypesSet","contentDisplayedFieldMappingDataElements","$contentDisplayedFieldMappingDataSet","contentDisplayedFieldFiltersElements","$contentDisplayedFieldFiltersSet","typeKeys","filterKeys","parentKeys","childKeys","createOptionsView","optionPrefix","typeKeyIndex","typeKey","typeSwitchValue","oldTypes","oldTypeEntries","entries","newTypes","oldTypePrefix","mappingDataValue","getValueViewUI","labelWidthSmall","mapingValues","valueChildViews","$valueChildView","valueChildViewElements","$valueView","mappingDataObj","filterCheckboxValue","filterKey","oldFilters","oldFilterEntries","newFilters","oldFilterKey","currentFilterCheckboxValue","parentKey","parentFieldID","parentField","currentKey","childKey","childObj","childFieldID","childField","dataPanelDCsChidren","contentFieldValue","shift","listFields","codeFieldID","strategyTypes","suggest","button","ViewClass","dataCollectionId","$colorForm","_ViewClass","version","apply","ABViewOrgChartTeams","Class","ABViewManager","viewClass","addViewClass","applications","app","views","v","newView","toObj","viewRemove","viewInsert","pluginLoad","isPlugin","editor","ABViewOrgChartTeamsEditor","viewProperty","ABViewOrgChartTeamsProperty","definitions","labels","__AB_Plugins"],"sourceRoot":""}