{"version":3,"file":"HRTeams.js","mappings":"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","sources":["webpack://hrteamwidget/webpack/runtime/chunk loaded","webpack://hrteamwidget/webpack/runtime/load script","webpack://hrteamwidget/webpack/bootstrap","webpack://hrteamwidget/webpack/runtime/chunk prefetch function","webpack://hrteamwidget/webpack/runtime/compat get default export","webpack://hrteamwidget/webpack/runtime/define property getters","webpack://hrteamwidget/webpack/runtime/ensure chunk","webpack://hrteamwidget/webpack/runtime/get javascript chunk filename","webpack://hrteamwidget/webpack/runtime/global","webpack://hrteamwidget/webpack/runtime/hasOwnProperty shorthand","webpack://hrteamwidget/webpack/runtime/make namespace object","webpack://hrteamwidget/webpack/runtime/publicPath","webpack://hrteamwidget/webpack/runtime/jsonp chunk loading","webpack://hrteamwidget/webpack/runtime/nonce","webpack://hrteamwidget/webpack/runtime/startup prefetch","webpack://hrteamwidget/./ABViewOrgChartTeamsCore.js","webpack://hrteamwidget/./ABViewOrgChartTeamsComponent.js","webpack://hrteamwidget/./ABViewOrgChartTeams.js","webpack://hrteamwidget/./ABViewOrgChartTeamsEditor.js","webpack://hrteamwidget/./ABViewOrgChartTeamsProperty.js","webpack://hrteamwidget/./index.js"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"hrteamwidget:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"HR\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t743: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n__webpack_require__.F.j = (chunkId) => {\n\tif((!__webpack_require__.o(installedChunks, chunkId) || installedChunks[chunkId] === undefined) && true) {\n\t\tinstalledChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"script\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhrteamwidget\"] = self[\"webpackChunkhrteamwidget\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","__webpack_require__.O(0, [743], () => {\n\t[556,702,709].map(__webpack_require__.E);\n}, 5);","const ABViewOrgChartTeamsPropertyComponentDefaults = {\n   datacollectionID: \"\",\n   teamLink: \"\",\n   teamName: \"\",\n   topTeam: \"\",\n   teamStrategy: \"\",\n   subStrategy: \"\",\n   strategyCode: \"\",\n   strategyColors: [],\n   fields: \"\",\n   direction: \"t2b\",\n   depth: 99,\n   color: \"#00BCD4\",\n   // visibleLevel: 2,\n   draggable: 1,\n   showGroupTitle: 0,\n   dropContentToCreate: 0,\n   pan: 1,\n   zoom: 1,\n   height: 0,\n   export: 0,\n   exportFilename: \"\",\n   contentField: \"\",\n   editContentFieldsToCreateNew: [],\n   setEditableContentFields: [],\n   contentFieldFilter: null,\n   contentFieldDateStart: \"\",\n   contentFieldDateEnd: \"\",\n   contentGroupByField: \"\",\n   contentDisplayedFields: {},\n   contentDisplayedFieldTypes: {},\n   contentDisplayedFieldMappingData: {},\n   contentDisplayedFieldFilters: {},\n   showDataPanel: 0,\n   dataPanelDCs: {},\n};\n\nconst ABViewOrgChartTeamsDefaults = {\n   key: \"plugin_hr_teams\", // {string} unique key for this view\n   icon: \"users\", // {string} fa-[icon] reference for this view\n   labelKey: \"HR Teams\", // {string} the multilingual label key for the class label\n};\n\nexport default function (ABViewWidget) {\n   return class ABViewOrgChartTeamsCore extends ABViewWidget {\n      constructor(values, application, parent, defaultValues) {\n         super(\n            values,\n            application,\n            parent,\n            defaultValues || ABViewOrgChartTeamsDefaults\n         );\n      }\n\n      static common() {\n         return ABViewOrgChartTeamsDefaults;\n      }\n\n      static defaultValues() {\n         return ABViewOrgChartTeamsPropertyComponentDefaults;\n      }\n\n      ///\n      /// Instance Methods\n      ///\n\n      /**\n       * @method fromValues()\n       *\n       * initialze this object with the given set of values.\n       * @param {obj} values\n       */\n      fromValues(values) {\n         super.fromValues(values);\n\n         this.settings.datacollectionID =\n            this.settings.datacollectionID ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.datacollectionID;\n\n         this.settings.teamLink =\n            this.settings.teamLink ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamLink;\n\n         this.settings.teamName =\n            this.settings.teamName ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamName;\n\n         this.settings.topTeam =\n            this.settings.topTeam ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.topTeam;\n\n         this.settings.teamInactive =\n            this.settings.teamInactive ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamInactive;\n\n         this.settings.teamCanInactivate =\n            this.settings.teamCanInactivate ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamCanInactivate;\n\n         this.settings.teamStrategy =\n            this.settings.teamStrategy ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.teamStrategy;\n\n         this.settings.subStrategy =\n            this.settings.subStrategy ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.subStrategy;\n\n         this.settings.strategyCode =\n            this.settings.strategyCode ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.strategyCode;\n\n         this.settings.strategyColors =\n            this.settings.strategyColors ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.strategyColors;\n\n         this.settings.direction =\n            this.settings.direction ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.direction;\n\n         this.settings.depth = parseInt(\n            this.settings.depth ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.depth\n         );\n\n         this.settings.color =\n            this.settings.color ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.color;\n\n         this.settings.pan = JSON.parse(\n            this.settings.pan ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.pan\n         );\n\n         this.settings.zoom = JSON.parse(\n            this.settings.zoom ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.zoom\n         );\n\n         this.settings.draggable = JSON.parse(\n            this.settings.draggable ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.draggable\n         );\n\n         this.settings.dropContentToCreate = JSON.parse(\n            this.settings.dropContentToCreate ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.dropContentToCreate\n         );\n\n         this.settings.height = parseInt(\n            this.settings.height ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.height\n         );\n\n         this.settings.export = JSON.parse(\n            this.settings.export ??\n               ABViewOrgChartTeamsPropertyComponentDefaults.export\n         );\n\n         this.settings.exportFilename =\n            this.settings.exportFilename ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.exportFilename;\n         this.settings.contentField =\n            this.settings.contentField ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentField;\n         this.settings.editContentFieldsToCreateNew =\n            this.settings.editContentFieldsToCreateNew ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.editContentFieldsToCreateNew;\n         this.settings.setEditableContentFields =\n            this.settings.setEditableContentFields ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.setEditableContentFields;\n         this.settings.contentFieldFilter =\n            this.settings.contentFieldFilter ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentFieldFilter;\n         this.settings.contentFieldDateStart =\n            this.settings.contentFieldDateStart ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentFieldDateStart;\n         this.settings.connectFieldDateEnd =\n            this.settings.connectFieldDateEnd ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentFieldDateEnd;\n         this.settings.contentGroupByField =\n            this.settings.contentGroupByField ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentGroupByField;\n         this.settings.showGroupTitle =\n            this.settings.showGroupTitle ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.showGroupTitle;\n         this.settings.contentDisplayedFields =\n            this.settings.contentDisplayedFields ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFields;\n         this.settings.contentDisplayedFieldTypes =\n            this.settings.contentDisplayedFieldTypes ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFieldTypes;\n         this.settings.contentDisplayedFieldMappingData =\n            this.settings.contentDisplayedFieldMappingData ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFieldMappingData;\n         this.settings.contentDisplayedFieldFilters =\n            this.settings.contentDisplayedFieldFilters ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.contentDisplayedFieldFilters;\n         this.settings.showDataPanel =\n            this.settings.showDataPanel ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.showDataPanel;\n         this.settings.dataPanelDCs =\n            this.settings.dataPanelDCs ??\n            ABViewOrgChartTeamsPropertyComponentDefaults.dataPanelDCs;\n      }\n\n      get datacollection() {\n         const datacollectionID = (this.settings || {}).datacollectionID;\n\n         return this.AB.datacollectionByID(datacollectionID);\n      }\n\n      getValueFields(object) {\n         // OrgChart supports only one parent node.\n         return (\n            object?.connectFields(\n               (f) => f.linkType() == \"many\" && f.linkViaType() == \"one\"\n            ) ?? []\n         );\n      }\n\n      /**\n       * @function valueFields()\n       * Return IDs of connect field for each layer of OrgChart, starting from the top to the bottom.\n       *\n       * @return {Array}\n       *\n       */\n      valueFields() {\n         let fieldValues = (this.settings?.fields ?? \"\").split(\",\");\n         if (!Array.isArray(fieldValues)) fieldValues = [fieldValues];\n\n         const result = [];\n\n         let obj = this.datacollection?.datasource;\n         fieldValues.forEach((fId) => {\n            if (!fId) return;\n\n            const field = obj?.fieldByID?.(fId);\n            if (!field) return;\n\n            result.push(field);\n            obj = field.datasourceLink;\n         });\n\n         return result;\n      }\n\n      // descriptionField() {\n      //    return this.valueField()?.datasourceLink?.fieldByID?.(\n      //       this.settings.columnDescription\n      //    );\n      // }\n   };\n}\n","const DC_OFFSET = 20;\nconst RECORD_LIMIT = 20;\nconst TEAM_CHART_MAX_DEPTH = 10; // prevent inifinite loop\nexport default function (ABViewComponent) {\n   return class ABViewOrgChartTeamsComponent extends ABViewComponent {\n      constructor(baseView, idBase, ids) {\n         super(\n            baseView,\n            idBase || `ABViewOrgChart_${baseView.id}`,\n            Object.assign(\n               {\n                  chartView: \"\",\n                  chartContent: \"\",\n                  chartHeader: \"\",\n                  dataPanel: \"\",\n                  dataPanelButton: \"\",\n                  dataPanelPopup: \"\",\n                  filterButton: \"\",\n                  filterPopup: \"\",\n                  filterForm: \"\",\n                  contentForm: \"\",\n                  contentFormData: \"\",\n                  teamForm: \"\",\n                  teamFormCode: \"\",\n                  teamFormPopup: \"\",\n                  teamFormStrategy: \"\",\n                  teamFormSubmit: \"\",\n                  teamFormTitle: \"\",\n               },\n               ids\n            )\n         );\n\n         // Private parameters\n         this._resources = [\n            import(\n               /* webpackPrefetch: true */\n               \"./js/orgchart-webcomponents.js\"\n            ),\n            import(\n               /* webpackPrefetch: true */\n               \"./styles/orgchart-webcomponents.css\"\n            ),\n            import(\n               /* webpackPrefetch: true */\n               \"./styles/team-widget.css\"\n            ),\n         ];\n         this._resolveInit = null;\n         this._promiseInit = new Promise((resolve) => {\n            this._resolveInit = resolve;\n         });\n         this.__orgchart = null;\n         this.__filters = {\n            inactive: 0,\n         };\n         this._OrgChart = null;\n         this._promisePageData = null;\n         this._contentDC = null;\n         this._contentGroupDC = null;\n         this._contentDisplayDCs = [];\n         this._dataPanelDCs = [];\n         this._entityDC = null;\n         this._strategyCodeDC = null;\n         this._subStrategyDC = null;\n         this._teamStrategyDC = null;\n         this._chartData = null;\n         this._strategyCodeOpts = [];\n         this._strategyOpts = [];\n         this._fnContentDragEnd = (event) => {\n            // event.target.style.opacity = \"1\";\n         };\n         this._fnContentDragOver = (event) => {\n            event.preventDefault();\n            event.stopPropagation();\n         };\n         this._fnContentDragStart = (event) => {\n            event.stopPropagation();\n            const $eventTarget = event.target;\n            const dataset = $eventTarget.dataset;\n            const dataTransfer = event.dataTransfer;\n            const data = {};\n            switch ($eventTarget.className) {\n               case \"webix_list_item\":\n                  data.pk = dataset.pk;\n                  data.contentLinkedFieldID = dataset.contentLinkedFieldId;\n                  break;\n               default:\n                  data.source = dataset.source;\n                  break;\n            }\n            dataTransfer.setData(\"text/plain\", JSON.stringify(data));\n            // $eventTarget.style.opacity = \"0.5\";\n         };\n         this._fnContentDrop = async (event) => {\n            const dataTransfer = event.dataTransfer;\n            if (dataTransfer.getData(\"isnode\") == 1) return;\n            event.stopPropagation();\n            this.busy();\n            const settings = this.settings;\n            const dropContentToCreate = settings.dropContentToCreate === 1;\n            const teamObj = this.datacollection.datasource;\n            const teamObjPK = teamObj.PK();\n            const contentFieldLink = teamObj.fieldByID(\n               settings.contentField\n            ).fieldLink;\n            const contentObj = contentFieldLink.object;\n            const contentDateStartFieldColumnName = contentObj.fieldByID(\n               settings.contentFieldDateStart\n            ).columnName;\n            const contentDateEndFieldColumnName = contentObj.fieldByID(\n               settings.contentFieldDateEnd\n            ).columnName;\n            const contentGroupByField = contentObj.fieldByID(\n               settings.contentGroupByField\n            );\n            const contentGroupByFieldColumnName =\n               contentGroupByField.columnName;\n            const contentFieldLinkColumnName = contentFieldLink.columnName;\n            const contentModel = contentObj.model();\n            const $group = event.currentTarget;\n            const $content = $group.parentElement;\n            const newGroupDataPK = $group.dataset.pk;\n            const newTeamDataPK = JSON.parse(\n               $content.parentElement.dataset.source\n            )._rawData[teamObjPK];\n            let {\n               source: updatedData,\n               pk: dataPK,\n               contentLinkedFieldID,\n            } = JSON.parse(dataTransfer.getData(\"text/plain\"));\n            const draggedNodes = [];\n            let isRefreshed = true;\n            try {\n               if (!updatedData) {\n                  // This is a drop from Employee list (new assignment)\n                  const contentLinkedFieldColumnName =\n                     contentObj.fieldByID(contentLinkedFieldID).columnName;\n                  const pendingPromises = [];\n                  const newDate = new Date();\n\n                  // Employee can have multiple assignments but not the same team, so don't close\n                  // existing\n                  const $contentRecords =\n                     $content.getElementsByClassName(\"team-group-record\");\n                  let isUpdated = false;\n                  for (const $contentRecord of $contentRecords) {\n                     const contentData = JSON.parse(\n                        $contentRecord.dataset.source\n                     );\n                     if (contentData[contentLinkedFieldColumnName] == dataPK) {\n                        this._setUpdatedBy(contentObj, contentData);\n                        if (!isUpdated) {\n                           if (\n                              contentData[contentGroupByFieldColumnName] ==\n                              newGroupDataPK\n                           ) {\n                              isRefreshed = false;\n                              isUpdated = true;\n                              continue;\n                           } else if (\n                              this._isLessThanDay(\n                                 new Date(\n                                    contentData[contentDateStartFieldColumnName]\n                                 )\n                              )\n                           ) {\n                              contentData[contentGroupByFieldColumnName] =\n                                 this._parseDataPK(newGroupDataPK);\n                              pendingPromises.push(\n                                 contentModel.update(\n                                    contentData.id,\n                                    this._parseFormValueByType(\n                                       contentObj,\n                                       contentData,\n                                       contentData\n                                    )\n                                 )\n                              );\n                              draggedNodes.push($contentRecord);\n                              isRefreshed = true;\n                              isUpdated = true;\n                              continue;\n                           }\n                        }\n                        contentData[contentDateEndFieldColumnName] = newDate;\n                        pendingPromises.push(\n                           contentModel.update(\n                              contentData.id,\n                              this._parseFormValueByType(\n                                 contentObj,\n                                 contentData,\n                                 contentData\n                              )\n                           )\n                        );\n                        draggedNodes.push($contentRecord);\n                        isRefreshed = true;\n                     }\n                  }\n                  if (!isUpdated) {\n                     updatedData = {};\n                     updatedData[contentDateStartFieldColumnName] = newDate;\n                     updatedData[contentLinkedFieldColumnName] =\n                        this._parseDataPK(dataPK);\n                     updatedData[contentFieldLinkColumnName] =\n                        this._parseDataPK(newTeamDataPK);\n                     updatedData[contentGroupByFieldColumnName] =\n                        this._parseDataPK(newGroupDataPK);\n                     const entityDC = this._entityDC;\n                     if (entityDC) {\n                        const entityLink = entityDC.datasource.connectFields(\n                           (f) => f.settings.linkObject === contentObj.id\n                        )[0].id;\n                        const entityCol =\n                           this.AB.definitionByID(entityLink).columnName;\n                        updatedData[entityCol] = this._parseDataPK(\n                           entityDC.getCursor()\n                        );\n                     }\n                     this._setUpdatedBy(contentObj, updatedData);\n                     pendingPromises.push(\n                        (async () => {\n                           const $draggedNode =\n                              await this._createUIContentRecord(\n                                 updatedData,\n                                 \"grey\"\n                              );\n                           $group\n                              .querySelector(\".team-group-content\")\n                              .appendChild($draggedNode);\n                           draggedNodes.push($draggedNode);\n                        })(),\n                        contentModel.create(\n                           this._parseFormValueByType(\n                              contentObj,\n                              updatedData,\n                              updatedData\n                           )\n                        )\n                     );\n                  }\n                  updatedData = (await Promise.all(pendingPromises))[\n                     pendingPromises.length - 1\n                  ];\n               } else {\n                  updatedData = JSON.parse(updatedData);\n                  const $contentRecords =\n                     $content.getElementsByClassName(\"team-group-record\");\n                  const dataPanelDCs = this._dataPanelDCs;\n                  for (const dataPanelDC of dataPanelDCs) {\n                     const dataPanelLinkedFieldColumnName =\n                        dataPanelDC.datasource.connectFields(\n                           (connectField) =>\n                              connectField.datasourceLink === contentObj\n                        )[0].columnName;\n                     for (const $contentRecord of $contentRecords) {\n                        const contentRecord = JSON.parse(\n                           $contentRecord.dataset.source\n                        );\n                        if (\n                           (updatedData.id != contentRecord.id &&\n                              contentRecord[dataPanelLinkedFieldColumnName] ==\n                                 updatedData[dataPanelLinkedFieldColumnName]) ||\n                           (updatedData.id == contentRecord.id &&\n                              updatedData[contentGroupByFieldColumnName] ==\n                                 $group.dataset.pk)\n                        ) {\n                           this.ready();\n                           return;\n                        }\n                     }\n                  }\n\n                  // This is move form another team node\n                  // Move the child node to the target\n                  const $draggedNode = document.querySelector(\n                     `#${this.contentNodeID(updatedData.id)}`\n                  );\n                  $draggedNode.parentNode.removeChild($draggedNode);\n                  $group\n                     .querySelector(\".team-group-content\")\n                     .appendChild($draggedNode);\n                  draggedNodes.push($draggedNode);\n                  delete updatedData[\"created_at\"];\n                  delete updatedData[\"updated_at\"];\n                  delete updatedData[\"properties\"];\n                  this._setUpdatedBy(contentObj, updatedData);\n                  if (\n                     !dropContentToCreate ||\n                     (updatedData[contentFieldLinkColumnName] ==\n                        newTeamDataPK &&\n                        this._isLessThanDay(\n                           new Date(\n                              updatedData[contentDateStartFieldColumnName]\n                           )\n                        ))\n                  ) {\n                     updatedData[contentFieldLinkColumnName] = newTeamDataPK;\n                     updatedData[contentGroupByFieldColumnName] =\n                        newGroupDataPK;\n                     updatedData = await contentModel.update(\n                        updatedData.id,\n                        this._parseFormValueByType(\n                           contentObj,\n                           updatedData,\n                           updatedData\n                        )\n                     );\n                  } else {\n                     const pendingPromises = [];\n\n                     // TODO (Guy): Force update Date End with a current date.\n                     updatedData[contentDateEndFieldColumnName] = new Date();\n                     pendingPromises.push(\n                        contentModel.update(\n                           updatedData.id,\n                           this._parseFormValueByType(\n                              contentObj,\n                              updatedData,\n                              updatedData\n                           )\n                        )\n                     );\n                     updatedData[contentDateStartFieldColumnName] =\n                        updatedData[contentDateEndFieldColumnName];\n                     delete updatedData[\"id\"];\n                     delete updatedData[\"uuid\"];\n                     delete updatedData[contentDateEndFieldColumnName];\n                     updatedData[contentFieldLinkColumnName] = newTeamDataPK;\n                     updatedData[contentGroupByFieldColumnName] =\n                        newGroupDataPK;\n                     pendingPromises.push(\n                        contentModel.create(\n                           this._parseFormValueByType(\n                              contentObj,\n                              updatedData,\n                              updatedData\n                           )\n                        )\n                     );\n                     updatedData = (await Promise.all(pendingPromises))[\n                        pendingPromises.length - 1\n                     ];\n                  }\n               }\n            } catch (err) {\n               // TODO (Guy): The update data error.\n               console.log(err);\n            }\n            if (isRefreshed) {\n               draggedNodes.forEach(($draggedNode) => {\n                  $draggedNode.remove();\n               });\n               await this.refresh();\n            }\n            this.ready();\n         };\n         this._fnCreateNode = ($node, data) => {\n            // remove built in icon\n            $node.querySelector(\".title > i\")?.remove();\n\n            // customize\n            const $content = $node.children.item(1);\n            $content.innerHTML = \"\";\n            const contentGroupDC = this._contentGroupDC;\n            const groupObjPKColumeName = contentGroupDC.datasource.PK();\n            const contentGroupOptions = contentGroupDC.getData();\n            const contentGroupOptionsLength = contentGroupOptions.length;\n            if (data.filteredOut || contentGroupOptionsLength === 0) {\n               // This node doesn't pass the filter, but it's children do so\n               // simplify the display.\n               $content.style.display = \"none\";\n               return;\n            }\n            const settings = this.settings;\n            const $nodeSpacer = element(\"div\", \"spacer\");\n            $content.appendChild($nodeSpacer);\n            const nodeSpacerStyle = $nodeSpacer.style;\n            nodeSpacerStyle.backgroundColor = \"\";\n            for (const group of contentGroupOptions) {\n               const $group = element(\"div\", \"team-group-section\");\n               $content.appendChild($group);\n               const groupStyle = $group.style;\n               groupStyle[\"minHeight\"] = `${325 / contentGroupOptionsLength}px`;\n\n               // TODO: should this be a config option\n               const groupColor =\n                  group.name === \"Leader\" ? \"#003366\" : \"#DDDDDD\";\n               groupStyle[\"backgroundColor\"] = groupColor;\n               nodeSpacerStyle.backgroundColor === \"\" &&\n                  (nodeSpacerStyle.backgroundColor = groupColor);\n\n               // TODO: should this be a config option\n               const groupText = group.name;\n               $group.setAttribute(\"data-pk\", group[groupObjPKColumeName]);\n               if (settings.showGroupTitle === 1) {\n                  const $groupTitle = element(\"div\", \"team-group-title\");\n                  const groupTitleStyle = $groupTitle.style;\n                  groupTitleStyle[\"backgroundColor\"] = groupColor;\n                  $groupTitle.appendChild(document.createTextNode(groupText));\n                  $group.appendChild($groupTitle);\n               }\n               const $groupContent = element(\"div\", \"team-group-content\");\n               $group.appendChild($groupContent);\n               if (settings.draggable === 1) {\n                  $group.addEventListener(\"dragover\", this._fnContentDragOver);\n                  $group.addEventListener(\"drop\", this._fnContentDrop);\n               }\n            }\n            const $buttons = element(\"div\", \"team-button-section\");\n            $content.appendChild($buttons);\n            const $editButton = element(\"div\", \"team-button\");\n            $editButton.append(element(\"i\", \"fa fa-pencil\"));\n            const $addButton = element(\"div\", \"team-button\");\n            $addButton.append(element(\"i\", \"fa fa-plus\"));\n            $buttons.append($editButton, $addButton);\n            const dataID = this.teamRecordID(data.id);\n            const values = this.datacollection.getData(\n               (e) => e.id == dataID\n            )[0];\n            $addButton.onclick = () => {\n               this.teamForm(\"Add\", { __parentID: dataID });\n            };\n            $editButton.onclick = () => this.teamForm(\"Edit\", values);\n            $node.querySelector(\".title\").ondblclick = () =>\n               this.teamForm(\"Edit\", values);\n            if (this.__filters.inactive == 1) {\n               const isInactive = data.isInactive;\n               const activeClass = isInactive ? \"is-inactive\" : \"is-active\";\n               const $active = element(\"div\", `team-button ${activeClass}`);\n               const $span = element(\"span\", \"active-text\");\n               $span.innerHTML = isInactive ? \"INACTIVE\" : \"ACTIVE\";\n               $active.append($span);\n               $buttons.append($active);\n            }\n            (async () => {\n               if (!(await this.teamCanDelete(values))) return;\n               const $deleteButton = element(\"div\", \"team-button\");\n               $deleteButton.append(element(\"i\", \"fa fa-trash\"));\n               $deleteButton.onclick = () => this.teamDelete(values);\n               $buttons.append($deleteButton);\n            })();\n         };\n         this._fnNodeDrop = async (event) => {\n            this.busy();\n            const eventDetail = event.detail;\n            const dragedRecord = JSON.parse(\n               eventDetail.draggedNode.dataset.source\n            )._rawData;\n            const dc = this.datacollection;\n            dragedRecord[\n               // Parent node definition.\n               this.AB.definitionByID(\n                  this.AB.definitionByID(this.settings.teamLink).settings\n                     .linkColumn\n               ).columnName\n            ] = JSON.parse(eventDetail.dropZone.dataset.source)._rawData.id;\n            this._setUpdatedBy(dc.datasource, dragedRecord);\n            try {\n               await dc.model.update(dragedRecord.id, dragedRecord);\n            } catch (err) {\n               // TODO (Guy): The update data error.\n               console.error(err);\n            }\n            await this.refresh();\n            this.ready();\n         };\n         this._fnPageContentCallback = async (\n            contentRecords,\n            isContentDone,\n            contentDC,\n            callback\n         ) => {\n            for (const contentRecord of contentRecords)\n               this._addContentRecordToGroup(contentRecord);\n\n            // TODO (Guy): Hardcode data panel DCs for Employee.\n            $$(this.ids.dataPanel)\n               ?.getChildViews()[1]\n               .getChildViews()\n               .forEach(($childView) => $childView.callEvent(\"onViewShow\"));\n            if (isContentDone) callback && (await callback());\n            else\n               this._callPagingEvent(\n                  contentDC,\n                  this._fnPageContentCallback,\n                  callback\n               );\n         };\n         this._fnPageContentDisplayCallback = async (\n            contentDisplayRecords,\n            isContentDisplayDone,\n            contentDisplayDC,\n            callback\n         ) => {\n            if (isContentDisplayDone) {\n               const contentDC = this._contentDC;\n               await this._waitDCReady(contentDC);\n               this._fnPageContentCallback(\n                  contentDC.getData(),\n                  true,\n                  contentDC,\n                  callback\n               );\n            } else\n               this._callPagingEvent(\n                  contentDisplayDC,\n                  this._fnPageContentDisplayCallback,\n                  callback\n               );\n         };\n         this._fnPageData = async (dc, mainCallback, callback) => {\n            await this._waitDCReady(dc);\n            let records = dc.getData();\n            try {\n               if (\n                  records.length < DC_OFFSET ||\n                  (records.length - DC_OFFSET) % RECORD_LIMIT > 0\n               )\n                  throw null;\n               try {\n                  await dc.loadData(\n                     RECORD_LIMIT * parseInt(records.length / RECORD_LIMIT),\n                     RECORD_LIMIT\n                  );\n               } catch {}\n               if (dc.getData().length === records.length) throw null;\n               records = dc.getData();\n               if ((records.length - DC_OFFSET) % RECORD_LIMIT > 0) throw null;\n               mainCallback &&\n                  (await mainCallback(records, false, dc, callback));\n            } catch {\n               mainCallback &&\n                  (await mainCallback(records, true, dc, callback));\n            }\n         };\n         this._fnPageTeamCallback = async (\n            teamRecords,\n            isTeamDone,\n            teamDC,\n            callback\n         ) => {\n            const teamObjPK = teamDC.datasource.PK();\n            for (const teamRecord of teamRecords) {\n               if (\n                  document.getElementById(\n                     this.teamNodeID(teamRecord[teamObjPK])\n                  ) == null\n               )\n                  await this.teamAddChild(teamRecord, false);\n               else await this.teamEdit(teamRecord, false);\n            }\n            if (isTeamDone) {\n               const contentDC = this._contentDC;\n               await Promise.all([\n                  this.pullData(),\n                  this._waitDCReady(contentDC),\n               ]);\n               this._fnPageContentCallback(\n                  contentDC.getData(),\n                  true,\n                  contentDC,\n                  callback\n               );\n            } else\n               this._callPagingEvent(\n                  this.datacollection,\n                  this._fnPageTeamCallback,\n                  callback\n               );\n         };\n         this._fnRefresh = async () => {\n            this.busy();\n            await this._promisePageData;\n            const entityDC = this._entityDC;\n            const teamDC = this.datacollection;\n            const contentDC = this._contentDC;\n            const contentGroupDC = this._contentGroupDC;\n            await Promise.all([\n               teamDC?.datacollectionLink != null &&\n                  this._waitDCPending(teamDC),\n               contentDC?.datacollectionLink != null &&\n                  this._waitDCPending(contentDC),\n               contentGroupDC?.datacollectionLink != null &&\n                  this._waitDCPending(contentGroupDC),\n               ...this._contentDisplayDCs\n                  .filter(\n                     (contentDisplayDC) =>\n                        contentDisplayDC !== entityDC &&\n                        contentDisplayDC !== teamDC &&\n                        contentDisplayDC !== contentDC &&\n                        contentDisplayDC !== contentGroupDC\n                  )\n                  .map(\n                     (contentDisplayDC) =>\n                        contentDisplayDC.datacollectionLink != null &&\n                        this._waitDCPending(contentDisplayDC)\n                  ),\n            ]);\n            this.__orgchart?.remove();\n            this.__orgchart = null;\n            await this.refresh();\n            this.ready();\n         };\n         this._fnShowContentForm = (event) => {\n            const contentDC = this._contentDC;\n            const contentObj = contentDC.datasource;\n            const contentModel = contentDC.model;\n            const settings = this.settings;\n            const editContentFieldsToCreateNew =\n               settings.editContentFieldsToCreateNew;\n            const contentDateStartField = this.AB.definitionByID(\n               settings.contentFieldDateStart\n            );\n            const contentDateStartFieldColumnName = this.AB.definitionByID(\n               settings.contentFieldDateStart\n            )?.columnName;\n            const contentDateEndFieldColumnName = this.AB.definitionByID(\n               settings.contentFieldDateEnd\n            )?.columnName;\n            const contentDataRecord = JSON.parse(\n               event.currentTarget.dataset.source ||\n                  event.currentTarget.parentElement.dataset.source\n            );\n            const rules = {};\n            const labelWidth = 200;\n            const ids = this.ids;\n            const contentFormElements = settings.setEditableContentFields.map(\n               (fieldID) => {\n                  const field = contentObj.fields(\n                     (field) => field.id === fieldID\n                  )[0];\n                  if (field == null)\n                     return {\n                        view: \"label\",\n                        label: this.label(\"Missing Field\"),\n                        labelWidth,\n                     };\n                  const fieldKey = field.key;\n                  const fieldName = field.columnName;\n\n                  // TODO (Guy): Add validators.\n                  let invalidMessage = \"\";\n                  switch (fieldName) {\n                     case contentDateEndFieldColumnName:\n                        invalidMessage = `The ${field.label} must be later than the ${contentDateStartFieldColumnName}.`;\n                        rules[fieldName] = (value) =>\n                           value >\n                              $$(ids.contentFormData).getValues()[\n                                 contentDateStartFieldColumnName\n                              ] ||\n                           value === \"\" ||\n                           value == null;\n                        break;\n                     default:\n                        rules[fieldName] = () => true;\n                        break;\n                  }\n                  const fieldLabel = field.label;\n                  const settings = field.settings;\n                  switch (fieldKey) {\n                     case \"boolean\":\n                        return {\n                           view: \"checkbox\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           invalidMessage,\n                        };\n                     case \"number\":\n                        return {\n                           view: \"counter\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           type: \"number\",\n                           invalidMessage,\n                        };\n                     case \"list\":\n                        return {\n                           view:\n                              (settings.isMultiple === 1 && \"muticombo\") ||\n                              \"combo\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           options: settings.options.map((option) => ({\n                              id: option.id,\n                              value: option.text,\n                           })),\n                           invalidMessage,\n                        };\n                     case \"user\":\n                     case \"connectObject\":\n                        const abWebix = this.AB.Webix;\n                        const fieldLinkObj = field.datasourceLink;\n\n                        // TODO (Guy): Hardcode for the employee field\n                        if (fieldLabel === \"NS Employee Record\")\n                           return {\n                              view: \"text\",\n                              label: \"Name\",\n                              disabled: true,\n                              labelWidth,\n                              invalidMessage,\n                              on: {\n                                 async onViewShow() {\n                                    abWebix.extend(this, abWebix.ProgressBar);\n                                    this.showProgress({ type: \"icon\" });\n                                    try {\n                                       this.setValue(\n                                          fieldLinkObj.displayData(\n                                             (\n                                                await fieldLinkObj\n                                                   .model()\n                                                   .findAll({\n                                                      where: {\n                                                         glue: \"and\",\n                                                         rules: [\n                                                            {\n                                                               key: fieldLinkObj.PK(),\n                                                               rule: \"equals\",\n                                                               value: contentDataRecord[\n                                                                  fieldName\n                                                               ],\n                                                            },\n                                                         ],\n                                                      },\n                                                   })\n                                             ).data[0]\n                                          )\n                                       );\n                                       this.hideProgress();\n                                    } catch {\n                                       // Close popup before response or possily response fail\n                                    }\n                                 },\n                              },\n                           };\n                        const onViewShow = async function () {\n                           abWebix.extend(this, abWebix.ProgressBar);\n                           this.showProgress({ type: \"icon\" });\n                           try {\n                              this.define(\n                                 \"options\",\n                                 (\n                                    await fieldLinkObj.model().findAll()\n                                 ).data.map((e) => ({\n                                    id: e.id,\n                                    value: fieldLinkObj.displayData(e),\n                                 }))\n                              );\n                              this.refresh();\n                              this.enable();\n                              this.hideProgress();\n                           } catch {\n                              // Close popup before response or possily response fail\n                           }\n                        };\n                        return field.linkType() === \"one\"\n                           ? {\n                                view: \"combo\",\n                                name: fieldName,\n                                label: fieldLabel,\n                                disabled: true,\n                                labelWidth,\n                                invalidMessage,\n                                options: [],\n                                on: {\n                                   onViewShow,\n                                },\n                             }\n                           : {\n                                view: \"multicombo\",\n                                name: fieldName,\n                                label: fieldLabel,\n                                labelWidth,\n                                stringResult: false,\n                                labelAlign: \"left\",\n                                invalidMessage,\n                                options: [],\n                                on: {\n                                   onViewShow,\n                                },\n                             };\n                     case \"date\":\n                     case \"datetime\":\n                        return {\n                           view: \"datepicker\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           stringResult: true,\n                           labelWidth,\n                           invalidMessage,\n                           timepicker: fieldKey === \"datetime\",\n                        };\n                     case \"file\":\n                     case \"image\":\n                        // TODO (Guy): Add logic\n                        return {\n                           // view: \"\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           invalidMessage,\n                        };\n                     // case \"json\":\n                     // case \"LongText\":\n                     // case \"string\":\n                     // case \"email\":\n                     default:\n                        return {\n                           view: \"text\",\n                           name: fieldName,\n                           label: fieldLabel,\n                           labelWidth,\n                           invalidMessage,\n                        };\n                  }\n               }\n            );\n            const Webix = AB.Webix;\n            contentFormElements.push({\n               view: \"button\",\n               value: this.label(\"Save\"),\n               css: \"webix_primary\",\n               click: async () => {\n                  const $contentFormData = $$(ids.contentFormData);\n                  if (!$contentFormData.validate()) return;\n                  const newFormData = this._parseFormValueByType(\n                     contentObj,\n                     contentDataRecord,\n                     $contentFormData.getValues()\n                  );\n                  const $contentForm = $$(ids.contentForm);\n                  $contentForm.blockEvent();\n                  $contentForm.$view.remove();\n                  $contentForm.destructor();\n                  if (!this._checkDataIsChanged(contentDataRecord, newFormData))\n                     return;\n                  const teamDC = this.datacollection;\n                  const contentDC = this._contentDC;\n                  const dataID = newFormData.id;\n                  const $contentNode = document.getElementById(\n                     this.contentNodeID(dataID)\n                  );\n                  delete newFormData[\"created_at\"];\n                  delete newFormData[\"updated_at\"];\n                  delete newFormData[\"properties\"];\n                  this._setUpdatedBy(contentObj, newFormData);\n                  if (\n                     !this._isLessThanDay(\n                        new Date(\n                           contentDataRecord[contentDateStartFieldColumnName]\n                        )\n                     )\n                  ) {\n                     let isCreated = false;\n                     for (const editContentFieldToCreateNew of editContentFieldsToCreateNew) {\n                        const editContentFieldToCreateNewColumnName =\n                           contentObj.fieldByID(\n                              editContentFieldToCreateNew\n                           )?.columnName;\n                        if (\n                           !isCreated &&\n                           contentDataRecord[\n                              editContentFieldToCreateNewColumnName\n                           ] != null &&\n                           contentDataRecord[\n                              editContentFieldToCreateNewColumnName\n                           ] !== \"\" &&\n                           JSON.stringify(\n                              newFormData[\n                                 editContentFieldToCreateNewColumnName\n                              ] ?? \"\"\n                           ) !==\n                              JSON.stringify(\n                                 contentDataRecord[\n                                    editContentFieldToCreateNewColumnName\n                                 ]\n                              )\n                        ) {\n                           isCreated = true;\n                           break;\n                        }\n                     }\n                     if (isCreated) {\n                        Webix.confirm({\n                           title: this.label(\n                              \"Caution: Creating New Assignment\"\n                           ),\n                           ok: this.label(\"Continue with new assignment\"),\n                           cancel: this.label(\"Cancel\"),\n                           text: this.label(\n                              \"When you change the Role type or Job title, then the current assignment is closed with the current date and a new assignment is created for this team.\"\n                           ),\n                           css: \"orgchart-teams-edit-content-confirm-popup\",\n                        }).then(async () => {\n                           this.busy();\n                           const pendingPromises = [];\n                           const oldData = {};\n\n                           oldData[contentDateEndFieldColumnName] = new Date();\n                           this._setUpdatedBy(contentObj, oldData);\n                           pendingPromises.push(\n                              contentModel.update(dataID, oldData)\n                           );\n                           newFormData[contentDateStartFieldColumnName] =\n                              oldData[contentDateEndFieldColumnName];\n                           delete newFormData[\"id\"];\n                           delete newFormData[\"uuid\"];\n                           delete newFormData[contentDateEndFieldColumnName];\n                           pendingPromises.push(\n                              contentModel.create(newFormData)\n                           );\n                           try {\n                              await Promise.all(pendingPromises);\n                           } catch (err) {\n                              // TODO (Guy): The update data error.\n                              console.error(err);\n                           }\n                           await this.refresh();\n                           $contentNode.remove();\n                           this.ready();\n                        });\n                        return;\n                     }\n                  }\n                  if (\n                     new Date(newFormData[contentDateEndFieldColumnName]) <=\n                     new Date()\n                  ) {\n                     Webix.confirm({\n                        title: this.label(\"Caution: Ending Current Assignment\"),\n                        ok: this.label(\"Continue with ending this assignment\"),\n                        cancel: this.label(\"Cancel\"),\n                        text: [\n                           this.label(\n                              \"When you provide an End Date, the current assignment is ended when the date = the current date and the assignment will no longer show on this team.\"\n                           ),\n                           this.label(\n                              \"This will put the team member back into the unassigned list box if they have no other active assignments.\"\n                           ),\n                        ].join(\"\\n\"),\n                        css: \"orgchart-teams-edit-content-confirm-popup\",\n                     }).then(async () => {\n                        this.busy();\n                        try {\n                           await contentModel.update(dataID, newFormData);\n                        } catch (err) {\n                           // TODO (Guy): The update data error.\n                           console.error(err);\n                        }\n                        await this.refresh();\n                        $contentNode.remove();\n                        this.ready();\n                     });\n                     return;\n                  }\n                  this.busy();\n                  try {\n                     await contentModel.update(dataID, newFormData);\n                  } catch (err) {\n                     // TODO (Guy): The update data error.\n                     console.error(err);\n                  }\n                  await this.refresh();\n                  $contentNode.remove();\n                  this.ready();\n               },\n            });\n            Webix.ui({\n               view: \"popup\",\n               id: ids.contentForm,\n               close: true,\n               position: \"center\",\n               css: { \"border-radius\": \"10px\" },\n               body: {\n                  width: 600,\n                  rows: [\n                     {\n                        view: \"toolbar\",\n                        css: \"webix_dark\",\n                        cols: [\n                           { width: 5 },\n                           {\n                              view: \"label\",\n                              label: `${this.label(\"Edit\")} ${\n                                 contentObj.label\n                              }`,\n                              align: \"left\",\n                           },\n                           {\n                              view: \"icon\",\n                              icon: \"fa fa-times\",\n                              align: \"right\",\n                              width: 60,\n                              click: () => {\n                                 const $contentForm = $$(ids.contentForm);\n                                 $contentForm.blockEvent();\n                                 $contentForm.$view.remove();\n                                 $contentForm.destructor();\n                              },\n                           },\n                        ],\n                     },\n                     {\n                        view: \"form\",\n                        id: ids.contentFormData,\n                        hidden: true,\n                        elements: contentFormElements,\n                        rules,\n                     },\n                  ],\n               },\n               on: {\n                  onHide() {\n                     this.$view.remove();\n                     this.destructor();\n                  },\n               },\n            }).show();\n            const $contentFormData = $$(ids.contentFormData);\n            $contentFormData.setValues(\n               this._convertToFormValueByType(\n                  structuredClone(contentDataRecord)\n               )\n            );\n            $contentFormData.show();\n         };\n         this._fnShowFilterPopup = async (event) => {\n            const contentDisplayedFieldFilters =\n               this.settings.contentDisplayedFieldFilters;\n            const ids = this.ids;\n            let $popup = $$(ids.filterPopup);\n            if (!$popup) {\n               const self = this;\n               $popup = webix.ui({\n                  view: \"popup\",\n                  css: \"filter-popup\",\n                  id: ids.filterPopup,\n                  body: {\n                     rows: [\n                        {\n                           view: \"form\",\n                           borderless: true,\n                           hidden: true,\n                           id: ids.filterForm,\n                           elements: [\n                              {\n                                 view: \"text\",\n                                 label: this.label(\"Team Name\"),\n                                 labelWidth: 100,\n                                 name: \"teamName\",\n                                 clear: true,\n                              },\n                              {\n                                 view: \"combo\",\n                                 label: this.label(\"Strategy\"),\n                                 labelWidth: 100,\n                                 options: this._strategyCodeOpts,\n                                 name: \"strategy\",\n                                 clear: \"replace\",\n                              },\n                              {\n                                 view: \"checkbox\",\n                                 name: \"inactive\",\n                                 labelRight: this.label(\"Show Inactive Teams\"),\n                                 labelWidth: 0,\n                              },\n                              ...(() => {\n                                 const contentDisplayedFieldFilterViews = [];\n                                 for (const contentDisplayedFieldFilterKey in contentDisplayedFieldFilters) {\n                                    const [, objID, fieldID, isActive] =\n                                       contentDisplayedFieldFilterKey.split(\n                                          \".\"\n                                       );\n                                    if (isActive == 1)\n                                       switch (fieldID) {\n                                          // TODO (Guy): Hardcode for the role type filter.\n                                          case \"96dc0d8d-7fb4-4bb1-8b80-a262aae41eed\":\n                                             const columnName =\n                                                this.AB.definitionByID(\n                                                   fieldID\n                                                ).columnName;\n                                             contentDisplayedFieldFilterViews.push(\n                                                {\n                                                   view: \"combo\",\n                                                   label: contentDisplayedFieldFilters[\n                                                      contentDisplayedFieldFilterKey\n                                                   ],\n                                                   labelWidth: 100,\n                                                   options: this._contentGroupDC\n                                                      .getData()\n                                                      .map(\n                                                         (\n                                                            contentGroupValue\n                                                         ) => ({\n                                                            id: contentGroupValue[\n                                                               columnName\n                                                            ],\n                                                            value: contentGroupValue[\n                                                               columnName\n                                                            ],\n                                                         })\n                                                      ),\n                                                   name: contentDisplayedFieldFilterKey,\n                                                   clear: \"replace\",\n                                                }\n                                             );\n                                             break;\n                                          default:\n                                             contentDisplayedFieldFilterViews.push(\n                                                {\n                                                   view: \"text\",\n                                                   label: contentDisplayedFieldFilters[\n                                                      contentDisplayedFieldFilterKey\n                                                   ],\n                                                   labelWidth: 100,\n                                                   name: contentDisplayedFieldFilterKey,\n                                                   clear: true,\n                                                }\n                                             );\n                                             break;\n                                       }\n                                 }\n                                 return contentDisplayedFieldFilterViews;\n                              })(),\n                              {\n                                 cols: [\n                                    {},\n                                    {\n                                       view: \"icon\",\n                                       icon: \"fa fa-check\",\n                                       css: \"filter-apply\",\n                                       click: () => this.filterApply(),\n                                    },\n                                 ],\n                              },\n                           ],\n                        },\n                     ],\n                  },\n                  on: {\n                     onShow() {\n                        $$(ids.filterForm).show();\n                     },\n                     onHide() {\n                        $$(ids.filterForm).hide();\n                     },\n                  },\n               });\n            }\n            $popup.show($$(ids.filterButton).$view);\n         };\n\n         // Generate strategy css\n         const css = [\n            \"org-chart .strategy-external .title{background:#989898 !important;}\",\n         ];\n         const colors = this.settings.strategyColors;\n         for (let key in colors) {\n            css.push(\n               `org-chart .strategy-${key} .title{background:${colors[key]} !important;}`\n            );\n         }\n         const style = document.createElement(\"style\");\n         style.innerHTML = css.join(\"\");\n         document.getElementsByTagName(\"head\")[0].appendChild(style);\n         this.on(\"pageData\", this._fnPageData);\n      }\n\n      _addContentRecordToGroup(contentRecord) {\n         const linkedContentFieldColumnName = this.AB.definitionByID(\n            this.AB.definitionByID(this.settings.contentField).settings\n               .linkColumn\n         ).columnName;\n         const $teamNode = document.getElementById(\n            this.teamNodeID(contentRecord[linkedContentFieldColumnName])\n         );\n         if ($teamNode == null) return;\n         const contentGroupDC = this._contentGroupDC;\n         const contentGroupDataPK =\n            contentRecord[\n               this.AB.definitionByID(this.settings.contentGroupByField)\n                  .columnName\n            ];\n         const contentGroupPKField = contentGroupDC.datasource.PK();\n         if (\n            contentGroupDC.getData(\n               (e) => e[contentGroupPKField] == contentGroupDataPK\n            )[0] == null\n         )\n            return;\n         const $groupSection = $teamNode.querySelector(\n            `.team-group-section[data-pk=\"${contentGroupDataPK}\"] > .team-group-content`\n         );\n         if ($groupSection == null) return;\n         (async () => {\n            await this._callAfterRender(async () => {\n               const contentNodeID = this.contentNodeID(contentRecord.id);\n               let $contentNode = document.getElementById(contentNodeID);\n               while ($contentNode != null) {\n                  $contentNode.remove();\n                  $contentNode = document.getElementById(contentNodeID);\n               }\n               $groupSection.appendChild(\n                  await this._createUIContentRecord(\n                     contentRecord,\n                     this.settings.strategyColors[\n                        $teamNode.classList.item(1).replace(\"strategy-\", \"\")\n                     ]\n                  )\n               );\n            });\n         })();\n      }\n\n      _convertToFormValueByType(contentRecord) {\n         const contentAllFields = this._contentDC.datasource.fields();\n         for (const field of contentAllFields) {\n            const columnName = field.columnName;\n            const value = contentRecord[columnName];\n            switch (field.key) {\n               case \"boolean\":\n                  if (value === true) contentRecord[columnName] = 1;\n                  else if (value === false) contentRecord[columnName] = 0;\n                  else {\n                     const parsedValue = parseInt(value);\n                     contentRecord[columnName] = isNaN(parsedValue)\n                        ? 0\n                        : parsedValue;\n                  }\n                  break;\n               case \"date\":\n               case \"datetime\":\n                  contentRecord[columnName] = new Date(value);\n                  break;\n               default:\n                  break;\n            }\n         }\n         return contentRecord;\n      }\n\n      _createCustomDCByObjID(objID, { loadAll = false, filter, linkedDC }) {\n         const settings = {\n            datasourceID: objID,\n            populate: false,\n            loadAll,\n            objectWorkspace: {},\n         };\n         if (linkedDC != null) {\n            const linkedObjID = linkedDC.datasource.id;\n            (settings.linkFieldID = this.AB.definitionByID(objID).fieldIDs.find(\n               (fieldID) =>\n                  this.AB.definitionByID(fieldID).settings.linkObject ===\n                  linkedObjID\n            )) && (settings.linkDatacollectionID = linkedDC.id);\n         }\n         if (filter) settings.objectWorkspace.filterConditions = filter;\n         const dc = this.AB.datacollectionNew({\n            id: `dc.${objID}`,\n            settings,\n         });\n         if (linkedDC)\n            dc.$dc.__prevLinkDcCursor = linkedDC.getCursor()?.id?.toString();\n         this._initDC(dc);\n         return dc;\n      }\n\n      async _createUIContentRecord(data, color) {\n         const $ui = element(\"div\", \"team-group-record\");\n         $ui.setAttribute(\"id\", this.contentNodeID(data.id));\n         $ui.setAttribute(\"data-source\", JSON.stringify(data));\n         $ui.style.borderColor = color;\n         $ui.addEventListener(\"dblclick\", this._fnShowContentForm);\n         if (this.settings.draggable === 1) {\n            $ui.setAttribute(\"draggable\", \"true\");\n            $ui.addEventListener(\"dragstart\", this._fnContentDragStart);\n            $ui.addEventListener(\"dragend\", this._fnContentDragEnd);\n         }\n\n         // TODO (Guy): Now we are hardcoding for each display\n         const hardcodedDisplays = [\n            element(\"div\", \"display-block\"),\n            element(\"div\", \"display-block\"),\n            element(\"div\", \"display-block display-block-right\"),\n         ];\n         const $hardcodedSpecialDisplay = element(\n            \"div\",\n            \"team-group-record-display\"\n         );\n         let currentDataRecords = [];\n         let currentField = null;\n         let currentDisplayIndex = 0;\n         const contentDC = this._contentDC;\n         const contentObjID = contentDC.datasource.id;\n         const contentDisplayedFields = this.settings.contentDisplayedFields;\n         const contentDisplayedFieldsKeys = Object.keys(contentDisplayedFields);\n         const contentDisplayDCs = this._contentDisplayDCs;\n         for (let j = 0; j < contentDisplayedFieldsKeys.length; j++) {\n            const displayedFieldKey = contentDisplayedFieldsKeys[j];\n            const [atDisplay, objID] = displayedFieldKey.split(\".\");\n            const displayedObj = AB.objectByID(objID);\n            const displayedFieldID = contentDisplayedFields[displayedFieldKey];\n            const displayedField = displayedObj.fieldByID(displayedFieldID);\n            const displayDC = contentDisplayDCs.find(\n               (contentDisplayDC) => contentDisplayDC.datasource.id === objID\n            );\n            switch (objID) {\n               case contentObjID:\n                  currentDataRecords = [data];\n                  break;\n               default:\n                  if (currentField == null) break;\n                  if (currentDataRecords.length > 0) {\n                     const currentFieldColumnName = currentField.columnName;\n                     const currentDataPKs = [];\n                     do {\n                        const currentFieldData =\n                           currentDataRecords.pop()[currentFieldColumnName];\n                        if (Array.isArray(currentFieldData)) {\n                           if (currentFieldData.length > 0)\n                              currentDataPKs.push(...currentFieldData);\n                        } else if (currentFieldData != null)\n                           currentDataPKs.push(currentFieldData);\n                     } while (currentDataRecords.length > 0);\n                     await this._waitDCReady(displayDC);\n                     currentDataRecords = displayDC.getData((r) => {\n                        return currentDataPKs.some((id) => id == r.id);\n                     });\n                  }\n                  break;\n            }\n            if (\n               contentDisplayedFieldsKeys[j + 1]?.split(\".\")[0] === atDisplay\n            ) {\n               currentField = displayedField;\n               continue;\n            }\n            const $currentDisplay = element(\"div\", \"team-group-record-display\");\n            const displayedFieldColumnName = displayedField.columnName;\n            // TODO (Guy): Now we are hardcoding for each display.\n            // $rowData.appendChild($currentDisplay);\n            switch (currentDisplayIndex) {\n               case 0:\n                  hardcodedDisplays[0].appendChild($currentDisplay);\n                  break;\n               case 1:\n                  let i = 0;\n                  while (\n                     currentDataRecords.length > 0 &&\n                     currentDataRecords[i] != null\n                  )\n                     if (\n                        currentDataRecords[i][displayedFieldColumnName] ==\n                           null ||\n                        currentDataRecords[i][displayedFieldColumnName] === \"\"\n                     )\n                        currentDataRecords.splice(i, 1);\n                     else i++;\n                  if (currentDataRecords.length === 0)\n                     hardcodedDisplays[2].style.display = \"none\";\n                  hardcodedDisplays[2].appendChild($currentDisplay);\n                  break;\n               case 2:\n                  hardcodedDisplays[1].appendChild($hardcodedSpecialDisplay);\n                  $hardcodedSpecialDisplay.appendChild($currentDisplay);\n                  break;\n               case 3:\n                  $hardcodedSpecialDisplay.appendChild($currentDisplay);\n                  break;\n               default:\n                  hardcodedDisplays[1].appendChild($currentDisplay);\n                  break;\n            }\n            currentDisplayIndex++;\n            const contentDisplayedFieldTypePrefix = `${displayedFieldKey}.${displayedFieldID}`;\n            const contentDisplayedFieldMappingDataObj =\n               JSON.parse(\n                  this.settings.contentDisplayedFieldMappingData?.[\n                     contentDisplayedFieldTypePrefix\n                  ] || null\n               ) || {};\n            if (\n               this.settings.contentDisplayedFieldTypes[\n                  `${contentDisplayedFieldTypePrefix}.0`\n               ] != null\n            )\n               $currentDisplay.style.display = \"none\";\n            switch (\n               this.settings.contentDisplayedFieldTypes[\n                  `${contentDisplayedFieldTypePrefix}.1`\n               ]\n            ) {\n               case \"icon\":\n                  // TODO (Guy): Add logic.\n                  break;\n               case \"image\":\n                  while (currentDataRecords.length > 0) {\n                     const currentDataRecordValue =\n                        currentDataRecords.pop()[displayedFieldColumnName];\n                     const $img = document.createElement(\"img\");\n                     $currentDisplay.appendChild($img);\n                     $img.setAttribute(\n                        \"src\",\n                        contentDisplayedFieldMappingDataObj[\n                           currentDataRecordValue\n                        ] ?? currentDataRecordValue\n                     );\n                  }\n                  break;\n               case \"svg\":\n                  while (currentDataRecords.length > 0) {\n                     const currentDataRecord = currentDataRecords.pop();\n                     const currentDataRecordID = currentDataRecord.id;\n                     const currentDataRecordValue =\n                        currentDataRecord[displayedFieldColumnName];\n                     const SVG_NS = \"http://www.w3.org/2000/svg\";\n                     const X_LINK_NS = \"http://www.w3.org/1999/xlink\";\n                     const $svg = document.createElementNS(SVG_NS, \"svg\");\n                     $currentDisplay.appendChild($svg);\n                     $svg.setAttribute(\"viewBox\", \"0 0 6 6\");\n                     $svg.setAttribute(\"fill\", \"none\");\n                     $svg.setAttribute(\"xmlns\", SVG_NS);\n                     $svg.setAttribute(\"xmlns:xlink\", X_LINK_NS);\n                     const $rect = document.createElementNS(SVG_NS, \"rect\");\n                     const $defs = document.createElementNS(SVG_NS, \"defs\");\n                     $svg.append($rect, $defs);\n                     $rect.setAttribute(\"width\", \"6\");\n                     $rect.setAttribute(\"height\", \"6\");\n                     const patternID = `display-svg.pattern.${currentDataRecordID}`;\n                     $rect.setAttribute(\"fill\", `url(#${patternID})`);\n                     const $pattern = document.createElementNS(\n                        SVG_NS,\n                        \"pattern\"\n                     );\n                     const $image = document.createElementNS(SVG_NS, \"image\");\n                     $defs.append($pattern, $image);\n                     $pattern.id = patternID;\n                     $pattern.setAttributeNS(\n                        null,\n                        \"patternContentUnits\",\n                        \"objectBoundingBox\"\n                     );\n                     $pattern.setAttribute(\"width\", \"1\");\n                     $pattern.setAttribute(\"height\", \"1\");\n                     const imageID = `display-svg.image.${currentDataRecordID}`;\n                     $image.id = imageID;\n                     $image.setAttribute(\"width\", \"512\");\n                     $image.setAttribute(\"height\", \"512\");\n                     $image.setAttributeNS(\n                        X_LINK_NS,\n                        \"xlink:href\",\n                        contentDisplayedFieldMappingDataObj[\n                           currentDataRecordValue\n                        ] ?? currentDataRecordValue\n                     );\n                     const $use = document.createElementNS(SVG_NS, \"use\");\n                     $pattern.appendChild($use);\n                     $use.setAttributeNS(\n                        X_LINK_NS,\n                        \"xlink:href\",\n                        `#${imageID}`\n                     );\n                     $use.setAttribute(\"transform\", \"scale(0.002)\");\n                  }\n                  break;\n               default:\n                  while (currentDataRecords.length > 0) {\n                     const currentDataRecordValue =\n                        currentDataRecords.pop()[displayedFieldColumnName];\n                     $currentDisplay.appendChild(\n                        document.createTextNode(\n                           contentDisplayedFieldMappingDataObj[\n                              currentDataRecordValue\n                           ] ?? currentDataRecordValue\n                        )\n                     );\n                  }\n\n                  // TODO (Guy): Hardcode limit text.\n                  if (currentDisplayIndex - 1 === 1)\n                     $currentDisplay.textContent =\n                        $currentDisplay.textContent.slice(0, 35);\n                  break;\n            }\n            currentField = null;\n         }\n\n         // TODO (Guy): Now we are hardcoding for each display.\n         const hardcodedDisplaysLength = hardcodedDisplays.length;\n         for (let i = 0; i < hardcodedDisplaysLength; i++) {\n            const $hardcodedDisplay = hardcodedDisplays[i];\n            $ui.appendChild($hardcodedDisplay);\n            const children = $hardcodedDisplay.children;\n            let isShown = false;\n            let j = 0;\n            let child, grandChildren, grandChildrenLength;\n            switch (i) {\n               case 1:\n                  child = children.item(j);\n                  grandChildren = child.children;\n                  grandChildrenLength = grandChildren.length;\n                  for (; j < grandChildrenLength; j++)\n                     if (grandChildren[j].style.display !== \"none\") {\n                        isShown = true;\n                        break;\n                     }\n                  if (isShown) continue;\n                  child.style.display = \"none\";\n                  j = 1;\n                  break;\n               default:\n                  break;\n            }\n            const childrenLength = children.length;\n            const hardcodedDisplayStyle = $hardcodedDisplay.style;\n            for (; j < childrenLength; j++)\n               if (children.item(j).style.display !== \"none\") {\n                  isShown = true;\n                  break;\n               }\n            !isShown && (hardcodedDisplayStyle.display = \"none\");\n         }\n         const $editIcon = element(\"div\", \"team-group-record-edit-icon\");\n         $editIcon.appendChild(element(\"i\", \"fa fa-pencil\"));\n         $editIcon.addEventListener(\"click\", this._fnShowContentForm);\n         $ui.appendChild($editIcon);\n         return $ui;\n      }\n\n      async _callAfterRender(callback, ...params) {\n         await new Promise((resolve, reject) => {\n            requestAnimationFrame(() => {\n               requestAnimationFrame(async () => {\n                  try {\n                     await callback(...params);\n                     resolve();\n                  } catch (err) {\n                     reject(err);\n                  }\n               });\n            });\n         });\n      }\n\n      _callPagingEvent(dc, callback, resolve) {\n         this.emit(\"pageData\", dc, callback, resolve);\n      }\n\n      _checkDataIsChanged(olaValues, newValues) {\n         // TODO (Guy): Check array in the future.\n         for (const key in newValues)\n            if (\n               JSON.stringify(newValues[key]) !== JSON.stringify(olaValues[key])\n            )\n               return true;\n         return false;\n      }\n\n      _getAllDCs({ areCoreDCsExcluded } = { areCoreDCsExcluded: false }) {\n         const entityDC = this._entityDC;\n         const teamDC = this.datacollection;\n         const contentDC = this._contentDC;\n         const contentGroupDC = this._contentGroupDC;\n         const strategyCodeDC = this._strategyCodeDC;\n         const subStrategyDC = this._subStrategyDC;\n         const teamStrategyDC = this._teamStrategyDC;\n         const results = [\n            entityDC,\n            teamDC,\n            contentDC,\n            contentGroupDC,\n            strategyCodeDC,\n            subStrategyDC,\n            teamStrategyDC,\n            ...this._contentDisplayDCs.filter((contentDisplayDC) => {\n               switch (contentDisplayDC) {\n                  case entityDC:\n                  case teamDC:\n                  case contentDC:\n                  case contentGroupDC:\n                  case strategyCodeDC:\n                  case subStrategyDC:\n                  case teamStrategyDC:\n                     return false;\n                  default:\n                     return true;\n               }\n            }),\n         ];\n         return (areCoreDCsExcluded && results.splice(7)) || results;\n      }\n\n      _getLinkedFieldColumnNameByConnectFieldID(connectFieldID) {\n         return this.AB.definitionByID(\n            this._getLinkedFieldIDByConnectFieldID(connectFieldID)\n         ).columnName;\n      }\n\n      _getLinkedFieldIDByConnectFieldID(connectFieldID) {\n         return this.AB.definitionByID(connectFieldID).settings.linkColumn;\n      }\n\n      _getLinkedObjIDByConnectFieldID(connectFieldID) {\n         return this.AB.definitionByID(connectFieldID).settings.linkObject;\n      }\n\n      _isLessThanDay(date) {\n         return Math.abs(new Date() - date) / 36e5 < 24;\n      }\n\n      _initDC(dc) {\n         dc.init();\n         if (dc.dataStatus === dc.dataStatusFlag.notInitial) dc.loadData();\n      }\n\n      _parseDataPK(dataPK) {\n         const intDataPk = parseInt(dataPK);\n         return (\n            ((isNaN(intDataPk) ||\n               intDataPk.toString().length !== dataPK.length) &&\n               dataPK) ||\n            intDataPk\n         );\n      }\n\n      _parseFormValueByType(obj, oldFormData, newFormData) {\n         const allFields = obj.fields();\n         for (const field of allFields) {\n            const fieldKey = field.key;\n            const columnName = field.columnName;\n            const oldValue = oldFormData?.[columnName];\n            const newValue = newFormData[columnName];\n            switch (fieldKey) {\n               case \"date\":\n                  if (oldValue === undefined && newValue == null)\n                     delete newFormData[columnName];\n                  else {\n                     newFormData[columnName] = new Date(newValue);\n                     if (isNaN(newFormData[columnName]))\n                        delete newFormData[columnName];\n                     else\n                        newFormData[columnName] = `${newFormData[\n                           columnName\n                        ].getFullYear()}-${String(\n                           newFormData[columnName].getMonth() + 1\n                        ).padStart(2, \"0\")}-${String(\n                           newFormData[columnName].getDate()\n                        ).padStart(2, \"0\")}`;\n                  }\n                  break;\n               case \"datetime\":\n                  if (oldValue === undefined && newValue == null)\n                     delete newFormData[columnName];\n                  try {\n                     newValue instanceof Date &&\n                        (newFormData[columnName] = newValue.toISOString());\n                  } catch {\n                     delete newFormData[columnName];\n                  }\n                  break;\n               case \"connectObject\":\n                  if (field.linkType() === \"one\") {\n                     if (\n                        oldValue === undefined &&\n                        newFormData[columnName] == null\n                     )\n                        delete newFormData[columnName];\n                     else\n                        switch (typeof oldValue) {\n                           case \"number\":\n                              newFormData[columnName] =\n                                 parseInt(newValue) || null;\n                              break;\n                           case \"string\":\n                              newFormData[columnName] =\n                                 newValue?.toString() || null;\n                              break;\n                           default:\n                              break;\n                        }\n                  }\n                  // TODO (Guy): Many logic in the future. Now we don't have an array data changed.\n                  else delete newFormData[columnName];\n                  break;\n               default:\n                  if (newValue == null || newValue === \"\")\n                     if (oldValue === undefined) {\n                        delete newFormData[columnName];\n                        break;\n                     } else if (oldValue === \"\") {\n                        newFormData[columnName] = \"\";\n                        break;\n                     }\n                  switch (fieldKey) {\n                     case \"boolean\":\n                        switch (typeof oldValue) {\n                           case \"number\":\n                              newFormData[columnName] = newValue;\n                              break;\n                           case \"string\":\n                              newFormData[columnName] =\n                                 newValue === 1 ? \"1\" : \"0\";\n                              break;\n                           default:\n                              newFormData[columnName] = newValue == 1;\n                              break;\n                        }\n                        break;\n                     case \"number\":\n                        const paredNewValue = parseInt(newValue);\n                        if (isNaN(parseInt(newValue))) {\n                           if (oldValue === undefined)\n                              delete newFormData[columnName];\n                           else newFormData[columnName] = oldValue;\n                           break;\n                        }\n                        switch (typeof oldValue) {\n                           case \"string\":\n                              newFormData[columnName] =\n                                 paredNewValue.toString();\n                              break;\n                           default:\n                              newFormData[columnName] = paredNewValue;\n                              break;\n                        }\n                        break;\n                     case \"string\":\n                        newFormData[columnName] = newValue?.toString() || \"\";\n                        break;\n                     default:\n                        break;\n                  }\n                  break;\n            }\n         }\n         return newFormData;\n      }\n\n      _setUpdatedBy(obj, values) {\n         values[\n            // TODO (Guy): This should be the ABDesigner setting.\n            obj.fields(\n               (field) =>\n                  field.columnName.indexOf(\"_last_upd_by_in_app\") > -1 ||\n                  field.columnName.indexOf(\"_update_in_app\") > -1\n            )[0].columnName\n         ] = this.AB.Account.email();\n      }\n\n      _showDataPanel() {\n         let $panel = $$(this.ids.dataPanelPopup);\n         if (!$panel) {\n            $panel = this.AB.Webix.ui({\n               id: this.ids.dataPanelPopup,\n               view: \"popup\",\n               width: 250,\n               body: this._uiDataPanel(),\n               css: \"data-panel-popup\",\n               modal: true,\n            });\n         }\n         const $dpButtonWebix = $$(this.ids.dataPanelButton).$view;\n         const $dpButtonElem =\n            $dpButtonWebix.querySelector(\".data-panel-button\");\n         // Ensure the popup will stay to the right when resizing\n         if (!this._resizeObserver) {\n            this._resizeObserver = new ResizeObserver(([e]) => {\n               // Hide the panel when the widget is hidden (ex. switched to another App)\n               if (e.contentRect.width == 0 && e.contentRect.height == 0) {\n                  return $panel.hide();\n               }\n               $panel.show($dpButtonElem, { x: -30, y: -35 });\n            });\n         }\n         this._resizeObserver.observe($dpButtonWebix);\n         $panel.show($dpButtonElem, { x: -30, y: -35 });\n         $$(this.ids.dataPanel)\n            .getChildViews()[1]\n            .getChildViews()\n            .forEach(($childView) => $childView.callEvent(\"onViewShow\"));\n      }\n\n      _showOrgChart() {\n         const settings = this.settings;\n         const AB = this.AB;\n         const draggable = settings.draggable === 1;\n         const ids = this.ids;\n         const chartData = this._chartData;\n         if (chartData == null) {\n            this.__orgchart = null;\n            return;\n         }\n         const orgchart = new this._OrgChart({\n            data: AB.cloneDeep(chartData),\n            direction: settings.direction,\n            // depth: settings.depth,\n            pan: true, // settings.pan == 1,\n            zoom: false, // settings.zoom == 1,\n            draggable,\n            // visibleLevel: settings.visibleLevel,\n            parentNodeSymbol: false,\n            exportButton: settings.export,\n            exportFilename: settings.exportFilename,\n            createNode: this._fnCreateNode,\n            nodeContent: \"description\",\n         });\n\n         // On drop update the parent (dropZone) of the node\n         if (draggable)\n            orgchart.addEventListener(\"nodedropped.orgchart\", this._fnNodeDrop);\n         if (this.__orgchart != null) {\n            const oldOrgchart = this.__orgchart;\n            orgchart.dataset.panStart = oldOrgchart.dataset.panStart;\n            orgchart.setAttribute(\"style\", oldOrgchart.getAttribute(\"style\"));\n            oldOrgchart.remove();\n         }\n         $$(ids.chartContent).$view.appendChild((this.__orgchart = orgchart));\n      }\n\n      _uiDataPanel() {\n         const self = this;\n         const _dataPanelDCs = self._dataPanelDCs;\n         const dataPanelDCs = self.settings.dataPanelDCs;\n         const contentObjID = this._contentDC?.datasource?.id;\n         const cells = [];\n         for (const key in dataPanelDCs) {\n            const [tabIndex, dataPanelDCID] = key.split(\".\");\n\n            // TODO (Guy): Hardcode data panel DCs for Employee.\n            // const _dataPanelDC = _dataPanelDCs.find(\n            //    (dataPanelDC) => dataPanelDC.id === dataPanelDCID\n            // );\n            const _dataPanelDC = self._contentDisplayDCs.find(\n               (contentDisplayDC) =>\n                  contentDisplayDC.datasource.id ===\n                  _dataPanelDCs.find(\n                     (dataPanelDC) => dataPanelDC.id === dataPanelDCID\n                  ).datasource.id\n            );\n            const contentDC = this._contentDC;\n            const header = dataPanelDCs[key];\n            if (_dataPanelDC == null)\n               cells.push({\n                  header,\n                  body: {\n                     view: \"list\",\n                     css: { overflow: \"auto\", \"max-height\": \"90%\" },\n                     data: [],\n                  },\n               });\n            else {\n               const panelObj = _dataPanelDC.datasource;\n               cells.push({\n                  header,\n                  body: {\n                     view: \"list\",\n                     template: (data) =>\n                        `<div class=\"data-panel-employee\">${panelObj.displayData(\n                           data\n                        )}</div>`,\n                     borderless: true,\n                     css: \"data-panel-employee-list\",\n                     data: [],\n                     on: {\n                        async onViewShow() {\n                           await self._waitDCReady(_dataPanelDC);\n                           const contentLinkedField = panelObj.connectFields(\n                              (field) => field.datasourceLink.id == contentObjID\n                           )[0].fieldLink;\n                           const contentLinkedFieldColumnName =\n                              contentLinkedField.columnName;\n                           this.clearAll();\n                           this.define(\n                              \"data\",\n                              // TODO (Guy): Hardcode Employee DC.\n                              (parseInt(tabIndex) < 2\n                                 ? _dataPanelDC.getData(\n                                      (panelRecord) =>\n                                         panelRecord.isinactive !== \"T\" &&\n                                         (tabIndex === \"0\"\n                                            ? contentDC.getData(\n                                                 (contentRecord) =>\n                                                    contentRecord[\n                                                       contentLinkedFieldColumnName\n                                                    ] == panelRecord.id\n                                              )[0] == null\n                                            : contentDC.getData(\n                                                 (contentRecord) =>\n                                                    contentRecord[\n                                                       contentLinkedFieldColumnName\n                                                    ] == panelRecord.id\n                                              )[0] != null)\n                                   )\n                                 : _dataPanelDCs\n                                      .find(\n                                         (dataPanelDC) =>\n                                            dataPanelDC.id === dataPanelDCID\n                                      )\n                                      .getData()\n                              ).sort(sortByEmployeeLastname)\n                           );\n                           await self._callAfterRender(() => {\n                              const $itemElements =\n                                 this.$view.children.item(0).children;\n                              const itemElementsLength = $itemElements.length;\n                              const contentFieldID = contentLinkedField.id;\n                              let count = 0;\n                              while (count < itemElementsLength) {\n                                 const $itemElement = $itemElements.item(\n                                    count++\n                                 );\n                                 $itemElement.setAttribute(\n                                    \"data-content-linked-field-id\",\n                                    contentFieldID\n                                 );\n                                 const dataPanelRecord = _dataPanelDC.getData(\n                                    (e) =>\n                                       e.id ==\n                                       $itemElement.getAttribute(\"webix_l_id\")\n                                 )[0];\n                                 if (dataPanelRecord == null) continue;\n                                 $itemElement.setAttribute(\n                                    \"data-pk\",\n                                    dataPanelRecord[panelObj.PK()]\n                                 );\n                                 $itemElement.setAttribute(\"draggable\", \"true\");\n                                 $itemElement.addEventListener(\n                                    \"dragstart\",\n                                    self._fnContentDragStart\n                                 );\n                                 $itemElement.addEventListener(\n                                    \"dragend\",\n                                    self._fnContentDragEnd\n                                 );\n                              }\n                           });\n                        },\n                     },\n                  },\n               });\n            }\n         }\n         return {\n            height: 600,\n            type: \"clean\",\n            rows: [\n               {\n                  view: \"template\",\n                  borderless: true,\n                  template: `<div style=\"color:#2F27CE;font-family:'Roboto';font-size:17px;font-weight:900\">\n                     ${this.label(\"Staff Assignment\")}\n                     <span class=\"fa fa-compress data-panel-close\"></span>\n                  </div>`,\n                  height: 35,\n                  onClick: {\n                     \"data-panel-close\": () => {\n                        $$(this.ids.dataPanelPopup).hide();\n                        this._resizeObserver?.unobserve(\n                           $$(this.ids.dataPanelButton).$view\n                        );\n                        return false;\n                     },\n                  },\n               },\n               {\n                  id: this.ids.dataPanel,\n                  view: \"tabview\",\n                  css: \"data-panel-tabview\",\n                  width: 250,\n                  borderless: true,\n                  tabbar: {\n                     height: 25,\n                     // width: 300,\n                     align: \"left\",\n                     // type: \"bottom\",\n                     css: \"data-panel-tabbar\",\n                  },\n                  cells,\n               },\n            ],\n         };\n      }\n\n      async _waitDCPending(dc) {\n         switch (dc.dataStatus) {\n            case dc.dataStatusFlag.notInitial:\n            case dc.dataStatusFlag.initialized:\n               await new Promise((resolve) => {\n                  dc.once(\"initializingData\", resolve);\n               });\n               break;\n            default:\n               break;\n         }\n      }\n\n      // TODO (Guy): Some DC.waitReady() won't be resolved.\n      async _waitDCReady(dc) {\n         const dataStatusFlag = dc.dataStatusFlag;\n         switch (dc.dataStatus) {\n            case dataStatusFlag.notInitial:\n            case dataStatusFlag.initializing:\n               await new Promise((resolve) => {\n                  dc.once(\"initializedData\", resolve);\n               });\n               break;\n            default:\n               break;\n         }\n      }\n\n      ui() {\n         const self = this;\n         const ids = self.ids;\n         const AB = self.AB;\n         const Webix = AB.Webix;\n         const _ui = super.ui([\n            {\n               id: ids.chartView,\n               // view: \"template\",\n               responsive: true,\n               type: \"clean\",\n               rows: [\n                  {\n                     responsive: true,\n                     id: ids.chartHeader,\n                     view: \"toolbar\",\n                     height: 50,\n                     type: \"clean\",\n                     cols: [\n                        {\n                           view: \"template\",\n                           id: this.ids.filterButton,\n                           template: `<button class=\"filter-button\">\n                              <i class=\"fa fa-filter\"></i> ${self.label(\n                                 \"Filter\"\n                              )}</button>`,\n                           align: \"left\",\n                           onClick: {\n                              \"filter-button\": (ev) =>\n                                 self._fnShowFilterPopup(ev),\n                           },\n                        },\n                        {\n                           view: \"template\",\n                           id: this.ids.dataPanelButton,\n                           template: `<div class=\"data-panel-button\">\n                              <span class=\"fa fa-2x fa-users\"></span>\n                              <div class=\"data-panel-open\">\n                                 ${self.label(\"Staff Assignment\")}\n                                 <span class=\"fa fa-expand\" style=\"float:right;\"></span>\n                              </div>\n                           </div>`,\n                           align: \"right\",\n                           onClick: {\n                              \"data-panel-open\": (ev) =>\n                                 self._showDataPanel(ev),\n                           },\n                        },\n                     ],\n                  },\n                  {\n                     responsive: true,\n                     id: ids.chartContent,\n                     view: \"template\",\n                     scroll: \"auto\",\n\n                     on: {\n                        onAfterRender() {\n                           Webix.extend(this, Webix.ProgressBar);\n                        },\n                     },\n                  },\n               ],\n            },\n         ]);\n         delete _ui.type;\n         return _ui;\n      }\n\n      async init(AB, accessLevel) {\n         await super.init(AB, accessLevel);\n         const settings = this.settings;\n         const teamDC = this.datacollection;\n\n         // Stable DCs.\n         const contentGroupDC = (this._contentGroupDC =\n            this._createCustomDCByObjID(\n               this._getLinkedObjIDByConnectFieldID(\n                  settings.contentGroupByField\n               ),\n               { loadAll: true }\n            ));\n         const teamStrategyDC = (this._teamStrategyDC =\n            this._createCustomDCByObjID(\n               this._getLinkedObjIDByConnectFieldID(settings.teamStrategy),\n               { loadAll: true }\n            ));\n         const strategyCodeDC = (this._strategyCodeDC =\n            this._createCustomDCByObjID(\n               this._getLinkedObjIDByConnectFieldID(settings.strategyCode),\n               { loadAll: true }\n            ));\n         const subStrategyDC = (this._subStrategyDC =\n            this._createCustomDCByObjID(\n               this._getLinkedObjIDByConnectFieldID(settings.subStrategy),\n               { loadAll: true }\n            ));\n         const pendingPromises = [\n            (async () => {\n               this._resources = await Promise.all(this._resources);\n               this._OrgChart ||\n                  (this._OrgChart = (() => {\n                     const OrgChart = this._resources[0].default;\n                     const _oldOnDragStart = OrgChart.prototype._onDragStart;\n                     OrgChart.prototype._onDragStart = (event) => {\n                        event.dataTransfer.setData(\"isnode\", 1);\n                        this.__orgchart != null &&\n                           _oldOnDragStart.call(this.__orgchart, event);\n                     };\n                     return OrgChart;\n                  })());\n            })(),\n            // Wait for pulling stable list data.\n            this._waitDCReady(contentGroupDC),\n            this._waitDCReady(strategyCodeDC),\n            this._waitDCReady(subStrategyDC),\n            this._waitDCReady(teamStrategyDC),\n         ];\n\n         // Preparing for the entity DC and wait for setting a cursor.\n         const entityDC = (this._entityDC = AB.datacollectionByID(\n            settings.entityDatacollection\n         ));\n         if (entityDC != null) {\n            this._initDC(entityDC);\n            pendingPromises.push(\n               this._waitDCReady(entityDC),\n               new Promise((resolve) => {\n                  const CHANGE_CURSOR = \"changeCursor\";\n                  entityDC.off(CHANGE_CURSOR, this._fnRefresh);\n                  if (entityDC.getCursor() != null) {\n                     entityDC.on(CHANGE_CURSOR, this._fnRefresh);\n                     resolve();\n                  } else\n                     entityDC.once(CHANGE_CURSOR, () => {\n                        entityDC.on(CHANGE_CURSOR, this._fnRefresh);\n                        resolve();\n                     });\n               })\n            );\n         }\n         await Promise.all(pendingPromises);\n         this._strategyCodeOpts = strategyCodeDC\n            .getData()\n            .map((strategyCodeValue) => ({\n               id: strategyCodeValue.id,\n               // TODO (Guy): Hardcode to use the name column.\n               value: strategyCodeValue.name,\n            }))\n            .sort();\n         const subStrategyColumnName = this.AB.definitionByID(\n            settings.subStrategy\n         ).columnName;\n         const subStrategyObjPK = subStrategyDC.datasource.PK();\n         const strategyCodeColumnName = this.AB.definitionByID(\n            settings.strategyCode\n         ).columnName;\n         this._strategyOpts = teamStrategyDC\n            .getData()\n            .map((teamStrategyValue) => ({\n               id: teamStrategyValue.id,\n               // TODO (Guy): Hardcode to use the name column.\n               value: subStrategyDC.getData(\n                  (subStrategyValue) =>\n                     subStrategyValue[subStrategyObjPK] ==\n                     teamStrategyValue[subStrategyColumnName]\n               )[0]?.name,\n               code: teamStrategyValue[strategyCodeColumnName],\n            }))\n            .sort();\n         // Preparing for the data panel DCs.\n         if (settings.showDataPanel === 1) {\n            const _dataPanelDCs = (this._dataPanelDCs = []);\n            const dataPanelDCs = settings.dataPanelDCs;\n            for (const key in dataPanelDCs) {\n               const [, dataPanelDCID] = key.split(\".\");\n               const _dataPanelDC = AB.datacollectionByID(dataPanelDCID);\n               _dataPanelDCs.findIndex(\n                  (_dataPanelDC) => _dataPanelDC.id === dataPanelDCID\n               ) < 0 && _dataPanelDCs.push(_dataPanelDC);\n               this._initDC(_dataPanelDC);\n            }\n         }\n\n         // Preparing for the content DC.\n         const contentFieldFilter = JSON.parse(settings.contentFieldFilter);\n         const contentDC = (this._contentDC = this._createCustomDCByObjID(\n            this._getLinkedObjIDByConnectFieldID(settings.contentField),\n            {\n               linkedDC: entityDC,\n               filter: {\n                  glue: \"and\",\n                  rules: [\n                     // TODO (Guy): Hardcode date start filter.\n                     {\n                        key: settings.contentFieldDateStart,\n                        rule: \"is_not_null\",\n                        value: \"\",\n                     },\n                     {\n                        glue: \"or\",\n                        rules:\n                           (contentFieldFilter.rules?.length > 0 && [\n                              contentFieldFilter,\n\n                              // TODO (Guy): Hardcode date end filter.\n                              {\n                                 key: settings.contentFieldDateEnd,\n                                 rule: \"is_null\",\n                                 value: \"\",\n                              },\n                           ]) ||\n                           [],\n                     },\n                  ],\n               },\n            }\n         ));\n\n         // Prepare display DCs.\n         const contentDisplayedFieldKeys = Object.keys(\n            settings.contentDisplayedFields\n         );\n         const contentDisplayDCs = (this._contentDisplayDCs = []);\n         if (contentDisplayedFieldKeys.length > 0) {\n            const teamObjID = teamDC.datasource.id;\n            const contentGroupObjID = contentGroupDC.datasource.id;\n            const strategyCodeObjID = strategyCodeDC.datasource.id;\n            const subStrategyObjID = subStrategyDC.datasource.id;\n            const teamStrategyObjID = teamStrategyDC.datasource.id;\n            const contentObjID = contentDC.datasource.id;\n            let [, objID] = contentDisplayedFieldKeys.pop().split(\".\");\n            while (contentDisplayedFieldKeys.length > 0) {\n               if (\n                  contentDisplayDCs.findIndex(\n                     (contentDisplayDC) =>\n                        contentDisplayDC.datasource.id === objID\n                  ) < 0\n               )\n                  switch (objID) {\n                     case teamObjID:\n                        contentDisplayDCs.push(teamDC);\n                        break;\n                     case contentGroupObjID:\n                        contentDisplayDCs.push(contentGroupDC);\n                        break;\n                     case strategyCodeObjID:\n                        contentDisplayDCs.push(strategyCodeDC);\n                        break;\n                     case subStrategyObjID:\n                        contentDisplayDCs.push(subStrategyDC);\n                        break;\n                     case teamStrategyObjID:\n                        contentDisplayDCs.push(teamStrategyDC);\n                        break;\n                     case contentObjID:\n                        contentDisplayDCs.push(contentDC);\n                        break;\n                     default:\n                        if (entityDC?.datasource.id === objID)\n                           contentDisplayDCs.push(entityDC);\n                        else\n                           contentDisplayDCs.push(\n                              this._createCustomDCByObjID(objID, {\n                                 linkedDC: entityDC,\n                              })\n                           );\n                        break;\n                  }\n               [, objID] = contentDisplayedFieldKeys.pop().split(\".\");\n            }\n         }\n         this._resolveInit();\n      }\n\n      getChartData(id, chartData = this._chartData) {\n         if (this.teamNodeID(id) === chartData.id) return chartData;\n         if (chartData.children?.length > 0) {\n            for (let child of chartData.children) {\n               child = this.getChartData(id, child);\n               if (child != null) return child;\n            }\n         }\n      }\n\n      async onShow() {\n         this.busy();\n         this.AB.performance.mark(\"TeamChart.onShow\");\n         await this._promiseInit;\n         super.onShow();\n         this.AB.performance.measure(\"TeamChart.onShow\");\n         this.ready();\n      }\n\n      /**\n       * load the data and format it for display\n       */\n      async pullData() {\n         this._chartData = null;\n         const teamDC = this.datacollection;\n         if (teamDC == null) return;\n         const settings = this.settings;\n         await this._waitDCReady(teamDC);\n         let topNode = teamDC.getCursor();\n         const topNodeColumn = this.AB.definitionByID(\n            settings.topTeam\n         ).columnName;\n         if (settings.topTeam) {\n            const topFromField = teamDC.getData(\n               (e) => e[topNodeColumn] == 1\n            )[0];\n            topNode = topFromField ? topFromField : topNode;\n         }\n         if (!topNode) return;\n\n         /**\n          * Recursive function to prepare child node data\n          * @param {object} node the current node\n          * @param {number} [depth=0] a count of how many times we have recursed\n          */\n         const teamObjPK = teamDC.datasource.PK();\n         const teamLinkedColumnName = this.AB.definitionByID(\n            this.AB.definitionByID(settings.teamLink).settings.linkColumn\n         ).columnName;\n         const teamNameColumnName = this.AB.definitionByID(\n            settings.teamName\n         ).columnName;\n         const teamInactiveColumnName = this.AB.definitionByID(\n            settings.teamInactive\n         ).columnName;\n         const teamStrategyDC = this._teamStrategyDC;\n         const teamStrategyObjPK = teamStrategyDC.datasource.PK();\n         const teamStrategyColumnName = this.AB.definitionByID(\n            settings.teamStrategy\n         ).columnName;\n         const strategyCodeColumnName = this.AB.definitionByID(\n            settings.strategyCode\n         ).columnName;\n         const pullChildData = (node, depth = 0) => {\n            if (depth >= TEAM_CHART_MAX_DEPTH) return;\n            node.children = [];\n            teamDC\n               .getData(\n                  (e) => e[teamLinkedColumnName] == node._rawData[teamObjPK]\n               )\n               .forEach((childData) => {\n                  // Don't show inactive teams\n                  if (\n                     childData[teamLinkedColumnName] == childData[teamObjPK] ||\n                     (this.__filters?.inactive == 0 &&\n                        childData[teamInactiveColumnName])\n                  )\n                     return;\n                  const child = {\n                     name: childData[teamNameColumnName],\n                     id: this.teamNodeID(childData[teamObjPK]),\n                     className: `strategy-${\n                        teamStrategyDC.getData(\n                           (e) =>\n                              e[teamStrategyObjPK] ==\n                              childData[teamStrategyColumnName]\n                        )[0]?.[strategyCodeColumnName]\n                     }`,\n                     isInactive: childData[teamInactiveColumnName],\n                     _rawData: childData,\n                  };\n                  child.filteredOut = this.filterTeam(child);\n                  if (child.name === \"External Support\")\n                     child.className = `strategy-external`;\n                  pullChildData(child, depth + 1);\n\n                  // If this node is filtered we still need it if it has children\n                  // that pass\n                  if (!child.filteredOut || child.children?.length > 0)\n                     node.children.push(child);\n               });\n            if (node.children.length === 0) {\n               delete node.children;\n            } else {\n               // sort children alphaetically\n               node.children = node.children.sort(sortByTeamName);\n            }\n         };\n         const chartData = (this._chartData = {\n            id: this.teamNodeID(topNode[teamObjPK]),\n            name: topNode[teamNameColumnName] ?? \"\",\n            className: `strategy-${\n               teamStrategyDC.getData(\n                  (e) => e[teamStrategyObjPK] == topNode[teamStrategyColumnName]\n               )[0]?.[strategyCodeColumnName]\n            }`,\n            isInactive: topNode[teamInactiveColumnName],\n            _rawData: topNode,\n            filteredOut: false,\n         });\n         chartData.filteredOut = this.filterTeam(chartData);\n         pullChildData(chartData);\n      }\n\n      async refresh(force = true) {\n         const ids = this.ids;\n         $$(ids.teamFormPopup)?.destructor();\n         $$(ids.contentForm)?.destructor();\n         await Promise.all(\n            this._getAllDCs().map((dc) => this._waitDCReady(dc))\n         );\n         await this.pullData();\n         this._showOrgChart();\n         if (force) {\n            if (this._promisePageData != null) await this._promisePageData;\n            let resolvePageData = null;\n            this._promisePageData = new Promise((resolve) => {\n               resolvePageData = resolve;\n            });\n            (async () => {\n               try {\n                  await Promise.all([\n                     new Promise((resolve) => {\n                        this._callPagingEvent(\n                           this.datacollection,\n                           this._fnPageTeamCallback,\n                           resolve\n                        );\n                     }),\n                     new Promise((resolve) => {\n                        this._callPagingEvent(\n                           this._contentDC,\n                           this._fnPageContentCallback,\n                           resolve\n                        );\n                     }),\n                     ...this._getAllDCs({ areCoreDCsExcluded: true }).map(\n                        (contentDisplayDC) =>\n                           new Promise((resolve) => {\n                              this._callPagingEvent(\n                                 contentDisplayDC,\n                                 this._fnPageContentDisplayCallback,\n                                 resolve\n                              );\n                           })\n                     ),\n                  ]);\n               } catch (err) {\n                  // TODO (Guy): The paging error.\n                  console.error(err);\n               }\n               resolvePageData();\n               this._promisePageData = null;\n            })();\n         } else\n            await this._callAfterRender(async () => {\n               const contentDC = this._contentDC;\n               this._fnPageContentCallback(\n                  contentDC.getData(),\n                  true,\n                  contentDC,\n                  () => {}\n               );\n            });\n      }\n\n      async filterApply() {\n         this.busy();\n         await this._promisePageData;\n         const ids = this.ids;\n         $$(ids.filterPopup).hide();\n         this.__filters = $$(ids.filterForm).getValues();\n         this.__orgchart?.remove();\n         this.__orgchart = null;\n         await this.refresh(false);\n         this.ready();\n      }\n\n      filterTeam(team) {\n         const filters = this.__filters;\n         let filter = false;\n         filters.strategy = filters.strategy ?? \"\";\n         filters.teamName = filters.teamName ?? \"\";\n\n         // Apply filters (match using or)\n         if (filters.strategy || filters.teamName) {\n            filter = true;\n            if (\n               filters.strategy !== \"\" &&\n               filters.strategy == team.className.replace(\"strategy-\", \"\")\n            )\n               filter = false;\n            if (\n               filters.teamName !== \"\" &&\n               team.name.toLowerCase().includes(filters.teamName.toLowerCase())\n            )\n               filter = false;\n            if (!filter) return filter;\n         }\n         const settings = this.settings;\n         const contentDisplayFieldFilters =\n            settings.contentDisplayedFieldFilters;\n         for (const key in contentDisplayFieldFilters) {\n            filters[key] = filters[key] ?? \"\";\n            if (filters[key] !== \"\") filter = true;\n         }\n         if (!filter) return filter;\n         const contentField = settings.contentField;\n         const teamObj = this.datacollection.datasource;\n         const contentFieldLinkColumnName = teamObj.connectFields(\n            (connectField) => connectField.id === contentField\n         )[0].fieldLink.columnName;\n         const contentDC = this._contentDC;\n         const contentObj = contentDC.datasource;\n         const contentObjID = contentObj.id;\n         const contentObjPK = contentObj.PK();\n         const teamRecordPK = team._rawData[teamObj.PK()];\n         const contentDisplayedFields = settings.contentDisplayedFields;\n         const contentDisplayedFieldKeys = Object.keys(contentDisplayedFields);\n         const contentDisplayDCs = this._contentDisplayDCs;\n         let currentContentDisplayFieldKey = null;\n         let currentContentDisplayDC = null;\n         let currentContentDisplayObjID = null;\n         let currentContentDisplayObjPK = null;\n         let currentContentDisplayFieldColumnName = null;\n         let currentContentDisplayFilterValue = null;\n         let currentContentDisplayRecords = [];\n         while (contentDisplayedFieldKeys.length > 0) {\n            currentContentDisplayFieldKey = contentDisplayedFieldKeys.pop();\n            [, currentContentDisplayObjID] =\n               currentContentDisplayFieldKey.split(\".\");\n            currentContentDisplayFilterValue =\n               filters[\n                  `${currentContentDisplayFieldKey}.${contentDisplayedFields[currentContentDisplayFieldKey]}.0`\n               ];\n            if (currentContentDisplayFilterValue == null)\n               currentContentDisplayFilterValue =\n                  filters[\n                     `${currentContentDisplayFieldKey}.${contentDisplayedFields[currentContentDisplayFieldKey]}.1`\n                  ];\n            if (currentContentDisplayFilterValue != null) {\n               if (currentContentDisplayFilterValue === \"\") continue;\n               currentContentDisplayFilterValue =\n                  currentContentDisplayFilterValue.toString().toLowerCase();\n               currentContentDisplayDC = contentDisplayDCs.find(\n                  (contentDisplayDC) =>\n                     contentDisplayDC.datasource.id ===\n                     currentContentDisplayObjID\n               );\n               currentContentDisplayObjPK =\n                  currentContentDisplayDC.datasource.PK();\n               currentContentDisplayFieldColumnName = this.AB.definitionByID(\n                  contentDisplayedFields[currentContentDisplayFieldKey]\n               ).columnName;\n               currentContentDisplayRecords = currentContentDisplayDC\n                  .getData(\n                     (contentDisplayRecord) =>\n                        contentDisplayRecord[\n                           currentContentDisplayFieldColumnName\n                        ]\n                           ?.toString()\n                           .toLowerCase()\n                           .indexOf(currentContentDisplayFilterValue) > -1\n                  )\n                  .map((contentDisplayRecord) =>\n                     contentDisplayRecord[\n                        currentContentDisplayObjPK\n                     ]?.toString()\n                  );\n            } else if (currentContentDisplayRecords.length > 0) {\n               currentContentDisplayDC = contentDisplayDCs.find(\n                  (contentDisplayDC) =>\n                     contentDisplayDC.datasource.id ===\n                     currentContentDisplayObjID\n               );\n               currentContentDisplayObjPK =\n                  currentContentDisplayDC.datasource.PK();\n               currentContentDisplayFieldColumnName = this.AB.definitionByID(\n                  contentDisplayedFields[currentContentDisplayFieldKey]\n               ).columnName;\n               currentContentDisplayRecords = currentContentDisplayDC\n                  .getData((contentDisplayRecord) => {\n                     const contentDisplayRecordData =\n                        contentDisplayRecord[\n                           currentContentDisplayFieldColumnName\n                        ];\n                     return Array.isArray(contentDisplayRecordData)\n                        ? contentDisplayRecordData.findIndex(\n                             (e) =>\n                                currentContentDisplayRecords.indexOf(\n                                   e.toString()\n                                ) > -1\n                          ) > -1\n                        : currentContentDisplayRecords.indexOf(\n                             contentDisplayRecordData?.toString()\n                          ) > -1;\n                  })\n                  .map((contentDisplayRecord) =>\n                     contentDisplayRecord[currentContentDisplayObjPK].toString()\n                  );\n            }\n            if (\n               currentContentDisplayObjID === contentObjID &&\n               currentContentDisplayRecords.length > 0 &&\n               contentDC\n                  .getData(\n                     (contentRecord) =>\n                        contentRecord[contentFieldLinkColumnName] ==\n                        teamRecordPK\n                  )\n                  .findIndex(\n                     (contentRecord) =>\n                        currentContentDisplayRecords.indexOf(\n                           contentRecord[contentObjPK].toString()\n                        ) > -1\n                  ) > -1\n            ) {\n               filter = false;\n               break;\n            }\n         }\n         return filter;\n      }\n\n      async teamAddChild(values, isServerSideUpdate = true, children = []) {\n         this.busy();\n         const settings = this.settings;\n         const entityDC = this._entityDC;\n         const teamDC = this.datacollection;\n         const teamObj = teamDC.datasource;\n         const teamObjID = teamObj.id;\n\n         // Add the entity value\n         if (entityDC) {\n            const connection =\n               isServerSideUpdate &&\n               entityDC.datasource.connectFields(\n                  (f) => f.settings.linkObject === teamObjID\n               )[0];\n            if (connection) {\n               const entity = entityDC.getCursor();\n               const cName = this.AB.definitionByID(\n                  connection.settings.linkColumn\n               ).columnName;\n               values[cName] = entity;\n            }\n         }\n         let _rawData = values;\n         if (isServerSideUpdate) {\n            this._setUpdatedBy(teamObj, values);\n            try {\n               _rawData = await teamDC.model.create(values);\n            } catch (err) {\n               // TODO (Guy): The update error.\n               console.error(err);\n            }\n         }\n         const parent = document.querySelector(\n            `#${this.teamNodeID(\n               _rawData[\n                  this.AB.definitionByID(\n                     this.AB.definitionByID(settings.teamLink).settings\n                        .linkColumn\n                  ).columnName\n               ]\n            )}`\n         );\n         if (parent != null && this.__orgchart != null) {\n            const hasChild = parent.parentNode.colSpan > 1;\n            const teamObjPK = teamObj.PK();\n            const teamStrategyDC = this._teamStrategyDC;\n            const teamStrategyObjPK = teamStrategyDC.datasource.PK();\n            const teamStrategyColumnName = this.AB.definitionByID(\n               settings.teamStrategy\n            ).columnName;\n            const strategyCodeColumnName = this.AB.definitionByID(\n               settings.strategyCode\n            ).columnName;\n            const teamValuePK = _rawData[teamObjPK];\n            const newChild = {\n               name: _rawData[\n                  this.AB.definitionByID(settings.teamName).columnName\n               ],\n               filteredOut: false,\n               isInactive:\n                  _rawData[\n                     this.AB.definitionByID(settings.teamInactive).columnName\n                  ],\n               id: this.teamNodeID(teamValuePK),\n               relationship: hasChild ? \"110\" : \"100\",\n               className: `strategy-${\n                  teamStrategyDC.getData(\n                     (e) =>\n                        e[teamStrategyObjPK] == _rawData[teamStrategyColumnName]\n                  )[0]?.[strategyCodeColumnName]\n               }`,\n               _rawData,\n            };\n            newChild.filteredOut = this.filterTeam(newChild);\n\n            // Need to add differently if the node already has child nodes\n            if (hasChild)\n               this.__orgchart.addSiblings(\n                  // Sibling\n                  this.closest(parent, (el) => el.nodeName === \"TABLE\")\n                     .querySelector(\".nodes\")\n                     .querySelector(\".node\"),\n                  { siblings: [newChild] }\n               );\n            else this.__orgchart.addChildren(parent, { children: [newChild] });\n         }\n         this.ready();\n      }\n\n      teamCanInactivate(values) {\n         const settings = this.settings;\n         const isInactive = this.AB.definitionByID(\n            settings.teamInactive\n         ).columnName;\n         if (values[isInactive]) return true; // Allow activating inactive teams\n         const canInactive = this.AB.definitionByID(\n            settings.teamCanInactivate\n         ).columnName;\n         if (!values[canInactive]) return false;\n         const teamDC = this.datacollection;\n         const teamObjPK = teamDC.datasource.PK();\n         const teamLinkedColumnName = this.AB.definitionByID(\n            this.AB.definitionByID(settings.teamLink).settings.linkColumn\n         ).columnName;\n         const teamValuePK = values[teamObjPK];\n         if (\n            teamDC.getData(\n               (e) =>\n                  e[teamLinkedColumnName] == teamValuePK &&\n                  e[isInactive] == false\n            ).length > 0\n         )\n            return false;\n         const contentDC = this._contentDC;\n         const contentLinkedColumnName = this.AB.definitionByID(\n            this.AB.definitionByID(settings.contentField).settings.linkColumn\n         ).columnName;\n         if (\n            contentDC.getData((e) => e[contentLinkedColumnName] == teamValuePK)\n               .length > 0\n         )\n            return false;\n         return true;\n      }\n\n      async teamCanDelete(values) {\n         const settings = this.settings;\n         if (\n            !values[\n               this.AB.definitionByID(settings.teamCanInactivate).columnName\n            ]\n         )\n            return false;\n         const teamDC = this.datacollection;\n         const teamLinkedColumnName = this.AB.definitionByID(\n            this.AB.definitionByID(settings.teamLink).settings.linkColumn\n         ).columnName;\n         const teamValuePK = values[teamDC.datasource.PK()];\n         if (\n            teamDC.getData((e) => e[teamLinkedColumnName] == teamValuePK)\n               .length > 0\n         )\n            return false;\n         const contentDC = this._contentDC;\n         const contentLinkedColumnName = this.AB.definitionByID(\n            this.AB.definitionByID(settings.contentField).settings.linkColumn\n         ).columnName;\n         return !(\n            contentDC.getData((e) => e[contentLinkedColumnName] == teamValuePK)\n               .length > 0 ||\n            (\n               await contentDC.model.findAll({\n                  limit: 1,\n                  where: {\n                     glue: \"and\",\n                     rules: [\n                        {\n                           key: contentLinkedColumnName,\n                           rule: \"equals\",\n                           value: teamValuePK,\n                        },\n                     ],\n                  },\n               })\n            ).data.length > 0\n         );\n      }\n\n      teamDelete(values, isServerSideUpdate = true) {\n         const $teamNode = document.querySelector(\n            `#${this.teamNodeID(values.id)}`\n         );\n         if (isServerSideUpdate) {\n            if ($teamNode.querySelectorAll(\".team-group-record\").length > 0)\n               this.AB.Webix.alert({\n                  text: this.label(\n                     \"Since there are assignments or teams associated with this team, this action cannot be done until all of its assignments are made inactive\"\n                  ),\n               });\n            else\n               this.AB.Webix.confirm({\n                  text: this.label(\n                     \"This will permanently remove this team. Click OK to continue or Cancel to not remove the team.\"\n                  ),\n               }).then(() => {\n                  this.datacollection.model.delete(values.id);\n                  this.__orgchart.removeNodes($teamNode);\n               });\n         } else this.__orgchart.removeNodes($teamNode);\n      }\n\n      async teamEdit(values, isServerSideUpdate = true) {\n         this.busy();\n         const settings = this.settings;\n         let _rawData = values;\n         const teamDC = this.datacollection;\n         const teamObj = teamDC.datasource;\n         if (isServerSideUpdate) {\n            this._setUpdatedBy(teamObj, values);\n            try {\n               _rawData = await teamDC.model.update(values.id, values);\n            } catch (err) {\n               // TODO (Guy): the update error\n               console.error(err);\n            }\n         }\n         if (this.__orgchart == null) return;\n         const teamNodeID = this.teamNodeID(_rawData[teamObj.PK()]);\n         const $node = document.querySelector(`#${teamNodeID}`);\n\n         // Remove inactive node from display, unless the filter setting to show\n         // inctive nodes is on.\n         if (\n            this.__filters.inactive == 0 &&\n            _rawData[this.AB.definitionByID(settings.teamInactive).columnName]\n         ) {\n            this.__orgchart.removeNodes($node);\n            this.ready();\n            return;\n         }\n         const oldChartData = JSON.parse($node.dataset.source);\n         const linkFieldColumnName = teamObj.fieldByID(\n            this.AB.definitionByID(settings.teamLink).settings.linkColumn\n         ).columnName;\n         if (\n            oldChartData._rawData[linkFieldColumnName] !=\n            _rawData[linkFieldColumnName]\n         ) {\n            this.__orgchart.removeNodes($node);\n            this.teamAddChild(\n               _rawData,\n               false,\n               this.getChartData(_rawData.id)?.children\n            );\n            this.ready();\n            return;\n         }\n         const teamStrategyDC = this._teamStrategyDC;\n         const teamStrategyObjPK = teamStrategyDC.datasource.PK();\n         const teamStrategyColumnName = this.AB.definitionByID(\n            settings.teamStrategy\n         ).columnName;\n         const strategyCodeColumnName = this.AB.definitionByID(\n            settings.strategyCode\n         ).columnName;\n         const currentStrategy =\n            $node.classList?.value?.match(/strategy-\\S+/)[0];\n         const strategyCodeValuePK = teamStrategyDC.getData(\n            (e) => e[teamStrategyObjPK] == _rawData[teamStrategyColumnName]\n         )[0]?.[strategyCodeColumnName];\n         const newStrategy =\n            (strategyCodeValuePK && `strategy-${strategyCodeValuePK}`) ||\n            currentStrategy;\n         if (currentStrategy !== newStrategy) {\n            $node.classList?.remove(currentStrategy);\n            $node.classList?.add(newStrategy);\n         }\n         const teamValueName =\n            _rawData[this.AB.definitionByID(settings.teamName).columnName];\n         $node.querySelector(\".title\").innerHTML = teamValueName;\n         const newChartData = {\n            className: newStrategy,\n            filteredOut: false,\n            id: teamNodeID,\n            isInactive:\n               _rawData[\n                  this.AB.definitionByID(settings.teamInactive).columnName\n               ],\n            name: teamValueName,\n            relationship: oldChartData.relationship,\n            _rawData,\n         };\n         newChartData.filteredOut = this.filterTeam(newChartData);\n         $node.dataset.source = JSON.stringify(newChartData);\n         isServerSideUpdate && (await this.refresh(isServerSideUpdate));\n         this.ready();\n      }\n\n      async teamForm(mode, values) {\n         const teamObj = this.datacollection.datasource;\n         const ids = this.ids;\n         const settings = this.settings;\n         const nameField = teamObj.fieldByID(settings.teamName);\n         const entityDC = this._entityDC;\n         const entityObjID = entityDC.datasource.id;\n         const entityDCCursorID = entityDC.getCursor().id;\n         const strategyField = teamObj.fieldByID(settings.teamStrategy);\n         const linkField = teamObj.fieldByID(\n            this.AB.definitionByID(settings.teamLink).settings.linkColumn\n         );\n         const linkFieldColumnName = linkField.columnName;\n         const isEditMode = mode === \"Edit\";\n         const teamCond = {\n            glue: \"and\",\n            rules: [\n               {\n                  key: teamObj.connectFields(\n                     (f) => f.settings.linkObject === entityObjID\n                  )[0].columnName,\n                  value: entityDCCursorID,\n                  rule: \"equals\",\n               },\n            ],\n         };\n         isEditMode &&\n            teamCond.rules.push({\n               key: teamObj.PK(),\n               rule: \"not_equal\",\n               value: values.id,\n            });\n         const self = this;\n         const labelWidth = 110;\n         const isDisabled =\n            isEditMode &&\n            (values[this.AB.definitionByID(settings.topTeam).columnName] == 1 ||\n               values.name === \"External Support\" ||\n               values[\n                  this.AB.definitionByID(settings.teamCanInactivate).columnName\n               ] == 0);\n         const $teamFormPopup = webix.ui({\n            view: \"popup\",\n            id: ids.teamFormPopup,\n            close: true,\n            position: \"center\",\n            width: 400,\n            css: { \"border-radius\": \"10px\" },\n            body: {\n               rows: [\n                  {\n                     view: \"toolbar\",\n                     css: \"webix_dark\",\n                     cols: [\n                        { width: 5 },\n                        {\n                           view: \"label\",\n                           label: `${this.label(mode)} Team`,\n                           align: \"left\",\n                        },\n                        {\n                           view: \"icon\",\n                           icon: \"fa fa-times\",\n                           align: \"right\",\n                           width: 60,\n                           click: () => {\n                              $teamFormPopup.blockEvent();\n                              $teamFormPopup.$view.remove();\n                              $teamFormPopup.destructor();\n                           },\n                        },\n                     ],\n                  },\n                  {\n                     view: \"form\",\n                     id: ids.teamForm,\n                     hidden: true,\n                     borderless: true,\n                     elements: [\n                        {\n                           view: \"text\",\n                           label: nameField.label,\n                           labelWidth,\n                           name: nameField.columnName,\n                           required: true,\n                        },\n                        {\n                           view: \"richselect\",\n                           label: this.label(\"Strategy\"),\n                           labelWidth,\n                           id: this.ids.teamFormCode,\n                           // no name because we don't actually save this, it's\n                           // used to filter strategyField options\n                           options: this._strategyCodeOpts,\n                           disabled: isDisabled,\n                           required: true,\n                           on: {\n                              onChange(code, previous) {\n                                 if (code === previous) return;\n                                 const $strategyField = $$(\n                                    self.ids.teamFormStrategy\n                                 );\n                                 $strategyField.define(\n                                    \"options\",\n                                    (code &&\n                                       self._strategyOpts.filter(\n                                          (strategyOpt) =>\n                                             strategyOpt.code == code\n                                       )) ||\n                                       self._strategyOpts\n                                 );\n                                 $strategyField.refresh();\n                              },\n                           },\n                        },\n                        {\n                           view: \"richselect\",\n                           label: this.label(\"Sub Strategy\"),\n                           labelWidth,\n                           name: strategyField.columnName,\n                           id: this.ids.teamFormStrategy,\n                           options: [],\n                           disabled: isDisabled,\n                           required: true,\n                           on: {\n                              onViewShow() {\n                                 const value = this.getValue();\n                                 if (value) {\n                                    const { code } = self._strategyOpts.find(\n                                       (strategyOpt) => strategyOpt.id === value\n                                    );\n                                    $$(self.ids.teamFormCode).setValue(code);\n                                    this.define(\n                                       \"options\",\n                                       code &&\n                                          (self._strategyOpts.filter(\n                                             (strategyOpt) =>\n                                                strategyOpt.code == code\n                                          ) ||\n                                             self._strategyOpts)\n                                    );\n                                    this.refresh();\n                                 }\n                              },\n                           },\n                        },\n                        {\n                           view: \"combo\",\n                           label: linkField.label,\n                           labelWidth,\n                           name: linkFieldColumnName,\n                           options: [],\n                           required: true,\n                           on: {\n                              async onViewShow() {\n                                 webix.extend(this, webix.ProgressBar);\n                                 this.showProgress({ type: \"icon\" });\n                                 try {\n                                    this.disable();\n                                    const data = (\n                                       await linkField.getOptions(teamCond)\n                                    ).map((e) => ({\n                                       id: e.id,\n                                       value: teamObj.displayData(e),\n                                    }));\n                                    this.define(\n                                       \"options\",\n                                       (\n                                          await linkField.getOptions(teamCond)\n                                       ).map((e) => ({\n                                          id: e.id,\n                                          value: teamObj.displayData(e),\n                                       }))\n                                    );\n                                    this.refresh();\n                                    isEditMode && !isDisabled && this.enable();\n                                    this.hideProgress();\n                                 } catch {\n                                    // Close popup before response or possily response fail\n                                 }\n                              },\n                           },\n                        },\n                        {\n                           view: \"switch\",\n                           disabled: !this.teamCanInactivate(values),\n                           name: this.AB.definitionByID(settings.teamInactive)\n                              .columnName,\n                           label: \"Inactive\",\n                        },\n                        { view: \"text\", name: \"id\", hidden: true },\n                        {\n                           id: ids.teamFormSubmit,\n                           view: \"button\",\n                           value: this.label(\"Save\"),\n                           disabled: true,\n                           css: \"webix_primary\",\n                           click: async () => {\n                              let newValues = $$(ids.teamForm).getValues();\n                              if (newValues.id) {\n                                 const $node = document.getElementById(\n                                    this.teamNodeID(newValues.id)\n                                 );\n                                 const oldValues = JSON.parse(\n                                    $node.dataset.source\n                                 )._rawData;\n                                 newValues = this._parseFormValueByType(\n                                    teamObj,\n                                    oldValues,\n                                    newValues\n                                 );\n                                 if (\n                                    !this._checkDataIsChanged(\n                                       oldValues,\n                                       newValues\n                                    )\n                                 )\n                                    return;\n                                 this.teamEdit(newValues);\n                              } else {\n                                 this.teamAddChild(\n                                    this._parseFormValueByType(\n                                       teamObj,\n                                       null,\n                                       newValues\n                                    )\n                                 );\n                              }\n                              $teamFormPopup.blockEvent();\n                              $teamFormPopup.$view.remove();\n                              $teamFormPopup.destructor();\n                           },\n                        },\n                     ],\n                     on: {\n                        onChange: () => {\n                           const values = $$(ids.teamForm).getValues();\n                           let valid =\n                              !!values[strategyField.columnName] &&\n                              !!values[nameField.columnName];\n                           if (isEditMode)\n                              valid = valid && !!values[linkFieldColumnName];\n                           const $teamFormSubmit = $$(ids.teamFormSubmit);\n                           if (valid) $teamFormSubmit.enable();\n                           else $teamFormSubmit.disable();\n                        },\n                     },\n                  },\n               ],\n            },\n            on: {\n               onShow() {\n                  $$(ids.teamForm).show();\n               },\n               onHide() {\n                  this.$view.remove();\n                  this.destructor();\n               },\n            },\n         });\n         if (values.__parentID) {\n            values[linkFieldColumnName] = values.__parentID;\n            delete values.__parentID;\n         }\n         $$(ids.teamForm).setValues(values);\n         $teamFormPopup.show();\n      }\n\n      // HELPERS\n\n      /**\n       * generate a id for the assignment dom node based on it's record id\n       * @param {string} id record id\n       */\n      contentNodeID(id) {\n         return `contentnode_${id}`;\n      }\n\n      /**\n       * generate a id for the team dom node based on it's record id\n       * @param {string} id record id\n       */\n      teamNodeID(id) {\n         return `teamnode_${id}`;\n      }\n\n      /**\n       * extract the record id from the team dom node id\n       * @param {string} id dom node id\n       */\n      teamRecordID(id) {\n         return id.split(\"_\")[1];\n      }\n\n      /**\n       * Recursively finds the closest ancestor element that matches the provided function.\n       * @param {Element} el - The starting element.\n       * @param {Function} fn - The function to test against.\n       * @return {Element|null} The closest matching ancestor element or null if no match is found.\n       */\n      closest(el, fn) {\n         return (\n            el &&\n            (fn(el) &&\n            el !== document.querySelector(`#${this.ids.chartContent}`)\n               ? el\n               : this.closest(el.parentNode, fn))\n         );\n      }\n\n      busy() {\n         const $chartView = $$(this.ids.chartContent);\n         $chartView.disable();\n         $chartView.showProgress({ type: \"icon\" });\n      }\n\n      ready() {\n         const $chartView = $$(this.ids.chartContent);\n         $chartView.enable();\n         $chartView.hideProgress();\n      }\n   };\n}\n\n/**\n * Creates a new HTML element with the given type and classes\n * @param {string} type - The type of the HTML element to create.\n * @param {string} classes - A space-separated list of classes to add to the element.\n * @returns {Element} The newly created HTML element.\n */\nfunction element(type, classes) {\n   const elem = document.createElement(type);\n   elem.classList.add(...classes.split(\" \"));\n   return elem;\n}\n\n// TODO (Guy): Hardcode by specipic fields.\nfunction sortByEmployeeLastname(a, b) {\n   return (a.lastName ?? \"\").toLowerCase() > (b.lastName ?? \"\").toLowerCase()\n      ? 1\n      : -1;\n}\n\nfunction sortByTeamName(a, b) {\n   return (a.name ?? \"\").toLowerCase() > (b.name ?? \"\").toLowerCase() ? 1 : -1;\n}\n","import coreView from \"./ABViewOrgChartTeamsCore\";\nimport component from \"./ABViewOrgChartTeamsComponent\";\n\nexport default function (ABView, ABViewComponent) {\n   const ABViewOrgChartTeamsCore = coreView(ABView);\n   const ABViewOrgChartTeamsComponent = component(ABViewComponent);\n   return class ABViewOrgChartTeams extends ABViewOrgChartTeamsCore {\n      /**\n       * @method component()\n       * return a UI component based upon this view.\n       * @return {obj} UI component\n       */\n      component() {\n         return new ABViewOrgChartTeamsComponent(this);\n      }\n   };\n}\n","/**\n * ABViewOrgChartEditor\n * The widget that displays the UI Editor Component on the screen\n * when designing the UI.\n */\nvar myClass = null;\n// {singleton}\n// we will want to call this factory fn() repeatedly in our imports,\n// but we only want to define 1 Class reference.\n\nexport default function (AB, FABViewDefault) {\n   if (!myClass) {\n      const ABViewDefault = FABViewDefault(AB);\n      // var L = UIClass.L();\n      // var L = ABViewContainer.L();\n\n      myClass = class ABViewOrgChartTeamsEditor extends ABViewDefault {\n         static get key() {\n            return \"plugin_hr_teams\";\n         }\n\n         constructor(view, base = \"interface_editor_viewOrgChartTeans\") {\n            // base: {string} unique base id reference\n\n            super(view, base);\n\n            // this.component = this.view.component();\n         }\n\n         ui() {\n            let _ui = super.ui();\n            return _ui;\n         }\n\n         init(AB) {\n            this.AB = AB;\n            return super.init(AB);\n         }\n\n         detatch() {\n            this.component?.detatch?.();\n         }\n\n         onShow() {\n            this.component?.onShow?.();\n         }\n      };\n   }\n\n   return myClass;\n}\n","/*\n * ABViewChartTeams\n * A Property manager for our ABViewChartTeams definitions\n */\n\nexport default function (AB, FABView) {\n   const BASE_ID = \"properties_abview_org_chart_teams\";\n\n   const ABView = FABView(AB);\n   const uiConfig = AB.Config.uiSettings();\n   const L = ABView.L();\n\n   class ABViewOrgChartTeamsProperty extends ABView {\n      constructor() {\n         super(BASE_ID, {\n            datacollectionID: \"\",\n            strategyCode: \"\",\n            subStrategy: \"\",\n            teamInactive: \"\",\n            teamCanInactivate: \"\",\n            teamLink: \"\",\n            teamName: \"\",\n            teamStrategy: \"\",\n            topTeam: \"\",\n            fields: \"\",\n            direction: \"\",\n            depth: \"\",\n            draggable: \"\",\n            dropContentToCreate: \"\",\n            pan: \"\",\n            zoom: \"\",\n            height: \"\",\n            export: \"\",\n            exportFilename: \"\",\n            groupByField: \"\",\n            showGroupTitle: \"\",\n            editContentFieldsToCreateNew: \"\",\n            setEditableContentFields: \"\",\n            contentField: \"\",\n            contentFieldFilter: \"\",\n            contentFieldDateStart: \"\",\n            contentFieldDateEnd: \"\",\n            contentFieldFilterButton: \"\",\n            contentGroupByField: \"\",\n            contentDisplayedFields: \"\",\n            contentDisplayedFieldsAdd: \"\",\n            contentDisplayedFieldFilters: \"\",\n            contentDisplayedFieldFiltersSet: \"\",\n            contentDisplayedFieldTypes: \"\",\n            contentDisplayedFieldTypesSet: \"\",\n            contentDisplayedFieldMappingData: \"\",\n            contentDisplayedFieldMappingDataSet: \"\",\n            showDataPanel: \"\",\n            dataPanelDCs: \"\",\n            dataPanelDCsAdd: \"\",\n            strategyColorPopup: \"\",\n            strategyColorForm: \"\",\n            entityDatacollection: \"\",\n         });\n         this.AB = AB;\n         const contentFieldFilter = (this.contentFieldFilter =\n            AB.filterComplexNew(this.ids.contentFieldFilter));\n         contentFieldFilter.on(\"save\", () => {\n            if (\n               !contentFieldFilter.isConditionComplete(\n                  contentFieldFilter.getValue()\n               )\n            )\n               contentFieldFilter.setValue({ glue: \"and\", rules: [] });\n            this.onChange();\n         });\n      }\n\n      static get key() {\n         return \"plugin_hr_teams\";\n      }\n\n      _uiDataPanelDC(labelValue = \"\", dcID = \"\") {\n         const self = this;\n         const ids = self.ids;\n         const $dataPanelDCs = $$(ids.dataPanelDCs);\n         const validOBJIDs = this.CurrentView.datacollection.datasource\n            .fieldByID($$(ids.contentField).getValue())\n            .datasourceLink.connectFields(\n               (connectField) => connectField.linkType() === \"one\"\n            )\n            .map((connectField) => connectField.datasourceLink.id);\n         const dcs = this.AB.datacollections(\n            (dc) => validOBJIDs.indexOf(dc.datasource.id) > -1\n         );\n         const dcOptions = dcs.map((dc) => ({\n            id: dc.id,\n            value: dc.label,\n            dc,\n         }));\n         const getUILabel = (dcID, elementIndex) => ({\n            view: \"text\",\n            name: `${elementIndex}.${dcID}`,\n            // label: L(\"Name\"),\n            // labelWidth: uiConfig.labelWidthMedium,\n            on: {\n               onChange: () => {\n                  this.onChange();\n               },\n               onViewShow() {\n                  this.setValue(labelValue);\n               },\n            },\n         });\n         return {\n            cols: [\n               {\n                  view: \"richselect\",\n                  label: `${L(\"Panel\")} ${\n                     $dataPanelDCs.getChildViews().length + 1\n                  }`,\n                  labelWidth: uiConfig.labelWidthMedium,\n                  options: dcOptions,\n                  on: {\n                     onChange(newValue) {\n                        const $parentView = this.getParentView();\n                        const sameLevelViews = $parentView.getChildViews();\n                        if ($parentView.getChildViews().length === 3)\n                           $parentView.removeView(sameLevelViews[1].config.id);\n                        $parentView.addView(\n                           getUILabel(\n                              newValue,\n                              $dataPanelDCs\n                                 .getChildViews()\n                                 .findIndex(\n                                    ($dataPanelDCsChild) =>\n                                       $dataPanelDCsChild === $parentView\n                                 )\n                           ),\n                           1\n                        );\n                     },\n                     onViewShow() {\n                        if (dcID == null || dcID === \"\") return;\n                        this.setValue(dcID);\n                     },\n                  },\n               },\n               {\n                  view: \"button\",\n                  css: \"webix_danger\",\n                  type: \"icon\",\n                  icon: \"wxi-close\",\n                  width: uiConfig.buttonWidthExtraSmall,\n                  click() {\n                     self.deleteDataPanelDC(this.getParentView().config.id);\n                     self.onChange();\n                  },\n               },\n            ],\n         };\n      }\n\n      _uiContentDisplayedField(fieldID = \"\", obj, atDisplay) {\n         const self = this;\n         const ids = self.ids;\n         const datasource = this.CurrentView.datacollection.datasource;\n         const datasourceID = datasource.id;\n         const parentObj = datasource.fieldByID(\n            $$(ids.contentField).getValue()\n         ).datasourceLink;\n         const parentObjID = parentObj.id;\n         const objID = obj?.id || parentObjID;\n         const $contentDisplayedFields = $$(ids.contentDisplayedFields);\n         const $contentDisplayedFieldTypes = $$(ids.contentDisplayedFieldTypes);\n         const $contentDisplayedFieldMappingData = $$(\n            ids.contentDisplayedFieldMappingData\n         );\n         const $contentDisplayedFieldFilters = $$(\n            ids.contentDisplayedFieldFilters\n         );\n         const filterFields = (f) => {\n            const linkedObjID = f.datasourceLink?.id;\n            return linkedObjID !== datasourceID && linkedObjID !== parentObjID;\n         };\n         const getOnSelectChangeFn =\n            (currentObj, currentAtDisplay) => (newValue) => {\n               const field = currentObj.fieldByID(newValue);\n               if (field.key === \"connectObject\") {\n                  $contentDisplayedFields.addView(\n                     this._uiContentDisplayedField(\n                        \"\",\n                        field.datasourceLink,\n                        currentAtDisplay\n                     )\n                  );\n               }\n               this.populateContentDisplayedFields(\n                  $contentDisplayedFields.getValues(),\n                  $contentDisplayedFieldTypes.getValues(),\n                  $contentDisplayedFieldMappingData.getValues(),\n                  $contentDisplayedFieldFilters.getValues()\n               );\n               this.onChange();\n            };\n         if (objID === parentObjID) {\n            const rootAtDisplay = Object.keys(\n               $contentDisplayedFields.elements\n            ).filter((key) => key.includes(objID)).length;\n            return {\n               cols: [\n                  {\n                     view: \"richselect\",\n                     name: `${rootAtDisplay}.${parentObjID}`,\n                     label: `${L(\"Display\")} ${rootAtDisplay + 1}`,\n                     labelWidth: uiConfig.labelWidthMedium,\n                     options:\n                        parentObj.fields(filterFields).map(fieldToOption) || [],\n                     value: fieldID,\n                     on: {\n                        onChange: getOnSelectChangeFn(parentObj, rootAtDisplay),\n                     },\n                  },\n                  {\n                     view: \"button\",\n                     css: \"webix_danger\",\n                     type: \"icon\",\n                     icon: \"wxi-close\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click() {\n                        self.deleteContentDisplayedField(\n                           this.getParentView().getChildViews()[0].config.id\n                        );\n                        self.onChange();\n                     },\n                  },\n               ],\n            };\n         }\n         return {\n            cols: [\n               {\n                  view: \"richselect\",\n                  name: `${atDisplay}.${objID}`,\n                  label: \"->\",\n                  labelWidth: uiConfig.labelWidthMedium,\n                  options: obj.fields(filterFields).map(fieldToOption) || [],\n                  value: fieldID,\n                  on: {\n                     onChange: getOnSelectChangeFn(obj, atDisplay),\n                  },\n               },\n               {\n                  view: \"button\",\n                  css: \"webix_danger\",\n                  type: \"icon\",\n                  icon: \"wxi-close\",\n                  width: uiConfig.buttonWidthExtraSmall,\n                  click() {\n                     self.deleteContentDisplayedField(\n                        this.getParentView().getChildViews()[0].config.id\n                     );\n                     self.onChange();\n                  },\n               },\n            ],\n         };\n      }\n\n      ui() {\n         const ids = this.ids;\n         const contentFieldFilter = this.contentFieldFilter;\n         return super.ui([\n            {\n               id: ids.datacollectionID,\n               name: \"datacollectionID\",\n               view: \"richselect\",\n               label: L(\"Team Data\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: (value) => {\n                     this.CurrentView.settings.datacollectionID = value;\n                     const obj = this.CurrentView?.datacollection?.datasource;\n                     this.populateTeamFieldOptions(obj);\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.teamLink,\n               view: \"richselect\",\n               label: L(\"Team Link\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.teamName,\n               view: \"richselect\",\n               label: L(\"Team Name\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.topTeam,\n               view: \"richselect\",\n               label: L(\"Top Team\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.teamInactive,\n               view: \"richselect\",\n               label: L(\"Team Inactive\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.teamCanInactivate,\n               view: \"richselect\",\n               label: L(\"Can Inactivate\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               cols: [\n                  {\n                     view: \"label\",\n                     label: L(\"Content Field\"),\n                     width: uiConfig.labelWidthLarge,\n                  },\n                  {\n                     id: ids.contentField,\n                     name: \"contentField\",\n                     view: \"richselect\",\n                     options: [],\n                     on: {\n                        onChange: (newValue) => {\n                           const $editContentFieldsToCreateNew = $$(\n                              ids.editContentFieldsToCreateNew\n                           );\n                           const $setEditableContentFields = $$(\n                              ids.setEditableContentFields\n                           );\n                           const $contentDisplayedFieldsAdd = $$(\n                              ids.contentDisplayedFieldsAdd\n                           );\n                           const $contentFieldFilterButton = $$(\n                              ids.contentFieldFilterButton\n                           );\n                           const $contentGroupByField = $$(\n                              ids.contentGroupByField\n                           );\n                           const $contentFieldDateStart = $$(\n                              ids.contentFieldDateStart\n                           );\n                           const $contentFieldDateEnd = $$(\n                              ids.contentFieldDateEnd\n                           );\n                           const $showGroupTitle = $$(ids.showGroupTitle);\n                           contentFieldFilter.init();\n                           contentFieldFilter.setValue({\n                              glue: \"and\",\n                              rules: [],\n                           });\n                           if (newValue != null && newValue !== \"\") {\n                              const contentObj =\n                                 this.CurrentView.datacollection.datasource.fieldByID(\n                                    newValue\n                                 ).datasourceLink;\n                              const contentObjFields = contentObj.fields();\n                              const contentDateFiels = contentObjFields.filter(\n                                 (field) =>\n                                    field.key === \"date\" ||\n                                    field.key === \"datetime\"\n                              );\n                              $contentFieldDateStart.define(\n                                 \"options\",\n                                 contentDateFiels.map(fieldToOption)\n                              );\n                              $contentFieldDateEnd.define(\n                                 \"options\",\n                                 contentDateFiels.map(fieldToOption)\n                              );\n                              const contentObjMappedFields =\n                                 // contentObjFields.map(fieldToOption) *** (Guy) this makes my chrome browser crash (Only multi-selection) it is because { field: f } ***\n                                 contentObjFields.map((contentObjField) => ({\n                                    id: contentObjField.id,\n                                    value: contentObjField.label,\n                                 }));\n                              $editContentFieldsToCreateNew.define(\n                                 \"options\",\n                                 contentObjMappedFields\n                              );\n                              $setEditableContentFields.define(\n                                 \"options\",\n                                 contentObjMappedFields\n                              );\n                              contentFieldFilter.fieldsLoad(contentObjFields);\n                              $contentGroupByField.define(\"options\", [\n                                 { id: \"\", value: \"\", $empty: true },\n                                 ...contentObjFields\n                                    .filter(\n                                       (f) => f.key === \"connectObject\" //&&\n                                       // f.settings.isMultiple === 0\n                                    )\n                                    .map(fieldToOption),\n                              ]);\n                              $editContentFieldsToCreateNew.enable();\n                              $contentFieldFilterButton.enable();\n                              $contentDisplayedFieldsAdd.show();\n                              $contentFieldDateStart.show();\n                              $contentFieldDateEnd.show();\n                              $contentGroupByField.show();\n                              $showGroupTitle.show();\n                           } else {\n                              $editContentFieldsToCreateNew.define(\n                                 \"options\",\n                                 []\n                              );\n                              contentFieldFilter.fieldsLoad([]);\n                              $contentGroupByField.define(\"options\", []);\n                              $editContentFieldsToCreateNew.enable();\n                              $contentFieldFilterButton.disable();\n                              $contentDisplayedFieldsAdd.hide();\n                              $contentFieldDateStart.hide();\n                              $contentFieldDateEnd.hide();\n                              $contentGroupByField.hide();\n                              $showGroupTitle.hide();\n                           }\n                           $editContentFieldsToCreateNew.setValue([]);\n                           $showGroupTitle.setValue(0);\n                           $contentGroupByField.setValue(\"\");\n                           this.populateContentDisplayedFields();\n                           this.onChange();\n                        },\n                     },\n                  },\n                  {\n                     id: ids.contentFieldFilterButton,\n                     view: \"button\",\n                     type: \"icon\",\n                     icon: \"fa fa-filter\",\n                     css: \"webix_primary\",\n                     disabled: true,\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click() {\n                        contentFieldFilter.popUp(this.$view, null, {\n                           pos: \"top\",\n                        });\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.contentFieldDateStart,\n               name: \"contentFieldDateStart\",\n               label: L(\"Date Start\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               view: \"richselect\",\n               options: [],\n               on: {\n                  onChange: () => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.contentFieldDateEnd,\n               name: \"contentFieldDateEnd\",\n               label: L(\"Date End\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               view: \"richselect\",\n               options: [],\n               on: {\n                  onChange: () => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.contentGroupByField,\n               hidden: true,\n               view: \"richselect\",\n               label: L(\"Content Group By Field\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: (/*newValue*/) => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.showGroupTitle,\n               hidden: true,\n               name: \"showGroupTitle\",\n               view: \"checkbox\",\n               label: L(\"Show Group Title\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: {\n                  onChange: (/*newValue*/) => {\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\n                        \"Force the creation of a new row of data by editing the content fields\"\n                     ),\n                  },\n                  {\n                     id: ids.editContentFieldsToCreateNew,\n                     view: \"multicombo\",\n                     value: [],\n                     options: [],\n                     placeholder: L(\n                        \"Choose the content fields to create a new entry through editing\"\n                     ),\n                     labelAlign: \"left\",\n                     stringResult: false /* returns data as an array of [id] */,\n                     on: {\n                        onChange: () => {\n                           this.onChange();\n                        },\n                     },\n                  },\n                  {\n                     view: \"label\",\n                     label: L(\"Set the editable content fields\"),\n                  },\n                  {\n                     id: ids.setEditableContentFields,\n                     view: \"multicombo\",\n                     value: [],\n                     options: [],\n                     placeholder: L(\"Choose the editable content fields\"),\n                     labelAlign: \"left\",\n                     stringResult: false /* returns data as an array of [id] */,\n                     on: {\n                        onChange: () => {\n                           this.onChange();\n                        },\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFieldsAdd,\n               hidden: true,\n               cols: [\n                  {\n                     view: \"label\",\n                     label: L(\"Content Displayed Fields\"),\n                  },\n                  {\n                     view: \"button\",\n                     type: \"icon\",\n                     icon: \"fa fa-plus\",\n                     css: \"webix_primary\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click: () => {\n                        const $contentDisplayedFields = $$(\n                           ids.contentDisplayedFields\n                        );\n                        if (!$contentDisplayedFields.isVisible())\n                           $contentDisplayedFields.show();\n                        $contentDisplayedFields.addView(\n                           this._uiContentDisplayedField()\n                        );\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFields,\n               view: \"form\",\n               hidden: true,\n               elements: [],\n            },\n            {\n               id: ids.contentDisplayedFieldTypesSet,\n               hidden: true,\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\n                        \"Set content active displays and displayed types\"\n                     ),\n                  },\n                  {\n                     id: ids.contentDisplayedFieldTypes,\n                     view: \"form\",\n                     elements: [],\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFieldMappingDataSet,\n               hidden: true,\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\"Set content mapping displayed data\"),\n                  },\n                  {\n                     id: ids.contentDisplayedFieldMappingData,\n                     view: \"form\",\n                     elements: [],\n                  },\n               ],\n            },\n            {\n               id: ids.contentDisplayedFieldFiltersSet,\n               hidden: true,\n               rows: [\n                  {\n                     view: \"label\",\n                     label: L(\"Set content displayed filters by field\"),\n                  },\n                  {\n                     id: ids.contentDisplayedFieldFilters,\n                     view: \"form\",\n                     elements: [],\n                  },\n               ],\n            },\n            {\n               id: ids.showDataPanel,\n               name: \"showDataPanel\",\n               view: \"checkbox\",\n               label: L(\"Show Data Panel\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: {\n                  onChange: (newValue) => {\n                     const $dataPanelDCsAdd = $$(ids.dataPanelDCsAdd);\n                     if (newValue === 1) $dataPanelDCsAdd.show();\n                     else $dataPanelDCsAdd.hide();\n                     this.populateDataPanelDCs({});\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.dataPanelDCsAdd,\n               hidden: true,\n               cols: [\n                  {\n                     view: \"label\",\n                     label: L(\"Data Panel DCs\"),\n                  },\n                  {\n                     view: \"button\",\n                     type: \"icon\",\n                     icon: \"fa fa-plus\",\n                     css: \"webix_primary\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click: () => {\n                        const $dataPanelDCs = $$(ids.dataPanelDCs);\n                        if (!$dataPanelDCs.isVisible()) $dataPanelDCs.show();\n                        $dataPanelDCs.addView(this._uiDataPanelDC());\n                     },\n                  },\n               ],\n            },\n            {\n               id: ids.dataPanelDCs,\n               view: \"form\",\n               hidden: true,\n               elements: [],\n            },\n            {\n               id: ids.teamStrategy,\n               view: \"richselect\",\n               label: L(\"Strategy\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: (value) => {\n                     this.populateStrategyOptions(value);\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               cols: [\n                  {\n                     id: ids.strategyCode,\n                     view: \"richselect\",\n                     label: L(\"Strategy Code\"),\n                     labelWidth: uiConfig.labelWidthLarge,\n                     options: [],\n                     on: {\n                        onChange: () => {\n                           this.onChange();\n                           $$(this.ids.strategyColorPopup)?.close();\n                        },\n                     },\n                  },\n                  {\n                     view: \"icon\",\n                     icon: \"fa fa-paint-brush\",\n                     allign: \"right\",\n                     click: () => this.strategyColorPopup(),\n                  },\n               ],\n            },\n            {\n               id: ids.subStrategy,\n               view: \"richselect\",\n               label: L(\"Sub Strategy\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.draggable,\n               name: \"draggable\",\n               view: \"checkbox\",\n               label: L(\"Drag & Drop\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: {\n                  onChange: (newValue) => {\n                     const $dropContentToCreate = $$(ids.dropContentToCreate);\n                     if (newValue === 0) {\n                        $dropContentToCreate.setValue(0);\n                        $dropContentToCreate.hide();\n                     } else $dropContentToCreate.show();\n                     this.onChange();\n                  },\n               },\n            },\n            {\n               id: ids.dropContentToCreate,\n               name: \"dropContentToCreate\",\n               view: \"checkbox\",\n               label: L(\"Drop content to create\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               hidden: true,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.direction,\n               name: \"direction\",\n               view: \"richselect\",\n               label: L(\"Direction\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [\n                  { id: \"t2b\", value: L(\"Top to Bottom\") },\n                  { id: \"b2t\", value: L(\"Bottom to Top\") },\n                  { id: \"l2r\", value: L(\"Left to Right\") },\n                  { id: \"r2l\", value: L(\"Right to Left\") },\n               ],\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.entityDatacollection,\n               name: \"entityDatacollection\",\n               view: \"richselect\",\n               label: L(\"Entity\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               options: [],\n               on: {\n                  onChange: () => this.onChange(),\n               },\n            },\n            {\n               id: ids.depth,\n               name: \"depth\",\n               hidden: true, // NOTE: use choose Connect Fields option\n               view: \"counter\",\n               label: L(\"Depth\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               hidden: true, // NOTE: does not support\n               id: ids.pan,\n               name: \"pan\",\n               view: \"checkbox\",\n               label: L(\"Pan\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               hidden: true, // NOTE: does not support\n               id: ids.zoom,\n               name: \"zoom\",\n               view: \"checkbox\",\n               label: L(\"Zoom\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               value: 0,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               id: ids.height,\n               view: \"counter\",\n               name: \"height\",\n               label: L(\"Height\"),\n               labelWidth: uiConfig.labelWidthLarge,\n               on: { onChange: () => this.onChange() },\n            },\n            {\n               hidden: true, // NOTE: does not support\n               view: \"fieldset\",\n               label: L(\"Export\"),\n               body: {\n                  view: \"layout\",\n                  borderless: true,\n                  rows: [\n                     {\n                        id: ids.export,\n                        name: \"export\",\n                        view: \"checkbox\",\n                        label: L(\"Is Exportable\"),\n                        labelWidth: uiConfig.labelWidthLarge,\n                        value: 0,\n                        on: {\n                           onChange: () => {\n                              this.onChange();\n                           },\n                        },\n                     },\n                     {\n                        id: ids.exportFilename,\n                        view: \"text\",\n                        name: \"exportFilename\",\n                        label: L(\"File name\"),\n                        placeholder: L(\"Enter file name\"),\n                        labelWidth: uiConfig.labelWidthLarge,\n                     },\n                  ],\n               },\n            },\n         ]);\n      }\n\n      async init(AB) {\n         this.AB = AB;\n         await super.init(AB);\n         webix.extend($$(this.ids.component), webix.ProgressBar);\n         this.contentFieldFilter.queriesLoad(\n            this.CurrentApplication?.queriesIncluded()\n         );\n      }\n\n      deleteContentDisplayedField(id) {\n         const ids = this.ids;\n         const $contentDisplayedFields = $$(ids.contentDisplayedFields);\n         const $elements = $contentDisplayedFields.elements;\n         const $richselect = $$(id);\n         const deletedElementKey = $richselect.config.name;\n         if (\n            deletedElementKey.includes(\n               this.CurrentView.datacollection.datasource.fieldByID(\n                  $$(ids.contentField).getValue()\n               ).datasourceLink.id\n            )\n         ) {\n            const deletedAtDisplay = deletedElementKey.split(\".\")[0];\n            for (const key in $elements) {\n               if (!key.includes(`${deletedAtDisplay}.`)) continue;\n               $contentDisplayedFields.removeView(\n                  $elements[key].getParentView().config.id\n               );\n            }\n         } else\n            $contentDisplayedFields.removeView(\n               $richselect.getParentView().config.id\n            );\n         this.populateContentDisplayedFields(\n            $contentDisplayedFields.getValues()\n         );\n      }\n\n      deleteDataPanelDC(id) {\n         const $dataPanelDCs = $$(this.ids.dataPanelDCs);\n         $dataPanelDCs.removeView(id);\n         this.populateDataPanelDCs($dataPanelDCs.getValues());\n      }\n\n      populate(view) {\n         super.populate(view);\n         const ids = this.ids;\n         const $component = $$(ids.component);\n         const defaultValues = this.defaultValues();\n         const values = Object.assign(\n            $component.getValues(),\n            Object.assign(defaultValues, view.settings)\n         );\n         // const $fieldList = $$(ids.fields);\n         // $fieldList.clearAll();\n         this.populateDatacollection(values.datacollectionId);\n         const teamObj = this.CurrentView?.datacollection?.datasource;\n         if (teamObj) {\n            this.populateTeamFieldOptions(teamObj);\n            [\n               \"teamCanInactivate\",\n               \"teamInactive\",\n               \"teamLink\",\n               \"teamName\",\n               \"teamStrategy\",\n               \"topTeam\",\n               \"contentField\",\n               \"contentGroupByField\",\n               \"editContentFieldsToCreateNew\",\n               \"setEditableContentFields\",\n               \"showGroupTitle\",\n               \"showDataPanel\",\n            ].forEach((f) => $$(ids[f]).setValue(values[f]));\n            this.contentFieldFilter.setValue(\n               JSON.parse(values.contentFieldFilter)\n            );\n            this.populateContentDisplayedFields(\n               values.contentDisplayedFields,\n               values.contentDisplayedFieldTypes,\n               values.contentDisplayedFieldMappingData,\n               values.contentDisplayedFieldFilters\n            );\n            this.populateDataPanelDCs(values.dataPanelDCs);\n            if (values.teamStrategy) {\n               this.populateStrategyOptions(values.teamStrategy);\n               $$(ids.strategyCode).setValue(values.strategyCode);\n               $$(ids.subStrategy).setValue(values.subStrategy);\n            }\n         }\n         $component.setValues(values);\n      }\n\n      populateDatacollection(datacollectionId) {\n         const $dataCollection = $$(this.ids.datacollectionID);\n\n         // Pull data collections to options\n         const dcOptions = this.CurrentView.application\n            .datacollectionsIncluded()\n            .map((d) => {\n               return { id: d.id, value: d.label };\n            });\n         $dataCollection.define(\"options\", dcOptions);\n         $dataCollection.define(\"value\", datacollectionId);\n         $dataCollection.refresh();\n         $$(this.ids.entityDatacollection).define(\"options\", dcOptions);\n         $$(this.ids.entityDatacollection).refresh();\n      }\n\n      refreshValueFieldOptions(fieldValues = []) {\n         const ids = this.ids;\n         const view = this.CurrentView;\n         const $fieldList = $$(ids.fields);\n\n         $fieldList.clearAll();\n\n         // Populate 1:M fields option of the root object\n         this.populateSubValueFieldOptions(view.datacollection?.datasource);\n\n         // Populate sub 1:M fields option of each fields\n         fieldValues.forEach((fId) => {\n            if (!fId) return;\n\n            const $fieldItem = $fieldList.getItem(fId);\n            if ($fieldItem) {\n               const abField = $fieldItem.field;\n               this.populateSubValueFieldOptions(abField.datasourceLink, fId);\n            }\n         });\n\n         // Set check items\n         $fieldList.blockEvent();\n         fieldValues.forEach((fId) => {\n            if ($fieldList.exists(fId)) $fieldList.checkItem(fId);\n         });\n         $fieldList.unblockEvent();\n      }\n\n      populateTeamFieldOptions(object) {\n         const view = this.CurrentView;\n         const ids = this.ids;\n         const m2oFields = view.getValueFields(object).map(fieldToOption);\n         const o2mFields =\n            object.connectFields(\n               (f) => f.linkType() == \"one\" && f.linkViaType() == \"many\"\n            ) ?? [];\n         $$(ids.teamStrategy).define(\"options\", o2mFields.map(fieldToOption));\n         $$(ids.teamLink).define(\"options\", m2oFields);\n         const textFields = object\n            ?.fields((f) => f.key === \"string\")\n            .map(fieldToOption);\n         $$(ids.teamName).define(\"options\", textFields);\n         const booleanFields = object\n            ?.fields((f) => f.key === \"boolean\")\n            .map(fieldToOption);\n\n         // Add an empty option as this is an optional setting.\n         booleanFields.unshift({ id: \"\", value: \"\", $empty: true });\n         $$(ids.topTeam).define(\"options\", booleanFields);\n         $$(ids.teamInactive).define(\"options\", booleanFields);\n         $$(ids.teamCanInactivate).define(\"options\", booleanFields);\n         $$(ids.contentField).define(\"options\", [\n            { id: \"\", value: \"\", $empty: true },\n            ...m2oFields,\n         ]);\n      }\n\n      populateContentDisplayedFields(\n         values = {},\n         types = {},\n         mappingDataValues = {},\n         filters = {}\n      ) {\n         const self = this;\n         const webix = this.AB.Webix;\n         const ids = this.ids;\n         const $contentDisplayedFields = $$(ids.contentDisplayedFields);\n         const contentDisplayedFieldsElements =\n            $contentDisplayedFields.elements;\n         for (const key in contentDisplayedFieldsElements)\n            $contentDisplayedFields.removeView(\n               contentDisplayedFieldsElements[key].getParentView().config.id\n            );\n         const $contentDisplayedFieldTypes = $$(ids.contentDisplayedFieldTypes);\n         const contentDisplayedFieldTypesElements =\n            $contentDisplayedFieldTypes.elements;\n         const $contentDisplayedFieldTypesSet = $$(\n            ids.contentDisplayedFieldTypesSet\n         );\n         for (const key in contentDisplayedFieldTypesElements)\n            $contentDisplayedFieldTypes.removeView(\n               contentDisplayedFieldTypesElements[key].getParentView().config.id\n            );\n         const $contentDisplayedFieldMappingData = $$(\n            ids.contentDisplayedFieldMappingData\n         );\n         const contentDisplayedFieldMappingDataElements =\n            $contentDisplayedFieldMappingData.elements;\n         const $contentDisplayedFieldMappingDataSet = $$(\n            ids.contentDisplayedFieldMappingDataSet\n         );\n         const $contentDisplayedFieldFilters = $$(\n            ids.contentDisplayedFieldFilters\n         );\n         for (const key in contentDisplayedFieldMappingDataElements)\n            $contentDisplayedFieldMappingData.removeView(\n               contentDisplayedFieldMappingDataElements[key].getParentView()\n                  .config.id\n            );\n         const contentDisplayedFieldFiltersElements =\n            $contentDisplayedFieldFilters.elements;\n         const $contentDisplayedFieldFiltersSet = $$(\n            ids.contentDisplayedFieldFiltersSet\n         );\n         for (const key in contentDisplayedFieldFiltersElements)\n            $contentDisplayedFieldFilters.removeView(\n               contentDisplayedFieldFiltersElements[key].getParentView().config\n                  .id\n            );\n         $contentDisplayedFieldTypesSet.hide();\n         $contentDisplayedFieldMappingDataSet.hide();\n         $contentDisplayedFieldFiltersSet.hide();\n         const keys = Object.keys(values);\n         if (keys.length === 0) {\n            $contentDisplayedFields.hide();\n            return;\n         }\n         const obj = this.CurrentView.datacollection.datasource.fieldByID(\n            $$(ids.contentField).getValue()\n         )?.datasourceLink;\n         if (obj == null) {\n            $contentDisplayedFields.hide();\n            $$(ids.contentDisplayedFieldsAdd).hide();\n            return;\n         }\n         const typeKeys = Object.keys(types);\n         const filterKeys = Object.keys(filters);\n         const objID = obj.id;\n         const parentKeys = [];\n         const childKeys = [];\n         const createOptionsView = (key, field) => {\n            const optionPrefix = `${key}.${field.id}`;\n            const fieldLabel = field.label;\n            const typeKeyIndex = typeKeys.findIndex(\n               (typeKey) => typeKey.indexOf(optionPrefix) > -1\n            );\n            const typeSwitchValue = parseInt(\n               typeKeys\n                  .find((typeKey) => typeKey.indexOf(optionPrefix) > -1)\n                  ?.split(\".\")[3]\n            );\n            $contentDisplayedFieldTypes.addView({\n               cols: [\n                  {\n                     view: \"switch\",\n                     label: fieldLabel,\n                     labelWidth: uiConfig.labelWidthMedium,\n                     value: isNaN(typeSwitchValue) ? 1 : typeSwitchValue,\n                     on: {\n                        onChange: (newValue, oldValue) => {\n                           const oldTypes =\n                              $contentDisplayedFieldTypes.getValues();\n                           const oldTypeEntries = Object.entries(oldTypes);\n                           const newTypes = {};\n                           const oldTypePrefix = `${optionPrefix}.${oldValue}`;\n                           for (const [key, value] of oldTypeEntries)\n                              if (key.indexOf(oldTypePrefix) > -1)\n                                 newTypes[`${optionPrefix}.${newValue}`] =\n                                    value;\n                              else newTypes[key] = value;\n                           this.populateContentDisplayedFields(\n                              $contentDisplayedFields.getValues(),\n                              newTypes,\n                              $contentDisplayedFieldMappingData.getValues(),\n                              $contentDisplayedFieldFilters.getValues()\n                           );\n                           this.onChange();\n                        },\n                        onViewShow() {\n                           this.getParentView().addView({\n                              view: \"richselect\",\n                              options: [\n                                 { id: \"icon\", value: \"Icon\" },\n                                 { id: \"image\", value: \"Image\" },\n                                 { id: \"svg\", value: \"SVG\" },\n                                 { id: \"text\", value: \"Text\" },\n                              ],\n                              name: `${optionPrefix}.${this.getValue()}`,\n                              value:\n                                 (typeKeyIndex > -1 &&\n                                    types[typeKeys[typeKeyIndex]]) ||\n                                 \"text\",\n                              on: {\n                                 onChange: () => {\n                                    self.onChange();\n                                 },\n                              },\n                           });\n                        },\n                     },\n                  },\n               ],\n            });\n            const mappingDataValue = mappingDataValues[optionPrefix];\n            $contentDisplayedFieldMappingData.addView({\n               cols: [\n                  {\n                     view: \"label\",\n                     label: fieldLabel,\n                     width: uiConfig.labelWidthMedium,\n                  },\n                  {\n                     view: \"button\",\n                     label: \"Set\",\n                     width: uiConfig.buttonWidthExtraSmall,\n                     click: () => {\n                        const getValueViewUI = (key = \"\", value = \"\") => ({\n                           cols: [\n                              {\n                                 view: \"text\",\n                                 placeholder: L(\"The value need to map.\"),\n                                 value: key,\n                              },\n                              {\n                                 view: \"label\",\n                                 label: L(\"to\"),\n                                 align: \"center\",\n                                 width: uiConfig.labelWidthSmall,\n                              },\n                              {\n                                 view: \"text\",\n                                 placeholder: (() => {\n                                    switch (value) {\n                                       case \"icon\":\n                                          return L(\"Icon class text.\");\n                                       case \"image\":\n                                       case \"svg\":\n                                          return L(\n                                             \"Image url or Base64 (ex. data:image/png;base64,AAABBBCCC) url.\"\n                                          );\n                                       default:\n                                          return L(\"New text.\");\n                                    }\n                                 })(),\n                                 value,\n                              },\n                              {\n                                 view: \"button\",\n                                 css: \"webix_danger\",\n                                 type: \"icon\",\n                                 icon: \"wxi-close\",\n                                 width: uiConfig.buttonWidthExtraSmall,\n                                 click() {\n                                    const $childView = this.getParentView();\n                                    $childView\n                                       .getParentView()\n                                       .removeView($childView.config.id);\n                                 },\n                              },\n                           ],\n                        });\n                        const $popup = webix.ui({\n                           view: \"window\",\n                           close: true,\n                           title: L(\"Map Data\"),\n                           position: \"center\",\n                           body: {\n                              view: \"form\",\n                              elements: [\n                                 {\n                                    view: \"button\",\n                                    label: L(\"Add a value\"),\n                                    click() {\n                                       this.getParentView()\n                                          .getChildViews()[1]\n                                          .addView(getValueViewUI());\n                                    },\n                                 },\n                                 {\n                                    rows: [],\n                                 },\n                                 {\n                                    view: \"button\",\n                                    label: L(\"Apply\"),\n                                    click() {\n                                       const $valueView =\n                                          this.getParentView().getChildViews()[1];\n                                       const mapingValues = {};\n                                       const valueChildViews =\n                                          $valueView.getChildViews();\n                                       for (const $valueChildView of valueChildViews) {\n                                          const valueChildViewElements =\n                                             $valueChildView.getChildViews();\n                                          mapingValues[\n                                             valueChildViewElements[0].getValue()\n                                          ] =\n                                             valueChildViewElements[2].getValue();\n                                       }\n                                       $contentDisplayedFieldMappingData.elements[\n                                          optionPrefix\n                                       ]?.setValue(\n                                          JSON.stringify(mapingValues)\n                                       );\n                                       $popup.hide();\n                                       self.onChange();\n                                    },\n                                 },\n                              ],\n                           },\n                           on: {\n                              onHide() {\n                                 this.destructor();\n                              },\n                           },\n                        });\n                        try {\n                           const $valueView = $popup\n                              .getChildViews()[1]\n                              .getChildViews()[1];\n                           const mappingDataObj = JSON.parse(mappingDataValue);\n                           for (const key in mappingDataObj)\n                              $valueView.addView(\n                                 getValueViewUI(key, mappingDataObj[key])\n                              );\n                        } catch {}\n                        $popup.show();\n                     },\n                  },\n                  {\n                     view: \"text\",\n                     name: optionPrefix,\n                     disabled: true,\n                     value: mappingDataValue || JSON.stringify({}),\n                  },\n               ],\n            });\n            const filterCheckboxValue = parseInt(\n               filterKeys\n                  .find((filterKey) => filterKey.indexOf(optionPrefix) > -1)\n                  ?.split(\".\")[3]\n            );\n            $contentDisplayedFieldFilters.addView({\n               cols: [\n                  {\n                     view: \"checkbox\",\n                     label: fieldLabel,\n                     labelWidth: uiConfig.labelWidthMedium,\n                     value: isNaN(filterCheckboxValue)\n                        ? 0\n                        : filterCheckboxValue,\n                     on: {\n                        onChange: (newValue, oldValue) => {\n                           const oldFilters =\n                              $contentDisplayedFieldFilters.getValues();\n                           const oldFilterEntries = Object.entries(oldFilters);\n                           const newFilters = {};\n                           const oldFilterKey = `${optionPrefix}.${oldValue}`;\n                           for (const [key, value] of oldFilterEntries)\n                              if (key === oldFilterKey)\n                                 newFilters[`${optionPrefix}.${newValue}`] = \"\";\n                              else newFilters[key] = value;\n                           this.populateContentDisplayedFields(\n                              $contentDisplayedFields.getValues(),\n                              $contentDisplayedFieldTypes.getValues(),\n                              $contentDisplayedFieldMappingData.getValues(),\n                              newFilters\n                           );\n                           this.onChange();\n                        },\n                        onViewShow() {\n                           const currentFilterCheckboxValue = this.getValue();\n                           const filterKey = `${optionPrefix}.${currentFilterCheckboxValue}`;\n                           this.getParentView().addView({\n                              view: \"text\",\n                              placeholder: L(\"Add the new field label.\"),\n                              name: filterKey,\n                              value: filters[filterKey] || fieldLabel,\n                              disabled:\n                                 currentFilterCheckboxValue === 1\n                                    ? false\n                                    : true,\n                              on: {\n                                 onChange: () => {\n                                    self.onChange();\n                                 },\n                              },\n                           });\n                        },\n                     },\n                  },\n               ],\n            });\n         };\n         while (keys.length > 0) {\n            const key = keys.pop();\n            (key.includes(objID) && parentKeys.push(key)) ||\n               childKeys.push(key);\n         }\n         while (parentKeys.length > 0) {\n            const parentKey = parentKeys.pop();\n            const parentFieldID = values[parentKey] ?? \"\";\n            $contentDisplayedFields.addView(\n               this._uiContentDisplayedField(parentFieldID)\n            );\n            const parentField = obj.fieldByID(parentFieldID);\n            if (parentField == null) continue;\n            switch (parentField.key) {\n               case \"connectObject\":\n               case \"user\":\n                  break;\n               default:\n                  createOptionsView(parentKey, parentField);\n                  continue;\n            }\n            const currentAtDisplay =\n               Object.keys($contentDisplayedFields.getValues()).filter(\n                  (currentKey) => currentKey.includes(objID)\n               ).length - 1;\n            while (\n               childKeys.findIndex((childKey) =>\n                  childKey.includes(`${parentKey.split(\".\")[0]}.`)\n               ) > -1\n            ) {\n               const childKey = childKeys.pop();\n               const childObj = this.AB.objectByID(childKey.split(\".\")[1]);\n               const childFieldID = values[childKey] ?? \"\";\n               $contentDisplayedFields.addView(\n                  this._uiContentDisplayedField(\n                     childFieldID,\n                     childObj,\n                     currentAtDisplay\n                  )\n               );\n               const childField = childObj.fieldByID(childFieldID);\n               if (childField == null) continue;\n               switch (childField.key) {\n                  case \"connectObject\":\n                  case \"user\":\n                     break;\n                  default:\n                     createOptionsView(childKey, childField);\n                     continue;\n               }\n            }\n         }\n         $contentDisplayedFields.show();\n         $contentDisplayedFieldTypesSet.show();\n         $contentDisplayedFieldMappingDataSet.show();\n         $contentDisplayedFieldFiltersSet.show();\n      }\n\n      populateDataPanelDCs(values) {\n         const ids = this.ids;\n         const $dataPanelDCs = $$(ids.dataPanelDCs);\n         const dataPanelDCsChidren = $dataPanelDCs.getChildViews();\n         while (dataPanelDCsChidren.length > 0)\n            $dataPanelDCs.removeView(dataPanelDCsChidren[0].config.id);\n         $dataPanelDCs.hide();\n         const contentFieldValue = $$(ids.contentField).getValue();\n         const keys = Object.keys(values);\n         if (\n            contentFieldValue == null ||\n            contentFieldValue === \"\" ||\n            keys.length === 0\n         )\n            return;\n         while (keys.length > 0) {\n            const key = keys.shift();\n            $dataPanelDCs.addView(\n               this._uiDataPanelDC(values[key] ?? \"\", key.split(\".\")[1] ?? \"\")\n            );\n         }\n         $dataPanelDCs.show();\n      }\n\n      populateStrategyOptions(fieldID) {\n         const strategyObj = this.AB.objectByID(\n            this.AB.definitionByID(fieldID).settings.linkObject\n         );\n         const listFields = strategyObj\n            .fields((f) => f.key === \"connectObject\")\n            .map(fieldToOption);\n         $$(this.ids.strategyCode).define(\"options\", listFields);\n         $$(this.ids.subStrategy).define(\"options\", listFields);\n      }\n\n      async strategyColorPopup() {\n         const codeFieldID = $$(this.ids.strategyCode).getValue();\n         if (!codeFieldID) return;\n\n         let $popup = $$(this.ids.strategyColorPopup);\n\n         if (!$popup) {\n            const values = this.CurrentView.settings.strategyColors ?? {};\n            const link =\n               this.AB.definitionByID(codeFieldID).settings.linkObject;\n            const strategies = await this.AB.objectByID(link).model().findAll();\n            const strategyTypes = strategies.data.map((strategy) => {\n               return {\n                  view: \"colorpicker\",\n                  label: strategy.name,\n                  name: strategy.id,\n                  value: values[strategy.id] ?? \"#111111\",\n                  suggest: {\n                     type: \"colorselect\",\n                     body: {\n                        button: true,\n                     },\n                  },\n               };\n            });\n\n            $popup = this.AB.Webix.ui({\n               view: \"window\",\n               id: this.ids.strategyColorPopup,\n               close: true,\n               title: L(\"Set Colors\"),\n               position: \"center\",\n               body: {\n                  view: \"form\",\n                  id: this.ids.strategyColorForm,\n                  elements: [\n                     ...strategyTypes,\n                     {\n                        view: \"button\",\n                        label: L(\"Apply\"),\n                        click: () => {\n                           this.onChange();\n                           $$(this.ids.strategyColorPopup).hide();\n                        },\n                     },\n                  ],\n               },\n            });\n         }\n         $popup.show();\n      }\n\n      // populateDescriptionFieldOptions(fieldId) {\n      //    const valueField = this.CurrentView.valueField();\n      //    const $columnDescription = $$(this.ids.columnDescription);\n\n      //    const connectFieldOpts =\n      //       valueField?.datasourceLink\n      //          ?.fields?.((f) => f.key != \"connectObject\")\n      //          .map?.((f) => {\n      //             return {\n      //                id: f.id,\n      //                value: f.label,\n      //             };\n      //          }) ?? [];\n      //    $columnDescription.define(\"options\", connectFieldOpts);\n      //    $columnDescription.define(\"value\", fieldId);\n      //    $columnDescription.refresh();\n      // }\n\n      defaultValues() {\n         const ViewClass = this.ViewClass();\n\n         let values = null;\n\n         if (ViewClass) {\n            values = ViewClass.defaultValues();\n         }\n\n         return values;\n      }\n\n      /**\n       * @method values\n       * return the values for this form.\n       * @return {obj}\n       */\n      values() {\n         const values = super.values();\n         const ids = this.ids;\n         const settings = (values.settings = Object.assign(\n            $$(ids.component).getValues(),\n            values.settings\n         ));\n         // Retrive the values of your properties from Webix and store them in the view\n         settings.teamLink = $$(ids.teamLink).getValue();\n         settings.teamName = $$(ids.teamName).getValue();\n         settings.topTeam = $$(ids.topTeam).getValue();\n         settings.teamInactive = $$(ids.teamInactive).getValue();\n         settings.teamCanInactivate = $$(ids.teamCanInactivate).getValue();\n         settings.teamStrategy = $$(ids.teamStrategy).getValue();\n         settings.subStrategy = $$(ids.subStrategy).getValue();\n         settings.strategyCode = $$(ids.strategyCode).getValue();\n         settings.dataCollectionId = $$(ids.datacollectionID).getValue();\n         settings.contentField = $$(ids.contentField).getValue();\n         settings.contentGroupByField = $$(ids.contentGroupByField).getValue();\n         settings.editContentFieldsToCreateNew = $$(\n            ids.editContentFieldsToCreateNew\n         ).getValue();\n         settings.setEditableContentFields = $$(\n            ids.setEditableContentFields\n         ).getValue();\n         settings.contentFieldFilter = JSON.stringify(\n            this.contentFieldFilter.getValue()\n         );\n         settings.contentDisplayedFields = $$(\n            ids.contentDisplayedFields\n         ).getValues();\n         settings.contentDisplayedFieldTypes = $$(\n            ids.contentDisplayedFieldTypes\n         ).getValues();\n         settings.contentDisplayedFieldMappingData = $$(\n            ids.contentDisplayedFieldMappingData\n         ).getValues();\n         settings.contentDisplayedFieldFilters = $$(\n            ids.contentDisplayedFieldFilters\n         ).getValues();\n         settings.contentFieldDateStart = $$(\n            ids.contentFieldDateStart\n         ).getValue();\n         settings.contentFieldDateEnd = $$(ids.contentFieldDateEnd).getValue();\n         settings.dataPanelDCs = $$(ids.dataPanelDCs).getValues();\n         const $colorForm = $$(ids.strategyColorForm);\n         settings.strategyColors =\n            $colorForm?.getValues() ?? settings.strategyColors;\n         return values;\n      }\n\n      /**\n       * @method FieldClass()\n       * A method to return the proper ABViewXXX Definition.\n       * NOTE: Must be overwritten by the Child Class\n       */\n      ViewClass() {\n         return super._ViewClass(\"plugin_hr_teams\");\n      }\n   }\n\n   return ABViewOrgChartTeamsProperty;\n}\n\nfunction fieldToOption(f) {\n   return {\n      id: f.id,\n      value: f.label,\n      field: f,\n   };\n}\n","import view from \"./ABViewOrgChartTeams\";\nimport ABViewOrgChartTeamsEditor from \"./ABViewOrgChartTeamsEditor\";\nimport ABViewOrgChartTeamsProperty from \"./ABViewOrgChartTeamsProperty\";\n\nconst plugin = {\n   /* global VERSION -- injected by webpack define plugin */\n   version: VERSION,\n   key: \"HRTeams\",\n   apply: function (AB) {\n      const ABView = AB.Class.ABViewManager.viewClass(\"view\");\n      const ABViewComponent = AB.Class.ABViewComponent;\n\n      // Add our view class to ViewManager\n      const ABViewOrgChartTeams = view(ABView, ABViewComponent);\n      AB.Class.ABViewManager.addViewClass(ABViewOrgChartTeams);\n\n      // Convert Existing Views that have already been loaded (they got loaded\n      // as ABViews since our class wasn't loaded yet)\n      AB.applications().forEach((app) => {\n         app.views((v) => v.key === \"plugin_hr_teams\").forEach(\n            (view, i, views) => {\n               const newView = new ABViewOrgChartTeams(\n                  view.toObj(),\n                  view.application,\n                  view.parent\n               );\n               // Overwrite the view\n               views[i] = newView;\n               // Also update the parent view\n               const parent = view.parent;\n               parent.viewRemove(view);\n               parent.viewInsert(newView);\n            }\n         );\n      });\n\n      AB.pluginLoad({\n         id: this.key,\n         isPlugin: true,\n         label: \"HR Teams Widget\",\n         editor: ABViewOrgChartTeamsEditor,\n         viewProperty: ABViewOrgChartTeamsProperty,\n      });\n   },\n   definitions: () => [],\n   labels: () => [],\n};\n\nwindow.__AB_Plugins = window.__AB_Plugins || [];\n\nwindow.__AB_Plugins.push(plugin);\n"],"names":["deferred","inProgress","dataWebpackPrefix","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","id","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","F","E","chunkId","map","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","e","Promise","all","reduce","promises","u","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","call","l","url","done","push","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","setTimeout","bind","type","target","head","appendChild","Symbol","toStringTag","value","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","test","Error","replace","p","installedChunks","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","link","rel","as","href","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","ABViewOrgChartTeamsPropertyComponentDefaults","datacollectionID","teamLink","teamName","topTeam","teamStrategy","subStrategy","strategyCode","strategyColors","fields","direction","depth","color","draggable","showGroupTitle","dropContentToCreate","pan","zoom","height","export","exportFilename","contentField","editContentFieldsToCreateNew","setEditableContentFields","contentFieldFilter","contentFieldDateStart","contentFieldDateEnd","contentGroupByField","contentDisplayedFields","contentDisplayedFieldTypes","contentDisplayedFieldMappingData","contentDisplayedFieldFilters","showDataPanel","dataPanelDCs","ABViewOrgChartTeamsDefaults","icon","labelKey","classes","elem","classList","add","split","sortByEmployeeLastname","b","lastName","toLowerCase","sortByTeamName","ABView","ABViewComponent","ABViewOrgChartTeamsCore","ABViewWidget","constructor","values","application","parent","defaultValues","super","common","fromValues","settings","teamInactive","teamCanInactivate","parseInt","JSON","parse","connectFieldDateEnd","datacollection","AB","datacollectionByID","getValueFields","object","connectFields","linkType","linkViaType","valueFields","fieldValues","Array","isArray","datasource","fId","field","fieldByID","datasourceLink","ABViewOrgChartTeamsComponent","baseView","idBase","ids","assign","chartView","chartContent","chartHeader","dataPanel","dataPanelButton","dataPanelPopup","filterButton","filterPopup","filterForm","contentForm","contentFormData","teamForm","teamFormCode","teamFormPopup","teamFormStrategy","teamFormSubmit","teamFormTitle","_resources","_resolveInit","_promiseInit","__orgchart","__filters","inactive","_OrgChart","_promisePageData","_contentDC","_contentGroupDC","_contentDisplayDCs","_dataPanelDCs","_entityDC","_strategyCodeDC","_subStrategyDC","_teamStrategyDC","_chartData","_strategyCodeOpts","_strategyOpts","_fnContentDragEnd","_fnContentDragOver","preventDefault","stopPropagation","_fnContentDragStart","$eventTarget","dataset","dataTransfer","className","pk","contentLinkedFieldID","contentLinkedFieldId","source","setData","stringify","_fnContentDrop","async","getData","busy","teamObj","teamObjPK","PK","contentFieldLink","fieldLink","contentObj","contentDateStartFieldColumnName","columnName","contentDateEndFieldColumnName","contentGroupByFieldColumnName","contentFieldLinkColumnName","contentModel","model","$group","currentTarget","$content","parentElement","newGroupDataPK","newTeamDataPK","_rawData","updatedData","dataPK","draggedNodes","isRefreshed","$contentRecords","getElementsByClassName","dataPanelDC","dataPanelLinkedFieldColumnName","connectField","$contentRecord","contentRecord","ready","$draggedNode","querySelector","contentNodeID","_setUpdatedBy","_isLessThanDay","Date","update","_parseFormValueByType","pendingPromises","create","contentLinkedFieldColumnName","newDate","isUpdated","contentData","_parseDataPK","entityDC","entityLink","linkObject","entityCol","definitionByID","getCursor","_createUIContentRecord","err","console","log","remove","refresh","_fnCreateNode","$node","children","item","innerHTML","contentGroupDC","groupObjPKColumeName","contentGroupOptions","contentGroupOptionsLength","filteredOut","style","display","$nodeSpacer","nodeSpacerStyle","backgroundColor","group","groupStyle","groupColor","groupText","$groupTitle","createTextNode","$groupContent","addEventListener","$buttons","$editButton","append","$addButton","dataID","teamRecordID","onclick","__parentID","ondblclick","isInactive","$active","$span","teamCanDelete","$deleteButton","teamDelete","_fnNodeDrop","eventDetail","detail","dragedRecord","draggedNode","dc","linkColumn","dropZone","_fnPageContentCallback","contentRecords","isContentDone","contentDC","callback","_addContentRecordToGroup","$$","getChildViews","$childView","callEvent","_callPagingEvent","_fnPageContentDisplayCallback","contentDisplayRecords","isContentDisplayDone","contentDisplayDC","_waitDCReady","_fnPageData","mainCallback","records","loadData","_fnPageTeamCallback","teamRecords","isTeamDone","teamDC","teamRecord","getElementById","teamNodeID","teamAddChild","teamEdit","pullData","_fnRefresh","datacollectionLink","_waitDCPending","filter","_fnShowContentForm","contentDataRecord","rules","labelWidth","contentFormElements","fieldID","view","label","fieldKey","fieldName","invalidMessage","getValues","fieldLabel","isMultiple","options","option","text","abWebix","Webix","fieldLinkObj","disabled","on","onViewShow","extend","ProgressBar","showProgress","setValue","displayData","findAll","where","glue","rule","hideProgress","define","enable","stringResult","labelAlign","timepicker","css","click","$contentFormData","validate","newFormData","$contentForm","blockEvent","$view","destructor","_checkDataIsChanged","$contentNode","isCreated","editContentFieldToCreateNew","editContentFieldToCreateNewColumnName","confirm","title","ok","cancel","then","oldData","join","ui","close","position","body","width","rows","cols","align","hidden","elements","onHide","show","setValues","_convertToFormValueByType","structuredClone","_fnShowFilterPopup","$popup","webix","borderless","clear","labelRight","contentDisplayedFieldFilterViews","contentDisplayedFieldFilterKey","objID","isActive","contentGroupValue","filterApply","onShow","hide","colors","linkedContentFieldColumnName","$teamNode","contentGroupDataPK","contentGroupPKField","$groupSection","_callAfterRender","contentAllFields","parsedValue","isNaN","_createCustomDCByObjID","loadAll","linkedDC","datasourceID","populate","objectWorkspace","linkedObjID","linkFieldID","fieldIDs","find","linkDatacollectionID","filterConditions","datacollectionNew","$dc","__prevLinkDcCursor","toString","_initDC","$ui","borderColor","hardcodedDisplays","$hardcodedSpecialDisplay","currentDataRecords","currentField","currentDisplayIndex","contentObjID","contentDisplayedFieldsKeys","contentDisplayDCs","displayedFieldKey","atDisplay","displayedObj","objectByID","displayedFieldID","displayedField","displayDC","currentFieldColumnName","currentDataPKs","currentFieldData","pop","$currentDisplay","displayedFieldColumnName","contentDisplayedFieldTypePrefix","contentDisplayedFieldMappingDataObj","currentDataRecordValue","$img","currentDataRecord","currentDataRecordID","SVG_NS","X_LINK_NS","$svg","createElementNS","$rect","$defs","patternID","$pattern","$image","setAttributeNS","imageID","$use","textContent","slice","hardcodedDisplaysLength","$hardcodedDisplay","child","grandChildren","grandChildrenLength","isShown","childrenLength","hardcodedDisplayStyle","$editIcon","params","requestAnimationFrame","emit","olaValues","newValues","_getAllDCs","areCoreDCsExcluded","strategyCodeDC","subStrategyDC","teamStrategyDC","results","_getLinkedFieldColumnNameByConnectFieldID","connectFieldID","_getLinkedFieldIDByConnectFieldID","_getLinkedObjIDByConnectFieldID","date","Math","abs","init","dataStatus","dataStatusFlag","notInitial","intDataPk","oldFormData","allFields","oldValue","newValue","getFullYear","String","getMonth","padStart","getDate","toISOString","paredNewValue","indexOf","Account","email","_showDataPanel","$panel","_uiDataPanel","modal","$dpButtonWebix","$dpButtonElem","_resizeObserver","ResizeObserver","contentRect","x","y","observe","_showOrgChart","chartData","orgchart","cloneDeep","parentNodeSymbol","exportButton","createNode","nodeContent","oldOrgchart","panStart","cells","tabIndex","dataPanelDCID","_dataPanelDC","header","overflow","panelObj","template","contentLinkedField","clearAll","panelRecord","isinactive","sort","$itemElements","itemElementsLength","contentFieldID","count","$itemElement","dataPanelRecord","onClick","unobserve","tabbar","initialized","once","initializing","_ui","responsive","ev","scroll","onAfterRender","accessLevel","OrgChart","default","_oldOnDragStart","_onDragStart","entityDatacollection","CHANGE_CURSOR","off","strategyCodeValue","subStrategyColumnName","subStrategyObjPK","strategyCodeColumnName","teamStrategyValue","subStrategyValue","code","findIndex","contentDisplayedFieldKeys","teamObjID","contentGroupObjID","strategyCodeObjID","subStrategyObjID","teamStrategyObjID","getChartData","performance","mark","measure","topNode","topNodeColumn","topFromField","teamLinkedColumnName","teamNameColumnName","teamInactiveColumnName","teamStrategyObjPK","teamStrategyColumnName","pullChildData","node","childData","filterTeam","force","resolvePageData","team","filters","strategy","includes","contentDisplayFieldFilters","contentObjPK","teamRecordPK","currentContentDisplayFieldKey","currentContentDisplayDC","currentContentDisplayObjID","currentContentDisplayObjPK","currentContentDisplayFieldColumnName","currentContentDisplayFilterValue","currentContentDisplayRecords","contentDisplayRecord","contentDisplayRecordData","isServerSideUpdate","connection","entity","hasChild","colSpan","teamValuePK","newChild","relationship","addSiblings","closest","el","nodeName","siblings","addChildren","contentLinkedColumnName","limit","querySelectorAll","alert","delete","removeNodes","oldChartData","linkFieldColumnName","currentStrategy","match","strategyCodeValuePK","newStrategy","teamValueName","newChartData","mode","nameField","entityObjID","entityDCCursorID","strategyField","linkField","isEditMode","teamCond","isDisabled","$teamFormPopup","required","onChange","previous","$strategyField","strategyOpt","getValue","disable","getOptions","oldValues","valid","$teamFormSubmit","$chartView","component","myClass","FABViewDefault","ABViewDefault","base","detatch","FABView","uiConfig","Config","uiSettings","L","groupByField","contentFieldFilterButton","contentDisplayedFieldsAdd","contentDisplayedFieldFiltersSet","contentDisplayedFieldTypesSet","contentDisplayedFieldMappingDataSet","dataPanelDCsAdd","strategyColorPopup","strategyColorForm","filterComplexNew","isConditionComplete","_uiDataPanelDC","labelValue","dcID","$dataPanelDCs","validOBJIDs","CurrentView","dcOptions","datacollections","getUILabel","elementIndex","labelWidthMedium","$parentView","getParentView","sameLevelViews","removeView","config","addView","$dataPanelDCsChild","buttonWidthExtraSmall","deleteDataPanelDC","_uiContentDisplayedField","parentObj","parentObjID","$contentDisplayedFields","$contentDisplayedFieldTypes","$contentDisplayedFieldMappingData","$contentDisplayedFieldFilters","filterFields","getOnSelectChangeFn","currentObj","currentAtDisplay","populateContentDisplayedFields","rootAtDisplay","fieldToOption","deleteContentDisplayedField","labelWidthLarge","populateTeamFieldOptions","$editContentFieldsToCreateNew","$setEditableContentFields","$contentDisplayedFieldsAdd","$contentFieldFilterButton","$contentGroupByField","$contentFieldDateStart","$contentFieldDateEnd","$showGroupTitle","contentObjFields","contentDateFiels","contentObjMappedFields","contentObjField","fieldsLoad","$empty","popUp","pos","placeholder","isVisible","$dataPanelDCsAdd","populateDataPanelDCs","populateStrategyOptions","allign","$dropContentToCreate","queriesLoad","CurrentApplication","queriesIncluded","$elements","$richselect","deletedElementKey","deletedAtDisplay","$component","populateDatacollection","datacollectionId","$dataCollection","datacollectionsIncluded","refreshValueFieldOptions","$fieldList","populateSubValueFieldOptions","$fieldItem","getItem","abField","exists","checkItem","unblockEvent","m2oFields","o2mFields","textFields","booleanFields","unshift","types","mappingDataValues","contentDisplayedFieldsElements","contentDisplayedFieldTypesElements","$contentDisplayedFieldTypesSet","contentDisplayedFieldMappingDataElements","$contentDisplayedFieldMappingDataSet","contentDisplayedFieldFiltersElements","$contentDisplayedFieldFiltersSet","typeKeys","filterKeys","parentKeys","childKeys","createOptionsView","optionPrefix","typeKeyIndex","typeKey","typeSwitchValue","oldTypes","oldTypeEntries","entries","newTypes","oldTypePrefix","mappingDataValue","getValueViewUI","labelWidthSmall","mapingValues","valueChildViews","$valueChildView","valueChildViewElements","$valueView","mappingDataObj","filterCheckboxValue","filterKey","oldFilters","oldFilterEntries","newFilters","oldFilterKey","currentFilterCheckboxValue","parentKey","parentFieldID","parentField","currentKey","childKey","childObj","childFieldID","childField","dataPanelDCsChidren","contentFieldValue","shift","listFields","codeFieldID","strategyTypes","suggest","button","ViewClass","dataCollectionId","$colorForm","_ViewClass","version","apply","ABViewOrgChartTeams","Class","ABViewManager","viewClass","addViewClass","applications","app","views","v","newView","toObj","viewRemove","viewInsert","pluginLoad","isPlugin","editor","ABViewOrgChartTeamsEditor","viewProperty","ABViewOrgChartTeamsProperty","definitions","labels","__AB_Plugins"],"sourceRoot":""}