{"version":3,"file":"226.0c4db1ff66379977d772.js","mappings":"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ACV,IAAIzzE,EAAUiE,EAAMwvE,GACpB,GAAuB,iBAAZzzE,EAAsB,CAC/B,MAAM0zE,EAAYH,EAAkBvzE,GAChC0zE,IAAc1zE,IACXsxE,GAASrtE,KACZA,EAAMwvE,GAAKC,GAEb1zE,EAAU0zE,EAEd,CACA5kE,EAAI9O,IAAW,CACjB,CACA,OAAO8O,CACT,CACA,SAASif,GAAM4lD,GACb,MAAMC,EAAYnC,GAAS,MAC3B,IAAK,MAAOrkE,EAAU7nB,KAAU6rF,GAAQuC,GACtCC,EAAUxmE,GAAY7nB,EAExB,OAAOquF,CACT,CACA,SAASC,GAAaF,EAAQt2D,GAC5B,KAAkB,OAAXs2D,GAAiB,CACtB,MAAM5vD,EAAOwtD,GAAyBoC,EAAQt2D,GAC9C,GAAI0G,EAAM,CACR,GAAIA,EAAKj5B,IACP,OAAOknF,GAAQjuD,EAAKj5B,KAEtB,GAA0B,mBAAfi5B,EAAKx+B,MACd,OAAOysF,GAAQjuD,EAAKx+B,MAExB,CACAouF,EAAS3xE,GAAe2xE,EAC1B,CAKA,OAJA,SAAuB3zE,GAErB,OADAsI,QAAQgmB,KAAK,qBAAsBtuB,GAC5B,IACT,CAEF,CACA,MAAM8zE,GAASx5D,GAAO,CACpB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,QAEIy5D,GAAQz5D,GAAO,CACnB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,UAEI05D,GAAa15D,GAAO,CACxB,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,iBAEI25D,GAAgB35D,GAAO,CAC3B,UACA,gBACA,SACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,QAEI45D,GAAW55D,GAAO,CACtB,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,aACA,gBAEI65D,GAAmB75D,GAAO,CAC9B,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,SAEI85D,GAAS95D,GAAO,CAAC,UACjBtS,GAAOsS,GAAO,CAClB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,QACA,SAEI+5D,GAAM/5D,GAAO,CACjB,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,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6rF,GAAQuC,GACtCC,EAAUxmE,GAAY7nB,EAExB,OAAOquF,CACT,CACA,SAASC,GAAaF,EAAQt2D,GAC5B,KAAkB,OAAXs2D,GAAiB,CACtB,MAAM5vD,EAAOwtD,GAAyBoC,EAAQt2D,GAC9C,GAAI0G,EAAM,CACR,GAAIA,EAAKj5B,IACP,OAAOknF,GAAQjuD,EAAKj5B,KAEtB,GAA0B,mBAAfi5B,EAAKx+B,MACd,OAAOysF,GAAQjuD,EAAKx+B,MAExB,CACAouF,EAAS3xE,GAAe2xE,EAC1B,CAKA,OAJA,SAAuB3zE,GAErB,OADAsI,QAAQgmB,KAAK,qBAAsBtuB,GAC5B,IACT,CAEF,CACA,MAAM8zE,GAASx5D,GAAO,CACpB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,QAEIy5D,GAAQz5D,GAAO,CACnB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,UAEI05D,GAAa15D,GAAO,CACxB,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,iBAEI25D,GAAgB35D,GAAO,CAC3B,UACA,gBACA,SACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,QAEI45D,GAAW55D,GAAO,CACtB,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,aACA,gBAEI65D,GAAmB75D,GAAO,CAC9B,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,SAEIruB,GAAOquB,GAAO,CAAC,UACftS,GAAOsS,GAAO,CAClB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,QACA,SAEI+5D,GAAM/5D,GAAO,CACjB,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,eAEIg6D,GAASh6D,GAAO,CACpB,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,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","sources":["webpack://ab_platform_web/./node_modules/tinymce/icons/default/icons.js","webpack://ab_platform_web/./node_modules/tinymce/icons/default/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/plugin.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/index.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/theme.js","webpack://ab_platform_web/./node_modules/tinymce/tinymce.js"],"sourcesContent":["tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z\" fill-rule=\"nonzero\"/></svg>',\n    'accordion-toggle': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z\"/><path opacity=\".2\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z\"/><path opacity=\".2\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z\"/></svg>',\n    'accordion': '<svg width=\"24\" height=\"24\"><rect x=\"12\" y=\"7\" width=\"10\" height=\"2\" rx=\"1\"/><rect x=\"12\" y=\"11\" width=\"10\" height=\"2\" rx=\"1\"/><rect x=\"12\" y=\"15\" width=\"6\" height=\"2\" rx=\"1\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z\"/></svg>',\n    'addtag': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z\"/></svg>',\n    'ai-prompt': '<svg width=\"24\" height=\"24\"><g clip-path=\"url(#a)\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z\"/><path d=\"m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z\"/></g><defs><clipPath id=\"a\"><path d=\"M0 0h24v24H0z\"/></clipPath></defs></svg>',\n    'ai': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z\" fill-rule=\"nonzero\"/></svg>',\n    'border-style': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"6\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"3\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"6.8\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"10.6\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"14.4\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"18.2\" y=\"16\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"13\" y=\"11\" rx=\"1\"/></g></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"5\" x=\"3\" y=\"5\" rx=\"1\"/><rect width=\"18\" height=\"3.5\" x=\"3\" y=\"11.5\" rx=\"1\"/><rect width=\"18\" height=\"2\" x=\"3\" y=\"17\" rx=\"1\"/></g></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z\" fill-rule=\"nonzero\"/></svg>',\n    'cell-background-color': '<svg width=\"24\" height=\"24\"><path d=\"m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z\"/></svg>',\n    'cell-border-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z\" opacity=\".2\"/><path fill-rule=\"nonzero\" d=\"M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z\"/><path d=\"m13 11-2 2H5v-2h6V6h2z\"/><path fill-rule=\"nonzero\" d=\"m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z\"/></g></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3 3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z\"/><path d=\"M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z\"/><path d=\"M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z\"/><path d=\"M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z\" fill-rule=\"nonzero\"/></svg>',\n    'footnote': '<svg width=\"24\" height=\"24\"><path d=\"M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M19 4v6h-1V5h-1.5V4h2.6Z\"/><path d=\"M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z\"/><path d=\"M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path class=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z\" fill-rule=\"evenodd\"/></svg>',\n    'language': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z\" fill-rule=\"evenodd\"/></svg>',\n    'minus': '<svg width=\"24\" height=\"24\"><path d=\"M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z\"/><path d=\"M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z\" fill-rule=\"nonzero\"/></g></svg>',\n    'revision-history': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z\"/><path d=\"M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z\"/></svg>',\n    'send': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z\"/><path d=\"M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z\" fill-rule=\"nonzero\"/></svg>',\n    'table-caption': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"12\" height=\"2\" x=\"3\" y=\"4\" rx=\"1\"/><path d=\"M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z\"/></g></svg>',\n    'table-cell-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z\"/><path fill-rule=\"nonzero\" d=\"M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z\" opacity=\".2\"/><path d=\"m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z\"/><path fill-rule=\"nonzero\" d=\"M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z\" opacity=\".2\"/></g></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z\"/></g></svg>',\n    'table-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z\"/><path d=\"m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z\"/><path d=\"m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z\"/></svg>',\n    'table-row-numbering-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z\"/></svg>',\n    'table-row-numbering': '<svg width=\"24\" height=\"24\"><path d=\"M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z\"/></svg>',\n    'template-add': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z\"/><path d=\"M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path class=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z\"/></g></svg>',\n    'text-size-decrease': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z\"/></svg>',\n    'text-size-increase': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z\"/></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z\" fill-rule=\"evenodd\"/></svg>',\n    'typography': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z\"/><path d=\"m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z\" fill-rule=\"nonzero\"/></svg>',\n    'vertical-align': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><path d=\"M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z\"/></g></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z\" fill-rule=\"nonzero\"/></svg>',\n    'export-pdf': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z\"/><path d=\"M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z\"/></svg>',\n    'export-word': '<svg width=\"24\" height=\"24\"><path d=\"M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z\"/></svg>',\n    'import-word': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z\"/><path d=\"M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z\"/></svg>',\n  }\n});","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * TinyMCE version 7.0.0 (2024-03-20)\n */\n\n(function () {\n    'use strict';\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq = t => a => t === a;\n    const isString = isType('string');\n    const isObject = isType('object');\n    const isArray = isType('array');\n    const isNull = eq(null);\n    const isBoolean = isSimpleType('boolean');\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isArrayOf = (value, pred) => {\n      if (isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const constant = value => {\n      return () => {\n        return value;\n      };\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const contains = (xs, x) => rawIndexOf(xs, x) > -1;\n    const map = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$1 = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const foldl = (xs, f, acc) => {\n      each$1(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind = (xs, f) => flatten(map(xs, f));\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    const is = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const option = name => editor => editor.options.get(name);\n    const register$1 = editor => {\n      const registerOption = editor.options.register;\n      registerOption('link_assume_external_targets', {\n        processor: value => {\n          const valid = isString(value) || isBoolean(value);\n          if (valid) {\n            if (value === true) {\n              return {\n                value: 1,\n                valid\n              };\n            } else if (value === 'http' || value === 'https') {\n              return {\n                value,\n                valid\n              };\n            } else {\n              return {\n                value: 0,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a string or a boolean.'\n            };\n          }\n        },\n        default: false\n      });\n      registerOption('link_context_toolbar', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('link_list', { processor: value => isString(value) || isFunction(value) || isArrayOf(value, isObject) });\n      registerOption('link_default_target', { processor: 'string' });\n      registerOption('link_default_protocol', {\n        processor: 'string',\n        default: 'https'\n      });\n      registerOption('link_target_list', {\n        processor: value => isBoolean(value) || isArrayOf(value, isObject),\n        default: true\n      });\n      registerOption('link_rel_list', {\n        processor: 'object[]',\n        default: []\n      });\n      registerOption('link_class_list', {\n        processor: 'object[]',\n        default: []\n      });\n      registerOption('link_title', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('allow_unsafe_link_target', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('link_quicklink', {\n        processor: 'boolean',\n        default: false\n      });\n    };\n    const assumeExternalTargets = option('link_assume_external_targets');\n    const hasContextToolbar = option('link_context_toolbar');\n    const getLinkList = option('link_list');\n    const getDefaultLinkTarget = option('link_default_target');\n    const getDefaultLinkProtocol = option('link_default_protocol');\n    const getTargetList = option('link_target_list');\n    const getRelList = option('link_rel_list');\n    const getLinkClassList = option('link_class_list');\n    const shouldShowLinkTitle = option('link_title');\n    const allowUnsafeLinkTarget = option('allow_unsafe_link_target');\n    const useQuickLink = option('link_quicklink');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    const getValue = item => isString(item.value) ? item.value : '';\n    const getText = item => {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    const sanitizeList = (list, extractValue) => {\n      const out = [];\n      global$4.each(list, item => {\n        const text = getText(item);\n        if (item.menu !== undefined) {\n          const items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text,\n            items\n          });\n        } else {\n          const value = extractValue(item);\n          out.push({\n            text,\n            value\n          });\n        }\n      });\n      return out;\n    };\n    const sanitizeWith = (extracter = getValue) => list => Optional.from(list).map(list => sanitizeList(list, extracter));\n    const sanitize = list => sanitizeWith(getValue)(list);\n    const createUi = (name, label) => items => ({\n      name,\n      type: 'listbox',\n      label,\n      items\n    });\n    const ListOptions = {\n      sanitize,\n      sanitizeWith,\n      createUi,\n      getValue\n    };\n\n    const keys = Object.keys;\n    const hasOwnProperty = Object.hasOwnProperty;\n    const each = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const filter = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const has = (obj, key) => hasOwnProperty.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    const isAnchor = elm => isNonNullable(elm) && elm.nodeName.toLowerCase() === 'a';\n    const isLink = elm => isAnchor(elm) && !!getHref(elm);\n    const collectNodesInRange = (rng, predicate) => {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        const contents = rng.cloneContents();\n        const firstChild = contents.firstChild;\n        const walker = new global$3(firstChild, contents);\n        const elements = [];\n        let current = firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    const hasProtocol = url => /^\\w+:/i.test(url);\n    const getHref = elm => {\n      var _a, _b;\n      return (_b = (_a = elm.getAttribute('data-mce-href')) !== null && _a !== void 0 ? _a : elm.getAttribute('href')) !== null && _b !== void 0 ? _b : '';\n    };\n    const applyRelTargetRules = (rel, isUnsafe) => {\n      const rules = ['noopener'];\n      const rels = rel ? rel.split(/\\s+/) : [];\n      const toString = rels => global$4.trim(rels.sort().join(' '));\n      const addTargetRules = rels => {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      const removeTargetRules = rels => rels.filter(val => global$4.inArray(rules, val) === -1);\n      const newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    const trimCaretContainers = text => text.replace(/\\uFEFF/g, '');\n    const getAnchorElement = (editor, selectedElm) => {\n      selectedElm = selectedElm || getLinksInSelection(editor.selection.getRng())[0] || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return Optional.from(editor.dom.select('a[href]', selectedElm)[0]);\n      } else {\n        return Optional.from(editor.dom.getParent(selectedElm, 'a[href]'));\n      }\n    };\n    const isInAnchor = (editor, selectedElm) => getAnchorElement(editor, selectedElm).isSome();\n    const getAnchorText = (selection, anchorElm) => {\n      const text = anchorElm.fold(() => selection.getContent({ format: 'text' }), anchorElm => anchorElm.innerText || anchorElm.textContent || '');\n      return trimCaretContainers(text);\n    };\n    const getLinksInSelection = rng => collectNodesInRange(rng, isLink);\n    const getLinks$1 = elements => global$4.grep(elements, isLink);\n    const hasLinks = elements => getLinks$1(elements).length > 0;\n    const hasLinksInSelection = rng => getLinksInSelection(rng).length > 0;\n    const isOnlyTextSelected = editor => {\n      const inlineTextElements = editor.schema.getTextInlineElements();\n      const isElement = elm => elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      const isInBlockAnchor = getAnchorElement(editor).exists(anchor => anchor.hasAttribute('data-mce-block'));\n      if (isInBlockAnchor) {\n        return false;\n      }\n      const rng = editor.selection.getRng();\n      if (!rng.collapsed) {\n        const elements = collectNodesInRange(rng, isElement);\n        return elements.length === 0;\n      } else {\n        return true;\n      }\n    };\n    const isImageFigure = elm => isNonNullable(elm) && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    const getLinkAttrs = data => {\n      const attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, (acc, key) => {\n        data[key].each(value => {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    const handleExternalTargets = (href, assumeExternalTargets) => {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    const applyLinkOverrides = (editor, linkAttrs) => {\n      const newLinkAttrs = { ...linkAttrs };\n      if (getRelList(editor).length === 0 && !allowUnsafeLinkTarget(editor)) {\n        const newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    const updateLink = (editor, anchorElm, text, linkAttrs) => {\n      text.each(text => {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    const createLink = (editor, selectedElm, text, linkAttrs) => {\n      const dom = editor.dom;\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(dom, selectedElm, linkAttrs);\n      } else {\n        text.fold(() => {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, text => {\n          editor.insertContent(dom.createHTML('a', linkAttrs, dom.encode(text)));\n        });\n      }\n    };\n    const linkDomMutation = (editor, attachState, data) => {\n      const selectedElm = editor.selection.getNode();\n      const anchorElm = getAnchorElement(editor, selectedElm);\n      const linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(() => {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        anchorElm.fold(() => {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }, elm => {\n          editor.focus();\n          updateLink(editor, elm, data.text, linkAttrs);\n        });\n      });\n    };\n    const unlinkSelection = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const bookmark = selection.getBookmark();\n      const rng = selection.getRng().cloneRange();\n      const startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      const endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    const unlinkDomMutation = editor => {\n      editor.undoManager.transact(() => {\n        const node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    const unwrapOptions = data => {\n      const {\n        class: cls,\n        href,\n        rel,\n        target,\n        text,\n        title\n      } = data;\n      return filter({\n        class: cls.getOrNull(),\n        href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, (v, _k) => isNull(v) === false);\n    };\n    const sanitizeData = (editor, data) => {\n      const getOption = editor.options.get;\n      const uriOptions = {\n        allow_html_data_urls: getOption('allow_html_data_urls'),\n        allow_script_urls: getOption('allow_script_urls'),\n        allow_svg_data_urls: getOption('allow_svg_data_urls')\n      };\n      const href = data.href;\n      return {\n        ...data,\n        href: global$2.isDomSafe(href, 'a', uriOptions) ? href : ''\n      };\n    };\n    const link = (editor, attachState, data) => {\n      const sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    const unlink = editor => {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    const unlinkImageFigure = (editor, fig) => {\n      var _a;\n      const img = editor.dom.select('img', fig)[0];\n      if (img) {\n        const a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          (_a = a.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    const linkImageFigure = (dom, fig, attrs) => {\n      var _a;\n      const img = dom.select('img', fig)[0];\n      if (img) {\n        const a = dom.create('a', attrs);\n        (_a = img.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    const isListGroup = item => hasNonNullableKey(item, 'items');\n    const findTextByValue = (value, catalog) => findMap(catalog, item => {\n      if (isListGroup(item)) {\n        return findTextByValue(value, item.items);\n      } else {\n        return someIf(item.value === value, item);\n      }\n    });\n    const getDelta = (persistentText, fieldName, catalog, data) => {\n      const value = data[fieldName];\n      const hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(i => ({\n        url: {\n          value: i.value,\n          meta: {\n            text: hasPersistentText ? persistentText : i.text,\n            attach: noop\n          }\n        },\n        text: hasPersistentText ? persistentText : i.text\n      })) : Optional.none();\n    };\n    const findCatalog = (catalogs, fieldName) => {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    const init = (initialData, linkCatalog) => {\n      const persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      const getTitleFromUrlChange = url => {\n        var _a;\n        return someIf(persistentData.title.length <= 0, Optional.from((_a = url.meta) === null || _a === void 0 ? void 0 : _a.title).getOr(''));\n      };\n      const getTextFromUrlChange = url => {\n        var _a;\n        return someIf(persistentData.text.length <= 0, Optional.from((_a = url.meta) === null || _a === void 0 ? void 0 : _a.text).getOr(url.value));\n      };\n      const onUrlChange = data => {\n        const text = getTextFromUrlChange(data.url);\n        const title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some({\n            ...text.map(text => ({ text })).getOr({}),\n            ...title.map(title => ({ title })).getOr({})\n          });\n        } else {\n          return Optional.none();\n        }\n      };\n      const onCatalogChange = (data, change) => {\n        const catalog = findCatalog(linkCatalog, change).getOr([]);\n        return getDelta(persistentData.text, change, catalog, data);\n      };\n      const onChange = (getData, change) => {\n        const name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), name);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange };\n    };\n    const DialogChanges = {\n      init,\n      getDelta\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    const delayedConfirm = (editor, message, callback) => {\n      const rng = editor.selection.getRng();\n      global$1.setEditorTimeout(editor, () => {\n        editor.windowManager.confirm(message, state => {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    const tryEmailTransform = data => {\n      const url = data.href;\n      const suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: oldData => ({\n          ...oldData,\n          href: 'mailto:' + url\n        })\n      }) : Optional.none();\n    };\n    const tryProtocolTransform = (assumeExternalTargets, defaultLinkProtocol) => data => {\n      const url = data.href;\n      const suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n      return suggestProtocol ? Optional.some({\n        message: `The URL you entered seems to be an external link. Do you want to add the required ${ defaultLinkProtocol }:// prefix?`,\n        preprocess: oldData => ({\n          ...oldData,\n          href: defaultLinkProtocol + '://' + url\n        })\n      }) : Optional.none();\n    };\n    const preprocess = (editor, data) => findMap([\n      tryEmailTransform,\n      tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n    ], f => f(data)).fold(() => Promise.resolve(data), transform => new Promise(callback => {\n      delayedConfirm(editor, transform.message, state => {\n        callback(state ? transform.preprocess(data) : data);\n      });\n    }));\n    const DialogConfirms = { preprocess };\n\n    const getAnchors = editor => {\n      const anchorNodes = editor.dom.select('a:not([href])');\n      const anchors = bind(anchorNodes, anchor => {\n        const id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    const AnchorListOptions = { getAnchors };\n\n    const getClasses = editor => {\n      const list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    const ClassListOptions = { getClasses };\n\n    const parseJson = text => {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    const getLinks = editor => {\n      const extractor = item => editor.convertURL(item.value || item.url || '', 'href');\n      const linkList = getLinkList(editor);\n      return new Promise(resolve => {\n        if (isString(linkList)) {\n          fetch(linkList).then(res => res.ok ? res.text().then(parseJson) : Promise.reject()).then(resolve, () => resolve(Optional.none()));\n        } else if (isFunction(linkList)) {\n          linkList(output => resolve(Optional.some(output)));\n        } else {\n          resolve(Optional.from(linkList));\n        }\n      }).then(optItems => optItems.bind(ListOptions.sanitizeWith(extractor)).map(items => {\n        if (items.length > 0) {\n          const noneItem = [{\n              text: 'None',\n              value: ''\n            }];\n          return noneItem.concat(items);\n        } else {\n          return items;\n        }\n      }));\n    };\n    const LinkListOptions = { getLinks };\n\n    const getRels = (editor, initialTarget) => {\n      const list = getRelList(editor);\n      if (list.length > 0) {\n        const isTargetBlank = is(initialTarget, '_blank');\n        const enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        const safeRelExtractor = item => applyRelTargetRules(ListOptions.getValue(item), isTargetBlank);\n        const sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    const RelOptions = { getRels };\n\n    const fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    const getTargets = editor => {\n      const list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(() => Optional.some(fallbacks));\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    const TargetOptions = { getTargets };\n\n    const nonEmptyAttr = (dom, elem, name) => {\n      const val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    const extractFromAnchor = (editor, anchor) => {\n      const dom = editor.dom;\n      const onlyText = isOnlyTextSelected(editor);\n      const text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      const url = anchor.bind(anchorElm => Optional.from(dom.getAttrib(anchorElm, 'href')));\n      const target = anchor.bind(anchorElm => Optional.from(dom.getAttrib(anchorElm, 'target')));\n      const rel = anchor.bind(anchorElm => nonEmptyAttr(dom, anchorElm, 'rel'));\n      const linkClass = anchor.bind(anchorElm => nonEmptyAttr(dom, anchorElm, 'class'));\n      const title = anchor.bind(anchorElm => nonEmptyAttr(dom, anchorElm, 'title'));\n      return {\n        url,\n        text,\n        title,\n        target,\n        rel,\n        linkClass\n      };\n    };\n    const collect = (editor, linkNode) => LinkListOptions.getLinks(editor).then(links => {\n      const anchor = extractFromAnchor(editor, linkNode);\n      return {\n        anchor,\n        catalogs: {\n          targets: TargetOptions.getTargets(editor),\n          rels: RelOptions.getRels(editor, anchor.target),\n          classes: ClassListOptions.getClasses(editor),\n          anchor: AnchorListOptions.getAnchors(editor),\n          link: links\n        },\n        optNode: linkNode,\n        flags: { titleEnabled: shouldShowLinkTitle(editor) }\n      };\n    });\n    const DialogInfo = { collect };\n\n    const handleSubmit = (editor, info) => api => {\n      const data = api.getData();\n      if (!data.url.value) {\n        unlink(editor);\n        api.close();\n        return;\n      }\n      const getChangedValue = key => Optional.from(data[key]).filter(value => !is(info.anchor[key], value));\n      const changedData = {\n        href: data.url.value,\n        text: getChangedValue('text'),\n        target: getChangedValue('target'),\n        rel: getChangedValue('rel'),\n        class: getChangedValue('linkClass'),\n        title: getChangedValue('title')\n      };\n      const attachState = {\n        href: data.url.value,\n        attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n      };\n      DialogConfirms.preprocess(editor, changedData).then(pData => {\n        link(editor, attachState, pData);\n      });\n      api.close();\n    };\n    const collectData = editor => {\n      const anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    const getInitialData = (info, defaultTarget) => {\n      const anchor = info.anchor;\n      const url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    const makeDialog = (settings, onSubmit, editor) => {\n      const urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL',\n          picker_text: 'Browse links'\n        }];\n      const displayText = settings.anchor.text.map(() => ({\n        name: 'text',\n        type: 'input',\n        label: 'Text to display'\n      })).toArray();\n      const titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      const defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      const initialData = getInitialData(settings, defaultTarget);\n      const catalogs = settings.catalogs;\n      const dialogDelta = DialogChanges.init(initialData, catalogs);\n      const body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData,\n        onChange: (api, {name}) => {\n          dialogDelta.onChange(api.getData, { name }).each(newData => {\n            api.setData(newData);\n          });\n        },\n        onSubmit\n      };\n    };\n    const open$1 = editor => {\n      const data = collectData(editor);\n      data.then(info => {\n        const onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(spec => {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    const register = editor => {\n      editor.addCommand('mceLink', (_ui, value) => {\n        if ((value === null || value === void 0 ? void 0 : value.dialog) === true || !useQuickLink(editor)) {\n          open$1(editor);\n        } else {\n          editor.dispatch('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        }\n      });\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    const appendClickRemove = (link, evt) => {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    const open = url => {\n      const link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      const evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    const getLink = (editor, elm) => editor.dom.getParent(elm, 'a[href]');\n    const getSelectedLink = editor => getLink(editor, editor.selection.getStart());\n    const hasOnlyAltModifier = e => {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    const gotoLink = (editor, a) => {\n      if (a) {\n        const href = getHref(a);\n        if (/^#/.test(href)) {\n          const targetEl = editor.dom.select(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open(a.href);\n        }\n      }\n    };\n    const openDialog = editor => () => {\n      editor.execCommand('mceLink', false, { dialog: true });\n    };\n    const gotoSelectedLink = editor => () => {\n      gotoLink(editor, getSelectedLink(editor));\n    };\n    const setupGotoLinks = editor => {\n      editor.on('click', e => {\n        const link = getLink(editor, e.target);\n        if (link && global.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', e => {\n        if (!e.isDefaultPrevented() && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          const link = getSelectedLink(editor);\n          if (link) {\n            e.preventDefault();\n            gotoLink(editor, link);\n          }\n        }\n      });\n    };\n    const toggleState = (editor, toggler) => {\n      editor.on('NodeChange', toggler);\n      return () => editor.off('NodeChange', toggler);\n    };\n    const toggleLinkState = editor => api => {\n      const updateState = () => {\n        api.setActive(!editor.mode.isReadOnly() && isInAnchor(editor, editor.selection.getNode()));\n        api.setEnabled(editor.selection.isEditable());\n      };\n      updateState();\n      return toggleState(editor, updateState);\n    };\n    const toggleLinkMenuState = editor => api => {\n      const updateState = () => {\n        api.setEnabled(editor.selection.isEditable());\n      };\n      updateState();\n      return toggleState(editor, updateState);\n    };\n    const hasExactlyOneLinkInSelection = editor => {\n      const links = editor.selection.isCollapsed() ? getLinks$1(editor.dom.getParents(editor.selection.getStart())) : getLinksInSelection(editor.selection.getRng());\n      return links.length === 1;\n    };\n    const toggleGotoLinkState = editor => api => {\n      const updateState = () => api.setEnabled(hasExactlyOneLinkInSelection(editor));\n      updateState();\n      return toggleState(editor, updateState);\n    };\n    const toggleUnlinkState = editor => api => {\n      const hasLinks$1 = parents => hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n      const parents = editor.dom.getParents(editor.selection.getStart());\n      const updateEnabled = parents => {\n        api.setEnabled(hasLinks$1(parents) && editor.selection.isEditable());\n      };\n      updateEnabled(parents);\n      return toggleState(editor, e => updateEnabled(e.parents));\n    };\n\n    const setup = editor => {\n      editor.addShortcut('Meta+K', '', () => {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    const setupButtons = editor => {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleLinkState(editor),\n        shortcut: 'Meta+K'\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleGotoLinkState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: () => unlink(editor),\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    const setupMenuItems = editor => {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleGotoLinkState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onSetup: toggleLinkMenuState(editor),\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: () => unlink(editor),\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    const setupContextMenu = editor => {\n      const inLink = 'link unlink openlink';\n      const noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: element => {\n          const isEditable = editor.dom.isEditable(element);\n          if (!isEditable) {\n            return '';\n          }\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    const setupContextToolbars = editor => {\n      const collapseSelectionToEnd = editor => {\n        editor.selection.collapse(false);\n      };\n      const onSetupLink = buttonApi => {\n        const node = editor.selection.getNode();\n        buttonApi.setEnabled(isInAnchor(editor, node));\n        return noop;\n      };\n      const getLinkText = value => {\n        const anchor = getAnchorElement(editor);\n        const onlyText = isOnlyTextSelected(editor);\n        if (anchor.isNone() && onlyText) {\n          const text = getAnchorText(editor.selection, anchor);\n          return someIf(text.length === 0, value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleLinkState(editor)\n        },\n        label: 'Link',\n        predicate: node => hasContextToolbar(editor) && isInAnchor(editor, node),\n        initValue: () => {\n          const elm = getAnchorElement(editor);\n          return elm.fold(constant(''), getHref);\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: buttonApi => {\n              const node = editor.selection.getNode();\n              buttonApi.setActive(isInAnchor(editor, node));\n              return toggleLinkState(editor)(buttonApi);\n            },\n            onAction: formApi => {\n              const value = formApi.getValue();\n              const text = getLinkText(value);\n              const attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.from(getDefaultLinkTarget(editor)),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: formApi => {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: formApi => {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    var Plugin = () => {\n      global$5.add('link', editor => {\n        register$1(editor);\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    };\n\n    Plugin();\n\n})();\n","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * TinyMCE version 7.0.0 (2024-03-20)\n */\n\n(function () {\n    'use strict';\n\n    const getPrototypeOf$2 = Object.getPrototypeOf;\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType$1 = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq$1 = t => a => t === a;\n    const is$2 = (value, constructor) => isObject(value) && hasProto(value, constructor, (o, proto) => getPrototypeOf$2(o) === proto);\n    const isString = isType$1('string');\n    const isObject = isType$1('object');\n    const isPlainObject = value => is$2(value, Object);\n    const isArray = isType$1('array');\n    const isNull = eq$1(null);\n    const isBoolean = isSimpleType('boolean');\n    const isUndefined = eq$1(undefined);\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isNumber = isSimpleType('number');\n    const isArrayOf = (value, pred) => {\n      if (isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const noarg = f => () => f();\n    const compose = (fa, fb) => {\n      return (...args) => {\n        return fa(fb.apply(null, args));\n      };\n    };\n    const compose1 = (fbc, fab) => a => fbc(fab(a));\n    const constant$1 = value => {\n      return () => {\n        return value;\n      };\n    };\n    const identity = x => {\n      return x;\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n    function curry(fn, ...initialArgs) {\n      return (...restArgs) => {\n        const all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    const not = f => t => !f(t);\n    const die = msg => {\n      return () => {\n        throw new Error(msg);\n      };\n    };\n    const apply$1 = f => {\n      return f();\n    };\n    const never = constant$1(false);\n    const always = constant$1(true);\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeSlice = Array.prototype.slice;\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const indexOf = (xs, x) => {\n      const r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    const contains$2 = (xs, x) => rawIndexOf(xs, x) > -1;\n    const exists = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const range$2 = (num, f) => {\n      const r = [];\n      for (let i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    const chunk$1 = (array, size) => {\n      const r = [];\n      for (let i = 0; i < array.length; i += size) {\n        const s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    const map$2 = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$1 = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const eachr = (xs, f) => {\n      for (let i = xs.length - 1; i >= 0; i--) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const partition$3 = (xs, pred) => {\n      const pass = [];\n      const fail = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        const arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass,\n        fail\n      };\n    };\n    const filter$2 = (xs, pred) => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    const foldr = (xs, f, acc) => {\n      eachr(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const foldl = (xs, f, acc) => {\n      each$1(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const findUntil = (xs, pred, until) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const find$5 = (xs, pred) => {\n      return findUntil(xs, pred, never);\n    };\n    const findIndex$1 = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind$3 = (xs, f) => flatten(map$2(xs, f));\n    const forall = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        const x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const reverse = xs => {\n      const r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    const difference = (a1, a2) => filter$2(a1, x => !contains$2(a2, x));\n    const mapToObject = (xs, f) => {\n      const r = {};\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    const pure$2 = x => [x];\n    const sort = (xs, comparator) => {\n      const copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    const get$h = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = xs => get$h(xs, 0);\n    const last$1 = xs => get$h(xs, xs.length - 1);\n    const from = isFunction(Array.from) ? Array.from : x => nativeSlice.call(x);\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    const keys = Object.keys;\n    const hasOwnProperty = Object.hasOwnProperty;\n    const each = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const map$1 = (obj, f) => {\n      return tupleMap(obj, (x, i) => ({\n        k: i,\n        v: f(x, i)\n      }));\n    };\n    const tupleMap = (obj, f) => {\n      const r = {};\n      each(obj, (x, i) => {\n        const tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const bifilter = (obj, pred) => {\n      const t = {};\n      const f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t,\n        f\n      };\n    };\n    const filter$1 = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const mapToArray = (obj, f) => {\n      const r = [];\n      each(obj, (value, name) => {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    const find$4 = (obj, pred) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    const values = obj => {\n      return mapToArray(obj, identity);\n    };\n    const get$g = (obj, key) => {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    const has$2 = (obj, key) => hasOwnProperty.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n\n    const is$1 = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const equals = (lhs, rhs, comparator = tripleEquals) => lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const sequence = arr => {\n      const r = [];\n      for (let i = 0; i < arr.length; i++) {\n        const x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    const lift2 = (oa, ob, f) => oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    const lift3 = (oa, ob, oc, f) => oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    const mapFrom = (a, f) => a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const addToEnd = (str, suffix) => {\n      return str + suffix;\n    };\n    const removeFromStart = (str, numChars) => {\n      return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    const ensureTrailing = (str, suffix) => {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    const contains$1 = (str, substr, start = 0, end) => {\n      const idx = str.indexOf(substr, start);\n      if (idx !== -1) {\n        return isUndefined(end) ? true : idx + substr.length <= end;\n      } else {\n        return false;\n      }\n    };\n    const startsWith = (str, prefix) => {\n      return checkRange(str, prefix, 0);\n    };\n    const endsWith = (str, suffix) => {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    const blank = r => s => s.replace(r, '');\n    const trim$1 = blank(/^\\s+|\\s+$/g);\n    const isNotEmpty = s => s.length > 0;\n    const isEmpty = s => !isNotEmpty(s);\n\n    const isSupported$1 = dom => dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n\n    const fromHtml$2 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        const message = 'HTML does not have a single root node';\n        console.error(message, html);\n        throw new Error(message);\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    const fromTag = (tag, scope) => {\n      const doc = scope || document;\n      const node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    const fromText = (text, scope) => {\n      const doc = scope || document;\n      const node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    const fromDom = node => {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    const fromPoint = (docElm, x, y) => Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    const SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag,\n      fromText,\n      fromDom,\n      fromPoint\n    };\n\n    const Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    const path$1 = (parts, scope) => {\n      let o = scope !== undefined && scope !== null ? scope : Global;\n      for (let i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    const resolve = (p, scope) => {\n      const parts = p.split('.');\n      return path$1(parts, scope);\n    };\n\n    const unsafe = (name, scope) => {\n      return resolve(name, scope);\n    };\n    const getOrDie$1 = (name, scope) => {\n      const actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n\n    const getPrototypeOf$1 = Object.getPrototypeOf;\n    const sandHTMLElement = scope => {\n      return getOrDie$1('HTMLElement', scope);\n    };\n    const isPrototypeOf = x => {\n      const scope = resolve('ownerDocument.defaultView', x);\n      return isObject(x) && (sandHTMLElement(scope).prototype.isPrototypeOf(x) || /^HTML\\w*Element$/.test(getPrototypeOf$1(x).constructor.name));\n    };\n\n    const DOCUMENT = 9;\n    const DOCUMENT_FRAGMENT = 11;\n    const ELEMENT = 1;\n    const TEXT = 3;\n\n    const name$3 = element => {\n      const r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    const type$1 = element => element.dom.nodeType;\n    const isType = t => element => type$1(element) === t;\n    const isHTMLElement = element => isElement$1(element) && isPrototypeOf(element.dom);\n    const isElement$1 = isType(ELEMENT);\n    const isText = isType(TEXT);\n    const isDocument = isType(DOCUMENT);\n    const isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n    const isTag = tag => e => isElement$1(e) && name$3(e) === tag;\n\n    const is = (element, selector) => {\n      const dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        const elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    const bypassSelector = dom => dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    const all$3 = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    const one = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    const eq = (e1, e2) => e1.dom === e2.dom;\n    const contains = (e1, e2) => {\n      const d1 = e1.dom;\n      const d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n\n    const owner$4 = element => SugarElement.fromDom(element.dom.ownerDocument);\n    const documentOrOwner = dos => isDocument(dos) ? dos : owner$4(dos);\n    const documentElement = element => SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    const defaultView = element => SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    const parent = element => Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    const parentNode = element => parent(element);\n    const parentElement = element => Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    const parents = (element, isRoot) => {\n      const stop = isFunction(isRoot) ? isRoot : never;\n      let dom = element.dom;\n      const ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        const rawParent = dom.parentNode;\n        const p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    const offsetParent = element => Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    const nextSibling = element => Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    const children = element => map$2(element.dom.childNodes, SugarElement.fromDom);\n    const child$2 = (element, index) => {\n      const cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    const firstChild = element => child$2(element, 0);\n    const spot = (element, offset) => ({\n      element,\n      offset\n    });\n    const leaf = (element, offset) => {\n      const cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    const isShadowRoot = dos => isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    const supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    const isSupported = constant$1(supported);\n    const getRootNode = supported ? e => SugarElement.fromDom(e.dom.getRootNode()) : documentOrOwner;\n    const getContentContainer = dos => isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    const isInShadowRoot = e => getShadowRoot(e).isSome();\n    const getShadowRoot = e => {\n      const r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    const getShadowHost = e => SugarElement.fromDom(e.dom.host);\n    const getOriginalEventTarget = event => {\n      if (isSupported() && isNonNullable(event.target)) {\n        const el = SugarElement.fromDom(event.target);\n        if (isElement$1(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            const composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    const isOpenShadowHost = element => isNonNullable(element.dom.shadowRoot);\n\n    const inBody = element => {\n      const dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      const doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(() => doc.body.contains(dom), compose1(inBody, getShadowHost));\n    };\n    const body = () => getBody(SugarElement.fromDom(document));\n    const getBody = doc => {\n      const b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    const rawSet = (dom, key, value) => {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    const set$9 = (element, key, value) => {\n      rawSet(element.dom, key, value);\n    };\n    const setAll$1 = (element, attrs) => {\n      const dom = element.dom;\n      each(attrs, (v, k) => {\n        rawSet(dom, k, v);\n      });\n    };\n    const get$f = (element, key) => {\n      const v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    const getOpt = (element, key) => Optional.from(get$f(element, key));\n    const has$1 = (element, key) => {\n      const dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    const remove$7 = (element, key) => {\n      element.dom.removeAttribute(key);\n    };\n    const clone$2 = element => foldl(element.dom.attributes, (acc, attr) => {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n\n    const internalSet = (dom, property, value) => {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    const internalRemove = (dom, property) => {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    const set$8 = (element, property, value) => {\n      const dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    const setAll = (element, css) => {\n      const dom = element.dom;\n      each(css, (v, k) => {\n        internalSet(dom, k, v);\n      });\n    };\n    const setOptions = (element, css) => {\n      const dom = element.dom;\n      each(css, (v, k) => {\n        v.fold(() => {\n          internalRemove(dom, k);\n        }, value => {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    const get$e = (element, property) => {\n      const dom = element.dom;\n      const styles = window.getComputedStyle(dom);\n      const r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    const getUnsafeProperty = (dom, property) => isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    const getRaw = (element, property) => {\n      const dom = element.dom;\n      const raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(r => r.length > 0);\n    };\n    const getAllRaw = element => {\n      const css = {};\n      const dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (let i = 0; i < dom.style.length; i++) {\n          const ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    const isValidValue$1 = (tag, property, value) => {\n      const element = SugarElement.fromTag(tag);\n      set$8(element, property, value);\n      const style = getRaw(element, property);\n      return style.isSome();\n    };\n    const remove$6 = (element, property) => {\n      const dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    const reflow = e => e.dom.offsetWidth;\n\n    const Dimension = (name, getOffset) => {\n      const set = (element, h) => {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        const dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      const get = element => {\n        const r = getOffset(element);\n        if (r <= 0 || r === null) {\n          const css = get$e(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      const getOuter = get;\n      const aggregate = (element, properties) => foldl(properties, (acc, property) => {\n        const val = get$e(element, property);\n        const value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n      const max = (element, value, properties) => {\n        const cumulativeInclusions = aggregate(element, properties);\n        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set,\n        get,\n        getOuter,\n        aggregate,\n        max\n      };\n    };\n\n    const api$2 = Dimension('height', element => {\n      const dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    const get$d = element => api$2.get(element);\n    const getOuter$2 = element => api$2.getOuter(element);\n    const setMax$1 = (element, value) => {\n      const inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      const absMax = api$2.max(element, value, inclusions);\n      set$8(element, 'max-height', absMax + 'px');\n    };\n\n    const r$1 = (left, top) => {\n      const translate = (x, y) => r$1(left + x, top + y);\n      return {\n        left,\n        top,\n        translate\n      };\n    };\n    const SugarPosition = r$1;\n\n    const boxPosition = dom => {\n      const box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    const firstDefinedOrZero = (a, b) => {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    const absolute$3 = element => {\n      const doc = element.dom.ownerDocument;\n      const body = doc.body;\n      const win = doc.defaultView;\n      const html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      const scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      const scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    const viewport$1 = element => {\n      const dom = element.dom;\n      const doc = dom.ownerDocument;\n      const body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    const api$1 = Dimension('width', element => element.dom.offsetWidth);\n    const set$7 = (element, h) => api$1.set(element, h);\n    const get$c = element => api$1.get(element);\n    const getOuter$1 = element => api$1.getOuter(element);\n    const setMax = (element, value) => {\n      const inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      const absMax = api$1.max(element, value, inclusions);\n      set$8(element, 'max-width', absMax + 'px');\n    };\n\n    const cached = f => {\n      let called = false;\n      let r;\n      return (...args) => {\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    const DeviceType = (os, browser, userAgent, mediaMatch) => {\n      const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      const isiPhone = os.isiOS() && !isiPad;\n      const isMobile = os.isiOS() || os.isAndroid();\n      const isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      const isPhone = isiPhone || isMobile && !isTablet;\n      const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      const isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    const firstMatch = (regexes, s) => {\n      for (let i = 0; i < regexes.length; i++) {\n        const x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    const find$3 = (regexes, agent) => {\n      const r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      const group = i => {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    const detect$4 = (versionRegexes, agent) => {\n      const cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    const unknown$3 = () => {\n      return nu$d(0, 0);\n    };\n    const nu$d = (major, minor) => {\n      return {\n        major,\n        minor\n      };\n    };\n    const Version = {\n      nu: nu$d,\n      detect: detect$4,\n      unknown: unknown$3\n    };\n\n    const detectBrowser$1 = (browsers, userAgentData) => {\n      return findMap(userAgentData.brands, uaBrand => {\n        const lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, browser => {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(info => ({\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        }));\n      });\n    };\n\n    const detect$3 = (candidates, userAgent) => {\n      const agent = String(userAgent).toLowerCase();\n      return find$5(candidates, candidate => {\n        return candidate.search(agent);\n      });\n    };\n    const detectBrowser = (browsers, userAgent) => {\n      return detect$3(browsers, userAgent).map(browser => {\n        const version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version\n        };\n      });\n    };\n    const detectOs = (oses, userAgent) => {\n      return detect$3(oses, userAgent).map(os => {\n        const version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version\n        };\n      });\n    };\n\n    const normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    const checkContains = target => {\n      return uastring => {\n        return contains$1(uastring, target);\n      };\n    };\n    const browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: uastring => {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chromium',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: uastring => {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    const oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: uastring => {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'macOS',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    const PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    const edge = 'Edge';\n    const chromium = 'Chromium';\n    const ie = 'IE';\n    const opera = 'Opera';\n    const firefox = 'Firefox';\n    const safari = 'Safari';\n    const unknown$2 = () => {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$c = info => {\n      const current = info.current;\n      const version = info.version;\n      const isBrowser = name => () => current === name;\n      return {\n        current,\n        version,\n        isEdge: isBrowser(edge),\n        isChromium: isBrowser(chromium),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    const Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chromium: constant$1(chromium),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    const windows = 'Windows';\n    const ios = 'iOS';\n    const android = 'Android';\n    const linux = 'Linux';\n    const macos = 'macOS';\n    const solaris = 'Solaris';\n    const freebsd = 'FreeBSD';\n    const chromeos = 'ChromeOS';\n    const unknown$1 = () => {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$b = info => {\n      const current = info.current;\n      const version = info.version;\n      const isOS = name => () => current === name;\n      return {\n        current,\n        version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isMacOS: isOS(macos),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    const OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      macos: constant$1(macos),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    const detect$2 = (userAgent, userAgentDataOpt, mediaMatch) => {\n      const browsers = PlatformInfo.browsers();\n      const oses = PlatformInfo.oses();\n      const browser = userAgentDataOpt.bind(userAgentData => detectBrowser$1(browsers, userAgentData)).orThunk(() => detectBrowser(browsers, userAgent)).fold(Browser.unknown, Browser.nu);\n      const os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      const deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser,\n        os,\n        deviceType\n      };\n    };\n    const PlatformDetection = { detect: detect$2 };\n\n    const mediaMatch = query => window.matchMedia(query).matches;\n    let platform = cached(() => PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch));\n    const detect$1 = () => platform();\n\n    const mkEvent = (target, x, y, stop, prevent, kill, raw) => ({\n      target,\n      x,\n      y,\n      stop,\n      prevent,\n      kill,\n      raw\n    });\n    const fromRawEvent$1 = rawEvent => {\n      const target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      const stop = () => rawEvent.stopPropagation();\n      const prevent = () => rawEvent.preventDefault();\n      const kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    const handle = (filter, handler) => rawEvent => {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent$1(rawEvent));\n      }\n    };\n    const binder = (element, event, filter, handler, useCapture) => {\n      const wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    const bind$2 = (element, event, filter, handler) => binder(element, event, filter, handler, false);\n    const capture$1 = (element, event, filter, handler) => binder(element, event, filter, handler, true);\n    const unbind = (element, event, handler, useCapture) => {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    const before$1 = (marker, element) => {\n      const parent$1 = parent(marker);\n      parent$1.each(v => {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    const after$2 = (marker, element) => {\n      const sibling = nextSibling(marker);\n      sibling.fold(() => {\n        const parent$1 = parent(marker);\n        parent$1.each(v => {\n          append$2(v, element);\n        });\n      }, v => {\n        before$1(v, element);\n      });\n    };\n    const prepend$1 = (parent, element) => {\n      const firstChild$1 = firstChild(parent);\n      firstChild$1.fold(() => {\n        append$2(parent, element);\n      }, v => {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    const append$2 = (parent, element) => {\n      parent.dom.appendChild(element.dom);\n    };\n    const appendAt = (parent, element, index) => {\n      child$2(parent, index).fold(() => {\n        append$2(parent, element);\n      }, v => {\n        before$1(v, element);\n      });\n    };\n\n    const append$1 = (parent, elements) => {\n      each$1(elements, x => {\n        append$2(parent, x);\n      });\n    };\n\n    const empty = element => {\n      element.dom.textContent = '';\n      each$1(children(element), rogue => {\n        remove$5(rogue);\n      });\n    };\n    const remove$5 = element => {\n      const dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    const get$b = _DOC => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      const y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    const to = (x, y, _DOC) => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    const get$a = _win => {\n      const win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win.visualViewport);\n      }\n    };\n    const bounds$1 = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const getBounds$3 = _win => {\n      const win = _win === undefined ? window : _win;\n      const doc = win.document;\n      const scroll = get$b(SugarElement.fromDom(doc));\n      return get$a(win).fold(() => {\n        const html = win.document.documentElement;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, visualViewport => bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height));\n    };\n\n    const getDocument = () => SugarElement.fromDom(document);\n\n    const walkUp = (navigation, doc) => {\n      const frame = navigation.view(doc);\n      return frame.fold(constant$1([]), f => {\n        const parent = navigation.owner(f);\n        const rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    const pathTo = (element, navigation) => {\n      const d = navigation.owner(element);\n      const paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    const view = doc => {\n      var _a;\n      const element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    const owner$3 = element => owner$4(element);\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    const find$2 = element => {\n      const doc = getDocument();\n      const scroll = get$b(doc);\n      const path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), frames => {\n        const offset = viewport$1(element);\n        const r = foldr(frames, (b, a) => {\n          const loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    const pointed = (point, width, height) => ({\n      point,\n      width,\n      height\n    });\n    const rect = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height\n    });\n    const bounds = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const box$1 = element => {\n      const xy = absolute$3(element);\n      const w = getOuter$1(element);\n      const h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    const absolute$2 = element => {\n      const position = find$2(element);\n      const width = getOuter$1(element);\n      const height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    const constrain = (original, constraint) => {\n      const left = Math.max(original.x, constraint.x);\n      const top = Math.max(original.y, constraint.y);\n      const right = Math.min(original.right, constraint.right);\n      const bottom = Math.min(original.bottom, constraint.bottom);\n      const width = right - left;\n      const height = bottom - top;\n      return bounds(left, top, width, height);\n    };\n    const constrainByMany = (original, constraints) => {\n      return foldl(constraints, (acc, c) => constrain(acc, c), original);\n    };\n    const win = () => getBounds$3(window);\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    const value$4 = value => {\n      const applyHelper = fn => fn(value);\n      const constHelper = constant$1(value);\n      const outputHelper = () => output;\n      const output = {\n        tag: true,\n        inner: value,\n        fold: (_onError, onValue) => onValue(value),\n        isValue: always,\n        isError: never,\n        map: mapper => Result.value(mapper(value)),\n        mapError: outputHelper,\n        bind: applyHelper,\n        exists: applyHelper,\n        forall: applyHelper,\n        getOr: constHelper,\n        or: outputHelper,\n        getOrThunk: constHelper,\n        orThunk: outputHelper,\n        getOrDie: constHelper,\n        each: fn => {\n          fn(value);\n        },\n        toOptional: () => Optional.some(value)\n      };\n      return output;\n    };\n    const error$1 = error => {\n      const outputHelper = () => output;\n      const output = {\n        tag: false,\n        inner: error,\n        fold: (onError, _onValue) => onError(error),\n        isValue: never,\n        isError: always,\n        map: outputHelper,\n        mapError: mapper => Result.error(mapper(error)),\n        bind: outputHelper,\n        exists: never,\n        forall: always,\n        getOr: identity,\n        or: identity,\n        getOrThunk: apply$1,\n        orThunk: apply$1,\n        getOrDie: die(String(error)),\n        each: noop,\n        toOptional: Optional.none\n      };\n      return output;\n    };\n    const fromOption = (optional, err) => optional.fold(() => error$1(err), value$4);\n    const Result = {\n      value: value$4,\n      error: error$1,\n      fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    const fold$1 = (res, onError, onValue) => res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    const partition$2 = results => {\n      const values = [];\n      const errors = [];\n      each$1(results, obj => {\n        fold$1(obj, err => errors.push(err), val => values.push(val));\n      });\n      return {\n        values,\n        errors\n      };\n    };\n    const mapError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    const map = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    const bind$1 = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    const bindError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    const svalue = v => ({\n      stype: SimpleResultType.Value,\n      svalue: v\n    });\n    const serror = e => ({\n      stype: SimpleResultType.Error,\n      serror: e\n    });\n    const toResult$1 = res => fold$1(res, Result.error, Result.value);\n    const fromResult$1 = res => res.fold(serror, svalue);\n    const SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue,\n      partition: partition$2,\n      serror,\n      bind: bind$1,\n      bindError,\n      map,\n      mapError,\n      fold: fold$1\n    };\n\n    const field$2 = (key, newKey, presence, prop) => ({\n      tag: 'field',\n      key,\n      newKey,\n      presence,\n      prop\n    });\n    const customField$1 = (newKey, instantiator) => ({\n      tag: 'custom',\n      newKey,\n      instantiator\n    });\n    const fold = (value, ifField, ifCustom) => {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    const shallow$1 = (old, nu) => {\n      return nu;\n    };\n    const deep$1 = (old, nu) => {\n      const bothObjects = isPlainObject(old) && isPlainObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    const baseMerge = merger => {\n      return (...objects) => {\n        if (objects.length === 0) {\n          throw new Error(`Can't merge zero objects`);\n        }\n        const ret = {};\n        for (let j = 0; j < objects.length; j++) {\n          const curObject = objects[j];\n          for (const key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    const deepMerge = baseMerge(deep$1);\n    const merge$1 = baseMerge(shallow$1);\n\n    const required$2 = () => ({\n      tag: 'required',\n      process: {}\n    });\n    const defaultedThunk = fallbackThunk => ({\n      tag: 'defaultedThunk',\n      process: fallbackThunk\n    });\n    const defaulted$1 = fallback => defaultedThunk(constant$1(fallback));\n    const asOption = () => ({\n      tag: 'option',\n      process: {}\n    });\n    const mergeWithThunk = baseThunk => ({\n      tag: 'mergeWithThunk',\n      process: baseThunk\n    });\n    const mergeWith = base => mergeWithThunk(constant$1(base));\n\n    const mergeValues$1 = (values, base) => values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    const mergeErrors$1 = errors => compose(SimpleResult.serror, flatten)(errors);\n    const consolidateObj = (objects, base) => {\n      const partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    const consolidateArr = objects => {\n      const partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    const ResultCombine = {\n      consolidateObj,\n      consolidateArr\n    };\n\n    const formatObj = input => {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    const formatErrors = errors => {\n      const es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, e => {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    const nu$a = (path, getErrorInfo) => {\n      return SimpleResult.serror([{\n          path,\n          getErrorInfo\n        }]);\n    };\n    const missingRequired = (path, key, obj) => nu$a(path, () => 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj));\n    const missingKey = (path, key) => nu$a(path, () => 'Choice schema did not contain choice key: \"' + key + '\"');\n    const missingBranch = (path, branches, branch) => nu$a(path, () => 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches));\n    const unsupportedFields = (path, unsupported) => nu$a(path, () => 'There are unsupported fields: [' + unsupported.join(', ') + '] specified');\n    const custom = (path, err) => nu$a(path, constant$1(err));\n\n    const value$3 = validator => {\n      const extract = (path, val) => {\n        return SimpleResult.bindError(validator(val), err => custom(path, err));\n      };\n      const toString = constant$1('val');\n      return {\n        extract,\n        toString\n      };\n    };\n    const anyValue$1 = value$3(SimpleResult.svalue);\n\n    const requiredAccess = (path, obj, key, bundle) => get$g(obj, key).fold(() => missingRequired(path, key, obj), bundle);\n    const fallbackAccess = (obj, key, fallback, bundle) => {\n      const v = get$g(obj, key).getOrThunk(() => fallback(obj));\n      return bundle(v);\n    };\n    const optionAccess = (obj, key, bundle) => bundle(get$g(obj, key));\n    const optionDefaultedAccess = (obj, key, fallback, bundle) => {\n      const opt = get$g(obj, key).map(val => val === true ? fallback(obj) : val);\n      return bundle(opt);\n    };\n    const extractField = (field, path, obj, key, prop) => {\n      const bundle = av => prop.extract(path.concat([key]), av);\n      const bundleAsOption = optValue => optValue.fold(() => SimpleResult.svalue(Optional.none()), ov => {\n        const result = prop.extract(path.concat([key]), ov);\n        return SimpleResult.map(result, Optional.some);\n      });\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), v => {\n            const result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    const extractFields = (path, obj, fields) => {\n      const success = {};\n      const errors = [];\n      for (const field of fields) {\n        fold(field, (key, newKey, presence, prop) => {\n          const result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, err => {\n            errors.push(...err);\n          }, res => {\n            success[newKey] = res;\n          });\n        }, (newKey, instantiator) => {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    const valueThunk = getDelegate => {\n      const extract = (path, val) => getDelegate().extract(path, val);\n      const toString = () => getDelegate().toString();\n      return {\n        extract,\n        toString\n      };\n    };\n    const getSetKeys = obj => keys(filter$1(obj, isNonNullable));\n    const objOfOnly = fields => {\n      const delegate = objOf(fields);\n      const fieldNames = foldr(fields, (acc, value) => {\n        return fold(value, key => deepMerge(acc, { [key]: true }), constant$1(acc));\n      }, {});\n      const extract = (path, o) => {\n        const keys = isBoolean(o) ? [] : getSetKeys(o);\n        const extra = filter$2(keys, k => !hasNonNullableKey(fieldNames, k));\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract,\n        toString: delegate.toString\n      };\n    };\n    const objOf = values => {\n      const extract = (path, o) => extractFields(path, o, values);\n      const toString = () => {\n        const fieldStrings = map$2(values, value => fold(value, (key, _okey, _presence, prop) => key + ' -> ' + prop.toString(), (newKey, _instantiator) => 'state(' + newKey + ')'));\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOf = prop => {\n      const extract = (path, array) => {\n        const results = map$2(array, (a, i) => prop.extract(path.concat(['[' + i + ']']), a));\n        return ResultCombine.consolidateArr(results);\n      };\n      const toString = () => 'array(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n    const oneOf = (props, rawF) => {\n      const f = rawF !== undefined ? rawF : identity;\n      const extract = (path, val) => {\n        const errors = [];\n        for (const prop of props) {\n          const res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return {\n              stype: SimpleResultType.Value,\n              svalue: f(res.svalue)\n            };\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      const toString = () => 'oneOf(' + map$2(props, prop => prop.toString()).join(', ') + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n    const setOf$1 = (validator, prop) => {\n      const validateKeys = (path, keys) => arrOf(value$3(validator)).extract(path, keys);\n      const extract = (path, o) => {\n        const keys$1 = keys(o);\n        const validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, validKeys => {\n          const schema = map$2(validKeys, vk => {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      const toString = () => 'setOf(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n    const thunk = (_desc, processor) => {\n      const getP = cached(processor);\n      const extract = (path, val) => getP().extract(path, val);\n      const toString = () => getP().toString();\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOfObj = compose(arrOf, objOf);\n\n    const anyValue = constant$1(anyValue$1);\n    const typedValue = (validator, expectedType) => value$3(a => {\n      const actualType = typeof a;\n      return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror(`Expected type: ${ expectedType } but got: ${ actualType }`);\n    });\n    const number = typedValue(isNumber, 'number');\n    const string = typedValue(isString, 'string');\n    const boolean = typedValue(isBoolean, 'boolean');\n    const functionProcessor = typedValue(isFunction, 'function');\n    const isPostMessageable = val => {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(prop => isPostMessageable(val[prop]));\n      default:\n        return false;\n      }\n    };\n    const postMessageable = value$3(a => {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    const chooseFrom = (path, input, branches, ch) => {\n      const fields = get$g(branches, ch);\n      return fields.fold(() => missingBranch(path, branches, ch), vp => vp.extract(path.concat(['branch: ' + ch]), input));\n    };\n    const choose$2 = (key, branches) => {\n      const extract = (path, input) => {\n        const choice = get$g(input, key);\n        return choice.fold(() => missingKey(path, key), chosen => chooseFrom(path, input, branches, chosen));\n      };\n      const toString = () => 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const arrOfVal = () => arrOf(anyValue$1);\n    const valueOf = validator => value$3(v => validator(v).fold(SimpleResult.serror, SimpleResult.svalue));\n    const setOf = (validator, prop) => setOf$1(v => SimpleResult.fromResult(validator(v)), prop);\n    const extractValue = (label, prop, obj) => {\n      const res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, errs => ({\n        input: obj,\n        errors: errs\n      }));\n    };\n    const asRaw = (label, prop, obj) => SimpleResult.toResult(extractValue(label, prop, obj));\n    const getOrDie = extraction => {\n      return extraction.fold(errInfo => {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    const asRawOrDie$1 = (label, prop, obj) => getOrDie(asRaw(label, prop, obj));\n    const formatError = errInfo => {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    const choose$1 = (key, branches) => choose$2(key, map$1(branches, objOf));\n    const thunkOf = (desc, schema) => thunk(desc, schema);\n\n    const field$1 = field$2;\n    const customField = customField$1;\n    const validateEnum = values => valueOf(value => contains$2(values, value) ? Result.value(value) : Result.error(`Unsupported value: \"${ value }\", choose one of \"${ values.join(', ') }\".`));\n    const required$1 = key => field$1(key, key, required$2(), anyValue());\n    const requiredOf = (key, schema) => field$1(key, key, required$2(), schema);\n    const requiredNumber = key => requiredOf(key, number);\n    const requiredString = key => requiredOf(key, string);\n    const requiredStringEnum = (key, values) => field$1(key, key, required$2(), validateEnum(values));\n    const requiredBoolean = key => requiredOf(key, boolean);\n    const requiredFunction = key => requiredOf(key, functionProcessor);\n    const forbid = (key, message) => field$1(key, key, asOption(), value$3(_v => SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message)));\n    const requiredObjOf = (key, objSchema) => field$1(key, key, required$2(), objOf(objSchema));\n    const requiredArrayOfObj = (key, objFields) => field$1(key, key, required$2(), arrOfObj(objFields));\n    const requiredArrayOf = (key, schema) => field$1(key, key, required$2(), arrOf(schema));\n    const option$3 = key => field$1(key, key, asOption(), anyValue());\n    const optionOf = (key, schema) => field$1(key, key, asOption(), schema);\n    const optionNumber = key => optionOf(key, number);\n    const optionString = key => optionOf(key, string);\n    const optionStringEnum = (key, values) => optionOf(key, validateEnum(values));\n    const optionFunction = key => optionOf(key, functionProcessor);\n    const optionArrayOf = (key, schema) => optionOf(key, arrOf(schema));\n    const optionObjOf = (key, objSchema) => optionOf(key, objOf(objSchema));\n    const optionObjOfOnly = (key, objSchema) => optionOf(key, objOfOnly(objSchema));\n    const defaulted = (key, fallback) => field$1(key, key, defaulted$1(fallback), anyValue());\n    const defaultedOf = (key, fallback, schema) => field$1(key, key, defaulted$1(fallback), schema);\n    const defaultedNumber = (key, fallback) => defaultedOf(key, fallback, number);\n    const defaultedString = (key, fallback) => defaultedOf(key, fallback, string);\n    const defaultedStringEnum = (key, fallback, values) => defaultedOf(key, fallback, validateEnum(values));\n    const defaultedBoolean = (key, fallback) => defaultedOf(key, fallback, boolean);\n    const defaultedFunction = (key, fallback) => defaultedOf(key, fallback, functionProcessor);\n    const defaultedPostMsg = (key, fallback) => defaultedOf(key, fallback, postMessageable);\n    const defaultedArrayOf = (key, fallback, schema) => defaultedOf(key, fallback, arrOf(schema));\n    const defaultedObjOf = (key, fallback, objSchema) => defaultedOf(key, fallback, objOf(objSchema));\n\n    const Cell = initial => {\n      let value = initial;\n      const get = () => {\n        return value;\n      };\n      const set = v => {\n        value = v;\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    const generate$7 = cases => {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      const constructors = [];\n      const adt = {};\n      each$1(cases, (acase, count) => {\n        const keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        const key = keys$1[0];\n        const value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = (...args) => {\n          const argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          const match = branches => {\n            const branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            const allReqd = forall(constructors, reqKey => {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: (...foldArgs) => {\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              const target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match,\n            log: label => {\n              console.log(label, {\n                constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    const Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    const partition$1 = results => {\n      const errors = [];\n      const values = [];\n      each$1(results, result => {\n        result.fold(err => {\n          errors.push(err);\n        }, value => {\n          values.push(value);\n        });\n      });\n      return {\n        errors,\n        values\n      };\n    };\n\n    const exclude$1 = (obj, fields) => {\n      const r = {};\n      each(obj, (v, k) => {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    const wrap$2 = (key, value) => ({ [key]: value });\n    const wrapAll$1 = keyvalues => {\n      const r = {};\n      each$1(keyvalues, kv => {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    const exclude = (obj, fields) => exclude$1(obj, fields);\n    const wrap$1 = (key, value) => wrap$2(key, value);\n    const wrapAll = keyvalues => wrapAll$1(keyvalues);\n    const mergeValues = (values, base) => {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    const mergeErrors = errors => Result.error(flatten(errors));\n    const consolidate = (objs, base) => {\n      const partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    const ensureIsRoot = isRoot => isFunction(isRoot) ? isRoot : never;\n    const ancestor$2 = (scope, transform, isRoot) => {\n      let element = scope.dom;\n      const stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        const transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$4 = (scope, transform, isRoot) => {\n      const current = transform(scope);\n      const stop = ensureIsRoot(isRoot);\n      return current.orThunk(() => stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop));\n    };\n\n    const isSource = (component, simulatedEvent) => eq(component.element, simulatedEvent.event.target);\n\n    const defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    const nu$9 = parts => {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return {\n        ...defaultEventHandler,\n        ...parts\n      };\n    };\n    const all$2 = (handlers, f) => (...args) => foldl(handlers, (acc, handler) => acc && f(handler).apply(undefined, args), true);\n    const any = (handlers, f) => (...args) => foldl(handlers, (acc, handler) => acc || f(handler).apply(undefined, args), false);\n    const read$2 = handler => isFunction(handler) ? {\n      can: always,\n      abort: never,\n      run: handler\n    } : handler;\n    const fuse$1 = handlers => {\n      const can = all$2(handlers, handler => handler.can);\n      const abort = any(handlers, handler => handler.abort);\n      const run = (...args) => {\n        each$1(handlers, handler => {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can,\n        abort,\n        run\n      };\n    };\n\n    const constant = constant$1;\n    const touchstart = constant('touchstart');\n    const touchmove = constant('touchmove');\n    const touchend = constant('touchend');\n    const touchcancel = constant('touchcancel');\n    const mousedown = constant('mousedown');\n    const mousemove = constant('mousemove');\n    const mouseout = constant('mouseout');\n    const mouseup = constant('mouseup');\n    const mouseover = constant('mouseover');\n    const focusin = constant('focusin');\n    const focusout = constant('focusout');\n    const keydown = constant('keydown');\n    const keyup = constant('keyup');\n    const input = constant('input');\n    const change = constant('change');\n    const click = constant('click');\n    const transitioncancel = constant('transitioncancel');\n    const transitionend = constant('transitionend');\n    const transitionstart = constant('transitionstart');\n    const selectstart = constant('selectstart');\n\n    const prefixName = name => constant$1('alloy.' + name);\n    const alloy = { tap: prefixName('tap') };\n    const focus$4 = prefixName('focus');\n    const postBlur = prefixName('blur.post');\n    const postPaste = prefixName('paste.post');\n    const receive = prefixName('receive');\n    const execute$5 = prefixName('execute');\n    const focusItem = prefixName('focus.item');\n    const tap = alloy.tap;\n    const longpress = prefixName('longpress');\n    const sandboxClose = prefixName('sandbox.close');\n    const typeaheadCancel = prefixName('typeahead.cancel');\n    const systemInit = prefixName('system.init');\n    const documentTouchmove = prefixName('system.touchmove');\n    const documentTouchend = prefixName('system.touchend');\n    const windowScroll = prefixName('system.scroll');\n    const windowResize = prefixName('system.resize');\n    const attachedToDom = prefixName('system.attached');\n    const detachedFromDom = prefixName('system.detached');\n    const dismissRequested = prefixName('system.dismissRequested');\n    const repositionRequested = prefixName('system.repositionRequested');\n    const focusShifted = prefixName('focusmanager.shifted');\n    const slotVisibility = prefixName('slotcontainer.visibility');\n    const externalElementScroll = prefixName('system.external.element.scroll');\n    const changeTab = prefixName('change.tab');\n    const dismissTab = prefixName('dismiss.tab');\n    const highlight$1 = prefixName('highlight');\n    const dehighlight$1 = prefixName('dehighlight');\n\n    const emit = (component, event) => {\n      dispatchWith(component, component.element, event, {});\n    };\n    const emitWith = (component, event, properties) => {\n      dispatchWith(component, component.element, event, properties);\n    };\n    const emitExecute = component => {\n      emit(component, execute$5());\n    };\n    const dispatch = (component, target, event) => {\n      dispatchWith(component, target, event, {});\n    };\n    const dispatchWith = (component, target, event, properties) => {\n      const data = {\n        target,\n        ...properties\n      };\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    const retargetAndDispatchWith = (component, target, eventName, properties) => {\n      const data = {\n        ...properties,\n        target\n      };\n      component.getSystem().triggerEvent(eventName, target, data);\n    };\n    const dispatchEvent = (component, target, event, simulatedEvent) => {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    const derive$2 = configs => wrapAll(configs);\n    const abort = (name, predicate) => {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    const can = (name, predicate) => {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    const preventDefault = name => {\n      return {\n        key: name,\n        value: nu$9({\n          run: (component, simulatedEvent) => {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    const run$1 = (name, handler) => {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    const runActionExtra = (name, action, extra) => {\n      return {\n        key: name,\n        value: nu$9({\n          run: (component, simulatedEvent) => {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    const runOnName = name => {\n      return handler => run$1(name, handler);\n    };\n    const runOnSourceName = name => {\n      return handler => ({\n        key: name,\n        value: nu$9({\n          run: (component, simulatedEvent) => {\n            if (isSource(component, simulatedEvent)) {\n              handler(component, simulatedEvent);\n            }\n          }\n        })\n      });\n    };\n    const redirectToUid = (name, uid) => {\n      return run$1(name, (component, simulatedEvent) => {\n        component.getSystem().getByUid(uid).each(redirectee => {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    const redirectToPart = (name, detail, partName) => {\n      const uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    const runWithTarget = (name, f) => {\n      return run$1(name, (component, simulatedEvent) => {\n        const ev = simulatedEvent.event;\n        const target = component.getSystem().getByDom(ev.target).getOrThunk(() => {\n          const closest = closest$4(ev.target, el => component.getSystem().getByDom(el).toOptional(), never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    const cutter = name => {\n      return run$1(name, (component, simulatedEvent) => {\n        simulatedEvent.cut();\n      });\n    };\n    const stopper = name => {\n      return run$1(name, (component, simulatedEvent) => {\n        simulatedEvent.stop();\n      });\n    };\n    const runOnSource = (name, f) => {\n      return runOnSourceName(name)(f);\n    };\n    const runOnAttached = runOnSourceName(attachedToDom());\n    const runOnDetached = runOnSourceName(detachedFromDom());\n    const runOnInit = runOnSourceName(systemInit());\n    const runOnExecute$1 = runOnName(execute$5());\n\n    const fromHtml$1 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    const get$9 = element => element.dom.innerHTML;\n    const set$6 = (element, content) => {\n      const owner = owner$4(element);\n      const docDom = owner.dom;\n      const fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      const contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    const getOuter = element => {\n      const container = SugarElement.fromTag('div');\n      const clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$9(container);\n    };\n\n    const clone$1 = (original, isDeep) => SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    const shallow = original => clone$1(original, false);\n    const deep = original => clone$1(original, true);\n\n    const getHtml = element => {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        const clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    const element = elem => getHtml(elem);\n\n    const isRecursive = (component, originator, target) => eq(originator, component.element) && !eq(originator, target);\n    const events$i = derive$2([can(focus$4(), (component, simulatedEvent) => {\n        const event = simulatedEvent.event;\n        const originator = event.originator;\n        const target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    let unique = 0;\n    const generate$6 = prefix => {\n      const date = new Date();\n      const time = date.getTime();\n      const random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    const prefix$1 = constant$1('alloy-id-');\n    const idAttr$1 = constant$1('data-alloy-id');\n\n    const prefix = prefix$1();\n    const idAttr = idAttr$1();\n    const write = (label, elem) => {\n      const id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    const writeOnly = (elem, uid) => {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    const read$1 = elem => {\n      const id = isElement$1(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    const generate$5 = prefix => generate$6(prefix);\n\n    const make$8 = identity;\n\n    const NoContextApi = getComp => {\n      const getMessage = event => `The component must be in a context to execute: ${ event }` + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      const fail = event => () => {\n        throw new Error(getMessage(event));\n      };\n      const warn = event => () => {\n        console.warn(getMessage(event));\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        buildOrPatch: fail('buildOrPatch'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    const singleton$1 = NoContextApi();\n\n    const markAsBehaviourApi = (f, apiName, apiFunction) => {\n      const delegate = apiFunction.toString();\n      const endIndex = delegate.indexOf(')') + 1;\n      const openBracketIndex = delegate.indexOf('(');\n      const parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = () => ({\n        name: apiName,\n        parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n      });\n      return f;\n    };\n    const cleanParameters = parameters => map$2(parameters, p => endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p);\n    const markAsExtraApi = (f, extraName) => {\n      const delegate = f.toString();\n      const endIndex = delegate.indexOf(')') + 1;\n      const openBracketIndex = delegate.indexOf('(');\n      const parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = () => ({\n        name: extraName,\n        parameters: cleanParameters(parameters)\n      });\n      return f;\n    };\n    const markAsSketchApi = (f, apiFunction) => {\n      const delegate = apiFunction.toString();\n      const endIndex = delegate.indexOf(')') + 1;\n      const openBracketIndex = delegate.indexOf('(');\n      const parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = () => ({\n        name: 'OVERRIDE',\n        parameters: cleanParameters(parameters.slice(1))\n      });\n      return f;\n    };\n\n    const premadeTag = generate$6('alloy-premade');\n    const premade$1 = comp => {\n      Object.defineProperty(comp.element.dom, premadeTag, {\n        value: comp.uid,\n        writable: true\n      });\n      return wrap$1(premadeTag, comp);\n    };\n    const isPremade = element => has$2(element.dom, premadeTag);\n    const getPremade = spec => get$g(spec, premadeTag);\n    const makeApi = f => markAsSketchApi((component, ...rest) => f(component.getApis(), component, ...rest), f);\n\n    const NoState = { init: () => nu$8({ readState: constant$1('No State required') }) };\n    const nu$8 = spec => spec;\n\n    const generateFrom$1 = (spec, all) => {\n      const schema = map$2(all, a => optionObjOf(a.name(), [\n        required$1('config'),\n        defaulted('state', NoState)\n      ]));\n      const validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(errInfo => {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity);\n      return {\n        list: all,\n        data: map$1(validated, optBlobThunk => {\n          const output = optBlobThunk.map(blob => ({\n            config: blob.config,\n            state: blob.state.init(blob.config)\n          }));\n          return constant$1(output);\n        })\n      };\n    };\n    const getBehaviours$3 = bData => bData.list;\n    const getData$2 = bData => bData.data;\n\n    const byInnerKey = (data, tuple) => {\n      const r = {};\n      each(data, (detail, key) => {\n        each(detail, (value, indexKey) => {\n          const chain = get$g(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    const nu$7 = s => ({\n      classes: isUndefined(s.classes) ? [] : s.classes,\n      attributes: isUndefined(s.attributes) ? {} : s.attributes,\n      styles: isUndefined(s.styles) ? {} : s.styles\n    });\n    const merge = (defnA, mod) => ({\n      ...defnA,\n      attributes: {\n        ...defnA.attributes,\n        ...mod.attributes\n      },\n      styles: {\n        ...defnA.styles,\n        ...mod.styles\n      },\n      classes: defnA.classes.concat(mod.classes)\n    });\n\n    const combine$2 = (info, baseMod, behaviours, base) => {\n      const modsByBehaviour = { ...baseMod };\n      each$1(behaviours, behaviour => {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      const byAspect = byInnerKey(modsByBehaviour, (name, modification) => ({\n        name,\n        modification\n      }));\n      const combineObjects = objects => foldr(objects, (b, a) => ({\n        ...a.modification,\n        ...b\n      }), {});\n      const combinedClasses = foldr(byAspect.classes, (b, a) => a.modification.concat(b), []);\n      const combinedAttributes = combineObjects(byAspect.attributes);\n      const combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    const sortKeys = (label, keyName, array, order) => {\n      try {\n        const sorted = sort(array, (a, b) => {\n          const aKey = a[keyName];\n          const bKey = b[keyName];\n          const aIndex = order.indexOf(aKey);\n          const bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    const uncurried = (handler, purpose) => ({\n      handler,\n      purpose\n    });\n    const curried = (handler, purpose) => ({\n      cHandler: handler,\n      purpose\n    });\n    const curryArgs = (descHandler, extraArgs) => curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    const getCurried = descHandler => descHandler.cHandler;\n\n    const behaviourTuple = (name, handler) => ({\n      name,\n      handler\n    });\n    const nameToHandlers = (behaviours, info) => {\n      const r = {};\n      each$1(behaviours, behaviour => {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    const groupByEvents = (info, behaviours, base) => {\n      const behaviourEvents = {\n        ...base,\n        ...nameToHandlers(behaviours, info)\n      };\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    const combine$1 = (info, eventOrder, behaviours, base) => {\n      const byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    const assemble = rawHandler => {\n      const handler = read$2(rawHandler);\n      return (component, simulatedEvent, ...rest) => {\n        const args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    const missingOrderError = (eventName, tuples) => Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, c => c.name), null, 2)]);\n    const fuse = (tuples, eventOrder, eventName) => {\n      const order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(sortedTuples => {\n          const handlers = map$2(sortedTuples, tuple => tuple.handler);\n          return fuse$1(handlers);\n        });\n      }\n    };\n    const combineGroups = (byEventName, eventOrder) => {\n      const r = mapToArray(byEventName, (tuples, eventName) => {\n        const combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(handler => {\n          const assembled = assemble(handler);\n          const purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], o => exists(tuples, t => t.name === o)).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    const baseBehaviour = 'alloy.base.behaviour';\n    const schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option$3('value'),\n        option$3('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith({\n        [execute$5()]: [\n          'disabling',\n          baseBehaviour,\n          'toggling',\n          'typeaheadevents'\n        ],\n        [focus$4()]: [\n          baseBehaviour,\n          'focusing',\n          'keying'\n        ],\n        [systemInit()]: [\n          baseBehaviour,\n          'disabling',\n          'toggling',\n          'representing'\n        ],\n        [input()]: [\n          baseBehaviour,\n          'representing',\n          'streaming',\n          'invalidating'\n        ],\n        [detachedFromDom()]: [\n          baseBehaviour,\n          'representing',\n          'item-events',\n          'toolbar-button-events',\n          'tooltipping'\n        ],\n        [mousedown()]: [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ],\n        [touchstart()]: [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ],\n        [mouseover()]: [\n          'item-type-events',\n          'tooltipping'\n        ],\n        [receive()]: [\n          'receiving',\n          'reflecting',\n          'tooltipping'\n        ]\n      }), anyValue()),\n      option$3('domModification')\n    ]);\n    const toInfo = spec => asRaw('custom.definition', schema$z, spec);\n    const toDefinition = detail => ({\n      ...detail.dom,\n      uid: detail.uid,\n      domChildren: map$2(detail.components, comp => comp.element)\n    });\n    const toModification = detail => detail.domModification.fold(() => nu$7({}), nu$7);\n    const toEvents = info => info.events;\n\n    const read = (element, attr) => {\n      const value = get$f(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    const add$4 = (element, attr, id) => {\n      const old = read(element, attr);\n      const nu = old.concat([id]);\n      set$9(element, attr, nu.join(' '));\n      return true;\n    };\n    const remove$4 = (element, attr, id) => {\n      const nu = filter$2(read(element, attr), v => v !== id);\n      if (nu.length > 0) {\n        set$9(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    const supports = element => element.dom.classList !== undefined;\n    const get$8 = element => read(element, 'class');\n    const add$3 = (element, clazz) => add$4(element, 'class', clazz);\n    const remove$3 = (element, clazz) => remove$4(element, 'class', clazz);\n    const toggle$5 = (element, clazz) => {\n      if (contains$2(get$8(element), clazz)) {\n        return remove$3(element, clazz);\n      } else {\n        return add$3(element, clazz);\n      }\n    };\n\n    const add$2 = (element, clazz) => {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    const cleanClass = element => {\n      const classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    const remove$2 = (element, clazz) => {\n      if (supports(element)) {\n        const classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    const toggle$4 = (element, clazz) => {\n      const result = supports(element) ? element.dom.classList.toggle(clazz) : toggle$5(element, clazz);\n      cleanClass(element);\n      return result;\n    };\n    const has = (element, clazz) => supports(element) && element.dom.classList.contains(clazz);\n\n    const add$1 = (element, classes) => {\n      each$1(classes, x => {\n        add$2(element, x);\n      });\n    };\n    const remove$1 = (element, classes) => {\n      each$1(classes, x => {\n        remove$2(element, x);\n      });\n    };\n    const toggle$3 = (element, classes) => {\n      each$1(classes, x => {\n        toggle$4(element, x);\n      });\n    };\n    const hasAll = (element, classes) => forall(classes, clazz => has(element, clazz));\n    const getNative = element => {\n      const classList = element.dom.classList;\n      const r = new Array(classList.length);\n      for (let i = 0; i < classList.length; i++) {\n        const item = classList.item(i);\n        if (item !== null) {\n          r[i] = item;\n        }\n      }\n      return r;\n    };\n    const get$7 = element => supports(element) ? getNative(element) : get$8(element);\n\n    const get$6 = element => element.dom.value;\n    const set$5 = (element, value) => {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    const determineObsoleted = (parent, index, oldObsoleted) => {\n      const newObsoleted = child$2(parent, index);\n      return newObsoleted.map(newObs => {\n        const elemChanged = oldObsoleted.exists(o => !eq(o, newObs));\n        if (elemChanged) {\n          const oldTag = oldObsoleted.map(name$3).getOr('span');\n          const marker = SugarElement.fromTag(oldTag);\n          before$1(newObs, marker);\n          return marker;\n        } else {\n          return newObs;\n        }\n      });\n    };\n    const ensureInDom = (parent, child, obsoleted) => {\n      obsoleted.fold(() => append$2(parent, child), obs => {\n        if (!eq(obs, child)) {\n          before$1(obs, child);\n          remove$5(obs);\n        }\n      });\n    };\n    const patchChildrenWith = (parent, nu, f) => {\n      const builtChildren = map$2(nu, f);\n      const currentChildren = children(parent);\n      each$1(currentChildren.slice(builtChildren.length), remove$5);\n      return builtChildren;\n    };\n    const patchSpecChild = (parent, index, spec, build) => {\n      const oldObsoleted = child$2(parent, index);\n      const childComp = build(spec, oldObsoleted);\n      const obsoleted = determineObsoleted(parent, index, oldObsoleted);\n      ensureInDom(parent, childComp.element, obsoleted);\n      return childComp;\n    };\n    const patchSpecChildren = (parent, specs, build) => patchChildrenWith(parent, specs, (spec, index) => patchSpecChild(parent, index, spec, build));\n    const patchDomChildren = (parent, nodes) => patchChildrenWith(parent, nodes, (node, index) => {\n      const optObsoleted = child$2(parent, index);\n      ensureInDom(parent, node, optObsoleted);\n      return node;\n    });\n\n    const diffKeyValueSet = (newObj, oldObj) => {\n      const newKeys = keys(newObj);\n      const oldKeys = keys(oldObj);\n      const toRemove = difference(oldKeys, newKeys);\n      const toSet = bifilter(newObj, (v, k) => {\n        return !has$2(oldObj, k) || v !== oldObj[k];\n      }).t;\n      return {\n        toRemove,\n        toSet\n      };\n    };\n    const reconcileToDom = (definition, obsoleted) => {\n      const {\n        class: clazz,\n        style,\n        ...existingAttributes\n      } = clone$2(obsoleted);\n      const {\n        toSet: attrsToSet,\n        toRemove: attrsToRemove\n      } = diffKeyValueSet(definition.attributes, existingAttributes);\n      const updateAttrs = () => {\n        each$1(attrsToRemove, a => remove$7(obsoleted, a));\n        setAll$1(obsoleted, attrsToSet);\n      };\n      const existingStyles = getAllRaw(obsoleted);\n      const {\n        toSet: stylesToSet,\n        toRemove: stylesToRemove\n      } = diffKeyValueSet(definition.styles, existingStyles);\n      const updateStyles = () => {\n        each$1(stylesToRemove, s => remove$6(obsoleted, s));\n        setAll(obsoleted, stylesToSet);\n      };\n      const existingClasses = get$7(obsoleted);\n      const classesToRemove = difference(existingClasses, definition.classes);\n      const classesToAdd = difference(definition.classes, existingClasses);\n      const updateClasses = () => {\n        add$1(obsoleted, classesToAdd);\n        remove$1(obsoleted, classesToRemove);\n      };\n      const updateHtml = html => {\n        set$6(obsoleted, html);\n      };\n      const updateChildren = () => {\n        const children = definition.domChildren;\n        patchDomChildren(obsoleted, children);\n      };\n      const updateValue = () => {\n        const valueElement = obsoleted;\n        const value = definition.value.getOrUndefined();\n        if (value !== get$6(valueElement)) {\n          set$5(valueElement, value !== null && value !== void 0 ? value : '');\n        }\n      };\n      updateAttrs();\n      updateClasses();\n      updateStyles();\n      definition.innerHtml.fold(updateChildren, updateHtml);\n      updateValue();\n      return obsoleted;\n    };\n\n    const introduceToDom = definition => {\n      const subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(html => set$6(subject, html));\n      const children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(value => {\n        set$5(subject, value);\n      });\n      return subject;\n    };\n    const attemptPatch = (definition, obsoleted) => {\n      try {\n        const e = reconcileToDom(definition, obsoleted);\n        return Optional.some(e);\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    const hasMixedChildren = definition => definition.innerHtml.isSome() && definition.domChildren.length > 0;\n    const renderToDom = (definition, optObsoleted) => {\n      const canBePatched = candidate => name$3(candidate) === definition.tag && !hasMixedChildren(definition) && !isPremade(candidate);\n      const elem = optObsoleted.filter(canBePatched).bind(obsoleted => attemptPatch(definition, obsoleted)).getOrThunk(() => introduceToDom(definition));\n      writeOnly(elem, definition.uid);\n      return elem;\n    };\n\n    const getBehaviours$2 = spec => {\n      const behaviours = get$g(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), name => {\n        const behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    const generateFrom = (spec, all) => generateFrom$1(spec, all);\n    const generate$4 = spec => {\n      const all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    const getDomDefinition = (info, bList, bData) => {\n      const definition = toDefinition(info);\n      const infoModification = toModification(info);\n      const baseModification = { 'alloy.base.modification': infoModification };\n      const modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    const getEvents = (info, bList, bData) => {\n      const baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    const build$2 = (spec, obsoleted) => {\n      const getMe = () => me;\n      const systemApi = Cell(singleton$1);\n      const info = getOrDie(toInfo(spec));\n      const bBlob = generate$4(spec);\n      const bList = getBehaviours$3(bBlob);\n      const bData = getData$2(bBlob);\n      const modDefinition = getDomDefinition(info, bList, bData);\n      const item = renderToDom(modDefinition, obsoleted);\n      const events = getEvents(info, bList, bData);\n      const subcomponents = Cell(info.components);\n      const connect = newApi => {\n        systemApi.set(newApi);\n      };\n      const disconnect = () => {\n        systemApi.set(NoContextApi(getMe));\n      };\n      const syncComponents = () => {\n        const children$1 = children(item);\n        const subs = bind$3(children$1, child => systemApi.get().getByDom(child).fold(() => [], pure$2));\n        subcomponents.set(subs);\n      };\n      const config = behaviour => {\n        const b = bData;\n        const f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : () => {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      const hasConfigured = behaviour => isFunction(bData[behaviour.name()]);\n      const getApis = () => info.apis;\n      const readState = behaviourName => bData[behaviourName]().map(b => b.state.readState()).getOr('not enabled');\n      const me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config,\n        hasConfigured,\n        spec,\n        readState,\n        getApis,\n        connect,\n        disconnect,\n        element: item,\n        syncComponents,\n        components: subcomponents.get,\n        events\n      };\n      return me;\n    };\n\n    const buildSubcomponents = (spec, obsoleted) => {\n      const components = get$g(spec, 'components').getOr([]);\n      return obsoleted.fold(() => map$2(components, build$1), obs => map$2(components, (c, i) => {\n        return buildOrPatch(c, child$2(obs, i));\n      }));\n    };\n    const buildFromSpec = (userSpec, obsoleted) => {\n      const {\n        events: specEvents,\n        ...spec\n      } = make$8(userSpec);\n      const components = buildSubcomponents(spec, obsoleted);\n      const completeSpec = {\n        ...spec,\n        events: {\n          ...DefaultEvents,\n          ...specEvents\n        },\n        components\n      };\n      return Result.value(build$2(completeSpec, obsoleted));\n    };\n    const text$2 = textContent => {\n      const element = SugarElement.fromText(textContent);\n      return external$1({ element });\n    };\n    const external$1 = spec => {\n      const extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option$3('uid')\n      ]), spec);\n      const systemApi = Cell(NoContextApi());\n      const connect = newApi => {\n        systemApi.set(newApi);\n      };\n      const disconnect = () => {\n        systemApi.set(NoContextApi(() => me));\n      };\n      const uid = extSpec.uid.getOrThunk(() => generate$5('external'));\n      writeOnly(extSpec.element, uid);\n      const me = {\n        uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect,\n        disconnect,\n        getApis: () => ({}),\n        element: extSpec.element,\n        spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    const uids = generate$5;\n    const isSketchSpec$1 = spec => has$2(spec, 'uid');\n    const buildOrPatch = (spec, obsoleted) => getPremade(spec).getOrThunk(() => {\n      const userSpecWithUid = isSketchSpec$1(spec) ? spec : {\n        uid: uids(''),\n        ...spec\n      };\n      return buildFromSpec(userSpecWithUid, obsoleted).getOrDie();\n    });\n    const build$1 = spec => buildOrPatch(spec, Optional.none());\n    const premade = premade$1;\n\n    var ClosestOrAncestor = (is, ancestor, scope, a, isRoot) => {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    };\n\n    const ancestor$1 = (scope, predicate, isRoot) => {\n      let element = scope.dom;\n      const stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$3 = (scope, predicate, isRoot) => {\n      const is = (s, test) => test(s);\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    const child$1 = (scope, predicate) => {\n      const pred = node => predicate(SugarElement.fromDom(node));\n      const result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    const descendant$1 = (scope, predicate) => {\n      const descend = node => {\n        for (let i = 0; i < node.childNodes.length; i++) {\n          const child = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    const closest$2 = (scope, predicate, isRoot) => closest$3(scope, predicate, isRoot).isSome();\n\n    const first$1 = selector => one(selector);\n    const ancestor = (scope, selector, isRoot) => ancestor$1(scope, e => is(e, selector), isRoot);\n    const child = (scope, selector) => child$1(scope, e => is(e, selector));\n    const descendant = (scope, selector) => one(selector, scope);\n    const closest$1 = (scope, selector, isRoot) => {\n      const is$1 = (element, selector) => is(element, selector);\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    const attribute = 'aria-controls';\n    const find$1 = queryElem => {\n      const dependent = closest$3(queryElem, elem => {\n        if (!isElement$1(elem)) {\n          return false;\n        }\n        const id = get$f(elem, 'id');\n        return id !== undefined && id.indexOf(attribute) > -1;\n      });\n      return dependent.bind(dep => {\n        const id = get$f(dep, 'id');\n        const dos = getRootNode(dep);\n        return descendant(dos, `[${ attribute }=\"${ id }\"]`);\n      });\n    };\n    const manager = () => {\n      const ariaId = generate$6(attribute);\n      const link = elem => {\n        set$9(elem, attribute, ariaId);\n      };\n      const unlink = elem => {\n        remove$7(elem, attribute);\n      };\n      return {\n        id: ariaId,\n        link,\n        unlink\n      };\n    };\n\n    const isAriaPartOf = (component, queryElem) => find$1(queryElem).exists(owner => isPartOf$1(component, owner));\n    const isPartOf$1 = (component, queryElem) => closest$2(queryElem, el => eq(el, component.element), never) || isAriaPartOf(component, queryElem);\n\n    const unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    const eventConfig = Cell({});\n    const makeEventLogger = (eventName, initialTarget) => {\n      const sequence = [];\n      const startTime = new Date().getTime();\n      return {\n        logEventCut: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'cut',\n            target,\n            purpose\n          });\n        },\n        logEventStopped: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'stopped',\n            target,\n            purpose\n          });\n        },\n        logNoParent: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'no-parent',\n            target,\n            purpose\n          });\n        },\n        logEventNoHandlers: (_name, target) => {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target\n          });\n        },\n        logEventResponse: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'response',\n            purpose,\n            target\n          });\n        },\n        write: () => {\n          const finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, s => {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    const processEvent = (eventName, initialTarget, f) => {\n      const status = get$g(eventConfig.get(), eventName).orThunk(() => {\n        const patterns = keys(eventConfig.get());\n        return findMap(patterns, p => eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none());\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          const logger = makeEventLogger(eventName, initialTarget);\n          const output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    const path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    const getTrace = () => {\n      const err = new Error();\n      if (err.stack !== undefined) {\n        const lines = err.stack.split('\\n');\n        return find$5(lines, line => line.indexOf('alloy') > 0 && !exists(path, p => line.indexOf(p) > -1)).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    const ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    const monitorEvent = (eventName, initialTarget, f) => processEvent(eventName, initialTarget, f);\n    const noLogger = constant$1(ignoreEvent);\n\n    const menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    const itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    const itemSchema$3 = constant$1(objOf(itemFields()));\n\n    const _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    const itemMarkers = () => requiredOf('markers', itemSchema$3());\n    const tieredMenuMarkers = () => requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    const markers$1 = required => requiredObjOf('markers', map$2(required, required$1));\n    const onPresenceHandler = (label, fieldName, presence) => {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(f => Result.value((...args) => {\n        return f.apply(undefined, args);\n      })));\n    };\n    const onHandler = fieldName => onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    const onKeyboardHandler = fieldName => onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    const onStrictHandler = fieldName => onPresenceHandler('onHandler', fieldName, required$2());\n    const onStrictKeyboardHandler = fieldName => onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    const output$1 = (name, value) => customField(name, constant$1(value));\n    const snapshot = name => customField(name, identity);\n    const initSize = constant$1(_initSize);\n\n    const nu$6 = (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit = false) => ({\n      x,\n      y,\n      bubble,\n      direction,\n      placement,\n      restriction: boundsRestriction,\n      label: `${ labelPrefix }-${ placement }`,\n      alwaysFit\n    });\n\n    const adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    const cata$2 = (subject, southeast, southwest, northeast, northwest, south, north, east, west) => subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    const cataVertical = (subject, south, middle, north) => subject.fold(south, south, north, north, south, north, middle, middle);\n    const cataHorizontal = (subject, east, middle, west) => subject.fold(east, west, east, west, middle, middle, east, west);\n    const southeast$3 = adt$a.southeast;\n    const southwest$3 = adt$a.southwest;\n    const northeast$3 = adt$a.northeast;\n    const northwest$3 = adt$a.northwest;\n    const south$3 = adt$a.south;\n    const north$3 = adt$a.north;\n    const east$3 = adt$a.east;\n    const west$3 = adt$a.west;\n\n    const cycleBy = (value, delta, min, max) => {\n      const r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    const clamp = (value, min, max) => Math.min(Math.max(value, min), max);\n\n    const getRestriction = (anchor, restriction) => {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    const boundsRestriction = (anchor, restrictions) => mapToObject([\n      'left',\n      'right',\n      'top',\n      'bottom'\n    ], dir => get$g(restrictions, dir).map(restriction => getRestriction(anchor, restriction)));\n    const adjustBounds = (bounds$1, restriction, bubbleOffset) => {\n      const applyRestriction = (dir, current) => restriction[dir].map(pos => {\n        const isVerticalAxis = dir === 'top' || dir === 'bottom';\n        const offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n        const comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n        const newPos = comparator(pos, current) + offset;\n        return isVerticalAxis ? clamp(newPos, bounds$1.y, bounds$1.bottom) : clamp(newPos, bounds$1.x, bounds$1.right);\n      }).getOr(current);\n      const adjustedLeft = applyRestriction('left', bounds$1.x);\n      const adjustedTop = applyRestriction('top', bounds$1.y);\n      const adjustedRight = applyRestriction('right', bounds$1.right);\n      const adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    const labelPrefix$2 = 'layout';\n    const eastX$1 = anchor => anchor.x;\n    const middleX$1 = (anchor, element) => anchor.x + anchor.width / 2 - element.width / 2;\n    const westX$1 = (anchor, element) => anchor.x + anchor.width - element.width;\n    const northY$2 = (anchor, element) => anchor.y - element.height;\n    const southY$2 = anchor => anchor.y + anchor.height;\n    const centreY$1 = (anchor, element) => anchor.y + anchor.height / 2 - element.height / 2;\n    const eastEdgeX$1 = anchor => anchor.x + anchor.width;\n    const westEdgeX$1 = (anchor, element) => anchor.x - element.width;\n    const southeast$2 = (anchor, element, bubbles) => nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n      left: 1,\n      top: 3\n    }), labelPrefix$2);\n    const southwest$2 = (anchor, element, bubbles) => nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n      right: 0,\n      top: 3\n    }), labelPrefix$2);\n    const northeast$2 = (anchor, element, bubbles) => nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n      left: 1,\n      bottom: 2\n    }), labelPrefix$2);\n    const northwest$2 = (anchor, element, bubbles) => nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n      right: 0,\n      bottom: 2\n    }), labelPrefix$2);\n    const north$2 = (anchor, element, bubbles) => nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    const south$2 = (anchor, element, bubbles) => nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    const east$2 = (anchor, element, bubbles) => nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    const west$2 = (anchor, element, bubbles) => nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    const all$1 = () => [\n      southeast$2,\n      southwest$2,\n      northeast$2,\n      northwest$2,\n      south$2,\n      north$2,\n      east$2,\n      west$2\n    ];\n    const allRtl$1 = () => [\n      southwest$2,\n      southeast$2,\n      northwest$2,\n      northeast$2,\n      south$2,\n      north$2,\n      east$2,\n      west$2\n    ];\n    const aboveOrBelow = () => [\n      northeast$2,\n      northwest$2,\n      southeast$2,\n      southwest$2,\n      north$2,\n      south$2\n    ];\n    const aboveOrBelowRtl = () => [\n      northwest$2,\n      northeast$2,\n      southwest$2,\n      southeast$2,\n      north$2,\n      south$2\n    ];\n    const belowOrAbove = () => [\n      southeast$2,\n      southwest$2,\n      northeast$2,\n      northwest$2,\n      south$2,\n      north$2\n    ];\n    const belowOrAboveRtl = () => [\n      southwest$2,\n      southeast$2,\n      northwest$2,\n      northeast$2,\n      south$2,\n      north$2\n    ];\n\n    const chooseChannels = (channels, message) => message.universal ? channels : filter$2(channels, ch => contains$2(message.channels, ch));\n    const events$h = receiveConfig => derive$2([run$1(receive(), (component, message) => {\n        const channelMap = receiveConfig.channels;\n        const channels = keys(channelMap);\n        const receivingData = message;\n        const targetChannels = chooseChannels(channels, receivingData);\n        each$1(targetChannels, ch => {\n          const channelInfo = channelMap[ch];\n          const channelSchema = channelInfo.schema;\n          const data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n          channelInfo.onReceive(component, data);\n        });\n      })]);\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    const executeEvent = (bConfig, bState, executor) => runOnExecute$1(component => {\n      executor(component, bConfig, bState);\n    });\n    const loadEvent = (bConfig, bState, f) => runOnInit((component, _simulatedEvent) => {\n      f(component, bConfig, bState);\n    });\n    const create$5 = (schema, name, active, apis, extra, state) => {\n      const configSchema = objOfOnly(schema);\n      const schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    const createModes$1 = (modes, name, active, apis, extra, state) => {\n      const configSchema = modes;\n      const schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    const wrapApi = (bName, apiFunction, apiName) => {\n      const f = (component, ...rest) => {\n        const args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(() => {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, info => {\n          const rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    const revokeBehaviour = name => ({\n      key: name,\n      value: undefined\n    });\n    const doCreate = (configSchema, schemaSchema, name, active, apis, extra, state) => {\n      const getConfig = info => hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      const wrappedApis = map$1(apis, (apiF, apiName) => wrapApi(name, apiF, apiName));\n      const wrappedExtra = map$1(extra, (extraF, extraName) => markAsExtraApi(extraF, extraName));\n      const me = {\n        ...wrappedExtra,\n        ...wrappedApis,\n        revoke: curry(revokeBehaviour, name),\n        config: spec => {\n          const prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me,\n              configAsRaw: cached(() => asRawOrDie$1(name + '-config', configSchema, spec)),\n              initialConfig: spec,\n              state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: (info, base) => {\n          return lift2(getConfig(info), get$g(active, 'exhibit'), (behaviourInfo, exhibitor) => {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(() => nu$7({}));\n        },\n        name: constant$1(name),\n        handlers: info => {\n          return getConfig(info).map(behaviourInfo => {\n            const getEvents = get$g(active, 'events').getOr(() => ({}));\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      };\n      return me;\n    };\n\n    const derive$1 = capabilities => wrapAll(capabilities);\n    const simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    const create$4 = data => {\n      const value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$5(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    const modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    const createModes = data => {\n      const value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    const revoke = constant$1(undefined);\n\n    const Receiving = create$4({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    const exhibit$6 = (base, posConfig) => nu$7({\n      classes: [],\n      styles: posConfig.useFixed() ? {} : { position: 'relative' }\n    });\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    const focus$3 = (element, preventScroll = false) => element.dom.focus({ preventScroll });\n    const blur$1 = element => element.dom.blur();\n    const hasFocus = element => {\n      const root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    const active$1 = (root = getDocument()) => Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    const search = element => active$1(getRootNode(element)).filter(e => element.dom.contains(e.dom));\n\n    const preserve$1 = (f, container) => {\n      const dos = getRootNode(container);\n      const refocus = active$1(dos).bind(focused => {\n        const hasFocus = elem => eq(focused, elem);\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      const result = f(container);\n      refocus.each(oldFocus => {\n        active$1(dos).filter(newFocus => eq(newFocus, oldFocus)).fold(() => {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    const NuPositionCss = (position, left, top, right, bottom) => {\n      const toPx = num => num + 'px';\n      return {\n        position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    const toOptions = position => ({\n      ...position,\n      position: Optional.some(position.position)\n    });\n    const applyPositionCss = (element, position) => {\n      setOptions(element, toOptions(position));\n    };\n\n    const adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    const positionWithDirection = (posName, decision, x, y, width, height) => {\n      const decisionRect = decision.rect;\n      const decisionX = decisionRect.x - x;\n      const decisionY = decisionRect.y - y;\n      const decisionWidth = decisionRect.width;\n      const decisionHeight = decisionRect.height;\n      const decisionRight = width - (decisionX + decisionWidth);\n      const decisionBottom = height - (decisionY + decisionHeight);\n      const left = Optional.some(decisionX);\n      const top = Optional.some(decisionY);\n      const right = Optional.some(decisionRight);\n      const bottom = Optional.some(decisionBottom);\n      const none = Optional.none();\n      return cata$2(decision.direction, () => NuPositionCss(posName, left, top, none, none), () => NuPositionCss(posName, none, top, right, none), () => NuPositionCss(posName, left, none, none, bottom), () => NuPositionCss(posName, none, none, right, bottom), () => NuPositionCss(posName, left, top, none, none), () => NuPositionCss(posName, left, none, none, bottom), () => NuPositionCss(posName, left, top, none, none), () => NuPositionCss(posName, none, top, right, none));\n    };\n    const reposition = (origin, decision) => origin.fold(() => {\n      const decisionRect = decision.rect;\n      return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n    }, (x, y, width, height) => {\n      return positionWithDirection('absolute', decision, x, y, width, height);\n    }, (x, y, width, height) => {\n      return positionWithDirection('fixed', decision, x, y, width, height);\n    });\n    const toBox = (origin, element) => {\n      const rel = curry(find$2, element);\n      const position = origin.fold(rel, rel, () => {\n        const scroll = get$b();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      const width = getOuter$1(element);\n      const height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    const viewport = (origin, optBounds) => optBounds.fold(() => origin.fold(win, win, bounds), bounds$1 => origin.fold(constant$1(bounds$1), constant$1(bounds$1), () => {\n      const pos = translate$2(origin, bounds$1.x, bounds$1.y);\n      return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n    }));\n    const translate$2 = (origin, x, y) => {\n      const pos = SugarPosition(x, y);\n      const removeScroll = () => {\n        const outerScroll = get$b();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    const cata$1 = (subject, onNone, onRelative, onFixed) => subject.fold(onNone, onRelative, onFixed);\n    adt$9.none;\n    const relative$1 = adt$9.relative;\n    const fixed$1 = adt$9.fixed;\n\n    const anchor = (anchorBox, origin) => ({\n      anchorBox,\n      origin\n    });\n    const box = (anchorBox, origin) => anchor(anchorBox, origin);\n\n    const placementAttribute = 'data-alloy-placement';\n    const setPlacement$1 = (element, placement) => {\n      set$9(element, placementAttribute, placement);\n    };\n    const getPlacement = element => getOpt(element, placementAttribute);\n    const reset$2 = element => remove$7(element, placementAttribute);\n\n    const adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    const determinePosition = (box, bounds) => {\n      const {\n        x: boundsX,\n        y: boundsY,\n        right: boundsRight,\n        bottom: boundsBottom\n      } = bounds;\n      const {x, y, right, bottom, width, height} = box;\n      const xInBounds = x >= boundsX && x <= boundsRight;\n      const yInBounds = y >= boundsY && y <= boundsBottom;\n      const originInBounds = xInBounds && yInBounds;\n      const rightInBounds = right <= boundsRight && right >= boundsX;\n      const bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      const sizeInBounds = rightInBounds && bottomInBounds;\n      const visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      const visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds,\n        sizeInBounds,\n        visibleW,\n        visibleH\n      };\n    };\n    const calcReposition = (box, bounds$1) => {\n      const {\n        x: boundsX,\n        y: boundsY,\n        right: boundsRight,\n        bottom: boundsBottom\n      } = bounds$1;\n      const {x, y, width, height} = box;\n      const maxX = Math.max(boundsX, boundsRight - width);\n      const maxY = Math.max(boundsY, boundsBottom - height);\n      const restrictedX = clamp(x, boundsX, maxX);\n      const restrictedY = clamp(y, boundsY, maxY);\n      const restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      const restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    const calcMaxSizes = (direction, box, bounds) => {\n      const upAvailable = constant$1(box.bottom - bounds.y);\n      const downAvailable = constant$1(bounds.bottom - box.y);\n      const maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      const westAvailable = constant$1(box.right - bounds.x);\n      const eastAvailable = constant$1(bounds.right - box.x);\n      const maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth,\n        maxHeight\n      };\n    };\n    const attempt = (candidate, width, height, bounds$1) => {\n      const bubble = candidate.bubble;\n      const bubbleOffset = bubble.offset;\n      const adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      const newX = candidate.x + bubbleOffset.left;\n      const newY = candidate.y + bubbleOffset.top;\n      const box = bounds(newX, newY, width, height);\n      const {originInBounds, sizeInBounds, visibleW, visibleH} = determinePosition(box, adjustedBounds);\n      const fits = originInBounds && sizeInBounds;\n      const fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      const isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      const {maxWidth, maxHeight} = calcMaxSizes(candidate.direction, fittedBox, bounds$1);\n      const reposition = {\n        rect: fittedBox,\n        maxHeight,\n        maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    const attempts = (element, candidates, anchorBox, elementBox, bubbles, bounds) => {\n      const panelWidth = elementBox.width;\n      const panelHeight = elementBox.height;\n      const attemptBestFit = (layout, reposition, visibleW, visibleH, isVisible) => {\n        const next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        const attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), (newReposition, newVisibleW, newVisibleH, newIsVisible) => {\n          const improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      const abc = foldl(candidates, (b, a) => {\n        const bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity, identity);\n    };\n\n    const singleton = doRevoke => {\n      const subject = Cell(Optional.none());\n      const revoke = () => subject.get().each(doRevoke);\n      const clear = () => {\n        revoke();\n        subject.set(Optional.none());\n      };\n      const isSet = () => subject.get().isSome();\n      const get = () => subject.get();\n      const set = s => {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const destroyable = () => singleton(s => s.destroy());\n    const unbindable = () => singleton(s => s.unbind());\n    const value$2 = () => {\n      const subject = singleton(noop);\n      const on = f => subject.get().each(f);\n      return {\n        ...subject,\n        on\n      };\n    };\n\n    const filter = always;\n    const bind = (element, event, handler) => bind$2(element, event, filter, handler);\n    const capture = (element, event, handler) => capture$1(element, event, filter, handler);\n    const fromRawEvent = fromRawEvent$1;\n\n    const properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    const timerAttr = 'data-alloy-transition-timer';\n    const isTransitioning$1 = (element, transition) => hasAll(element, transition.classes);\n    const shouldApplyTransitionCss = (transition, decision, lastPlacement) => {\n      return lastPlacement.exists(placer => {\n        const mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    const hasChanges = (position, intermediate) => {\n      const round = value => parseFloat(value).toFixed(3);\n      return find$4(intermediate, (value, key) => {\n        const newValue = position[key].map(round);\n        const val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    const getTransitionDuration = element => {\n      const get = name => {\n        const style = get$e(element, name);\n        const times = style.split(/\\s*,\\s*/);\n        return filter$2(times, isNotEmpty);\n      };\n      const parse = value => {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          const num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      const delay = get('transition-delay');\n      const duration = get('transition-duration');\n      return foldl(duration, (acc, dur, i) => {\n        const time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    const setupTransitionListeners = (element, transition) => {\n      const transitionEnd = unbindable();\n      const transitionCancel = unbindable();\n      let timer;\n      const isSourceTransition = e => {\n        var _a;\n        const pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      const transitionDone = e => {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          const type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      const transitionStart = bind(element, transitionstart(), e => {\n        if (isSourceTransition(e)) {\n          transitionStart.unbind();\n          transitionEnd.set(bind(element, transitionend(), transitionDone));\n          transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n        }\n      });\n      const duration = getTransitionDuration(element);\n      requestAnimationFrame(() => {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$9(element, timerAttr, timer);\n      });\n    };\n    const startTransitioning = (element, transition) => {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(timerId => {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    const applyTransitionCss = (element, origin, position, transition, decision, lastPlacement) => {\n      const shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$8(element, 'position', position.position);\n        const rect = toBox(origin, element);\n        const intermediatePosition = reposition(origin, {\n          ...decision,\n          rect\n        });\n        const intermediateCssOptions = mapToObject(properties, prop => intermediatePosition[prop]);\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    const elementSize = p => ({\n      width: getOuter$1(p),\n      height: getOuter$2(p)\n    });\n    const layout = (anchorBox, element, bubbles, options) => {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      const elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    const setClasses = (element, decision) => {\n      const classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    const setHeight = (element, decision, options) => {\n      const maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    const setWidth = (element, decision, options) => {\n      const maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    const position$2 = (element, decision, options) => {\n      const positionCss = reposition(options.origin, decision);\n      options.transition.each(transition => {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    const setPlacement = (element, decision) => {\n      setPlacement$1(element, decision.placement);\n    };\n\n    const setMaxHeight = (element, maxHeight) => {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    const anchored = constant$1((element, available) => {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    const expandable$1 = constant$1((element, available) => {\n      setMaxHeight(element, available);\n    });\n\n    const defaultOr = (options, key, dephault) => options[key] === undefined ? dephault : options[key];\n    const simple = (anchor, element, bubble, layouts, lastPlacement, optBounds, overrideOptions, transition) => {\n      const maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      const maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      const anchorBox = anchor.anchorBox;\n      const origin = anchor.origin;\n      const options = {\n        bounds: viewport(origin, optBounds),\n        origin,\n        preference: layouts,\n        maxHeightFunction,\n        maxWidthFunction,\n        lastPlacement,\n        transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    const go = (anchorBox, element, bubble, options) => {\n      const decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    const allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    const nu$5 = (xOffset, yOffset, classes, insetModifier = 1) => {\n      const insetXOffset = xOffset * insetModifier;\n      const insetYOffset = yOffset * insetModifier;\n      const getClasses = prop => get$g(classes, prop).getOr([]);\n      const make = (xDelta, yDelta, alignmentsOn) => {\n        const alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: () => make(-xOffset, yOffset, [\n          'top',\n          'alignLeft'\n        ]),\n        southwest: () => make(xOffset, yOffset, [\n          'top',\n          'alignRight'\n        ]),\n        south: () => make(-xOffset / 2, yOffset, [\n          'top',\n          'alignCentre'\n        ]),\n        northeast: () => make(-xOffset, -yOffset, [\n          'bottom',\n          'alignLeft'\n        ]),\n        northwest: () => make(xOffset, -yOffset, [\n          'bottom',\n          'alignRight'\n        ]),\n        north: () => make(-xOffset / 2, -yOffset, [\n          'bottom',\n          'alignCentre'\n        ]),\n        east: () => make(xOffset, -yOffset / 2, [\n          'valignCentre',\n          'left'\n        ]),\n        west: () => make(-xOffset, -yOffset / 2, [\n          'valignCentre',\n          'right'\n        ]),\n        insetNortheast: () => make(insetXOffset, insetYOffset, [\n          'top',\n          'alignLeft',\n          'inset'\n        ]),\n        insetNorthwest: () => make(-insetXOffset, insetYOffset, [\n          'top',\n          'alignRight',\n          'inset'\n        ]),\n        insetNorth: () => make(-insetXOffset / 2, insetYOffset, [\n          'top',\n          'alignCentre',\n          'inset'\n        ]),\n        insetSoutheast: () => make(insetXOffset, -insetYOffset, [\n          'bottom',\n          'alignLeft',\n          'inset'\n        ]),\n        insetSouthwest: () => make(-insetXOffset, -insetYOffset, [\n          'bottom',\n          'alignRight',\n          'inset'\n        ]),\n        insetSouth: () => make(-insetXOffset / 2, -insetYOffset, [\n          'bottom',\n          'alignCentre',\n          'inset'\n        ]),\n        insetEast: () => make(-insetXOffset, -insetYOffset / 2, [\n          'valignCentre',\n          'right',\n          'inset'\n        ]),\n        insetWest: () => make(insetXOffset, -insetYOffset / 2, [\n          'valignCentre',\n          'left',\n          'inset'\n        ])\n      };\n    };\n    const fallback = () => nu$5(0, 0, {});\n\n    const nu$4 = identity;\n\n    const onDirection = (isLtr, isRtl) => element => getDirection(element) === 'rtl' ? isRtl : isLtr;\n    const getDirection = element => get$e(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    const Attribute = 'data-alloy-vertical-dir';\n    const isBottomToTopDir = el => closest$2(el, current => isElement$1(current) && get$f(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop);\n\n    const schema$y = () => optionObjOf('layouts', [\n      required$1('onLtr'),\n      required$1('onRtl'),\n      option$3('onBottomLtr'),\n      option$3('onBottomRtl')\n    ]);\n    const get$5 = (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) => {\n      const isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      const customLtr = info.layouts.map(ls => ls.onLtr(elem));\n      const customRtl = info.layouts.map(ls => ls.onRtl(elem));\n      const ltr = isBottomToTop ? info.layouts.bind(ls => ls.onBottomLtr.map(f => f(elem))).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      const rtl = isBottomToTop ? info.layouts.bind(ls => ls.onBottomRtl.map(f => f(elem))).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      const f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    const placement$4 = (component, anchorInfo, origin) => {\n      const hotspot = anchorInfo.hotspot;\n      const anchorBox = toBox(origin, hotspot.element);\n      const layouts = get$5(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option$3('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    const placement$3 = (component, anchorInfo, origin) => {\n      const pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      const anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      const layouts = get$5(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    const adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    const toFixed = pos => pos.fold(identity, (point, scrollLeft, scrollTop) => point.translate(-scrollLeft, -scrollTop));\n    const toAbsolute = pos => pos.fold(identity, identity);\n    const sum = points => foldl(points, (b, a) => b.translate(a.left, a.top), SugarPosition(0, 0));\n    const sumAsFixed = positions => {\n      const points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    const sumAsAbsolute = positions => {\n      const points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    const screen = adt$7.screen;\n    const absolute$1 = adt$7.absolute;\n\n    const getOffset = (component, origin, anchorInfo) => {\n      const win = defaultView(anchorInfo.root).dom;\n      const hasSameOwner = frame => {\n        const frameOwner = owner$4(frame);\n        const compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    const getRootPoint = (component, origin, anchorInfo) => {\n      const doc = owner$4(component.element);\n      const outerScroll = get$b(doc);\n      const offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    const getBox = (left, top, width, height) => {\n      const point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    const calcNewAnchor = (optBox, rootPoint, anchorInfo, origin, elem) => optBox.map(box => {\n      const points = [\n        rootPoint,\n        box.point\n      ];\n      const topLeft = cata$1(origin, () => sumAsAbsolute(points), () => sumAsAbsolute(points), () => sumAsFixed(points));\n      const anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n      const layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n      const layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n      const layouts = get$5(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n      return nu$4({\n        anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts\n      });\n    });\n\n    const placement$2 = (component, anchorInfo, origin) => {\n      const rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(target => {\n        const rect = target.dom.getBoundingClientRect();\n        const nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        const elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option$3('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    const zeroWidth = '\\uFEFF';\n    const nbsp = '\\xA0';\n\n    const create$3 = (start, soffset, finish, foffset) => ({\n      start,\n      soffset,\n      finish,\n      foffset\n    });\n    const SimRange = { create: create$3 };\n\n    const adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    const cata = (subject, onBefore, onOn, onAfter) => subject.fold(onBefore, onOn, onAfter);\n    const getStart$1 = situ => situ.fold(identity, identity, identity);\n    const before = adt$6.before;\n    const on$1 = adt$6.on;\n    const after$1 = adt$6.after;\n    const Situ = {\n      before,\n      on: on$1,\n      after: after$1,\n      cata,\n      getStart: getStart$1\n    };\n\n    const adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const exactFromRange = simRange => adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    const getStart = selection => selection.match({\n      domRange: rng => SugarElement.fromDom(rng.startContainer),\n      relative: (startSitu, _finishSitu) => Situ.getStart(startSitu),\n      exact: (start, _soffset, _finish, _foffset) => start\n    });\n    const domRange = adt$5.domRange;\n    const relative = adt$5.relative;\n    const exact = adt$5.exact;\n    const getWin = selection => {\n      const start = getStart(selection);\n      return defaultView(start);\n    };\n    const range$1 = SimRange.create;\n    const SimSelection = {\n      domRange,\n      relative,\n      exact,\n      exactFromRange,\n      getWin,\n      range: range$1\n    };\n\n    const setStart = (rng, situ) => {\n      situ.fold(e => {\n        rng.setStartBefore(e.dom);\n      }, (e, o) => {\n        rng.setStart(e.dom, o);\n      }, e => {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    const setFinish = (rng, situ) => {\n      situ.fold(e => {\n        rng.setEndBefore(e.dom);\n      }, (e, o) => {\n        rng.setEnd(e.dom, o);\n      }, e => {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    const relativeToNative = (win, startSitu, finishSitu) => {\n      const range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    const exactToNative = (win, start, soffset, finish, foffset) => {\n      const rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    const toRect = rect => ({\n      left: rect.left,\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      width: rect.width,\n      height: rect.height\n    });\n    const getFirstRect$1 = rng => {\n      const rects = rng.getClientRects();\n      const rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    const getBounds$2 = rng => {\n      const rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    const adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const fromRange = (win, type, range) => type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    const getRanges = (win, selection) => selection.match({\n      domRange: rng => {\n        return {\n          ltr: constant$1(rng),\n          rtl: Optional.none\n        };\n      },\n      relative: (startSitu, finishSitu) => {\n        return {\n          ltr: cached(() => relativeToNative(win, startSitu, finishSitu)),\n          rtl: cached(() => Optional.some(relativeToNative(win, finishSitu, startSitu)))\n        };\n      },\n      exact: (start, soffset, finish, foffset) => {\n        return {\n          ltr: cached(() => exactToNative(win, start, soffset, finish, foffset)),\n          rtl: cached(() => Optional.some(exactToNative(win, finish, foffset, start, soffset)))\n        };\n      }\n    });\n    const doDiagnose = (win, ranges) => {\n      const rng = ranges.ltr();\n      if (rng.collapsed) {\n        const reversed = ranges.rtl().filter(rev => rev.collapsed === false);\n        return reversed.map(rev => adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset)).getOrThunk(() => fromRange(win, adt$4.ltr, rng));\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    const diagnose = (win, selection) => {\n      const ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    const asLtrRange = (win, selection) => {\n      const diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: (start, soffset, finish, foffset) => {\n          const rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: (start, soffset, finish, foffset) => {\n          const rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    const ancestors = (scope, predicate, isRoot) => filter$2(parents(scope, isRoot), predicate);\n\n    const descendants = (scope, selector) => all$3(selector, scope);\n\n    const makeRange = (start, soffset, finish, foffset) => {\n      const doc = owner$4(start);\n      const rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    const after = (start, soffset, finish, foffset) => {\n      const r = makeRange(start, soffset, finish, foffset);\n      const same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    const getNativeSelection = win => Optional.from(win.getSelection());\n    const readRange = selection => {\n      if (selection.rangeCount > 0) {\n        const firstRng = selection.getRangeAt(0);\n        const lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    const doGetExact = selection => {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        const anchor = SugarElement.fromDom(selection.anchorNode);\n        const focus = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    const getExact = win => getNativeSelection(win).filter(sel => sel.rangeCount > 0).bind(doGetExact);\n    const getFirstRect = (win, selection) => {\n      const rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    const getBounds$1 = (win, selection) => {\n      const rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    const NodeValue = (is, name) => {\n      const get = element => {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      const getOption = element => is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      const set = (element, value) => {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get,\n        getOption,\n        set\n      };\n    };\n\n    const api = NodeValue(isText, 'text');\n    const get$4 = element => api.get(element);\n\n    const point = (element, offset) => ({\n      element,\n      offset\n    });\n    const descendOnce$1 = (element, offset) => {\n      const children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        const last = children$1[children$1.length - 1];\n        const len = isText(last) ? get$4(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    const descendOnce = (element, offset) => isText(element) ? point(element, offset) : descendOnce$1(element, offset);\n    const isSimRange = detail => detail.foffset !== undefined;\n    const getAnchorSelection = (win, anchorInfo) => {\n      const getSelection = anchorInfo.getSelection.getOrThunk(() => () => getExact(win));\n      return getSelection().map(sel => {\n        if (isSimRange(sel)) {\n          const modStart = descendOnce(sel.start, sel.soffset);\n          const modFinish = descendOnce(sel.finish, sel.foffset);\n          return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n        } else {\n          return sel;\n        }\n      });\n    };\n    const placement$1 = (component, anchorInfo, origin) => {\n      const win = defaultView(anchorInfo.root).dom;\n      const rootPoint = getRootPoint(component, origin, anchorInfo);\n      const selectionBox = getAnchorSelection(win, anchorInfo).bind(sel => {\n        if (isSimRange(sel)) {\n          const optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(() => {\n            const zeroWidth$1 = SugarElement.fromText(zeroWidth);\n            before$1(sel.start, zeroWidth$1);\n            const rect = getFirstRect(win, SimSelection.exact(zeroWidth$1, 0, zeroWidth$1, 1));\n            remove$5(zeroWidth$1);\n            return rect;\n          });\n          return optRect.bind(rawRect => {\n            return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n          });\n        } else {\n          const selectionRect = map$1(sel, cell => cell.dom.getBoundingClientRect());\n          const bounds = {\n            left: Math.min(selectionRect.firstCell.left, selectionRect.lastCell.left),\n            right: Math.max(selectionRect.firstCell.right, selectionRect.lastCell.right),\n            top: Math.min(selectionRect.firstCell.top, selectionRect.lastCell.top),\n            bottom: Math.max(selectionRect.firstCell.bottom, selectionRect.lastCell.bottom)\n          };\n          return getBox(bounds.left, bounds.top, bounds.right - bounds.left, bounds.bottom - bounds.top);\n        }\n      });\n      const targetElement = getAnchorSelection(win, anchorInfo).bind(sel => {\n        if (isSimRange(sel)) {\n          return isElement$1(sel.start) ? Optional.some(sel.start) : parentElement(sel.start);\n        } else {\n          return Optional.some(sel.firstCell);\n        }\n      });\n      const elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option$3('getSelection'),\n      required$1('root'),\n      option$3('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    const labelPrefix$1 = 'link-layout';\n    const eastX = anchor => anchor.x + anchor.width;\n    const westX = (anchor, element) => anchor.x - element.width;\n    const northY$1 = (anchor, element) => anchor.y - element.height + anchor.height;\n    const southY$1 = anchor => anchor.y;\n    const southeast$1 = (anchor, element, bubbles) => nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n      left: 0,\n      top: 2\n    }), labelPrefix$1);\n    const southwest$1 = (anchor, element, bubbles) => nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n      right: 1,\n      top: 2\n    }), labelPrefix$1);\n    const northeast$1 = (anchor, element, bubbles) => nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n      left: 0,\n      bottom: 3\n    }), labelPrefix$1);\n    const northwest$1 = (anchor, element, bubbles) => nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n      right: 1,\n      bottom: 3\n    }), labelPrefix$1);\n    const all = () => [\n      southeast$1,\n      southwest$1,\n      northeast$1,\n      northwest$1\n    ];\n    const allRtl = () => [\n      southwest$1,\n      southeast$1,\n      northwest$1,\n      northeast$1\n    ];\n\n    const placement = (component, submenuInfo, origin) => {\n      const anchorBox = toBox(origin, submenuInfo.item.element);\n      const layouts = get$5(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    const TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    const PositionSchema = [\n      defaulted('useFixed', never),\n      option$3('getBounds')\n    ];\n    const PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    const getFixedOrigin = () => {\n      const html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    const getRelativeOrigin = component => {\n      const position = absolute$3(component.element);\n      const bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    const place = (origin, anchoring, optBounds, placee, lastPlace, transition) => {\n      const anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, optBounds, anchoring.overrides, transition);\n    };\n    const position$1 = (component, posConfig, posState, placee, placementSpec) => {\n      const optWithinBounds = Optional.none();\n      positionWithinBounds(component, posConfig, posState, placee, placementSpec, optWithinBounds);\n    };\n    const positionWithinBounds = (component, posConfig, posState, placee, placementSpec, optWithinBounds) => {\n      const placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      const anchorage = placeeDetail.anchor;\n      const element = placee.element;\n      const placeeState = posState.get(placee.uid);\n      preserve$1(() => {\n        set$8(element, 'position', 'fixed');\n        const oldVisibility = getRaw(element, 'visibility');\n        set$8(element, 'visibility', 'hidden');\n        const origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        anchorage.placement(component, anchorage, origin).each(anchoring => {\n          const optBounds = optWithinBounds.orThunk(() => posConfig.getBounds.map(apply$1));\n          const newState = place(origin, anchoring, optBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(() => {\n          remove$6(element, 'visibility');\n        }, vis => {\n          set$8(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    const getMode = (component, pConfig, _pState) => pConfig.useFixed() ? 'fixed' : 'absolute';\n    const reset$1 = (component, pConfig, posState, placee) => {\n      const element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], prop => remove$6(element, prop));\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    const init$g = () => {\n      let state = {};\n      const set = (id, data) => {\n        state[id] = data;\n      };\n      const get = id => get$g(state, id);\n      const clear = id => {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: () => state,\n        clear,\n        set,\n        get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    const Positioning = create$4({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    const isConnected = comp => comp.getSystem().isConnected();\n    const fireDetaching = component => {\n      emit(component, detachedFromDom());\n      const children = component.components();\n      each$1(children, fireDetaching);\n    };\n    const fireAttaching = component => {\n      const children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    const virtualAttach = (parent, child) => {\n      parent.getSystem().addToWorld(child);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n    };\n    const virtualDetach = comp => {\n      fireDetaching(comp);\n      comp.getSystem().removeFromWorld(comp);\n    };\n    const attach$1 = (parent, child) => {\n      append$2(parent.element, child.element);\n    };\n    const detachChildren$1 = component => {\n      each$1(component.components(), childComp => remove$5(childComp.element));\n      empty(component.element);\n      component.syncComponents();\n    };\n    const replaceChildren = (component, newSpecs, buildNewChildren) => {\n      const subs = component.components();\n      detachChildren$1(component);\n      const newChildren = buildNewChildren(newSpecs);\n      const deleted = difference(subs, newChildren);\n      each$1(deleted, comp => {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, childComp => {\n        if (!isConnected(childComp)) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n      });\n      component.syncComponents();\n    };\n    const virtualReplaceChildren = (component, newSpecs, buildNewChildren) => {\n      const subs = component.components();\n      const existingComps = bind$3(newSpecs, spec => getPremade(spec).toArray());\n      each$1(subs, childComp => {\n        if (!contains$2(existingComps, childComp)) {\n          virtualDetach(childComp);\n        }\n      });\n      const newChildren = buildNewChildren(newSpecs);\n      const deleted = difference(subs, newChildren);\n      each$1(deleted, deletedComp => {\n        if (isConnected(deletedComp)) {\n          virtualDetach(deletedComp);\n        }\n      });\n      each$1(newChildren, childComp => {\n        if (!isConnected(childComp)) {\n          virtualAttach(component, childComp);\n        }\n      });\n      component.syncComponents();\n    };\n\n    const attach = (parent, child) => {\n      attachWith(parent, child, append$2);\n    };\n    const attachWith = (parent, child, insertion) => {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    const doDetach = component => {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    const detach = component => {\n      const parent$1 = parent(component.element).bind(p => component.getSystem().getByDom(p).toOptional());\n      doDetach(component);\n      parent$1.each(p => {\n        p.syncComponents();\n      });\n    };\n    const detachChildren = component => {\n      const subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    const attachSystem = (element, guiSystem) => {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    const attachSystemAfter = (element, guiSystem) => {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    const attachSystemWith = (element, guiSystem, inserter) => {\n      inserter(element, guiSystem.element);\n      const children$1 = children(guiSystem.element);\n      each$1(children$1, child => {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    const detachSystem = guiSystem => {\n      const children$1 = children(guiSystem.element);\n      each$1(children$1, child => {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    const rebuild = (sandbox, sConfig, sState, data) => {\n      sState.get().each(_data => {\n        detachChildren(sandbox);\n      });\n      const point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      const built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    const open$1 = (sandbox, sConfig, sState, data) => {\n      const newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    const setContent = (sandbox, sConfig, sState, data) => sState.get().map(() => rebuild(sandbox, sConfig, sState, data));\n    const openWhileCloaked = (sandbox, sConfig, sState, data, transaction) => {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    const close$1 = (sandbox, sConfig, sState) => {\n      sState.get().each(data => {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    const isOpen$1 = (_sandbox, _sConfig, sState) => sState.isOpen();\n    const isPartOf = (sandbox, sConfig, sState, queryElem) => isOpen$1(sandbox, sConfig, sState) && sState.get().exists(data => sConfig.isPartOf(sandbox, data, queryElem));\n    const getState$2 = (_sandbox, _sConfig, sState) => sState.get();\n    const store = (sandbox, cssKey, attr, newValue) => {\n      getRaw(sandbox.element, cssKey).fold(() => {\n        remove$7(sandbox.element, attr);\n      }, v => {\n        set$9(sandbox.element, attr, v);\n      });\n      set$8(sandbox.element, cssKey, newValue);\n    };\n    const restore = (sandbox, cssKey, attr) => {\n      getOpt(sandbox.element, attr).fold(() => remove$6(sandbox.element, cssKey), oldValue => set$8(sandbox.element, cssKey, oldValue));\n    };\n    const cloak = (sandbox, sConfig, _sState) => {\n      const sink = sConfig.getAttachPoint(sandbox);\n      set$8(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    const hasPosition = element => exists([\n      'top',\n      'left',\n      'right',\n      'bottom'\n    ], pos => getRaw(element, pos).isSome());\n    const decloak = (sandbox, sConfig, _sState) => {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    const events$g = (sandboxConfig, sandboxState) => derive$2([run$1(sandboxClose(), (sandbox, _simulatedEvent) => {\n        close$1(sandbox, sandboxConfig, sandboxState);\n      })]);\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    const init$f = () => {\n      const contents = value$2();\n      const readState = constant$1('not-implemented');\n      return nu$8({\n        readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    const Sandboxing = create$4({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    const dismissPopups = constant$1('dismiss.popups');\n    const repositionPopups = constant$1('reposition.popups');\n    const mouseReleased = constant$1('mouse.released');\n\n    const schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    const receivingChannel$1 = rawSpec => {\n      const detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return {\n        [dismissPopups()]: {\n          schema: objOfOnly([required$1('target')]),\n          onReceive: (sandbox, data) => {\n            if (Sandboxing.isOpen(sandbox)) {\n              const isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n              if (!isPart) {\n                detail.fireEventInstead.fold(() => Sandboxing.close(sandbox), fe => emit(sandbox, fe.event));\n              }\n            }\n          }\n        }\n      };\n    };\n\n    const schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    const receivingChannel = rawSpec => {\n      const detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return {\n        [repositionPopups()]: {\n          onReceive: sandbox => {\n            if (Sandboxing.isOpen(sandbox)) {\n              detail.fireEventInstead.fold(() => detail.doReposition(sandbox), fe => emit(sandbox, fe.event));\n            }\n          }\n        }\n      };\n    };\n\n    const onLoad$5 = (component, repConfig, repState) => {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    const onUnload$2 = (component, repConfig, repState) => {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    const setValue$3 = (component, repConfig, repState, data) => {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    const getValue$3 = (component, repConfig, repState) => repConfig.store.manager.getValue(component, repConfig, repState);\n    const getState$1 = (component, repConfig, repState) => repState;\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    const events$f = (repConfig, repState) => {\n      const es = repConfig.resetOnDom ? [\n        runOnAttached((comp, _se) => {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached((comp, _se) => {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    const memory$1 = () => {\n      const data = Cell(null);\n      const readState = () => ({\n        mode: 'memory',\n        value: data.get()\n      });\n      const isNotSet = () => data.get() === null;\n      const clear = () => {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet,\n        clear,\n        readState\n      });\n    };\n    const manual = () => {\n      const readState = noop;\n      return nu$8({ readState });\n    };\n    const dataset = () => {\n      const dataByValue = Cell({});\n      const dataByText = Cell({});\n      const readState = () => ({\n        mode: 'dataset',\n        dataByValue: dataByValue.get(),\n        dataByText: dataByText.get()\n      });\n      const clear = () => {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      const lookup = itemString => get$g(dataByValue.get(), itemString).orThunk(() => get$g(dataByText.get(), itemString));\n      const update = items => {\n        const currentDataByValue = dataByValue.get();\n        const currentDataByText = dataByText.get();\n        const newDataByValue = {};\n        const newDataByText = {};\n        each$1(items, item => {\n          newDataByValue[item.value] = item;\n          get$g(item, 'meta').each(meta => {\n            get$g(meta, 'text').each(text => {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set({\n          ...currentDataByValue,\n          ...newDataByValue\n        });\n        dataByText.set({\n          ...currentDataByText,\n          ...newDataByText\n        });\n      };\n      return nu$8({\n        readState,\n        lookup,\n        update,\n        clear\n      });\n    };\n    const init$e = spec => spec.store.manager.state(spec);\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    const setValue$2 = (component, repConfig, repState, data) => {\n      const store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    const getValue$2 = (component, repConfig, repState) => {\n      const store = repConfig.store;\n      const key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(() => store.getFallbackEntry(key));\n    };\n    const onLoad$4 = (component, repConfig, repState) => {\n      const store = repConfig.store;\n      store.initialValue.each(data => {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    const onUnload$1 = (component, repConfig, repState) => {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option$3('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    const getValue$1 = (component, repConfig, _repState) => repConfig.store.getValue(component);\n    const setValue$1 = (component, repConfig, _repState, data) => {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    const onLoad$3 = (component, repConfig, _repState) => {\n      repConfig.store.initialValue.each(data => {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option$3('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    const setValue = (component, repConfig, repState, data) => {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    const getValue = (component, repConfig, repState) => repState.get();\n    const onLoad$2 = (component, repConfig, repState) => {\n      repConfig.store.initialValue.each(initVal => {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    const onUnload = (component, repConfig, repState) => {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option$3('initialValue'),\n      output$1('manager', {\n        setValue,\n        getValue,\n        onLoad: onLoad$2,\n        onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    const Representing = create$4({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: (component, source) => {\n          const value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    const field = (name, forbidden) => defaultedObjOf(name, {}, map$2(forbidden, f => forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name)).concat([customField('dump', identity)]));\n    const get$3 = data => data.dump;\n    const augment = (data, original) => ({\n      ...derive$1(original),\n      ...data.dump\n    });\n    const SketchBehaviours = {\n      field,\n      augment,\n      get: get$3\n    };\n\n    const _placeholder = 'placeholder';\n    const adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    const isSubstituted = spec => has$2(spec, 'uiType');\n    const subPlaceholder = (owner, detail, compSpec, placeholders) => {\n      if (owner.exists(o => o !== compSpec.owner)) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$g(placeholders, compSpec.name).fold(() => {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, newSpec => newSpec.replace());\n    };\n    const scan = (owner, detail, compSpec, placeholders) => {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    const substitute = (owner, detail, compSpec, placeholders) => {\n      const base = scan(owner, detail, compSpec, placeholders);\n      return base.fold((req, valueThunk) => {\n        const value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        const childSpecs = get$g(value, 'components').getOr([]);\n        const substituted = bind$3(childSpecs, c => substitute(owner, detail, c, placeholders));\n        return [{\n            ...value,\n            components: substituted\n          }];\n      }, (req, valuesThunk) => {\n        if (isSubstituted(compSpec)) {\n          const values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          const preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    const substituteAll = (owner, detail, components, placeholders) => bind$3(components, c => substitute(owner, detail, c, placeholders));\n    const oneReplace = (label, replacements) => {\n      let called = false;\n      const used = () => called;\n      const replace = () => {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      const required = () => replacements.fold((req, _) => req, (req, _) => req);\n      return {\n        name: constant$1(label),\n        required,\n        used,\n        replace\n      };\n    };\n    const substitutePlaces = (owner, detail, components, placeholders) => {\n      const ps = map$1(placeholders, (ph, name) => oneReplace(name, ph));\n      const outcome = substituteAll(owner, detail, components, ps);\n      each(ps, p => {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    const single$2 = adt$3.single;\n    const multiple = adt$3.multiple;\n    const placeholder = constant$1(_placeholder);\n\n    const adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    const fFactory = defaulted('factory', { sketch: identity });\n    const fSchema = defaulted('schema', []);\n    const fName = required$1('name');\n    const fPname = field$1('pname', 'pname', defaultedThunk(typeSpec => '<alloy.' + generate$6(typeSpec.name) + '>'), anyValue());\n    const fGroupSchema = customField('schema', () => [option$3('preprocess')]);\n    const fDefaults = defaulted('defaults', constant$1({}));\n    const fOverrides = defaulted('overrides', constant$1({}));\n    const requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    const externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    const optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    const groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    const asNamedPart = part => {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    const name$2 = part => {\n      const get = data => data.name;\n      return part.fold(get, get, get, get);\n    };\n    const asCommon = part => {\n      return part.fold(identity, identity, identity, identity);\n    };\n    const convert = (adtConstructor, partSchema) => spec => {\n      const data = asRawOrDie$1('Converting part type', partSchema, spec);\n      return adtConstructor(data);\n    };\n    const required = convert(adt$2.required, requiredSpec);\n    const external = convert(adt$2.external, externalSpec);\n    const optional = convert(adt$2.optional, optionalSpec);\n    const group = convert(adt$2.group, groupSpec);\n    const original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$2,\n        asCommon: asCommon,\n        original: original\n    });\n\n    const combine = (detail, data, partSpec, partValidated) => deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    const subs = (owner, detail, parts) => {\n      const internals = {};\n      const externals = {};\n      each$1(parts, part => {\n        part.fold(data => {\n          internals[data.pname] = single$2(true, (detail, partSpec, partValidated) => data.factory.sketch(combine(detail, data, partSpec, partValidated)));\n        }, data => {\n          const partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, data => {\n          internals[data.pname] = single$2(false, (detail, partSpec, partValidated) => data.factory.sketch(combine(detail, data, partSpec, partValidated)));\n        }, data => {\n          internals[data.pname] = multiple(true, (detail, _partSpec, _partValidated) => {\n            const units = detail[data.name];\n            return map$2(units, u => data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u))));\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    const generate$3 = (owner, parts) => {\n      const r = {};\n      each$1(parts, part => {\n        asNamedPart(part).each(np => {\n          const g = doGenerateOne(owner, np.pname);\n          r[np.name] = config => {\n            const validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return {\n              ...g,\n              config,\n              validated\n            };\n          };\n        });\n      });\n      return r;\n    };\n    const doGenerateOne = (owner, pname) => ({\n      uiType: placeholder(),\n      owner,\n      name: pname\n    });\n    const generateOne$1 = (owner, pname, config) => ({\n      uiType: placeholder(),\n      owner,\n      name: pname,\n      config,\n      validated: {}\n    });\n    const schemas = parts => bind$3(parts, part => part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(data => requiredObjOf(data.name, data.schema.concat([snapshot(original())]))).toArray());\n    const names = parts => map$2(parts, name$2);\n    const substitutes = (owner, detail, parts) => subs(owner, detail, parts);\n    const components$1 = (owner, detail, internals) => substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    const getPart = (component, detail, partKey) => {\n      const uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    const getPartOrDie = (component, detail, partKey) => getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    const getParts = (component, detail, partKeys) => {\n      const r = {};\n      const uids = detail.partUids;\n      const system = component.getSystem();\n      each$1(partKeys, pk => {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    const getAllParts = (component, detail) => {\n      const system = component.getSystem();\n      return map$1(detail.partUids, (pUid, _k) => constant$1(system.getByUid(pUid)));\n    };\n    const getAllPartNames = detail => keys(detail.partUids);\n    const getPartsOrDie = (component, detail, partKeys) => {\n      const r = {};\n      const uids = detail.partUids;\n      const system = component.getSystem();\n      each$1(partKeys, pk => {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    const defaultUids = (baseUid, partTypes) => {\n      const partNames = names(partTypes);\n      return wrapAll(map$2(partNames, pn => ({\n        key: pn,\n        value: baseUid + '-' + pn\n      })));\n    };\n    const defaultUidsSchema = partTypes => field$1('partUids', 'partUids', mergeWithThunk(spec => defaultUids(spec.uid, partTypes)), anyValue());\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    const base = (partSchemas, partUidsSchemas) => {\n      const ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    const asRawOrDie = (label, schema, spec, partSchemas, partUidsSchemas) => {\n      const baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    const single$1 = (owner, schema, factory, spec) => {\n      const specWithUid = supplyUid(spec);\n      const detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    const composite$1 = (owner, schema, partTypes, factory, spec) => {\n      const specWithUid = supplyUid(spec);\n      const partSchemas = schemas(partTypes);\n      const partUidsSchema = defaultUidsSchema(partTypes);\n      const detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      const subs = substitutes(owner, detail, partTypes);\n      const components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    const hasUid = spec => has$2(spec, 'uid');\n    const supplyUid = spec => {\n      return hasUid(spec) ? spec : {\n        ...spec,\n        uid: generate$5('uid')\n      };\n    };\n\n    const isSketchSpec = spec => {\n      return spec.uid !== undefined;\n    };\n    const singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    const compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    const single = rawConfig => {\n      const config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      const sketch = spec => single$1(config.name, config.configFields, config.factory, spec);\n      const apis = map$1(config.apis, makeApi);\n      const extraApis = map$1(config.extraApis, (f, k) => markAsExtraApi(f, k));\n      return {\n        name: config.name,\n        configFields: config.configFields,\n        sketch,\n        ...apis,\n        ...extraApis\n      };\n    };\n    const composite = rawConfig => {\n      const config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      const sketch = spec => composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      const parts = generate$3(config.name, config.partFields);\n      const apis = map$1(config.apis, makeApi);\n      const extraApis = map$1(config.extraApis, (f, k) => markAsExtraApi(f, k));\n      return {\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch,\n        parts,\n        ...apis,\n        ...extraApis\n      };\n    };\n\n    const inside = target => isTag('input')(target) && get$f(target, 'type') !== 'radio' || isTag('textarea')(target);\n\n    const getCurrent = (component, composeConfig, _composeState) => composeConfig.find(component);\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    const ComposeSchema = [required$1('find')];\n\n    const Composing = create$4({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    const nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    const onLoad$1 = (component, disableConfig, disableState) => {\n      const f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig);\n    };\n    const hasNative = (component, config) => config.useNative === true && contains$2(nativeDisabled, name$3(component.element));\n    const nativeIsDisabled = component => has$1(component.element, 'disabled');\n    const nativeDisable = component => {\n      set$9(component.element, 'disabled', 'disabled');\n    };\n    const nativeEnable = component => {\n      remove$7(component.element, 'disabled');\n    };\n    const ariaIsDisabled = component => get$f(component.element, 'aria-disabled') === 'true';\n    const ariaDisable = component => {\n      set$9(component.element, 'aria-disabled', 'true');\n    };\n    const ariaEnable = component => {\n      set$9(component.element, 'aria-disabled', 'false');\n    };\n    const disable = (component, disableConfig, _disableState) => {\n      disableConfig.disableClass.each(disableClass => {\n        add$2(component.element, disableClass);\n      });\n      const f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    const enable = (component, disableConfig, _disableState) => {\n      disableConfig.disableClass.each(disableClass => {\n        remove$2(component.element, disableClass);\n      });\n      const f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    const isDisabled = (component, disableConfig) => hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    const set$4 = (component, disableConfig, disableState, disabled) => {\n      const f = disabled ? disable : enable;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$4\n    });\n\n    const exhibit$5 = (base, disableConfig) => nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    const events$e = (disableConfig, disableState) => derive$2([\n      abort(execute$5(), (component, _simulatedEvent) => isDisabled(component, disableConfig)),\n      loadEvent(disableConfig, disableState, onLoad$1)\n    ]);\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option$3('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    const Disabling = create$4({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    const dehighlightAllExcept = (component, hConfig, hState, skip) => {\n      const highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, h => {\n        const shouldSkip = exists(skip, skipComp => eq(skipComp.element, h));\n        if (!shouldSkip) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(target => {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    const dehighlightAll = (component, hConfig, hState) => dehighlightAllExcept(component, hConfig, hState, []);\n    const dehighlight = (component, hConfig, hState, target) => {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    const highlight = (component, hConfig, hState, target) => {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    const highlightFirst = (component, hConfig, hState) => {\n      getFirst(component, hConfig).each(firstComp => {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    const highlightLast = (component, hConfig, hState) => {\n      getLast(component, hConfig).each(lastComp => {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    const highlightAt = (component, hConfig, hState, index) => {\n      getByIndex(component, hConfig, hState, index).fold(err => {\n        throw err;\n      }, firstComp => {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    const highlightBy = (component, hConfig, hState, predicate) => {\n      const candidates = getCandidates(component, hConfig);\n      const targetComp = find$5(candidates, predicate);\n      targetComp.each(c => {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    const isHighlighted = (component, hConfig, hState, queryTarget) => has(queryTarget.element, hConfig.highlightClass);\n    const getHighlighted = (component, hConfig, _hState) => descendant(component.element, '.' + hConfig.highlightClass).bind(e => component.getSystem().getByDom(e).toOptional());\n    const getByIndex = (component, hConfig, hState, index) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(() => Result.error(new Error('No element found with index ' + index)), component.getSystem().getByDom);\n    };\n    const getFirst = (component, hConfig, _hState) => descendant(component.element, '.' + hConfig.itemClass).bind(e => component.getSystem().getByDom(e).toOptional());\n    const getLast = (component, hConfig, _hState) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      const last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(c => component.getSystem().getByDom(c).toOptional());\n    };\n    const getDelta$2 = (component, hConfig, hState, delta) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      const current = findIndex$1(items, item => has(item, hConfig.highlightClass));\n      return current.bind(selected => {\n        const dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    const getPrevious = (component, hConfig, hState) => getDelta$2(component, hConfig, hState, -1);\n    const getNext = (component, hConfig, hState) => getDelta$2(component, hConfig, hState, +1);\n    const getCandidates = (component, hConfig, _hState) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, i => component.getSystem().getByDom(i).toOptional()));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    const Highlighting = create$4({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    const BACKSPACE = [8];\n    const TAB = [9];\n    const ENTER = [13];\n    const ESCAPE = [27];\n    const SPACE = [32];\n    const LEFT = [37];\n    const UP = [38];\n    const RIGHT = [39];\n    const DOWN = [40];\n\n    const cyclePrev = (values, index, predicate) => {\n      const before = reverse(values.slice(0, index));\n      const after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    const tryPrev = (values, index, predicate) => {\n      const before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    const cycleNext = (values, index, predicate) => {\n      const before = values.slice(0, index);\n      const after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    const tryNext = (values, index, predicate) => {\n      const after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    const inSet = keys => event => {\n      const raw = event.raw;\n      return contains$2(keys, raw.which);\n    };\n    const and = preds => event => forall(preds, pred => pred(event));\n    const isShift$1 = event => {\n      const raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    const isControl = event => {\n      const raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    const isNotShift = not(isShift$1);\n\n    const rule = (matches, action) => ({\n      matches,\n      classification: action\n    });\n    const choose = (transitions, event) => {\n      const transition = find$5(transitions, t => t.matches(event));\n      return transition.map(t => t.classification);\n    };\n\n    const reportFocusShifting = (component, prevFocus, newFocus) => {\n      const noChange = prevFocus.exists(p => newFocus.exists(n => eq(n, p)));\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus,\n          newFocus\n        });\n      }\n    };\n    const dom$2 = () => {\n      const get = component => search(component.element);\n      const set = (component, focusee) => {\n        const prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        const newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get,\n        set\n      };\n    };\n    const highlights = () => {\n      const get = component => Highlighting.getHighlighted(component).map(item => item.element);\n      const set = (component, element) => {\n        const prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, item => {\n          Highlighting.highlight(component, item);\n        });\n        const newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    const typical = (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) => {\n      const schema = () => infoSchema.concat([\n        defaulted('focusManager', dom$2()),\n        defaultedOf('focusInside', 'onFocus', valueOf(val => contains$2([\n          'onFocus',\n          'onEnterOrSpace',\n          'onApi'\n        ], val) ? Result.value(val) : Result.error('Invalid value for focusInside'))),\n        output$1('handler', me),\n        output$1('state', stateInit),\n        output$1('sendFocusIn', optFocusIn)\n      ]);\n      const processKey = (component, simulatedEvent, getRules, keyingConfig, keyingState) => {\n        const rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(rule => rule(component, simulatedEvent, keyingConfig, keyingState));\n      };\n      const toEvents = (keyingConfig, keyingState) => {\n        const onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(focusIn => run$1(focus$4(), (component, simulatedEvent) => {\n          focusIn(component, keyingConfig, keyingState);\n          simulatedEvent.stop();\n        }));\n        const tryGoInsideComponent = (component, simulatedEvent) => {\n          const isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(focusIn => {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        const keyboardEvents = [\n          run$1(keydown(), (component, simulatedEvent) => {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(() => {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, _ => {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), (component, simulatedEvent) => {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(_ => {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      const me = {\n        schema,\n        processKey,\n        toEvents\n      };\n      return me;\n    };\n\n    const create$2 = cyclicField => {\n      const schema = [\n        option$3('onEscape'),\n        option$3('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option$3('visibilitySelector')\n      ].concat([cyclicField]);\n      const isVisible = (tabbingConfig, element) => {\n        const target = tabbingConfig.visibilitySelector.bind(sel => closest$1(element, sel)).getOr(element);\n        return get$d(target) > 0;\n      };\n      const findInitial = (component, tabbingConfig) => {\n        const tabstops = descendants(component.element, tabbingConfig.selector);\n        const visibles = filter$2(tabstops, elem => isVisible(tabbingConfig, elem));\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      const findCurrent = (component, tabbingConfig) => tabbingConfig.focusManager.get(component).bind(elem => closest$1(elem, tabbingConfig.selector));\n      const isTabstop = (tabbingConfig, element) => isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      const focusIn = (component, tabbingConfig, _tabbingState) => {\n        findInitial(component, tabbingConfig).each(target => {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      const goFromTabstop = (component, tabstops, stopIndex, tabbingConfig, cycle) => cycle(tabstops, stopIndex, elem => isTabstop(tabbingConfig, elem)).fold(() => tabbingConfig.cyclic ? Optional.some(true) : Optional.none(), target => {\n        tabbingConfig.focusManager.set(component, target);\n        return Optional.some(true);\n      });\n      const go = (component, _simulatedEvent, tabbingConfig, cycle) => {\n        const tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(tabstop => {\n          const optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(stopIndex => goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle));\n        });\n      };\n      const goBackwards = (component, simulatedEvent, tabbingConfig) => {\n        const navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      const goForwards = (component, simulatedEvent, tabbingConfig) => {\n        const navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      const isFirstChild = elem => parentNode(elem).bind(firstChild).exists(child => eq(child, elem));\n      const goFromPseudoTabstop = (component, simulatedEvent, tabbingConfig) => findCurrent(component, tabbingConfig).filter(elem => !tabbingConfig.useTabstopAt(elem)).bind(elem => (isFirstChild(elem) ? goBackwards : goForwards)(component, simulatedEvent, tabbingConfig));\n      const execute = (component, simulatedEvent, tabbingConfig) => tabbingConfig.onEnter.bind(f => f(component, simulatedEvent));\n      const exit = (component, simulatedEvent, tabbingConfig) => tabbingConfig.onEscape.bind(f => f(component, simulatedEvent));\n      const getKeydownRules = constant$1([\n        rule(and([\n          isShift$1,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      const getKeyupRules = constant$1([\n        rule(inSet(ESCAPE), exit),\n        rule(inSet(TAB), goFromPseudoTabstop)\n      ]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, () => Optional.some(focusIn));\n    };\n\n    var AcyclicType = create$2(customField('cyclic', never));\n\n    var CyclicType = create$2(customField('cyclic', always));\n\n    const doDefaultExecute = (component, _simulatedEvent, focused) => {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    const defaultExecute = (component, simulatedEvent, focused) => {\n      const isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    const stopEventForFirefox = (_component, _simulatedEvent) => Optional.some(true);\n\n    const schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    const execute$4 = (component, simulatedEvent, executeConfig) => executeConfig.execute(component, simulatedEvent, component.element);\n    const getKeydownRules$5 = (component, _simulatedEvent, executeConfig, _executeState) => {\n      const spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      const enterExec = executeConfig.useEnter ? ENTER : [];\n      const downExec = executeConfig.useDown ? DOWN : [];\n      const execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    const getKeyupRules$5 = (component, _simulatedEvent, executeConfig, _executeState) => executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, () => Optional.none());\n\n    const flatgrid$1 = () => {\n      const dimensions = value$2();\n      const setGridSize = (numRows, numColumns) => {\n        dimensions.set({\n          numRows,\n          numColumns\n        });\n      };\n      const getNumRows = () => dimensions.get().map(d => d.numRows);\n      const getNumColumns = () => dimensions.get().map(d => d.numColumns);\n      return nu$8({\n        readState: () => dimensions.get().map(d => ({\n          numRows: String(d.numRows),\n          numColumns: String(d.numColumns)\n        })).getOr({\n          numRows: '?',\n          numColumns: '?'\n        }),\n        setGridSize,\n        getNumRows,\n        getNumColumns\n      });\n    };\n    const init$d = spec => spec.state(spec);\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    const useH = movement => (component, simulatedEvent, config, state) => {\n      const move = movement(component.element);\n      return use(move, component, simulatedEvent, config, state);\n    };\n    const west$1 = (moveLeft, moveRight) => {\n      const movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    const east$1 = (moveLeft, moveRight) => {\n      const movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    const useV = move => (component, simulatedEvent, config, state) => use(move, component, simulatedEvent, config, state);\n    const use = (move, component, simulatedEvent, config, state) => {\n      const outcome = config.focusManager.get(component).bind(focused => move(component.element, focused, config, state));\n      return outcome.map(newFocus => {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    const north$1 = useV;\n    const south$1 = useV;\n    const move$1 = useV;\n\n    const isHidden$1 = dom => dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    const isVisible = element => !isHidden$1(element.dom);\n\n    const locate = (candidates, predicate) => findIndex$1(candidates, predicate).map(index => ({\n      index,\n      candidates\n    }));\n\n    const locateVisible = (container, current, selector) => {\n      const predicate = x => eq(x, current);\n      const candidates = descendants(container, selector);\n      const visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    const findIndex = (elements, target) => findIndex$1(elements, elem => eq(target, elem));\n\n    const withGrid = (values, index, numCols, f) => {\n      const oldRow = Math.floor(index / numCols);\n      const oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(address => {\n        const newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    const cycleHorizontal$1 = (values, index, numRows, numCols, delta) => withGrid(values, index, numCols, (oldRow, oldColumn) => {\n      const onLastRow = oldRow === numRows - 1;\n      const colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n      const newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n      return Optional.some({\n        row: oldRow,\n        column: newColumn\n      });\n    });\n    const cycleVertical$1 = (values, index, numRows, numCols, delta) => withGrid(values, index, numCols, (oldRow, oldColumn) => {\n      const newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n      const onLastRow = newRow === numRows - 1;\n      const colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n      const newCol = clamp(oldColumn, 0, colsInRow - 1);\n      return Optional.some({\n        row: newRow,\n        column: newCol\n      });\n    });\n    const cycleRight$1 = (values, index, numRows, numCols) => cycleHorizontal$1(values, index, numRows, numCols, +1);\n    const cycleLeft$1 = (values, index, numRows, numCols) => cycleHorizontal$1(values, index, numRows, numCols, -1);\n    const cycleUp$1 = (values, index, numRows, numCols) => cycleVertical$1(values, index, numRows, numCols, -1);\n    const cycleDown$1 = (values, index, numRows, numCols) => cycleVertical$1(values, index, numRows, numCols, +1);\n\n    const schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    const focusIn$3 = (component, gridConfig, _gridState) => {\n      descendant(component.element, gridConfig.selector).each(first => {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    const findCurrent$1 = (component, gridConfig) => gridConfig.focusManager.get(component).bind(elem => closest$1(elem, gridConfig.selector));\n    const execute$3 = (component, simulatedEvent, gridConfig, _gridState) => findCurrent$1(component, gridConfig).bind(focused => gridConfig.execute(component, simulatedEvent, focused));\n    const doMove$2 = cycle => (element, focused, gridConfig, gridState) => locateVisible(element, focused, gridConfig.selector).bind(identified => cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns)));\n    const handleTab = (_component, _simulatedEvent, gridConfig) => gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    const doEscape$1 = (component, simulatedEvent, gridConfig) => gridConfig.onEscape(component, simulatedEvent);\n    const moveLeft$3 = doMove$2(cycleLeft$1);\n    const moveRight$3 = doMove$2(cycleRight$1);\n    const moveNorth$1 = doMove$2(cycleUp$1);\n    const moveSouth$1 = doMove$2(cycleDown$1);\n    const getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift$1,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    const getKeyupRules$4 = constant$1([\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE), stopEventForFirefox)\n    ]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, () => Optional.some(focusIn$3));\n\n    const f = (container, selector, current, delta, getNewIndex) => {\n      const isDisabledButton = candidate => name$3(candidate) === 'button' && get$f(candidate, 'disabled') === 'disabled';\n      const tryNewIndex = (initial, index, candidates) => getNewIndex(initial, index, delta, 0, candidates.length - 1, candidates[index], newIndex => isDisabledButton(candidates[newIndex]) ? tryNewIndex(initial, newIndex, candidates) : Optional.from(candidates[newIndex]));\n      return locateVisible(container, current, selector).bind(identified => {\n        const index = identified.index;\n        const candidates = identified.candidates;\n        return tryNewIndex(index, index, candidates);\n      });\n    };\n    const horizontalWithoutCycles = (container, selector, current, delta) => f(container, selector, current, delta, (prevIndex, v, d, min, max, oldCandidate, onNewIndex) => {\n      const newIndex = clamp(v + d, min, max);\n      return newIndex === prevIndex ? Optional.from(oldCandidate) : onNewIndex(newIndex);\n    });\n    const horizontal = (container, selector, current, delta) => f(container, selector, current, delta, (prevIndex, v, d, min, max, _oldCandidate, onNewIndex) => {\n      const newIndex = cycleBy(v, d, min, max);\n      return newIndex === prevIndex ? Optional.none() : onNewIndex(newIndex);\n    });\n\n    const schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true),\n      defaulted('allowHorizontal', true),\n      defaulted('cycles', true)\n    ];\n    const findCurrent = (component, flowConfig) => flowConfig.focusManager.get(component).bind(elem => closest$1(elem, flowConfig.selector));\n    const execute$2 = (component, simulatedEvent, flowConfig) => findCurrent(component, flowConfig).bind(focused => flowConfig.execute(component, simulatedEvent, focused));\n    const focusIn$2 = (component, flowConfig, _state) => {\n      flowConfig.getInitial(component).orThunk(() => descendant(component.element, flowConfig.selector)).each(first => {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    const moveLeft$2 = (element, focused, info) => (info.cycles ? horizontal : horizontalWithoutCycles)(element, info.selector, focused, -1);\n    const moveRight$2 = (element, focused, info) => (info.cycles ? horizontal : horizontalWithoutCycles)(element, info.selector, focused, +1);\n    const doMove$1 = movement => (component, simulatedEvent, flowConfig, flowState) => movement(component, simulatedEvent, flowConfig, flowState).bind(() => flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true));\n    const doEscape = (component, simulatedEvent, flowConfig) => flowConfig.onEscape(component, simulatedEvent);\n    const getKeydownRules$3 = (_component, _se, flowConfig, _flowState) => {\n      const westMovers = [...flowConfig.allowHorizontal ? LEFT : []].concat(flowConfig.allowVertical ? UP : []);\n      const eastMovers = [...flowConfig.allowHorizontal ? RIGHT : []].concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2)\n      ];\n    };\n    const getKeyupRules$3 = constant$1([\n      rule(inSet(SPACE), stopEventForFirefox),\n      rule(inSet(ESCAPE), doEscape)\n    ]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, () => Optional.some(focusIn$2));\n\n    const toCell = (matrix, rowIndex, columnIndex) => Optional.from(matrix[rowIndex]).bind(row => Optional.from(row[columnIndex]).map(cell => ({\n      rowIndex,\n      columnIndex,\n      cell\n    })));\n    const cycleHorizontal = (matrix, rowIndex, startCol, deltaCol) => {\n      const row = matrix[rowIndex];\n      const colsInRow = row.length;\n      const newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    const cycleVertical = (matrix, colIndex, startRow, deltaRow) => {\n      const nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      const colsInNextRow = matrix[nextRowIndex].length;\n      const nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    const moveHorizontal = (matrix, rowIndex, startCol, deltaCol) => {\n      const row = matrix[rowIndex];\n      const colsInRow = row.length;\n      const newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    const moveVertical = (matrix, colIndex, startRow, deltaRow) => {\n      const nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      const colsInNextRow = matrix[nextRowIndex].length;\n      const nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    const cycleRight = (matrix, startRow, startCol) => cycleHorizontal(matrix, startRow, startCol, +1);\n    const cycleLeft = (matrix, startRow, startCol) => cycleHorizontal(matrix, startRow, startCol, -1);\n    const cycleUp = (matrix, startRow, startCol) => cycleVertical(matrix, startCol, startRow, -1);\n    const cycleDown = (matrix, startRow, startCol) => cycleVertical(matrix, startCol, startRow, +1);\n    const moveLeft$1 = (matrix, startRow, startCol) => moveHorizontal(matrix, startRow, startCol, -1);\n    const moveRight$1 = (matrix, startRow, startCol) => moveHorizontal(matrix, startRow, startCol, +1);\n    const moveUp$1 = (matrix, startRow, startCol) => moveVertical(matrix, startCol, startRow, -1);\n    const moveDown$1 = (matrix, startRow, startCol) => moveVertical(matrix, startCol, startRow, +1);\n\n    const schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    const focusIn$1 = (component, matrixConfig, _state) => {\n      const focused = matrixConfig.previousSelector(component).orThunk(() => {\n        const selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(cell => {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    const execute$1 = (component, simulatedEvent, matrixConfig) => search(component.element).bind(focused => matrixConfig.execute(component, simulatedEvent, focused));\n    const toMatrix = (rows, matrixConfig) => map$2(rows, row => descendants(row, matrixConfig.selectors.cell));\n    const doMove = (ifCycle, ifMove) => (element, focused, matrixConfig) => {\n      const move = matrixConfig.cycles ? ifCycle : ifMove;\n      return closest$1(focused, matrixConfig.selectors.row).bind(inRow => {\n        const cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n        return findIndex(cellsInRow, focused).bind(colIndex => {\n          const allRows = descendants(element, matrixConfig.selectors.row);\n          return findIndex(allRows, inRow).bind(rowIndex => {\n            const matrix = toMatrix(allRows, matrixConfig);\n            return move(matrix, rowIndex, colIndex).map(next => next.cell);\n          });\n        });\n      });\n    };\n    const moveLeft = doMove(cycleLeft, moveLeft$1);\n    const moveRight = doMove(cycleRight, moveRight$1);\n    const moveNorth = doMove(cycleUp, moveUp$1);\n    const moveSouth = doMove(cycleDown, moveDown$1);\n    const getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    const getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, () => Optional.some(focusIn$1));\n\n    const schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    const execute = (component, simulatedEvent, menuConfig) => menuConfig.focusManager.get(component).bind(focused => menuConfig.execute(component, simulatedEvent, focused));\n    const focusIn = (component, menuConfig, _state) => {\n      descendant(component.element, menuConfig.selector).each(first => {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    const moveUp = (element, focused, info) => horizontal(element, info.selector, focused, -1);\n    const moveDown = (element, focused, info) => horizontal(element, info.selector, focused, +1);\n    const fireShiftTab = (component, simulatedEvent, menuConfig, menuState) => menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    const fireTab = (component, simulatedEvent, menuConfig, menuState) => menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    const getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift$1,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    const getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, () => Optional.some(focusIn));\n\n    const schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option$3('focusIn')\n    ];\n    const getKeydownRules = (component, simulatedEvent, specialInfo) => [\n      rule(inSet(SPACE), specialInfo.onSpace),\n      rule(and([\n        isNotShift,\n        inSet(ENTER)\n      ]), specialInfo.onEnter),\n      rule(and([\n        isShift$1,\n        inSet(ENTER)\n      ]), specialInfo.onShiftEnter),\n      rule(and([\n        isShift$1,\n        inSet(TAB)\n      ]), specialInfo.onShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), specialInfo.onTab),\n      rule(inSet(UP), specialInfo.onUp),\n      rule(inSet(DOWN), specialInfo.onDown),\n      rule(inSet(LEFT), specialInfo.onLeft),\n      rule(inSet(RIGHT), specialInfo.onRight),\n      rule(inSet(SPACE), specialInfo.onSpace)\n    ];\n    const getKeyupRules = (component, simulatedEvent, specialInfo) => [\n      ...specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [],\n      rule(inSet(ESCAPE), specialInfo.onEscape)\n    ];\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, specialInfo => specialInfo.focusIn);\n\n    const acyclic = AcyclicType.schema();\n    const cyclic = CyclicType.schema();\n    const flow = FlowType.schema();\n    const flatgrid = FlatgridType.schema();\n    const matrix = MatrixType.schema();\n    const execution = ExecutionType.schema();\n    const menu = MenuType.schema();\n    const special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    const isFlatgridState = keyState => hasNonNullableKey(keyState, 'setGridSize');\n    const Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: (keyingConfig, keyingState) => {\n          const handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: (component, keyConfig, keyState) => {\n          keyConfig.sendFocusIn(keyConfig).fold(() => {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, sendFocusIn => {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: (component, keyConfig, keyState, numRows, numColumns) => {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    const withoutReuse = (parent, data) => {\n      preserve$1(() => {\n        replaceChildren(parent, data, () => map$2(data, parent.getSystem().build));\n      }, parent.element);\n    };\n    const withReuse = (parent, data) => {\n      preserve$1(() => {\n        virtualReplaceChildren(parent, data, () => {\n          return patchSpecChildren(parent.element, data, parent.getSystem().buildOrPatch);\n        });\n      }, parent.element);\n    };\n\n    const virtualReplace = (component, replacee, replaceeIndex, childSpec) => {\n      virtualDetach(replacee);\n      const child = patchSpecChild(component.element, replaceeIndex, childSpec, component.getSystem().buildOrPatch);\n      virtualAttach(component, child);\n      component.syncComponents();\n    };\n    const insert = (component, insertion, childSpec) => {\n      const child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    const replace = (component, replacee, replaceeIndex, childSpec) => {\n      detach(replacee);\n      insert(component, (p, c) => appendAt(p, c, replaceeIndex), childSpec);\n    };\n    const set$3 = (component, replaceConfig, replaceState, data) => {\n      const replacer = replaceConfig.reuseDom ? withReuse : withoutReuse;\n      return replacer(component, data);\n    };\n    const append = (component, replaceConfig, replaceState, appendee) => {\n      insert(component, append$2, appendee);\n    };\n    const prepend = (component, replaceConfig, replaceState, prependee) => {\n      insert(component, prepend$1, prependee);\n    };\n    const remove = (component, replaceConfig, replaceState, removee) => {\n      const children = contents(component);\n      const foundChild = find$5(children, child => eq(removee.element, child.element));\n      foundChild.each(detach);\n    };\n    const contents = (component, _replaceConfig) => component.components();\n    const replaceAt = (component, replaceConfig, replaceState, replaceeIndex, replacer) => {\n      const children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(replacee => {\n        replacer.fold(() => detach(replacee), r => {\n          const replacer = replaceConfig.reuseDom ? virtualReplace : replace;\n          replacer(component, replacee, replaceeIndex, r);\n        });\n        return replacee;\n      });\n    };\n    const replaceBy = (component, replaceConfig, replaceState, replaceePred, replacer) => {\n      const children = contents(component);\n      return findIndex$1(children, replaceePred).bind(replaceeIndex => replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer));\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$3,\n        contents: contents\n    });\n\n    const Replacing = create$4({\n      fields: [defaultedBoolean('reuseDom', true)],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    const events$d = (name, eventHandlers) => {\n      const events = derive$2(eventHandlers);\n      return create$4({\n        fields: [required$1('enabled')],\n        name,\n        active: { events: constant$1(events) }\n      });\n    };\n    const config = (name, eventHandlers) => {\n      const me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    const focus$2 = (component, focusConfig) => {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    const blur = (component, focusConfig) => {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    const isFocused = component => hasFocus(component.element);\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    const exhibit$4 = (base, focusConfig) => {\n      const mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    const events$c = focusConfig => derive$2([run$1(focus$4(), (component, simulatedEvent) => {\n        focus$2(component, focusConfig);\n        simulatedEvent.stop();\n      })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), (_, simulatedEvent) => {\n        simulatedEvent.event.prevent();\n      })] : []));\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    const Focusing = create$4({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    const SetupBehaviourCellState = initialState => {\n      const init = () => {\n        const cell = Cell(initialState);\n        const get = () => cell.get();\n        const set = newState => cell.set(newState);\n        const clear = () => cell.set(initialState);\n        const readState = () => cell.get();\n        return {\n          get,\n          set,\n          clear,\n          readState\n        };\n      };\n      return { init };\n    };\n\n    const updateAriaState = (component, toggleConfig, toggleState) => {\n      const ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    const updateClass = (component, toggleConfig, toggleState) => {\n      toggleConfig.toggleClass.each(toggleClass => {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    const set$2 = (component, toggleConfig, toggleState, state) => {\n      const initialState = toggleState.get();\n      toggleState.set(state);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n      if (initialState !== state) {\n        toggleConfig.onToggled(component, state);\n      }\n    };\n    const toggle$2 = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    const on = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, true);\n    };\n    const off = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, false);\n    };\n    const isOn = (component, toggleConfig, toggleState) => toggleState.get();\n    const onLoad = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$2\n    });\n\n    const exhibit$3 = () => nu$7({});\n    const events$b = (toggleConfig, toggleState) => {\n      const execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      const load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    const updatePressed = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    const updateSelected = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-selected', status);\n    };\n    const updateChecked = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-checked', status);\n    };\n    const updateExpanded = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option$3('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      onHandler('onToggled'),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    const Toggling = create$4({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    const pointerEvents = () => {\n      const onClick = (component, simulatedEvent) => {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    const events$a = optAction => {\n      const executeHandler = action => runOnExecute$1((component, simulatedEvent) => {\n        action(component);\n        simulatedEvent.stop();\n      });\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    const hoverEvent = 'alloy.item-hover';\n    const focusEvent = 'alloy.item-focus';\n    const toggledEvent = 'alloy.item-toggled';\n    const onHover = item => {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item });\n      }\n    };\n    const onFocus$1 = item => {\n      emitWith(item, focusEvent, { item });\n    };\n    const onToggled = (item, state) => {\n      emitWith(item, toggledEvent, {\n        item,\n        state\n      });\n    };\n    const hover = constant$1(hoverEvent);\n    const focus$1 = constant$1(focusEvent);\n    const toggled = constant$1(toggledEvent);\n\n    const getItemRole = detail => detail.toggling.map(toggling => toggling.exclusive ? 'menuitemradio' : 'menuitemcheckbox').getOr('menuitem');\n    const getTogglingSpec = tConfig => ({\n      aria: { mode: 'checked' },\n      ...filter$1(tConfig, (_value, name) => name !== 'exclusive'),\n      onToggled: (component, state) => {\n        if (isFunction(tConfig.onToggled)) {\n          tConfig.onToggled(component, state);\n        }\n        onToggled(component, state);\n      }\n    });\n    const builder$2 = detail => ({\n      dom: detail.dom,\n      domModification: {\n        ...detail.domModification,\n        attributes: {\n          'role': getItemRole(detail),\n          ...detail.domModification.attributes,\n          'aria-haspopup': detail.hasSubmenu,\n          ...detail.hasSubmenu ? { 'aria-expanded': false } : {}\n        }\n      },\n      behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n        detail.toggling.fold(Toggling.revoke, tConfig => Toggling.config(getTogglingSpec(tConfig))),\n        Focusing.config({\n          ignore: detail.ignoreFocus,\n          stopMousedown: detail.ignoreFocus,\n          onFocus: component => {\n            onFocus$1(component);\n          }\n        }),\n        Keying.config({ mode: 'execution' }),\n        Representing.config({\n          store: {\n            mode: 'memory',\n            initialValue: detail.data\n          }\n        }),\n        config('item-type-events', [\n          ...pointerEvents(),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), Focusing.focus)\n        ])\n      ]),\n      components: detail.components,\n      eventOrder: detail.eventOrder\n    });\n    const schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option$3('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    const builder$1 = detail => ({\n      dom: detail.dom,\n      components: detail.components,\n      events: derive$2([stopper(focusItem())])\n    });\n    const schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    const owner$2 = constant$1('item-widget');\n    const parts$h = constant$1([required({\n        name: 'widget',\n        overrides: detail => {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: _component => {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    const builder = detail => {\n      const subs = substitutes(owner$2(), detail, parts$h());\n      const components = components$1(owner$2(), detail, subs.internals());\n      const focusWidget = component => getPart(component, detail, 'widget').map(widget => {\n        Keying.focusIn(widget);\n        return widget;\n      });\n      const onHorizontalArrow = (component, simulatedEvent) => inside(simulatedEvent.event.target) ? Optional.none() : (() => {\n        if (detail.autofocus) {\n          simulatedEvent.setSource(component.element);\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      })();\n      return {\n        dom: detail.dom,\n        components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1((component, simulatedEvent) => {\n            focusWidget(component).each(_widget => {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), (component, _simulatedEvent) => {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: component => {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? component => {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: (component, simulatedEvent) => {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    const schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    const itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    const configureGrid = (detail, movementInfo) => ({\n      mode: 'flatgrid',\n      selector: '.' + detail.markers.item,\n      initSize: {\n        numColumns: movementInfo.initSize.numColumns,\n        numRows: movementInfo.initSize.numRows\n      },\n      focusManager: detail.focusManager\n    });\n    const configureMatrix = (detail, movementInfo) => ({\n      mode: 'matrix',\n      selectors: {\n        row: movementInfo.rowSelector,\n        cell: '.' + detail.markers.item\n      },\n      previousSelector: movementInfo.previousSelector,\n      focusManager: detail.focusManager\n    });\n    const configureMenu = (detail, movementInfo) => ({\n      mode: 'menu',\n      selector: '.' + detail.markers.item,\n      moveOnTab: movementInfo.moveOnTab,\n      focusManager: detail.focusManager\n    });\n    const parts$g = constant$1([group({\n        factory: {\n          sketch: spec => {\n            const itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: (detail, u) => {\n          return has$2(u, 'uid') ? u : {\n            ...u,\n            uid: generate$5('item')\n          };\n        },\n        overrides: (detail, u) => {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    const schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector'),\n          defaulted('previousSelector', Optional.none)\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ]);\n\n    const focus = constant$1('alloy.menu-focus');\n\n    const deselectOtherRadioItems = (menu, item) => {\n      const checkedRadioItems = descendants(menu.element, '[role=\"menuitemradio\"][aria-checked=\"true\"]');\n      each$1(checkedRadioItems, ele => {\n        if (!eq(ele, item.element)) {\n          menu.getSystem().getByDom(ele).each(c => {\n            Toggling.off(c);\n          });\n        }\n      });\n    };\n    const make$7 = (detail, components, _spec, _externals) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      markers: detail.markers,\n      behaviours: augment(detail.menuBehaviours, [\n        Highlighting.config({\n          highlightClass: detail.markers.selectedItem,\n          itemClass: detail.markers.item,\n          onHighlight: detail.onHighlight,\n          onDehighlight: detail.onDehighlight\n        }),\n        Representing.config({\n          store: {\n            mode: 'memory',\n            initialValue: detail.value\n          }\n        }),\n        Composing.config({ find: Optional.some }),\n        Keying.config(detail.movement.config(detail, detail.movement))\n      ]),\n      events: derive$2([\n        run$1(focus$1(), (menu, simulatedEvent) => {\n          const event = simulatedEvent.event;\n          menu.getSystem().getByDom(event.target).each(item => {\n            Highlighting.highlight(menu, item);\n            simulatedEvent.stop();\n            emitWith(menu, focus(), {\n              menu,\n              item\n            });\n          });\n        }),\n        run$1(hover(), (menu, simulatedEvent) => {\n          const item = simulatedEvent.event.item;\n          Highlighting.highlight(menu, item);\n        }),\n        run$1(toggled(), (menu, simulatedEvent) => {\n          const {item, state} = simulatedEvent.event;\n          if (state && get$f(item.element, 'role') === 'menuitemradio') {\n            deselectOtherRadioItems(menu, item);\n          }\n        })\n      ]),\n      components,\n      eventOrder: detail.eventOrder,\n      domModification: { attributes: { role: 'menu' } }\n    });\n\n    const Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    const transpose$1 = obj => tupleMap(obj, (v, k) => ({\n      k: v,\n      v: k\n    }));\n    const trace = (items, byItem, byMenu, finish) => get$g(byMenu, finish).bind(triggerItem => get$g(items, triggerItem).bind(triggerMenu => {\n      const rest = trace(items, byItem, byMenu, triggerMenu);\n      return Optional.some([triggerMenu].concat(rest));\n    })).getOr([]);\n    const generate$2 = (menus, expansions) => {\n      const items = {};\n      each(menus, (menuItems, menu) => {\n        each$1(menuItems, item => {\n          items[item] = menu;\n        });\n      });\n      const byItem = expansions;\n      const byMenu = transpose$1(expansions);\n      const menuPaths = map$1(byMenu, (_triggerItem, submenu) => [submenu].concat(trace(items, byItem, byMenu, submenu)));\n      return map$1(items, menu => get$g(menuPaths, menu).getOr([menu]));\n    };\n\n    const init$c = () => {\n      const expansions = Cell({});\n      const menus = Cell({});\n      const paths = Cell({});\n      const primary = value$2();\n      const directory = Cell({});\n      const clear = () => {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      const isClear = () => primary.get().isNone();\n      const setMenuBuilt = (menuName, built) => {\n        menus.set({\n          ...menus.get(),\n          [menuName]: {\n            type: 'prepared',\n            menu: built\n          }\n        });\n      };\n      const setContents = (sPrimary, sMenus, sExpansions, dir) => {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        const sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      const getTriggeringItem = menuValue => find$4(expansions.get(), (v, _k) => v === menuValue);\n      const getTriggerData = (menuValue, getItemByValue, path) => getPreparedMenu(menuValue).bind(menu => getTriggeringItem(menuValue).bind(triggeringItemValue => getItemByValue(triggeringItemValue).map(triggeredItem => ({\n        triggeredMenu: menu,\n        triggeringItem: triggeredItem,\n        triggeringPath: path\n      }))));\n      const getTriggeringPath = (itemValue, getItemByValue) => {\n        const extraPath = filter$2(lookupItem(itemValue).toArray(), menuValue => getPreparedMenu(menuValue).isSome());\n        return get$g(paths.get(), itemValue).bind(path => {\n          const revPath = reverse(extraPath.concat(path));\n          const triggers = bind$3(revPath, (menuValue, menuIndex) => getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(() => is$1(primary.get(), menuValue) ? [] : [Optional.none()], data => [Optional.some(data)]));\n          return sequence(triggers);\n        });\n      };\n      const expand = itemValue => get$g(expansions.get(), itemValue).map(menu => {\n        const current = get$g(paths.get(), itemValue).getOr([]);\n        return [menu].concat(current);\n      });\n      const collapse = itemValue => get$g(paths.get(), itemValue).bind(path => path.length > 1 ? Optional.some(path.slice(1)) : Optional.none());\n      const refresh = itemValue => get$g(paths.get(), itemValue);\n      const getPreparedMenu = menuValue => lookupMenu(menuValue).bind(extractPreparedMenu);\n      const lookupMenu = menuValue => get$g(menus.get(), menuValue);\n      const lookupItem = itemValue => get$g(expansions.get(), itemValue);\n      const otherMenus = path => {\n        const menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      const getPrimary = () => primary.get().bind(getPreparedMenu);\n      const getMenus = () => menus.get();\n      return {\n        setMenuBuilt,\n        setContents,\n        expand,\n        refresh,\n        collapse,\n        lookupMenu,\n        lookupItem,\n        otherMenus,\n        getPrimary,\n        getMenus,\n        clear,\n        isClear,\n        getTriggeringPath\n      };\n    };\n    const extractPreparedMenu = prep => prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    const LayeredState = {\n      init: init$c,\n      extractPreparedMenu\n    };\n\n    const onMenuItemHighlightedEvent = generate$6('tiered-menu-item-highlight');\n    const onMenuItemDehighlightedEvent = generate$6('tiered-menu-item-dehighlight');\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightMenuAndItem'] = 0] = 'HighlightMenuAndItem';\n      HighlightOnOpen[HighlightOnOpen['HighlightJustMenu'] = 1] = 'HighlightJustMenu';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 2] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n\n    const make$6 = (detail, _rawUiSpec) => {\n      const submenuParentItems = value$2();\n      const buildMenus = (container, primaryName, menus) => map$1(menus, (spec, name) => {\n        const makeSketch = () => Menu.sketch({\n          ...spec,\n          value: name,\n          markers: detail.markers,\n          fakeFocus: detail.fakeFocus,\n          onHighlight: (menuComp, itemComp) => {\n            const highlightData = {\n              menuComp,\n              itemComp\n            };\n            emitWith(menuComp, onMenuItemHighlightedEvent, highlightData);\n          },\n          onDehighlight: (menuComp, itemComp) => {\n            const dehighlightData = {\n              menuComp,\n              itemComp\n            };\n            emitWith(menuComp, onMenuItemDehighlightedEvent, dehighlightData);\n          },\n          focusManager: detail.fakeFocus ? highlights() : dom$2()\n        });\n        return name === primaryName ? {\n          type: 'prepared',\n          menu: container.getSystem().build(makeSketch())\n        } : {\n          type: 'notbuilt',\n          nbMenu: makeSketch\n        };\n      });\n      const layeredState = LayeredState.init();\n      const setup = container => {\n        const componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        const directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      const getItemValue = item => Representing.getValue(item).value;\n      const getItemByValue = (_container, menus, itemValue) => findMap(menus, menu => {\n        if (!menu.getSystem().isConnected()) {\n          return Optional.none();\n        }\n        const candidates = Highlighting.getCandidates(menu);\n        return find$5(candidates, c => getItemValue(c) === itemValue);\n      });\n      const toDirectory = _container => map$1(detail.data.menus, (data, _menuName) => bind$3(data.items, item => item.type === 'separator' ? [] : [item.data.value]));\n      const setActiveMenu = Highlighting.highlight;\n      const setActiveMenuAndItem = (container, menu) => {\n        setActiveMenu(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(() => Highlighting.getFirst(menu)).each(item => {\n          if (detail.fakeFocus) {\n            Highlighting.highlight(menu, item);\n          } else {\n            dispatch(container, item.element, focusItem());\n          }\n        });\n      };\n      const getMenus = (state, menuValues) => cat(map$2(menuValues, mv => state.lookupMenu(mv).bind(prep => prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none())));\n      const closeOthers = (container, state, path) => {\n        const others = getMenus(state, state.otherMenus(path));\n        each$1(others, o => {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      const getSubmenuParents = container => submenuParentItems.get().getOrThunk(() => {\n        const r = {};\n        const items = descendants(container.element, `.${ detail.markers.item }`);\n        const parentItems = filter$2(items, i => get$f(i, 'aria-haspopup') === 'true');\n        each$1(parentItems, i => {\n          container.getSystem().getByDom(i).each(itemComp => {\n            const key = getItemValue(itemComp);\n            r[key] = itemComp;\n          });\n        });\n        submenuParentItems.set(r);\n        return r;\n      });\n      const updateAriaExpansions = (container, path) => {\n        const parentItems = getSubmenuParents(container);\n        each(parentItems, (v, k) => {\n          const expanded = contains$2(path, k);\n          set$9(v.element, 'aria-expanded', expanded);\n        });\n      };\n      const updateMenuPath = (container, state, path) => Optional.from(path[0]).bind(latestMenuName => state.lookupMenu(latestMenuName).bind(menuPrep => {\n        if (menuPrep.type === 'notbuilt') {\n          return Optional.none();\n        } else {\n          const activeMenu = menuPrep.menu;\n          const rest = getMenus(state, path.slice(1));\n          each$1(rest, r => {\n            add$2(r.element, detail.markers.backgroundMenu);\n          });\n          if (!inBody(activeMenu.element)) {\n            Replacing.append(container, premade(activeMenu));\n          }\n          remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n          setActiveMenuAndItem(container, activeMenu);\n          closeOthers(container, state, path);\n          return Optional.some(activeMenu);\n        }\n      }));\n      let ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      const buildIfRequired = (container, menuName, menuPrep) => {\n        if (menuPrep.type === 'notbuilt') {\n          const menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      const expandRight = (container, item, decision = ExpandHighlightDecision.HighlightSubmenu) => {\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          const value = getItemValue(item);\n          return layeredState.expand(value).bind(path => {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(menuName => layeredState.lookupMenu(menuName).bind(activeMenuPrep => {\n              const activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Optional.some(item);\n              }\n            }));\n          });\n        }\n      };\n      const collapseLeft = (container, item) => {\n        const value = getItemValue(item);\n        return layeredState.collapse(value).bind(path => {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(activeMenu => {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      const updateView = (container, item) => {\n        const value = getItemValue(item);\n        return layeredState.refresh(value).bind(path => {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      const onRight = (container, item) => inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      const onLeft = (container, item) => inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      const onEscape = (container, item) => collapseLeft(container, item).orThunk(() => detail.onEscape(container, item).map(() => container));\n      const keyOnItem = f => (container, simulatedEvent) => {\n        return closest$1(simulatedEvent.getSource(), `.${ detail.markers.item }`).bind(target => container.getSystem().getByDom(target).toOptional().bind(item => f(container, item).map(always)));\n      };\n      const events = derive$2([\n        run$1(focus(), (tmenu, simulatedEvent) => {\n          const item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(() => {\n            const menu = simulatedEvent.event.menu;\n            Highlighting.highlight(tmenu, menu);\n            const value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(path => closeOthers(tmenu, layeredState, path));\n          });\n        }),\n        runOnExecute$1((component, simulatedEvent) => {\n          const target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(item => {\n            const itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(() => {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached((container, _simulatedEvent) => {\n          setup(container).each(primary => {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightOnOpen === HighlightOnOpen.HighlightMenuAndItem) {\n              setActiveMenuAndItem(container, primary);\n            } else if (detail.highlightOnOpen === HighlightOnOpen.HighlightJustMenu) {\n              setActiveMenu(container, primary);\n            }\n          });\n        }),\n        run$1(onMenuItemHighlightedEvent, (tmenuComp, se) => {\n          detail.onHighlightItem(tmenuComp, se.event.menuComp, se.event.itemComp);\n        }),\n        run$1(onMenuItemDehighlightedEvent, (tmenuComp, se) => {\n          detail.onDehighlightItem(tmenuComp, se.event.menuComp, se.event.itemComp);\n        }),\n        ...detail.navigateOnHover ? [run$1(hover(), (tmenu, simulatedEvent) => {\n            const item = simulatedEvent.event.item;\n            updateView(tmenu, item);\n            expandRight(tmenu, item, ExpandHighlightDecision.HighlightParent);\n            detail.onHover(tmenu, item);\n          })] : []\n      ]);\n      const getActiveItem = container => Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      const collapseMenuApi = container => {\n        getActiveItem(container).each(currentItem => {\n          collapseLeft(container, currentItem);\n        });\n      };\n      const highlightPrimary = container => {\n        layeredState.getPrimary().each(primary => {\n          setActiveMenuAndItem(container, primary);\n        });\n      };\n      const extractMenuFromContainer = container => Optional.from(container.components()[0]).filter(comp => get$f(comp.element, 'role') === 'menu');\n      const repositionMenus = container => {\n        const maybeActivePrimary = layeredState.getPrimary().bind(primary => getActiveItem(container).bind(currentItem => {\n          const itemValue = getItemValue(currentItem);\n          const allMenus = values(layeredState.getMenus());\n          const preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n          return layeredState.getTriggeringPath(itemValue, v => getItemByValue(container, preparedMenus, v));\n        }).map(triggeringPath => ({\n          primary,\n          triggeringPath\n        })));\n        maybeActivePrimary.fold(() => {\n          extractMenuFromContainer(container).each(primaryMenu => {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, ({primary, triggeringPath}) => {\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      const apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary,\n        repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: (container, _keyInfo) => {\n              layeredState.getPrimary().each(primary => {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: container => {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis,\n        events\n      };\n    };\n    const collapseItem$1 = constant$1('collapse-item');\n\n    const tieredData = (primary, menus, expansions) => ({\n      primary,\n      menus,\n      expansions\n    });\n    const singleData = (name, menu) => ({\n      primary: name,\n      menus: wrap$1(name, menu),\n      expansions: {}\n    });\n    const collapseItem = text => ({\n      value: generate$6(collapseItem$1()),\n      meta: { text }\n    });\n    const tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightOnOpen', HighlightOnOpen.HighlightMenuAndItem),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlightItem'),\n        onHandler('onDehighlightItem'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: (apis, tmenu) => {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: (apis, tmenu) => {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: (apis, tmenu) => {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData,\n        singleData,\n        collapseItem\n      }\n    });\n\n    const makeMenu = (detail, menuSandbox, placementSpec, menuSpec, getBounds) => {\n      const lazySink = () => detail.lazySink(menuSandbox);\n      const layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: () => belowOrAbove(),\n          onRtl: () => belowOrAboveRtl()\n        }\n      } : {};\n      const isFirstTierSubmenu = triggeringPaths => triggeringPaths.length === 2;\n      const getSubmenuLayouts = triggeringPaths => isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightOnOpen: menuSpec.menu.highlightOnOpen,\n        fakeFocus: menuSpec.menu.fakeFocus,\n        onEscape: () => {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(handler => handler(menuSandbox));\n          return Optional.some(true);\n        },\n        onExecute: () => {\n          return Optional.some(true);\n        },\n        onOpenMenu: (tmenu, menu) => {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: (tmenu, item, submenu, triggeringPaths) => {\n          const sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: {\n              type: 'submenu',\n              item,\n              ...getSubmenuLayouts(triggeringPaths)\n            }\n          });\n        },\n        onRepositionMenu: (tmenu, primaryMenu, submenuTriggers) => {\n          const sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, st => {\n            const submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: {\n                type: 'submenu',\n                item: st.triggeringItem,\n                ...submenuLayouts\n              }\n            });\n          });\n        }\n      });\n    };\n    const factory$o = (detail, spec) => {\n      const isPartOfRelated = (sandbox, queryElem) => {\n        const related = detail.getRelated(sandbox);\n        return related.exists(rel => isPartOf$1(rel, queryElem));\n      };\n      const setContent = (sandbox, thing) => {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      const showAt = (sandbox, thing, placementSpec) => {\n        const getBounds = Optional.none;\n        showWithinBounds(sandbox, thing, placementSpec, getBounds);\n      };\n      const showWithinBounds = (sandbox, thing, placementSpec, getBounds) => {\n        const sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, () => Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds()));\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds\n        }));\n      };\n      const showMenuAt = (sandbox, placementSpec, menuSpec) => {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      const showMenuWithinBounds = (sandbox, placementSpec, menuSpec, getBounds) => {\n        const menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu\n        }));\n      };\n      const hide = sandbox => {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      const getContent = sandbox => Sandboxing.getState(sandbox);\n      const reposition = sandbox => {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(state => {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              const sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      const apis = {\n        setContent,\n        showAt,\n        showWithinBounds,\n        showMenuAt,\n        showMenuWithinBounds,\n        hide,\n        getContent,\n        reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: (sandbox, data, queryElem) => {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: sandbox => {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: sandbox => {\n              detail.onShow(sandbox);\n            },\n            onClose: sandbox => {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: {\n              ...receivingChannel$1({\n                isExtraPart: spec.isExtraPart,\n                ...detail.fireDismissalEventInstead.map(fe => ({ fireEventInstead: { event: fe.event } })).getOr({})\n              }),\n              ...receivingChannel({\n                ...detail.fireRepositionEventInstead.map(fe => ({ fireEventInstead: { event: fe.event } })).getOr({}),\n                doReposition: reposition\n              })\n            }\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis\n      };\n    };\n    const InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$o,\n      apis: {\n        showAt: (apis, component, anchor, thing) => {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithinBounds: (apis, component, anchor, thing, bounds) => {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: (apis, component, anchor, menuSpec) => {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: (apis, component, anchor, menuSpec, bounds) => {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: (apis, component) => {\n          apis.hide(component);\n        },\n        isOpen: (apis, component) => apis.isOpen(component),\n        getContent: (apis, component) => apis.getContent(component),\n        setContent: (apis, component, thing) => {\n          apis.setContent(component, thing);\n        },\n        reposition: (apis, component) => {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    const factory$n = detail => {\n      const events = events$a(detail.action);\n      const tag = detail.dom.tag;\n      const lookupAttr = attr => get$g(detail.dom, 'attributes').bind(attrs => get$g(attrs, attr));\n      const getModAttributes = () => {\n        if (tag === 'button') {\n          const type = lookupAttr('type').getOr('button');\n          const roleAttrs = lookupAttr('role').map(role => ({ role })).getOr({});\n          return {\n            type,\n            ...roleAttrs\n          };\n        } else {\n          const role = detail.role.getOr(lookupAttr('role').getOr('button'));\n          return { role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    const Button = single({\n      name: 'Button',\n      factory: factory$n,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option$3('action'),\n        option$3('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    const getAttrs = elem => {\n      const attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, (b, attr) => {\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return {\n            ...b,\n            [attr.name]: attr.value\n          };\n        }\n      }, {});\n    };\n    const getClasses = elem => Array.prototype.slice.call(elem.dom.classList, 0);\n    const fromHtml = html => {\n      const elem = SugarElement.fromHtml(html);\n      const children$1 = children(elem);\n      const attrs = getAttrs(elem);\n      const classes = getClasses(elem);\n      const contents = children$1.length === 0 ? {} : { innerHtml: get$9(elem) };\n      return {\n        tag: name$3(elem),\n        classes,\n        attributes: attrs,\n        ...contents\n      };\n    };\n\n    const record = spec => {\n      const uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      const get = anyInSystem => anyInSystem.getSystem().getByUid(uid).getOrDie();\n      const getOpt = anyInSystem => anyInSystem.getSystem().getByUid(uid).toOptional();\n      const asSpec = () => ({\n        ...spec,\n        uid\n      });\n      return {\n        get,\n        getOpt,\n        asSpec\n      };\n    };\n\n    const {entries, setPrototypeOf, isFrozen, getPrototypeOf, getOwnPropertyDescriptor} = Object;\n    let {freeze, seal, create: create$1} = Object;\n    let {apply, construct} = typeof Reflect !== 'undefined' && Reflect;\n    if (!apply) {\n      apply = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return new Func(...args);\n      };\n    }\n    const arrayForEach = unapply(Array.prototype.forEach);\n    const arrayPop = unapply(Array.prototype.pop);\n    const arrayPush = unapply(Array.prototype.push);\n    const stringToLowerCase = unapply(String.prototype.toLowerCase);\n    const stringToString = unapply(String.prototype.toString);\n    const stringMatch = unapply(String.prototype.match);\n    const stringReplace = unapply(String.prototype.replace);\n    const stringIndexOf = unapply(String.prototype.indexOf);\n    const stringTrim = unapply(String.prototype.trim);\n    const regExpTest = unapply(RegExp.prototype.test);\n    const typeErrorCreate = unconstruct(TypeError);\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply(func, thisArg, args);\n      };\n    }\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n    function addToSet(set, array, transformCaseFunc) {\n      var _transformCaseFunc;\n      transformCaseFunc = (_transformCaseFunc = transformCaseFunc) !== null && _transformCaseFunc !== void 0 ? _transformCaseFunc : stringToLowerCase;\n      if (setPrototypeOf) {\n        setPrototypeOf(set, null);\n      }\n      let l = array.length;\n      while (l--) {\n        let element = array[l];\n        if (typeof element === 'string') {\n          const lcElement = transformCaseFunc(element);\n          if (lcElement !== element) {\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n    function clone(object) {\n      const newObject = create$1(null);\n      for (const [property, value] of entries(object)) {\n        newObject[property] = value;\n      }\n      return newObject;\n    }\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        const desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue(element) {\n        console.warn('fallback value for', element);\n        return null;\n      }\n      return fallbackValue;\n    }\n    const html$1 = freeze([\n      'a',\n      'abbr',\n      'acronym',\n      'address',\n      'area',\n      'article',\n      'aside',\n      'audio',\n      'b',\n      'bdi',\n      'bdo',\n      'big',\n      'blink',\n      'blockquote',\n      'body',\n      'br',\n      'button',\n      'canvas',\n      'caption',\n      'center',\n      'cite',\n      'code',\n      'col',\n      'colgroup',\n      'content',\n      'data',\n      'datalist',\n      'dd',\n      'decorator',\n      'del',\n      'details',\n      'dfn',\n      'dialog',\n      'dir',\n      'div',\n      'dl',\n      'dt',\n      'element',\n      'em',\n      'fieldset',\n      'figcaption',\n      'figure',\n      'font',\n      'footer',\n      'form',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'head',\n      'header',\n      'hgroup',\n      'hr',\n      'html',\n      'i',\n      'img',\n      'input',\n      'ins',\n      'kbd',\n      'label',\n      'legend',\n      'li',\n      'main',\n      'map',\n      'mark',\n      'marquee',\n      'menu',\n      'menuitem',\n      'meter',\n      'nav',\n      'nobr',\n      'ol',\n      'optgroup',\n      'option',\n      'output',\n      'p',\n      'picture',\n      'pre',\n      'progress',\n      'q',\n      'rp',\n      'rt',\n      'ruby',\n      's',\n      'samp',\n      'section',\n      'select',\n      'shadow',\n      'small',\n      'source',\n      'spacer',\n      'span',\n      'strike',\n      'strong',\n      'style',\n      'sub',\n      'summary',\n      'sup',\n      'table',\n      'tbody',\n      'td',\n      'template',\n      'textarea',\n      'tfoot',\n      'th',\n      'thead',\n      'time',\n      'tr',\n      'track',\n      'tt',\n      'u',\n      'ul',\n      'var',\n      'video',\n      'wbr'\n    ]);\n    const svg$1 = freeze([\n      'svg',\n      'a',\n      'altglyph',\n      'altglyphdef',\n      'altglyphitem',\n      'animatecolor',\n      'animatemotion',\n      'animatetransform',\n      'circle',\n      'clippath',\n      'defs',\n      'desc',\n      'ellipse',\n      'filter',\n      'font',\n      'g',\n      'glyph',\n      'glyphref',\n      'hkern',\n      'image',\n      'line',\n      'lineargradient',\n      'marker',\n      'mask',\n      'metadata',\n      'mpath',\n      'path',\n      'pattern',\n      'polygon',\n      'polyline',\n      'radialgradient',\n      'rect',\n      'stop',\n      'style',\n      'switch',\n      'symbol',\n      'text',\n      'textpath',\n      'title',\n      'tref',\n      'tspan',\n      'view',\n      'vkern'\n    ]);\n    const svgFilters = freeze([\n      'feBlend',\n      'feColorMatrix',\n      'feComponentTransfer',\n      'feComposite',\n      'feConvolveMatrix',\n      'feDiffuseLighting',\n      'feDisplacementMap',\n      'feDistantLight',\n      'feDropShadow',\n      'feFlood',\n      'feFuncA',\n      'feFuncB',\n      'feFuncG',\n      'feFuncR',\n      'feGaussianBlur',\n      'feImage',\n      'feMerge',\n      'feMergeNode',\n      'feMorphology',\n      'feOffset',\n      'fePointLight',\n      'feSpecularLighting',\n      'feSpotLight',\n      'feTile',\n      'feTurbulence'\n    ]);\n    const svgDisallowed = freeze([\n      'animate',\n      'color-profile',\n      'cursor',\n      'discard',\n      'font-face',\n      'font-face-format',\n      'font-face-name',\n      'font-face-src',\n      'font-face-uri',\n      'foreignobject',\n      'hatch',\n      'hatchpath',\n      'mesh',\n      'meshgradient',\n      'meshpatch',\n      'meshrow',\n      'missing-glyph',\n      'script',\n      'set',\n      'solidcolor',\n      'unknown',\n      'use'\n    ]);\n    const mathMl$1 = freeze([\n      'math',\n      'menclose',\n      'merror',\n      'mfenced',\n      'mfrac',\n      'mglyph',\n      'mi',\n      'mlabeledtr',\n      'mmultiscripts',\n      'mn',\n      'mo',\n      'mover',\n      'mpadded',\n      'mphantom',\n      'mroot',\n      'mrow',\n      'ms',\n      'mspace',\n      'msqrt',\n      'mstyle',\n      'msub',\n      'msup',\n      'msubsup',\n      'mtable',\n      'mtd',\n      'mtext',\n      'mtr',\n      'munder',\n      'munderover',\n      'mprescripts'\n    ]);\n    const mathMlDisallowed = freeze([\n      'maction',\n      'maligngroup',\n      'malignmark',\n      'mlongdiv',\n      'mscarries',\n      'mscarry',\n      'msgroup',\n      'mstack',\n      'msline',\n      'msrow',\n      'semantics',\n      'annotation',\n      'annotation-xml',\n      'mprescripts',\n      'none'\n    ]);\n    const text$1 = freeze(['#text']);\n    const html = freeze([\n      'accept',\n      'action',\n      'align',\n      'alt',\n      'autocapitalize',\n      'autocomplete',\n      'autopictureinpicture',\n      'autoplay',\n      'background',\n      'bgcolor',\n      'border',\n      'capture',\n      'cellpadding',\n      'cellspacing',\n      'checked',\n      'cite',\n      'class',\n      'clear',\n      'color',\n      'cols',\n      'colspan',\n      'controls',\n      'controlslist',\n      'coords',\n      'crossorigin',\n      'datetime',\n      'decoding',\n      'default',\n      'dir',\n      'disabled',\n      'disablepictureinpicture',\n      'disableremoteplayback',\n      'download',\n      'draggable',\n      'enctype',\n      'enterkeyhint',\n      'face',\n      'for',\n      'headers',\n      'height',\n      'hidden',\n      'high',\n      'href',\n      'hreflang',\n      'id',\n      'inputmode',\n      'integrity',\n      'ismap',\n      'kind',\n      'label',\n      'lang',\n      'list',\n      'loading',\n      'loop',\n      'low',\n      'max',\n      'maxlength',\n      'media',\n      'method',\n      'min',\n      'minlength',\n      'multiple',\n      'muted',\n      'name',\n      'nonce',\n      'noshade',\n      'novalidate',\n      'nowrap',\n      'open',\n      'optimum',\n      'pattern',\n      'placeholder',\n      'playsinline',\n      'poster',\n      'preload',\n      'pubdate',\n      'radiogroup',\n      'readonly',\n      'rel',\n      'required',\n      'rev',\n      'reversed',\n      'role',\n      'rows',\n      'rowspan',\n      'spellcheck',\n      'scope',\n      'selected',\n      'shape',\n      'size',\n      'sizes',\n      'span',\n      'srclang',\n      'start',\n      'src',\n      'srcset',\n      'step',\n      'style',\n      'summary',\n      'tabindex',\n      'title',\n      'translate',\n      'type',\n      'usemap',\n      'valign',\n      'value',\n      'width',\n      'xmlns',\n      'slot'\n    ]);\n    const svg = freeze([\n      'accent-height',\n      'accumulate',\n      'additive',\n      'alignment-baseline',\n      'ascent',\n      'attributename',\n      'attributetype',\n      'azimuth',\n      'basefrequency',\n      'baseline-shift',\n      'begin',\n      'bias',\n      'by',\n      'class',\n      'clip',\n      'clippathunits',\n      'clip-path',\n      'clip-rule',\n      'color',\n      'color-interpolation',\n      'color-interpolation-filters',\n      'color-profile',\n      'color-rendering',\n      'cx',\n      'cy',\n      'd',\n      'dx',\n      'dy',\n      'diffuseconstant',\n      'direction',\n      'display',\n      'divisor',\n      'dur',\n      'edgemode',\n      'elevation',\n      'end',\n      'fill',\n      'fill-opacity',\n      'fill-rule',\n      'filter',\n      'filterunits',\n      'flood-color',\n      'flood-opacity',\n      'font-family',\n      'font-size',\n      'font-size-adjust',\n      'font-stretch',\n      'font-style',\n      'font-variant',\n      'font-weight',\n      'fx',\n      'fy',\n      'g1',\n      'g2',\n      'glyph-name',\n      'glyphref',\n      'gradientunits',\n      'gradienttransform',\n      'height',\n      'href',\n      'id',\n      'image-rendering',\n      'in',\n      'in2',\n      'k',\n      'k1',\n      'k2',\n      'k3',\n      'k4',\n      'kerning',\n      'keypoints',\n      'keysplines',\n      'keytimes',\n      'lang',\n      'lengthadjust',\n      'letter-spacing',\n      'kernelmatrix',\n      'kernelunitlength',\n      'lighting-color',\n      'local',\n      'marker-end',\n      'marker-mid',\n      'marker-start',\n      'markerheight',\n      'markerunits',\n      'markerwidth',\n      'maskcontentunits',\n      'maskunits',\n      'max',\n      'mask',\n      'media',\n      'method',\n      'mode',\n      'min',\n      'name',\n      'numoctaves',\n      'offset',\n      'operator',\n      'opacity',\n      'order',\n      'orient',\n      'orientation',\n      'origin',\n      'overflow',\n      'paint-order',\n      'path',\n      'pathlength',\n      'patterncontentunits',\n      'patterntransform',\n      'patternunits',\n      'points',\n      'preservealpha',\n      'preserveaspectratio',\n      'primitiveunits',\n      'r',\n      'rx',\n      'ry',\n      'radius',\n      'refx',\n      'refy',\n      'repeatcount',\n      'repeatdur',\n      'restart',\n      'result',\n      'rotate',\n      'scale',\n      'seed',\n      'shape-rendering',\n      'specularconstant',\n      'specularexponent',\n      'spreadmethod',\n      'startoffset',\n      'stddeviation',\n      'stitchtiles',\n      'stop-color',\n      'stop-opacity',\n      'stroke-dasharray',\n      'stroke-dashoffset',\n      'stroke-linecap',\n      'stroke-linejoin',\n      'stroke-miterlimit',\n      'stroke-opacity',\n      'stroke',\n      'stroke-width',\n      'style',\n      'surfacescale',\n      'systemlanguage',\n      'tabindex',\n      'targetx',\n      'targety',\n      'transform',\n      'transform-origin',\n      'text-anchor',\n      'text-decoration',\n      'text-rendering',\n      'textlength',\n      'type',\n      'u1',\n      'u2',\n      'unicode',\n      'values',\n      'viewbox',\n      'visibility',\n      'version',\n      'vert-adv-y',\n      'vert-origin-x',\n      'vert-origin-y',\n      'width',\n      'word-spacing',\n      'wrap',\n      'writing-mode',\n      'xchannelselector',\n      'ychannelselector',\n      'x',\n      'x1',\n      'x2',\n      'xmlns',\n      'y',\n      'y1',\n      'y2',\n      'z',\n      'zoomandpan'\n    ]);\n    const mathMl = freeze([\n      'accent',\n      'accentunder',\n      'align',\n      'bevelled',\n      'close',\n      'columnsalign',\n      'columnlines',\n      'columnspan',\n      'denomalign',\n      'depth',\n      'dir',\n      'display',\n      'displaystyle',\n      'encoding',\n      'fence',\n      'frame',\n      'height',\n      'href',\n      'id',\n      'largeop',\n      'length',\n      'linethickness',\n      'lspace',\n      'lquote',\n      'mathbackground',\n      'mathcolor',\n      'mathsize',\n      'mathvariant',\n      'maxsize',\n      'minsize',\n      'movablelimits',\n      'notation',\n      'numalign',\n      'open',\n      'rowalign',\n      'rowlines',\n      'rowspacing',\n      'rowspan',\n      'rspace',\n      'rquote',\n      'scriptlevel',\n      'scriptminsize',\n      'scriptsizemultiplier',\n      'selection',\n      'separator',\n      'separators',\n      'stretchy',\n      'subscriptshift',\n      'supscriptshift',\n      'symmetric',\n      'voffset',\n      'width',\n      'xmlns'\n    ]);\n    const xml = freeze([\n      'xlink:href',\n      'xml:id',\n      'xlink:title',\n      'xml:space',\n      'xmlns:xlink'\n    ]);\n    const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\n    const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n    const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);\n    const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\n    const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);\n    const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);\n    const DOCTYPE_NAME = seal(/^html$/i);\n    var EXPRESSIONS = Object.freeze({\n      __proto__: null,\n      MUSTACHE_EXPR: MUSTACHE_EXPR,\n      ERB_EXPR: ERB_EXPR,\n      TMPLIT_EXPR: TMPLIT_EXPR,\n      DATA_ATTR: DATA_ATTR,\n      ARIA_ATTR: ARIA_ATTR,\n      IS_ALLOWED_URI: IS_ALLOWED_URI,\n      IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE: ATTR_WHITESPACE,\n      DOCTYPE_NAME: DOCTYPE_NAME\n    });\n    const getGlobal = () => typeof window === 'undefined' ? null : window;\n    const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n      if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n      let suffix = null;\n      const ATTR_NAME = 'data-tt-policy-suffix';\n      if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n        suffix = purifyHostElement.getAttribute(ATTR_NAME);\n      }\n      const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML(html) {\n            return html;\n          },\n          createScriptURL(scriptUrl) {\n            return scriptUrl;\n          }\n        });\n      } catch (_) {\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      const DOMPurify = root => createDOMPurify(root);\n      DOMPurify.version = '3.0.5';\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== 9) {\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      const originalDocument = window.document;\n      const currentScript = originalDocument.currentScript;\n      let {document} = window;\n      const {DocumentFragment, HTMLTemplateElement, Node, Element, NodeFilter, NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap, HTMLFormElement, DOMParser, trustedTypes} = window;\n      const ElementPrototype = Element.prototype;\n      const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n      if (typeof HTMLTemplateElement === 'function') {\n        const template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      let trustedTypesPolicy;\n      let emptyHTML = '';\n      const {implementation, createNodeIterator, createDocumentFragment, getElementsByTagName} = document;\n      const {importNode} = originalDocument;\n      let hooks = {};\n      DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n      const {MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR, DATA_ATTR, ARIA_ATTR, IS_SCRIPT_OR_DATA, ATTR_WHITESPACE} = EXPRESSIONS;\n      let {IS_ALLOWED_URI: IS_ALLOWED_URI$1} = EXPRESSIONS;\n      let ALLOWED_TAGS = null;\n      const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n        ...html$1,\n        ...svg$1,\n        ...svgFilters,\n        ...mathMl$1,\n        ...text$1\n      ]);\n      let ALLOWED_ATTR = null;\n      const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n        ...html,\n        ...svg,\n        ...mathMl,\n        ...xml\n      ]);\n      let CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n      let FORBID_TAGS = null;\n      let FORBID_ATTR = null;\n      let ALLOW_ARIA_ATTR = true;\n      let ALLOW_DATA_ATTR = true;\n      let ALLOW_UNKNOWN_PROTOCOLS = false;\n      let ALLOW_SELF_CLOSE_IN_ATTR = true;\n      let SAFE_FOR_TEMPLATES = false;\n      let WHOLE_DOCUMENT = false;\n      let SET_CONFIG = false;\n      let FORCE_BODY = false;\n      let RETURN_DOM = false;\n      let RETURN_DOM_FRAGMENT = false;\n      let RETURN_TRUSTED_TYPE = false;\n      let SANITIZE_DOM = true;\n      let SANITIZE_NAMED_PROPS = false;\n      const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n      let KEEP_CONTENT = true;\n      let IN_PLACE = false;\n      let USE_PROFILES = {};\n      let FORBID_CONTENTS = null;\n      const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n        'annotation-xml',\n        'audio',\n        'colgroup',\n        'desc',\n        'foreignobject',\n        'head',\n        'iframe',\n        'math',\n        'mi',\n        'mn',\n        'mo',\n        'ms',\n        'mtext',\n        'noembed',\n        'noframes',\n        'noscript',\n        'plaintext',\n        'script',\n        'style',\n        'svg',\n        'template',\n        'thead',\n        'title',\n        'video',\n        'xmp'\n      ]);\n      let DATA_URI_TAGS = null;\n      const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n        'audio',\n        'video',\n        'img',\n        'source',\n        'image',\n        'track'\n      ]);\n      let URI_SAFE_ATTRIBUTES = null;\n      const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n        'alt',\n        'class',\n        'for',\n        'id',\n        'label',\n        'name',\n        'pattern',\n        'placeholder',\n        'role',\n        'summary',\n        'title',\n        'value',\n        'style',\n        'xmlns'\n      ]);\n      const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      let NAMESPACE = HTML_NAMESPACE;\n      let IS_EMPTY_INPUT = false;\n      let ALLOWED_NAMESPACES = null;\n      const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [\n        MATHML_NAMESPACE,\n        SVG_NAMESPACE,\n        HTML_NAMESPACE\n      ], stringToString);\n      let PARSER_MEDIA_TYPE;\n      const SUPPORTED_PARSER_MEDIA_TYPES = [\n        'application/xhtml+xml',\n        'text/html'\n      ];\n      const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      let transformCaseFunc;\n      let CONFIG = null;\n      const formElement = document.createElement('form');\n      const isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n      const _parseConfig = function _parseConfig(cfg) {\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n        if (!cfg || typeof cfg !== 'object') {\n          cfg = {};\n        }\n        cfg = clone(cfg);\n        PARSER_MEDIA_TYPE = SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n        ALLOWED_NAMESPACES = 'ALLOWED_NAMESPACES' in cfg ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n        URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n        USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n        ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false;\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n        RETURN_DOM = cfg.RETURN_DOM || false;\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n        FORCE_BODY = cfg.FORCE_BODY || false;\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n        SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false;\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n        IN_PLACE = cfg.IN_PLACE || false;\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, [...text$1]);\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n        }\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, [\n            'html',\n            'head',\n            'body'\n          ]);\n        }\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (cfg.TRUSTED_TYPES_POLICY) {\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n          }\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n          }\n          trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        } else {\n          if (trustedTypesPolicy === undefined) {\n            trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n          }\n          if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n            emptyHTML = trustedTypesPolicy.createHTML('');\n          }\n        }\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n        'mi',\n        'mo',\n        'mn',\n        'ms',\n        'mtext'\n      ]);\n      const HTML_INTEGRATION_POINTS = addToSet({}, [\n        'foreignobject',\n        'desc',\n        'title',\n        'annotation-xml'\n      ]);\n      const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script'\n      ]);\n      const ALL_SVG_TAGS = addToSet({}, svg$1);\n      addToSet(ALL_SVG_TAGS, svgFilters);\n      addToSet(ALL_SVG_TAGS, svgDisallowed);\n      const ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n      addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n      const _checkValidNamespace = function _checkValidNamespace(element) {\n        let parent = getParentNode(element);\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        const tagName = stringToLowerCase(element.tagName);\n        const parentTagName = stringToLowerCase(parent.tagName);\n        if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return false;\n        }\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return true;\n        }\n        return false;\n      };\n      const _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, { element: node });\n        try {\n          node.parentNode.removeChild(node);\n        } catch (_) {\n          node.remove();\n        }\n      };\n      const _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {\n            }\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {\n            }\n          }\n        }\n      };\n      const _initDocument = function _initDocument(dirty) {\n        let doc;\n        let leadingWhitespace;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {\n          }\n        }\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n          } catch (_) {\n          }\n        }\n        const body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n      const _createIterator = function _createIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n      };\n      const _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n      };\n      const _isNode = function _isNode(object) {\n        return typeof Node === 'object' ? object instanceof Node : object && typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n      };\n      const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], hook => {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n      const _sanitizeElements = function _sanitizeElements(currentNode) {\n        let content;\n        _executeHook('beforeSanitizeElements', currentNode, null);\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        const tagName = transformCaseFunc(currentNode.nodeName);\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName))\n              return false;\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))\n              return false;\n          }\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              const childCount = childNodes.length;\n              for (let i = childCount - 1; i >= 0; --i) {\n                parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n          content = currentNode.textContent;\n          content = stringReplace(content, MUSTACHE_EXPR, ' ');\n          content = stringReplace(content, ERB_EXPR, ' ');\n          content = stringReplace(content, TMPLIT_EXPR, ' ');\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n            currentNode.textContent = content;\n          }\n        }\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n      const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName));\n        else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName));\n        else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (_basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));\n          else {\n            return false;\n          }\n        } else if (URI_SAFE_ATTRIBUTES[lcName]);\n        else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, '')));\n        else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]);\n        else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, '')));\n        else if (value) {\n          return false;\n        } else ;\n        return true;\n      };\n      const _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n        return tagName.indexOf('-') > 0;\n      };\n      const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        let attr;\n        let value;\n        let lcName;\n        let l;\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        const {attributes} = currentNode;\n        if (!attributes) {\n          return;\n        }\n        const hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n        while (l--) {\n          attr = attributes[l];\n          const {name, namespaceURI} = attr;\n          value = name === 'value' ? attr.value : stringTrim(attr.value);\n          const initValue = value;\n          lcName = transformCaseFunc(name);\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined;\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n          if (!hookEvent.keepAttr) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SAFE_FOR_TEMPLATES) {\n            value = stringReplace(value, MUSTACHE_EXPR, ' ');\n            value = stringReplace(value, ERB_EXPR, ' ');\n            value = stringReplace(value, TMPLIT_EXPR, ' ');\n          }\n          const lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n            _removeAttribute(name, currentNode);\n            value = SANITIZE_NAMED_PROPS_PREFIX + value;\n          }\n          if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n            if (namespaceURI);\n            else {\n              switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n              case 'TrustedHTML': {\n                  value = trustedTypesPolicy.createHTML(value);\n                  break;\n                }\n              case 'TrustedScriptURL': {\n                  value = trustedTypesPolicy.createScriptURL(value);\n                  break;\n                }\n              }\n            }\n          }\n          if (value !== initValue) {\n            try {\n              if (namespaceURI) {\n                currentNode.setAttributeNS(namespaceURI, name, value);\n              } else {\n                currentNode.setAttribute(name, value);\n              }\n            } catch (_) {\n              _removeAttribute(name, currentNode);\n            }\n          }\n        }\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n      const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        let shadowNode;\n        const shadowIterator = _createIterator(fragment);\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n          _sanitizeAttributes(shadowNode);\n        }\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n      DOMPurify.sanitize = function (dirty) {\n        let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        let body;\n        let importedNode;\n        let currentNode;\n        let returnNode;\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString === 'function') {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          } else {\n            throw typeErrorCreate('toString is not a function');\n          }\n        }\n        if (!DOMPurify.isSupported) {\n          return dirty;\n        }\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n        DOMPurify.removed = [];\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          if (dirty.nodeName) {\n            const tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            body.appendChild(importedNode);\n          }\n        } else {\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n          body = _initDocument(dirty);\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n        const nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n        while (currentNode = nodeIterator.nextNode()) {\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n          _sanitizeAttributes(currentNode);\n        }\n        if (IN_PLACE) {\n          return dirty;\n        }\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');\n          serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');\n          serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR, ' ');\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n      DOMPurify.setConfig = function (cfg) {\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        const lcTag = transformCaseFunc(tag);\n        const lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    const sanitizeHtmlString = html => purify().sanitize(html);\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    const rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    const defaultIconName = 'temporary-placeholder';\n    const defaultIcon = icons => () => get$g(icons, defaultIconName).getOr('!not found!');\n    const getIconName = (name, icons) => {\n      const lcName = name.toLowerCase();\n      if (global$8.isRtl()) {\n        const rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    const lookupIcon = (name, icons) => get$g(icons, getIconName(name, icons));\n    const get$2 = (name, iconProvider) => {\n      const icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    const getOr = (name, iconProvider, fallbackIcon) => {\n      const icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    const needsRtlTransform = iconName => global$8.isRtl() ? has$2(rtlTransform, iconName) : false;\n    const addFocusableBehaviour = () => config('add-focusable', [runOnAttached(comp => {\n        child(comp.element, 'svg').each(svg => set$9(svg, 'focusable', 'false'));\n      })]);\n    const renderIcon$3 = (spec, iconName, icons, fallbackIcon) => {\n      var _a, _b;\n      const rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      const iconHtml = get$g(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1([\n          ...(_b = spec.behaviours) !== null && _b !== void 0 ? _b : [],\n          addFocusableBehaviour()\n        ])\n      };\n    };\n    const render$3 = (iconName, spec, iconProvider, fallbackIcon = Optional.none()) => renderIcon$3(spec, iconName, iconProvider(), fallbackIcon);\n    const renderFirst = (iconNames, spec, iconProvider) => {\n      const icons = iconProvider();\n      const iconName = find$5(iconNames, name => has$2(icons, getIconName(name, icons)));\n      return renderIcon$3(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    const notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    const factory$m = detail => {\n      const memBannerText = record({\n        dom: fromHtml(`<p>${ sanitizeHtmlString(detail.translationProvider(detail.text)) }</p>`),\n        behaviours: derive$1([Replacing.config({})])\n      });\n      const renderPercentBar = percent => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-bar'],\n          styles: { width: `${ percent }%` }\n        }\n      });\n      const renderPercentText = percent => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-text'],\n          innerHtml: `${ percent }%`\n        }\n      });\n      const memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      const updateProgress = (comp, percent) => {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(progress => {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      const updateText = (comp, text) => {\n        if (comp.getSystem().isConnected()) {\n          const banner = memBannerText.get(comp);\n          Replacing.set(banner, [text$2(text)]);\n        }\n      };\n      const apis = {\n        updateProgress,\n        updateText\n      };\n      const iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(level => Optional.from(notificationIconMap[level])).toArray()\n      ]);\n      const memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'span',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: comp => {\n          detail.onAction(comp);\n        }\n      }));\n      const notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      const notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      const components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(level => [\n            'tox-notification',\n            'tox-notification--in',\n            `tox-notification--${ level }`\n          ]).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), comp => {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat([memButton.asSpec()]),\n        apis\n      };\n    };\n    const Notification = single({\n      name: 'Notification',\n      factory: factory$m,\n      configFields: [\n        option$3('level'),\n        required$1('progress'),\n        option$3('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider')\n      ],\n      apis: {\n        updateProgress: (apis, comp, percent) => {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: (apis, comp, text) => {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    var NotificationManagerImpl = (editor, extras, uiMothership) => {\n      const sharedBackstage = extras.backstage.shared;\n      const getBounds = () => {\n        const contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n        const win$1 = win();\n        const x = clamp(win$1.x, contentArea.x, contentArea.right);\n        const y = clamp(win$1.y, contentArea.y, contentArea.bottom);\n        const right = Math.max(contentArea.right, win$1.right);\n        const bottom = Math.max(contentArea.bottom, win$1.bottom);\n        return Optional.some(bounds(x, y, right - x, bottom - y));\n      };\n      const open = (settings, closeCallback) => {\n        const close = () => {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        const notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: settings.icon,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        const notificationWrapper = build$1(InlineView.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {},\n          ...sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} }\n        }));\n        uiMothership.add(notificationWrapper);\n        if (isNumber(settings.timeout) && settings.timeout > 0) {\n          global$9.setEditorTimeout(editor, () => {\n            close();\n          }, settings.timeout);\n        }\n        const reposition = () => {\n          const notificationSpec = premade(notification);\n          const anchorOverrides = { maxHeightFunction: expandable$1() };\n          const allNotifications = editor.notificationManager.getNotifications();\n          if (allNotifications[0] === thisNotification) {\n            const anchor = {\n              ...sharedBackstage.anchors.banner(),\n              overrides: anchorOverrides\n            };\n            InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor }, getBounds);\n          } else {\n            indexOf(allNotifications, thisNotification).each(idx => {\n              const previousNotification = allNotifications[idx - 1].getEl();\n              const nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(previousNotification)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: () => [south$2],\n                  onLtr: () => [south$2]\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            });\n          }\n        };\n        const thisNotification = {\n          close,\n          reposition,\n          text: nuText => {\n            Notification.updateText(notification, nuText);\n          },\n          settings,\n          getEl: () => notification.element.dom,\n          progressBar: {\n            value: percent => {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n        return thisNotification;\n      };\n      const close = notification => {\n        notification.close();\n      };\n      const getArgs = notification => {\n        return notification.settings;\n      };\n      return {\n        open,\n        close,\n        getArgs\n      };\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var ToolbarMode$1;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode$1 || (ToolbarMode$1 = {})));\n    var ToolbarLocation$1;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation$1 || (ToolbarLocation$1 = {})));\n    const option$2 = name => editor => editor.options.get(name);\n    const wrapOptional = fn => editor => Optional.from(fn(editor));\n    const register$e = editor => {\n      const isPhone = global$5.deviceType.isPhone();\n      const isMobile = global$5.deviceType.isTablet() || isPhone;\n      const registerOption = editor.options.register;\n      const stringOrFalseProcessor = value => isString(value) || value === false;\n      const stringOrNumberProcessor = value => isString(value) || isNumber(value);\n      registerOption('skin', {\n        processor: value => isString(value) || value === false,\n        default: 'oxide'\n      });\n      registerOption('skin_url', { processor: 'string' });\n      registerOption('height', {\n        processor: stringOrNumberProcessor,\n        default: Math.max(editor.getElement().offsetHeight, 400)\n      });\n      registerOption('width', {\n        processor: stringOrNumberProcessor,\n        default: global$7.DOM.getStyle(editor.getElement(), 'width')\n      });\n      registerOption('min_height', {\n        processor: 'number',\n        default: 100\n      });\n      registerOption('min_width', { processor: 'number' });\n      registerOption('max_height', { processor: 'number' });\n      registerOption('max_width', { processor: 'number' });\n      registerOption('style_formats', { processor: 'object[]' });\n      registerOption('style_formats_merge', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('style_formats_autohide', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('line_height_formats', {\n        processor: 'string',\n        default: '1 1.1 1.2 1.3 1.4 1.5 2'\n      });\n      registerOption('font_family_formats', {\n        processor: 'string',\n        default: 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats'\n      });\n      registerOption('font_size_formats', {\n        processor: 'string',\n        default: '8pt 10pt 12pt 14pt 18pt 24pt 36pt'\n      });\n      registerOption('font_size_input_default_unit', {\n        processor: 'string',\n        default: 'pt'\n      });\n      registerOption('block_formats', {\n        processor: 'string',\n        default: 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre'\n      });\n      registerOption('content_langs', { processor: 'object[]' });\n      registerOption('removed_menuitems', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('menubar', {\n        processor: value => isString(value) || isBoolean(value),\n        default: !isPhone\n      });\n      registerOption('menu', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('toolbar', {\n        processor: value => {\n          if (isBoolean(value) || isString(value) || isArray(value)) {\n            return {\n              value,\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a boolean, string or array.'\n            };\n          }\n        },\n        default: true\n      });\n      range$2(9, num => {\n        registerOption('toolbar' + (num + 1), { processor: 'string' });\n      });\n      registerOption('toolbar_mode', {\n        processor: 'string',\n        default: isMobile ? 'scrolling' : 'floating'\n      });\n      registerOption('toolbar_groups', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('toolbar_location', {\n        processor: 'string',\n        default: ToolbarLocation$1.auto\n      });\n      registerOption('toolbar_persist', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('toolbar_sticky', {\n        processor: 'boolean',\n        default: editor.inline\n      });\n      registerOption('toolbar_sticky_offset', {\n        processor: 'number',\n        default: 0\n      });\n      registerOption('fixed_toolbar_container', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('fixed_toolbar_container_target', { processor: 'object' });\n      registerOption('ui_mode', {\n        processor: 'string',\n        default: 'combined'\n      });\n      registerOption('file_picker_callback', { processor: 'function' });\n      registerOption('file_picker_validator_handler', { processor: 'function' });\n      registerOption('file_picker_types', { processor: 'string' });\n      registerOption('typeahead_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('anchor_top', {\n        processor: stringOrFalseProcessor,\n        default: '#top'\n      });\n      registerOption('anchor_bottom', {\n        processor: stringOrFalseProcessor,\n        default: '#bottom'\n      });\n      registerOption('draggable_modal', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('statusbar', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('elementpath', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('branding', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('promotion', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('resize', {\n        processor: value => value === 'both' || isBoolean(value),\n        default: !global$5.deviceType.isTouch()\n      });\n      registerOption('sidebar_show', { processor: 'string' });\n      registerOption('help_accessibility', {\n        processor: 'boolean',\n        default: editor.hasPlugin('help')\n      });\n      registerOption('default_font_stack', {\n        processor: 'string[]',\n        default: []\n      });\n    };\n    const isReadOnly = option$2('readonly');\n    const getHeightOption = option$2('height');\n    const getWidthOption = option$2('width');\n    const getMinWidthOption = wrapOptional(option$2('min_width'));\n    const getMinHeightOption = wrapOptional(option$2('min_height'));\n    const getMaxWidthOption = wrapOptional(option$2('max_width'));\n    const getMaxHeightOption = wrapOptional(option$2('max_height'));\n    const getUserStyleFormats = wrapOptional(option$2('style_formats'));\n    const shouldMergeStyleFormats = option$2('style_formats_merge');\n    const shouldAutoHideStyleFormats = option$2('style_formats_autohide');\n    const getContentLanguages = option$2('content_langs');\n    const getRemovedMenuItems = option$2('removed_menuitems');\n    const getToolbarMode = option$2('toolbar_mode');\n    const getToolbarGroups = option$2('toolbar_groups');\n    const getToolbarLocation = option$2('toolbar_location');\n    const fixedContainerSelector = option$2('fixed_toolbar_container');\n    const fixedToolbarContainerTarget = option$2('fixed_toolbar_container_target');\n    const isToolbarPersist = option$2('toolbar_persist');\n    const getStickyToolbarOffset = option$2('toolbar_sticky_offset');\n    const getMenubar = option$2('menubar');\n    const getToolbar = option$2('toolbar');\n    const getFilePickerCallback = option$2('file_picker_callback');\n    const getFilePickerValidatorHandler = option$2('file_picker_validator_handler');\n    const getFontSizeInputDefaultUnit = option$2('font_size_input_default_unit');\n    const getFilePickerTypes = option$2('file_picker_types');\n    const useTypeaheadUrls = option$2('typeahead_urls');\n    const getAnchorTop = option$2('anchor_top');\n    const getAnchorBottom = option$2('anchor_bottom');\n    const isDraggableModal$1 = option$2('draggable_modal');\n    const useStatusBar = option$2('statusbar');\n    const useElementPath = option$2('elementpath');\n    const useBranding = option$2('branding');\n    const getResize = option$2('resize');\n    const getPasteAsText = option$2('paste_as_text');\n    const getSidebarShow = option$2('sidebar_show');\n    const promotionEnabled = option$2('promotion');\n    const useHelpAccessibility = option$2('help_accessibility');\n    const getDefaultFontStack = option$2('default_font_stack');\n    const isSkinDisabled = editor => editor.options.get('skin') === false;\n    const isMenubarEnabled = editor => editor.options.get('menubar') !== false;\n    const getSkinUrl = editor => {\n      const skinUrl = editor.options.get('skin_url');\n      if (isSkinDisabled(editor)) {\n        return skinUrl;\n      } else {\n        if (skinUrl) {\n          return editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          const skin = editor.options.get('skin');\n          return global$6.baseURL + '/skins/ui/' + skin;\n        }\n      }\n    };\n    const getSkinUrlOption = editor => Optional.from(editor.options.get('skin_url'));\n    const getLineHeightFormats = editor => editor.options.get('line_height_formats').split(' ');\n    const isToolbarEnabled = editor => {\n      const toolbar = getToolbar(editor);\n      const isToolbarString = isString(toolbar);\n      const isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || toolbar === true);\n    };\n    const getMultipleToolbarsOption = editor => {\n      const toolbars = range$2(9, num => editor.options.get('toolbar' + (num + 1)));\n      const toolbarArray = filter$2(toolbars, isString);\n      return someIf(toolbarArray.length > 0, toolbarArray);\n    };\n    const isMultipleToolbars = editor => getMultipleToolbarsOption(editor).fold(() => {\n      const toolbar = getToolbar(editor);\n      return isArrayOf(toolbar, isString) && toolbar.length > 0;\n    }, always);\n    const isToolbarLocationBottom = editor => getToolbarLocation(editor) === ToolbarLocation$1.bottom;\n    const fixedContainerTarget = editor => {\n      var _a;\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      const selector = (_a = fixedContainerSelector(editor)) !== null && _a !== void 0 ? _a : '';\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      const element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    const useFixedContainer = editor => editor.inline && fixedContainerTarget(editor).isSome();\n    const getUiContainer = editor => {\n      const fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(() => getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement()))));\n    };\n    const isDistractionFree = editor => editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    const isStickyToolbar = editor => {\n      const isStickyToolbar = editor.options.get('toolbar_sticky');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    const isSplitUiMode = editor => !useFixedContainer(editor) && editor.options.get('ui_mode') === 'split';\n    const getMenus = editor => {\n      const menu = editor.options.get('menu');\n      return map$1(menu, menu => ({\n        ...menu,\n        items: menu.items\n      }));\n    };\n\n    var Options = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        get ToolbarMode () { return ToolbarMode$1; },\n        get ToolbarLocation () { return ToolbarLocation$1; },\n        register: register$e,\n        getSkinUrl: getSkinUrl,\n        getSkinUrlOption: getSkinUrlOption,\n        isReadOnly: isReadOnly,\n        isSkinDisabled: isSkinDisabled,\n        getHeightOption: getHeightOption,\n        getWidthOption: getWidthOption,\n        getMinWidthOption: getMinWidthOption,\n        getMinHeightOption: getMinHeightOption,\n        getMaxWidthOption: getMaxWidthOption,\n        getMaxHeightOption: getMaxHeightOption,\n        getUserStyleFormats: getUserStyleFormats,\n        shouldMergeStyleFormats: shouldMergeStyleFormats,\n        shouldAutoHideStyleFormats: shouldAutoHideStyleFormats,\n        getLineHeightFormats: getLineHeightFormats,\n        getContentLanguages: getContentLanguages,\n        getRemovedMenuItems: getRemovedMenuItems,\n        isMenubarEnabled: isMenubarEnabled,\n        isMultipleToolbars: isMultipleToolbars,\n        isToolbarEnabled: isToolbarEnabled,\n        isToolbarPersist: isToolbarPersist,\n        getMultipleToolbarsOption: getMultipleToolbarsOption,\n        getUiContainer: getUiContainer,\n        useFixedContainer: useFixedContainer,\n        isSplitUiMode: isSplitUiMode,\n        getToolbarMode: getToolbarMode,\n        isDraggableModal: isDraggableModal$1,\n        isDistractionFree: isDistractionFree,\n        isStickyToolbar: isStickyToolbar,\n        getStickyToolbarOffset: getStickyToolbarOffset,\n        getToolbarLocation: getToolbarLocation,\n        isToolbarLocationBottom: isToolbarLocationBottom,\n        getToolbarGroups: getToolbarGroups,\n        getMenus: getMenus,\n        getMenubar: getMenubar,\n        getToolbar: getToolbar,\n        getFilePickerCallback: getFilePickerCallback,\n        getFilePickerTypes: getFilePickerTypes,\n        useTypeaheadUrls: useTypeaheadUrls,\n        getAnchorTop: getAnchorTop,\n        getAnchorBottom: getAnchorBottom,\n        getFilePickerValidatorHandler: getFilePickerValidatorHandler,\n        getFontSizeInputDefaultUnit: getFontSizeInputDefaultUnit,\n        useStatusBar: useStatusBar,\n        useElementPath: useElementPath,\n        promotionEnabled: promotionEnabled,\n        useBranding: useBranding,\n        getResize: getResize,\n        getPasteAsText: getPasteAsText,\n        getSidebarShow: getSidebarShow,\n        useHelpAccessibility: useHelpAccessibility,\n        getDefaultFontStack: getDefaultFontStack\n    });\n\n    const setup$e = (api, editor) => {\n      const redirectKeyToItem = (item, e) => {\n        emitWith(item, keydown(), { raw: e });\n      };\n      const getItem = () => api.getMenu().bind(Highlighting.getHighlighted);\n      editor.on('keydown', e => {\n        const keyCode = e.which;\n        if (!api.isActive()) {\n          return;\n        }\n        if (api.isMenuOpen()) {\n          if (keyCode === 13) {\n            getItem().each(emitExecute);\n            e.preventDefault();\n          } else if (keyCode === 40) {\n            getItem().fold(() => {\n              api.getMenu().each(Highlighting.highlightFirst);\n            }, item => {\n              redirectKeyToItem(item, e);\n            });\n            e.preventDefault();\n            e.stopImmediatePropagation();\n          } else if (keyCode === 37 || keyCode === 38 || keyCode === 39) {\n            getItem().each(item => {\n              redirectKeyToItem(item, e);\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            });\n          }\n        } else {\n          if (keyCode === 13 || keyCode === 38 || keyCode === 40) {\n            api.cancelIfNecessary();\n          }\n        }\n      });\n      editor.on('NodeChange', () => {\n        if (api.isActive() && !api.isProcessingAction() && !editor.queryCommandState('mceAutoCompleterInRange')) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    const AutocompleterEditorEvents = { setup: setup$e };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    const navClass = 'tox-menu-nav__js';\n    const selectableClass = 'tox-collection__item';\n    const colorClass = 'tox-swatch';\n    const presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    const tickedClass = 'tox-collection__item--enabled';\n    const groupHeadingClass = 'tox-collection__group-heading';\n    const iconClass = 'tox-collection__item-icon';\n    const textClass = 'tox-collection__item-label';\n    const accessoryClass = 'tox-collection__item-accessory';\n    const caretClass = 'tox-collection__item-caret';\n    const checkmarkClass = 'tox-collection__item-checkmark';\n    const activeClass = 'tox-collection__item--active';\n    const containerClass = 'tox-collection__item-container';\n    const containerColumnClass = 'tox-collection__item-container--column';\n    const containerRowClass = 'tox-collection__item-container--row';\n    const containerAlignRightClass = 'tox-collection__item-container--align-right';\n    const containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    const containerValignTopClass = 'tox-collection__item-container--valign-top';\n    const containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    const containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    const classForPreset = presets => get$g(presetClasses, presets).getOr(navClass);\n\n    const forMenu = presets => {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    const classes = presets => ({\n      backgroundMenu: 'tox-background-menu',\n      selectedMenu: 'tox-selected-menu',\n      selectedItem: 'tox-collection__item--active',\n      hasIcons: 'tox-menu--has-icons',\n      menu: forMenu(presets),\n      tieredMenu: 'tox-tiered-menu'\n    });\n\n    const markers = presets => {\n      const menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    const dom$1 = (hasIcons, columns, presets) => {\n      const menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            `tox-menu-${ columns }-column`\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    const components = [Menu.parts.items({})];\n    const part = (hasIcons, columns, presets) => {\n      const menuClasses = classes(presets);\n      const d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    const schema$l = constant$1([\n      option$3('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    const focusBehaviours = detail => derive$1([Focusing.config({\n        onFocus: !detail.selectOnFocus ? noop : component => {\n          const input = component.element;\n          const value = get$6(input);\n          input.dom.setSelectionRange(0, value.length);\n        }\n      })]);\n    const behaviours = detail => ({\n      ...focusBehaviours(detail),\n      ...augment(detail.inputBehaviours, [Representing.config({\n          store: {\n            mode: 'manual',\n            ...detail.data.map(data => ({ initialValue: data })).getOr({}),\n            getValue: input => {\n              return get$6(input.element);\n            },\n            setValue: (input, data) => {\n              const current = get$6(input.element);\n              if (current !== data) {\n                set$5(input.element, data);\n              }\n            }\n          },\n          onSetValue: detail.onSetValue\n        })])\n    });\n    const dom = detail => ({\n      tag: detail.tag,\n      attributes: {\n        type: 'text',\n        ...detail.inputAttributes\n      },\n      styles: detail.inputStyles,\n      classes: detail.inputClasses\n    });\n\n    const factory$l = (detail, _spec) => ({\n      uid: detail.uid,\n      dom: dom(detail),\n      components: [],\n      behaviours: behaviours(detail),\n      eventOrder: detail.eventOrder\n    });\n    const Input = single({\n      name: 'Input',\n      configFields: schema$l(),\n      factory: factory$l\n    });\n\n    const refetchTriggerEvent = generate$6('refetch-trigger-event');\n    const redirectMenuItemInteractionEvent = generate$6('redirect-menu-item-interaction');\n\n    const menuSearcherClass = 'tox-menu__searcher';\n    const findWithinSandbox = sandboxComp => {\n      return descendant(sandboxComp.element, `.${ menuSearcherClass }`).bind(inputElem => sandboxComp.getSystem().getByDom(inputElem).toOptional());\n    };\n    const findWithinMenu = findWithinSandbox;\n    const restoreState = (inputComp, searcherState) => {\n      Representing.setValue(inputComp, searcherState.fetchPattern);\n      inputComp.element.dom.selectionStart = searcherState.selectionStart;\n      inputComp.element.dom.selectionEnd = searcherState.selectionEnd;\n    };\n    const saveState = inputComp => {\n      const fetchPattern = Representing.getValue(inputComp);\n      const selectionStart = inputComp.element.dom.selectionStart;\n      const selectionEnd = inputComp.element.dom.selectionEnd;\n      return {\n        fetchPattern,\n        selectionStart,\n        selectionEnd\n      };\n    };\n    const setActiveDescendant = (inputComp, active) => {\n      getOpt(active.element, 'id').each(id => set$9(inputComp.element, 'aria-activedescendant', id));\n    };\n    const renderMenuSearcher = spec => {\n      const handleByBrowser = (comp, se) => {\n        se.cut();\n        return Optional.none();\n      };\n      const handleByHighlightedItem = (comp, se) => {\n        const eventData = {\n          interactionEvent: se.event,\n          eventType: se.event.raw.type\n        };\n        emitWith(comp, redirectMenuItemInteractionEvent, eventData);\n        return Optional.some(true);\n      };\n      const customSearcherEventsName = 'searcher-events';\n      return {\n        dom: {\n          tag: 'div',\n          classes: [selectableClass]\n        },\n        components: [Input.sketch({\n            inputClasses: [\n              menuSearcherClass,\n              'tox-textfield'\n            ],\n            inputAttributes: {\n              ...spec.placeholder.map(placeholder => ({ placeholder: spec.i18n(placeholder) })).getOr({}),\n              'type': 'search',\n              'aria-autocomplete': 'list'\n            },\n            inputBehaviours: derive$1([\n              config(customSearcherEventsName, [\n                run$1(input(), inputComp => {\n                  emit(inputComp, refetchTriggerEvent);\n                }),\n                run$1(keydown(), (inputComp, se) => {\n                  if (se.event.raw.key === 'Escape') {\n                    se.stop();\n                  }\n                })\n              ]),\n              Keying.config({\n                mode: 'special',\n                onLeft: handleByBrowser,\n                onRight: handleByBrowser,\n                onSpace: handleByBrowser,\n                onEnter: handleByHighlightedItem,\n                onEscape: handleByHighlightedItem,\n                onUp: handleByHighlightedItem,\n                onDown: handleByHighlightedItem\n              })\n            ]),\n            eventOrder: {\n              keydown: [\n                customSearcherEventsName,\n                Keying.name()\n              ]\n            }\n          })]\n      };\n    };\n\n    const searchResultsClass = 'tox-collection--results__js';\n    const augmentWithAria = item => {\n      var _a;\n      if (item.dom) {\n        return {\n          ...item,\n          dom: {\n            ...item.dom,\n            attributes: {\n              ...(_a = item.dom.attributes) !== null && _a !== void 0 ? _a : {},\n              'id': generate$6('aria-item-search-result-id'),\n              'aria-selected': 'false'\n            }\n          }\n        };\n      } else {\n        return item;\n      }\n    };\n\n    const chunk = (rowDom, numColumns) => items => {\n      const chunks = chunk$1(items, numColumns);\n      return map$2(chunks, c => ({\n        dom: rowDom,\n        components: c\n      }));\n    };\n    const forSwatch = columns => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-menu',\n          'tox-swatches-menu'\n        ]\n      },\n      components: [{\n          dom: {\n            tag: 'div',\n            classes: ['tox-swatches']\n          },\n          components: [Menu.parts.items({\n              preprocess: columns !== 'auto' ? chunk({\n                tag: 'div',\n                classes: ['tox-swatches__row']\n              }, columns) : identity\n            })]\n        }]\n    });\n    const forToolbar = columns => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-menu',\n          'tox-collection',\n          'tox-collection--toolbar',\n          'tox-collection--toolbar-lg'\n        ]\n      },\n      components: [Menu.parts.items({\n          preprocess: chunk({\n            tag: 'div',\n            classes: ['tox-collection__group']\n          }, columns)\n        })]\n    });\n    const preprocessCollection = (items, isSeparator) => {\n      const allSplits = [];\n      let currentSplit = [];\n      each$1(items, (item, i) => {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml') || item.components && item.components.length > 0) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, s => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection__group']\n        },\n        components: s\n      }));\n    };\n    const insertItemsPlaceholder = (columns, initItems, onItem) => {\n      return Menu.parts.items({\n        preprocess: rawItems => {\n          const enrichedItems = map$2(rawItems, onItem);\n          if (columns !== 'auto' && columns > 1) {\n            return chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)(enrichedItems);\n          } else {\n            return preprocessCollection(enrichedItems, (_item, i) => initItems[i].type === 'separator');\n          }\n        }\n      });\n    };\n    const forCollection = (columns, initItems, _hasIcons = true) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-menu',\n          'tox-collection'\n        ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n      },\n      components: [insertItemsPlaceholder(columns, initItems, identity)]\n    });\n    const forCollectionWithSearchResults = (columns, initItems, _hasIcons = true) => {\n      const ariaControlsSearchResults = generate$6('aria-controls-search-results');\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            searchResultsClass\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid']),\n          attributes: { id: ariaControlsSearchResults }\n        },\n        components: [insertItemsPlaceholder(columns, initItems, augmentWithAria)]\n      };\n    };\n    const forCollectionWithSearchField = (columns, initItems, searchField) => {\n      const ariaControlsSearchResults = generate$6('aria-controls-search-results');\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [\n          renderMenuSearcher({\n            i18n: global$8.translate,\n            placeholder: searchField.placeholder\n          }),\n          {\n            dom: {\n              tag: 'div',\n              classes: [\n                ...columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'],\n                searchResultsClass\n              ],\n              attributes: { id: ariaControlsSearchResults }\n            },\n            components: [insertItemsPlaceholder(columns, initItems, augmentWithAria)]\n          }\n        ]\n      };\n    };\n    const forHorizontalCollection = (initItems, _hasIcons = true) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-collection',\n          'tox-collection--horizontal'\n        ]\n      },\n      components: [Menu.parts.items({ preprocess: items => preprocessCollection(items, (_item, i) => initItems[i].type === 'separator') })]\n    });\n\n    const menuHasIcons = xs => exists(xs, item => 'icon' in item && item.icon !== undefined);\n    const handleError = error => {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    const createHorizontalPartialMenuWithAlloyItems = (value, _hasIcons, items, _columns, _menuLayout) => {\n      const structure = forHorizontalCollection(items);\n      return {\n        value,\n        dom: structure.dom,\n        components: structure.components,\n        items\n      };\n    };\n    const createPartialMenuWithAlloyItems = (value, hasIcons, items, columns, menuLayout) => {\n      const getNormalStructure = () => {\n        if (menuLayout.menuType !== 'searchable') {\n          return forCollection(columns, items);\n        } else {\n          return menuLayout.searchMode.searchMode === 'search-with-field' ? forCollectionWithSearchField(columns, items, menuLayout.searchMode) : forCollectionWithSearchResults(columns, items);\n        }\n      };\n      if (menuLayout.menuType === 'color') {\n        const structure = forSwatch(columns);\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else if (menuLayout.menuType === 'normal' && columns === 'auto') {\n        const structure = forCollection(columns, items);\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else if (menuLayout.menuType === 'normal' || menuLayout.menuType === 'searchable') {\n        const structure = getNormalStructure();\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else if (menuLayout.menuType === 'listpreview' && columns !== 'auto') {\n        const structure = forToolbar(columns);\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else {\n        return {\n          value,\n          dom: dom$1(hasIcons, columns, menuLayout.menuType),\n          components: components,\n          items\n        };\n      }\n    };\n\n    const type = requiredString('type');\n    const name$1 = requiredString('name');\n    const label = requiredString('label');\n    const text = requiredString('text');\n    const title = requiredString('title');\n    const icon = requiredString('icon');\n    const value$1 = requiredString('value');\n    const fetch$1 = requiredFunction('fetch');\n    const getSubmenuItems = requiredFunction('getSubmenuItems');\n    const onAction = requiredFunction('onAction');\n    const onItemAction = requiredFunction('onItemAction');\n    const onSetup = defaultedFunction('onSetup', () => noop);\n    const optionalName = optionString('name');\n    const optionalText = optionString('text');\n    const optionalIcon = optionString('icon');\n    const optionalTooltip = optionString('tooltip');\n    const optionalLabel = optionString('label');\n    const optionalShortcut = optionString('shortcut');\n    const optionalSelect = optionFunction('select');\n    const active = defaultedBoolean('active', false);\n    const borderless = defaultedBoolean('borderless', false);\n    const enabled = defaultedBoolean('enabled', true);\n    const primary = defaultedBoolean('primary', false);\n    const defaultedColumns = num => defaulted('columns', num);\n    const defaultedMeta = defaulted('meta', {});\n    const defaultedOnAction = defaultedFunction('onAction', noop);\n    const defaultedType = type => defaultedString('type', type);\n    const generatedName = namePrefix => field$1('name', 'name', defaultedThunk(() => generate$6(`${ namePrefix }-name`)), string);\n    const generatedValue = valuePrefix => field$1('value', 'value', defaultedThunk(() => generate$6(`${ valuePrefix }-value`)), anyValue());\n\n    const separatorMenuItemSchema = objOf([\n      type,\n      optionalText\n    ]);\n    const createSeparatorMenuItem = spec => asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n\n    const autocompleterItemSchema = objOf([\n      defaultedType('autocompleteitem'),\n      active,\n      enabled,\n      defaultedMeta,\n      value$1,\n      optionalText,\n      optionalIcon\n    ]);\n    const createSeparatorItem = spec => asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    const createAutocompleterItem = spec => asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n\n    const baseToolbarButtonFields = [\n      enabled,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      onSetup\n    ];\n    const toolbarButtonSchema = objOf([\n      type,\n      onAction,\n      optionalShortcut\n    ].concat(baseToolbarButtonFields));\n    const createToolbarButton = spec => asRaw('toolbarbutton', toolbarButtonSchema, spec);\n\n    const baseToolbarToggleButtonFields = [active].concat(baseToolbarButtonFields);\n    const toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      type,\n      onAction,\n      optionalShortcut\n    ]));\n    const createToggleButton = spec => asRaw('ToggleButton', toggleButtonSchema, spec);\n\n    const contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    const contextButtonFields = baseToolbarButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const launchButtonFields = baseToolbarButtonFields.concat([defaultedType('contextformbutton')]);\n    const launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaultedType('contextformtogglebutton')]);\n    const toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    const contextFormSchema = objOf([\n      defaultedType('contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionalLabel,\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    const createContextForm = spec => asRaw('ContextForm', contextFormSchema, spec);\n\n    const contextToolbarSchema = objOf([\n      defaultedType('contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    const createContextToolbar = spec => asRaw('ContextToolbar', contextToolbarSchema, spec);\n\n    const cardImageFields = [\n      type,\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    const cardImageSchema = objOf(cardImageFields);\n\n    const cardTextFields = [\n      type,\n      text,\n      optionalName,\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    const cardTextSchema = objOf(cardTextFields);\n\n    const itemSchema$1 = valueThunk(() => choose$2('type', {\n      cardimage: cardImageSchema,\n      cardtext: cardTextSchema,\n      cardcontainer: cardContainerSchema\n    }));\n    const cardContainerSchema = objOf([\n      type,\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    const commonMenuItemFields = [\n      enabled,\n      optionalText,\n      optionalShortcut,\n      generatedValue('menuitem'),\n      defaultedMeta\n    ];\n\n    const cardMenuItemSchema = objOf([\n      type,\n      optionalLabel,\n      requiredArrayOf('items', itemSchema$1),\n      onSetup,\n      defaultedOnAction\n    ].concat(commonMenuItemFields));\n    const createCardMenuItem = spec => asRaw('cardmenuitem', cardMenuItemSchema, spec);\n\n    const choiceMenuItemSchema = objOf([\n      type,\n      active,\n      optionalIcon\n    ].concat(commonMenuItemFields));\n    const createChoiceMenuItem = spec => asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n\n    const baseFields = [\n      type,\n      requiredString('fancytype'),\n      defaultedOnAction\n    ];\n    const insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    const colorSwatchFields = [\n      optionFunction('select'),\n      defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        defaultedString('storageKey', 'default'),\n        optionArrayOf('colors', anyValue())\n      ])\n    ].concat(baseFields);\n    const fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    const createFancyMenuItem = spec => asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n\n    const menuItemSchema = objOf([\n      type,\n      onSetup,\n      defaultedOnAction,\n      optionalIcon\n    ].concat(commonMenuItemFields));\n    const createMenuItem = spec => asRaw('menuitem', menuItemSchema, spec);\n\n    const nestedMenuItemSchema = objOf([\n      type,\n      getSubmenuItems,\n      onSetup,\n      optionalIcon\n    ].concat(commonMenuItemFields));\n    const createNestedMenuItem = spec => asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n\n    const toggleMenuItemSchema = objOf([\n      type,\n      optionalIcon,\n      active,\n      onSetup,\n      onAction\n    ].concat(commonMenuItemFields));\n    const createToggleMenuItem = spec => asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n\n    const detectSize = (comp, margin, selectorClass) => {\n      const descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        const columnLength = findIndex$1(descendants$1, c => {\n          const thisTop = c.dom.getBoundingClientRect().top;\n          const cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    const namedEvents = (name, handlers) => derive$1([config(name, handlers)]);\n    const unnamedEvents = handlers => namedEvents(generate$6('unnamed-events'), handlers);\n    const SimpleBehaviours = {\n      namedEvents,\n      unnamedEvents\n    };\n\n    const ExclusivityChannel = generate$6('tooltip.exclusive');\n    const ShowTooltipEvent = generate$6('tooltip.show');\n    const HideTooltipEvent = generate$6('tooltip.hide');\n    const ImmediateHideTooltipEvent = generate$6('tooltip.immediateHide');\n    const ImmediateShowTooltipEvent = generate$6('tooltip.immediateShow');\n\n    const hideAllExclusive = (component, _tConfig, _tState) => {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    const setComponents = (component, tConfig, tState, specs) => {\n      tState.getTooltip().each(tooltip => {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    const events$9 = (tooltipConfig, state) => {\n      const hide = comp => {\n        state.getTooltip().each(p => {\n          if (p.getSystem().isConnected()) {\n            detach(p);\n            tooltipConfig.onHide(comp, p);\n            state.clearTooltip();\n          }\n        });\n        state.clearTimer();\n      };\n      const show = comp => {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          const sink = tooltipConfig.lazySink(comp).getOrDie();\n          const popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), _ => {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), _ => {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      const reposition = comp => {\n        state.getTooltip().each(tooltip => {\n          const sink = tooltipConfig.lazySink(comp).getOrDie();\n          Positioning.position(sink, tooltip, { anchor: tooltipConfig.anchor(comp) });\n        });\n      };\n      const getEvents = () => {\n        switch (tooltipConfig.mode) {\n        case 'normal':\n          return [\n            run$1(focusin(), comp => {\n              emit(comp, ImmediateShowTooltipEvent);\n            }),\n            run$1(postBlur(), comp => {\n              emit(comp, ImmediateHideTooltipEvent);\n            }),\n            run$1(mouseover(), comp => {\n              emit(comp, ShowTooltipEvent);\n            }),\n            run$1(mouseout(), comp => {\n              emit(comp, HideTooltipEvent);\n            })\n          ];\n        case 'follow-highlight':\n          return [\n            run$1(highlight$1(), (comp, _se) => {\n              emit(comp, ShowTooltipEvent);\n            }),\n            run$1(dehighlight$1(), comp => {\n              emit(comp, HideTooltipEvent);\n            })\n          ];\n        case 'children-normal':\n          return [\n            run$1(focusin(), (comp, se) => {\n              search(comp.element).each(_ => {\n                if (is(se.event.target, '[data-mce-tooltip]')) {\n                  state.getTooltip().fold(() => {\n                    emit(comp, ImmediateShowTooltipEvent);\n                  }, tooltip => {\n                    if (state.isShowing()) {\n                      tooltipConfig.onShow(comp, tooltip);\n                      reposition(comp);\n                    }\n                  });\n                }\n              });\n            }),\n            run$1(postBlur(), comp => {\n              search(comp.element).fold(() => {\n                emit(comp, ImmediateHideTooltipEvent);\n              }, noop);\n            }),\n            run$1(mouseover(), comp => {\n              descendant(comp.element, '[data-mce-tooltip]:hover').each(_ => {\n                state.getTooltip().fold(() => {\n                  emit(comp, ShowTooltipEvent);\n                }, tooltip => {\n                  if (state.isShowing()) {\n                    tooltipConfig.onShow(comp, tooltip);\n                    reposition(comp);\n                  }\n                });\n              });\n            }),\n            run$1(mouseout(), comp => {\n              descendant(comp.element, '[data-mce-tooltip]:hover').fold(() => {\n                emit(comp, HideTooltipEvent);\n              }, noop);\n            })\n          ];\n        default:\n          return [\n            run$1(focusin(), (comp, se) => {\n              search(comp.element).each(_ => {\n                if (is(se.event.target, '[data-mce-tooltip]')) {\n                  state.getTooltip().fold(() => {\n                    emit(comp, ImmediateShowTooltipEvent);\n                  }, tooltip => {\n                    if (state.isShowing()) {\n                      tooltipConfig.onShow(comp, tooltip);\n                      reposition(comp);\n                    }\n                  });\n                }\n              });\n            }),\n            run$1(postBlur(), comp => {\n              search(comp.element).fold(() => {\n                emit(comp, ImmediateHideTooltipEvent);\n              }, noop);\n            })\n          ];\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, comp => {\n            state.resetTimer(() => {\n              show(comp);\n            }, tooltipConfig.delayForShow());\n          }),\n          run$1(HideTooltipEvent, comp => {\n            state.resetTimer(() => {\n              hide(comp);\n            }, tooltipConfig.delayForHide());\n          }),\n          run$1(ImmediateShowTooltipEvent, comp => {\n            state.resetTimer(() => {\n              show(comp);\n            }, 0);\n          }),\n          run$1(ImmediateHideTooltipEvent, comp => {\n            state.resetTimer(() => {\n              hide(comp);\n            }, 0);\n          }),\n          run$1(receive(), (comp, message) => {\n            const receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(comp => {\n            hide(comp);\n          })\n        ],\n        getEvents()\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaultedFunction('delayForShow', constant$1(300)),\n      defaultedFunction('delayForHide', constant$1(300)),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight',\n        'children-keyboard-focus',\n        'children-normal'\n      ]),\n      defaulted('anchor', comp => ({\n        type: 'hotspot',\n        hotspot: comp,\n        layouts: {\n          onLtr: constant$1([\n            south$2,\n            north$2,\n            southeast$2,\n            northeast$2,\n            southwest$2,\n            northwest$2\n          ]),\n          onRtl: constant$1([\n            south$2,\n            north$2,\n            southeast$2,\n            northeast$2,\n            southwest$2,\n            northwest$2\n          ])\n        },\n        bubble: nu$5(0, -2, {})\n      })),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    const init$b = () => {\n      const timer = value$2();\n      const popup = value$2();\n      const clearTimer = () => {\n        timer.on(clearTimeout);\n      };\n      const resetTimer = (f, delay) => {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      const readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer,\n        resetTimer,\n        readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    const Tooltipping = create$4({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    const escape = text => text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n    const ReadOnlyChannel = 'silver.readonly';\n    const ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    const broadcastReadonly = (uiRefs, readonly) => {\n      const outerContainer = uiRefs.mainUi.outerContainer;\n      const target = outerContainer.element;\n      const motherships = [\n        uiRefs.mainUi.mothership,\n        ...uiRefs.uiMotherships\n      ];\n      if (readonly) {\n        each$1(motherships, m => {\n          m.broadcastOn([dismissPopups()], { target });\n        });\n      }\n      each$1(motherships, m => {\n        m.broadcastOn([ReadOnlyChannel], { readonly });\n      });\n    };\n    const setupReadonlyModeSwitch = (editor, uiRefs) => {\n      editor.on('init', () => {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiRefs, true);\n        }\n      });\n      editor.on('SwitchMode', () => broadcastReadonly(uiRefs, editor.mode.isReadOnly()));\n      if (isReadOnly(editor)) {\n        editor.mode.set('readonly');\n      }\n    };\n    const receivingConfig = () => Receiving.config({\n      channels: {\n        [ReadOnlyChannel]: {\n          schema: ReadOnlyDataSchema,\n          onReceive: (comp, data) => {\n            Disabling.set(comp, data.readonly);\n          }\n        }\n      }\n    });\n\n    const item = disabled => Disabling.config({\n      disabled,\n      disableClass: 'tox-collection__item--state-disabled'\n    });\n    const button = disabled => Disabling.config({ disabled });\n    const splitButton = disabled => Disabling.config({\n      disabled,\n      disableClass: 'tox-tbtn--disabled'\n    });\n    const toolbarButton = disabled => Disabling.config({\n      disabled,\n      disableClass: 'tox-tbtn--disabled',\n      useNative: false\n    });\n    const DisablingConfigs = {\n      item,\n      button,\n      splitButton,\n      toolbarButton\n    };\n\n    const runWithApi = (info, comp) => {\n      const api = info.getApi(comp);\n      return f => {\n        f(api);\n      };\n    };\n    const onControlAttached = (info, editorOffCell) => runOnAttached(comp => {\n      const run = runWithApi(info, comp);\n      run(api => {\n        const onDestroy = info.onSetup(api);\n        if (isFunction(onDestroy)) {\n          editorOffCell.set(onDestroy);\n        }\n      });\n    });\n    const onControlDetached = (getApi, editorOffCell) => runOnDetached(comp => runWithApi(getApi, comp)(editorOffCell.get()));\n\n    const onMenuItemExecute = (info, itemResponse) => runOnExecute$1((comp, simulatedEvent) => {\n      runWithApi(info, comp)(info.onAction);\n      if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n        if (comp.getSystem().isConnected()) {\n          emit(comp, sandboxClose());\n        }\n        simulatedEvent.stop();\n      }\n    });\n    const menuItemEventOrder = {\n      [execute$5()]: [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'item-events'\n      ]\n    };\n\n    const componentRenderPipeline = cat;\n    const renderCommonItem = (spec, structure, itemResponse, providersBackstage) => {\n      const editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(() => !spec.enabled || providersBackstage.isDisabled()),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    const buildData = source => ({\n      value: source.value,\n      meta: {\n        text: source.text.getOr(''),\n        ...source.meta\n      }\n    });\n\n    const convertText = source => {\n      const isMac = global$5.os.isMacOS() || global$5.os.isiOS();\n      const mac = {\n        alt: '\\u2325',\n        ctrl: '\\u2303',\n        shift: '\\u21E7',\n        meta: '\\u2318',\n        access: '\\u2303\\u2325'\n      };\n      const other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      const replace = isMac ? mac : other;\n      const shortcut = source.split('+');\n      const updated = map$2(shortcut, segment => {\n        const search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return isMac ? updated.join('') : updated.join('+');\n    };\n\n    const renderIcon$2 = (name, icons, classes = [iconClass]) => render$3(name, {\n      tag: 'div',\n      classes\n    }, icons);\n    const renderText = text => ({\n      dom: {\n        tag: 'div',\n        classes: [textClass]\n      },\n      components: [text$2(global$8.translate(text))]\n    });\n    const renderHtml = (html, classes) => ({\n      dom: {\n        tag: 'div',\n        classes,\n        innerHtml: html\n      }\n    });\n    const renderStyledText = (style, text) => ({\n      dom: {\n        tag: 'div',\n        classes: [textClass]\n      },\n      components: [{\n          dom: {\n            tag: style.tag,\n            styles: style.styles\n          },\n          components: [text$2(global$8.translate(text))]\n        }]\n    });\n    const renderShortcut = shortcut => ({\n      dom: {\n        tag: 'div',\n        classes: [accessoryClass]\n      },\n      components: [text$2(convertText(shortcut))]\n    });\n    const renderCheckmark = icons => renderIcon$2('checkmark', icons, [checkmarkClass]);\n    const renderSubmenuCaret = icons => renderIcon$2('chevron-right', icons, [caretClass]);\n    const renderDownwardsCaret = icons => renderIcon$2('chevron-down', icons, [caretClass]);\n    const renderContainer = (container, components) => {\n      const directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      const alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      const getValignClass = () => {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components\n      };\n    };\n    const renderImage = (src, classes, alt) => ({\n      dom: {\n        tag: 'img',\n        classes,\n        attributes: {\n          src,\n          alt: alt.getOr('')\n        }\n      }\n    });\n\n    const renderColorStructure = (item, providerBackstage, fallbackIcon) => {\n      const colorPickerCommand = 'custom';\n      const removeColorCommand = 'remove';\n      const itemValue = item.value;\n      const iconSvg = item.iconContent.map(name => getOr(name, providerBackstage.icons, fallbackIcon));\n      const attributes = item.ariaLabel.map(al => ({\n        'aria-label': providerBackstage.translate(al),\n        'data-mce-name': al\n      })).getOr({});\n      const getDom = () => {\n        const common = colorClass;\n        const icon = iconSvg.getOr('');\n        const baseDom = {\n          tag: 'div',\n          attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return {\n            ...baseDom,\n            tag: 'button',\n            classes: [\n              ...baseDom.classes,\n              'tox-swatches__picker-btn'\n            ],\n            innerHtml: icon\n          };\n        } else if (itemValue === removeColorCommand) {\n          return {\n            ...baseDom,\n            classes: [\n              ...baseDom.classes,\n              'tox-swatch--remove'\n            ],\n            innerHtml: icon\n          };\n        } else if (isNonNullable(itemValue)) {\n          return {\n            ...baseDom,\n            attributes: {\n              ...baseDom.attributes,\n              'data-mce-color': itemValue\n            },\n            styles: { 'background-color': itemValue },\n            innerHtml: icon\n          };\n        } else {\n          return baseDom;\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    const renderItemDomStructure = ariaLabel => {\n      const domTitle = ariaLabel.map(label => ({\n        attributes: {\n          'id': generate$6('menu-item'),\n          'aria-label': global$8.translate(label)\n        }\n      })).getOr({});\n      return {\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ],\n        ...domTitle\n      };\n    };\n    const renderNormalItemStructure = (info, providersBackstage, renderIcons, fallbackIcon) => {\n      const iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      const renderIcon = iconName => render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      const renderEmptyIcon = () => Optional.some({ dom: iconSpec });\n      const leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      const checkmark = info.checkMark;\n      const textRender = Optional.from(info.meta).fold(() => renderText, meta => has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText);\n      const content = info.htmlContent.fold(() => info.textContent.map(textRender), html => Optional.some(renderHtml(html, [textClass])));\n      const menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    const renderItemStructure = (info, providersBackstage, renderIcons, fallbackIcon = Optional.none()) => {\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    const tooltipBehaviour = (meta, sharedBackstage, tooltipText) => get$g(meta, 'tooltipWorker').map(tooltipWorker => [Tooltipping.config({\n        lazySink: sharedBackstage.getSink,\n        tooltipDom: {\n          tag: 'div',\n          classes: ['tox-tooltip-worker-container']\n        },\n        tooltipComponents: [],\n        anchor: comp => ({\n          type: 'submenu',\n          item: comp,\n          overrides: { maxHeightFunction: expandable$1 }\n        }),\n        mode: 'follow-highlight',\n        onShow: (component, _tooltip) => {\n          tooltipWorker(elm => {\n            Tooltipping.setComponents(component, [external$1({ element: SugarElement.fromDom(elm) })]);\n          });\n        }\n      })]).getOrThunk(() => {\n      return tooltipText.map(text => [Tooltipping.config({\n          ...sharedBackstage.providers.tooltips.getConfig({ tooltipText: text }),\n          mode: 'follow-highlight'\n        })]).getOr([]);\n    });\n    const encodeText = text => global$7.DOM.encode(text);\n    const replaceText = (text, matchText) => {\n      const translated = global$8.translate(text);\n      const encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        const escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, match => `<span class=\"tox-autocompleter-highlight\">${ match }</span>`);\n      } else {\n        return encoded;\n      }\n    };\n    const renderAutocompleteItem = (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons = true) => {\n      const structure = renderItemStructure({\n        presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(text => replaceText(text, matchText)) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      const tooltipString = spec.text.filter(text => !useText && text !== '');\n      return renderCommonItem({\n        data: buildData(spec),\n        enabled: spec.enabled,\n        getApi: constant$1({}),\n        onAction: _api => onItemValueHandler(spec.value, spec.meta),\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec, sharedBackstage, tooltipString)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    const render$2 = (items, extras) => map$2(items, item => {\n      switch (item.type) {\n      case 'cardcontainer':\n        return renderContainer(item, render$2(item.items, extras));\n      case 'cardimage':\n        return renderImage(item.src, item.classes, item.alt);\n      case 'cardtext':\n        const shouldHighlight = item.name.exists(name => contains$2(extras.cardText.highlightOn, name));\n        const matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n        return renderHtml(replaceText(item.text, matchText), item.classes);\n      }\n    });\n    const renderCardMenuItem = (spec, itemResponse, sharedBackstage, extras) => {\n      const getApi = component => ({\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => {\n          Disabling.set(component, !state);\n          each$1(descendants(component.element, '*'), elm => {\n            component.getSystem().getByDom(elm).each(comp => {\n              if (comp.hasConfigured(Disabling)) {\n                Disabling.set(comp, !state);\n              }\n            });\n          });\n        }\n      });\n      const structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData({\n          text: Optional.none(),\n          ...spec\n        }),\n        enabled: spec.enabled,\n        getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    const renderChoiceItem = (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons = true) => {\n      const getApi = component => ({\n        setActive: state => {\n          Toggling.set(component, state);\n        },\n        isActive: () => Toggling.isOn(component),\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state)\n      });\n      const structure = renderItemStructure({\n        presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      const optTooltipping = spec.text.filter(constant$1(!useText)).map(t => Tooltipping.config(providersBackstage.tooltips.getConfig({ tooltipText: providersBackstage.translate(t) })));\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        enabled: spec.enabled,\n        getApi,\n        onAction: _api => onItemValueHandler(spec.value),\n        onSetup: api => {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: [...optTooltipping.toArray()]\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active,\n          exclusive: true\n        }\n      });\n    };\n\n    const parts$f = generate$3(owner$2(), parts$h());\n\n    const hexColour = value => ({ value: normalizeHex(value) });\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    const longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    const isHexString = hex => shorthandRegex.test(hex) || longformRegex.test(hex);\n    const normalizeHex = hex => removeLeading(hex, '#').toUpperCase();\n    const fromString$1 = hex => isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    const getLongForm = hex => {\n      const hexString = hex.value.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\n      return { value: hexString };\n    };\n    const extractValues = hex => {\n      const longForm = getLongForm(hex);\n      const splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    const toHex = component => {\n      const hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    const fromRgba = rgbaColour => {\n      const value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    const min = Math.min;\n    const max = Math.max;\n    const round$1 = Math.round;\n    const rgbRegex = /^\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i;\n    const rgbaRegex = /^\\s*rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?(?:\\.\\d+)?)\\s*\\)\\s*$/i;\n    const rgbaColour = (red, green, blue, alpha) => ({\n      red,\n      green,\n      blue,\n      alpha\n    });\n    const isRgbaComponent = value => {\n      const num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    const fromHsv = hsv => {\n      let r;\n      let g;\n      let b;\n      const hue = (hsv.hue || 0) % 360;\n      let saturation = hsv.saturation / 100;\n      let brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      const side = hue / 60;\n      const chroma = brightness * saturation;\n      const x = chroma * (1 - Math.abs(side % 2 - 1));\n      const match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    const fromHex = hexColour => {\n      const result = extractValues(hexColour);\n      const red = parseInt(result[1], 16);\n      const green = parseInt(result[2], 16);\n      const blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    const fromStringValues = (red, green, blue, alpha) => {\n      const r = parseInt(red, 10);\n      const g = parseInt(green, 10);\n      const b = parseInt(blue, 10);\n      const a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    const fromString = rgbaString => {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      const rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      const rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    const toString = rgba => `rgba(${ rgba.red },${ rgba.green },${ rgba.blue },${ rgba.alpha })`;\n    const red = rgbaColour(255, 0, 0, 1);\n\n    const fireSkinLoaded$1 = editor => {\n      editor.dispatch('SkinLoaded');\n    };\n    const fireSkinLoadError$1 = (editor, error) => {\n      editor.dispatch('SkinLoadError', error);\n    };\n    const fireResizeEditor = editor => {\n      editor.dispatch('ResizeEditor');\n    };\n    const fireResizeContent = (editor, e) => {\n      editor.dispatch('ResizeContent', e);\n    };\n    const fireScrollContent = (editor, e) => {\n      editor.dispatch('ScrollContent', e);\n    };\n    const fireTextColorChange = (editor, data) => {\n      editor.dispatch('TextColorChange', data);\n    };\n    const fireAfterProgressState = (editor, state) => {\n      editor.dispatch('AfterProgressState', { state });\n    };\n    const fireResolveName = (editor, node) => editor.dispatch('ResolveName', {\n      name: node.nodeName.toLowerCase(),\n      target: node\n    });\n    const fireToggleToolbarDrawer = (editor, state) => {\n      editor.dispatch('ToggleToolbarDrawer', { state });\n    };\n    const fireStylesTextUpdate = (editor, data) => {\n      editor.dispatch('StylesTextUpdate', data);\n    };\n    const fireAlignTextUpdate = (editor, data) => {\n      editor.dispatch('AlignTextUpdate', data);\n    };\n    const fireFontSizeTextUpdate = (editor, data) => {\n      editor.dispatch('FontSizeTextUpdate', data);\n    };\n    const fireFontSizeInputTextUpdate = (editor, data) => {\n      editor.dispatch('FontSizeInputTextUpdate', data);\n    };\n    const fireBlocksTextUpdate = (editor, data) => {\n      editor.dispatch('BlocksTextUpdate', data);\n    };\n    const fireFontFamilyTextUpdate = (editor, data) => {\n      editor.dispatch('FontFamilyTextUpdate', data);\n    };\n\n    const composeUnbinders = (f, g) => () => {\n      f();\n      g();\n    };\n    const onSetupEditableToggle = editor => onSetupEvent(editor, 'NodeChange', api => {\n      api.setEnabled(editor.selection.isEditable());\n    });\n    const onSetupFormatToggle = (editor, name) => api => {\n      const boundFormatChangeCallback = unbindable();\n      const init = () => {\n        api.setActive(editor.formatter.match(name));\n        const binding = editor.formatter.formatChanged(name, api.setActive);\n        boundFormatChangeCallback.set(binding);\n      };\n      editor.initialized ? init() : editor.once('init', init);\n      return () => {\n        editor.off('init', init);\n        boundFormatChangeCallback.clear();\n      };\n    };\n    const onSetupStateToggle = (editor, name) => api => {\n      const unbindEditableToogle = onSetupEditableToggle(editor)(api);\n      const unbindFormatToggle = onSetupFormatToggle(editor, name)(api);\n      return () => {\n        unbindEditableToogle();\n        unbindFormatToggle();\n      };\n    };\n    const onSetupEvent = (editor, event, f) => api => {\n      const handleEvent = () => f(api);\n      const init = () => {\n        f(api);\n        editor.on(event, handleEvent);\n      };\n      editor.initialized ? init() : editor.once('init', init);\n      return () => {\n        editor.off('init', init);\n        editor.off(event, handleEvent);\n      };\n    };\n    const onActionToggleFormat$1 = editor => rawItem => () => {\n      editor.undoManager.transact(() => {\n        editor.focus();\n        editor.execCommand('mceToggleFormat', false, rawItem.format);\n      });\n    };\n    const onActionExecCommand = (editor, command) => () => editor.execCommand(command);\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    const cacheStorage = {};\n    const ColorCache = (storageId, max = 10) => {\n      const storageString = global$4.getItem(storageId);\n      const localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      const prune = list => {\n        const diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      const cache = prune(localstorage);\n      const add = key => {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$4.setItem(storageId, JSON.stringify(cache));\n      };\n      const remove = idx => {\n        cache.splice(idx, 1);\n      };\n      const state = () => cache.slice(0);\n      return {\n        add,\n        state\n      };\n    };\n    const getCacheForId = id => get$g(cacheStorage, id).getOrThunk(() => {\n      const storageId = `tinymce-custom-colors-${ id }`;\n      const currentData = global$4.getItem(storageId);\n      if (isNullable(currentData)) {\n        const legacyDefault = global$4.getItem('tinymce-custom-colors');\n        global$4.setItem(storageId, isNonNullable(legacyDefault) ? legacyDefault : '[]');\n      }\n      const storage = ColorCache(storageId, 10);\n      cacheStorage[id] = storage;\n      return storage;\n    });\n    const getCurrentColors = id => map$2(getCacheForId(id).state(), color => ({\n      type: 'choiceitem',\n      text: color,\n      icon: 'checkmark',\n      value: color\n    }));\n    const addColor = (id, color) => {\n      getCacheForId(id).add(color);\n    };\n\n    const hsvColour = (hue, saturation, value) => ({\n      hue,\n      saturation,\n      value\n    });\n    const fromRgb = rgbaColour => {\n      let h = 0;\n      let s = 0;\n      let v = 0;\n      const r = rgbaColour.red / 255;\n      const g = rgbaColour.green / 255;\n      const b = rgbaColour.blue / 255;\n      const minRGB = Math.min(r, Math.min(g, b));\n      const maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      const d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    const hexToHsv = hex => fromRgb(fromHex(hex));\n    const hsvToHex = hsv => fromRgba(fromHsv(hsv));\n    const anyToHex = color => fromString$1(color).orThunk(() => fromString(color).map(fromRgba)).getOrThunk(() => {\n      const canvas = document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      const canvasContext = canvas.getContext('2d');\n      canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n      canvasContext.fillStyle = '#FFFFFF';\n      canvasContext.fillStyle = color;\n      canvasContext.fillRect(0, 0, 1, 1);\n      const rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n      const r = rgba[0];\n      const g = rgba[1];\n      const b = rgba[2];\n      const a = rgba[3];\n      return fromRgba(rgbaColour(r, g, b, a));\n    });\n\n    const foregroundId = 'forecolor';\n    const backgroundId = 'hilitecolor';\n    const fallbackCols = 5;\n    const mapColors = colorMap => {\n      const colors = [];\n      for (let i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          icon: 'checkmark',\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    const option$1 = name => editor => editor.options.get(name);\n    const fallbackColor = '#000000';\n    const register$d = editor => {\n      const registerOption = editor.options.register;\n      const colorProcessor = value => {\n        if (isArrayOf(value, isString)) {\n          return {\n            value: mapColors(value),\n            valid: true\n          };\n        } else {\n          return {\n            valid: false,\n            message: 'Must be an array of strings.'\n          };\n        }\n      };\n      const colorColsProcessor = value => {\n        if (isNumber(value) && value > 0) {\n          return {\n            value,\n            valid: true\n          };\n        } else {\n          return {\n            valid: false,\n            message: 'Must be a positive number.'\n          };\n        }\n      };\n      registerOption('color_map', {\n        processor: colorProcessor,\n        default: [\n          '#BFEDD2',\n          'Light Green',\n          '#FBEEB8',\n          'Light Yellow',\n          '#F8CAC6',\n          'Light Red',\n          '#ECCAFA',\n          'Light Purple',\n          '#C2E0F4',\n          'Light Blue',\n          '#2DC26B',\n          'Green',\n          '#F1C40F',\n          'Yellow',\n          '#E03E2D',\n          'Red',\n          '#B96AD9',\n          'Purple',\n          '#3598DB',\n          'Blue',\n          '#169179',\n          'Dark Turquoise',\n          '#E67E23',\n          'Orange',\n          '#BA372A',\n          'Dark Red',\n          '#843FA1',\n          'Dark Purple',\n          '#236FA1',\n          'Dark Blue',\n          '#ECF0F1',\n          'Light Gray',\n          '#CED4D9',\n          'Medium Gray',\n          '#95A5A6',\n          'Gray',\n          '#7E8C8D',\n          'Dark Gray',\n          '#34495E',\n          'Navy Blue',\n          '#000000',\n          'Black',\n          '#ffffff',\n          'White'\n        ]\n      });\n      registerOption('color_map_background', { processor: colorProcessor });\n      registerOption('color_map_foreground', { processor: colorProcessor });\n      registerOption('color_cols', {\n        processor: colorColsProcessor,\n        default: calcCols(editor)\n      });\n      registerOption('color_cols_foreground', {\n        processor: colorColsProcessor,\n        default: defaultCols(editor, foregroundId)\n      });\n      registerOption('color_cols_background', {\n        processor: colorColsProcessor,\n        default: defaultCols(editor, backgroundId)\n      });\n      registerOption('custom_colors', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('color_default_foreground', {\n        processor: 'string',\n        default: fallbackColor\n      });\n      registerOption('color_default_background', {\n        processor: 'string',\n        default: fallbackColor\n      });\n    };\n    const getColors$2 = (editor, id) => {\n      if (id === foregroundId && editor.options.isSet('color_map_foreground')) {\n        return option$1('color_map_foreground')(editor);\n      } else if (id === backgroundId && editor.options.isSet('color_map_background')) {\n        return option$1('color_map_background')(editor);\n      } else {\n        return option$1('color_map')(editor);\n      }\n    };\n    const calcCols = (editor, id = 'default') => Math.max(fallbackCols, Math.ceil(Math.sqrt(getColors$2(editor, id).length)));\n    const defaultCols = (editor, id) => {\n      const defaultCols = option$1('color_cols')(editor);\n      const calculatedCols = calcCols(editor, id);\n      if (defaultCols === calcCols(editor)) {\n        return calculatedCols;\n      } else {\n        return defaultCols;\n      }\n    };\n    const getColorCols$1 = (editor, id = 'default') => {\n      const getCols = () => {\n        if (id === foregroundId) {\n          return option$1('color_cols_foreground')(editor);\n        } else if (id === backgroundId) {\n          return option$1('color_cols_background')(editor);\n        } else {\n          return option$1('color_cols')(editor);\n        }\n      };\n      return Math.round(getCols());\n    };\n    const hasCustomColors$1 = option$1('custom_colors');\n    const getDefaultForegroundColor = option$1('color_default_foreground');\n    const getDefaultBackgroundColor = option$1('color_default_background');\n\n    const defaultBackgroundColor = 'rgba(0, 0, 0, 0)';\n    const isValidBackgroundColor = value => fromString(value).exists(c => c.alpha !== 0);\n    const getClosestCssBackgroundColorValue = scope => {\n      return closest$4(scope, node => {\n        if (isElement$1(node)) {\n          const color = get$e(node, 'background-color');\n          return someIf(isValidBackgroundColor(color), color);\n        } else {\n          return Optional.none();\n        }\n      }).getOr(defaultBackgroundColor);\n    };\n    const getCurrentColor = (editor, format) => {\n      const node = SugarElement.fromDom(editor.selection.getStart());\n      const cssRgbValue = format === 'hilitecolor' ? getClosestCssBackgroundColorValue(node) : get$e(node, 'color');\n      return fromString(cssRgbValue).map(rgba => '#' + fromRgba(rgba).value);\n    };\n    const applyFormat = (editor, format, value) => {\n      editor.undoManager.transact(() => {\n        editor.focus();\n        editor.formatter.apply(format, { value });\n        editor.nodeChanged();\n      });\n    };\n    const removeFormat = (editor, format) => {\n      editor.undoManager.transact(() => {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, undefined, true);\n        editor.nodeChanged();\n      });\n    };\n    const registerCommands = editor => {\n      editor.addCommand('mceApplyTextcolor', (format, value) => {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', format => {\n        removeFormat(editor, format);\n      });\n    };\n    const getAdditionalColors = hasCustom => {\n      const type = 'choiceitem';\n      const remove = {\n        type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      const custom = {\n        type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    const applyColor = (editor, format, value, onChoice) => {\n      if (value === 'custom') {\n        const dialog = colorPickerDialog(editor);\n        dialog(colorOpt => {\n          colorOpt.each(color => {\n            addColor(format, color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, getCurrentColor(editor, format).getOr(fallbackColor));\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    const getColors$1 = (colors, id, hasCustom) => colors.concat(getCurrentColors(id).concat(getAdditionalColors(hasCustom)));\n    const getFetch$1 = (colors, id, hasCustom) => callback => {\n      callback(getColors$1(colors, id, hasCustom));\n    };\n    const setIconColor = (splitButtonApi, name, newColor) => {\n      const id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    const setTooltip = (buttonApi, tooltip) => {\n      buttonApi.setTooltip(tooltip);\n    };\n    const select$1 = (editor, format) => value => {\n      const optCurrentHex = getCurrentColor(editor, format);\n      return is$1(optCurrentHex, value.toUpperCase());\n    };\n    const getToolTipText = (editor, format, lastColor) => {\n      if (isEmpty(lastColor)) {\n        return format === 'forecolor' ? 'Text color' : 'Background color';\n      }\n      const tooltipPrefix = format === 'forecolor' ? 'Text color {0}' : 'Background color {0}';\n      const colors = getColors$1(getColors$2(editor, format), format, false);\n      const colorText = find$5(colors, c => c.value === lastColor).getOr({ text: '' }).text;\n      return editor.translate([\n        tooltipPrefix,\n        editor.translate(colorText)\n      ]);\n    };\n    const registerTextColorButton = (editor, name, format, lastColor) => {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: getToolTipText(editor, format, lastColor.get()),\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: select$1(editor, format),\n        columns: getColorCols$1(editor, format),\n        fetch: getFetch$1(getColors$2(editor, format), format, hasCustomColors$1(editor)),\n        onAction: _splitButtonApi => {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: (_splitButtonApi, value) => {\n          applyColor(editor, format, value, newColor => {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: splitButtonApi => {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          const handler = e => {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n              setTooltip(splitButtonApi, getToolTipText(editor, format, e.color));\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return composeUnbinders(onSetupEditableToggle(editor)(splitButtonApi), () => {\n            editor.off('TextColorChange', handler);\n          });\n        }\n      });\n    };\n    const registerTextColorMenuItem = (editor, name, format, text, lastColor) => {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        onSetup: api => {\n          setTooltip(api, getToolTipText(editor, format, lastColor.get()));\n          setIconColor(api, name, lastColor.get());\n          return onSetupEditableToggle(editor)(api);\n        },\n        getSubmenuItems: () => [{\n            type: 'fancymenuitem',\n            fancytype: 'colorswatch',\n            select: select$1(editor, format),\n            initData: { storageKey: format },\n            onAction: data => {\n              applyColor(editor, format, data.value, newColor => {\n                lastColor.set(newColor);\n                fireTextColorChange(editor, {\n                  name,\n                  color: newColor\n                });\n              });\n            }\n          }]\n      });\n    };\n    const colorPickerDialog = editor => (callback, value) => {\n      let isValid = false;\n      const onSubmit = api => {\n        const data = api.getData();\n        const hex = data.colorpicker;\n        if (isValid) {\n          callback(Optional.from(hex));\n          api.close();\n        } else {\n          editor.windowManager.alert(editor.translate([\n            'Invalid hex color code: {0}',\n            hex\n          ]));\n        }\n      };\n      const onAction = (_api, details) => {\n        if (details.name === 'hex-valid') {\n          isValid = details.value;\n        }\n      };\n      const initialData = { colorpicker: value };\n      editor.windowManager.open({\n        title: 'Color Picker',\n        size: 'normal',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'colorpicker',\n              name: 'colorpicker',\n              label: 'Color'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData,\n        onAction,\n        onSubmit,\n        onClose: noop,\n        onCancel: () => {\n          callback(Optional.none());\n        }\n      });\n    };\n    const register$c = editor => {\n      registerCommands(editor);\n      const fallbackColorForeground = getDefaultForegroundColor(editor);\n      const fallbackColorBackground = getDefaultBackgroundColor(editor);\n      const lastForeColor = Cell(fallbackColorForeground);\n      const lastBackColor = Cell(fallbackColorBackground);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n    };\n\n    const createPartialChoiceMenu = (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) => {\n      const hasIcons = menuHasIcons(items);\n      const presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      const alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      const menuLayout = { menuType: presets };\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, menuLayout);\n    };\n    const createChoiceItems = (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) => cat(map$2(items, item => {\n      if (item.type === 'choiceitem') {\n        return createChoiceMenuItem(item).fold(handleError, d => Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(d.value), itemResponse, providersBackstage, menuHasIcons(items))));\n      } else {\n        return Optional.none();\n      }\n    }));\n\n    const deriveMenuMovement = (columns, presets) => {\n      const menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        const rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass,\n          previousSelector: menu => {\n            return presets === 'color' ? descendant(menu.element, '[aria-checked=true]') : Optional.none();\n          }\n        };\n      }\n    };\n    const deriveCollectionMovement = (columns, presets) => {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? `.${ colorClass }` : `.${ selectableClass }`\n          }\n        };\n      }\n    };\n\n    const renderColorSwatchItem = (spec, backstage) => {\n      const items = getColorItems(spec, backstage);\n      const columns = backstage.colorinput.getColorCols(spec.initData.storageKey);\n      const presets = 'color';\n      const menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, value => {\n        spec.onAction({ value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), backstage.shared.providers);\n      const widgetSpec = {\n        ...menuSpec,\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      };\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    const getColorItems = (spec, backstage) => {\n      const useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(() => getColors$1(backstage.colorinput.getColors(spec.initData.storageKey), spec.initData.storageKey, useCustomColors), colors => colors.concat(getAdditionalColors(useCustomColors)));\n    };\n\n    const cellOverEvent = generate$6('cell-over');\n    const cellExecuteEvent = generate$6('cell-execute');\n    const makeAnnouncementText = backstage => (row, col) => backstage.shared.providers.translate([\n      '{0} columns, {1} rows',\n      col,\n      row\n    ]);\n    const makeCell = (row, col, label) => {\n      const emitCellOver = c => emitWith(c, cellOverEvent, {\n        row,\n        col\n      });\n      const emitExecute = c => emitWith(c, cellExecuteEvent, {\n        row,\n        col\n      });\n      const onClick = (c, se) => {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: {\n            role: 'button',\n            ['aria-label']: label\n          }\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    const makeCells = (getCellLabel, numRows, numCols) => {\n      const cells = [];\n      for (let i = 0; i < numRows; i++) {\n        const row = [];\n        for (let j = 0; j < numCols; j++) {\n          const label = getCellLabel(i + 1, j + 1);\n          row.push(makeCell(i, j, label));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    const selectCells = (cells, selectedRow, selectedColumn, numRows, numColumns) => {\n      for (let i = 0; i < numRows; i++) {\n        for (let j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    const makeComponents = cells => bind$3(cells, cellRow => map$2(cellRow, premade));\n    const makeLabelText = (row, col) => text$2(`${ col }x${ row }`);\n    const renderInsertTableMenuItem = (spec, backstage) => {\n      const numRows = 10;\n      const numColumns = 10;\n      const getCellLabel = makeAnnouncementText(backstage);\n      const cells = makeCells(getCellLabel, numRows, numColumns);\n      const emptyLabelText = makeLabelText(0, 0);\n      const memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label']\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(c => {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, (c, t, e) => {\n                  const {row, col} = e.event;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, (c, _, e) => {\n                  const {row, col} = e.event;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows,\n                  numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    const fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    const renderFancyMenuItem = (spec, backstage) => get$g(fancyMenuItems, spec.fancytype).map(render => render(spec, backstage));\n\n    const renderNestedItem = (spec, itemResponse, providersBackstage, renderIcons = true, downwardsCaret = false) => {\n      const caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      const getApi = component => ({\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state),\n        setIconFill: (id, value) => {\n          descendant(component.element, `svg path[class=\"${ id }\"], rect[class=\"${ id }\"]`).each(underlinePath => {\n            set$9(underlinePath, 'fill', value);\n          });\n        },\n        setTooltip: tooltip => {\n          const translatedTooltip = providersBackstage.translate(tooltip);\n          set$9(component.element, 'aria-label', translatedTooltip);\n        }\n      });\n      const structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi,\n        enabled: spec.enabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    const renderNormalItem = (spec, itemResponse, providersBackstage, renderIcons = true) => {\n      const getApi = component => ({\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state)\n      });\n      const structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi,\n        enabled: spec.enabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    const renderSeparatorItem = spec => ({\n      type: 'separator',\n      dom: {\n        tag: 'div',\n        classes: [\n          selectableClass,\n          groupHeadingClass\n        ]\n      },\n      components: spec.text.map(text$2).toArray()\n    });\n\n    const renderToggleMenuItem = (spec, itemResponse, providersBackstage, renderIcons = true) => {\n      const getApi = component => ({\n        setActive: state => {\n          Toggling.set(component, state);\n        },\n        isActive: () => Toggling.isOn(component),\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state)\n      });\n      const structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        enabled: spec.enabled,\n        getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    const autocomplete = renderAutocompleteItem;\n    const separator$3 = renderSeparatorItem;\n    const normal = renderNormalItem;\n    const nested = renderNestedItem;\n    const toggle$1 = renderToggleMenuItem;\n    const fancy = renderFancyMenuItem;\n    const card = renderCardMenuItem;\n\n    const getCoupled = (component, coupleConfig, coupleState, name) => coupleState.getOrCreate(component, coupleConfig, name);\n    const getExistingCoupled = (component, coupleConfig, coupleState, name) => coupleState.getExisting(component, coupleConfig, name);\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled,\n        getExistingCoupled: getExistingCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    const init$a = () => {\n      const coupled = {};\n      const lookupCoupled = (coupleConfig, coupledName) => {\n        const available = keys(coupleConfig.others);\n        if (available.length === 0) {\n          throw new Error('Cannot find any known coupled components');\n        } else {\n          return get$g(coupled, coupledName);\n        }\n      };\n      const getOrCreate = (component, coupleConfig, name) => {\n        return lookupCoupled(coupleConfig, name).getOrThunk(() => {\n          const builder = get$g(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n          const spec = builder(component);\n          const built = component.getSystem().build(spec);\n          coupled[name] = built;\n          return built;\n        });\n      };\n      const getExisting = (component, coupleConfig, name) => {\n        return lookupCoupled(coupleConfig, name).orThunk(() => {\n          get$g(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n          return Optional.none();\n        });\n      };\n      const readState = constant$1({});\n      return nu$8({\n        readState,\n        getExisting,\n        getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    const Coupling = create$4({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    const nu$3 = baseFn => {\n      let data = Optional.none();\n      let callbacks = [];\n      const map = f => nu$3(nCallback => {\n        get(data => {\n          nCallback(f(data));\n        });\n      });\n      const get = nCallback => {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      const set = x => {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      const isReady = () => data.isSome();\n      const run = cbs => {\n        each$1(cbs, call);\n      };\n      const call = cb => {\n        data.each(x => {\n          setTimeout(() => {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get,\n        map,\n        isReady\n      };\n    };\n    const pure$1 = a => nu$3(callback => {\n      callback(a);\n    });\n    const LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    const errorReporter = err => {\n      setTimeout(() => {\n        throw err;\n      }, 0);\n    };\n    const make$5 = run => {\n      const get = callback => {\n        run().then(callback, errorReporter);\n      };\n      const map = fab => {\n        return make$5(() => run().then(fab));\n      };\n      const bind = aFutureB => {\n        return make$5(() => run().then(v => aFutureB(v).toPromise()));\n      };\n      const anonBind = futureB => {\n        return make$5(() => run().then(() => futureB.toPromise()));\n      };\n      const toLazy = () => {\n        return LazyValue.nu(get);\n      };\n      const toCached = () => {\n        let cache = null;\n        return make$5(() => {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      const toPromise = run;\n      return {\n        map,\n        bind,\n        anonBind,\n        toLazy,\n        toCached,\n        toPromise,\n        get\n      };\n    };\n    const nu$2 = baseFn => {\n      return make$5(() => new Promise(baseFn));\n    };\n    const pure = a => {\n      return make$5(() => Promise.resolve(a));\n    };\n    const Future = {\n      nu: nu$2,\n      pure\n    };\n\n    const suffix = constant$1('sink');\n    const partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    const getAnchor = (detail, component) => {\n      const hotspot = detail.getHotspot(component).getOr(component);\n      const type = 'hotspot';\n      const overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(() => ({\n        type,\n        hotspot,\n        overrides\n      }), layouts => ({\n        type,\n        hotspot,\n        overrides,\n        layouts\n      }));\n    };\n    const fetch = (detail, mapFetch, component) => {\n      const fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    const openF = (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) => {\n      const futureData = fetch(detail, mapFetch, component);\n      const getLazySink = getSink(component, detail);\n      return futureData.map(tdata => tdata.bind(data => Optional.from(tieredMenu.sketch({\n        ...externals.menu(),\n        uid: generate$5(''),\n        data,\n        highlightOnOpen,\n        onOpenMenu: (tmenu, menu) => {\n          const sink = getLazySink().getOrDie();\n          Positioning.position(sink, menu, { anchor });\n          Sandboxing.decloak(sandbox);\n        },\n        onOpenSubmenu: (tmenu, item, submenu) => {\n          const sink = getLazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: {\n              type: 'submenu',\n              item\n            }\n          });\n          Sandboxing.decloak(sandbox);\n        },\n        onRepositionMenu: (tmenu, primaryMenu, submenuTriggers) => {\n          const sink = getLazySink().getOrDie();\n          Positioning.position(sink, primaryMenu, { anchor });\n          each$1(submenuTriggers, st => {\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: {\n                type: 'submenu',\n                item: st.triggeringItem\n              }\n            });\n          });\n        },\n        onEscape: () => {\n          Focusing.focus(component);\n          Sandboxing.close(sandbox);\n          return Optional.some(true);\n        }\n      }))));\n    };\n    const open = (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) => {\n      const anchor = getAnchor(detail, hotspot);\n      const processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(tdata => {\n        tdata.fold(() => {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, data => {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    const close = (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) => {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    const togglePopup = (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) => {\n      const sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      const showing = Sandboxing.isOpen(sandbox);\n      const action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    const matchWidth = (hotspot, container, useMinWidth) => {\n      const menu = Composing.getCurrent(container).getOr(container);\n      const buttonWidth = get$c(hotspot.element);\n      if (useMinWidth) {\n        set$8(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$7(menu.element, buttonWidth);\n      }\n    };\n    const getSink = (anyInSystem, sinkDetail) => anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(internalSink => () => Result.value(internalSink)).getOrThunk(() => sinkDetail.lazySink.fold(() => () => Result.error(new Error('No internal sink is specified, nor could an external sink be found')), lazySinkFn => () => lazySinkFn(anyInSystem)));\n    const doRepositionMenus = sandbox => {\n      Sandboxing.getState(sandbox).each(tmenu => {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    const makeSandbox$1 = (detail, hotspot, extras) => {\n      const ariaControls = manager();\n      const onOpen = (component, menu) => {\n        const anchor = getAnchor(detail, hotspot);\n        ariaControls.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      const onClose = (component, menu) => {\n        ariaControls.unlink(hotspot.element);\n        lazySink().getOr(menu).element.dom.dispatchEvent(new window.FocusEvent('focusout'));\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      const lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaControls.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen,\n            onClose,\n            isPartOf: (container, data, queryElem) => {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: () => {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: sandbox => {\n              return Sandboxing.getState(sandbox).bind(menu => Composing.getCurrent(menu));\n            }\n          }),\n          Receiving.config({\n            channels: {\n              ...receivingChannel$1({ isExtraPart: never }),\n              ...receivingChannel({ doReposition: doRepositionMenus })\n            }\n          })\n        ])\n      };\n    };\n    const repositionMenus = comp => {\n      const sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    const sandboxFields = () => [\n      defaulted('sandboxClasses', []),\n      SketchBehaviours.field('sandboxBehaviours', [\n        Composing,\n        Receiving,\n        Sandboxing,\n        Representing\n      ])\n    ];\n\n    const schema$k = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option$3('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option$3('role')\n    ].concat(sandboxFields()));\n    const parts$e = constant$1([\n      external({\n        schema: [\n          tieredMenuMarkers(),\n          defaulted('fakeFocus', false)\n        ],\n        name: 'menu',\n        defaults: detail => {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    const factory$k = (detail, components, _spec, externals) => {\n      const lookupAttr = attr => get$g(detail.dom, 'attributes').bind(attrs => get$g(attrs, attr));\n      const switchToMenu = sandbox => {\n        Sandboxing.getState(sandbox).each(tmenu => {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      const togglePopup$1 = (dropdownComp, onOpenSync, highlightOnOpen) => {\n        return togglePopup(detail, identity, dropdownComp, externals, onOpenSync, highlightOnOpen);\n      };\n      const action = component => {\n        const onOpenSync = switchToMenu;\n        togglePopup$1(component, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n      };\n      const apis = {\n        expand: comp => {\n          if (!Toggling.isOn(comp)) {\n            togglePopup$1(comp, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: comp => {\n          if (!Toggling.isOn(comp)) {\n            togglePopup$1(comp, noop, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n          }\n        },\n        refetch: comp => {\n          const optSandbox = Coupling.getExistingCoupled(comp, 'sandbox');\n          return optSandbox.fold(() => {\n            return togglePopup$1(comp, noop, HighlightOnOpen.HighlightMenuAndItem).map(noop);\n          }, sandboxComp => {\n            return open(detail, identity, comp, sandboxComp, externals, noop, HighlightOnOpen.HighlightMenuAndItem).map(noop);\n          });\n        },\n        isOpen: Toggling.isOn,\n        close: comp => {\n          if (Toggling.isOn(comp)) {\n            togglePopup$1(comp, noop, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n          }\n        },\n        repositionMenus: comp => {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      const triggerExecute = (comp, _se) => {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: hotspot => {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: () => Toggling.on(hotspot),\n                  onClose: () => Toggling.off(hotspot)\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: (comp, _se) => {\n              if (Dropdown.isOpen(comp)) {\n                const sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: (comp, _se) => {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: {\n          ...detail.eventOrder,\n          [execute$5()]: [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        },\n        apis,\n        domModification: {\n          attributes: {\n            'aria-haspopup': 'true',\n            ...detail.role.fold(() => ({}), role => ({ role })),\n            ...detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {}\n          }\n        }\n      };\n    };\n    const Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$k(),\n      partFields: parts$e(),\n      factory: factory$k,\n      apis: {\n        open: (apis, comp) => apis.open(comp),\n        refetch: (apis, comp) => apis.refetch(comp),\n        expand: (apis, comp) => apis.expand(comp),\n        close: (apis, comp) => apis.close(comp),\n        isOpen: (apis, comp) => apis.isOpen(comp),\n        repositionMenus: (apis, comp) => apis.repositionMenus(comp)\n      }\n    });\n\n    const identifyMenuLayout = searchMode => {\n      switch (searchMode.searchMode) {\n      case 'no-search': {\n          return { menuType: 'normal' };\n        }\n      default: {\n          return {\n            menuType: 'searchable',\n            searchMode\n          };\n        }\n      }\n    };\n    const handleRefetchTrigger = originalSandboxComp => {\n      const dropdown = Representing.getValue(originalSandboxComp);\n      const optSearcherState = findWithinSandbox(originalSandboxComp).map(saveState);\n      Dropdown.refetch(dropdown).get(() => {\n        const newSandboxComp = Coupling.getCoupled(dropdown, 'sandbox');\n        optSearcherState.each(searcherState => findWithinSandbox(newSandboxComp).each(inputComp => restoreState(inputComp, searcherState)));\n      });\n    };\n    const handleRedirectToMenuItem = (sandboxComp, se) => {\n      getActiveMenuItemFrom(sandboxComp).each(activeItem => {\n        retargetAndDispatchWith(sandboxComp, activeItem.element, se.event.eventType, se.event.interactionEvent);\n      });\n    };\n    const getActiveMenuItemFrom = sandboxComp => {\n      return Sandboxing.getState(sandboxComp).bind(Highlighting.getHighlighted).bind(Highlighting.getHighlighted);\n    };\n    const getSearchResults = activeMenuComp => {\n      return has(activeMenuComp.element, searchResultsClass) ? Optional.some(activeMenuComp.element) : descendant(activeMenuComp.element, '.' + searchResultsClass);\n    };\n    const updateAriaOnHighlight = (tmenuComp, menuComp, itemComp) => {\n      findWithinMenu(tmenuComp).each(inputComp => {\n        setActiveDescendant(inputComp, itemComp);\n        const optActiveResults = getSearchResults(menuComp);\n        optActiveResults.each(resultsElem => {\n          getOpt(resultsElem, 'id').each(controlledId => set$9(inputComp.element, 'aria-controls', controlledId));\n        });\n      });\n      set$9(itemComp.element, 'aria-selected', 'true');\n    };\n    const updateAriaOnDehighlight = (tmenuComp, menuComp, itemComp) => {\n      set$9(itemComp.element, 'aria-selected', 'false');\n    };\n    const focusSearchField = tmenuComp => {\n      findWithinMenu(tmenuComp).each(searcherComp => Focusing.focus(searcherComp));\n    };\n    const getSearchPattern = dropdownComp => {\n      const optSandboxComp = Coupling.getExistingCoupled(dropdownComp, 'sandbox');\n      return optSandboxComp.bind(findWithinSandbox).map(saveState).map(state => state.fetchPattern).getOr('');\n    };\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    const createMenuItemFromBridge = (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) => {\n      const providersBackstage = backstage.shared.providers;\n      const parseForHorizontalMenu = menuitem => !isHorizontalMenu ? menuitem : {\n        ...menuitem,\n        shortcut: Optional.none(),\n        icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, d => Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons)));\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, d => Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu)));\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, d => Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons)));\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, d => Optional.some(separator$3(d)));\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, d => fancy(d, backstage));\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    const createAutocompleteItems = (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) => {\n      const renderText = columns === 1;\n      const renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, item => {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, d => Optional.some(separator$3(d)));\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, d => Optional.some(card({\n            ...d,\n            onAction: api => {\n              d.onAction(api);\n              onItemValueHandler(d.value, d.meta);\n            }\n          }, itemResponse, sharedBackstage, {\n            itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage, Optional.none()),\n            cardText: {\n              matchText,\n              highlightOn\n            }\n          })));\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, d => Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons)));\n        }\n      }));\n    };\n    const createPartialMenu = (value, items, itemResponse, backstage, isHorizontalMenu, searchMode) => {\n      const hasIcons = menuHasIcons(items);\n      const alloyItems = cat(map$2(items, item => {\n        const itemHasIcon = i => isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        const createItem = i => createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem({\n            ...item,\n            enabled: false\n          });\n        } else {\n          return createItem(item);\n        }\n      }));\n      const menuLayout = identifyMenuLayout(searchMode);\n      const createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, menuLayout);\n    };\n    const createTieredDataFrom = partialMenu => tieredMenu.singleData(partialMenu.value, partialMenu);\n    const createInlineMenuFrom = (partialMenu, columns, focusMode, presets) => {\n      const movement = deriveMenuMovement(columns, presets);\n      const menuMarkers = markers(presets);\n      return {\n        data: createTieredDataFrom({\n          ...partialMenu,\n          movement,\n          menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached((comp, _se) => {\n              detectSize(comp, 4, menuMarkers.item).each(({numColumns, numRows}) => {\n                Keying.setGridSize(comp, numRows, numColumns);\n              });\n            })])\n        }),\n        menu: {\n          markers: markers(presets),\n          fakeFocus: focusMode === FocusMode.ContentFocus\n        }\n      };\n    };\n\n    const rangeToSimRange = r => SimRange.create(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    const register$b = (editor, sharedBackstage) => {\n      const autocompleterId = generate$6('autocompleter');\n      const processingAction = Cell(false);\n      const activeState = Cell(false);\n      const activeRange = value$2();\n      const autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter'],\n          attributes: { id: autocompleterId }\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [\n            run$1(dismissRequested(), () => cancelIfNecessary()),\n            run$1(highlight$1(), (_, se) => {\n              getOpt(se.event.target, 'id').each(id => set$9(SugarElement.fromDom(editor.getBody()), 'aria-activedescendant', id));\n            })\n          ])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      const isMenuOpen = () => InlineView.isOpen(autocompleter);\n      const isActive = activeState.get;\n      const hideIfNecessary = () => {\n        if (isMenuOpen()) {\n          InlineView.hide(autocompleter);\n          editor.dom.remove(autocompleterId, false);\n          const editorBody = SugarElement.fromDom(editor.getBody());\n          getOpt(editorBody, 'aria-owns').filter(ariaOwnsAttr => ariaOwnsAttr === autocompleterId).each(() => {\n            remove$7(editorBody, 'aria-owns');\n            remove$7(editorBody, 'aria-activedescendant');\n          });\n        }\n      };\n      const getMenu = () => InlineView.getContent(autocompleter).bind(tmenu => {\n        return get$h(tmenu.components(), 0);\n      });\n      const cancelIfNecessary = () => editor.execCommand('mceAutocompleterClose');\n      const getCombinedItems = matches => {\n        const columns = findMap(matches, m => Optional.from(m.columns)).getOr(1);\n        return bind$3(matches, match => {\n          const choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, (itemValue, itemMeta) => {\n            const autocompleterApi = {\n              hide: () => cancelIfNecessary(),\n              reload: fetchOptions => {\n                hideIfNecessary();\n                editor.execCommand('mceAutocompleterReload', false, { fetchOptions });\n              }\n            };\n            editor.execCommand('mceAutocompleterRefreshActiveRange');\n            activeRange.get().each(range => {\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      const display = (lookupData, items) => {\n        const columns = findMap(lookupData, ld => Optional.from(ld.columns)).getOr(1);\n        InlineView.showMenuAt(autocompleter, {\n          anchor: {\n            type: 'selection',\n            getSelection: () => activeRange.get().map(rangeToSimRange),\n            root: SugarElement.fromDom(editor.getBody())\n          }\n        }, createInlineMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, { menuType: 'normal' }), columns, FocusMode.ContentFocus, 'normal'));\n        getMenu().each(Highlighting.highlightFirst);\n      };\n      const updateDisplay = lookupData => {\n        const combinedItems = getCombinedItems(lookupData);\n        if (combinedItems.length > 0) {\n          display(lookupData, combinedItems);\n          set$9(SugarElement.fromDom(editor.getBody()), 'aria-owns', autocompleterId);\n          if (!editor.inline) {\n            cloneAutocompleterToEditorDoc();\n          }\n        } else {\n          hideIfNecessary();\n        }\n      };\n      const cloneAutocompleterToEditorDoc = () => {\n        if (editor.dom.get(autocompleterId)) {\n          editor.dom.remove(autocompleterId, false);\n        }\n        const docElm = editor.getDoc().documentElement;\n        const selection = editor.selection.getNode();\n        const newElm = deep(autocompleter.element);\n        setAll(newElm, {\n          border: '0',\n          clip: 'rect(0 0 0 0)',\n          height: '1px',\n          margin: '-1px',\n          overflow: 'hidden',\n          padding: '0',\n          position: 'absolute',\n          width: '1px',\n          top: `${ selection.offsetTop }px`,\n          left: `${ selection.offsetLeft }px`\n        });\n        editor.dom.add(docElm, newElm.dom);\n        descendant(newElm, '[role=\"menu\"]').each(child => {\n          remove$6(child, 'position');\n          remove$6(child, 'max-height');\n        });\n      };\n      editor.on('AutocompleterStart', ({lookupData}) => {\n        activeState.set(true);\n        processingAction.set(false);\n        updateDisplay(lookupData);\n      });\n      editor.on('AutocompleterUpdate', ({lookupData}) => updateDisplay(lookupData));\n      editor.on('AutocompleterUpdateActiveRange', ({range}) => activeRange.set(range));\n      editor.on('AutocompleterEnd', () => {\n        hideIfNecessary();\n        activeState.set(false);\n        processingAction.set(false);\n        activeRange.clear();\n      });\n      const autocompleterUiApi = {\n        cancelIfNecessary,\n        isMenuOpen,\n        isActive,\n        isProcessingAction: processingAction.get,\n        getMenu\n      };\n      AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n    };\n    const Autocompleter = { register: register$b };\n\n    const nonScrollingOverflows = [\n      'visible',\n      'hidden',\n      'clip'\n    ];\n    const isScrollingOverflowValue = value => trim$1(value).length > 0 && !contains$2(nonScrollingOverflows, value);\n    const isScroller = elem => {\n      if (isHTMLElement(elem)) {\n        const overflowX = get$e(elem, 'overflow-x');\n        const overflowY = get$e(elem, 'overflow-y');\n        return isScrollingOverflowValue(overflowX) || isScrollingOverflowValue(overflowY);\n      } else {\n        return false;\n      }\n    };\n    const detect = popupSinkElem => {\n      const ancestorsScrollers = ancestors(popupSinkElem, isScroller);\n      const scrollers = ancestorsScrollers.length === 0 ? getShadowRoot(popupSinkElem).map(getShadowHost).map(x => ancestors(x, isScroller)).getOr([]) : ancestorsScrollers;\n      return head(scrollers).map(element => ({\n        element,\n        others: scrollers.slice(1)\n      }));\n    };\n    const detectWhenSplitUiMode = (editor, popupSinkElem) => isSplitUiMode(editor) ? detect(popupSinkElem) : Optional.none();\n    const getBoundsFrom = sc => {\n      const scrollableBoxes = [\n        ...map$2(sc.others, box$1),\n        win()\n      ];\n      return constrainByMany(box$1(sc.element), scrollableBoxes);\n    };\n\n    const closest = (scope, selector, isRoot) => closest$1(scope, selector, isRoot).isSome();\n\n    const DelayedFunction = (fun, delay) => {\n      let ref = null;\n      const schedule = (...args) => {\n        ref = setTimeout(() => {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      const cancel = () => {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel,\n        schedule\n      };\n    };\n\n    const SIGNIFICANT_MOVE = 5;\n    const LONGPRESS_DELAY = 400;\n    const getTouch = event => {\n      const raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    const isFarEnough = (touch, data) => {\n      const distX = Math.abs(touch.clientX - data.x);\n      const distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    const monitor = settings => {\n      const startData = value$2();\n      const longpressFired = Cell(false);\n      const longpress$1 = DelayedFunction(event => {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      const handleTouchstart = event => {\n        getTouch(event).each(touch => {\n          longpress$1.cancel();\n          const data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      const handleTouchmove = event => {\n        longpress$1.cancel();\n        getTouch(event).each(touch => {\n          startData.on(data => {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      const handleTouchend = event => {\n        longpress$1.cancel();\n        const isSame = data => eq(data.target, event.target);\n        return startData.get().filter(isSame).map(_data => {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      const handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      const fireIfReady = (event, type) => get$g(handlers, type).bind(handler => handler(event));\n      return { fireIfReady };\n    };\n\n    const isDangerous = event => {\n      const keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$3(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    const setup$d = (container, rawSettings) => {\n      const settings = {\n        stopBackspace: true,\n        ...rawSettings\n      };\n      const pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      const tapEvent = monitor(settings);\n      const simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), type => bind(container, type, event => {\n        tapEvent.fireIfReady(event, type).each(tapStopped => {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        const stopped = settings.triggerEvent(type, event);\n        if (stopped) {\n          event.kill();\n        }\n      }));\n      const pasteTimeout = value$2();\n      const onPaste = bind(container, 'paste', event => {\n        tapEvent.fireIfReady(event, 'paste').each(tapStopped => {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        const stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(() => {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      const onKeydown = bind(container, 'keydown', event => {\n        const stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      const onFocusIn = bind(container, 'focusin', event => {\n        const stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      const focusoutTimeout = value$2();\n      const onFocusOut = bind(container, 'focusout', event => {\n        const stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(() => {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      const unbind = () => {\n        each$1(simpleEvents, e => {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind };\n    };\n\n    const derive = (rawEvent, rawTarget) => {\n      const source = get$g(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    const fromSource = (event, source) => {\n      const stopper = Cell(false);\n      const cutter = Cell(false);\n      const stop = () => {\n        stopper.set(true);\n      };\n      const cut = () => {\n        cutter.set(true);\n      };\n      return {\n        stop,\n        cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    const fromExternal = event => {\n      const stopper = Cell(false);\n      const stop = () => {\n        stopper.set(true);\n      };\n      return {\n        stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    const adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    const doTriggerHandler = (lookup, eventType, rawEvent, target, source, logger) => {\n      const handler = lookup(eventType, target);\n      const simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(() => {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, handlerInfo => {\n        const descHandler = handlerInfo.descHandler;\n        const eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(() => {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, parent => {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    const doTriggerOnUntilStopped = (lookup, eventType, rawEvent, rawTarget, source, logger) => doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, parent => doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger), never);\n    const triggerHandler = (lookup, eventType, rawEvent, target, logger) => {\n      const source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    const broadcast = (listeners, rawEvent, _logger) => {\n      const simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, listener => {\n        const descHandler = listener.descHandler;\n        const handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    const triggerUntilStopped = (lookup, eventType, rawEvent, logger) => triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    const triggerOnUntilStopped = (lookup, eventType, rawEvent, rawTarget, logger) => {\n      const source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    const eventHandler = (element, descHandler) => ({\n      element,\n      descHandler\n    });\n    const broadcastHandler = (id, handler) => ({\n      id,\n      descHandler: handler\n    });\n    const EventRegistry = () => {\n      const registry = {};\n      const registerId = (extraArgs, id, events) => {\n        each(events, (v, k) => {\n          const handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      const findHandler = (handlers, elem) => read$1(elem).bind(id => get$g(handlers, id)).map(descHandler => eventHandler(elem, descHandler));\n      const filterByType = type => get$g(registry, type).map(handlers => mapToArray(handlers, (f, id) => broadcastHandler(id, f))).getOr([]);\n      const find = (isAboveRoot, type, target) => get$g(registry, type).bind(handlers => closest$4(target, elem => findHandler(handlers, elem), isAboveRoot));\n      const unregisterId = id => {\n        each(registry, (handlersById, _eventName) => {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId,\n        unregisterId,\n        filterByType,\n        find\n      };\n    };\n\n    const Registry = () => {\n      const events = EventRegistry();\n      const components = {};\n      const readOrTag = component => {\n        const elem = component.element;\n        return read$1(elem).getOrThunk(() => write('uid-', component.element));\n      };\n      const failOnDuplicate = (component, tagId) => {\n        const conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      const register = component => {\n        const tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        const extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      const unregister = component => {\n        read$1(component.element).each(tagId => {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      const filter = type => events.filterByType(type);\n      const find = (isAboveRoot, type, target) => events.find(isAboveRoot, type, target);\n      const getById = id => get$g(components, id);\n      return {\n        find,\n        filter,\n        register,\n        unregister,\n        getById\n      };\n    };\n\n    const factory$j = detail => {\n      const {attributes, ...domWithoutAttributes} = detail.dom;\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: {\n            role: 'presentation',\n            ...attributes\n          },\n          ...domWithoutAttributes\n        },\n        components: detail.components,\n        behaviours: get$3(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    const Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    const takeover = root => {\n      const isAboveRoot = el => parent(root.element).fold(always, parent => eq(el, parent));\n      const registry = Registry();\n      const lookup = (eventName, target) => registry.find(isAboveRoot, eventName, target);\n      const domEvents = setup$d(root.element, {\n        triggerEvent: (eventName, event) => {\n          return monitorEvent(eventName, event.target, logger => triggerUntilStopped(lookup, eventName, event, logger));\n        }\n      });\n      const systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: (eventName, target, data) => {\n          monitorEvent(eventName, target, logger => triggerOnUntilStopped(lookup, eventName, data, target, logger));\n        },\n        triggerFocus: (target, originator) => {\n          read$1(target).fold(() => {\n            focus$3(target);\n          }, _alloyId => {\n            monitorEvent(focus$4(), target, logger => {\n              triggerHandler(lookup, focus$4(), {\n                originator,\n                kill: noop,\n                prevent: noop,\n                target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: (comp, simulatedEvent) => {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: uid => {\n          return getByUid(uid);\n        },\n        getByDom: elem => {\n          return getByDom(elem);\n        },\n        build: build$1,\n        buildOrPatch: buildOrPatch,\n        addToGui: c => {\n          add(c);\n        },\n        removeFromGui: c => {\n          remove(c);\n        },\n        addToWorld: c => {\n          addToWorld(c);\n        },\n        removeFromWorld: c => {\n          removeFromWorld(c);\n        },\n        broadcast: message => {\n          broadcast$1(message);\n        },\n        broadcastOn: (channels, message) => {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: (eventName, event) => {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      const addToWorld = component => {\n        component.connect(systemApi);\n        if (!isText(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      const removeFromWorld = component => {\n        if (!isText(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      const add = component => {\n        attach(root, component);\n      };\n      const remove = component => {\n        detach(component);\n      };\n      const destroy = () => {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      const broadcastData = data => {\n        const receivers = registry.filter(receive());\n        each$1(receivers, receiver => {\n          const descHandler = receiver.descHandler;\n          const handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      const broadcast$1 = message => {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      const broadcastOn = (channels, message) => {\n        broadcastData({\n          universal: false,\n          channels,\n          data: message\n        });\n      };\n      const broadcastEvent = (eventName, event) => {\n        const listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      const getByUid = uid => registry.getById(uid).fold(() => Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.')), Result.value);\n      const getByDom = elem => {\n        const uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root,\n        element: root.element,\n        destroy,\n        add,\n        remove,\n        getByUid,\n        getByDom,\n        addToWorld,\n        removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn,\n        broadcastEvent\n      };\n    };\n\n    const renderBar = (spec, backstage) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-bar',\n          'tox-form__controls-h-stack'\n        ]\n      },\n      components: map$2(spec.items, backstage.interpreter)\n    });\n\n    const schema$j = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    const parts$d = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: spec => {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: spec => {\n            const excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    const factory$i = (detail, components, _spec, _externals) => {\n      const behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: container => {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: field => {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: (field, value) => {\n              Composing.getCurrent(field).each(current => {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      const events = derive$2([runOnAttached((component, _simulatedEvent) => {\n          const ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(field => {\n            const id = generate$6(detail.prefix);\n            ps.label().each(label => {\n              set$9(label.element, 'for', id);\n              set$9(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(descriptor => {\n              const descriptorId = generate$6(detail.prefix);\n              set$9(descriptor.element, 'id', descriptorId);\n              set$9(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      const apis = {\n        getField: container => getPart(container, detail, 'field'),\n        getLabel: container => getPart(container, detail, 'label')\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours,\n        events,\n        apis\n      };\n    };\n    const FormField = composite({\n      name: 'FormField',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$i,\n      apis: {\n        getField: (apis, comp) => apis.getField(comp),\n        getLabel: (apis, comp) => apis.getLabel(comp)\n      }\n    });\n\n    const exhibit$2 = (base, tabConfig) => nu$7({\n      attributes: wrapAll([{\n          key: tabConfig.tabAttr,\n          value: 'true'\n        }])\n    });\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    const Tabstopping = create$4({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    const renderFormFieldWith = (pLabel, pField, extraClasses, extraBehaviours) => {\n      const spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    const renderFormField = (pLabel, pField) => renderFormFieldWith(pLabel, pField, [], []);\n    const renderFormFieldSpecWith = (pLabel, pField, extraClasses, extraBehaviours) => ({\n      dom: renderFormFieldDomWith(extraClasses),\n      components: pLabel.toArray().concat([pField]),\n      fieldBehaviours: derive$1(extraBehaviours)\n    });\n    const renderFormFieldDom = () => renderFormFieldDomWith([]);\n    const renderFormFieldDomWith = extraClasses => ({\n      tag: 'div',\n      classes: ['tox-form__group'].concat(extraClasses)\n    });\n    const renderLabel$3 = (label, providersBackstage) => FormField.parts.label({\n      dom: {\n        tag: 'label',\n        classes: ['tox-label']\n      },\n      components: [text$2(providersBackstage.translate(label))]\n    });\n\n    const formChangeEvent = generate$6('form-component-change');\n    const formCloseEvent = generate$6('form-close');\n    const formCancelEvent = generate$6('form-cancel');\n    const formActionEvent = generate$6('form-action');\n    const formSubmitEvent = generate$6('form-submit');\n    const formBlockEvent = generate$6('form-block');\n    const formUnblockEvent = generate$6('form-unblock');\n    const formTabChangeEvent = generate$6('form-tabchange');\n    const formResizeEvent = generate$6('form-resize');\n\n    const renderCollection = (spec, providersBackstage, initialData) => {\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const icons = providersBackstage.icons();\n      const getIcon = icon => {\n        var _a;\n        return (_a = icons[icon]) !== null && _a !== void 0 ? _a : icon;\n      };\n      const runOnItem = f => (comp, se) => {\n        closest$1(se.event.target, '[data-collection-item-value]').each(target => {\n          f(comp, se, target, get$f(target, 'data-collection-item-value'));\n        });\n      };\n      const setContents = (comp, items) => {\n        const htmlLines = map$2(items, item => {\n          const itemText = global$8.translate(item.text);\n          const textContent = spec.columns === 1 ? `<div class=\"tox-collection__item-label\">${ itemText }</div>` : '';\n          const iconContent = `<div class=\"tox-collection__item-icon\">${ getIcon(item.icon) }</div>`;\n          const mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          const ariaLabel = itemText.replace(/\\_| \\- |\\-/g, match => mapItemName[match]);\n          const disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return `<div data-mce-tooltip=\"${ ariaLabel }\" class=\"tox-collection__item${ disabledClass }\" tabindex=\"-1\" data-collection-item-value=\"${ global$3.encodeAllRaw(item.value) }\" aria-label=\"${ ariaLabel }\">${ iconContent }${ textContent }</div>`;\n        });\n        const chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        const html = map$2(chunks, ch => `<div class=\"tox-collection__group\">${ ch.join('') }</div>`);\n        set$6(comp.element, html.join(''));\n      };\n      const onClick = runOnItem((comp, se, tgt, itemValue) => {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      const collectionEvents = [\n        run$1(mouseover(), runOnItem((comp, se, tgt) => {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem((comp, se, tgt) => {\n          descendant(comp.element, '.' + activeClass).each(currentActive => {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(comp => {\n          descendant(comp.element, '.' + activeClass).each(currentActive => {\n            remove$2(currentActive, activeClass);\n            blur$1(currentActive);\n          });\n        })),\n        runOnExecute$1(runOnItem((comp, se, tgt, itemValue) => {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      const iterCollectionItems = (comp, applyAttributes) => map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      const pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: comp => {\n              iterCollectionItems(comp, childElm => {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$9(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: comp => {\n              iterCollectionItems(comp, childElm => {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Tooltipping.config({\n            ...providersBackstage.tooltips.getConfig({\n              tooltipText: '',\n              onShow: comp => {\n                descendant(comp.element, '.' + activeClass + '[data-mce-tooltip]').each(current => {\n                  getOpt(current, 'data-mce-tooltip').each(text => {\n                    Tooltipping.setComponents(comp, providersBackstage.tooltips.getComponents({ tooltipText: text }));\n                  });\n                });\n              }\n            }),\n            mode: 'children-keyboard-focus',\n            anchor: comp => ({\n              type: 'node',\n              node: descendant(comp.element, '.' + activeClass).orThunk(() => first$1('.tox-collection__item')),\n              root: comp.element,\n              layouts: {\n                onLtr: constant$1([\n                  south$2,\n                  north$2,\n                  southeast$2,\n                  northeast$2,\n                  southwest$2,\n                  northwest$2\n                ]),\n                onRtl: constant$1([\n                  south$2,\n                  north$2,\n                  southeast$2,\n                  northeast$2,\n                  southwest$2,\n                  northwest$2\n                ])\n              },\n              bubble: nu$5(0, -2, {})\n            })\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: initialData.getOr([])\n            },\n            onSetValue: (comp, items) => {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(({numRows, numColumns}) => {\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: {\n          [execute$5()]: [\n            'disabling',\n            'alloy.base.behaviour',\n            'collection-events'\n          ],\n          [focusin()]: [\n            'collection-events',\n            'tooltipping'\n          ]\n        }\n      });\n      const extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    const ariaElements = [\n      'input',\n      'textarea'\n    ];\n    const isAriaElement = elem => {\n      const name = name$3(elem);\n      return contains$2(ariaElements, name);\n    };\n    const markValid = (component, invalidConfig) => {\n      const elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(notifyInfo => {\n        if (isAriaElement(component.element)) {\n          set$9(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(container => {\n          set$6(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    const markInvalid = (component, invalidConfig, invalidState, text) => {\n      const elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(notifyInfo => {\n        if (isAriaElement(component.element)) {\n          set$9(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(container => {\n          set$6(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    const query = (component, invalidConfig, _invalidState) => invalidConfig.validator.fold(() => Future.pure(Result.value(true)), validatorInfo => validatorInfo.validate(component));\n    const run = (component, invalidConfig, invalidState) => {\n      invalidConfig.notify.each(notifyInfo => {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(valid => {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(err => {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, v => {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    const isInvalid = (component, invalidConfig) => {\n      const elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    const events$8 = (invalidConfig, invalidState) => invalidConfig.validator.map(validatorInfo => derive$2([run$1(validatorInfo.onEvent, component => {\n        run(component, invalidConfig, invalidState).get(identity);\n      })].concat(validatorInfo.validateOnLoad ? [runOnAttached(component => {\n        run(component, invalidConfig, invalidState).get(noop);\n      })] : []))).getOr({});\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    const Invalidating = create$4({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: validator => {\n          return component => {\n            const v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    const exhibit$1 = () => nu$7({\n      styles: {\n        '-webkit-user-select': 'none',\n        'user-select': 'none',\n        '-ms-user-select': 'none',\n        '-moz-user-select': '-moz-none'\n      },\n      attributes: { unselectable: 'on' }\n    });\n    const events$7 = () => derive$2([abort(selectstart(), always)]);\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    const Unselecting = create$4({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    const renderPanelButton = (spec, sharedBackstage) => Dropdown.sketch({\n      dom: spec.dom,\n      components: spec.components,\n      toggleClass: 'mce-active',\n      dropdownBehaviours: derive$1([\n        DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n        receivingConfig(),\n        Unselecting.config({}),\n        Tabstopping.config({})\n      ]),\n      layouts: spec.layouts,\n      sandboxClasses: ['tox-dialog__popups'],\n      lazySink: sharedBackstage.getSink,\n      fetch: comp => Future.nu(callback => spec.fetch(callback)).map(items => Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, value => {\n        spec.onItemAction(comp, value);\n      }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })))),\n      parts: { menu: part(false, 1, spec.presets) }\n    });\n\n    const colorInputChangeEvent = generate$6('color-input-change');\n    const colorSwatchChangeEvent = generate$6('color-swatch-change');\n    const colorPickerCancelEvent = generate$6('color-picker-cancel');\n    const renderColorInput = (spec, sharedBackstage, colorInputBackstage, initialData) => {\n      const pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        data: initialData,\n        onSetValue: c => Invalidating.run(c).get(noop),\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: comp => parentElement(comp.element),\n            notify: {\n              onValid: comp => {\n                const val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: input => {\n                const inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  const span = SugarElement.fromTag('span');\n                  set$8(span, 'background-color', inputValue);\n                  const res = getRaw(span, 'background-color').fold(() => Result.error('blah'), _ => Result.value(inputValue));\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      const pLabel = spec.label.map(label => renderLabel$3(label, sharedBackstage.providers));\n      const emitSwatchChange = (colorBit, value) => {\n        emitWith(colorBit, colorSwatchChangeEvent, { value });\n      };\n      const onItemAction = (comp, value) => {\n        memColorButton.getOpt(comp).each(colorBit => {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(valueOpt => {\n              valueOpt.fold(() => emit(colorBit, colorPickerCancelEvent), value => {\n                emitSwatchChange(colorBit, value);\n                addColor(spec.storageKey, value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      const memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: () => [\n            southwest$2,\n            southeast$2,\n            south$2\n          ],\n          onLtr: () => [\n            southeast$2,\n            southwest$2,\n            south$2\n          ]\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(spec.storageKey), spec.storageKey, colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(spec.storageKey),\n        presets: 'color',\n        onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, (comp, se) => {\n              memColorButton.getOpt(comp).each(colorButton => {\n                set$8(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, (comp, se) => {\n              FormField.getField(comp).each(field => {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, (comp, _se) => {\n              FormField.getField(comp).each(_field => {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    const labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    const edgePart = name => optional({\n      name: '' + name + '-edge',\n      overrides: detail => {\n        const action = detail.model.manager.edgeActions[name];\n        return action.fold(() => ({}), a => ({\n          events: derive$2([\n            runActionExtra(touchstart(), (comp, se, d) => a(comp, d), [detail]),\n            runActionExtra(mousedown(), (comp, se, d) => a(comp, d), [detail]),\n            runActionExtra(mousemove(), (comp, se, det) => {\n              if (det.mouseIsDown.get()) {\n                a(comp, det);\n              }\n            }, [detail])\n          ])\n        }));\n      }\n    });\n    const tlEdgePart = edgePart('top-left');\n    const tedgePart = edgePart('top');\n    const trEdgePart = edgePart('top-right');\n    const redgePart = edgePart('right');\n    const brEdgePart = edgePart('bottom-right');\n    const bedgePart = edgePart('bottom');\n    const blEdgePart = edgePart('bottom-left');\n    const ledgePart = edgePart('left');\n    const thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: detail => {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    const isShift = event => isShift$1(event.event);\n    const spectrumPart = required({\n      schema: [customField('mouseIsDown', () => Cell(false))],\n      name: 'spectrum',\n      overrides: detail => {\n        const modelDetail = detail.model;\n        const model = modelDetail.manager;\n        const setValueFrom = (component, simulatedEvent) => model.getValueFromEvent(simulatedEvent).map(value => model.setValueFrom(component, detail, value));\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: (spectrum, event) => model.onLeft(spectrum, detail, isShift(event)),\n              onRight: (spectrum, event) => model.onRight(spectrum, detail, isShift(event)),\n              onUp: (spectrum, event) => model.onUp(spectrum, detail, isShift(event)),\n              onDown: (spectrum, event) => model.onDown(spectrum, detail, isShift(event))\n            }),\n            Tabstopping.config({}),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), (spectrum, se) => {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    const _sliderChangeEvent = 'slider.change.value';\n    const sliderChangeEvent = constant$1(_sliderChangeEvent);\n    const isTouchEvent$2 = evt => evt.type.indexOf('touch') !== -1;\n    const getEventSource = simulatedEvent => {\n      const evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        const touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(t => SugarPosition(t.clientX, t.clientY)) : Optional.none();\n      } else {\n        const mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(me => SugarPosition(me.clientX, me.clientY)) : Optional.none();\n      }\n    };\n\n    const t = 'top', r = 'right', b = 'bottom', l = 'left';\n    const minX = detail => detail.model.minX;\n    const minY = detail => detail.model.minY;\n    const min1X = detail => detail.model.minX - 1;\n    const min1Y = detail => detail.model.minY - 1;\n    const maxX = detail => detail.model.maxX;\n    const maxY = detail => detail.model.maxY;\n    const max1X = detail => detail.model.maxX + 1;\n    const max1Y = detail => detail.model.maxY + 1;\n    const range = (detail, max, min) => max(detail) - min(detail);\n    const xRange = detail => range(detail, maxX, minX);\n    const yRange = detail => range(detail, maxY, minY);\n    const halfX = detail => xRange(detail) / 2;\n    const halfY = detail => yRange(detail) / 2;\n    const step = (detail, useMultiplier) => useMultiplier ? detail.stepSize * detail.speedMultiplier : detail.stepSize;\n    const snap = detail => detail.snapToGrid;\n    const snapStart = detail => detail.snapStart;\n    const rounded = detail => detail.rounded;\n    const hasEdge = (detail, edgeName) => detail[edgeName + '-edge'] !== undefined;\n    const hasLEdge = detail => hasEdge(detail, l);\n    const hasREdge = detail => hasEdge(detail, r);\n    const hasTEdge = detail => hasEdge(detail, t);\n    const hasBEdge = detail => hasEdge(detail, b);\n    const currentValue = detail => detail.model.value.get();\n\n    const xyValue = (x, y) => ({\n      x,\n      y\n    });\n    const fireSliderChange$3 = (component, value) => {\n      emitWith(component, sliderChangeEvent(), { value });\n    };\n    const setToTLEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    const setToTEdge = (edge, detail) => {\n      fireSliderChange$3(edge, min1Y(detail));\n    };\n    const setToTEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    const setToTREdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    const setToREdge = (edge, detail) => {\n      fireSliderChange$3(edge, max1X(detail));\n    };\n    const setToREdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    const setToBREdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    const setToBEdge = (edge, detail) => {\n      fireSliderChange$3(edge, max1Y(detail));\n    };\n    const setToBEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    const setToBLEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    const setToLEdge = (edge, detail) => {\n      fireSliderChange$3(edge, min1X(detail));\n    };\n    const setToLEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    const reduceBy = (value, min, max, step) => {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    const increaseBy = (value, min, max, step) => {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    const capValue = (value, min, max) => Math.max(min, Math.min(max, value));\n    const snapValueOf = (value, min, max, step, snapStart) => snapStart.fold(() => {\n      const initValue = value - min;\n      const extraValue = Math.round(initValue / step) * step;\n      return capValue(min + extraValue, min - 1, max + 1);\n    }, start => {\n      const remainder = (value - start) % step;\n      const adjustment = Math.round(remainder / step);\n      const rawSteps = Math.floor((value - start) / step);\n      const maxSteps = Math.floor((max - start) / step);\n      const numSteps = Math.min(maxSteps, rawSteps + adjustment);\n      const r = start + numSteps * step;\n      return Math.max(start, r);\n    });\n    const findOffsetOf = (value, min, max) => Math.min(max, Math.max(value, min)) - min;\n    const findValueOf = args => {\n      const {min, max, range, value, step, snap, snapStart, rounded, hasMinEdge, hasMaxEdge, minBound, maxBound, screenRange} = args;\n      const capMin = hasMinEdge ? min - 1 : min;\n      const capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        const offset = findOffsetOf(value, minBound, maxBound);\n        const newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    const findOffsetOfValue$2 = args => {\n      const {min, max, range, value, hasMinEdge, hasMaxEdge, maxBound, maxOffset, centerMinEdge, centerMaxEdge} = args;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    const top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    const getBounds = component => component.element.dom.getBoundingClientRect();\n    const getBoundsProperty = (bounds, property) => bounds[property];\n    const getMinXBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    const getMaxXBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    const getMinYBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    const getMaxYBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    const getXScreenRange = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    const getYScreenRange = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    const getCenterOffsetOf = (componentMinEdge, componentMaxEdge, spectrumMinEdge) => (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    const getXCenterOffSetOf = (component, spectrum) => {\n      const componentBounds = getBounds(component);\n      const spectrumBounds = getBounds(spectrum);\n      const componentMinEdge = getBoundsProperty(componentBounds, left);\n      const componentMaxEdge = getBoundsProperty(componentBounds, right);\n      const spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    const getYCenterOffSetOf = (component, spectrum) => {\n      const componentBounds = getBounds(component);\n      const spectrumBounds = getBounds(spectrum);\n      const componentMinEdge = getBoundsProperty(componentBounds, top);\n      const componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      const spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    const fireSliderChange$2 = (spectrum, value) => {\n      emitWith(spectrum, sliderChangeEvent(), { value });\n    };\n    const findValueOfOffset$1 = (spectrum, detail, left) => {\n      const args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    const setValueFrom$2 = (spectrum, detail, value) => {\n      const xValue = findValueOfOffset$1(spectrum, detail, value);\n      const sliderVal = xValue;\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    const setToMin$2 = (spectrum, detail) => {\n      const min = minX(detail);\n      fireSliderChange$2(spectrum, min);\n    };\n    const setToMax$2 = (spectrum, detail) => {\n      const max = maxX(detail);\n      fireSliderChange$2(spectrum, max);\n    };\n    const moveBy$2 = (direction, spectrum, detail, useMultiplier) => {\n      const f = direction > 0 ? increaseBy : reduceBy;\n      const xValue = f(currentValue(detail), minX(detail), maxX(detail), step(detail, useMultiplier));\n      fireSliderChange$2(spectrum, xValue);\n      return Optional.some(xValue);\n    };\n    const handleMovement$2 = direction => (spectrum, detail, useMultiplier) => moveBy$2(direction, spectrum, detail, useMultiplier).map(always);\n    const getValueFromEvent$2 = simulatedEvent => {\n      const pos = getEventSource(simulatedEvent);\n      return pos.map(p => p.left);\n    };\n    const findOffsetOfValue$1 = (spectrum, detail, value, minEdge, maxEdge) => {\n      const minOffset = 0;\n      const maxOffset = getXScreenRange(spectrum);\n      const centerMinEdge = minEdge.bind(edge => Optional.some(getXCenterOffSetOf(edge, spectrum))).getOr(minOffset);\n      const centerMaxEdge = maxEdge.bind(edge => Optional.some(getXCenterOffSetOf(edge, spectrum))).getOr(maxOffset);\n      const args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset,\n        centerMinEdge,\n        centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    const findPositionOfValue$1 = (slider, spectrum, value, minEdge, maxEdge, detail) => {\n      const offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    const setPositionFromValue$2 = (slider, thumb, detail, edges) => {\n      const value = currentValue(detail);\n      const pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      const thumbRadius = get$c(thumb.element) / 2;\n      set$8(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    const onLeft$2 = handleMovement$2(-1);\n    const onRight$2 = handleMovement$2(1);\n    const onUp$2 = Optional.none;\n    const onDown$2 = Optional.none;\n    const edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    const fireSliderChange$1 = (spectrum, value) => {\n      emitWith(spectrum, sliderChangeEvent(), { value });\n    };\n    const findValueOfOffset = (spectrum, detail, top) => {\n      const args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    const setValueFrom$1 = (spectrum, detail, value) => {\n      const yValue = findValueOfOffset(spectrum, detail, value);\n      const sliderVal = yValue;\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    const setToMin$1 = (spectrum, detail) => {\n      const min = minY(detail);\n      fireSliderChange$1(spectrum, min);\n    };\n    const setToMax$1 = (spectrum, detail) => {\n      const max = maxY(detail);\n      fireSliderChange$1(spectrum, max);\n    };\n    const moveBy$1 = (direction, spectrum, detail, useMultiplier) => {\n      const f = direction > 0 ? increaseBy : reduceBy;\n      const yValue = f(currentValue(detail), minY(detail), maxY(detail), step(detail, useMultiplier));\n      fireSliderChange$1(spectrum, yValue);\n      return Optional.some(yValue);\n    };\n    const handleMovement$1 = direction => (spectrum, detail, useMultiplier) => moveBy$1(direction, spectrum, detail, useMultiplier).map(always);\n    const getValueFromEvent$1 = simulatedEvent => {\n      const pos = getEventSource(simulatedEvent);\n      return pos.map(p => {\n        return p.top;\n      });\n    };\n    const findOffsetOfValue = (spectrum, detail, value, minEdge, maxEdge) => {\n      const minOffset = 0;\n      const maxOffset = getYScreenRange(spectrum);\n      const centerMinEdge = minEdge.bind(edge => Optional.some(getYCenterOffSetOf(edge, spectrum))).getOr(minOffset);\n      const centerMaxEdge = maxEdge.bind(edge => Optional.some(getYCenterOffSetOf(edge, spectrum))).getOr(maxOffset);\n      const args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset,\n        centerMinEdge,\n        centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    const findPositionOfValue = (slider, spectrum, value, minEdge, maxEdge, detail) => {\n      const offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    const setPositionFromValue$1 = (slider, thumb, detail, edges) => {\n      const value = currentValue(detail);\n      const pos = findPositionOfValue(slider, edges.getSpectrum(slider), value, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      const thumbRadius = get$d(thumb.element) / 2;\n      set$8(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    const onLeft$1 = Optional.none;\n    const onRight$1 = Optional.none;\n    const onUp$1 = handleMovement$1(-1);\n    const onDown$1 = handleMovement$1(1);\n    const edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    const fireSliderChange = (spectrum, value) => {\n      emitWith(spectrum, sliderChangeEvent(), { value });\n    };\n    const sliderValue = (x, y) => ({\n      x,\n      y\n    });\n    const setValueFrom = (spectrum, detail, value) => {\n      const xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      const yValue = findValueOfOffset(spectrum, detail, value.top);\n      const val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    const moveBy = (direction, isVerticalMovement, spectrum, detail, useMultiplier) => {\n      const f = direction > 0 ? increaseBy : reduceBy;\n      const xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail, useMultiplier));\n      const yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail, useMultiplier));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    const handleMovement = (direction, isVerticalMovement) => (spectrum, detail, useMultiplier) => moveBy(direction, isVerticalMovement, spectrum, detail, useMultiplier).map(always);\n    const setToMin = (spectrum, detail) => {\n      const mX = minX(detail);\n      const mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    const setToMax = (spectrum, detail) => {\n      const mX = maxX(detail);\n      const mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    const getValueFromEvent = simulatedEvent => getEventSource(simulatedEvent);\n    const setPositionFromValue = (slider, thumb, detail, edges) => {\n      const value = currentValue(detail);\n      const xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      const yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      const thumbXRadius = get$c(thumb.element) / 2;\n      const thumbYRadius = get$d(thumb.element) / 2;\n      set$8(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$8(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    const onLeft = handleMovement(-1, false);\n    const onRight = handleMovement(1, false);\n    const onUp = handleMovement(-1, true);\n    const onDown = handleMovement(1, true);\n    const edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    const SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('speedMultiplier', 10),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option$3('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', spec => Cell(spec.mode.minX)),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', spec => Cell(spec.mode.minY)),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', spec => Cell({\n            x: spec.mode.minX,\n            y: spec.mode.minY\n          })),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', () => Cell(false))\n    ];\n\n    const sketch$2 = (detail, components, _spec, _externals) => {\n      const getThumb = component => getPartOrDie(component, detail, 'thumb');\n      const getSpectrum = component => getPartOrDie(component, detail, 'spectrum');\n      const getLeftEdge = component => getPart(component, detail, 'left-edge');\n      const getRightEdge = component => getPart(component, detail, 'right-edge');\n      const getTopEdge = component => getPart(component, detail, 'top-edge');\n      const getBottomEdge = component => getPart(component, detail, 'bottom-edge');\n      const modelDetail = detail.model;\n      const model = modelDetail.manager;\n      const refresh = (slider, thumb) => {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge,\n          getRightEdge,\n          getTopEdge,\n          getBottomEdge,\n          getSpectrum\n        });\n      };\n      const setValue = (slider, newValue) => {\n        modelDetail.value.set(newValue);\n        const thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      const changeValue = (slider, newValue) => {\n        setValue(slider, newValue);\n        const thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      const resetToMin = slider => {\n        model.setToMin(slider, detail);\n      };\n      const resetToMax = slider => {\n        model.setToMax(slider, detail);\n      };\n      const choose = slider => {\n        const fireOnChoose = () => {\n          getPart(slider, detail, 'thumb').each(thumb => {\n            const value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        const wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      const onDragStart = (slider, simulatedEvent) => {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      const onDragEnd = (slider, simulatedEvent) => {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      const focusWidget = component => {\n        getPart(component, detail, 'spectrum').map(Keying.focusIn);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: focusWidget\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: _ => {\n                return modelDetail.value.get();\n              },\n              setValue\n            }\n          }),\n          Receiving.config({ channels: { [mouseReleased()]: { onReceive: choose } } })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), (slider, simulatedEvent) => {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached((slider, _simulatedEvent) => {\n            const getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            const thumb = getThumb(slider);\n            refresh(slider, thumb);\n            const spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), (component, event) => {\n            focusWidget(component);\n            onDragStart(component, event);\n          }),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin,\n          resetToMax,\n          setValue,\n          refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    const Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: (apis, slider, value) => {\n          apis.setValue(slider, value);\n        },\n        resetToMin: (apis, slider) => {\n          apis.resetToMin(slider);\n        },\n        resetToMax: (apis, slider) => {\n          apis.resetToMax(slider);\n        },\n        refresh: (apis, slider) => {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    const fieldsUpdate = generate$6('rgb-hex-update');\n    const sliderUpdate = generate$6('slider-update');\n    const paletteUpdate = generate$6('palette-update');\n\n    const sliderFactory = (translate, getClass) => {\n      const spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      const thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: {\n            'role': 'slider',\n            'aria-valuemin': 0,\n            'aria-valuemax': 360,\n            'aria-valuenow': 120\n          }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1(0)\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: (slider, _thumb, value) => {\n          set$9(slider.element, 'aria-valuenow', Math.floor(360 - value * 3.6));\n          emitWith(slider, sliderUpdate, { value });\n        }\n      });\n    };\n\n    const owner$1 = 'form';\n    const schema$i = [field('formBehaviours', [Representing])];\n    const getPartName$1 = name => '<alloy.field.' + name + '>';\n    const sketch$1 = fSpec => {\n      const parts = (() => {\n        const record = [];\n        const field = (name, config) => {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field,\n          record: constant$1(record)\n        };\n      })();\n      const spec = fSpec(parts);\n      const partNames = parts.record();\n      const fieldParts = map$2(partNames, n => required({\n        name: n,\n        pname: getPartName$1(n)\n      }));\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    const toResult = (o, e) => o.fold(() => Result.error(e), Result.value);\n    const make$4 = (detail, components) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components,\n      behaviours: augment(detail.formBehaviours, [Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: form => {\n              const resPs = getAllParts(form, detail);\n              return map$1(resPs, (resPThunk, pName) => resPThunk().bind(v => {\n                const opt = Composing.getCurrent(v);\n                return toResult(opt, new Error(`Cannot find a current component to extract the value from for form part '${ pName }': ` + element(v.element)));\n              }).map(Representing.getValue));\n            },\n            setValue: (form, values) => {\n              each(values, (newValue, key) => {\n                getPart(form, detail, key).each(wrapper => {\n                  Composing.getCurrent(wrapper).each(field => {\n                    Representing.setValue(field, newValue);\n                  });\n                });\n              });\n            }\n          }\n        })]),\n      apis: {\n        getField: (form, key) => {\n          return getPart(form, detail, key).bind(Composing.getCurrent);\n        }\n      }\n    });\n    const Form = {\n      getField: makeApi((apis, component, key) => apis.getField(component, key)),\n      sketch: sketch$1\n    };\n\n    const validInput = generate$6('valid-input');\n    const invalidInput = generate$6('invalid-input');\n    const validatingInput = generate$6('validating-input');\n    const translatePrefix = 'colorcustom.rgb.';\n    const rgbFormFactory = (translate, getClass, onValidHexx, onInvalidHexx) => {\n      const invalidation = (label, isValid) => Invalidating.config({\n        invalidClass: getClass('invalid'),\n        notify: {\n          onValidate: comp => {\n            emitWith(comp, validatingInput, { type: label });\n          },\n          onValid: comp => {\n            emitWith(comp, validInput, {\n              type: label,\n              value: Representing.getValue(comp)\n            });\n          },\n          onInvalid: comp => {\n            emitWith(comp, invalidInput, {\n              type: label,\n              value: Representing.getValue(comp)\n            });\n          }\n        },\n        validator: {\n          validate: comp => {\n            const value = Representing.getValue(comp);\n            const res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n            return Future.pure(res);\n          },\n          validateOnLoad: false\n        }\n      });\n      const renderTextField = (isValid, name, label, description, data) => {\n        const helptext = translate(translatePrefix + 'range');\n        const pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            attributes: { 'aria-label': description }\n          },\n          components: [text$2(label)]\n        });\n        const pField = FormField.parts.field({\n          data,\n          factory: Input,\n          inputAttributes: {\n            type: 'text',\n            ...name === 'hex' ? { 'aria-live': 'polite' } : {}\n          },\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: input => {\n            if (Invalidating.isInvalid(input)) {\n              const run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        const comps = [\n          pLabel,\n          pField\n        ];\n        const concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        const components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components\n        };\n      };\n      const copyRgbToHex = (form, rgba) => {\n        const hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(hexField => {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      const copyRgbToForm = (form, rgb) => {\n        const red = rgb.red;\n        const green = rgb.green;\n        const blue = rgb.blue;\n        Representing.setValue(form, {\n          red,\n          green,\n          blue\n        });\n      };\n      const memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      const updatePreview = (anyInSystem, hex) => {\n        memPreview.getOpt(anyInSystem).each(preview => {\n          set$8(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      const factory = () => {\n        const state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        const copyHexToRgb = (form, hex) => {\n          const rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        const get = prop => state[prop].get();\n        const set = (prop, value) => {\n          state[prop].set(value);\n        };\n        const getValueRgb = () => get('red').bind(red => get('green').bind(green => get('blue').map(blue => rgbaColour(red, green, blue, 1))));\n        const setValueRgb = rgb => {\n          const red = rgb.red;\n          const green = rgb.green;\n          const blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        const onInvalidInput = (form, simulatedEvent) => {\n          const data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        const onValidHex = (form, value) => {\n          onValidHexx(form);\n          const hex = hexColour(value);\n          set('hex', Optional.some(hex.value));\n          const rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex });\n          updatePreview(form, hex);\n        };\n        const onValidRgb = (form, prop, value) => {\n          const val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(rgb => {\n            const hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex });\n            updatePreview(form, hex);\n          });\n        };\n        const isHexInputEvent = data => data.type === 'hex';\n        const onValidInput = (form, simulatedEvent) => {\n          const data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        const formPartStrings = key => ({\n          label: translate(translatePrefix + key + '.label'),\n          description: translate(translatePrefix + key + '.description')\n        });\n        const redStrings = formPartStrings('red');\n        const greenStrings = formPartStrings('green');\n        const blueStrings = formPartStrings('blue');\n        const hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(parts => ({\n          dom: {\n            tag: 'form',\n            classes: [getClass('rgb-form')],\n            attributes: { 'aria-label': translate('aria.color.picker') }\n          },\n          components: [\n            parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n            parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n            parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n            parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n            memPreview.asSpec()\n          ],\n          formBehaviours: derive$1([\n            Invalidating.config({ invalidClass: getClass('form-invalid') }),\n            config('rgb-form-events', [\n              run$1(validInput, onValidInput),\n              run$1(invalidInput, onInvalidInput),\n              run$1(validatingInput, onInvalidInput)\n            ])\n          ])\n        })), {\n          apis: {\n            updateHex: (form, hex) => {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      const rgbFormSketcher = single({\n        factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: (apis, form, hex) => {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    const paletteFactory = (translate, getClass) => {\n      const spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      const thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: `<div class=${ getClass('sv-palette-inner-thumb') } role=\"presentation\"></div>`\n        }\n      });\n      const setColour = (canvas, rgba) => {\n        const {width, height} = canvas;\n        const ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        const grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        const grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      const setPaletteHue = (slider, hue) => {\n        const canvas = slider.components()[0].element.dom;\n        const hsv = hsvColour(hue, 100, 100);\n        const rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      const setPaletteThumb = (slider, hex) => {\n        const hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n        set$9(slider.element, 'aria-valuetext', translate([\n          'Saturation {0}%, Brightness {1}%',\n          hsv.saturation,\n          hsv.value\n        ]));\n      };\n      const factory = _detail => {\n        const getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        const onChange = (slider, _thumb, value) => {\n          if (!isNumber(value)) {\n            set$9(slider.element, 'aria-valuetext', translate([\n              'Saturation {0}%, Brightness {1}%',\n              Math.floor(value.x),\n              Math.floor(100 - value.y)\n            ]));\n          }\n          emitWith(slider, paletteUpdate, { value });\n        };\n        const onInit = (_slider, _thumb, spectrum, _value) => {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        const sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: {\n              'role': 'slider',\n              'aria-valuetext': translate([\n                'Saturation {0}%, Brightness {1}%',\n                0,\n                0\n              ])\n            },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange,\n          onInit,\n          sliderBehaviours\n        });\n      };\n      const saturationBrightnessPaletteSketcher = single({\n        factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: (_apis, slider, hue) => {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: (_apis, slider, hex) => {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    const makeFactory = (translate, getClass) => {\n      const factory = detail => {\n        const rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        const sbPalette = paletteFactory(translate, getClass);\n        const hueSliderToDegrees = hue => (100 - hue) / 100 * 360;\n        const hueDegreesToSlider = hue => 100 - hue / 360 * 100;\n        const state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        const memSlider = record(sliderFactory(translate, getClass));\n        const memPalette = record(sbPalette.sketch({}));\n        const memRgb = record(rgbForm.sketch({}));\n        const updatePalette = (anyInSystem, _hex, hue) => {\n          memPalette.getOpt(anyInSystem).each(palette => {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        const updateFields = (anyInSystem, hex) => {\n          memRgb.getOpt(anyInSystem).each(form => {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        const updateSlider = (anyInSystem, _hex, hue) => {\n          memSlider.getOpt(anyInSystem).each(slider => {\n            Slider.setValue(slider, hueDegreesToSlider(hue));\n          });\n        };\n        const updatePaletteThumb = (anyInSystem, hex) => {\n          memPalette.getOpt(anyInSystem).each(palette => {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        const updateState = (hex, hue) => {\n          const rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        const runUpdates = (anyInSystem, hex, hue, updates) => {\n          updateState(hex, hue);\n          each$1(updates, update => {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        const onPaletteUpdate = () => {\n          const updates = [updateFields];\n          return (form, simulatedEvent) => {\n            const value = simulatedEvent.event.value;\n            const oldHue = state.paletteHue.get();\n            const newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            const newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        const onSliderUpdate = () => {\n          const updates = [\n            updatePalette,\n            updateFields\n          ];\n          return (form, simulatedEvent) => {\n            const hue = hueSliderToDegrees(simulatedEvent.event.value);\n            const oldRgb = state.paletteRgba.get();\n            const oldHsv = fromRgb(oldRgb);\n            const newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            const newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        const onFieldsUpdate = () => {\n          const updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return (form, simulatedEvent) => {\n            const hex = simulatedEvent.event.hex;\n            const hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({ find: comp => memRgb.getOpt(comp) }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      const colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory\n      });\n      return colourPickerSketcher;\n    };\n\n    const self = () => Composing.config({ find: Optional.some });\n    const memento$1 = mem => Composing.config({ find: mem.getOpt });\n    const childAt = index => Composing.config({ find: comp => child$2(comp.element, index).bind(element => comp.getSystem().getByDom(element).toOptional()) });\n    const ComposingConfigs = {\n      self,\n      memento: memento$1,\n      childAt\n    };\n\n    const processors = objOf([\n      defaulted('preprocess', identity),\n      defaulted('postprocess', identity)\n    ]);\n    const memento = (mem, rawProcessors) => {\n      const ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: comp => {\n            const other = mem.get(comp);\n            const rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: (comp, rawValue) => {\n            const newValue = ps.preprocess(rawValue);\n            const other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    const withComp = (optInitialValue, getter, setter) => Representing.config({\n      store: {\n        mode: 'manual',\n        ...optInitialValue.map(initialValue => ({ initialValue })).getOr({}),\n        getValue: getter,\n        setValue: setter\n      }\n    });\n    const withElement = (initialValue, getter, setter) => withComp(initialValue, c => getter(c.element), (c, v) => setter(c.element, v));\n    const domHtml = optInitialValue => withElement(optInitialValue, get$9, set$6);\n    const memory = initialValue => Representing.config({\n      store: {\n        mode: 'memory',\n        initialValue\n      }\n    });\n\n    const english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    const translate$1 = providerBackstage => key => {\n      if (isString(key)) {\n        return providerBackstage.translate(english[key]);\n      } else {\n        return providerBackstage.translate(key);\n      }\n    };\n    const renderColorPicker = (_spec, providerBackstage, initialData) => {\n      const getClass = key => 'tox-' + key;\n      const colourPickerFactory = makeFactory(translate$1(providerBackstage), getClass);\n      const onValidHex = form => {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      const onInvalidHex = form => {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      const memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex,\n        onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          withComp(initialData, comp => {\n            const picker = memPicker.get(comp);\n            const optRgbForm = Composing.getCurrent(picker);\n            const optHex = optRgbForm.bind(rgbForm => {\n              const formValues = Representing.getValue(rgbForm);\n              return formValues.hex;\n            });\n            return optHex.map(hex => '#' + removeLeading(hex, '#')).getOr('');\n          }, (comp, newValue) => {\n            const pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n            const valOpt = Optional.from(pattern.exec(newValue)).bind(matches => get$h(matches, 1));\n            const picker = memPicker.get(comp);\n            const optRgbForm = Composing.getCurrent(picker);\n            optRgbForm.fold(() => {\n              console.log('Can not find form');\n            }, rgbForm => {\n              Representing.setValue(rgbForm, { hex: valOpt.getOr('') });\n              Form.getField(rgbForm, 'hex').each(hexField => {\n                emit(hexField, input());\n              });\n            });\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    const isOldCustomEditor = spec => has$2(spec, 'init');\n    const renderCustomEditor = spec => {\n      const editorApi = value$2();\n      const memReplaced = record({ dom: { tag: spec.tag } });\n      const initialValue = value$2();\n      const focusBehaviour = !isOldCustomEditor(spec) && spec.onFocus.isSome() ? [\n        Focusing.config({\n          onFocus: comp => {\n            spec.onFocus.each(onFocusFn => {\n              onFocusFn(comp.element.dom);\n            });\n          }\n        }),\n        Tabstopping.config({})\n      ] : [];\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(component => {\n              memReplaced.getOpt(component).each(ta => {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$2.load(spec.scriptId, spec.scriptUrl).then(init => init(ta.element.dom, spec.settings))).then(ea => {\n                  initialValue.on(cvalue => {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          withComp(Optional.none(), () => editorApi.get().fold(() => initialValue.get().getOr(''), ed => ed.getValue()), (_component, value) => {\n            editorApi.get().fold(() => initialValue.set(value), ed => ed.setValue(value));\n          }),\n          ComposingConfigs.self()\n        ].concat(focusBehaviour)),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    const filterByExtension = (files, providersBackstage) => {\n      const allowedImageFileTypes = global$1.explode(providersBackstage.getOption('images_file_types'));\n      const isFileInAllowedTypes = file => exists(allowedImageFileTypes, type => endsWith(file.name.toLowerCase(), `.${ type.toLowerCase() }`));\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    const renderDropZone = (spec, providersBackstage, initialData) => {\n      const stopper = (_, se) => {\n        se.stop();\n      };\n      const sequence = actions => (comp, se) => {\n        each$1(actions, a => {\n          a(comp, se);\n        });\n      };\n      const onDrop = (comp, se) => {\n        var _a;\n        if (!Disabling.isDisabled(comp)) {\n          const transferEvent = se.event.raw;\n          handleFiles(comp, (_a = transferEvent.dataTransfer) === null || _a === void 0 ? void 0 : _a.files);\n        }\n      };\n      const onSelect = (component, simulatedEvent) => {\n        const input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      const handleFiles = (component, files) => {\n        if (files) {\n          Representing.setValue(component, filterByExtension(files, providersBackstage));\n          emitWith(component, formChangeEvent, { name: spec.name });\n        }\n      };\n      const memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      const renderField = s => ({\n        uid: s.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-dropzone-container']\n        },\n        behaviours: derive$1([\n          memory(initialData.getOr([])),\n          ComposingConfigs.self(),\n          Disabling.config({}),\n          Toggling.config({\n            toggleClass: 'dragenter',\n            toggleOnExecute: false\n          }),\n          config('dropzone-events', [\n            run$1('dragenter', sequence([\n              stopper,\n              Toggling.toggle\n            ])),\n            run$1('dragleave', sequence([\n              stopper,\n              Toggling.toggle\n            ])),\n            run$1('dragover', stopper),\n            run$1('drop', sequence([\n              stopper,\n              onDrop\n            ])),\n            run$1(change(), onSelect)\n          ])\n        ]),\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dropzone'],\n              styles: {}\n            },\n            components: [\n              {\n                dom: { tag: 'p' },\n                components: [text$2(providersBackstage.translate('Drop an image here'))]\n              },\n              Button.sketch({\n                dom: {\n                  tag: 'button',\n                  styles: { position: 'relative' },\n                  classes: [\n                    'tox-button',\n                    'tox-button--secondary'\n                  ]\n                },\n                components: [\n                  text$2(providersBackstage.translate('Browse for an image')),\n                  memInput.asSpec()\n                ],\n                action: comp => {\n                  const inputComp = memInput.get(comp);\n                  inputComp.element.dom.click();\n                },\n                buttonBehaviours: derive$1([\n                  Tabstopping.config({}),\n                  DisablingConfigs.button(providersBackstage.isDisabled),\n                  receivingConfig()\n                ])\n              })\n            ]\n          }]\n      });\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    const renderGrid = (spec, backstage) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-form__grid',\n          `tox-form__grid--${ spec.columns }col`\n        ]\n      },\n      components: map$2(spec.items, backstage.interpreter)\n    });\n\n    const adaptable = (fn, rate) => {\n      let timer = null;\n      let args = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n          args = null;\n        }\n      };\n      const throttle = (...newArgs) => {\n        args = newArgs;\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            const tempArgs = args;\n            timer = null;\n            args = null;\n            fn.apply(null, tempArgs);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const first = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const last = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        cancel();\n        timer = setTimeout(() => {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n\n    const beforeObject = generate$6('alloy-fake-before-tabstop');\n    const afterObject = generate$6('alloy-fake-after-tabstop');\n    const craftWithClasses = classes => {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    const craft = (containerClasses, spec) => {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-navobj',\n            ...containerClasses.getOr([])\n          ]\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    const triggerTab = (placeholder, shiftKey) => {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey\n        }\n      });\n    };\n    const onFocus = (container, targetComp) => {\n      const target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    const isPseudoStop = element => {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    const dialogChannel = generate$6('update-dialog');\n    const titleChannel = generate$6('update-title');\n    const bodyChannel = generate$6('update-body');\n    const footerChannel = generate$6('update-footer');\n    const bodySendMessageChannel = generate$6('body-send-message');\n    const dialogFocusShiftedChannel = generate$6('dialog-focus-shifted');\n\n    const browser = detect$1().browser;\n    const isSafari = browser.isSafari();\n    const isFirefox = browser.isFirefox();\n    const isSafariOrFirefox = isSafari || isFirefox;\n    const isChromium = browser.isChromium();\n    const isElementScrollAtBottom = ({scrollTop, scrollHeight, clientHeight}) => Math.ceil(scrollTop) + clientHeight >= scrollHeight;\n    const scrollToY = (win, y) => win.scrollTo(0, y === 'bottom' ? 99999999 : y);\n    const getScrollingElement = (doc, html) => {\n      const body = doc.body;\n      return Optional.from(!/^<!DOCTYPE (html|HTML)/.test(html) && (!isChromium && !isSafari || isNonNullable(body) && (body.scrollTop !== 0 || Math.abs(body.scrollHeight - body.clientHeight) > 1)) ? body : doc.documentElement);\n    };\n    const writeValue = (iframeElement, html, fallbackFn) => {\n      const iframe = iframeElement.dom;\n      Optional.from(iframe.contentDocument).fold(fallbackFn, doc => {\n        let lastScrollTop = 0;\n        const isScrollAtBottom = getScrollingElement(doc, html).map(el => {\n          lastScrollTop = el.scrollTop;\n          return el;\n        }).forall(isElementScrollAtBottom);\n        const scrollAfterWrite = () => {\n          const win = iframe.contentWindow;\n          if (isNonNullable(win)) {\n            if (isScrollAtBottom) {\n              scrollToY(win, 'bottom');\n            } else if (!isScrollAtBottom && isSafariOrFirefox && lastScrollTop !== 0) {\n              scrollToY(win, lastScrollTop);\n            }\n          }\n        };\n        if (isSafari) {\n          iframe.addEventListener('load', scrollAfterWrite, { once: true });\n        }\n        doc.open();\n        doc.write(html);\n        doc.close();\n        if (!isSafari) {\n          scrollAfterWrite();\n        }\n      });\n    };\n    const throttleInterval = someIf(isSafariOrFirefox, isSafari ? 500 : 200);\n    const writeValueThrottler = throttleInterval.map(interval => adaptable(writeValue, interval));\n    const getDynamicSource = (initialData, stream) => {\n      const cachedValue = Cell(initialData.getOr(''));\n      return {\n        getValue: _frameComponent => cachedValue.get(),\n        setValue: (frameComponent, html) => {\n          if (cachedValue.get() !== html) {\n            const iframeElement = frameComponent.element;\n            const setSrcdocValue = () => set$9(iframeElement, 'srcdoc', html);\n            if (stream) {\n              writeValueThrottler.fold(constant$1(writeValue), throttler => throttler.throttle)(iframeElement, html, setSrcdocValue);\n            } else {\n              setSrcdocValue();\n            }\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    const renderIFrame = (spec, providersBackstage, initialData) => {\n      const baseClass = 'tox-dialog__iframe';\n      const opaqueClass = spec.transparent ? [] : [`${ baseClass }--opaque`];\n      const containerBorderedClass = spec.border ? [`tox-navobj-bordered`] : [];\n      const attributes = {\n        ...spec.label.map(title => ({ title })).getOr({}),\n        ...initialData.map(html => ({ srcdoc: html })).getOr({}),\n        ...spec.sandboxed ? { sandbox: 'allow-scripts allow-same-origin' } : {}\n      };\n      const sourcing = getDynamicSource(initialData, spec.streamContent);\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const factory = newSpec => craft(Optional.from(containerBorderedClass), {\n        uid: newSpec.uid,\n        dom: {\n          tag: 'iframe',\n          attributes,\n          classes: [\n            baseClass,\n            ...opaqueClass\n          ]\n        },\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({}),\n          withComp(initialData, sourcing.getValue, sourcing.setValue),\n          Receiving.config({\n            channels: {\n              [dialogFocusShiftedChannel]: {\n                onReceive: (comp, message) => {\n                  message.newFocus.each(newFocus => {\n                    parentElement(comp.element).each(parent => {\n                      const f = eq(comp.element, newFocus) ? add$2 : remove$2;\n                      f(parent, 'tox-navobj-bordered-focus');\n                    });\n                  });\n                }\n              }\n            }\n          })\n        ])\n      });\n      const pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    const image = image => new Promise((resolve, reject) => {\n      const loaded = () => {\n        destroy();\n        resolve(image);\n      };\n      const listeners = [\n        bind(image, 'load', loaded),\n        bind(image, 'error', () => {\n          destroy();\n          reject('Unable to load data from image: ' + image.dom.src);\n        })\n      ];\n      const destroy = () => each$1(listeners, l => l.unbind());\n      if (image.dom.complete) {\n        loaded();\n      }\n    });\n\n    const calculateImagePosition = (panelWidth, panelHeight, imageWidth, imageHeight, zoom) => {\n      const width = imageWidth * zoom;\n      const height = imageHeight * zoom;\n      const left = Math.max(0, panelWidth / 2 - width / 2);\n      const top = Math.max(0, panelHeight / 2 - height / 2);\n      return {\n        left: left.toString() + 'px',\n        top: top.toString() + 'px',\n        width: width.toString() + 'px',\n        height: height.toString() + 'px'\n      };\n    };\n    const zoomToFit = (panel, width, height) => {\n      const panelW = get$c(panel);\n      const panelH = get$d(panel);\n      return Math.min(panelW / width, panelH / height, 1);\n    };\n    const renderImagePreview = (spec, initialData) => {\n      const cachedData = Cell(initialData.getOr({ url: '' }));\n      const memImage = record({\n        dom: {\n          tag: 'img',\n          classes: ['tox-imagepreview__image'],\n          attributes: initialData.map(data => ({ src: data.url })).getOr({})\n        }\n      });\n      const memContainer = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-imagepreview__container'],\n          attributes: { role: 'presentation' }\n        },\n        components: [memImage.asSpec()]\n      });\n      const setValue = (frameComponent, data) => {\n        const translatedData = { url: data.url };\n        data.zoom.each(z => translatedData.zoom = z);\n        data.cachedWidth.each(z => translatedData.cachedWidth = z);\n        data.cachedHeight.each(z => translatedData.cachedHeight = z);\n        cachedData.set(translatedData);\n        const applyFramePositioning = () => {\n          const {cachedWidth, cachedHeight, zoom} = translatedData;\n          if (!isUndefined(cachedWidth) && !isUndefined(cachedHeight)) {\n            if (isUndefined(zoom)) {\n              const z = zoomToFit(frameComponent.element, cachedWidth, cachedHeight);\n              translatedData.zoom = z;\n            }\n            const position = calculateImagePosition(get$c(frameComponent.element), get$d(frameComponent.element), cachedWidth, cachedHeight, translatedData.zoom);\n            memContainer.getOpt(frameComponent).each(container => {\n              setAll(container.element, position);\n            });\n          }\n        };\n        memImage.getOpt(frameComponent).each(imageComponent => {\n          const img = imageComponent.element;\n          if (data.url !== get$f(img, 'src')) {\n            set$9(img, 'src', data.url);\n            remove$2(frameComponent.element, 'tox-imagepreview__loaded');\n          }\n          applyFramePositioning();\n          image(img).then(img => {\n            if (frameComponent.getSystem().isConnected()) {\n              add$2(frameComponent.element, 'tox-imagepreview__loaded');\n              translatedData.cachedWidth = img.dom.naturalWidth;\n              translatedData.cachedHeight = img.dom.naturalHeight;\n              applyFramePositioning();\n            }\n          });\n        });\n      };\n      const styles = {};\n      spec.height.each(h => styles.height = h);\n      const fakeValidatedData = initialData.map(d => ({\n        url: d.url,\n        zoom: Optional.from(d.zoom),\n        cachedWidth: Optional.from(d.cachedWidth),\n        cachedHeight: Optional.from(d.cachedHeight)\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-imagepreview'],\n          styles,\n          attributes: { role: 'presentation' }\n        },\n        components: [memContainer.asSpec()],\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          withComp(fakeValidatedData, () => cachedData.get(), setValue)\n        ])\n      };\n    };\n\n    const renderLabel$2 = (spec, backstageShared) => {\n      const baseClass = 'tox-label';\n      const centerClass = spec.align === 'center' ? [`${ baseClass }--center`] : [];\n      const endClass = spec.align === 'end' ? [`${ baseClass }--end`] : [];\n      const label = {\n        dom: {\n          tag: 'label',\n          classes: [\n            baseClass,\n            ...centerClass,\n            ...endClass\n          ]\n        },\n        components: [text$2(backstageShared.providers.translate(spec.label))]\n      };\n      const comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [\n          label,\n          ...comps\n        ],\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    const internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    const onToolbarButtonExecute = info => runOnExecute$1((comp, _simulatedEvent) => {\n      runWithApi(info, comp)(itemApi => {\n        emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n        info.onAction(itemApi);\n      });\n    });\n    const commonButtonDisplayEvent = generate$6('common-button-display-events');\n    const toolbarButtonEventOrder = {\n      [execute$5()]: [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'toolbar-button-events',\n        'tooltipping'\n      ],\n      [attachedToDom()]: [\n        'toolbar-button-events',\n        commonButtonDisplayEvent\n      ],\n      [detachedFromDom()]: [\n        'toolbar-button-events',\n        'dropdown-events',\n        'tooltipping'\n      ],\n      [mousedown()]: [\n        'focusing',\n        'alloy.base.behaviour',\n        commonButtonDisplayEvent\n      ]\n    };\n\n    const forceInitialSize = comp => set$8(comp.element, 'width', get$e(comp.element, 'width'));\n\n    const renderIcon$1 = (iconName, iconsProvider, behaviours) => render$3(iconName, {\n      tag: 'span',\n      classes: [\n        'tox-icon',\n        'tox-tbtn__icon-wrap'\n      ],\n      behaviours\n    }, iconsProvider);\n    const renderIconFromPack$1 = (iconName, iconsProvider) => renderIcon$1(iconName, iconsProvider, []);\n    const renderReplaceableIconFromPack = (iconName, iconsProvider) => renderIcon$1(iconName, iconsProvider, [Replacing.config({})]);\n    const renderLabel$1 = (text, prefix, providersBackstage) => ({\n      dom: {\n        tag: 'span',\n        classes: [`${ prefix }__select-label`]\n      },\n      components: [text$2(providersBackstage.translate(text))],\n      behaviours: derive$1([Replacing.config({})])\n    });\n\n    const updateMenuText = generate$6('update-menu-text');\n    const updateMenuIcon = generate$6('update-menu-icon');\n    const renderCommonDropdown = (spec, prefix, sharedBackstage, btnName) => {\n      const editorOffCell = Cell(noop);\n      const optMemDisplayText = spec.text.map(text => record(renderLabel$1(text, prefix, sharedBackstage.providers)));\n      const optMemDisplayIcon = spec.icon.map(iconName => record(renderReplaceableIconFromPack(iconName, sharedBackstage.providers.icons)));\n      const onLeftOrRightInMenu = (comp, se) => {\n        const dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      const role = spec.role.fold(() => ({}), role => ({ role }));\n      const ariaLabelAttribute = spec.ariaLabel.fold(() => ({}), ariaLabel => {\n        const translatedAriaLabel = sharedBackstage.providers.translate(ariaLabel);\n        return { 'aria-label': translatedAriaLabel };\n      });\n      const iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [`${ prefix }__select-chevron`]\n      }, sharedBackstage.providers.icons);\n      const fixWidthBehaviourName = generate$6('common-button-display-events');\n      const customEventsName = 'dropdown-events';\n      const memDropdown = record(Dropdown.sketch({\n        ...spec.uid ? { uid: spec.uid } : {},\n        ...role,\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            `${ prefix }--select`\n          ].concat(map$2(spec.classes, c => `${ prefix }--${ c }`)),\n          attributes: {\n            ...ariaLabelAttribute,\n            ...isNonNullable(btnName) ? { 'data-mce-name': btnName } : {}\n          }\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(mem => mem.asSpec()),\n          optMemDisplayText.map(mem => mem.asSpec()),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        onOpen: (anchor, dropdownComp, tmenuComp) => {\n          if (spec.searchable) {\n            focusSearchField(tmenuComp);\n          }\n        },\n        dropdownBehaviours: derive$1([\n          ...spec.dropdownBehaviours,\n          DisablingConfigs.button(() => spec.disabled || sharedBackstage.providers.isDisabled()),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          ...spec.tooltip.map(t => Tooltipping.config(sharedBackstage.providers.tooltips.getConfig({ tooltipText: sharedBackstage.providers.translate(t) }))).toArray(),\n          config(customEventsName, [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config(fixWidthBehaviourName, [runOnAttached((comp, _se) => forceInitialSize(comp))]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, (comp, se) => {\n              optMemDisplayText.bind(mem => mem.getOpt(comp)).each(displayText => {\n                Replacing.set(displayText, [text$2(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, (comp, se) => {\n              optMemDisplayIcon.bind(mem => mem.getOpt(comp)).each(displayIcon => {\n                Replacing.set(displayIcon, [renderReplaceableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ]),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          [mousedown()]: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ],\n          [attachedToDom()]: [\n            'toolbar-button-events',\n            Tooltipping.name(),\n            customEventsName,\n            fixWidthBehaviourName\n          ]\n        }),\n        sandboxBehaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          }),\n          config('dropdown-sandbox-events', [\n            run$1(refetchTriggerEvent, (originalSandboxComp, se) => {\n              handleRefetchTrigger(originalSandboxComp);\n              se.stop();\n            }),\n            run$1(redirectMenuItemInteractionEvent, (sandboxComp, se) => {\n              handleRedirectToMenuItem(sandboxComp, se);\n              se.stop();\n            })\n          ])\n        ]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: `${ prefix }--active`,\n        parts: {\n          menu: {\n            ...part(false, spec.columns, spec.presets),\n            fakeFocus: spec.searchable,\n            onHighlightItem: updateAriaOnHighlight,\n            onCollapseMenu: (tmenuComp, itemCompCausingCollapse, nowActiveMenuComp) => {\n              Highlighting.getHighlighted(nowActiveMenuComp).each(itemComp => {\n                updateAriaOnHighlight(tmenuComp, nowActiveMenuComp, itemComp);\n              });\n            },\n            onDehighlightItem: updateAriaOnDehighlight\n          }\n        },\n        getAnchorOverrides: () => {\n          return {\n            maxHeightFunction: (element, available) => {\n              anchored()(element, available - 10);\n            }\n          };\n        },\n        fetch: comp => Future.nu(curry(spec.fetch, comp))\n      }));\n      return memDropdown.asSpec();\n    };\n\n    const isMenuItemReference = item => isString(item);\n    const isSeparator$2 = item => item.type === 'separator';\n    const isExpandingMenuItem = item => has$2(item, 'getSubmenuItems');\n    const separator$2 = { type: 'separator' };\n    const unwrapReferences = (items, menuItems) => {\n      const realItems = foldl(items, (acc, item) => {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$2(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$2(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    const getFromExpandingItem = (item, menuItems) => {\n      const submenuItems = item.getSubmenuItems();\n      const rest = expand(submenuItems, menuItems);\n      const newMenus = deepMerge(rest.menus, { [item.value]: rest.items });\n      const newExpansions = deepMerge(rest.expansions, { [item.value]: item.value });\n      return {\n        item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    const generateValueIfRequired = item => {\n      const itemValue = get$g(item, 'value').getOrThunk(() => generate$6('generated-menu-item'));\n      return deepMerge({ value: itemValue }, item);\n    };\n    const expand = (items, menuItems) => {\n      const realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, (acc, item) => {\n        if (isExpandingMenuItem(item)) {\n          const itemWithValue = generateValueIfRequired(item);\n          const newData = getFromExpandingItem(itemWithValue, menuItems);\n          return {\n            menus: deepMerge(acc.menus, newData.menus),\n            items: [\n              newData.item,\n              ...acc.items\n            ],\n            expansions: deepMerge(acc.expansions, newData.expansions)\n          };\n        } else {\n          return {\n            ...acc,\n            items: [\n              item,\n              ...acc.items\n            ]\n          };\n        }\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    const getSearchModeForField = settings => {\n      return settings.search.fold(() => ({ searchMode: 'no-search' }), searchSettings => ({\n        searchMode: 'search-with-field',\n        placeholder: searchSettings.placeholder\n      }));\n    };\n    const getSearchModeForResults = settings => {\n      return settings.search.fold(() => ({ searchMode: 'no-search' }), _ => ({ searchMode: 'search-with-results' }));\n    };\n    const build = (items, itemResponse, backstage, settings) => {\n      const primary = generate$6('primary-menu');\n      const data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      const mainMenuSearchMode = getSearchModeForField(settings);\n      const mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, settings.isHorizontalMenu, mainMenuSearchMode);\n      const submenuSearchMode = getSearchModeForResults(settings);\n      const submenus = map$1(data.menus, (menuItems, menuName) => createPartialMenu(menuName, menuItems, itemResponse, backstage, false, submenuSearchMode));\n      const menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    const isSingleListItem = item => !has$2(item, 'items');\n    const dataAttribute = 'data-value';\n    const fetchItems = (dropdownComp, name, items, selectedValue) => map$2(items, item => {\n      if (!isSingleListItem(item)) {\n        return {\n          type: 'nestedmenuitem',\n          text: item.text,\n          getSubmenuItems: () => fetchItems(dropdownComp, name, item.items, selectedValue)\n        };\n      } else {\n        return {\n          type: 'togglemenuitem',\n          text: item.text,\n          value: item.value,\n          active: item.value === selectedValue,\n          onAction: () => {\n            Representing.setValue(dropdownComp, item.value);\n            emitWith(dropdownComp, formChangeEvent, { name });\n            Focusing.focus(dropdownComp);\n          }\n        };\n      }\n    });\n    const findItemByValue = (items, value) => findMap(items, item => {\n      if (!isSingleListItem(item)) {\n        return findItemByValue(item.items, value);\n      } else {\n        return someIf(item.value === value, item);\n      }\n    });\n    const renderListBox = (spec, backstage, initialData) => {\n      const providersBackstage = backstage.shared.providers;\n      const initialItem = initialData.bind(value => findItemByValue(spec.items, value)).orThunk(() => head(spec.items).filter(isSingleListItem));\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: sketchSpec => renderCommonDropdown({\n            uid: sketchSpec.uid,\n            text: initialItem.map(item => item.text),\n            icon: Optional.none(),\n            tooltip: Optional.none(),\n            role: Optional.none(),\n            ariaLabel: spec.label,\n            fetch: (comp, callback) => {\n              const items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n              callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n                isHorizontalMenu: false,\n                search: Optional.none()\n              }));\n            },\n            onSetup: constant$1(noop),\n            getApi: constant$1({}),\n            columns: 1,\n            presets: 'normal',\n            classes: [],\n            dropdownBehaviours: [\n              Tabstopping.config({}),\n              withComp(initialItem.map(item => item.value), comp => get$f(comp.element, dataAttribute), (comp, data) => {\n                findItemByValue(spec.items, data).each(item => {\n                  set$9(comp.element, dataAttribute, item.value);\n                  emitWith(comp, updateMenuText, { text: item.text });\n                });\n              })\n            ]\n          }, 'tox-listbox', backstage.shared)\n        }\n      });\n      const listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(!spec.enabled),\n            onDisabled: comp => {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    const renderPanel = (spec, backstage) => ({\n      dom: {\n        tag: 'div',\n        classes: spec.classes\n      },\n      components: map$2(spec.items, backstage.shared.interpreter)\n    });\n\n    const factory$h = (detail, _spec) => {\n      const options = map$2(detail.options, option => ({\n        dom: {\n          tag: 'option',\n          value: option.value,\n          innerHtml: option.text\n        }\n      }));\n      const initialValues = detail.data.map(v => wrap$1('initialValue', v)).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: select => {\n                return get$6(select.element);\n              },\n              setValue: (select, newValue) => {\n                const firstOption = head(detail.options);\n                const found = find$5(detail.options, opt => opt.value === newValue);\n                if (found.isSome()) {\n                  set$5(select.element, newValue);\n                } else if (select.element.dom.selectedIndex === -1 && newValue === '') {\n                  firstOption.each(value => set$5(select.element, value.value));\n                }\n              },\n              ...initialValues\n            }\n          })\n        ])\n      };\n    };\n    const HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option$3('data')\n      ],\n      factory: factory$h\n    });\n\n    const renderSelectBox = (spec, providersBackstage, initialData) => {\n      const translatedOptions = map$2(spec.items, item => ({\n        text: providersBackstage.translate(item.text),\n        value: item.value\n      }));\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const pField = FormField.parts.field({\n        dom: {},\n        ...initialData.map(data => ({ data })).getOr({}),\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), (component, _) => {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      const chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      const selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: () => !spec.enabled || providersBackstage.isDisabled(),\n            onDisabled: comp => {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    const schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    const getField = (comp, detail, partName) => getPart(comp, detail, partName).bind(Composing.getCurrent);\n    const coupledPart = (selfName, otherName) => required({\n      factory: FormField,\n      name: selfName,\n      overrides: detail => {\n        return {\n          fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), me => {\n                getField(me, detail, otherName).each(other => {\n                  getPart(me, detail, 'lock').each(lock => {\n                    if (Toggling.isOn(lock)) {\n                      detail.onLockedChange(me, other, lock);\n                    }\n                  });\n                });\n              })])])\n        };\n      }\n    });\n    const parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: detail => {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    const factory$g = (detail, components, _spec, _externals) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components,\n      behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n        Composing.config({ find: Optional.some }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: comp => {\n              const parts = getPartsOrDie(comp, detail, [\n                'field1',\n                'field2'\n              ]);\n              return {\n                [detail.field1Name]: Representing.getValue(parts.field1()),\n                [detail.field2Name]: Representing.getValue(parts.field2())\n              };\n            },\n            setValue: (comp, value) => {\n              const parts = getPartsOrDie(comp, detail, [\n                'field1',\n                'field2'\n              ]);\n              if (hasNonNullableKey(value, detail.field1Name)) {\n                Representing.setValue(parts.field1(), value[detail.field1Name]);\n              }\n              if (hasNonNullableKey(value, detail.field2Name)) {\n                Representing.setValue(parts.field2(), value[detail.field2Name]);\n              }\n            }\n          }\n        })\n      ]),\n      apis: {\n        getField1: component => getPart(component, detail, 'field1'),\n        getField2: component => getPart(component, detail, 'field2'),\n        getLock: component => getPart(component, detail, 'lock')\n      }\n    });\n    const FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$g,\n      apis: {\n        getField1: (apis, component) => apis.getField1(component),\n        getField2: (apis, component) => apis.getField2(component),\n        getLock: (apis, component) => apis.getLock(component)\n      }\n    });\n\n    const formatSize = size => {\n      const unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      const maxDecimal = unit => unit in unitDec ? unitDec[unit] : 1;\n      let numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    const parseSize = sizeText => {\n      const numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      const match = numPattern.exec(sizeText);\n      if (match !== null) {\n        const value = parseFloat(match[1]);\n        const unit = match[2];\n        return Result.value({\n          value,\n          unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    const convertUnit = (size, unit) => {\n      const inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      const supported = u => has$2(inInch, u);\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    const noSizeConversion = _input => Optional.none();\n    const ratioSizeConversion = (scale, unit) => size => convertUnit(size, unit).map(value => ({\n      value: value * scale,\n      unit\n    }));\n    const makeRatioConverter = (currentFieldText, otherFieldText) => {\n      const cValue = parseSize(currentFieldText).toOptional();\n      const oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, (cSize, oSize) => convertUnit(cSize, oSize.unit).map(val => oSize.value / val).map(r => ratioSizeConversion(r, oSize.unit)).getOr(noSizeConversion)).getOr(noSizeConversion);\n    };\n\n    const renderSizeInput = (spec, providersBackstage) => {\n      let converter = noSizeConversion;\n      const ratioEvent = generate$6('ratio-event');\n      const makeIcon = iconName => render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-lock-icon__' + iconName\n        ]\n      }, providersBackstage.icons);\n      const label = spec.label.getOr('Constrain proportions');\n      const translatedLabel = providersBackstage.translate(label);\n      const pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: {\n            'aria-label': translatedLabel,\n            'data-mce-name': label\n          }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Tooltipping.config(providersBackstage.tooltips.getConfig({ tooltipText: translatedLabel }))\n        ])\n      });\n      const formGroup = components => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components\n      });\n      const getFieldPart = isField1 => FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('size-input-events', [\n            run$1(focusin(), (component, _simulatedEvent) => {\n              emitWith(component, ratioEvent, { isField1 });\n            }),\n            run$1(change(), (component, _simulatedEvent) => {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })\n          ])\n        ]),\n        selectOnFocus: false\n      });\n      const getLabel = label => ({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label']\n        },\n        components: [text$2(providersBackstage.translate(label))]\n      });\n      const widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      const heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel(nbsp),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: (current, other, _lock) => {\n          parseSize(Representing.getValue(current)).each(size => {\n            converter(size).each(newSize => {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: () => !spec.enabled || providersBackstage.isDisabled(),\n            onDisabled: comp => {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, (component, simulatedEvent) => {\n              const isField1 = simulatedEvent.event.isField1;\n              const optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              const optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              const value1 = optCurrent.map(Representing.getValue).getOr('');\n              const value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    const renderSlider = (spec, providerBackstage, initialData) => {\n      const labelPart = Slider.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label']\n        },\n        components: [text$2(providerBackstage.translate(spec.label))]\n      });\n      const spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: ['tox-slider__rail'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      const thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: ['tox-slider__handle'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-slider'],\n          attributes: { role: 'presentation' }\n        },\n        model: {\n          mode: 'x',\n          minX: spec.min,\n          maxX: spec.max,\n          getInitialValue: constant$1(initialData.getOrThunk(() => (Math.abs(spec.max) - Math.abs(spec.min)) / 2))\n        },\n        components: [\n          labelPart,\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([\n          ComposingConfigs.self(),\n          Focusing.config({})\n        ]),\n        onChoose: (component, thumb, value) => {\n          emitWith(component, formChangeEvent, {\n            name: spec.name,\n            value\n          });\n        }\n      });\n    };\n\n    const renderTable = (spec, providersBackstage) => {\n      const renderTh = text => ({\n        dom: {\n          tag: 'th',\n          innerHtml: providersBackstage.translate(text)\n        }\n      });\n      const renderHeader = header => ({\n        dom: { tag: 'thead' },\n        components: [{\n            dom: { tag: 'tr' },\n            components: map$2(header, renderTh)\n          }]\n      });\n      const renderTd = text => ({\n        dom: {\n          tag: 'td',\n          innerHtml: providersBackstage.translate(text)\n        }\n      });\n      const renderTr = row => ({\n        dom: { tag: 'tr' },\n        components: map$2(row, renderTd)\n      });\n      const renderRows = rows => ({\n        dom: { tag: 'tbody' },\n        components: map$2(rows, renderTr)\n      });\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    const renderTextField = (spec, providersBackstage) => {\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const baseInputBehaviours = [\n        Disabling.config({ disabled: () => spec.disabled || providersBackstage.isDisabled() }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: comp => {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), (component, _) => {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), (component, _) => {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      const validatingBehaviours = spec.validation.map(vl => Invalidating.config({\n        getRoot: input => {\n          return parentElement(input.element);\n        },\n        invalidClass: 'tox-invalid',\n        validator: {\n          validate: input => {\n            const v = Representing.getValue(input);\n            const result = vl.validator(v);\n            return Future.pure(result === true ? Result.value(v) : Result.error(result));\n          },\n          validateOnLoad: vl.validateOnLoad\n        }\n      })).toArray();\n      const placeholder = spec.placeholder.fold(constant$1({}), p => ({ placeholder: providersBackstage.translate(p) }));\n      const inputMode = spec.inputMode.fold(constant$1({}), mode => ({ inputmode: mode }));\n      const inputAttributes = {\n        ...placeholder,\n        ...inputMode\n      };\n      const pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        ...spec.data.map(data => ({ data })).getOr({}),\n        inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      const pTextField = spec.multiline ? {\n        dom: {\n          tag: 'div',\n          classes: ['tox-textarea-wrap']\n        },\n        components: [pField]\n      } : pField;\n      const extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      const extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      const extraBehaviours = [\n        Disabling.config({\n          disabled: () => spec.disabled || providersBackstage.isDisabled(),\n          onDisabled: comp => {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: comp => {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pTextField, extraClasses2, extraBehaviours);\n    };\n    const renderInput = (spec, providersBackstage, initialData) => renderTextField({\n      name: spec.name,\n      multiline: false,\n      label: spec.label,\n      inputMode: spec.inputMode,\n      placeholder: spec.placeholder,\n      flex: false,\n      disabled: !spec.enabled,\n      classname: 'tox-textfield',\n      validation: Optional.none(),\n      maximized: spec.maximized,\n      data: initialData\n    }, providersBackstage);\n    const renderTextarea = (spec, providersBackstage, initialData) => renderTextField({\n      name: spec.name,\n      multiline: true,\n      label: spec.label,\n      inputMode: Optional.none(),\n      placeholder: spec.placeholder,\n      flex: true,\n      disabled: !spec.enabled,\n      classname: 'tox-textarea',\n      validation: Optional.none(),\n      maximized: spec.maximized,\n      data: initialData\n    }, providersBackstage);\n\n    const getAnimationRoot = (component, slideConfig) => slideConfig.getAnimationRoot.fold(() => component.element, get => get(component));\n\n    const getDimensionProperty = slideConfig => slideConfig.dimension.property;\n    const getDimension = (slideConfig, elem) => slideConfig.dimension.getDimension(elem);\n    const disableTransitions = (component, slideConfig) => {\n      const root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    const setShrunk = (component, slideConfig) => {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$8(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    const setGrown = (component, slideConfig) => {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    const doImmediateShrink = (component, slideConfig, slideState, _calculatedSize) => {\n      slideState.setCollapsed();\n      set$8(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    const doStartShrink = (component, slideConfig, slideState, calculatedSize) => {\n      const size = calculatedSize.getOrThunk(() => getDimension(slideConfig, component.element));\n      slideState.setCollapsed();\n      set$8(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      const root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    const doStartSmartShrink = (component, slideConfig, slideState) => {\n      const size = getDimension(slideConfig, component.element);\n      const shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    const doStartGrow = (component, slideConfig, slideState) => {\n      const root = getAnimationRoot(component, slideConfig);\n      const wasShrinking = has(root, slideConfig.shrinkingClass);\n      const beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      const fullSize = getDimension(slideConfig, component.element);\n      const startPartialGrow = () => {\n        set$8(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      const startCompleteGrow = () => {\n        setShrunk(component, slideConfig);\n      };\n      const setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$8(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    const refresh$4 = (component, slideConfig, slideState) => {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        const fullSize = getDimension(slideConfig, component.element);\n        set$8(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    const grow = (component, slideConfig, slideState) => {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    const shrink = (component, slideConfig, slideState) => {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    const immediateShrink = (component, slideConfig, slideState) => {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    const hasGrown = (component, slideConfig, slideState) => slideState.isExpanded();\n    const hasShrunk = (component, slideConfig, slideState) => slideState.isCollapsed();\n    const isGrowing = (component, slideConfig, _slideState) => {\n      const root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    const isShrinking = (component, slideConfig, _slideState) => {\n      const root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    const isTransitioning = (component, slideConfig, slideState) => isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    const toggleGrow = (component, slideConfig, slideState) => {\n      const f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n    const immediateGrow = (component, slideConfig, slideState) => {\n      if (!slideState.isExpanded()) {\n        setGrown(component, slideConfig);\n        set$8(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n        disableTransitions(component, slideConfig);\n        slideState.setExpanded();\n        slideConfig.onStartGrow(component);\n        slideConfig.onGrown(component);\n      }\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions,\n        immediateGrow: immediateGrow\n    });\n\n    const exhibit = (base, slideConfig, _slideState) => {\n      const expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    const events$6 = (slideConfig, slideState) => derive$2([runOnSource(transitionend(), (component, simulatedEvent) => {\n        const raw = simulatedEvent.event.raw;\n        if (raw.propertyName === slideConfig.dimension.property) {\n          disableTransitions(component, slideConfig);\n          if (slideState.isExpanded()) {\n            remove$6(component.element, slideConfig.dimension.property);\n          }\n          const notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n          notify(component);\n        }\n      })]);\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$6\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option$3('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', elem => get$c(elem) + 'px')\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', elem => get$d(elem) + 'px')\n        ]\n      }))\n    ];\n\n    const init$9 = spec => {\n      const state = Cell(spec.expanded);\n      const readState = () => 'expanded: ' + state.get();\n      return nu$8({\n        isExpanded: () => state.get() === true,\n        isCollapsed: () => state.get() === false,\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    const Sliding = create$4({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    const getMenuButtonApi = component => ({\n      isEnabled: () => !Disabling.isDisabled(component),\n      setEnabled: state => Disabling.set(component, !state),\n      setActive: state => {\n        const elm = component.element;\n        if (state) {\n          add$2(elm, 'tox-tbtn--enabled');\n          set$9(elm, 'aria-pressed', true);\n        } else {\n          remove$2(elm, 'tox-tbtn--enabled');\n          remove$7(elm, 'aria-pressed');\n        }\n      },\n      isActive: () => has(component.element, 'tox-tbtn--enabled'),\n      setText: text => {\n        emitWith(component, updateMenuText, { text });\n      },\n      setIcon: icon => emitWith(component, updateMenuIcon, { icon })\n    });\n    const renderMenuButton = (spec, prefix, backstage, role, tabstopping = true, btnName) => {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        ariaLabel: spec.tooltip,\n        searchable: spec.search.isSome(),\n        role,\n        fetch: (dropdownComp, callback) => {\n          const fetchContext = { pattern: spec.search.isSome() ? getSearchPattern(dropdownComp) : '' };\n          spec.fetch(items => {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n              isHorizontalMenu: false,\n              search: spec.search\n            }));\n          }, fetchContext, getMenuButtonApi(dropdownComp));\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [...tabstopping ? [Tabstopping.config({})] : []]\n      }, prefix, backstage.shared, btnName);\n    };\n    const getFetch = (items, getButton, backstage) => {\n      const getMenuItemAction = item => api => {\n        const newValue = !api.isActive();\n        api.setActive(newValue);\n        item.storage.set(newValue);\n        backstage.shared.getSink().each(sink => {\n          getButton().getOpt(sink).each(orig => {\n            focus$3(orig.element);\n            emitWith(orig, formActionEvent, {\n              name: item.name,\n              value: item.storage.get()\n            });\n          });\n        });\n      };\n      const getMenuItemSetup = item => api => {\n        api.setActive(item.storage.get());\n      };\n      return success => {\n        success(map$2(items, item => {\n          const text = item.text.fold(() => ({}), text => ({ text }));\n          return {\n            type: item.type,\n            active: false,\n            ...text,\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          };\n        }));\n      };\n    };\n\n    const renderLabel = text => ({\n      dom: {\n        tag: 'span',\n        classes: ['tox-tree__label'],\n        attributes: { 'aria-label': text }\n      },\n      components: [text$2(text)]\n    });\n    const leafLabelEventsId = generate$6('leaf-label-event-id');\n    const renderLeafLabel = ({leaf, onLeafAction, visible, treeId, selectedId, backstage}) => {\n      const internalMenuButton = leaf.menu.map(btn => renderMenuButton(btn, 'tox-mbtn', backstage, Optional.none(), visible));\n      const components = [renderLabel(leaf.title)];\n      internalMenuButton.each(btn => components.push(btn));\n      return Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-tree--leaf__label',\n            'tox-trbtn'\n          ].concat(visible ? ['tox-tree--leaf__label--visible'] : [])\n        },\n        components,\n        role: 'treeitem',\n        action: button => {\n          onLeafAction(leaf.id);\n          button.getSystem().broadcastOn([`update-active-item-${ treeId }`], { value: leaf.id });\n        },\n        eventOrder: {\n          [keydown()]: [\n            leafLabelEventsId,\n            'keying'\n          ]\n        },\n        buttonBehaviours: derive$1([\n          ...visible ? [Tabstopping.config({})] : [],\n          Toggling.config({\n            toggleClass: 'tox-trbtn--enabled',\n            toggleOnExecute: false,\n            aria: { mode: 'selected' }\n          }),\n          Receiving.config({\n            channels: {\n              [`update-active-item-${ treeId }`]: {\n                onReceive: (comp, message) => {\n                  (message.value === leaf.id ? Toggling.on : Toggling.off)(comp);\n                }\n              }\n            }\n          }),\n          config(leafLabelEventsId, [\n            runOnAttached((comp, _se) => {\n              selectedId.each(id => {\n                const toggle = id === leaf.id ? Toggling.on : Toggling.off;\n                toggle(comp);\n              });\n            }),\n            run$1(keydown(), (comp, se) => {\n              const isLeftArrowKey = se.event.raw.code === 'ArrowLeft';\n              const isRightArrowKey = se.event.raw.code === 'ArrowRight';\n              if (isLeftArrowKey) {\n                ancestor(comp.element, '.tox-tree--directory').each(dirElement => {\n                  comp.getSystem().getByDom(dirElement).each(dirComp => {\n                    child(dirElement, '.tox-tree--directory__label').each(dirLabelElement => {\n                      dirComp.getSystem().getByDom(dirLabelElement).each(Focusing.focus);\n                    });\n                  });\n                });\n                se.stop();\n              } else if (isRightArrowKey) {\n                se.stop();\n              }\n            })\n          ])\n        ])\n      });\n    };\n    const renderIcon = (iconName, iconsProvider, behaviours) => render$3(iconName, {\n      tag: 'span',\n      classes: [\n        'tox-tree__icon-wrap',\n        'tox-icon'\n      ],\n      behaviours\n    }, iconsProvider);\n    const renderIconFromPack = (iconName, iconsProvider) => renderIcon(iconName, iconsProvider, []);\n    const directoryLabelEventsId = generate$6('directory-label-event-id');\n    const renderDirectoryLabel = ({directory, visible, noChildren, backstage}) => {\n      const internalMenuButton = directory.menu.map(btn => renderMenuButton(btn, 'tox-mbtn', backstage, Optional.none()));\n      const components = [\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-chevron']\n          },\n          components: [renderIconFromPack('chevron-right', backstage.shared.providers.icons)]\n        },\n        renderLabel(directory.title)\n      ];\n      internalMenuButton.each(btn => {\n        components.push(btn);\n      });\n      const toggleExpandChildren = button => {\n        ancestor(button.element, '.tox-tree--directory').each(directoryEle => {\n          button.getSystem().getByDom(directoryEle).each(directoryComp => {\n            const willExpand = !Toggling.isOn(directoryComp);\n            Toggling.toggle(directoryComp);\n            emitWith(button, 'expand-tree-node', {\n              expanded: willExpand,\n              node: directory.id\n            });\n          });\n        });\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-tree--directory__label',\n            'tox-trbtn'\n          ].concat(visible ? ['tox-tree--directory__label--visible'] : [])\n        },\n        components,\n        action: toggleExpandChildren,\n        eventOrder: {\n          [keydown()]: [\n            directoryLabelEventsId,\n            'keying'\n          ]\n        },\n        buttonBehaviours: derive$1([\n          ...visible ? [Tabstopping.config({})] : [],\n          config(directoryLabelEventsId, [run$1(keydown(), (comp, se) => {\n              const isRightArrowKey = se.event.raw.code === 'ArrowRight';\n              const isLeftArrowKey = se.event.raw.code === 'ArrowLeft';\n              if (isRightArrowKey && noChildren) {\n                se.stop();\n              }\n              if (isRightArrowKey || isLeftArrowKey) {\n                ancestor(comp.element, '.tox-tree--directory').each(directoryEle => {\n                  comp.getSystem().getByDom(directoryEle).each(directoryComp => {\n                    if (!Toggling.isOn(directoryComp) && isRightArrowKey || Toggling.isOn(directoryComp) && isLeftArrowKey) {\n                      toggleExpandChildren(comp);\n                      se.stop();\n                    } else if (isLeftArrowKey && !Toggling.isOn(directoryComp)) {\n                      ancestor(directoryComp.element, '.tox-tree--directory').each(parentDirElement => {\n                        child(parentDirElement, '.tox-tree--directory__label').each(parentDirLabelElement => {\n                          directoryComp.getSystem().getByDom(parentDirLabelElement).each(Focusing.focus);\n                        });\n                      });\n                      se.stop();\n                    }\n                  });\n                });\n              }\n            })])\n        ])\n      });\n    };\n    const renderDirectoryChildren = ({children, onLeafAction, visible, treeId, expandedIds, selectedId, backstage}) => {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-tree--directory__children']\n        },\n        components: children.map(item => {\n          return item.type === 'leaf' ? renderLeafLabel({\n            leaf: item,\n            selectedId,\n            onLeafAction,\n            visible,\n            treeId,\n            backstage\n          }) : renderDirectory({\n            directory: item,\n            expandedIds,\n            selectedId,\n            onLeafAction,\n            labelTabstopping: visible,\n            treeId,\n            backstage\n          });\n        }),\n        behaviours: derive$1([\n          Sliding.config({\n            dimension: { property: 'height' },\n            closedClass: 'tox-tree--directory__children--closed',\n            openClass: 'tox-tree--directory__children--open',\n            growingClass: 'tox-tree--directory__children--growing',\n            shrinkingClass: 'tox-tree--directory__children--shrinking',\n            expanded: visible\n          }),\n          Replacing.config({})\n        ])\n      };\n    };\n    const directoryEventsId = generate$6('directory-event-id');\n    const renderDirectory = ({directory, onLeafAction, labelTabstopping, treeId, backstage, expandedIds, selectedId}) => {\n      const {children} = directory;\n      const expandedIdsCell = Cell(expandedIds);\n      const computedChildrenComponents = visible => children.map(item => {\n        return item.type === 'leaf' ? renderLeafLabel({\n          leaf: item,\n          selectedId,\n          onLeafAction,\n          visible,\n          treeId,\n          backstage\n        }) : renderDirectory({\n          directory: item,\n          expandedIds: expandedIdsCell.get(),\n          selectedId,\n          onLeafAction,\n          labelTabstopping: visible,\n          treeId,\n          backstage\n        });\n      });\n      const childrenVisible = expandedIds.includes(directory.id);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-tree--directory'],\n          attributes: { role: 'treeitem' }\n        },\n        components: [\n          renderDirectoryLabel({\n            directory,\n            visible: labelTabstopping,\n            noChildren: directory.children.length === 0,\n            backstage\n          }),\n          renderDirectoryChildren({\n            children,\n            expandedIds,\n            selectedId,\n            onLeafAction,\n            visible: childrenVisible,\n            treeId,\n            backstage\n          })\n        ],\n        behaviours: derive$1([\n          config(directoryEventsId, [\n            runOnAttached((comp, _se) => {\n              Toggling.set(comp, childrenVisible);\n            }),\n            run$1('expand-tree-node', (_cmp, se) => {\n              const {expanded, node} = se.event;\n              expandedIdsCell.set(expanded ? [\n                ...expandedIdsCell.get(),\n                node\n              ] : expandedIdsCell.get().filter(id => id !== node));\n            })\n          ]),\n          Toggling.config({\n            ...directory.children.length > 0 ? { aria: { mode: 'expanded' } } : {},\n            toggleClass: 'tox-tree--directory--expanded',\n            onToggled: (comp, childrenVisible) => {\n              const childrenComp = comp.components()[1];\n              const newChildren = computedChildrenComponents(childrenVisible);\n              if (childrenVisible) {\n                Sliding.grow(childrenComp);\n              } else {\n                Sliding.shrink(childrenComp);\n              }\n              Replacing.set(childrenComp, newChildren);\n            }\n          })\n        ])\n      };\n    };\n    const treeEventsId = generate$6('tree-event-id');\n    const renderTree = (spec, backstage) => {\n      const onLeafAction = spec.onLeafAction.getOr(noop);\n      const onToggleExpand = spec.onToggleExpand.getOr(noop);\n      const defaultExpandedIds = spec.defaultExpandedIds;\n      const expandedIds = Cell(defaultExpandedIds);\n      const selectedIdCell = Cell(spec.defaultSelectedId);\n      const treeId = generate$6('tree-id');\n      const children = (selectedId, expandedIds) => spec.items.map(item => {\n        return item.type === 'leaf' ? renderLeafLabel({\n          leaf: item,\n          selectedId,\n          onLeafAction,\n          visible: true,\n          treeId,\n          backstage\n        }) : renderDirectory({\n          directory: item,\n          selectedId,\n          onLeafAction,\n          expandedIds,\n          labelTabstopping: true,\n          treeId,\n          backstage\n        });\n      });\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-tree'],\n          attributes: { role: 'tree' }\n        },\n        components: children(selectedIdCell.get(), expandedIds.get()),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: '.tox-tree--leaf__label--visible, .tox-tree--directory__label--visible',\n            cycles: false\n          }),\n          config(treeEventsId, [run$1('expand-tree-node', (_cmp, se) => {\n              const {expanded, node} = se.event;\n              expandedIds.set(expanded ? [\n                ...expandedIds.get(),\n                node\n              ] : expandedIds.get().filter(id => id !== node));\n              onToggleExpand(expandedIds.get(), {\n                expanded,\n                node\n              });\n            })]),\n          Receiving.config({\n            channels: {\n              [`update-active-item-${ treeId }`]: {\n                onReceive: (comp, message) => {\n                  selectedIdCell.set(Optional.some(message.value));\n                  Replacing.set(comp, children(Optional.some(message.value), expandedIds.get()));\n                }\n              }\n            }\n          }),\n          Replacing.config({})\n        ])\n      };\n    };\n\n    const events$5 = (streamConfig, streamState) => {\n      const streams = streamConfig.stream.streams;\n      const processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(() => streamState.cancel())\n      ].concat(streamConfig.cancelEvent.map(e => [run$1(e, () => streamState.cancel())]).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    const throttle = _config => {\n      const state = Cell(null);\n      const readState = () => ({ timer: state.get() !== null ? 'set' : 'unset' });\n      const setTimer = t => {\n        state.set(t);\n      };\n      const cancel = () => {\n        const t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState,\n        setTimer,\n        cancel\n      });\n    };\n    const init$8 = spec => spec.stream.streams.state(spec);\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$8\n    });\n\n    const setup$c = (streamInfo, streamState) => {\n      const sInfo = streamInfo.stream;\n      const throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return (component, simulatedEvent) => {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option$3('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    const Streaming = create$4({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    const setValueFromItem = (model, input, item) => {\n      const itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    const setSelectionOn = (input, f) => {\n      const el = input.element;\n      const value = get$6(el);\n      const node = el.dom;\n      if (get$f(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    const setCursorAtEnd = input => {\n      setSelectionOn(input, (node, value) => node.setSelectionRange(value.length, value.length));\n    };\n    const setSelectionToEnd = (input, startOffset) => {\n      setSelectionOn(input, (node, value) => node.setSelectionRange(startOffset, value.length));\n    };\n    const attemptSelectOver = (model, input, item) => {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        const currentValue = Representing.getValue(input);\n        const inputDisplay = model.getDisplayText(currentValue);\n        const itemValue = Representing.getValue(item);\n        const itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay) === 0 ? Optional.some(() => {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay.length);\n        }) : Optional.none();\n      }\n    };\n\n    const itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    const make$3 = (detail, components, spec, externals) => {\n      const navigateList = (comp, simulatedEvent, highlighter) => {\n        detail.previewing.set(false);\n        const sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(menu => {\n            Highlighting.getHighlighted(menu).fold(() => {\n              highlighter(menu);\n            }, () => {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          const onOpenSync = sandbox => {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n        }\n      };\n      const focusBehaviours$1 = focusBehaviours(detail);\n      const mapFetch = comp => tdata => tdata.map(data => {\n        const menus = values(data.menus);\n        const items = bind$3(menus, menu => filter$2(menu.items, item => item.type === 'item'));\n        const repState = Representing.getState(comp);\n        repState.update(map$2(items, item => item.data));\n        return data;\n      });\n      const getActiveMenu = sandboxComp => Composing.getCurrent(sandboxComp);\n      const typeaheadCustomEvents = 'typeaheadevents';\n      const behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: {\n            mode: 'dataset',\n            getDataKey: comp => get$6(comp.element),\n            getFallbackEntry: itemString => ({\n              value: itemString,\n              meta: {}\n            }),\n            setValue: (comp, data) => {\n              set$5(comp.element, detail.model.getDisplayText(data));\n            },\n            ...detail.initialData.map(d => wrap$1('initialValue', d)).getOr({})\n          }\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: (component, _simulatedEvent) => {\n            const sandbox = Coupling.getCoupled(component, 'sandbox');\n            const focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$6(component.element).length >= detail.minChars) {\n                const previousValue = getActiveMenu(sandbox).bind(activeMenu => Highlighting.getHighlighted(activeMenu).map(Representing.getValue));\n                detail.previewing.set(true);\n                const onOpenSync = _sandbox => {\n                  getActiveMenu(sandbox).each(activeMenu => {\n                    previousValue.fold(() => {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(activeMenu);\n                      }\n                    }, pv => {\n                      Highlighting.highlightBy(activeMenu, item => {\n                        const itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(activeMenu).orThunk(() => {\n                        Highlighting.highlightFirst(activeMenu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightJustMenu).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: (comp, simulatedEvent) => {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: comp => {\n            const sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: (comp, simulatedEvent) => {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: comp => {\n            const sandbox = Coupling.getCoupled(comp, 'sandbox');\n            const sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return getActiveMenu(sandbox).bind(activeMenu => Highlighting.getHighlighted(activeMenu)).map(item => {\n                emitWith(comp, itemExecute(), { item });\n                return true;\n              });\n            } else {\n              const currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: hotspot => {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: () => Toggling.on(hotspot),\n                onClose: () => {\n                  detail.lazyTypeaheadComp.get().each(input => remove$7(input.element, 'aria-activedescendant'));\n                  Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config(typeaheadCustomEvents, [\n          runOnAttached(typeaheadComp => {\n            detail.lazyTypeaheadComp.set(Optional.some(typeaheadComp));\n          }),\n          runOnDetached(_typeaheadComp => {\n            detail.lazyTypeaheadComp.set(Optional.none());\n          }),\n          runOnExecute$1(comp => {\n            const onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n          }),\n          run$1(itemExecute(), (comp, se) => {\n            const sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), typeahead => {\n            const sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      const eventOrder = {\n        [detachedFromDom()]: [\n          Representing.name(),\n          Streaming.name(),\n          typeaheadCustomEvents\n        ],\n        ...detail.eventOrder\n      };\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: {\n          ...focusBehaviours$1,\n          ...augment(detail.typeaheadBehaviours, behaviours)\n        },\n        eventOrder\n      };\n    };\n\n    const schema$g = constant$1([\n      option$3('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', itemData => itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option$3('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('lazyTypeaheadComp', () => Cell(Optional.none)),\n      customField('previewing', () => Cell(true))\n    ].concat(schema$l()).concat(sandboxFields()));\n    const parts$b = constant$1([external({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: detail => {\n          return {\n            fakeFocus: true,\n            onHighlightItem: (_tmenu, menu, item) => {\n              if (!detail.previewing.get()) {\n                detail.lazyTypeaheadComp.get().each(input => {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                  getOpt(item.element, 'id').each(id => set$9(input.element, 'aria-activedescendant', id));\n                });\n              } else {\n                detail.lazyTypeaheadComp.get().each(input => {\n                  attemptSelectOver(detail.model, input, item).fold(() => {\n                    if (detail.model.selectsOver) {\n                      Highlighting.dehighlight(menu, item);\n                      detail.previewing.set(true);\n                    } else {\n                      detail.previewing.set(false);\n                    }\n                  }, selectOverTextInInput => {\n                    selectOverTextInInput();\n                    detail.previewing.set(false);\n                  });\n                });\n              }\n            },\n            onExecute: (_menu, item) => {\n              return detail.lazyTypeaheadComp.get().map(typeahead => {\n                emitWith(typeahead, itemExecute(), { item });\n                return true;\n              });\n            },\n            onHover: (menu, item) => {\n              detail.previewing.set(false);\n              detail.lazyTypeaheadComp.get().each(input => {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    const Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    const wrap = delegate => {\n      const toCached = () => {\n        return wrap(delegate.toCached());\n      };\n      const bindFuture = f => {\n        return wrap(delegate.bind(resA => resA.fold(err => Future.pure(Result.error(err)), a => f(a))));\n      };\n      const bindResult = f => {\n        return wrap(delegate.map(resA => resA.bind(f)));\n      };\n      const mapResult = f => {\n        return wrap(delegate.map(resA => resA.map(f)));\n      };\n      const mapError = f => {\n        return wrap(delegate.map(resA => resA.mapError(f)));\n      };\n      const foldResult = (whenError, whenValue) => {\n        return delegate.map(res => res.fold(whenError, whenValue));\n      };\n      const withTimeout = (timeout, errorThunk) => {\n        return wrap(Future.nu(callback => {\n          let timedOut = false;\n          const timer = setTimeout(() => {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(result => {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return {\n        ...delegate,\n        toCached,\n        bindFuture,\n        bindResult,\n        mapResult,\n        mapError,\n        foldResult,\n        withTimeout\n      };\n    };\n    const nu$1 = worker => {\n      return wrap(Future.nu(worker));\n    };\n    const value = value => {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    const error = error => {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    const fromResult = result => {\n      return wrap(Future.pure(result));\n    };\n    const fromFuture = future => {\n      return wrap(future.map(Result.value));\n    };\n    const fromPromise = promise => {\n      return nu$1(completer => {\n        promise.then(value => {\n          completer(Result.value(value));\n        }, error => {\n          completer(Result.error(error));\n        });\n      });\n    };\n    const FutureResult = {\n      nu: nu$1,\n      wrap,\n      pure: value,\n      value,\n      error,\n      fromResult,\n      fromFuture,\n      fromPromise\n    };\n\n    const renderCommonSpec = (spec, actionOpt, extraBehaviours = [], dom, components, tooltip, providersBackstage) => {\n      const action = actionOpt.fold(() => ({}), action => ({ action }));\n      const common = {\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(() => !spec.enabled || providersBackstage.isDisabled()),\n          receivingConfig(),\n          Tabstopping.config({}),\n          ...tooltip.map(t => Tooltipping.config(providersBackstage.tooltips.getConfig({ tooltipText: providersBackstage.translate(t) }))).toArray(),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        },\n        ...action\n      };\n      const domFinal = deepMerge(common, { dom });\n      return deepMerge(domFinal, { components });\n    };\n    const renderIconButtonSpec = (spec, action, providersBackstage, extraBehaviours = [], btnName) => {\n      const tooltipAttributes = spec.tooltip.map(tooltip => ({ 'aria-label': providersBackstage.translate(tooltip) })).getOr({});\n      const dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: {\n          ...tooltipAttributes,\n          'data-mce-name': btnName\n        }\n      };\n      const icon = spec.icon.map(iconName => renderIconFromPack$1(iconName, providersBackstage.icons));\n      const components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, spec.tooltip, providersBackstage);\n    };\n    const calculateClassesFromButtonType = buttonType => {\n      switch (buttonType) {\n      case 'primary':\n        return ['tox-button'];\n      case 'toolbar':\n        return ['tox-tbtn'];\n      case 'secondary':\n      default:\n        return [\n          'tox-button',\n          'tox-button--secondary'\n        ];\n      }\n    };\n    const renderButtonSpec = (spec, action, providersBackstage, extraBehaviours = [], extraClasses = []) => {\n      const translatedText = providersBackstage.translate(spec.text);\n      const icon = spec.icon.map(iconName => renderIconFromPack$1(iconName, providersBackstage.icons));\n      const components = [icon.getOrThunk(() => text$2(translatedText))];\n      const buttonType = spec.buttonType.getOr(!spec.primary && !spec.borderless ? 'secondary' : 'primary');\n      const baseClasses = calculateClassesFromButtonType(buttonType);\n      const classes = [\n        ...baseClasses,\n        ...icon.isSome() ? ['tox-button--icon'] : [],\n        ...spec.borderless ? ['tox-button--naked'] : [],\n        ...extraClasses\n      ];\n      const dom = {\n        tag: 'button',\n        classes,\n        attributes: {\n          'aria-label': translatedText,\n          'data-mce-name': spec.text\n        }\n      };\n      const optTooltip = spec.icon.map(constant$1(translatedText));\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, optTooltip, providersBackstage);\n    };\n    const renderButton$1 = (spec, action, providersBackstage, extraBehaviours = [], extraClasses = []) => {\n      const buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    const getAction = (name, buttonType) => comp => {\n      if (buttonType === 'custom') {\n        emitWith(comp, formActionEvent, {\n          name,\n          value: {}\n        });\n      } else if (buttonType === 'submit') {\n        emit(comp, formSubmitEvent);\n      } else if (buttonType === 'cancel') {\n        emit(comp, formCancelEvent);\n      } else {\n        console.error('Unknown button type: ', buttonType);\n      }\n    };\n    const isMenuFooterButtonSpec = (spec, buttonType) => buttonType === 'menu';\n    const isNormalFooterButtonSpec = (spec, buttonType) => buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    const isToggleButtonSpec = (spec, buttonType) => buttonType === 'togglebutton';\n    const renderToggleButton = (spec, providers, btnName) => {\n      var _a, _b;\n      const optMemIcon = spec.icon.map(memIcon => renderReplaceableIconFromPack(memIcon, providers.icons)).map(record);\n      const action = comp => {\n        emitWith(comp, formActionEvent, {\n          name: spec.name,\n          value: {\n            setIcon: newIcon => {\n              optMemIcon.map(memIcon => memIcon.getOpt(comp).each(displayIcon => {\n                Replacing.set(displayIcon, [renderReplaceableIconFromPack(newIcon, providers.icons)]);\n              }));\n            }\n          }\n        });\n      };\n      const buttonType = spec.buttonType.getOr(!spec.primary ? 'secondary' : 'primary');\n      const buttonSpec = {\n        ...spec,\n        name: (_a = spec.name) !== null && _a !== void 0 ? _a : '',\n        primary: buttonType === 'primary',\n        tooltip: spec.tooltip,\n        enabled: (_b = spec.enabled) !== null && _b !== void 0 ? _b : false,\n        borderless: false\n      };\n      const tooltipAttributes = buttonSpec.tooltip.or(spec.text).map(tooltip => ({ 'aria-label': providers.translate(tooltip) })).getOr({});\n      const buttonTypeClasses = calculateClassesFromButtonType(buttonType !== null && buttonType !== void 0 ? buttonType : 'secondary');\n      const showIconAndText = spec.icon.isSome() && spec.text.isSome();\n      const dom = {\n        tag: 'button',\n        classes: [\n          ...buttonTypeClasses.concat(spec.icon.isSome() ? ['tox-button--icon'] : []),\n          ...spec.active ? ['tox-button--enabled'] : [],\n          ...showIconAndText ? ['tox-button--icon-and-text'] : []\n        ],\n        attributes: {\n          ...tooltipAttributes,\n          ...isNonNullable(btnName) ? { 'data-mce-name': btnName } : {}\n        }\n      };\n      const extraBehaviours = [];\n      const translatedText = providers.translate(spec.text.getOr(''));\n      const translatedTextComponed = text$2(translatedText);\n      const iconComp = componentRenderPipeline([optMemIcon.map(memIcon => memIcon.asSpec())]);\n      const components = [\n        ...iconComp,\n        ...spec.text.isSome() ? [translatedTextComponed] : []\n      ];\n      const iconButtonSpec = renderCommonSpec(buttonSpec, Optional.some(action), extraBehaviours, dom, components, spec.tooltip, providers);\n      return Button.sketch(iconButtonSpec);\n    };\n    const renderFooterButton = (spec, buttonType, backstage) => {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        const getButton = () => memButton;\n        const menuButtonSpec = spec;\n        const fixedSpec = {\n          ...spec,\n          type: 'menubutton',\n          search: Optional.none(),\n          onSetup: api => {\n            api.setEnabled(spec.enabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        };\n        const memButton = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none(), true, spec.text.or(spec.tooltip).getOrUndefined()));\n        return memButton.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        const action = getAction(spec.name, buttonType);\n        const buttonSpec = {\n          ...spec,\n          borderless: false\n        };\n        return renderButton$1(buttonSpec, action, backstage.shared.providers, []);\n      } else if (isToggleButtonSpec(spec, buttonType)) {\n        return renderToggleButton(spec, backstage.shared.providers, spec.text.or(spec.tooltip).getOrUndefined());\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n        throw new Error('Unknown footer button type');\n      }\n    };\n    const renderDialogButton = (spec, providersBackstage) => {\n      const action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field({\n        factory: Button,\n        ...renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n          memory(''),\n          ComposingConfigs.self()\n        ])\n      }));\n    };\n\n    const separator$1 = { type: 'separator' };\n    const toMenuItem = target => ({\n      type: 'menuitem',\n      value: target.url,\n      text: target.title,\n      meta: { attach: target.attach },\n      onAction: noop\n    });\n    const staticMenuItem = (title, url) => ({\n      type: 'menuitem',\n      value: url,\n      text: title,\n      meta: { attach: undefined },\n      onAction: noop\n    });\n    const toMenuItems = targets => map$2(targets, toMenuItem);\n    const filterLinkTargets = (type, targets) => filter$2(targets, target => target.type === type);\n    const filteredTargets = (type, targets) => toMenuItems(filterLinkTargets(type, targets));\n    const headerTargets = linkInfo => filteredTargets('header', linkInfo.targets);\n    const anchorTargets = linkInfo => filteredTargets('anchor', linkInfo.targets);\n    const anchorTargetTop = linkInfo => Optional.from(linkInfo.anchorTop).map(url => staticMenuItem('<top>', url)).toArray();\n    const anchorTargetBottom = linkInfo => Optional.from(linkInfo.anchorBottom).map(url => staticMenuItem('<bottom>', url)).toArray();\n    const historyTargets = history => map$2(history, url => staticMenuItem(url, url));\n    const joinMenuLists = items => {\n      return foldl(items, (a, b) => {\n        const bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    const filterByQuery = (term, menuItems) => {\n      const lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, item => {\n        var _a;\n        const text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        const value = (_a = item.value) !== null && _a !== void 0 ? _a : '';\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    const getItems = (fileType, input, urlBackstage) => {\n      var _a, _b;\n      const urlInputValue = Representing.getValue(input);\n      const term = (_b = (_a = urlInputValue === null || urlInputValue === void 0 ? void 0 : urlInputValue.meta) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : urlInputValue.value;\n      const info = urlBackstage.getLinkInformation();\n      return info.fold(() => [], linkInfo => {\n        const history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    const errorId = generate$6('aria-invalid');\n    const renderUrlInput = (spec, backstage, urlBackstage, initialData) => {\n      const providersBackstage = backstage.shared.providers;\n      const updateHistory = component => {\n        const urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      const typeaheadSpec = {\n        ...initialData.map(initialData => ({ initialData })).getOr({}),\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: input => {\n          const items = getItems(spec.filetype, input, urlBackstage);\n          const tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, {\n            isHorizontalMenu: false,\n            search: Optional.none()\n          });\n          return Future.pure(tdata);\n        },\n        getHotspot: comp => memUrlBox.getOpt(comp),\n        onSetValue: (comp, _newValue) => {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1([\n          ...urlBackstage.getValidationHandler().map(handler => Invalidating.config({\n            getRoot: comp => parentElement(comp.element),\n            invalidClass: 'tox-control-wrap--status-invalid',\n            notify: {\n              onInvalid: (comp, err) => {\n                memInvalidIcon.getOpt(comp).each(invalidComp => {\n                  set$9(invalidComp.element, 'title', providersBackstage.translate(err));\n                });\n              }\n            },\n            validator: {\n              validate: input => {\n                const urlEntry = Representing.getValue(input);\n                return FutureResult.nu(completer => {\n                  handler({\n                    type: spec.filetype,\n                    url: urlEntry.value\n                  }, validation => {\n                    if (validation.status === 'invalid') {\n                      const err = Result.error(validation.message);\n                      completer(err);\n                    } else {\n                      const val = Result.value(validation.message);\n                      completer(val);\n                    }\n                  });\n                });\n              },\n              validateOnLoad: false\n            }\n          })).toArray(),\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          Tabstopping.config({}),\n          config('urlinput-events', [\n            run$1(input(), comp => {\n              const currentValue = get$6(comp.element);\n              const trimmedValue = currentValue.trim();\n              if (trimmedValue !== currentValue) {\n                set$5(comp.element, trimmedValue);\n              }\n              if (spec.filetype === 'file') {\n                emitWith(comp, formChangeEvent, { name: spec.name });\n              }\n            }),\n            run$1(change(), comp => {\n              emitWith(comp, formChangeEvent, { name: spec.name });\n              updateHistory(comp);\n            }),\n            run$1(postPaste(), comp => {\n              emitWith(comp, formChangeEvent, { name: spec.name });\n              updateHistory(comp);\n            })\n          ])\n        ]),\n        eventOrder: {\n          [input()]: [\n            'streaming',\n            'urlinput-events',\n            'invalidating'\n          ]\n        },\n        model: {\n          getDisplayText: itemData => itemData.value,\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: (_menu, component, _entry) => {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: (typeahead, _sandbox, _item, _value) => {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      };\n      const pField = FormField.parts.field({\n        ...typeaheadSpec,\n        factory: Typeahead\n      });\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const makeIcon = (name, errId, icon = name, label = name) => render$3(icon, {\n        tag: 'div',\n        classes: [\n          'tox-icon',\n          'tox-control-wrap__status-icon-' + name\n        ],\n        attributes: {\n          'title': providersBackstage.translate(label),\n          'aria-live': 'polite',\n          ...errId.fold(() => ({}), id => ({ id }))\n        }\n      }, providersBackstage.icons);\n      const memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      const memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      const optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      const browseUrlEvent = generate$6('browser.url.event');\n      const memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() })])\n      });\n      const memUrlPickerButton = record(renderButton$1({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.picker_text.or(spec.label).getOr(''),\n        enabled: spec.enabled,\n        primary: false,\n        buttonType: Optional.none(),\n        borderless: true\n      }, component => emit(component, browseUrlEvent), providersBackstage, [], ['tox-browse-url']));\n      const controlHWrapper = () => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__controls-h-stack']\n        },\n        components: flatten([\n          [memUrlBox.asSpec()],\n          optUrlPicker.map(() => memUrlPickerButton.asSpec()).toArray()\n        ])\n      });\n      const openUrlPicker = comp => {\n        Composing.getCurrent(comp).each(field => {\n          const componentData = Representing.getValue(field);\n          const urlData = {\n            fieldname: spec.name,\n            ...componentData\n          };\n          optUrlPicker.each(picker => {\n            picker(urlData).get(chosenData => {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: () => !spec.enabled || providersBackstage.isDisabled(),\n            onDisabled: comp => {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    const renderAlertBanner = (spec, providersBackstage) => {\n      const icon = get$2(spec.icon, providersBackstage.icons);\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            `tox-notification--${ spec.level }`\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon'],\n              innerHtml: !spec.url ? icon : undefined\n            },\n            components: spec.url ? [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: icon,\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: comp => emitWith(comp, formActionEvent, {\n                  name: 'alert-banner',\n                  value: spec.url\n                }),\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })] : undefined\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    const set$1 = (element, status) => {\n      element.dom.checked = status;\n    };\n    const get$1 = element => element.dom.checked;\n\n    const renderCheckbox = (spec, providerBackstage, initialData) => {\n      const toggleCheckboxHandler = comp => {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      const pField = FormField.parts.field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: () => !spec.enabled || providerBackstage.isDisabled(),\n            onDisabled: component => {\n              parentElement(component.element).each(element => add$2(element, 'tox-checkbox--disabled'));\n            },\n            onEnabled: component => {\n              parentElement(component.element).each(element => remove$2(element, 'tox-checkbox--disabled'));\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          withElement(initialData, get$1, set$1),\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), (component, _) => {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      const pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label']\n        },\n        components: [text$2(providerBackstage.translate(spec.label))],\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      const makeIcon = className => {\n        const iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      const memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providerBackstage.isDisabled() }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    const renderHtmlPanel = (spec, providersBackstage) => {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          },\n          containerBehaviours: derive$1([Tooltipping.config({\n              ...providersBackstage.tooltips.getConfig({\n                tooltipText: '',\n                onShow: comp => {\n                  descendant(comp.element, '[data-mce-tooltip]:hover').orThunk(() => search(comp.element)).each(current => {\n                    getOpt(current, 'data-mce-tooltip').each(text => {\n                      Tooltipping.setComponents(comp, providersBackstage.tooltips.getComponents({ tooltipText: text }));\n                    });\n                  });\n                }\n              }),\n              mode: 'children-normal',\n              anchor: comp => ({\n                type: 'node',\n                node: descendant(comp.element, '[data-mce-tooltip]:hover').orThunk(() => search(comp.element).filter(current => getOpt(current, 'data-mce-tooltip').isSome())),\n                root: comp.element,\n                layouts: {\n                  onLtr: constant$1([\n                    south$2,\n                    north$2,\n                    southeast$2,\n                    northeast$2,\n                    southwest$2,\n                    northwest$2\n                  ]),\n                  onRtl: constant$1([\n                    south$2,\n                    north$2,\n                    southeast$2,\n                    northeast$2,\n                    southwest$2,\n                    northwest$2\n                  ])\n                },\n                bubble: nu$5(0, -2, {})\n              })\n            })])\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    const make$2 = render => {\n      return (parts, spec, dialogData, backstage) => get$g(spec, 'name').fold(() => render(spec, backstage, Optional.none()), fieldName => parts.field(fieldName, render(spec, backstage, get$g(dialogData, fieldName))));\n    };\n    const makeIframe = render => (parts, spec, dialogData, backstage) => {\n      const iframeSpec = deepMerge(spec, { source: 'dynamic' });\n      return make$2(render)(parts, iframeSpec, dialogData, backstage);\n    };\n    const factories = {\n      bar: make$2((spec, backstage) => renderBar(spec, backstage.shared)),\n      collection: make$2((spec, backstage, data) => renderCollection(spec, backstage.shared.providers, data)),\n      alertbanner: make$2((spec, backstage) => renderAlertBanner(spec, backstage.shared.providers)),\n      input: make$2((spec, backstage, data) => renderInput(spec, backstage.shared.providers, data)),\n      textarea: make$2((spec, backstage, data) => renderTextarea(spec, backstage.shared.providers, data)),\n      label: make$2((spec, backstage) => renderLabel$2(spec, backstage.shared)),\n      iframe: makeIframe((spec, backstage, data) => renderIFrame(spec, backstage.shared.providers, data)),\n      button: make$2((spec, backstage) => renderDialogButton(spec, backstage.shared.providers)),\n      checkbox: make$2((spec, backstage, data) => renderCheckbox(spec, backstage.shared.providers, data)),\n      colorinput: make$2((spec, backstage, data) => renderColorInput(spec, backstage.shared, backstage.colorinput, data)),\n      colorpicker: make$2((spec, backstage, data) => renderColorPicker(spec, backstage.shared.providers, data)),\n      dropzone: make$2((spec, backstage, data) => renderDropZone(spec, backstage.shared.providers, data)),\n      grid: make$2((spec, backstage) => renderGrid(spec, backstage.shared)),\n      listbox: make$2((spec, backstage, data) => renderListBox(spec, backstage, data)),\n      selectbox: make$2((spec, backstage, data) => renderSelectBox(spec, backstage.shared.providers, data)),\n      sizeinput: make$2((spec, backstage) => renderSizeInput(spec, backstage.shared.providers)),\n      slider: make$2((spec, backstage, data) => renderSlider(spec, backstage.shared.providers, data)),\n      urlinput: make$2((spec, backstage, data) => renderUrlInput(spec, backstage, backstage.urlinput, data)),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2((spec, backstage) => renderHtmlPanel(spec, backstage.shared.providers)),\n      imagepreview: make$2((spec, _, data) => renderImagePreview(spec, data)),\n      table: make$2((spec, backstage) => renderTable(spec, backstage.shared.providers)),\n      tree: make$2((spec, backstage) => renderTree(spec, backstage)),\n      panel: make$2((spec, backstage) => renderPanel(spec, backstage))\n    };\n    const noFormParts = {\n      field: (_name, spec) => spec,\n      record: constant$1([])\n    };\n    const interpretInForm = (parts, spec, dialogData, oldBackstage) => {\n      const newBackstage = deepMerge(oldBackstage, { shared: { interpreter: childSpec => interpretParts(parts, childSpec, dialogData, newBackstage) } });\n      return interpretParts(parts, spec, dialogData, newBackstage);\n    };\n    const interpretParts = (parts, spec, dialogData, backstage) => get$g(factories, spec.type).fold(() => {\n      console.error(`Unknown factory type \"${ spec.type }\", defaulting to container: `, spec);\n      return spec;\n    }, factory => factory(parts, spec, dialogData, backstage));\n    const interpretWithoutForm = (spec, dialogData, backstage) => interpretParts(noFormParts, spec, dialogData, backstage);\n\n    const labelPrefix = 'layout-inset';\n    const westEdgeX = anchor => anchor.x;\n    const middleX = (anchor, element) => anchor.x + anchor.width / 2 - element.width / 2;\n    const eastEdgeX = (anchor, element) => anchor.x + anchor.width - element.width;\n    const northY = anchor => anchor.y;\n    const southY = (anchor, element) => anchor.y + anchor.height - element.height;\n    const centreY = (anchor, element) => anchor.y + anchor.height / 2 - element.height / 2;\n    const southwest = (anchor, element, bubbles) => nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n      right: 0,\n      bottom: 3\n    }), labelPrefix);\n    const southeast = (anchor, element, bubbles) => nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n      left: 1,\n      bottom: 3\n    }), labelPrefix);\n    const northwest = (anchor, element, bubbles) => nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n      right: 0,\n      top: 2\n    }), labelPrefix);\n    const northeast = (anchor, element, bubbles) => nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n      left: 1,\n      top: 2\n    }), labelPrefix);\n    const north = (anchor, element, bubbles) => nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    const south = (anchor, element, bubbles) => nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    const east = (anchor, element, bubbles) => nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    const west = (anchor, element, bubbles) => nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    const lookupPreserveLayout = lastPlacement => {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    const preserve = (anchor, element, bubbles, placee, bounds) => {\n      const layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    const lookupFlippedLayout = lastPlacement => {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    const flip = (anchor, element, bubbles, placee, bounds) => {\n      const layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    const bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    const getInlineDialogAnchor = (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) => {\n      const bubbleSize = 12;\n      const overrides = { maxHeightFunction: expandable$1() };\n      const editableAreaAnchor = () => ({\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [northeast],\n          onLtr: () => [northwest]\n        },\n        overrides\n      });\n      const standardAnchor = () => ({\n        type: 'hotspot',\n        hotspot: lazyAnchorbar(),\n        bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [\n            southeast$2,\n            southwest$2,\n            south$2\n          ],\n          onLtr: () => [\n            southwest$2,\n            southeast$2,\n            south$2\n          ]\n        },\n        overrides\n      });\n      return () => lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n    };\n    const getInlineBottomDialogAnchor = (inline, contentAreaElement, lazyBottomAnchorBar, lazyUseEditableAreaAnchor) => {\n      const bubbleSize = 12;\n      const overrides = { maxHeightFunction: expandable$1() };\n      const editableAreaAnchor = () => ({\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [north],\n          onLtr: () => [north]\n        },\n        overrides\n      });\n      const standardAnchor = () => inline ? {\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        bubble: nu$5(0, -getOuter$2(contentAreaElement()), bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [north$2],\n          onLtr: () => [north$2]\n        },\n        overrides\n      } : {\n        type: 'hotspot',\n        hotspot: lazyBottomAnchorBar(),\n        bubble: nu$5(0, 0, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [north$2],\n          onLtr: () => [north$2]\n        },\n        overrides\n      };\n      return () => lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n    };\n    const getBannerAnchor = (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) => {\n      const editableAreaAnchor = () => ({\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        layouts: {\n          onRtl: () => [north],\n          onLtr: () => [north]\n        }\n      });\n      const standardAnchor = () => ({\n        type: 'hotspot',\n        hotspot: lazyAnchorbar(),\n        layouts: {\n          onRtl: () => [south$2],\n          onLtr: () => [south$2]\n        }\n      });\n      return () => lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n    };\n    const getCursorAnchor = (editor, bodyElement) => () => ({\n      type: 'selection',\n      root: bodyElement(),\n      getSelection: () => {\n        const rng = editor.selection.getRng();\n        const selectedCells = editor.model.table.getSelectedCells();\n        if (selectedCells.length > 1) {\n          const firstCell = selectedCells[0];\n          const lastCell = selectedCells[selectedCells.length - 1];\n          const selectionTableCellRange = {\n            firstCell: SugarElement.fromDom(firstCell),\n            lastCell: SugarElement.fromDom(lastCell)\n          };\n          return Optional.some(selectionTableCellRange);\n        }\n        return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n      }\n    });\n    const getNodeAnchor$1 = bodyElement => element => ({\n      type: 'node',\n      root: bodyElement(),\n      node: element\n    });\n    const getAnchors = (editor, lazyAnchorbar, lazyBottomAnchorBar, isToolbarTop) => {\n      const useFixedToolbarContainer = useFixedContainer(editor);\n      const bodyElement = () => SugarElement.fromDom(editor.getBody());\n      const contentAreaElement = () => SugarElement.fromDom(editor.getContentAreaContainer());\n      const lazyUseEditableAreaAnchor = () => useFixedToolbarContainer || !isToolbarTop();\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        inlineBottomDialog: getInlineBottomDialogAnchor(editor.inline, contentAreaElement, lazyBottomAnchorBar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    const colorPicker = editor => (callback, value) => {\n      const dialog = colorPickerDialog(editor);\n      dialog(callback, value);\n    };\n    const hasCustomColors = editor => () => hasCustomColors$1(editor);\n    const getColors = editor => id => getColors$2(editor, id);\n    const getColorCols = editor => id => getColorCols$1(editor, id);\n    const ColorInputBackstage = editor => ({\n      colorPicker: colorPicker(editor),\n      hasCustomColors: hasCustomColors(editor),\n      getColors: getColors(editor),\n      getColorCols: getColorCols(editor)\n    });\n\n    const isDraggableModal = editor => () => isDraggableModal$1(editor);\n    const DialogBackstage = editor => ({ isDraggableModal: isDraggableModal(editor) });\n\n    const HeaderBackstage = editor => {\n      const mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: () => mode.get() === 'top',\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    const isNestedFormat = format => hasNonNullableKey(format, 'items');\n    const isFormatReference = format => hasNonNullableKey(format, 'format');\n    const defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    const isNestedFormats = format => has$2(format, 'items');\n    const isBlockFormat = format => has$2(format, 'block');\n    const isInlineFormat = format => has$2(format, 'inline');\n    const isSelectorFormat = format => has$2(format, 'selector');\n    const mapFormats = userFormats => foldl(userFormats, (acc, fmt) => {\n      if (isNestedFormats(fmt)) {\n        const result = mapFormats(fmt.items);\n        return {\n          customFormats: acc.customFormats.concat(result.customFormats),\n          formats: acc.formats.concat([{\n              title: fmt.title,\n              items: result.formats\n            }])\n        };\n      } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n        const formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n        const formatNameWithPrefix = `custom-${ formatName }`;\n        return {\n          customFormats: acc.customFormats.concat([{\n              name: formatNameWithPrefix,\n              format: fmt\n            }]),\n          formats: acc.formats.concat([{\n              title: fmt.title,\n              format: formatNameWithPrefix,\n              icon: fmt.icon\n            }])\n        };\n      } else {\n        return {\n          ...acc,\n          formats: acc.formats.concat(fmt)\n        };\n      }\n    }, {\n      customFormats: [],\n      formats: []\n    });\n    const registerCustomFormats = (editor, userFormats) => {\n      const result = mapFormats(userFormats);\n      const registerFormats = customFormats => {\n        each$1(customFormats, fmt => {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', () => {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    const getStyleFormats = editor => getUserStyleFormats(editor).map(userFormats => {\n      const registeredUserFormats = registerCustomFormats(editor, userFormats);\n      return shouldMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n    }).getOr(defaultStyleFormats);\n\n    const isSeparator$1 = format => {\n      const keys$1 = keys(format);\n      return keys$1.length === 1 && contains$2(keys$1, 'title');\n    };\n    const processBasic = (item, isSelectedFor, getPreviewFor) => ({\n      ...item,\n      type: 'formatter',\n      isSelected: isSelectedFor(item.format),\n      getStylePreview: getPreviewFor(item.format)\n    });\n    const register$a = (editor, formats, isSelectedFor, getPreviewFor) => {\n      const enrichSupported = item => processBasic(item, isSelectedFor, getPreviewFor);\n      const enrichMenu = item => {\n        const newItems = doEnrich(item.items);\n        return {\n          ...item,\n          type: 'submenu',\n          getStyleItems: constant$1(newItems)\n        };\n      };\n      const enrichCustom = item => {\n        const formatName = isString(item.name) ? item.name : generate$6(item.title);\n        const formatNameWithPrefix = `custom-${ formatName }`;\n        const newItem = {\n          ...item,\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      const doEnrich = items => map$2(items, item => {\n        if (isNestedFormat(item)) {\n          return enrichMenu(item);\n        } else if (isFormatReference(item)) {\n          return enrichSupported(item);\n        } else if (isSeparator$1(item)) {\n          return {\n            ...item,\n            type: 'separator'\n          };\n        } else {\n          return enrichCustom(item);\n        }\n      });\n      return doEnrich(formats);\n    };\n\n    const init$7 = editor => {\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = format => () => {\n        const fmt = editor.formatter.get(format);\n        return fmt !== undefined ? Optional.some({\n          tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n          styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n        }) : Optional.none();\n      };\n      const settingsFormats = Cell([]);\n      const eventsFormats = Cell([]);\n      const replaceSettings = Cell(false);\n      editor.on('PreInit', _e => {\n        const formats = getStyleFormats(editor);\n        const enriched = register$a(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n      });\n      editor.on('addStyleModifications', e => {\n        const modifications = register$a(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n      });\n      const getData = () => {\n        const fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        const fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return { getData };\n    };\n\n    const TooltipsBackstage = getSink => {\n      const tooltipDelay = 300;\n      const intervalDelay = tooltipDelay * 0.2;\n      let numActiveTooltips = 0;\n      const alreadyShowingTooltips = () => numActiveTooltips > 0;\n      const getComponents = spec => {\n        return [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-tooltip__body']\n            },\n            components: [text$2(spec.tooltipText)]\n          }];\n      };\n      const getConfig = spec => {\n        return {\n          delayForShow: () => alreadyShowingTooltips() ? intervalDelay : tooltipDelay,\n          delayForHide: constant$1(tooltipDelay),\n          exclusive: true,\n          lazySink: getSink,\n          tooltipDom: {\n            tag: 'div',\n            classes: [\n              'tox-tooltip',\n              'tox-tooltip--up'\n            ]\n          },\n          tooltipComponents: getComponents(spec),\n          onShow: (comp, tooltip) => {\n            numActiveTooltips++;\n            if (spec.onShow) {\n              spec.onShow(comp, tooltip);\n            }\n          },\n          onHide: () => {\n            numActiveTooltips--;\n          }\n        };\n      };\n      return {\n        getConfig,\n        getComponents\n      };\n    };\n\n    const isElement = node => isNonNullable(node) && node.nodeType === 1;\n    const trim = global$1.trim;\n    const hasContentEditableState = value => {\n      return node => {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const isContentEditableTrue = hasContentEditableState('true');\n    const isContentEditableFalse = hasContentEditableState('false');\n    const create = (type, title, url, level, attach) => ({\n      type,\n      title,\n      url,\n      level,\n      attach\n    });\n    const isChildOfContentEditableTrue = node => {\n      let tempNode = node;\n      while (tempNode = tempNode.parentNode) {\n        const value = tempNode.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(tempNode);\n        }\n      }\n      return false;\n    };\n    const select = (selector, root) => {\n      return map$2(descendants(SugarElement.fromDom(root), selector), element => {\n        return element.dom;\n      });\n    };\n    const getElementText = elm => {\n      return elm.innerText || elm.textContent;\n    };\n    const getOrGenerateId = elm => {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    const isAnchor = elm => {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    const isValidAnchor = elm => {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    const isHeader = elm => {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    const isEditable = elm => {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    const isValidHeader = elm => {\n      return isHeader(elm) && isEditable(elm);\n    };\n    const getLevel = elm => {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    const headerTarget = elm => {\n      var _a;\n      const headerId = getOrGenerateId(elm);\n      const attach = () => {\n        elm.id = headerId;\n      };\n      return create('header', (_a = getElementText(elm)) !== null && _a !== void 0 ? _a : '', '#' + headerId, getLevel(elm), attach);\n    };\n    const anchorTarget = elm => {\n      const anchorId = elm.id || elm.name;\n      const anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    const getHeaderTargets = elms => {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    const getAnchorTargets = elms => {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    const getTargetElements = elm => {\n      const elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    const hasTitle = target => {\n      return trim(target.title).length > 0;\n    };\n    const find = elm => {\n      const elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    const LinkTargets = { find };\n\n    const STORAGE_KEY = 'tinymce-url-history';\n    const HISTORY_LENGTH = 5;\n    const isHttpUrl = url => isString(url) && /^https?/.test(url);\n    const isArrayOfUrl = a => isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    const isRecordOfUrlArray = r => isObject(r) && find$4(r, value => !isArrayOfUrl(value)).isNone();\n    const getAllHistory = () => {\n      const unparsedHistory = global$4.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      let history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    const setAllHistory = history => {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$4.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    const getHistory = fileType => {\n      const history = getAllHistory();\n      return get$g(history, fileType).getOr([]);\n    };\n    const addToHistory = (url, fileType) => {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      const history = getAllHistory();\n      const items = get$g(history, fileType).getOr([]);\n      const itemsWithoutUrl = filter$2(items, item => item !== url);\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    const isTruthy = value => !!value;\n    const makeMap = value => map$1(global$1.makeMap(value, /[, ]/), isTruthy);\n    const getPicker = editor => Optional.from(getFilePickerCallback(editor));\n    const getPickerTypes = editor => {\n      const optFileTypes = Optional.from(getFilePickerTypes(editor)).filter(isTruthy).map(makeMap);\n      return getPicker(editor).fold(never, _picker => optFileTypes.fold(always, types => keys(types).length > 0 ? types : false));\n    };\n    const getPickerSetting = (editor, filetype) => {\n      const pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    const getUrlPicker = (editor, filetype) => getPickerSetting(editor, filetype).map(picker => entry => Future.nu(completer => {\n      const handler = (value, meta) => {\n        if (!isString(value)) {\n          throw new Error('Expected value to be string');\n        }\n        if (meta !== undefined && !isObject(meta)) {\n          throw new Error('Expected meta to be a object');\n        }\n        const r = {\n          value,\n          meta\n        };\n        completer(r);\n      };\n      const meta = {\n        filetype,\n        fieldname: entry.fieldname,\n        ...Optional.from(entry.meta).getOr({})\n      };\n      picker.call(editor, handler, entry.value, meta);\n    }));\n    const getTextSetting = value => Optional.from(value).filter(isString).getOrUndefined();\n    const getLinkInformation = editor => {\n      if (!useTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    const getValidationHandler = editor => Optional.from(getFilePickerValidatorHandler(editor));\n    const UrlInputBackstage = editor => ({\n      getHistory,\n      addToHistory,\n      getLinkInformation: () => getLinkInformation(editor),\n      getValidationHandler: () => getValidationHandler(editor),\n      getUrlPicker: filetype => getUrlPicker(editor, filetype)\n    });\n\n    const init$6 = (lazySinks, editor, lazyAnchorbar, lazyBottomAnchorBar) => {\n      const contextMenuState = Cell(false);\n      const toolbar = HeaderBackstage(editor);\n      const providers = {\n        icons: () => editor.ui.registry.getAll().icons,\n        menuItems: () => editor.ui.registry.getAll().menuItems,\n        translate: global$8.translate,\n        isDisabled: () => editor.mode.isReadOnly() || !editor.ui.isEnabled(),\n        getOption: editor.options.get,\n        tooltips: TooltipsBackstage(lazySinks.dialog)\n      };\n      const urlinput = UrlInputBackstage(editor);\n      const styles = init$7(editor);\n      const colorinput = ColorInputBackstage(editor);\n      const dialogSettings = DialogBackstage(editor);\n      const isContextMenuOpen = () => contextMenuState.get();\n      const setContextMenuState = state => contextMenuState.set(state);\n      const commonBackstage = {\n        shared: {\n          providers,\n          anchors: getAnchors(editor, lazyAnchorbar, lazyBottomAnchorBar, toolbar.isPositionedAtTop),\n          header: toolbar\n        },\n        urlinput,\n        styles,\n        colorinput,\n        dialog: dialogSettings,\n        isContextMenuOpen,\n        setContextMenuState\n      };\n      const popupBackstage = {\n        ...commonBackstage,\n        shared: {\n          ...commonBackstage.shared,\n          interpreter: s => interpretWithoutForm(s, {}, popupBackstage),\n          getSink: lazySinks.popup\n        }\n      };\n      const dialogBackstage = {\n        ...commonBackstage,\n        shared: {\n          ...commonBackstage.shared,\n          interpreter: s => interpretWithoutForm(s, {}, dialogBackstage),\n          getSink: lazySinks.dialog\n        }\n      };\n      return {\n        popup: popupBackstage,\n        dialog: dialogBackstage\n      };\n    };\n\n    const setup$b = (editor, mothership, uiMotherships) => {\n      const broadcastEvent = (name, evt) => {\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], m => {\n          m.broadcastEvent(name, evt);\n        });\n      };\n      const broadcastOn = (channel, message) => {\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], m => {\n          m.broadcastOn([channel], message);\n        });\n      };\n      const fireDismissPopups = evt => broadcastOn(dismissPopups(), { target: evt.target });\n      const doc = getDocument();\n      const onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      const onTouchmove = bind(doc, 'touchmove', evt => broadcastEvent(documentTouchmove(), evt));\n      const onTouchend = bind(doc, 'touchend', evt => broadcastEvent(documentTouchend(), evt));\n      const onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      const onMouseup = bind(doc, 'mouseup', evt => {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      const onContentClick = raw => broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      const onContentMouseup = raw => {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      const onContentMousedown = () => {\n        each$1(editor.editorManager.get(), loopEditor => {\n          if (editor !== loopEditor) {\n            loopEditor.dispatch('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      const onWindowScroll = evt => broadcastEvent(windowScroll(), fromRawEvent(evt));\n      const onWindowResize = evt => {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      const dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      const onElementScroll = capture(dos, 'scroll', evt => {\n        requestAnimationFrame(() => {\n          const c = editor.getContainer();\n          if (c !== undefined && c !== null) {\n            const optScrollingContext = detectWhenSplitUiMode(editor, mothership.element);\n            const scrollers = optScrollingContext.map(sc => [\n              sc.element,\n              ...sc.others\n            ]).getOr([]);\n            if (exists(scrollers, s => eq(s, evt.target))) {\n              editor.dispatch('ElementScroll', { target: evt.target.dom });\n              broadcastEvent(externalElementScroll(), evt);\n            }\n          }\n        });\n      });\n      const onEditorResize = () => broadcastOn(repositionPopups(), {});\n      const onEditorProgress = evt => {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      const onDismissPopups = event => {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      const onFocusIn = event => editor.dispatch('focusin', event);\n      const onFocusOut = event => editor.dispatch('focusout', event);\n      editor.on('PostRender', () => {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], gui => {\n          gui.element.dom.addEventListener('focusin', onFocusIn);\n          gui.element.dom.addEventListener('focusout', onFocusOut);\n        });\n      });\n      editor.on('remove', () => {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], gui => {\n          gui.element.dom.removeEventListener('focusin', onFocusIn);\n          gui.element.dom.removeEventListener('focusout', onFocusOut);\n        });\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n        onElementScroll.unbind();\n      });\n      editor.on('detach', () => {\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], detachSystem);\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], m => m.destroy());\n      });\n    };\n\n    const parts$a = AlloyParts;\n    const partType = PartType;\n\n    const schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    const customListDetail = () => ({ behaviours: derive$1([Replacing.config({})]) });\n    const itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    const parts$9 = constant$1([itemsPart]);\n    const name = constant$1('CustomList');\n\n    const factory$f = (detail, components, _spec, _external) => {\n      const setItems = (list, items) => {\n        getListContainer(list).fold(() => {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, container => {\n          const itemComps = Replacing.contents(container);\n          const numListsRequired = items.length;\n          const numListsToAdd = numListsRequired - itemComps.length;\n          const itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, () => detail.makeItem()) : [];\n          const itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, item => Replacing.remove(container, item));\n          each$1(itemsToAdd, item => Replacing.append(container, item));\n          const builtLists = Replacing.contents(container);\n          each$1(builtLists, (item, i) => {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      const extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components\n      };\n      const getListContainer = component => detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems }\n      };\n    };\n    const CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$f,\n      apis: {\n        setItems: (apis, list, items) => {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    const schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    const enhanceGroups = () => ({ behaviours: derive$1([Replacing.config({})]) });\n    const parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    const factory$e = (detail, components, _spec, _externals) => {\n      const setGroups = (toolbar, groups) => {\n        getGroupContainer(toolbar).fold(() => {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, container => {\n          Replacing.set(container, groups);\n        });\n      };\n      const getGroupContainer = component => detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      const extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: {\n          setGroups,\n          refresh: noop\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    const Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$e,\n      apis: {\n        setGroups: (apis, toolbar, groups) => {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    const setup$a = noop;\n    const isDocked$2 = never;\n    const getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    const getOffsetParent = element => {\n      const isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      const offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(() => {\n        const marker = SugarElement.fromTag('span');\n        return parent(element).bind(parent => {\n          append$2(parent, marker);\n          const offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    const getOrigin = element => getOffsetParent(element).map(absolute$3).getOrThunk(() => SugarPosition(0, 0));\n\n    const appear = (component, contextualInfo) => {\n      const elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    const disappear = (component, contextualInfo) => {\n      const elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    const isPartiallyVisible = (box, bounds) => box.y < bounds.bottom && box.bottom > bounds.y;\n    const isTopCompletelyVisible = (box, bounds) => box.y >= bounds.y;\n    const isBottomCompletelyVisible = (box, bounds) => box.bottom <= bounds.bottom;\n    const forceTopPosition = (winBox, leftX, viewport) => ({\n      location: 'top',\n      leftX,\n      topY: viewport.bounds.y - winBox.y\n    });\n    const forceBottomPosition = (winBox, leftX, viewport) => ({\n      location: 'bottom',\n      leftX,\n      bottomY: winBox.bottom - viewport.bounds.bottom\n    });\n    const getDockedLeftPosition = bounds => {\n      return bounds.box.x - bounds.win.x;\n    };\n    const tryDockingPosition = (modes, bounds, viewport) => {\n      const winBox = bounds.win;\n      const box = bounds.box;\n      const leftX = getDockedLeftPosition(bounds);\n      return findMap(modes, mode => {\n        switch (mode) {\n        case 'bottom':\n          return !isBottomCompletelyVisible(box, viewport.bounds) ? Optional.some(forceBottomPosition(winBox, leftX, viewport)) : Optional.none();\n        case 'top':\n          return !isTopCompletelyVisible(box, viewport.bounds) ? Optional.some(forceTopPosition(winBox, leftX, viewport)) : Optional.none();\n        default:\n          return Optional.none();\n        }\n      }).getOr({ location: 'no-dock' });\n    };\n    const isVisibleForModes = (modes, box, viewport) => forall(modes, mode => {\n      switch (mode) {\n      case 'bottom':\n        return isBottomCompletelyVisible(box, viewport.bounds);\n      case 'top':\n        return isTopCompletelyVisible(box, viewport.bounds);\n      }\n    });\n    const getXYForRestoring = (pos, viewport) => {\n      const priorY = viewport.optScrollEnv.fold(constant$1(pos.bounds.y), scrollEnv => scrollEnv.scrollElmTop + (pos.bounds.y - scrollEnv.currentScrollTop));\n      return SugarPosition(pos.bounds.x, priorY);\n    };\n    const getXYForSaving = (box, viewport) => {\n      const priorY = viewport.optScrollEnv.fold(constant$1(box.y), scrollEnv => box.y + scrollEnv.currentScrollTop - scrollEnv.scrollElmTop);\n      return SugarPosition(box.x, priorY);\n    };\n    const getPrior = (elem, viewport, state) => state.getInitialPos().map(pos => {\n      const xy = getXYForRestoring(pos, viewport);\n      return {\n        box: bounds(xy.left, xy.top, get$c(elem), get$d(elem)),\n        location: pos.location\n      };\n    });\n    const storePrior = (elem, box, viewport, state, decision) => {\n      const xy = getXYForSaving(box, viewport);\n      const bounds$1 = bounds(xy.left, xy.top, box.width, box.height);\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$e(elem, 'position') || 'static',\n        bounds: bounds$1,\n        location: decision.location\n      });\n    };\n    const storePriorIfNone = (elem, box, viewport, state, decision) => {\n      state.getInitialPos().fold(() => storePrior(elem, box, viewport, state, decision), () => noop);\n    };\n    const revertToOriginal = (elem, box, state) => state.getInitialPos().bind(position => {\n      var _a;\n      state.clearInitialPos();\n      switch (position.position) {\n      case 'static':\n        return Optional.some({ morph: 'static' });\n      case 'absolute':\n        const offsetParent = getOffsetParent(elem).getOr(body());\n        const offsetBox = box$1(offsetParent);\n        const scrollDelta = (_a = offsetParent.dom.scrollTop) !== null && _a !== void 0 ? _a : 0;\n        return Optional.some({\n          morph: 'absolute',\n          positionCss: NuPositionCss('absolute', get$g(position.style, 'left').map(_left => box.x - offsetBox.x), get$g(position.style, 'top').map(_top => box.y - offsetBox.y + scrollDelta), get$g(position.style, 'right').map(_right => offsetBox.right - box.right), get$g(position.style, 'bottom').map(_bottom => offsetBox.bottom - box.bottom))\n        });\n      default:\n        return Optional.none();\n      }\n    });\n    const tryMorphToOriginal = (elem, viewport, state) => getPrior(elem, viewport, state).filter(({box}) => isVisibleForModes(state.getModes(), box, viewport)).bind(({box}) => revertToOriginal(elem, box, state));\n    const tryDecisionToFixedMorph = decision => {\n      switch (decision.location) {\n      case 'top': {\n          return Optional.some({\n            morph: 'fixed',\n            positionCss: NuPositionCss('fixed', Optional.some(decision.leftX), Optional.some(decision.topY), Optional.none(), Optional.none())\n          });\n        }\n      case 'bottom': {\n          return Optional.some({\n            morph: 'fixed',\n            positionCss: NuPositionCss('fixed', Optional.some(decision.leftX), Optional.none(), Optional.none(), Optional.some(decision.bottomY))\n          });\n        }\n      default:\n        return Optional.none();\n      }\n    };\n    const tryMorphToFixed = (elem, viewport, state) => {\n      const box = box$1(elem);\n      const winBox = win();\n      const decision = tryDockingPosition(state.getModes(), {\n        win: winBox,\n        box\n      }, viewport);\n      if (decision.location === 'top' || decision.location === 'bottom') {\n        storePrior(elem, box, viewport, state, decision);\n        return tryDecisionToFixedMorph(decision);\n      } else {\n        return Optional.none();\n      }\n    };\n    const tryMorphToOriginalOrUpdateFixed = (elem, viewport, state) => {\n      return tryMorphToOriginal(elem, viewport, state).orThunk(() => {\n        return viewport.optScrollEnv.bind(_ => getPrior(elem, viewport, state)).bind(({box, location}) => {\n          const winBox = win();\n          const leftX = getDockedLeftPosition({\n            win: winBox,\n            box\n          });\n          const decision = location === 'top' ? forceTopPosition(winBox, leftX, viewport) : forceBottomPosition(winBox, leftX, viewport);\n          return tryDecisionToFixedMorph(decision);\n        });\n      });\n    };\n    const tryMorph = (component, viewport, state) => {\n      const elem = component.element;\n      const isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? tryMorphToOriginalOrUpdateFixed(elem, viewport, state) : tryMorphToFixed(elem, viewport, state);\n    };\n    const calculateMorphToOriginal = (component, viewport, state) => {\n      const elem = component.element;\n      return getPrior(elem, viewport, state).bind(({box}) => revertToOriginal(elem, box, state));\n    };\n    const forceDockWith = (elem, viewport, state, getDecision) => {\n      const box = box$1(elem);\n      const winBox = win();\n      const leftX = getDockedLeftPosition({\n        win: winBox,\n        box\n      });\n      const decision = getDecision(winBox, leftX, viewport);\n      if (decision.location === 'bottom' || decision.location === 'top') {\n        storePriorIfNone(elem, box, viewport, state, decision);\n        return tryDecisionToFixedMorph(decision);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    const morphToStatic = (component, config, state) => {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], prop => remove$6(component.element, prop));\n      config.onUndocked(component);\n    };\n    const morphToCoord = (component, config, state, position) => {\n      const isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      const method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    const updateVisibility = (component, config, state, viewport, morphToDocked = false) => {\n      config.contextual.each(contextInfo => {\n        contextInfo.lazyContext(component).each(box => {\n          const isVisible = isPartiallyVisible(box, viewport.bounds);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              const method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    const applyFixedMorph = (component, config, state, viewport, morph) => {\n      updateVisibility(component, config, state, viewport, true);\n      morphToCoord(component, config, state, morph.positionCss);\n    };\n    const applyMorph = (component, config, state, viewport, morph) => {\n      switch (morph.morph) {\n      case 'static': {\n          return morphToStatic(component, config, state);\n        }\n      case 'absolute': {\n          return morphToCoord(component, config, state, morph.positionCss);\n        }\n      case 'fixed': {\n          return applyFixedMorph(component, config, state, viewport, morph);\n        }\n      }\n    };\n    const refreshInternal = (component, config, state) => {\n      const viewport = config.lazyViewport(component);\n      updateVisibility(component, config, state, viewport);\n      tryMorph(component, viewport, state).each(morph => {\n        applyMorph(component, config, state, viewport, morph);\n      });\n    };\n    const resetInternal = (component, config, state) => {\n      const elem = component.element;\n      state.setDocked(false);\n      const viewport = config.lazyViewport(component);\n      calculateMorphToOriginal(component, viewport, state).each(staticOrAbsoluteMorph => {\n        switch (staticOrAbsoluteMorph.morph) {\n        case 'static': {\n            morphToStatic(component, config, state);\n            break;\n          }\n        case 'absolute': {\n            morphToCoord(component, config, state, staticOrAbsoluteMorph.positionCss);\n            break;\n          }\n        }\n      });\n      state.setVisible(true);\n      config.contextual.each(contextInfo => {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$3(component, config, state);\n    };\n    const refresh$3 = (component, config, state) => {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    const reset = (component, config, state) => {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    const forceDockWithDecision = getDecision => (component, config, state) => {\n      const viewport = config.lazyViewport(component);\n      const optMorph = forceDockWith(component.element, viewport, state, getDecision);\n      optMorph.each(morph => {\n        applyFixedMorph(component, config, state, viewport, morph);\n      });\n    };\n    const forceDockToTop = forceDockWithDecision(forceTopPosition);\n    const forceDockToBottom = forceDockWithDecision(forceBottomPosition);\n    const isDocked$1 = (component, config, state) => state.isDocked();\n    const setModes = (component, config, state, modes) => state.setModes(modes);\n    const getModes = (component, config, state) => state.getModes();\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes,\n        forceDockToTop: forceDockToTop,\n        forceDockToBottom: forceDockToBottom\n    });\n\n    const events$4 = (dockInfo, dockState) => derive$2([\n      runOnSource(transitionend(), (component, simulatedEvent) => {\n        dockInfo.contextual.each(contextInfo => {\n          if (has(component.element, contextInfo.transitionClass)) {\n            remove$1(component.element, [\n              contextInfo.transitionClass,\n              contextInfo.fadeInClass\n            ]);\n            const notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n            notify(component);\n          }\n          simulatedEvent.stop();\n        });\n      }),\n      run$1(windowScroll(), (component, _) => {\n        refresh$3(component, dockInfo, dockState);\n      }),\n      run$1(externalElementScroll(), (component, _) => {\n        refresh$3(component, dockInfo, dockState);\n      }),\n      run$1(windowResize(), (component, _) => {\n        reset(component, dockInfo, dockState);\n      })\n    ]);\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$4\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', () => ({\n        bounds: win(),\n        optScrollEnv: Optional.none()\n      })),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    const init$5 = spec => {\n      const docked = Cell(false);\n      const visible = Cell(true);\n      const initialBounds = value$2();\n      const modes = Cell(spec.modes);\n      const readState = () => `docked:  ${ docked.get() }, visible: ${ visible.get() }, modes: ${ modes.get().join(',') }`;\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    const Docking = create$4({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    const toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    const visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    const editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    const editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    const scrollFromBehindHeader = (e, containerHeader) => {\n      const doc = owner$4(containerHeader);\n      const win = defaultView(containerHeader);\n      const viewHeight = win.dom.innerHeight;\n      const scrollPos = get$b(doc);\n      const markerElement = SugarElement.fromDom(e.elm);\n      const markerPos = absolute$2(markerElement);\n      const markerHeight = get$d(markerElement);\n      const markerTop = markerPos.y;\n      const markerBottom = markerTop + markerHeight;\n      const editorHeaderPos = absolute$3(containerHeader);\n      const editorHeaderHeight = get$d(containerHeader);\n      const editorHeaderTop = editorHeaderPos.top;\n      const editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      const editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      const editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        const y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    const isDockedMode = (header, mode) => contains$2(Docking.getModes(header), mode);\n    const updateIframeContentFlow = header => {\n      const getOccupiedHeight = elm => getOuter$2(elm) + (parseInt(get$e(elm, 'margin-top'), 10) || 0) + (parseInt(get$e(elm, 'margin-bottom'), 10) || 0);\n      const elm = header.element;\n      parentElement(elm).each(parentElem => {\n        const padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          const parentWidth = get$c(parentElem);\n          set$8(elm, 'width', parentWidth + 'px');\n          set$8(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    const updateSinkVisibility = (sinkElem, visible) => {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    const updateEditorClasses = (editor, docked) => {\n      const editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    const restoreFocus = (headerElem, focusedElem) => {\n      const ownerDoc = owner$4(focusedElem);\n      active$1(ownerDoc).filter(activeElm => !eq(focusedElem, activeElm)).filter(activeElm => eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm)).each(() => focus$3(focusedElem));\n    };\n    const findFocusedElem = (rootElm, lazySink) => search(rootElm).orThunk(() => lazySink().toOptional().bind(sink => search(sink.element)));\n    const setup$9 = (editor, sharedBackstage, lazyHeader) => {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', () => {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', () => {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', () => {\n          lazyHeader().each(comp => {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', () => {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', e => {\n        lazyHeader().each(header => {\n          Docking.refresh(header);\n          const headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', () => {\n        updateEditorClasses(editor, false);\n      });\n    };\n    const isDocked = lazyHeader => lazyHeader().map(Docking.isDocked).getOr(false);\n    const getIframeBehaviours = () => [Receiving.config({ channels: { [toolbarHeightChange()]: { onReceive: updateIframeContentFlow } } })];\n    const getBehaviours = (editor, sharedBackstage) => {\n      const focusedElm = value$2();\n      const lazySink = sharedBackstage.getSink;\n      const runOnSinkElement = f => {\n        lazySink().each(sink => f(sink.element));\n      };\n      const onDockingSwitch = comp => {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(sink => sink.getSystem().broadcastOn([repositionPopups()], {}));\n      };\n      const additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return [\n        Focusing.config({}),\n        Docking.config({\n          contextual: {\n            lazyContext: comp => {\n              const headerHeight = getOuter$2(comp.element);\n              const container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              return Optional.from(container).map(c => {\n                const box = box$1(SugarElement.fromDom(c));\n                const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n                return optScrollingContext.fold(() => {\n                  const boxHeight = box.height - headerHeight;\n                  const topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n                  return bounds(box.x, topBound, box.width, boxHeight);\n                }, scrollEnv => {\n                  const constrainedBounds = constrain(box, getBoundsFrom(scrollEnv));\n                  const constrainedBoundsY = isDockedMode(comp, 'top') ? constrainedBounds.y : constrainedBounds.y + headerHeight;\n                  return bounds(constrainedBounds.x, constrainedBoundsY, constrainedBounds.width, constrainedBounds.height - headerHeight);\n                });\n              });\n            },\n            onShow: () => {\n              runOnSinkElement(elem => updateSinkVisibility(elem, true));\n            },\n            onShown: comp => {\n              runOnSinkElement(elem => remove$1(elem, [\n                visibility.transitionClass,\n                visibility.fadeInClass\n              ]));\n              focusedElm.get().each(elem => {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: comp => {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(elem => updateSinkVisibility(elem, false));\n            },\n            onHidden: () => {\n              runOnSinkElement(elem => remove$1(elem, [visibility.transitionClass]));\n            },\n            ...visibility\n          },\n          lazyViewport: comp => {\n            const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n            return optScrollingContext.fold(() => {\n              const boundsWithoutOffset = win();\n              const offset = getStickyToolbarOffset(editor);\n              const top = boundsWithoutOffset.y + (isDockedMode(comp, 'top') ? offset : 0);\n              const height = boundsWithoutOffset.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n              return {\n                bounds: bounds(boundsWithoutOffset.x, top, boundsWithoutOffset.width, height),\n                optScrollEnv: Optional.none()\n              };\n            }, sc => {\n              const combinedBounds = getBoundsFrom(sc);\n              return {\n                bounds: combinedBounds,\n                optScrollEnv: Optional.some({\n                  currentScrollTop: sc.element.dom.scrollTop,\n                  scrollElmTop: absolute$3(sc.element).top\n                })\n              };\n            });\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        }),\n        ...additionalBehaviours\n      ];\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    const renderHeader = spec => {\n      const editor = spec.editor;\n      const getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    const groupToolbarButtonSchema = objOf([\n      type,\n      requiredOf('items', oneOf([\n        arrOfObj([\n          name$1,\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    const createGroupToolbarButton = spec => asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n\n    const baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      defaultedOf('search', false, oneOf([\n        boolean,\n        objOf([optionString('placeholder')])\n      ], x => {\n        if (isBoolean(x)) {\n          return x ? Optional.some({ placeholder: Optional.none() }) : Optional.none();\n        } else {\n          return Optional.some(x);\n        }\n      })),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', () => noop)\n    ];\n\n    const MenuButtonSchema = objOf([\n      type,\n      ...baseMenuButtonFields\n    ]);\n    const createMenuButton = spec => asRaw('menubutton', MenuButtonSchema, spec);\n\n    const splitButtonSchema = objOf([\n      type,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      optionalSelect,\n      fetch$1,\n      onSetup,\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaultedColumns(1),\n      onAction,\n      onItemAction\n    ]);\n    const createSplitButton = spec => asRaw('SplitButton', splitButtonSchema, spec);\n\n    const factory$d = (detail, spec) => {\n      const setMenus = (comp, menus) => {\n        const newMenus = map$2(menus, m => {\n          const buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: callback => {\n              callback(m.getItems());\n            }\n          };\n          const internal = createMenuButton(buttonSpec).mapError(errInfo => formatError(errInfo)).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      const apis = {\n        focus: Keying.focusIn,\n        setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(component => {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), (comp, se) => {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(activeButton => {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(hoveredButton => {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(activeComp => {\n                      comp.getSystem().getByDom(hoveredButton).each(hoveredComp => {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), (comp, se) => {\n              se.event.prevFocus.bind(prev => comp.getSystem().getByDom(prev).toOptional()).each(prev => {\n                se.event.newFocus.bind(nu => comp.getSystem().getByDom(nu).toOptional()).each(nu => {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: comp => {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$d,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: (apis, comp) => {\n          apis.focus(comp);\n        },\n        setMenus: (apis, comp, menus) => {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    const promotionMessage = '\\u26A1\\ufe0fUpgrade';\n    const promotionLink = 'https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral';\n    const renderPromotion = spec => {\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: [{\n            dom: {\n              tag: 'a',\n              attributes: {\n                'href': promotionLink,\n                'rel': 'noopener',\n                'target': '_blank',\n                'aria-hidden': 'true'\n              },\n              classes: ['tox-promotion-link'],\n              innerHtml: promotionMessage\n            }\n          }]\n      };\n    };\n\n    const owner = 'container';\n    const schema$d = [field('slotBehaviours', [])];\n    const getPartName = name => '<alloy.field.' + name + '>';\n    const sketch = sSpec => {\n      const parts = (() => {\n        const record = [];\n        const slot = (name, config) => {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot,\n          record: constant$1(record)\n        };\n      })();\n      const spec = sSpec(parts);\n      const partNames = parts.record();\n      const fieldParts = map$2(partNames, n => required({\n        name: n,\n        pname: getPartName(n)\n      }));\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    const make$1 = (detail, components) => {\n      const getSlotNames = _ => getAllPartNames(detail);\n      const getSlot = (container, key) => getPart(container, detail, key);\n      const onSlot = (f, def) => (container, key) => getPart(container, detail, key).map(slot => f(slot, key)).getOr(def);\n      const onSlots = f => (container, keys) => {\n        each$1(keys, key => f(container, key));\n      };\n      const doShowing = (comp, _key) => get$f(comp.element, 'aria-hidden') !== 'true';\n      const doShow = (comp, key) => {\n        if (!doShowing(comp)) {\n          const element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      const doHide = (comp, key) => {\n        if (doShowing(comp)) {\n          const element = comp.element;\n          set$8(element, 'display', 'none');\n          set$9(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      const isShowing = onSlot(doShowing, false);\n      const hideSlot = onSlot(doHide);\n      const hideSlots = onSlots(hideSlot);\n      const hideAllSlots = container => hideSlots(container, getSlotNames());\n      const showSlot = onSlot(doShow);\n      const apis = {\n        getSlotNames,\n        getSlot,\n        isShowing,\n        hideSlot,\n        hideAllSlots,\n        showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: get$3(detail.slotBehaviours),\n        apis\n      };\n    };\n    const slotApis = map$1({\n      getSlotNames: (apis, c) => apis.getSlotNames(c),\n      getSlot: (apis, c, key) => apis.getSlot(c, key),\n      isShowing: (apis, c, key) => apis.isShowing(c, key),\n      hideSlot: (apis, c, key) => apis.hideSlot(c, key),\n      hideAllSlots: (apis, c) => apis.hideAllSlots(c),\n      showSlot: (apis, c, key) => apis.showSlot(c, key)\n    }, value => makeApi(value));\n    const SlotContainer = {\n      ...slotApis,\n      ...{ sketch }\n    };\n\n    const sidebarSchema = objOf([\n      optionalIcon,\n      optionalTooltip,\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      onSetup\n    ]);\n    const createSidebar = spec => asRaw('sidebar', sidebarSchema, spec);\n\n    const setup$8 = editor => {\n      const {sidebars} = editor.ui.registry.getAll();\n      each$1(keys(sidebars), name => {\n        const spec = sidebars[name];\n        const isActive = () => is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: buttonApi => {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: buttonApi => {\n            buttonApi.setActive(isActive());\n            const handleToggle = () => buttonApi.setActive(isActive());\n            editor.on('ToggleSidebar', handleToggle);\n            return () => {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    const getApi = comp => ({ element: () => comp.element.dom });\n    const makePanels = (parts, panelConfigs) => {\n      const specs = map$2(keys(panelConfigs), name => {\n        const spec = panelConfigs[name];\n        const bridged = getOrDie(createSidebar(spec));\n        return {\n          name,\n          getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, spec => {\n        const editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), (sidepanel, se) => {\n              const data = se.event;\n              const optSidePanelSpec = find$5(specs, config => config.name === data.name);\n              optSidePanelSpec.each(sidePanelSpec => {\n                const handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    const makeSidebar = panelConfigs => SlotContainer.sketch(parts => ({\n      dom: {\n        tag: 'div',\n        classes: ['tox-sidebar__pane-container']\n      },\n      components: makePanels(parts, panelConfigs),\n      slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(slotContainer => SlotContainer.hideAllSlots(slotContainer))])\n    }));\n    const setSidebar = (sidebar, panelConfigs, showSidebar) => {\n      const optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(slider => {\n        Replacing.set(slider, [makeSidebar(panelConfigs)]);\n        const configKey = showSidebar === null || showSidebar === void 0 ? void 0 : showSidebar.toLowerCase();\n        if (isString(configKey) && has$2(panelConfigs, configKey)) {\n          Composing.getCurrent(slider).each(slotContainer => {\n            SlotContainer.showSlot(slotContainer, configKey);\n            Sliding.immediateGrow(slider);\n            remove$6(slider.element, 'width');\n            updateSidebarRoleOnToggle(sidebar.element, 'region');\n          });\n        }\n      });\n    };\n    const updateSidebarRoleOnToggle = (sidebar, sidebarState) => {\n      set$9(sidebar, 'role', sidebarState);\n    };\n    const toggleSidebar = (sidebar, name) => {\n      const optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(slider => {\n        const optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(slotContainer => {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n              updateSidebarRoleOnToggle(sidebar.element, 'presentation');\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n              updateSidebarRoleOnToggle(sidebar.element, 'region');\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n            updateSidebarRoleOnToggle(sidebar.element, 'region');\n          }\n        });\n      });\n    };\n    const whichSidebar = sidebar => {\n      const optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(slider => {\n        const sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          const optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(slotContainer => find$5(SlotContainer.getSlotNames(slotContainer), name => SlotContainer.isShowing(slotContainer, name)));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const fixSize = generate$6('FixSizeEvent');\n    const autoSize = generate$6('AutoSizeEvent');\n    const renderSidebar = spec => ({\n      uid: spec.uid,\n      dom: {\n        tag: 'div',\n        classes: ['tox-sidebar'],\n        attributes: { role: 'presentation' }\n      },\n      components: [{\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__slider']\n          },\n          components: [],\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            Sliding.config({\n              dimension: { property: 'width' },\n              closedClass: 'tox-sidebar--sliding-closed',\n              openClass: 'tox-sidebar--sliding-open',\n              shrinkingClass: 'tox-sidebar--sliding-shrinking',\n              growingClass: 'tox-sidebar--sliding-growing',\n              onShrunk: slider => {\n                const optSlotContainer = Composing.getCurrent(slider);\n                optSlotContainer.each(SlotContainer.hideAllSlots);\n                emit(slider, autoSize);\n              },\n              onGrown: slider => {\n                emit(slider, autoSize);\n              },\n              onStartGrow: slider => {\n                emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n              },\n              onStartShrink: slider => {\n                emitWith(slider, fixSize, { width: get$c(slider.element) + 'px' });\n              }\n            }),\n            Replacing.config({}),\n            Composing.config({\n              find: comp => {\n                const children = Replacing.contents(comp);\n                return head(children);\n              }\n            })\n          ])\n        }],\n      behaviours: derive$1([\n        ComposingConfigs.childAt(0),\n        config('sidebar-sliding-events', [\n          run$1(fixSize, (comp, se) => {\n            set$8(comp.element, 'width', se.event.width);\n          }),\n          run$1(autoSize, (comp, _se) => {\n            remove$6(comp.element, 'width');\n          })\n        ])\n      ])\n    });\n\n    const block = (component, config, state, getBusySpec) => {\n      set$9(component.element, 'aria-busy', true);\n      const root = config.getRoot(component).getOr(component);\n      const blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: () => Optional.some(true),\n          onShiftTab: () => Optional.some(true)\n        }),\n        Focusing.config({})\n      ]);\n      const blockSpec = getBusySpec(root, blockerBehaviours);\n      const blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(() => Replacing.remove(root, blocker));\n    };\n    const unblock = (component, config, state) => {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n    const isBlocked = (component, blockingConfig, blockingState) => blockingState.isBlocked();\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock,\n        isBlocked: isBlocked\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    const init$4 = () => {\n      const blocker = destroyable();\n      const blockWith = destroy => {\n        blocker.set({ destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    const Blocking = create$4({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    const getBusySpec$1 = providerBackstage => (_root, _behaviours) => ({\n      dom: {\n        tag: 'div',\n        attributes: {\n          'aria-label': providerBackstage.translate('Loading...'),\n          'tabindex': '0'\n        },\n        classes: ['tox-throbber__busy-spinner']\n      },\n      components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n    });\n    const focusBusyComponent = throbber => Composing.getCurrent(throbber).each(comp => focus$3(comp.element, true));\n    const toggleEditorTabIndex = (editor, state) => {\n      const tabIndexAttr = 'tabindex';\n      const dataTabIndexAttr = `data-mce-${ tabIndexAttr }`;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(iframe => {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(tabIndex => set$9(iframe, dataTabIndexAttr, tabIndex));\n          set$9(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(tabIndex => {\n            set$9(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    const toggleThrobber = (editor, comp, state, providerBackstage) => {\n      const element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        const throbberFocus = Composing.getCurrent(comp).exists(busyComp => hasFocus(busyComp.element));\n        Blocking.unblock(comp);\n        set$8(element, 'display', 'none');\n        set$9(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    const renderThrobber = spec => ({\n      uid: spec.uid,\n      dom: {\n        tag: 'div',\n        attributes: { 'aria-hidden': 'true' },\n        classes: ['tox-throbber'],\n        styles: { display: 'none' }\n      },\n      behaviours: derive$1([\n        Replacing.config({}),\n        Blocking.config({ focus: false }),\n        Composing.config({ find: comp => head(comp.components()) })\n      ]),\n      components: []\n    });\n    const isFocusEvent = event => event.type === 'focusin';\n    const isPasteBinTarget = event => {\n      if (isFocusEvent(event)) {\n        const node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$1).exists(targetElm => has(targetElm, 'mce-pastebin'));\n      } else {\n        return false;\n      }\n    };\n    const setup$7 = (editor, lazyThrobber, sharedBackstage) => {\n      const throbberState = Cell(false);\n      const timer = value$2();\n      const stealFocus = e => {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', () => {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', e => {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      const toggle = state => {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          fireAfterProgressState(editor, state);\n        }\n      };\n      editor.on('ProgressState', e => {\n        timer.on(clearTimeout);\n        if (isNumber(e.time)) {\n          const timerId = global$9.setEditorTimeout(editor, () => toggle(e.state), e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    const generate$1 = (xs, f) => {\n      const init = {\n        len: 0,\n        list: []\n      };\n      const r = foldl(xs, (b, a) => {\n        const value = f(a, b.len);\n        return value.fold(constant$1(b), v => ({\n          len: v.finish,\n          list: b.list.concat([v])\n        }));\n      }, init);\n      return r.list;\n    };\n\n    const output = (within, extra, withinWidth) => ({\n      within,\n      extra,\n      withinWidth\n    });\n    const apportion = (units, total, len) => {\n      const parray = generate$1(units, (unit, current) => {\n        const width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width\n        });\n      });\n      const within = filter$2(parray, unit => unit.finish <= total);\n      const withinWidth = foldr(within, (acc, el) => acc + el.width, 0);\n      const extra = parray.slice(within.length);\n      return {\n        within,\n        extra,\n        withinWidth\n      };\n    };\n    const toUnit = parray => map$2(parray, unit => unit.element);\n    const fitLast = (within, extra, withinWidth) => {\n      const fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    const overflow = (within, extra, overflower, withinWidth) => {\n      const fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    const fitAll = (within, extra, withinWidth) => output(toUnit(within), [], withinWidth);\n    const tryFit = (total, units, len) => {\n      const divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    const partition = (total, units, len, overflower) => {\n      const divide = tryFit(total, units, len).getOrThunk(() => apportion(units, total - len(overflower), len));\n      const within = divide.within;\n      const extra = divide.extra;\n      const withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    const setGroups$1 = (toolbar, storedGroups) => {\n      const bGroups = map$2(storedGroups, g => premade(g));\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    const findFocusedComp = comps => findMap(comps, comp => search(comp.element).bind(focusedElm => comp.getSystem().getByDom(focusedElm).toOptional()));\n    const refresh$2 = (toolbar, detail, setOverflow) => {\n      const builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      const primary = getPartOrDie(toolbar, detail, 'primary');\n      const overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$8(primary.element, 'visibility', 'hidden');\n      const groups = builtGroups.concat([overflowGroup]);\n      const focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      const availableWidth = get$c(primary.element);\n      const overflows = partition(availableWidth, detail.builtGroups.get(), comp => Math.ceil(comp.element.dom.getBoundingClientRect().width), overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    const schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', () => Cell([]))\n    ]);\n\n    const schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', () => Cell([])),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    const parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external({ name: 'overflow-button' }),\n      external({ name: 'overflow-group' })\n    ]);\n\n    const expandable = constant$1((element, available) => {\n      setMax(element, Math.floor(available));\n    });\n\n    const schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y(),\n      onHandler('onToggled')\n    ]);\n    const parts$6 = constant$1([\n      external({\n        name: 'button',\n        overrides: detail => ({\n          dom: { attributes: { 'aria-haspopup': 'true' } },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleClass: detail.markers.toggledClass,\n              aria: { mode: 'expanded' },\n              toggleOnExecute: false,\n              onToggled: detail.onToggled\n            })])\n        })\n      }),\n      external({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: detail => {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: comp => {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    const shouldSkipFocus = value$2();\n    const toggleWithoutFocusing = (button, externals) => {\n      shouldSkipFocus.set(true);\n      toggle(button, externals);\n      shouldSkipFocus.clear();\n    };\n    const toggle = (button, externals) => {\n      const toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    const position = (button, toolbar, detail, layouts) => {\n      const bounds = detail.getBounds.map(bounder => bounder());\n      const sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    const setGroups = (button, toolbar, detail, layouts, groups) => {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    const makeSandbox = (button, spec, detail) => {\n      const ariaControls = manager();\n      const onOpen = (sandbox, toolbar) => {\n        const skipFocus = shouldSkipFocus.get().getOr(false);\n        detail.fetch().get(groups => {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaControls.link(button.element);\n          if (!skipFocus) {\n            Keying.focusIn(toolbar);\n          }\n        });\n      };\n      const onClose = () => {\n        Toggling.off(button);\n        if (!shouldSkipFocus.get().getOr(false)) {\n          Focusing.focus(button);\n        }\n        ariaControls.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaControls.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: comp => {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen,\n            onClose,\n            isPartOf: (container, data, queryElem) => {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: () => {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: {\n              ...receivingChannel$1({\n                isExtraPart: never,\n                ...detail.fireDismissalEventInstead.map(fe => ({ fireEventInstead: { event: fe.event } })).getOr({})\n              }),\n              ...receivingChannel({\n                doReposition: () => {\n                  Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(toolbar => {\n                    position(button, toolbar, detail, spec.layouts);\n                  });\n                }\n              })\n            }\n          })\n        ])\n      };\n    };\n    const factory$c = (detail, components, spec, externals) => ({\n      ...Button.sketch({\n        ...externals.button(),\n        action: button => {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: button => {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }),\n      apis: {\n        setGroups: (button, groups) => {\n          Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(toolbar => {\n            setGroups(button, toolbar, detail, spec.layouts, groups);\n          });\n        },\n        reposition: button => {\n          Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(toolbar => {\n            position(button, toolbar, detail, spec.layouts);\n          });\n        },\n        toggle: button => {\n          toggle(button, externals);\n        },\n        toggleWithoutFocusing: button => {\n          toggleWithoutFocusing(button, externals);\n        },\n        getToolbar: button => {\n          return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n        },\n        isOpen: button => {\n          return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n        }\n      }\n    });\n    const FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$c,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: (apis, button, groups) => {\n          apis.setGroups(button, groups);\n        },\n        reposition: (apis, button) => {\n          apis.reposition(button);\n        },\n        toggle: (apis, button) => {\n          apis.toggle(button);\n        },\n        toggleWithoutFocusing: (apis, button) => {\n          apis.toggleWithoutFocusing(button);\n        },\n        getToolbar: (apis, button) => apis.getToolbar(button),\n        isOpen: (apis, button) => apis.isOpen(button)\n      }\n    });\n\n    const schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    const parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    const factory$b = (detail, components, _spec, _externals) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components,\n      behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n          mode: 'flow',\n          selector: detail.markers.itemSelector\n        })]),\n      domModification: { attributes: { role: 'toolbar' } }\n    });\n    const ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$b\n    });\n\n    const buildGroups = comps => map$2(comps, g => premade(g));\n    const refresh$1 = (toolbar, memFloatingToolbarButton, detail) => {\n      refresh$2(toolbar, detail, overflowGroups => {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(floatingToolbarButton => {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    const factory$a = (detail, components, spec, externals) => {\n      const memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: () => Future.nu(resolve => {\n          resolve(buildGroups(detail.overflowGroups.get()));\n        }),\n        layouts: {\n          onLtr: () => [\n            southwest$2,\n            southeast$2\n          ],\n          onRtl: () => [\n            southeast$2,\n            southwest$2\n          ],\n          onBottomLtr: () => [\n            northwest$2,\n            northeast$2\n          ],\n          onBottomRtl: () => [\n            northeast$2,\n            northwest$2\n          ]\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        },\n        onToggled: (comp, state) => detail[state ? 'onOpened' : 'onClosed'](comp)\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: () => {\n                return ToolbarGroup.sketch({\n                  ...externals['overflow-group'](),\n                  items: [memFloatingToolbarButton.asSpec()]\n                });\n              }\n            }\n          })]),\n        apis: {\n          setGroups: (toolbar, groups) => {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: toolbar => refresh$1(toolbar, memFloatingToolbarButton, detail),\n          toggle: toolbar => {\n            memFloatingToolbarButton.getOpt(toolbar).each(floatingToolbarButton => {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          toggleWithoutFocusing: toolbar => {\n            memFloatingToolbarButton.getOpt(toolbar).each(FloatingToolbarButton.toggleWithoutFocusing);\n          },\n          isOpen: toolbar => memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false),\n          reposition: toolbar => {\n            memFloatingToolbarButton.getOpt(toolbar).each(floatingToolbarButton => {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: toolbar => memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar)\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    const SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$a,\n      apis: {\n        setGroups: (apis, toolbar, groups) => {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: (apis, toolbar) => {\n          apis.refresh(toolbar);\n        },\n        reposition: (apis, toolbar) => {\n          apis.reposition(toolbar);\n        },\n        toggle: (apis, toolbar) => {\n          apis.toggle(toolbar);\n        },\n        toggleWithoutFocusing: (apis, toolbar) => {\n          apis.toggle(toolbar);\n        },\n        isOpen: (apis, toolbar) => apis.isOpen(toolbar),\n        getOverflow: (apis, toolbar) => apis.getOverflow(toolbar)\n      }\n    });\n\n    const schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    const parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: detail => {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: comp => {\n                  getPart(comp, detail, 'overflow-button').each(button => {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: comp => {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: comp => {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: comp => {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external({\n        name: 'overflow-button',\n        overrides: detail => ({\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleClass: detail.markers.overflowToggledClass,\n              aria: { mode: 'pressed' },\n              toggleOnExecute: false\n            })])\n        })\n      }),\n      external({ name: 'overflow-group' })\n    ]);\n\n    const isOpen = (toolbar, detail) => getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    const toggleToolbar = (toolbar, detail) => {\n      getPart(toolbar, detail, 'overflow-button').bind(() => getPart(toolbar, detail, 'overflow')).each(overf => {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    const refresh = (toolbar, detail) => {\n      getPart(toolbar, detail, 'overflow').each(overflow => {\n        refresh$2(toolbar, detail, groups => {\n          const builtGroups = map$2(groups, g => premade(g));\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(button => {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    const factory$9 = (detail, components, spec, externals) => {\n      const toolbarToggleEvent = 'alloy.toolbar.toggle';\n      const doSetGroups = (toolbar, groups) => {\n        const built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: toolbar => {\n                return ToolbarGroup.sketch({\n                  ...externals['overflow-group'](),\n                  items: [Button.sketch({\n                      ...externals['overflow-button'](),\n                      action: _button => {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    })]\n                });\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, toolbar => {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: (toolbar, groups) => {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: toolbar => refresh(toolbar, detail),\n          toggle: toolbar => toggleToolbar(toolbar, detail),\n          isOpen: toolbar => isOpen(toolbar, detail)\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    const SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$9,\n      apis: {\n        setGroups: (apis, toolbar, groups) => {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: (apis, toolbar) => {\n          apis.refresh(toolbar);\n        },\n        toggle: (apis, toolbar) => {\n          apis.toggle(toolbar);\n        },\n        isOpen: (apis, toolbar) => apis.isOpen(toolbar)\n      }\n    });\n\n    const renderToolbarGroupCommon = toolbarGroup => {\n      const attributes = toolbarGroup.title.fold(() => ({}), title => ({ attributes: { title } }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__group'],\n          ...attributes\n        },\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled]), ' + '.tox-number-input:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    const renderToolbarGroup = toolbarGroup => ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    const getToolbarBehaviours = (toolbarSpec, modeName) => {\n      const onAttached = runOnAttached(component => {\n        const groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    const renderMoreToolbarCommon = toolbarSpec => {\n      const modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            enabled: true,\n            tooltip: Optional.some('Reveal or hide additional toolbar items'),\n            primary: false,\n            buttonType: Optional.none(),\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers, [], 'overflow-button')\n        },\n        splitToolbarBehaviours: getToolbarBehaviours(toolbarSpec, modeName)\n      };\n    };\n    const renderFloatingMoreToolbar = toolbarSpec => {\n      const baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      const overflowXOffset = 4;\n      const primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch({\n        ...baseSpec,\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: () => {\n          const headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          const headerBounds = absolute$2(headerElem);\n          const docElem = documentElement(headerElem);\n          const docBounds = absolute$2(docElem);\n          const height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: {\n          ...baseSpec.parts,\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        },\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' },\n        onOpened: comp => toolbarSpec.onToggled(comp, true),\n        onClosed: comp => toolbarSpec.onToggled(comp, false)\n      });\n    };\n    const renderSlidingMoreToolbar = toolbarSpec => {\n      const primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      const overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      const baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch({\n        ...baseSpec,\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: comp => {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n          toolbarSpec.onToggled(comp, true);\n        },\n        onClosed: comp => {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n          toolbarSpec.onToggled(comp, false);\n        }\n      });\n    };\n    const renderToolbar = toolbarSpec => {\n      const modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode$1.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarBehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    const baseButtonFields = [\n      optionalText,\n      optionalIcon,\n      optionString('tooltip'),\n      defaultedStringEnum('buttonType', 'secondary', [\n        'primary',\n        'secondary'\n      ]),\n      defaultedBoolean('borderless', false),\n      requiredFunction('onAction')\n    ];\n    const normalButtonFields = [\n      ...baseButtonFields,\n      text,\n      requiredStringEnum('type', ['button'])\n    ];\n    const toggleButtonFields = [\n      ...baseButtonFields,\n      defaultedBoolean('active', false),\n      requiredStringEnum('type', ['togglebutton'])\n    ];\n    const schemaWithoutGroupButton = {\n      button: normalButtonFields,\n      togglebutton: toggleButtonFields\n    };\n    const groupFields = [\n      requiredStringEnum('type', ['group']),\n      defaultedArrayOf('buttons', [], choose$1('type', schemaWithoutGroupButton))\n    ];\n    const viewButtonSchema = choose$1('type', {\n      ...schemaWithoutGroupButton,\n      group: groupFields\n    });\n\n    const viewSchema = objOf([\n      defaultedArrayOf('buttons', [], viewButtonSchema),\n      requiredFunction('onShow'),\n      requiredFunction('onHide')\n    ]);\n    const createView = spec => asRaw('view', viewSchema, spec);\n\n    const renderButton = (spec, providers) => {\n      var _a, _b;\n      const isToggleButton = spec.type === 'togglebutton';\n      const optMemIcon = spec.icon.map(memIcon => renderReplaceableIconFromPack(memIcon, providers.icons)).map(record);\n      const getAction = () => comp => {\n        const setIcon = newIcon => {\n          optMemIcon.map(memIcon => memIcon.getOpt(comp).each(displayIcon => {\n            Replacing.set(displayIcon, [renderReplaceableIconFromPack(newIcon, providers.icons)]);\n          }));\n        };\n        const setActive = state => {\n          const elm = comp.element;\n          if (state) {\n            add$2(elm, 'tox-button--enabled');\n            set$9(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-button--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        };\n        const isActive = () => has(comp.element, 'tox-button--enabled');\n        if (isToggleButton) {\n          return spec.onAction({\n            setIcon,\n            setActive,\n            isActive\n          });\n        }\n        if (spec.type === 'button') {\n          return spec.onAction({ setIcon });\n        }\n      };\n      const action = getAction();\n      const buttonSpec = {\n        ...spec,\n        name: isToggleButton ? spec.text.getOr(spec.icon.getOr('')) : (_a = spec.text) !== null && _a !== void 0 ? _a : spec.icon.getOr(''),\n        primary: spec.buttonType === 'primary',\n        buttonType: Optional.from(spec.buttonType),\n        tooltip: spec.tooltip,\n        icon: spec.icon,\n        enabled: true,\n        borderless: spec.borderless\n      };\n      const buttonTypeClasses = calculateClassesFromButtonType((_b = spec.buttonType) !== null && _b !== void 0 ? _b : 'secondary');\n      const optTranslatedText = isToggleButton ? spec.text.map(providers.translate) : Optional.some(providers.translate(spec.text));\n      const optTranslatedTextComponed = optTranslatedText.map(text$2);\n      const ariaLabelAttributes = buttonSpec.tooltip.or(optTranslatedText).map(al => ({ 'aria-label': providers.translate(al) })).getOr({});\n      const optIconSpec = optMemIcon.map(memIcon => memIcon.asSpec());\n      const components = componentRenderPipeline([\n        optIconSpec,\n        optTranslatedTextComponed\n      ]);\n      const hasIconAndText = spec.icon.isSome() && optTranslatedTextComponed.isSome();\n      const dom = {\n        tag: 'button',\n        classes: buttonTypeClasses.concat(...spec.icon.isSome() && !hasIconAndText ? ['tox-button--icon'] : []).concat(...hasIconAndText ? ['tox-button--icon-and-text'] : []).concat(...spec.borderless ? ['tox-button--naked'] : []).concat(...spec.type === 'togglebutton' && spec.active ? ['tox-button--enabled'] : []),\n        attributes: ariaLabelAttributes\n      };\n      const extraBehaviours = [];\n      const iconButtonSpec = renderCommonSpec(buttonSpec, Optional.some(action), extraBehaviours, dom, components, spec.tooltip, providers);\n      return Button.sketch(iconButtonSpec);\n    };\n\n    const renderViewButton = (spec, providers) => renderButton(spec, providers);\n    const renderButtonsGroup = (spec, providers) => {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-view__toolbar__group']\n        },\n        components: map$2(spec.buttons, button => renderViewButton(button, providers))\n      };\n    };\n    const deviceDetection = detect$1().deviceType;\n    const isPhone = deviceDetection.isPhone();\n    const isTablet = deviceDetection.isTablet();\n    const renderViewHeader = spec => {\n      let hasGroups = false;\n      const endButtons = map$2(spec.buttons, btnspec => {\n        if (btnspec.type === 'group') {\n          hasGroups = true;\n          return renderButtonsGroup(btnspec, spec.providers);\n        } else {\n          return renderViewButton(btnspec, spec.providers);\n        }\n      });\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: [\n            !hasGroups ? 'tox-view__header' : 'tox-view__toolbar',\n            ...isPhone || isTablet ? [\n              'tox-view--mobile',\n              'tox-view--scrolling'\n            ] : []\n          ]\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          Keying.config({\n            mode: 'flow',\n            selector: 'button, .tox-button',\n            focusInside: FocusInsideModes.OnEnterOrSpaceMode\n          })\n        ]),\n        components: hasGroups ? endButtons : [\n          Container.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-view__header-start']\n            },\n            components: []\n          }),\n          Container.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-view__header-end']\n            },\n            components: endButtons\n          })\n        ]\n      };\n    };\n    const renderViewPane = spec => {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-view__pane']\n        }\n      };\n    };\n    const factory$8 = (detail, components, _spec, _externals) => {\n      const apis = {\n        getPane: comp => parts$a.getPart(comp, detail, 'pane'),\n        getOnShow: _comp => detail.viewConfig.onShow,\n        getOnHide: _comp => detail.viewConfig.onHide\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis\n      };\n    };\n    var View = composite({\n      name: 'silver.View',\n      configFields: [required$1('viewConfig')],\n      partFields: [\n        optional({\n          factory: { sketch: renderViewHeader },\n          schema: [\n            required$1('buttons'),\n            required$1('providers')\n          ],\n          name: 'header'\n        }),\n        optional({\n          factory: { sketch: renderViewPane },\n          schema: [],\n          name: 'pane'\n        })\n      ],\n      factory: factory$8,\n      apis: {\n        getPane: (apis, comp) => apis.getPane(comp),\n        getOnShow: (apis, comp) => apis.getOnShow(comp),\n        getOnHide: (apis, comp) => apis.getOnHide(comp)\n      }\n    });\n\n    const makeViews = (parts, viewConfigs, providers) => {\n      return mapToArray(viewConfigs, (config, name) => {\n        const internalViewConfig = getOrDie(createView(config));\n        return parts.slot(name, View.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-view']\n          },\n          viewConfig: internalViewConfig,\n          components: [\n            ...internalViewConfig.buttons.length > 0 ? [View.parts.header({\n                buttons: internalViewConfig.buttons,\n                providers\n              })] : [],\n            View.parts.pane({})\n          ]\n        }));\n      });\n    };\n    const makeSlotContainer = (viewConfigs, providers) => SlotContainer.sketch(parts => ({\n      dom: {\n        tag: 'div',\n        classes: ['tox-view-wrap__slot-container']\n      },\n      components: makeViews(parts, viewConfigs, providers),\n      slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(slotContainer => SlotContainer.hideAllSlots(slotContainer))])\n    }));\n    const getCurrentName = slotContainer => {\n      return find$5(SlotContainer.getSlotNames(slotContainer), name => SlotContainer.isShowing(slotContainer, name));\n    };\n    const hideContainer = comp => {\n      const element = comp.element;\n      set$8(element, 'display', 'none');\n      set$9(element, 'aria-hidden', 'true');\n    };\n    const showContainer = comp => {\n      const element = comp.element;\n      remove$6(element, 'display');\n      remove$7(element, 'aria-hidden');\n    };\n    const makeViewInstanceApi = slot => ({ getContainer: constant$1(slot) });\n    const runOnPaneWithInstanceApi = (slotContainer, name, get) => {\n      SlotContainer.getSlot(slotContainer, name).each(view => {\n        View.getPane(view).each(pane => {\n          const onCallback = get(view);\n          onCallback(makeViewInstanceApi(pane.element.dom));\n        });\n      });\n    };\n    const runOnShow = (slotContainer, name) => runOnPaneWithInstanceApi(slotContainer, name, View.getOnShow);\n    const runOnHide = (slotContainer, name) => runOnPaneWithInstanceApi(slotContainer, name, View.getOnHide);\n    const factory$7 = (detail, spec) => {\n      const setViews = (comp, viewConfigs) => {\n        Replacing.set(comp, [makeSlotContainer(viewConfigs, spec.backstage.shared.providers)]);\n      };\n      const whichView = comp => {\n        return Composing.getCurrent(comp).bind(getCurrentName);\n      };\n      const toggleView = (comp, showMainView, hideMainView, name) => {\n        return Composing.getCurrent(comp).exists(slotContainer => {\n          const optCurrentSlotName = getCurrentName(slotContainer);\n          const isTogglingCurrentView = optCurrentSlotName.exists(current => name === current);\n          const exists = SlotContainer.getSlot(slotContainer, name).isSome();\n          if (exists) {\n            SlotContainer.hideAllSlots(slotContainer);\n            if (!isTogglingCurrentView) {\n              hideMainView();\n              showContainer(comp);\n              SlotContainer.showSlot(slotContainer, name);\n              runOnShow(slotContainer, name);\n            } else {\n              hideContainer(comp);\n              showMainView();\n            }\n            optCurrentSlotName.each(prevName => runOnHide(slotContainer, prevName));\n          }\n          return exists;\n        });\n      };\n      const apis = {\n        setViews,\n        whichView,\n        toggleView\n      };\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-view-wrap'],\n          attributes: { 'aria-hidden': 'true' },\n          styles: { display: 'none' }\n        },\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          Composing.config({\n            find: comp => {\n              const children = Replacing.contents(comp);\n              return head(children);\n            }\n          })\n        ]),\n        apis\n      };\n    };\n    var ViewWrapper = single({\n      factory: factory$7,\n      name: 'silver.ViewWrapper',\n      configFields: [required$1('backstage')],\n      apis: {\n        setViews: (apis, comp, views) => apis.setViews(comp, views),\n        toggleView: (apis, comp, outerContainer, editorCont, name) => apis.toggleView(comp, outerContainer, editorCont, name),\n        whichView: (apis, comp) => apis.whichView(comp)\n      }\n    });\n\n    const factory$6 = (detail, components, _spec) => {\n      let toolbarDrawerOpenState = false;\n      const apis = {\n        getSocket: comp => {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: (comp, panelConfigs, showSidebar) => {\n          parts$a.getPart(comp, detail, 'sidebar').each(sidebar => setSidebar(sidebar, panelConfigs, showSidebar));\n        },\n        toggleSidebar: (comp, name) => {\n          parts$a.getPart(comp, detail, 'sidebar').each(sidebar => toggleSidebar(sidebar, name));\n        },\n        whichSidebar: comp => {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: comp => {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: comp => {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: (comp, groups) => {\n          parts$a.getPart(comp, detail, 'toolbar').each(toolbar => {\n            const renderedGroups = map$2(groups, renderToolbarGroup);\n            toolbar.getApis().setGroups(toolbar, renderedGroups);\n          });\n        },\n        setToolbars: (comp, toolbars) => {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(mToolbar => {\n            const renderedToolbars = map$2(toolbars, g => map$2(g, renderToolbarGroup));\n            CustomList.setItems(mToolbar, renderedToolbars);\n          });\n        },\n        refreshToolbar: comp => {\n          const toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(toolbar => toolbar.getApis().refresh(toolbar));\n        },\n        toggleToolbarDrawer: comp => {\n          parts$a.getPart(comp, detail, 'toolbar').each(toolbar => {\n            mapFrom(toolbar.getApis().toggle, toggle => toggle(toolbar));\n          });\n        },\n        toggleToolbarDrawerWithoutFocusing: comp => {\n          parts$a.getPart(comp, detail, 'toolbar').each(toolbar => {\n            mapFrom(toolbar.getApis().toggleWithoutFocusing, toggleWithoutFocusing => toggleWithoutFocusing(toolbar));\n          });\n        },\n        isToolbarDrawerToggled: comp => {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(toolbar => Optional.from(toolbar.getApis().isOpen).map(isOpen => isOpen(toolbar))).getOr(false);\n        },\n        getThrobber: comp => {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: comp => {\n          const optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(() => parts$a.getPart(comp, detail, 'multiple-toolbar'));\n          optToolbar.each(toolbar => {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: (comp, menus) => {\n          parts$a.getPart(comp, detail, 'menubar').each(menubar => {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: comp => {\n          parts$a.getPart(comp, detail, 'menubar').each(menubar => {\n            SilverMenubar.focus(menubar);\n          });\n        },\n        setViews: (comp, viewConfigs) => {\n          parts$a.getPart(comp, detail, 'viewWrapper').each(wrapper => {\n            ViewWrapper.setViews(wrapper, viewConfigs);\n          });\n        },\n        toggleView: (comp, name) => {\n          return parts$a.getPart(comp, detail, 'viewWrapper').exists(wrapper => ViewWrapper.toggleView(wrapper, () => apis.showMainView(comp), () => apis.hideMainView(comp), name));\n        },\n        whichView: comp => {\n          return parts$a.getPart(comp, detail, 'viewWrapper').bind(ViewWrapper.whichView).getOrNull();\n        },\n        hideMainView: comp => {\n          toolbarDrawerOpenState = apis.isToolbarDrawerToggled(comp);\n          if (toolbarDrawerOpenState) {\n            apis.toggleToolbarDrawer(comp);\n          }\n          parts$a.getPart(comp, detail, 'editorContainer').each(editorContainer => {\n            const element = editorContainer.element;\n            set$8(element, 'display', 'none');\n            set$9(element, 'aria-hidden', 'true');\n          });\n        },\n        showMainView: comp => {\n          if (toolbarDrawerOpenState) {\n            apis.toggleToolbarDrawer(comp);\n          }\n          parts$a.getPart(comp, detail, 'editorContainer').each(editorContainer => {\n            const element = editorContainer.element;\n            remove$6(element, 'display');\n            remove$7(element, 'aria-hidden');\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis,\n        behaviours: detail.behaviours\n      };\n    };\n    const partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    const toolbarFactory = spec => {\n      if (spec.type === ToolbarMode$1.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode$1.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    const partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: spec => CustomList.sketch({\n          uid: spec.uid,\n          dom: spec.dom,\n          listBehaviours: derive$1([Keying.config({\n              mode: 'acyclic',\n              selector: '.tox-toolbar'\n            })]),\n          makeItem: () => renderToolbar({\n            type: spec.type,\n            uid: generate$6('multiple-toolbar-item'),\n            cyclicKeying: false,\n            initGroups: [],\n            providers: spec.providers,\n            onEscape: () => {\n              spec.onEscape();\n              return Optional.some(true);\n            }\n          }),\n          setupItem: (_mToolbar, tc, data, _index) => {\n            Toolbar.setGroups(tc, data);\n          },\n          shell: true\n        })\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    const partToolbar = partType.optional({\n      factory: {\n        sketch: spec => {\n          const renderer = toolbarFactory(spec);\n          const toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: () => {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            onToggled: (_comp, state) => spec.onToolbarToggled(state),\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    const partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    const partPromotion = partType.optional({\n      factory: { sketch: renderPromotion },\n      name: 'promotion',\n      schema: [required$1('dom')]\n    });\n    const partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    const partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    const partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    const partViewWrapper = partType.optional({\n      factory: ViewWrapper,\n      name: 'viewWrapper',\n      schema: [required$1('backstage')]\n    });\n    const renderEditorContainer = spec => ({\n      uid: spec.uid,\n      dom: {\n        tag: 'div',\n        classes: ['tox-editor-container']\n      },\n      components: spec.components\n    });\n    const partEditorContainer = partType.optional({\n      factory: { sketch: renderEditorContainer },\n      name: 'editorContainer',\n      schema: []\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partPromotion,\n        partThrobber,\n        partViewWrapper,\n        partEditorContainer\n      ],\n      apis: {\n        getSocket: (apis, comp) => {\n          return apis.getSocket(comp);\n        },\n        setSidebar: (apis, comp, panelConfigs, showSidebar) => {\n          apis.setSidebar(comp, panelConfigs, showSidebar);\n        },\n        toggleSidebar: (apis, comp, name) => {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: (apis, comp) => {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: (apis, comp) => {\n          return apis.getHeader(comp);\n        },\n        getToolbar: (apis, comp) => {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: (apis, comp, groups) => {\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: (apis, comp, toolbars) => {\n          apis.setToolbars(comp, toolbars);\n        },\n        refreshToolbar: (apis, comp) => {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: (apis, comp) => {\n          apis.toggleToolbarDrawer(comp);\n        },\n        toggleToolbarDrawerWithoutFocusing: (apis, comp) => {\n          apis.toggleToolbarDrawerWithoutFocusing(comp);\n        },\n        isToolbarDrawerToggled: (apis, comp) => {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: (apis, comp) => {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: (apis, comp, menus) => {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: (apis, comp) => {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: (apis, comp) => {\n          apis.focusToolbar(comp);\n        },\n        setViews: (apis, comp, views) => {\n          apis.setViews(comp, views);\n        },\n        toggleView: (apis, comp, name) => {\n          return apis.toggleView(comp, name);\n        },\n        whichView: (apis, comp) => {\n          return apis.whichView(comp);\n        }\n      }\n    });\n\n    const defaultMenubar = 'file edit view insert format tools table help';\n    const defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    const make = (menu, registry, editor) => {\n      const removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: () => bind$3(menu.items, i => {\n          const itemName = i.toLowerCase();\n          if (itemName.trim().length === 0) {\n            return [];\n          } else if (exists(removedMenuItems, removedMenuItem => removedMenuItem === itemName)) {\n            return [];\n          } else if (itemName === 'separator' || itemName === '|') {\n            return [{ type: 'separator' }];\n          } else if (registry.menuItems[itemName]) {\n            return [registry.menuItems[itemName]];\n          } else {\n            return [];\n          }\n        })\n      };\n    };\n    const parseItemsString = items => {\n      return items.split(' ');\n    };\n    const identifyMenus = (editor, registry) => {\n      const rawMenuData = {\n        ...defaultMenus,\n        ...registry.menus\n      };\n      const userDefinedMenus = keys(registry.menus).length > 0;\n      const menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      const validMenus = filter$2(menubar, menuName => {\n        const isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$g(registry.menus, menuName).exists(menu => has$2(menu, 'items'));\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      const menus = map$2(validMenus, menuName => {\n        const menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, menu => {\n        const isNotSeparator = item => isString(item) || item.type !== 'separator';\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    const fireSkinLoaded = editor => {\n      const done = () => {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return () => {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    const fireSkinLoadError = (editor, err) => () => fireSkinLoadError$1(editor, { message: err });\n\n    const loadStylesheet = (editor, stylesheetUrl, styleSheetLoader) => {\n      editor.on('remove', () => styleSheetLoader.unload(stylesheetUrl));\n      return styleSheetLoader.load(stylesheetUrl);\n    };\n    const loadRawCss = (editor, key, css, styleSheetLoader) => {\n      editor.on('remove', () => styleSheetLoader.unloadRawCss(key));\n      return styleSheetLoader.loadRawCss(key, css);\n    };\n    const loadUiSkins = async (editor, skinUrl) => {\n      const skinResourceIdentifier = getSkinUrlOption(editor).getOr('default');\n      const skinUiCss = 'ui/' + skinResourceIdentifier + '/skin.css';\n      const css = tinymce.Resource.get(skinUiCss);\n      if (isString(css)) {\n        return Promise.resolve(loadRawCss(editor, skinUiCss, css, editor.ui.styleSheetLoader));\n      } else {\n        const skinUiCss = skinUrl + '/skin.min.css';\n        return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n      }\n    };\n    const loadShadowDomUiSkins = async (editor, skinUrl) => {\n      const isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        const skinResourceIdentifier = getSkinUrlOption(editor).getOr('default');\n        const shadowDomSkinCss = 'ui/' + skinResourceIdentifier + '/skin.shadowdom.css';\n        const css = tinymce.Resource.get(shadowDomSkinCss);\n        if (isString(css)) {\n          loadRawCss(editor, shadowDomSkinCss, css, global$7.DOM.styleSheetLoader);\n          return Promise.resolve();\n        } else {\n          const shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n          return loadStylesheet(editor, shadowDomSkinCss, global$7.DOM.styleSheetLoader);\n        }\n      }\n    };\n    const loadUrlSkin = async (isInline, editor) => {\n      getSkinUrlOption(editor).fold(() => {\n        const skinResourceIdentifier = getSkinUrl(editor);\n        if (skinResourceIdentifier) {\n          editor.contentCSS.push(skinResourceIdentifier + (isInline ? '/content.inline' : '/content') + '.min.css');\n        }\n      }, skinUrl => {\n        const skinContentCss = 'ui/' + skinUrl + (isInline ? '/content.inline' : '/content') + '.css';\n        const css = tinymce.Resource.get(skinContentCss);\n        if (isString(css)) {\n          loadRawCss(editor, skinContentCss, css, editor.ui.styleSheetLoader);\n        } else {\n          const skinResourceIdentifier = getSkinUrl(editor);\n          if (skinResourceIdentifier) {\n            editor.contentCSS.push(skinResourceIdentifier + (isInline ? '/content.inline' : '/content') + '.min.css');\n          }\n        }\n      });\n      const skinUrl = getSkinUrl(editor);\n      if (!isSkinDisabled(editor) && isString(skinUrl)) {\n        return Promise.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then();\n      }\n    };\n    const loadSkin = (isInline, editor) => {\n      return loadUrlSkin(isInline, editor).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n    };\n    const iframe = curry(loadSkin, false);\n    const inline = curry(loadSkin, true);\n\n    const makeTooltipText = (editor, labelWithPlaceholder, value) => isEmpty(value) ? editor.translate(labelWithPlaceholder) : editor.translate([\n      labelWithPlaceholder,\n      editor.translate(value)\n    ]);\n\n    const generateSelectItems = (backstage, spec) => {\n      const generateItem = (rawItem, response, invalid, value) => {\n        const translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          const items = bind$3(rawItem.getStyleItems(), si => validate(si, response, value));\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              enabled: items.length > 0,\n              getSubmenuItems: () => bind$3(rawItem.getStyleItems(), si => validate(si, response, value))\n            });\n          }\n        } else {\n          return Optional.some({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            enabled: !invalid,\n            onAction: spec.onAction(rawItem),\n            ...rawItem.getStylePreview().fold(() => ({}), preview => ({ meta: { style: preview } }))\n          });\n        }\n      };\n      const validate = (item, response, value) => {\n        const invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      const validateItems = preItems => {\n        const value = spec.getCurrentValue();\n        const response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, item => validate(item, response, value));\n      };\n      const getFetch = (backstage, getStyleItems) => (comp, callback) => {\n        const preItems = getStyleItems();\n        const items = validateItems(preItems);\n        const menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n          isHorizontalMenu: false,\n          search: Optional.none()\n        });\n        callback(menu);\n      };\n      return {\n        validateItems,\n        getFetch\n      };\n    };\n    const createMenuItems = (backstage, spec) => {\n      const dataset = spec.dataset;\n      const getStyleItems = dataset.type === 'basic' ? () => map$2(dataset.data, d => processBasic(d, spec.isSelectedFor, spec.getPreviewFor)) : dataset.getData;\n      return {\n        items: generateSelectItems(backstage, spec),\n        getStyleItems\n      };\n    };\n    const createSelectButton = (editor, backstage, spec, getTooltip, textUpdateEventName, btnName) => {\n      const {items, getStyleItems} = createMenuItems(backstage, spec);\n      const tooltipString = Cell(spec.tooltip);\n      const getApi = comp => ({\n        getComponent: constant$1(comp),\n        setTooltip: tooltip => {\n          const translatedTooltip = backstage.shared.providers.translate(tooltip);\n          set$9(comp.element, 'aria-label', translatedTooltip);\n          tooltipString.set(tooltip);\n        }\n      });\n      const onSetup = api => {\n        const handler = e => api.setTooltip(makeTooltipText(editor, getTooltip(e.value), e.value));\n        editor.on(textUpdateEventName, handler);\n        return composeUnbinders(onSetupEvent(editor, 'NodeChange', api => {\n          const comp = api.getComponent();\n          spec.updateText(comp);\n          Disabling.set(api.getComponent(), !editor.selection.isEditable());\n        })(api), () => editor.off(textUpdateEventName, handler));\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        ariaLabel: Optional.some(spec.tooltip),\n        tooltip: Optional.none(),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup,\n        getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: [Tooltipping.config({\n            ...backstage.shared.providers.tooltips.getConfig({\n              tooltipText: backstage.shared.providers.translate(spec.tooltip),\n              onShow: comp => {\n                if (spec.tooltip !== tooltipString.get()) {\n                  const translatedTooltip = backstage.shared.providers.translate(tooltipString.get());\n                  Tooltipping.setComponents(comp, backstage.shared.providers.tooltips.getComponents({ tooltipText: translatedTooltip }));\n                }\n              }\n            })\n          })]\n      }, 'tox-tbtn', backstage.shared, btnName);\n    };\n\n    const process = rawFormats => map$2(rawFormats, item => {\n      let title = item, format = item;\n      const values = item.split('=');\n      if (values.length > 1) {\n        title = values[0];\n        format = values[1];\n      }\n      return {\n        title,\n        format\n      };\n    });\n    const buildBasicStaticDataset = data => ({\n      type: 'basic',\n      data\n    });\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    const split = (rawFormats, delimiter) => {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    const buildBasicSettingsDataset = (editor, settingName, delimiter) => {\n      const rawFormats = editor.options.get(settingName);\n      const data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data\n      };\n    };\n\n    const menuTitle$4 = 'Align';\n    const getTooltipPlaceholder$4 = constant$1('Alignment {0}');\n    const fallbackAlignment = 'left';\n    const alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    const getSpec$4 = editor => {\n      const getMatchingValue = () => find$5(alignMenuItems, item => editor.formatter.match(item.format));\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = _format => Optional.none;\n      const updateSelectMenuIcon = comp => {\n        const match = getMatchingValue();\n        const alignment = match.fold(constant$1(fallbackAlignment), item => item.title.toLowerCase());\n        emitWith(comp, updateMenuIcon, { icon: `align-${ alignment }` });\n        fireAlignTextUpdate(editor, { value: alignment });\n      };\n      const dataset = buildBasicStaticDataset(alignMenuItems);\n      const onAction = rawItem => () => find$5(alignMenuItems, item => item.format === rawItem.format).each(item => editor.execCommand(item.command));\n      return {\n        tooltip: makeTooltipText(editor, getTooltipPlaceholder$4(), fallbackAlignment),\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor,\n        onAction,\n        updateText: updateSelectMenuIcon,\n        dataset,\n        shouldHide: false,\n        isInvalid: item => !editor.formatter.canApply(item.format)\n      };\n    };\n    const createAlignButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$4(editor), getTooltipPlaceholder$4, 'AlignTextUpdate', 'align');\n    const createAlignMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate(menuTitle$4),\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const findNearest = (editor, getStyles) => {\n      const styles = getStyles();\n      const formats = map$2(styles, style => style.format);\n      return Optional.from(editor.formatter.closest(formats)).bind(fmt => find$5(styles, data => data.format === fmt));\n    };\n\n    const menuTitle$3 = 'Blocks';\n    const getTooltipPlaceholder$3 = constant$1('Block {0}');\n    const fallbackFormat = 'Paragraph';\n    const getSpec$3 = editor => {\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = format => () => {\n        const fmt = editor.formatter.get(format);\n        if (fmt) {\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        } else {\n          return Optional.none();\n        }\n      };\n      const updateSelectMenuText = comp => {\n        const detectedFormat = findNearest(editor, () => dataset.data);\n        const text = detectedFormat.fold(constant$1(fallbackFormat), fmt => fmt.title);\n        emitWith(comp, updateMenuText, { text });\n        fireBlocksTextUpdate(editor, { value: text });\n      };\n      const dataset = buildBasicSettingsDataset(editor, 'block_formats', Delimiter.SemiColon);\n      return {\n        tooltip: makeTooltipText(editor, getTooltipPlaceholder$3(), fallbackFormat),\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset,\n        shouldHide: false,\n        isInvalid: item => !editor.formatter.canApply(item.format)\n      };\n    };\n    const createBlocksButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$3(editor), getTooltipPlaceholder$3, 'BlocksTextUpdate', 'blocks');\n    const createBlocksMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blocks', {\n        text: menuTitle$3,\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const menuTitle$2 = 'Fonts';\n    const getTooltipPlaceholder$2 = constant$1('Font {0}');\n    const systemFont = 'System Font';\n    const systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    const splitFonts = fontFamily => {\n      const fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, font => font.replace(/^['\"]+|['\"]+$/g, ''));\n    };\n    const matchesStack = (fonts, stack) => stack.length > 0 && forall(stack, font => fonts.indexOf(font.toLowerCase()) > -1);\n    const isSystemFontStack = (fontFamily, userStack) => {\n      if (fontFamily.indexOf('-apple-system') === 0 || userStack.length > 0) {\n        const fonts = splitFonts(fontFamily.toLowerCase());\n        return matchesStack(fonts, systemStackFonts) || matchesStack(fonts, userStack);\n      } else {\n        return false;\n      }\n    };\n    const getSpec$2 = editor => {\n      const getMatchingValue = () => {\n        const getFirstFont = fontFamily => fontFamily ? splitFonts(fontFamily)[0] : '';\n        const fontFamily = editor.queryCommandValue('FontName');\n        const items = dataset.data;\n        const font = fontFamily ? fontFamily.toLowerCase() : '';\n        const userStack = getDefaultFontStack(editor);\n        const matchOpt = find$5(items, item => {\n          const format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(() => {\n          return someIf(isSystemFontStack(font, userStack), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt,\n          font: fontFamily\n        };\n      };\n      const isSelectedFor = item => valueOpt => valueOpt.exists(value => value.format === item);\n      const getCurrentValue = () => {\n        const {matchOpt} = getMatchingValue();\n        return matchOpt;\n      };\n      const getPreviewFor = item => () => Optional.some({\n        tag: 'div',\n        styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n      });\n      const onAction = rawItem => () => {\n        editor.undoManager.transact(() => {\n          editor.focus();\n          editor.execCommand('FontName', false, rawItem.format);\n        });\n      };\n      const updateSelectMenuText = comp => {\n        const {matchOpt, font} = getMatchingValue();\n        const text = matchOpt.fold(constant$1(font), item => item.title);\n        emitWith(comp, updateMenuText, { text });\n        fireFontFamilyTextUpdate(editor, { value: text });\n      };\n      const dataset = buildBasicSettingsDataset(editor, 'font_family_formats', Delimiter.SemiColon);\n      return {\n        tooltip: makeTooltipText(editor, getTooltipPlaceholder$2(), systemFont),\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor,\n        getCurrentValue,\n        getPreviewFor,\n        onAction,\n        updateText: updateSelectMenuText,\n        dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    const createFontFamilyButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$2(editor), getTooltipPlaceholder$2, 'FontFamilyTextUpdate', 'fontfamily');\n    const createFontFamilyMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontfamily', {\n        text: backstage.shared.providers.translate(menuTitle$2),\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    const pattern = (() => {\n      const decimalDigits = '[0-9]+';\n      const signedInteger = '[+-]?' + decimalDigits;\n      const exponentPart = '[eE]' + signedInteger;\n      const dot = '\\\\.';\n      const opt = input => `(?:${ input })?`;\n      const unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      const float = `[+-]?(?:${ unsignedDecimalLiteral })`;\n      return new RegExp(`^(${ float })(.*)$`);\n    })();\n    const isUnit = (unit, accepted) => exists(accepted, acc => exists(units[acc], check => unit === check));\n    const parse = (input, accepted) => {\n      const match = Optional.from(pattern.exec(input));\n      return match.bind(array => {\n        const value = Number(array[1]);\n        const unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const normalise = (input, accepted) => parse(input, accepted).map(({value, unit}) => value + unit);\n\n    const Keys = {\n      tab: constant$1(9),\n      escape: constant$1(27),\n      enter: constant$1(13),\n      backspace: constant$1(8),\n      delete: constant$1(46),\n      left: constant$1(37),\n      up: constant$1(38),\n      right: constant$1(39),\n      down: constant$1(40),\n      space: constant$1(32),\n      home: constant$1(36),\n      end: constant$1(35),\n      pageUp: constant$1(33),\n      pageDown: constant$1(34)\n    };\n\n    const createBespokeNumberInput = (editor, backstage, spec, btnName) => {\n      let currentComp = Optional.none();\n      const getValueFromCurrentComp = comp => comp.map(alloyComp => Representing.getValue(alloyComp)).getOr('');\n      const onSetup = onSetupEvent(editor, 'NodeChange SwitchMode', api => {\n        const comp = api.getComponent();\n        currentComp = Optional.some(comp);\n        spec.updateInputValue(comp);\n        Disabling.set(comp, !editor.selection.isEditable());\n      });\n      const getApi = comp => ({ getComponent: constant$1(comp) });\n      const editorOffCell = Cell(noop);\n      const customEvents = generate$6('custom-number-input-events');\n      const changeValue = (f, fromInput, focusBack) => {\n        const text = getValueFromCurrentComp(currentComp);\n        const newValue = spec.getNewValue(text, f);\n        const lenghtDelta = text.length - `${ newValue }`.length;\n        const oldStart = currentComp.map(comp => comp.element.dom.selectionStart - lenghtDelta);\n        const oldEnd = currentComp.map(comp => comp.element.dom.selectionEnd - lenghtDelta);\n        spec.onAction(newValue, focusBack);\n        currentComp.each(comp => {\n          Representing.setValue(comp, newValue);\n          if (fromInput) {\n            oldStart.each(oldStart => comp.element.dom.selectionStart = oldStart);\n            oldEnd.each(oldEnd => comp.element.dom.selectionEnd = oldEnd);\n          }\n        });\n      };\n      const decrease = (fromInput, focusBack) => changeValue((n, s) => n - s, fromInput, focusBack);\n      const increase = (fromInput, focusBack) => changeValue((n, s) => n + s, fromInput, focusBack);\n      const goToParent = comp => parentElement(comp.element).fold(Optional.none, parent => {\n        focus$3(parent);\n        return Optional.some(true);\n      });\n      const focusInput = comp => {\n        if (hasFocus(comp.element)) {\n          firstChild(comp.element).each(input => focus$3(input));\n          return Optional.some(true);\n        } else {\n          return Optional.none();\n        }\n      };\n      const makeStepperButton = (action, title, tooltip, classes) => {\n        const editorOffCellStepButton = Cell(noop);\n        const translatedTooltip = backstage.shared.providers.translate(tooltip);\n        const altExecuting = generate$6('altExecuting');\n        const onSetup = onSetupEvent(editor, 'NodeChange SwitchMode', api => {\n          Disabling.set(api.getComponent(), !editor.selection.isEditable());\n        });\n        const onClick = comp => {\n          if (!Disabling.isDisabled(comp)) {\n            action(true);\n          }\n        };\n        return Button.sketch({\n          dom: {\n            tag: 'button',\n            attributes: {\n              'aria-label': translatedTooltip,\n              'data-mce-name': title\n            },\n            classes: classes.concat(title)\n          },\n          components: [renderIconFromPack$1(title, backstage.shared.providers.icons)],\n          buttonBehaviours: derive$1([\n            Disabling.config({}),\n            Tooltipping.config(backstage.shared.providers.tooltips.getConfig({ tooltipText: translatedTooltip })),\n            config(altExecuting, [\n              onControlAttached({\n                onSetup,\n                getApi\n              }, editorOffCellStepButton),\n              onControlDetached({ getApi }, editorOffCellStepButton),\n              run$1(keydown(), (comp, se) => {\n                if (se.event.raw.keyCode === Keys.space() || se.event.raw.keyCode === Keys.enter()) {\n                  if (!Disabling.isDisabled(comp)) {\n                    action(false);\n                  }\n                }\n              }),\n              run$1(click(), onClick),\n              run$1(touchend(), onClick)\n            ])\n          ]),\n          eventOrder: {\n            [keydown()]: [\n              altExecuting,\n              'keying'\n            ],\n            [click()]: [\n              altExecuting,\n              'alloy.base.behaviour'\n            ],\n            [touchend()]: [\n              altExecuting,\n              'alloy.base.behaviour'\n            ],\n            [attachedToDom()]: [\n              'alloy.base.behaviour',\n              altExecuting,\n              'tooltipping'\n            ],\n            [detachedFromDom()]: [\n              altExecuting,\n              'tooltipping'\n            ]\n          }\n        });\n      };\n      const memMinus = record(makeStepperButton(focusBack => decrease(false, focusBack), 'minus', 'Decrease font size', []));\n      const memPlus = record(makeStepperButton(focusBack => increase(false, focusBack), 'plus', 'Increase font size', []));\n      const memInput = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-input-wrapper']\n        },\n        components: [Input.sketch({\n            inputBehaviours: derive$1([\n              Disabling.config({}),\n              config(customEvents, [\n                onControlAttached({\n                  onSetup,\n                  getApi\n                }, editorOffCell),\n                onControlDetached({ getApi }, editorOffCell)\n              ]),\n              config('input-update-display-text', [\n                run$1(updateMenuText, (comp, se) => {\n                  Representing.setValue(comp, se.event.text);\n                }),\n                run$1(focusout(), comp => {\n                  spec.onAction(Representing.getValue(comp));\n                }),\n                run$1(change(), comp => {\n                  spec.onAction(Representing.getValue(comp));\n                })\n              ]),\n              Keying.config({\n                mode: 'special',\n                onEnter: _comp => {\n                  changeValue(identity, true, true);\n                  return Optional.some(true);\n                },\n                onEscape: goToParent,\n                onUp: _comp => {\n                  increase(true, false);\n                  return Optional.some(true);\n                },\n                onDown: _comp => {\n                  decrease(true, false);\n                  return Optional.some(true);\n                },\n                onLeft: (_comp, se) => {\n                  se.cut();\n                  return Optional.none();\n                },\n                onRight: (_comp, se) => {\n                  se.cut();\n                  return Optional.none();\n                }\n              })\n            ])\n          })],\n        behaviours: derive$1([\n          Focusing.config({}),\n          Keying.config({\n            mode: 'special',\n            onEnter: focusInput,\n            onSpace: focusInput,\n            onEscape: goToParent\n          }),\n          config('input-wrapper-events', [run$1(mouseover(), comp => {\n              each$1([\n                memMinus,\n                memPlus\n              ], button => {\n                const buttonNode = SugarElement.fromDom(button.get(comp).element.dom);\n                if (hasFocus(buttonNode)) {\n                  blur$1(buttonNode);\n                }\n              });\n            })])\n        ])\n      });\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-number-input'],\n          attributes: { ...isNonNullable(btnName) ? { 'data-mce-name': btnName } : {} }\n        },\n        components: [\n          memMinus.asSpec(),\n          memInput.asSpec(),\n          memPlus.asSpec()\n        ],\n        behaviours: derive$1([\n          Focusing.config({}),\n          Keying.config({\n            mode: 'flow',\n            focusInside: FocusInsideModes.OnEnterOrSpaceMode,\n            cycles: false,\n            selector: 'button, .tox-input-wrapper',\n            onEscape: wrapperComp => {\n              if (hasFocus(wrapperComp.element)) {\n                return Optional.none();\n              } else {\n                focus$3(wrapperComp.element);\n                return Optional.some(true);\n              }\n            }\n          })\n        ])\n      };\n    };\n\n    const menuTitle$1 = 'Font sizes';\n    const getTooltipPlaceholder$1 = constant$1('Font size {0}');\n    const fallbackFontSize = '12pt';\n    const legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    const keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    const round = (number, precision) => {\n      const factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    const toPt = (fontSize, precision) => {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$g(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    const toLegacy = fontSize => get$g(legacyFontSizes, fontSize).getOr('');\n    const getSpec$1 = editor => {\n      const getMatchingValue = () => {\n        let matchOpt = Optional.none();\n        const items = dataset.data;\n        const fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          for (let precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            const pt = toPt(fontSize, precision);\n            const legacy = toLegacy(pt);\n            matchOpt = find$5(items, item => item.format === fontSize || item.format === pt || item.format === legacy);\n          }\n        }\n        return {\n          matchOpt,\n          size: fontSize\n        };\n      };\n      const isSelectedFor = item => valueOpt => valueOpt.exists(value => value.format === item);\n      const getCurrentValue = () => {\n        const {matchOpt} = getMatchingValue();\n        return matchOpt;\n      };\n      const getPreviewFor = constant$1(Optional.none);\n      const onAction = rawItem => () => {\n        editor.undoManager.transact(() => {\n          editor.focus();\n          editor.execCommand('FontSize', false, rawItem.format);\n        });\n      };\n      const updateSelectMenuText = comp => {\n        const {matchOpt, size} = getMatchingValue();\n        const text = matchOpt.fold(constant$1(size), match => match.title);\n        emitWith(comp, updateMenuText, { text });\n        fireFontSizeTextUpdate(editor, { value: text });\n      };\n      const dataset = buildBasicSettingsDataset(editor, 'font_size_formats', Delimiter.Space);\n      return {\n        tooltip: makeTooltipText(editor, getTooltipPlaceholder$1(), fallbackFontSize),\n        text: Optional.some(fallbackFontSize),\n        icon: Optional.none(),\n        isSelectedFor,\n        getPreviewFor,\n        getCurrentValue,\n        onAction,\n        updateText: updateSelectMenuText,\n        dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    const createFontSizeButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$1(editor), getTooltipPlaceholder$1, 'FontSizeTextUpdate', 'fontsize');\n    const getConfigFromUnit = unit => {\n      var _a;\n      const baseConfig = { step: 1 };\n      const configs = {\n        em: { step: 0.1 },\n        cm: { step: 0.1 },\n        in: { step: 0.1 },\n        pc: { step: 0.1 },\n        ch: { step: 0.1 },\n        rem: { step: 0.1 }\n      };\n      return (_a = configs[unit]) !== null && _a !== void 0 ? _a : baseConfig;\n    };\n    const defaultValue = 16;\n    const isValidValue = value => value >= 0;\n    const getNumberInputSpec = editor => {\n      const getCurrentValue = () => editor.queryCommandValue('FontSize');\n      const updateInputValue = comp => emitWith(comp, updateMenuText, { text: getCurrentValue() });\n      return {\n        updateInputValue,\n        onAction: (format, focusBack) => editor.execCommand('FontSize', false, format, { skip_focus: !focusBack }),\n        getNewValue: (text, updateFunction) => {\n          parse(text, [\n            'unsupportedLength',\n            'empty'\n          ]);\n          const currentValue = getCurrentValue();\n          const parsedText = parse(text, [\n            'unsupportedLength',\n            'empty'\n          ]).or(parse(currentValue, [\n            'unsupportedLength',\n            'empty'\n          ]));\n          const value = parsedText.map(res => res.value).getOr(defaultValue);\n          const defaultUnit = getFontSizeInputDefaultUnit(editor);\n          const unit = parsedText.map(res => res.unit).filter(u => u !== '').getOr(defaultUnit);\n          const newValue = updateFunction(value, getConfigFromUnit(unit).step);\n          const res = `${ isValidValue(newValue) ? newValue : value }${ unit }`;\n          if (res !== currentValue) {\n            fireFontSizeInputTextUpdate(editor, { value: res });\n          }\n          return res;\n        }\n      };\n    };\n    const createFontSizeInputButton = (editor, backstage) => createBespokeNumberInput(editor, backstage, getNumberInputSpec(editor), 'fontsizeinput');\n    const createFontSizeMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontsize', {\n        text: menuTitle$1,\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const menuTitle = 'Formats';\n    const getTooltipPlaceholder = value => isEmpty(value) ? 'Formats' : 'Format {0}';\n    const getSpec = (editor, dataset) => {\n      const fallbackFormat = 'Formats';\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = format => () => {\n        const fmt = editor.formatter.get(format);\n        return fmt !== undefined ? Optional.some({\n          tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n          styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n        }) : Optional.none();\n      };\n      const updateSelectMenuText = comp => {\n        const getFormatItems = fmt => {\n          if (isNestedFormat(fmt)) {\n            return bind$3(fmt.items, getFormatItems);\n          } else if (isFormatReference(fmt)) {\n            return [{\n                title: fmt.title,\n                format: fmt.format\n              }];\n          } else {\n            return [];\n          }\n        };\n        const flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        const detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        const text = detectedFormat.fold(constant$1({\n          title: fallbackFormat,\n          tooltipLabel: ''\n        }), fmt => ({\n          title: fmt.title,\n          tooltipLabel: fmt.title\n        }));\n        emitWith(comp, updateMenuText, { text: text.title });\n        fireStylesTextUpdate(editor, { value: text.tooltipLabel });\n      };\n      return {\n        tooltip: makeTooltipText(editor, getTooltipPlaceholder(''), ''),\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: shouldAutoHideStyleFormats(editor),\n        isInvalid: item => !editor.formatter.canApply(item.format),\n        dataset\n      };\n    };\n    const createStylesButton = (editor, backstage) => {\n      const dataset = {\n        type: 'advanced',\n        ...backstage.styles\n      };\n      return createSelectButton(editor, backstage, getSpec(editor, dataset), getTooltipPlaceholder, 'StylesTextUpdate', 'styles');\n    };\n    const createStylesMenu = (editor, backstage) => {\n      const dataset = {\n        type: 'advanced',\n        ...backstage.styles\n      };\n      const menuItems = createMenuItems(backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('styles', {\n        text: menuTitle,\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option$3('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option$3('role')\n    ].concat(sandboxFields()));\n    const arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: () => {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: detail => {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: arrow => {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    const buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: () => {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: detail => {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: btn => {\n            btn.getSystem().getByUid(detail.uid).each(splitDropdown => {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    const parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: spec => {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: detail => {\n          return {\n            onExecute: (tmenu, item) => {\n              tmenu.getSystem().getByUid(detail.uid).each(splitDropdown => {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    const factory$5 = (detail, components, spec, externals) => {\n      const switchToMenu = sandbox => {\n        Composing.getCurrent(sandbox).each(current => {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      const action = component => {\n        const onOpenSync = switchToMenu;\n        togglePopup(detail, identity, component, externals, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n      };\n      const openMenu = comp => {\n        action(comp);\n        return Optional.some(true);\n      };\n      const executeOnButton = comp => {\n        const button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      const buttonEvents = {\n        ...derive$2([runOnAttached((component, _simulatedEvent) => {\n            const ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n            ariaDescriptor.each(descriptor => {\n              const descriptorId = generate$6('aria');\n              set$9(descriptor.element, 'id', descriptorId);\n              set$9(component.element, 'aria-describedby', descriptorId);\n            });\n          })]),\n        ...events$a(Optional.some(action))\n      };\n      const apis = {\n        repositionMenus: comp => {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis,\n        eventOrder: {\n          ...detail.eventOrder,\n          [execute$5()]: [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        },\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: hotspot => {\n                const arrow = getPartOrDie(hotspot, detail, 'arrow');\n                const extras = {\n                  onOpen: () => {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: () => {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    const SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: { repositionMenus: (apis, comp) => apis.repositionMenus(comp) }\n    });\n\n    const getButtonApi = component => ({\n      isEnabled: () => !Disabling.isDisabled(component),\n      setEnabled: state => Disabling.set(component, !state),\n      setText: text => emitWith(component, updateMenuText, { text }),\n      setIcon: icon => emitWith(component, updateMenuIcon, { icon })\n    });\n    const getToggleApi = component => ({\n      setActive: state => {\n        Toggling.set(component, state);\n      },\n      isActive: () => Toggling.isOn(component),\n      isEnabled: () => !Disabling.isDisabled(component),\n      setEnabled: state => Disabling.set(component, !state),\n      setText: text => emitWith(component, updateMenuText, { text }),\n      setIcon: icon => emitWith(component, updateMenuIcon, { icon })\n    });\n    const getTooltipAttributes = (tooltip, providersBackstage) => tooltip.map(tooltip => ({ 'aria-label': providersBackstage.translate(tooltip) })).getOr({});\n    const focusButtonEvent = generate$6('focus-button');\n    const renderCommonStructure = (optIcon, optText, tooltip, behaviours, providersBackstage, btnName) => {\n      const optMemDisplayText = optText.map(text => record(renderLabel$1(text, 'tox-tbtn', providersBackstage)));\n      const optMemDisplayIcon = optIcon.map(icon => record(renderReplaceableIconFromPack(icon, providersBackstage.icons)));\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(optText.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: {\n            ...getTooltipAttributes(tooltip, providersBackstage),\n            ...isNonNullable(btnName) ? { 'data-mce-name': btnName } : {}\n          }\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(mem => mem.asSpec()),\n          optMemDisplayText.map(mem => mem.asSpec())\n        ]),\n        eventOrder: {\n          [mousedown()]: [\n            'focusing',\n            'alloy.base.behaviour',\n            commonButtonDisplayEvent\n          ],\n          [attachedToDom()]: [\n            commonButtonDisplayEvent,\n            'toolbar-group-button-events'\n          ]\n        },\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config(commonButtonDisplayEvent, [\n            runOnAttached((comp, _se) => forceInitialSize(comp)),\n            run$1(updateMenuText, (comp, se) => {\n              optMemDisplayText.bind(mem => mem.getOpt(comp)).each(displayText => {\n                Replacing.set(displayText, [text$2(providersBackstage.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, (comp, se) => {\n              optMemDisplayIcon.bind(mem => mem.getOpt(comp)).each(displayIcon => {\n                Replacing.set(displayIcon, [renderReplaceableIconFromPack(se.event.icon, providersBackstage.icons)]);\n              });\n            }),\n            run$1(mousedown(), (button, se) => {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })\n          ])\n        ].concat(behaviours.getOr([])))\n      };\n    };\n    const renderFloatingToolbarButton = (spec, backstage, identifyButtons, attributes, btnName) => {\n      const sharedBackstage = backstage.shared;\n      const editorOffCell = Cell(noop);\n      const specialisation = {\n        toolbarButtonBehaviours: [],\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      };\n      const behaviours = [config('toolbar-group-button-events', [\n          onControlAttached(specialisation, editorOffCell),\n          onControlDetached(specialisation, editorOffCell)\n        ])];\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: () => Future.nu(resolve => {\n          resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n        }),\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.some(behaviours), sharedBackstage.providers, btnName),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes\n            }\n          }\n        }\n      });\n    };\n    const renderCommonToolbarButton = (spec, specialisation, providersBackstage, btnName) => {\n      var _d;\n      const editorOffCell = Cell(noop);\n      const structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), providersBackstage, btnName);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: {\n          ...derive$1([\n            config('toolbar-button-events', [\n              onToolbarButtonExecute({\n                onAction: spec.onAction,\n                getApi: specialisation.getApi\n              }),\n              onControlAttached(specialisation, editorOffCell),\n              onControlDetached(specialisation, editorOffCell)\n            ]),\n            ...spec.tooltip.map(t => Tooltipping.config(providersBackstage.tooltips.getConfig({ tooltipText: providersBackstage.translate(t) + spec.shortcut.map(shortcut => ` (${ convertText(shortcut) })`).getOr('') }))).toArray(),\n            DisablingConfigs.toolbarButton(() => !spec.enabled || providersBackstage.isDisabled()),\n            receivingConfig()\n          ].concat(specialisation.toolbarButtonBehaviours)),\n          [commonButtonDisplayEvent]: (_d = structure.buttonBehaviours) === null || _d === void 0 ? void 0 : _d[commonButtonDisplayEvent]\n        }\n      });\n    };\n    const renderToolbarButton = (spec, providersBackstage, btnName) => renderToolbarButtonWith(spec, providersBackstage, [], btnName);\n    const renderToolbarButtonWith = (spec, providersBackstage, bonusEvents, btnName) => renderCommonToolbarButton(spec, {\n      toolbarButtonBehaviours: bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : [],\n      getApi: getButtonApi,\n      onSetup: spec.onSetup\n    }, providersBackstage, btnName);\n    const renderToolbarToggleButton = (spec, providersBackstage, btnName) => renderToolbarToggleButtonWith(spec, providersBackstage, [], btnName);\n    const renderToolbarToggleButtonWith = (spec, providersBackstage, bonusEvents, btnName) => renderCommonToolbarButton(spec, {\n      toolbarButtonBehaviours: [\n        Replacing.config({}),\n        Toggling.config({\n          toggleClass: 'tox-tbtn--enabled',\n          aria: { mode: 'pressed' },\n          toggleOnExecute: false\n        })\n      ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n      getApi: getToggleApi,\n      onSetup: spec.onSetup\n    }, providersBackstage, btnName);\n    const fetchChoices = (getApi, spec, providersBackstage) => comp => Future.nu(callback => spec.fetch(callback)).map(items => Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, value => {\n      spec.onItemAction(getApi(comp), value);\n    }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n      movement: deriveMenuMovement(spec.columns, spec.presets),\n      menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached((comp, _se) => {\n          detectSize(comp, 4, classForPreset(spec.presets)).each(({numRows, numColumns}) => {\n            Keying.setGridSize(comp, numRows, numColumns);\n          });\n        })])\n    }))));\n    const renderSplitButton = (spec, sharedBackstage, btnName) => {\n      const tooltipString = Cell(spec.tooltip.getOr(''));\n      const getApi = comp => ({\n        isEnabled: () => !Disabling.isDisabled(comp),\n        setEnabled: state => Disabling.set(comp, !state),\n        setIconFill: (id, value) => {\n          descendant(comp.element, `svg path[class=\"${ id }\"], rect[class=\"${ id }\"]`).each(underlinePath => {\n            set$9(underlinePath, 'fill', value);\n          });\n        },\n        setActive: state => {\n          set$9(comp.element, 'aria-pressed', state);\n          descendant(comp.element, 'span').each(button => {\n            comp.getSystem().getByDom(button).each(buttonComp => Toggling.set(buttonComp, state));\n          });\n        },\n        isActive: () => descendant(comp.element, 'span').exists(button => comp.getSystem().getByDom(button).exists(Toggling.isOn)),\n        setText: text => descendant(comp.element, 'span').each(button => comp.getSystem().getByDom(button).each(buttonComp => emitWith(buttonComp, updateMenuText, { text }))),\n        setIcon: icon => descendant(comp.element, 'span').each(button => comp.getSystem().getByDom(button).each(buttonComp => emitWith(buttonComp, updateMenuIcon, { icon }))),\n        setTooltip: tooltip => {\n          const translatedTooltip = sharedBackstage.providers.translate(tooltip);\n          set$9(comp.element, 'aria-label', translatedTooltip);\n          tooltipString.set(tooltip);\n        }\n      });\n      const editorOffCell = Cell(noop);\n      const specialisation = {\n        getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: {\n            'aria-pressed': false,\n            ...getTooltipAttributes(spec.tooltip, sharedBackstage.providers),\n            ...isNonNullable(btnName) ? { 'data-mce-name': btnName } : {}\n          }\n        },\n        onExecute: button => {\n          const api = getApi(button);\n          if (api.isEnabled()) {\n            spec.onAction(api);\n          }\n        },\n        onItemExecute: (_a, _b, _c) => {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            runOnAttached((comp, _se) => forceInitialSize(comp)),\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({}),\n          ...spec.tooltip.map(tooltip => {\n            return Tooltipping.config({\n              ...sharedBackstage.providers.tooltips.getConfig({\n                tooltipText: sharedBackstage.providers.translate(tooltip),\n                onShow: comp => {\n                  if (tooltipString.get() !== tooltip) {\n                    const translatedTooltip = sharedBackstage.providers.translate(tooltipString.get());\n                    Tooltipping.setComponents(comp, sharedBackstage.providers.tooltips.getComponents({ tooltipText: translatedTooltip }));\n                  }\n                }\n              })\n            });\n          }).toArray()\n        ]),\n        eventOrder: {\n          [attachedToDom()]: [\n            'alloy.base.behaviour',\n            'split-dropdown-events',\n            'tooltipping'\n          ],\n          [detachedFromDom()]: [\n            'split-dropdown-events',\n            'tooltipping'\n          ]\n        },\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$2('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    const defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'ai',\n        items: [\n          'aidialog',\n          'aishortcuts'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styles']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    const renderFromBridge = (bridgeBuilder, render) => (spec, backstage, editor, btnName) => {\n      const internal = bridgeBuilder(spec).mapError(errInfo => formatError(errInfo)).getOrDie();\n      return render(internal, backstage, editor, btnName);\n    };\n    const types = {\n      button: renderFromBridge(createToolbarButton, (s, backstage, _, btnName) => renderToolbarButton(s, backstage.shared.providers, btnName)),\n      togglebutton: renderFromBridge(createToggleButton, (s, backstage, _, btnName) => renderToolbarToggleButton(s, backstage.shared.providers, btnName)),\n      menubutton: renderFromBridge(createMenuButton, (s, backstage, _, btnName) => renderMenuButton(s, 'tox-tbtn', backstage, Optional.none(), false, btnName)),\n      splitbutton: renderFromBridge(createSplitButton, (s, backstage, _, btnName) => renderSplitButton(s, backstage.shared, btnName)),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, (s, backstage, editor, btnName) => {\n        const buttons = editor.ui.registry.getAll().buttons;\n        const identify = toolbar => identifyButtons(editor, {\n          buttons,\n          toolbar,\n          allowToolbarGroups: false\n        }, backstage, Optional.none());\n        const attributes = { [Attribute]: backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop };\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode$1.floating:\n          return renderFloatingToolbarButton(s, backstage, identify, attributes, btnName);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      })\n    };\n    const extractFrom = (spec, backstage, editor, btnName) => get$g(types, spec.type).fold(() => {\n      console.error('skipping button defined by', spec);\n      return Optional.none();\n    }, render => Optional.some(render(spec, backstage, editor, btnName)));\n    const bespokeButtons = {\n      styles: createStylesButton,\n      fontsize: createFontSizeButton,\n      fontsizeinput: createFontSizeInputButton,\n      fontfamily: createFontFamilyButton,\n      blocks: createBlocksButton,\n      align: createAlignButton\n    };\n    const removeUnusedDefaults = buttons => {\n      const filteredItemGroups = map$2(defaultToolbar, group => {\n        const items = filter$2(group.items, subItem => has$2(buttons, subItem) || has$2(bespokeButtons, subItem));\n        return {\n          name: group.name,\n          items\n        };\n      });\n      return filter$2(filteredItemGroups, group => group.items.length > 0);\n    };\n    const convertStringToolbar = strToolbar => {\n      const groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, g => ({ items: g.trim().split(' ') }));\n    };\n    const isToolbarGroupSettingArray = toolbar => isArrayOf(toolbar, t => has$2(t, 'name') && has$2(t, 'items'));\n    const createToolbar = toolbarConfig => {\n      const toolbar = toolbarConfig.toolbar;\n      const buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    const lookupButton = (editor, buttons, toolbarItem, allowToolbarGroups, backstage, prefixes) => get$g(buttons, toolbarItem.toLowerCase()).orThunk(() => prefixes.bind(ps => findMap(ps, prefix => get$g(buttons, prefix + toolbarItem.toLowerCase())))).fold(() => get$g(bespokeButtons, toolbarItem.toLowerCase()).map(r => r(editor, backstage)), spec => {\n      if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n        console.warn(`Ignoring the '${ toolbarItem }' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`);\n        return Optional.none();\n      } else {\n        return extractFrom(spec, backstage, editor, toolbarItem.toLowerCase());\n      }\n    });\n    const identifyButtons = (editor, toolbarConfig, backstage, prefixes) => {\n      const toolbarGroups = createToolbar(toolbarConfig);\n      const groups = map$2(toolbarGroups, group => {\n        const items = bind$3(group.items, toolbarItem => {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, backstage, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items\n        };\n      });\n      return filter$2(groups, group => group.items.length > 0);\n    };\n\n    const setToolbar = (editor, uiRefs, rawUiConfig, backstage) => {\n      const outerContainer = uiRefs.mainUi.outerContainer;\n      const toolbarConfig = rawUiConfig.toolbar;\n      const toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        const toolbars = toolbarConfig.map(t => {\n          const config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, backstage, Optional.none());\n        });\n        OuterContainer.setToolbars(outerContainer, toolbars);\n      } else {\n        OuterContainer.setToolbar(outerContainer, identifyButtons(editor, rawUiConfig, backstage, Optional.none()));\n      }\n    };\n\n    const detection = detect$1();\n    const isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    const setupEvents$1 = (editor, uiRefs) => {\n      const {uiMotherships} = uiRefs;\n      const dom = editor.dom;\n      let contentWindow = editor.getWin();\n      const initialDocEle = editor.getDoc().documentElement;\n      const lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      const lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      const resizeWindow = () => {\n        const outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      const resizeDocument = () => {\n        const docEle = editor.getDoc().documentElement;\n        const inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      const scroll = e => {\n        fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      const elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      editor.on('hide', () => {\n        each$1(uiMotherships, m => {\n          set$8(m.element, 'display', 'none');\n        });\n      });\n      editor.on('show', () => {\n        each$1(uiMotherships, m => {\n          remove$6(m.element, 'display');\n        });\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', () => {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    const attachUiMotherships = (editor, uiRoot, uiRefs) => {\n      if (isSplitUiMode(editor)) {\n        attachSystemAfter(uiRefs.mainUi.mothership.element, uiRefs.popupUi.mothership);\n      }\n      attachSystem(uiRoot, uiRefs.dialogUi.mothership);\n    };\n    const render$1 = (editor, uiRefs, rawUiConfig, backstage, args) => {\n      const {mainUi, uiMotherships} = uiRefs;\n      const lastToolbarWidth = Cell(0);\n      const outerContainer = mainUi.outerContainer;\n      iframe(editor);\n      const eTargetNode = SugarElement.fromDom(args.targetNode);\n      const uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, mainUi.mothership);\n      attachUiMotherships(editor, uiRoot, uiRefs);\n      editor.on('SkinLoaded', () => {\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar, getSidebarShow(editor));\n        setToolbar(editor, uiRefs, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setViews(outerContainer, rawUiConfig.views);\n        setupEvents$1(editor, uiRefs);\n      });\n      const socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        const limit = first(() => {\n          editor.dispatch('ScrollContent');\n        }, 20);\n        const unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiRefs);\n      editor.addCommand('ToggleSidebar', (_ui, value) => {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.dispatch('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', () => {\n        var _a;\n        return (_a = OuterContainer.whichSidebar(outerContainer)) !== null && _a !== void 0 ? _a : '';\n      });\n      editor.addCommand('ToggleView', (_ui, value) => {\n        if (OuterContainer.toggleView(outerContainer, value)) {\n          const target = outerContainer.element;\n          mainUi.mothership.broadcastOn([dismissPopups()], { target });\n          each$1(uiMotherships, m => {\n            m.broadcastOn([dismissPopups()], { target });\n          });\n          if (isNull(OuterContainer.whichView(outerContainer))) {\n            editor.focus();\n            editor.nodeChanged();\n            OuterContainer.refreshToolbar(outerContainer);\n          }\n        }\n      });\n      editor.addQueryValueHandler('ToggleView', () => {\n        var _a;\n        return (_a = OuterContainer.whichView(outerContainer)) !== null && _a !== void 0 ? _a : '';\n      });\n      const toolbarMode = getToolbarMode(editor);\n      const refreshDrawer = () => {\n        OuterContainer.refreshToolbar(uiRefs.mainUi.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode$1.sliding || toolbarMode === ToolbarMode$1.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', () => {\n          const width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      const api = {\n        setEnabled: state => {\n          broadcastReadonly(uiRefs, !state);\n        },\n        isEnabled: () => !Disabling.isDisabled(outerContainer)\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    const parseToInt = val => {\n      const re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    const numToPx = val => isNumber(val) ? val + 'px' : val;\n    const calcCappedSize = (size, minSize, maxSize) => {\n      const minOverride = minSize.filter(min => size < min);\n      const maxOverride = maxSize.filter(max => size > max);\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    const getHeight = editor => {\n      const baseHeight = getHeightOption(editor);\n      const minHeight = getMinHeightOption(editor);\n      const maxHeight = getMaxHeightOption(editor);\n      return parseToInt(baseHeight).map(height => calcCappedSize(height, minHeight, maxHeight));\n    };\n    const getHeightWithFallback = editor => {\n      const height = getHeight(editor);\n      return height.getOr(getHeightOption(editor));\n    };\n    const getWidth = editor => {\n      const baseWidth = getWidthOption(editor);\n      const minWidth = getMinWidthOption(editor);\n      const maxWidth = getMaxWidthOption(editor);\n      return parseToInt(baseWidth).map(width => calcCappedSize(width, minWidth, maxWidth));\n    };\n    const getWidthWithFallback = editor => {\n      const width = getWidth(editor);\n      return width.getOr(getWidthOption(editor));\n    };\n\n    const {ToolbarLocation, ToolbarMode} = Options;\n    const maximumDistanceToEdge = 40;\n    const InlineHeader = (editor, targetElm, uiRefs, backstage, floatContainer) => {\n      const {mainUi, uiMotherships} = uiRefs;\n      const DOM = global$7.DOM;\n      const useFixedToolbarContainer = useFixedContainer(editor);\n      const isSticky = isStickyToolbar(editor);\n      const editorMaxWidthOpt = getMaxWidthOption(editor).or(getWidth(editor));\n      const headerBackstage = backstage.shared.header;\n      const isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      const minimumToolbarWidth = 150;\n      const toolbarMode = getToolbarMode(editor);\n      const isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      const visible = Cell(false);\n      const isVisible = () => visible.get() && !editor.removed;\n      const calcToolbarOffset = toolbar => isSplitToolbar ? toolbar.fold(constant$1(0), tbar => tbar.components().length > 1 ? get$d(tbar.components()[1].element) : 0) : 0;\n      const calcMode = container => {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          const toolbar = OuterContainer.getToolbar(mainUi.outerContainer);\n          const offset = calcToolbarOffset(toolbar);\n          const toolbarHeight = get$d(container.element) - offset;\n          const targetBounds = box$1(targetElm);\n          const roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            const doc = documentElement(targetElm);\n            const docHeight = Math.max(doc.dom.scrollHeight, get$d(doc));\n            const roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              const winBounds = win();\n              const isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      const setupMode = mode => {\n        floatContainer.on(container => {\n          Docking.setModes(container, [mode]);\n          headerBackstage.setDockingMode(mode);\n          const verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n          set$9(container.element, Attribute, verticalDir);\n        });\n      };\n      const updateChromeWidth = () => {\n        floatContainer.on(container => {\n          const maxWidth = editorMaxWidthOpt.getOrThunk(() => {\n            const bodyMargin = parseToInt(get$e(body(), 'margin-left')).getOr(0);\n            return get$c(body()) - absolute$3(targetElm).left + bodyMargin;\n          });\n          set$8(container.element, 'max-width', maxWidth + 'px');\n        });\n      };\n      const updateChromePosition = isOuterContainerWidthRestored => {\n        floatContainer.on(container => {\n          const toolbar = OuterContainer.getToolbar(mainUi.outerContainer);\n          const offset = calcToolbarOffset(toolbar);\n          const targetBounds = box$1(targetElm);\n          const offsetParent = getOffsetParent$1(editor, mainUi.outerContainer.element);\n          const getLeft = () => offsetParent.fold(() => targetBounds.x, offsetParent => {\n            const offsetBox = box$1(offsetParent);\n            const isOffsetParentBody = eq(offsetParent, body());\n            return isOffsetParentBody ? targetBounds.x : targetBounds.x - offsetBox.x;\n          });\n          const getTop = () => offsetParent.fold(() => isPositionedAtTop() ? Math.max(targetBounds.y - get$d(container.element) + offset, 0) : targetBounds.bottom, offsetParent => {\n            var _a;\n            const offsetBox = box$1(offsetParent);\n            const scrollDelta = (_a = offsetParent.dom.scrollTop) !== null && _a !== void 0 ? _a : 0;\n            const isOffsetParentBody = eq(offsetParent, body());\n            const topValue = isOffsetParentBody ? Math.max(targetBounds.y - get$d(container.element) + offset, 0) : targetBounds.y - offsetBox.y + scrollDelta - get$d(container.element) + offset;\n            return isPositionedAtTop() ? topValue : targetBounds.bottom;\n          });\n          const left = getLeft();\n          const widthProperties = someIf(isOuterContainerWidthRestored, Math.ceil(mainUi.outerContainer.element.dom.getBoundingClientRect().width)).filter(w => w > minimumToolbarWidth).map(toolbarWidth => {\n            const scroll = get$b();\n            const availableWidth = window.innerWidth - (left - scroll.left);\n            const width = Math.max(Math.min(toolbarWidth, availableWidth), minimumToolbarWidth);\n            if (availableWidth < toolbarWidth) {\n              set$8(mainUi.outerContainer.element, 'width', width + 'px');\n            }\n            return { width: width + 'px' };\n          }).getOr({});\n          const baseProperties = {\n            position: 'absolute',\n            left: Math.round(left) + 'px',\n            top: getTop() + 'px'\n          };\n          setAll(mainUi.outerContainer.element, {\n            ...baseProperties,\n            ...widthProperties\n          });\n        });\n      };\n      const getOffsetParent$1 = (editor, element) => isSplitUiMode(editor) ? getOffsetParent(element) : Optional.none();\n      const repositionPopups$1 = () => {\n        each$1(uiMotherships, m => {\n          m.broadcastOn([repositionPopups()], {});\n        });\n      };\n      const restoreOuterContainerWidth = () => {\n        if (!useFixedToolbarContainer) {\n          const toolbarCurrentRightsidePosition = absolute$3(mainUi.outerContainer.element).left + getOuter$1(mainUi.outerContainer.element);\n          if (toolbarCurrentRightsidePosition >= window.innerWidth - maximumDistanceToEdge || getRaw(mainUi.outerContainer.element, 'width').isSome()) {\n            set$8(mainUi.outerContainer.element, 'position', 'absolute');\n            set$8(mainUi.outerContainer.element, 'left', '0px');\n            remove$6(mainUi.outerContainer.element, 'width');\n            return true;\n          }\n        }\n        return false;\n      };\n      const update = stickyAction => {\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        const isOuterContainerWidthRestored = useFixedToolbarContainer ? false : restoreOuterContainerWidth();\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(mainUi.outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition(isOuterContainerWidthRestored);\n        }\n        if (isSticky) {\n          floatContainer.on(stickyAction);\n        }\n        repositionPopups$1();\n      };\n      const doUpdateMode = () => {\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return false;\n        }\n        return floatContainer.get().exists(fc => {\n          const currentMode = headerBackstage.getDockingMode();\n          const newMode = calcMode(fc);\n          if (newMode !== currentMode) {\n            setupMode(newMode);\n            return true;\n          } else {\n            return false;\n          }\n        });\n      };\n      const show = () => {\n        visible.set(true);\n        set$8(mainUi.outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        each$1(uiMotherships, m => {\n          remove$6(m.element, 'display');\n        });\n        doUpdateMode();\n        if (isSplitUiMode(editor)) {\n          update(elem => Docking.isDocked(elem) ? Docking.reset(elem) : Docking.refresh(elem));\n        } else {\n          update(Docking.refresh);\n        }\n      };\n      const hide = () => {\n        visible.set(false);\n        set$8(mainUi.outerContainer.element, 'display', 'none');\n        DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        each$1(uiMotherships, m => {\n          set$8(m.element, 'display', 'none');\n        });\n      };\n      const updateMode = () => {\n        const changedMode = doUpdateMode();\n        if (changedMode) {\n          update(Docking.reset);\n        }\n      };\n      return {\n        isVisible,\n        isPositionedAtTop,\n        show,\n        hide,\n        update,\n        updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    const getTargetPosAndBounds = (targetElm, isToolbarTop) => {\n      const bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds\n      };\n    };\n    const setupEvents = (editor, targetElm, ui, toolbarPersist) => {\n      const prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      const resizeContent = e => {\n        const {pos, bounds} = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop());\n        const {\n          pos: prevPos,\n          bounds: prevBounds\n        } = prevPosAndBounds.get();\n        const hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos,\n          bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(Docking.reset);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', () => ui.update(Docking.reset));\n      editor.on('NodeChange keydown', e => {\n        requestAnimationFrame(() => resizeContent(e));\n      });\n      let lastScrollX = 0;\n      const updateUi = last(() => ui.update(Docking.refresh), 33);\n      editor.on('ScrollWindow', () => {\n        const newScrollX = get$b().left;\n        if (newScrollX !== lastScrollX) {\n          lastScrollX = newScrollX;\n          updateUi.throttle();\n        }\n        ui.updateMode();\n      });\n      if (isSplitUiMode(editor)) {\n        editor.on('ElementScroll', _args => {\n          ui.update(Docking.refresh);\n        });\n      }\n      const elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', e => resizeContent(e.raw)));\n      editor.on('remove', () => {\n        elementLoad.clear();\n      });\n    };\n    const render = (editor, uiRefs, rawUiConfig, backstage, args) => {\n      const {mainUi} = uiRefs;\n      const floatContainer = value$2();\n      const targetElm = SugarElement.fromDom(args.targetNode);\n      const ui = InlineHeader(editor, targetElm, uiRefs, backstage, floatContainer);\n      const toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      const render = () => {\n        if (floatContainer.isSet()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(mainUi.outerContainer).getOrDie());\n        const uiContainer = getUiContainer(editor);\n        if (isSplitUiMode(editor)) {\n          attachSystemAfter(targetElm, mainUi.mothership);\n          attachSystemAfter(targetElm, uiRefs.popupUi.mothership);\n        } else {\n          attachSystem(uiContainer, mainUi.mothership);\n        }\n        attachSystem(uiContainer, uiRefs.dialogUi.mothership);\n        const setup = () => {\n          setToolbar(editor, uiRefs, rawUiConfig, backstage);\n          OuterContainer.setMenubar(mainUi.outerContainer, identifyMenus(editor, rawUiConfig));\n          ui.show();\n          setupEvents(editor, targetElm, ui, toolbarPersist);\n          editor.nodeChanged();\n        };\n        if (toolbarPersist) {\n          editor.once('SkinLoaded', setup);\n        } else {\n          setup();\n        }\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', () => {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiRefs);\n      const api = {\n        show: render,\n        hide: ui.hide,\n        setEnabled: state => {\n          broadcastReadonly(uiRefs, !state);\n        },\n        isEnabled: () => !Disabling.isDisabled(mainUi.outerContainer)\n      };\n      return {\n        editorContainer: mainUi.outerContainer.element.dom,\n        api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    const LazyUiReferences = () => {\n      const dialogUi = value$2();\n      const popupUi = value$2();\n      const mainUi = value$2();\n      const lazyGetInOuterOrDie = (label, f) => () => mainUi.get().bind(oc => f(oc.outerContainer)).getOrDie(`Could not find ${ label } element in OuterContainer`);\n      const getUiMotherships = () => {\n        const optDialogMothership = dialogUi.get().map(ui => ui.mothership);\n        const optPopupMothership = popupUi.get().map(ui => ui.mothership);\n        return optDialogMothership.fold(() => optPopupMothership.toArray(), dm => optPopupMothership.fold(() => [dm], pm => eq(dm.element, pm.element) ? [dm] : [\n          dm,\n          pm\n        ]));\n      };\n      return {\n        dialogUi,\n        popupUi,\n        mainUi,\n        getUiMotherships,\n        lazyGetInOuterOrDie\n      };\n    };\n\n    const showContextToolbarEvent = 'contexttoolbar-show';\n    const hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    const getFormApi = input => ({\n      hide: () => emit(input, sandboxClose()),\n      getValue: () => Representing.getValue(input)\n    });\n    const runOnExecute = (memInput, original) => run$1(internalToolbarButtonExecute, (comp, se) => {\n      const input = memInput.get(comp);\n      const formApi = getFormApi(input);\n      original.onAction(formApi, se.event.buttonApi);\n    });\n    const renderContextButton = (memInput, button, providers) => {\n      const {primary, ...rest} = button.original;\n      const bridged = getOrDie(createToolbarButton({\n        ...rest,\n        type: 'button',\n        onAction: noop\n      }));\n      return renderToolbarButtonWith(bridged, providers, [runOnExecute(memInput, button)]);\n    };\n    const renderContextToggleButton = (memInput, button, providers) => {\n      const {primary, ...rest} = button.original;\n      const bridged = getOrDie(createToggleButton({\n        ...rest,\n        type: 'togglebutton',\n        onAction: noop\n      }));\n      return renderToolbarToggleButtonWith(bridged, providers, [runOnExecute(memInput, button)]);\n    };\n    const isToggleButton = button => button.type === 'contextformtogglebutton';\n    const generateOne = (memInput, button, providersBackstage) => {\n      if (isToggleButton(button)) {\n        return renderContextToggleButton(memInput, button, providersBackstage);\n      } else {\n        return renderContextButton(memInput, button, providersBackstage);\n      }\n    };\n    const generate = (memInput, buttons, providersBackstage) => {\n      const mementos = map$2(buttons, button => record(generateOne(memInput, button, providersBackstage)));\n      const asSpecs = () => map$2(mementos, mem => mem.asSpec());\n      const findPrimary = compInSystem => findMap(buttons, (button, i) => {\n        if (button.primary) {\n          return Optional.from(mementos[i]).bind(mem => mem.getOpt(compInSystem)).filter(not(Disabling.isDisabled));\n        } else {\n          return Optional.none();\n        }\n      });\n      return {\n        asSpecs,\n        findPrimary\n      };\n    };\n\n    const buildInitGroups = (ctx, providers) => {\n      const inputAttributes = ctx.label.fold(() => ({}), label => ({ 'aria-label': label }));\n      const memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: input => commands.findPrimary(input).map(primary => {\n              emitExecute(primary);\n              return true;\n            }),\n            onLeft: (comp, se) => {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: (comp, se) => {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      const commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    const renderContextForm = (toolbarType, ctx, providers) => renderToolbar({\n      type: toolbarType,\n      uid: generate$6('context-toolbar'),\n      initGroups: buildInitGroups(ctx, providers),\n      onEscape: Optional.none,\n      cyclicKeying: true,\n      providers\n    });\n    const ContextForm = {\n      renderContextForm,\n      buildInitGroups\n    };\n\n    const isVerticalOverlap = (a, b, threshold) => b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    const getRangeRect = rng => {\n      const rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        const leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        const elm = isText(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$1).map(e => e.dom.getBoundingClientRect()).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    const getSelectionBounds = editor => {\n      const rng = editor.selection.getRng();\n      const rect = getRangeRect(rng);\n      if (editor.inline) {\n        const scroll = get$b();\n        return bounds(scroll.left + rect.left, scroll.top + rect.top, rect.width, rect.height);\n      } else {\n        const bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    const getAnchorElementBounds = (editor, lastElement) => lastElement.filter(elem => inBody(elem) && isHTMLElement(elem)).map(absolute$2).getOrThunk(() => getSelectionBounds(editor));\n    const getHorizontalBounds = (contentAreaBox, viewportBounds, margin) => {\n      const x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      const right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x,\n        width: right - x\n      };\n    };\n    const getVerticalBounds = (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) => {\n      const container = SugarElement.fromDom(editor.getContainer());\n      const header = descendant(container, '.tox-editor-header').getOr(container);\n      const headerBox = box$1(header);\n      const isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      const isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      const containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    const getContextToolbarBounds = (editor, sharedBackstage, toolbarType, margin = 0) => {\n      const viewportBounds = getBounds$3(window);\n      const contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      const toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      const {x, width} = getHorizontalBounds(contentAreaBox, viewportBounds, margin);\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        const isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        const {y, bottom} = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin);\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    const bubbleSize$1 = 12;\n    const bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    const anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    const isEntireElementSelected = (editor, elem) => {\n      const rng = editor.selection.getRng();\n      const leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    const preservePosition = (elem, position, f) => {\n      const currentPosition = getRaw(elem, 'position');\n      set$8(elem, 'position', position);\n      const result = f(elem);\n      currentPosition.each(pos => set$8(elem, 'position', pos));\n      return result;\n    };\n    const shouldUseInsetLayouts = position => position === 'node';\n    const determineInsetLayout = (editor, contextbar, elem, data, bounds) => {\n      const selectionBounds = getSelectionBounds(editor);\n      const isSameAnchorElement = data.lastElement().exists(prev => eq(elem, prev));\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), () => {\n          const isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar), -20);\n          return isOverlapping && !data.isReposition() ? flip : preserve;\n        });\n      } else {\n        const yBounds = data.getMode() === 'fixed' ? bounds.y + get$b().top : bounds.y;\n        const contextbarHeight = get$d(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    const getAnchorSpec$2 = (editor, mobile, data, position) => {\n      const smartInsetLayout = elem => (anchor, element, bubbles, placee, bounds) => {\n        const layout = determineInsetLayout(editor, placee, elem, data, bounds);\n        const newAnchor = {\n          ...anchor,\n          y: bounds.y,\n          height: bounds.height\n        };\n        return {\n          ...layout(newAnchor, element, bubbles, placee, bounds),\n          alwaysFit: true\n        };\n      };\n      const getInsetLayouts = elem => shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      const desktopAnchorSpecLayouts = {\n        onLtr: elem => [\n          north$2,\n          south$2,\n          northeast$2,\n          southeast$2,\n          northwest$2,\n          southwest$2\n        ].concat(getInsetLayouts(elem)),\n        onRtl: elem => [\n          north$2,\n          south$2,\n          northwest$2,\n          southwest$2,\n          northeast$2,\n          southeast$2\n        ].concat(getInsetLayouts(elem))\n      };\n      const mobileAnchorSpecLayouts = {\n        onLtr: elem => [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2\n        ].concat(getInsetLayouts(elem)),\n        onRtl: elem => [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2\n        ].concat(getInsetLayouts(elem))\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    const getAnchorLayout = (editor, position, isTouch, data) => {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: () => [east$2],\n            onRtl: () => [west$2]\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    const matchTargetWith = (elem, candidates) => {\n      const ctxs = filter$2(candidates, toolbarApi => toolbarApi.predicate(elem.dom));\n      const {pass, fail} = partition$3(ctxs, t => t.type === 'contexttoolbar');\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    const filterByPositionForStartNode = toolbars => {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        const doesPositionExist = value => exists(toolbars, t => t.position === value);\n        const filterToolbarsByPosition = value => filter$2(toolbars, t => t.position === value);\n        const hasSelectionToolbars = doesPositionExist('selection');\n        const hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            const nodeToolbars = filterToolbarsByPosition('node');\n            const selectionToolbars = map$2(filterToolbarsByPosition('selection'), t => ({\n              ...t,\n              position: 'node'\n            }));\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    const filterByPositionForAncestorNode = toolbars => {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        const findPosition = value => find$5(toolbars, t => t.position === value);\n        const basePosition = findPosition('selection').orThunk(() => findPosition('node')).orThunk(() => findPosition('line')).map(t => t.position);\n        return basePosition.fold(() => [], pos => filter$2(toolbars, t => t.position === pos));\n      }\n    };\n    const matchStartNode = (elem, nodeCandidates, editorCandidates) => {\n      const nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        const editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          const toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem,\n            toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    const matchAncestor = (isRoot, startNode, scopes) => {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, ancestorElem => {\n          if (isElement$1(ancestorElem)) {\n            const {contextToolbars, contextForms} = matchTargetWith(ancestorElem, scopes.inNodeScope);\n            const toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    const lookup$1 = (scopes, editor) => {\n      const rootElem = SugarElement.fromDom(editor.getBody());\n      const isRoot = elem => eq(elem, rootElem);\n      const isOutsideRoot = startNode => !isRoot(startNode) && !contains(rootElem, startNode);\n      const startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(() => matchAncestor(isRoot, startNode, scopes));\n    };\n\n    const categorise = (contextToolbars, navigate) => {\n      const forms = {};\n      const inNodeScope = [];\n      const inEditorScope = [];\n      const formNavigators = {};\n      const lookupTable = {};\n      const registerForm = (key, toolbarSpec) => {\n        const contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(launch => {\n          formNavigators['form:' + key + ''] = {\n            ...toolbarSpec.launch,\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: () => {\n              navigate(contextForm);\n            }\n          };\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      const registerToolbar = (key, toolbarSpec) => {\n        createContextToolbar(toolbarSpec).each(contextToolbar => {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      const keys$1 = keys(contextToolbars);\n      each$1(keys$1, key => {\n        const toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms,\n        inNodeScope,\n        inEditorScope,\n        lookupTable,\n        formNavigators\n      };\n    };\n\n    const forwardSlideEvent = generate$6('forward-slide');\n    const backSlideEvent = generate$6('backward-slide');\n    const changeSlideEvent = generate$6('change-slide-event');\n    const resizingClass = 'tox-pop--resizing';\n    const renderContextToolbar = spec => {\n      const stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: comp => {\n          stack.set([]);\n          InlineView.getContent(comp).each(c => {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), (comp, se) => {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, (comp, se) => {\n              const elem = comp.element;\n              remove$6(elem, 'width');\n              const currentWidth = get$c(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              const newWidth = get$c(elem);\n              set$8(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(newContents => {\n                se.event.focus.bind(f => {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(() => {\n                  Keying.focusIn(newContents);\n                  return active$1(getRootNode(elem));\n                });\n              });\n              setTimeout(() => {\n                set$8(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, (comp, se) => {\n              InlineView.getContent(comp).each(oldContents => {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active$1(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, (comp, _se) => {\n              last$1(stack.get()).each(last => {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: comp => last$1(stack.get()).fold(() => spec.onEscape(), _ => {\n              emit(comp, backSlideEvent);\n              return Optional.some(true);\n            })\n          })\n        ]),\n        lazySink: () => Result.value(spec.sink)\n      });\n    };\n\n    const transitionClass = 'tox-pop--transition';\n    const register$9 = (editor, registryContextToolbars, sink, extras) => {\n      const backstage = extras.backstage;\n      const sharedBackstage = backstage.shared;\n      const isTouch = detect$1().deviceType.isTouch;\n      const lastElement = value$2();\n      const lastTrigger = value$2();\n      const lastContextPosition = value$2();\n      const contextbar = build$1(renderContextToolbar({\n        sink,\n        onEscape: () => {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      const getBounds = () => {\n        const position = lastContextPosition.get().getOr('node');\n        const margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      const canLaunchToolbar = () => {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      const isSameLaunchElement = elem => is$1(lift2(elem, lastElement.get(), eq), true);\n      const shouldContextToolbarHide = () => {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          const contextToolbarBounds = getBounds();\n          const anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds, 0.01);\n        }\n      };\n      const close = () => {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      const hideOrRepositionIfNecessary = () => {\n        if (InlineView.isOpen(contextbar)) {\n          const contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$8(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      const wrapInPopDialog = toolbarSpec => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop__dialog']\n        },\n        components: [toolbarSpec],\n        behaviours: derive$1([\n          Keying.config({ mode: 'acyclic' }),\n          config('pop-dialog-wrap-events', [\n            runOnAttached(comp => {\n              editor.shortcuts.add('ctrl+F9', 'focus statusbar', () => Keying.focusIn(comp));\n            }),\n            runOnDetached(_comp => {\n              editor.shortcuts.remove('ctrl+F9');\n            })\n          ])\n        ])\n      });\n      const getScopes = cached(() => categorise(registryContextToolbars, toolbarApi => {\n        const alloySpec = buildToolbar([toolbarApi]);\n        emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n      }));\n      const buildContextToolbarGroups = (allButtons, ctx) => identifyButtons(editor, {\n        buttons: allButtons,\n        toolbar: ctx.items,\n        allowToolbarGroups: false\n      }, extras.backstage, Optional.some(['form:']));\n      const buildContextFormGroups = (ctx, providers) => ContextForm.buildInitGroups(ctx, providers);\n      const buildToolbar = toolbars => {\n        const {buttons} = editor.ui.registry.getAll();\n        const scopes = getScopes();\n        const allButtons = {\n          ...buttons,\n          ...scopes.formNavigators\n        };\n        const toolbarType = getToolbarMode(editor) === ToolbarMode$1.scrolling ? ToolbarMode$1.scrolling : ToolbarMode$1.default;\n        const initGroups = flatten(map$2(toolbars, ctx => ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers)));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      const getAnchor = (position, element) => {\n        const anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        const anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: () => is$1(lastTrigger.get(), 0),\n          getMode: () => Positioning.getMode(sink)\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      const launchContext = (toolbarApi, elem) => {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        const toolbarSpec = buildToolbar(toolbarApi);\n        const position = toolbarApi[0].position;\n        const anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        const contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, () => Optional.some(getBounds()));\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$8(contextBarEle, 'display', 'none');\n        }\n      };\n      let isDragging = false;\n      const launchContextToolbar = last(() => {\n        if (!editor.hasFocus() || editor.removed || isDragging) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          const scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, info => {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', () => {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, e => {\n          const scopes = getScopes();\n          get$g(scopes.lookupTable, e.toolbarKey).each(ctx => {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', _e => {\n          global$9.setEditorTimeout(editor, () => {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', () => {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('ExecCommand', ({command}) => {\n          if (command.toLowerCase() === 'toggleview') {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', event => {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('dragstart', () => {\n          isDragging = true;\n        });\n        editor.on('dragend drop', () => {\n          isDragging = false;\n        });\n        editor.on('NodeChange', _e => {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    const register$8 = editor => {\n      const alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, item => {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupStateToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onSetup: onSetupEditableToggle(editor),\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    const registerController = (editor, spec) => {\n      const getMenuItems = () => {\n        const options = spec.getOptions(editor);\n        const initial = spec.getCurrent(editor).map(spec.hash);\n        const current = value$2();\n        return map$2(options, value => ({\n          type: 'togglemenuitem',\n          text: spec.display(value),\n          onSetup: api => {\n            const setActive = active => {\n              if (active) {\n                current.on(oldApi => oldApi.setActive(false));\n                current.set(api);\n              }\n              api.setActive(active);\n            };\n            setActive(is$1(initial, spec.hash(value)));\n            const unbindWatcher = spec.watcher(editor, value, setActive);\n            return () => {\n              current.clear();\n              unbindWatcher();\n            };\n          },\n          onAction: () => spec.setCurrent(editor, value)\n        }));\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: callback => callback(getMenuItems()),\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    const lineHeightSpec = editor => ({\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: input => normalise(input, [\n        'fixed',\n        'relative',\n        'empty'\n      ]).getOr(input),\n      display: identity,\n      watcher: (editor, value, callback) => editor.formatter.formatChanged('lineheight', callback, false, { value }).unbind,\n      getCurrent: editor => Optional.from(editor.queryCommandValue('LineHeight')),\n      setCurrent: (editor, value) => editor.execCommand('LineHeight', false, value),\n      onToolbarSetup: onSetupEditableToggle(editor),\n      onMenuSetup: onSetupEditableToggle(editor)\n    });\n    const languageSpec = editor => {\n      const settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(settings => ({\n        name: 'language',\n        text: 'Language',\n        icon: 'language',\n        getOptions: constant$1(settings),\n        hash: input => isUndefined(input.customCode) ? input.code : `${ input.code }/${ input.customCode }`,\n        display: input => input.title,\n        watcher: (editor, value, callback) => {\n          var _a;\n          return editor.formatter.formatChanged('lang', callback, false, {\n            value: value.code,\n            customValue: (_a = value.customCode) !== null && _a !== void 0 ? _a : null\n          }).unbind;\n        },\n        getCurrent: editor => {\n          const node = SugarElement.fromDom(editor.selection.getNode());\n          return closest$4(node, n => Optional.some(n).filter(isElement$1).bind(ele => {\n            const codeOpt = getOpt(ele, 'lang');\n            return codeOpt.map(code => {\n              const customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n              return {\n                code,\n                customCode,\n                title: ''\n              };\n            });\n          }));\n        },\n        setCurrent: (editor, lang) => editor.execCommand('Lang', false, lang),\n        onToolbarSetup: api => {\n          const unbinder = unbindable();\n          api.setActive(editor.formatter.match('lang', {}, undefined, true));\n          unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n          return composeUnbinders(unbinder.clear, onSetupEditableToggle(editor)(api));\n        },\n        onMenuSetup: onSetupEditableToggle(editor)\n      }));\n    };\n    const register$7 = editor => {\n      registerController(editor, lineHeightSpec(editor));\n      languageSpec(editor).each(spec => registerController(editor, spec));\n    };\n\n    const register$6 = (editor, backstage) => {\n      createAlignMenu(editor, backstage);\n      createFontFamilyMenu(editor, backstage);\n      createStylesMenu(editor, backstage);\n      createBlocksMenu(editor, backstage);\n      createFontSizeMenu(editor, backstage);\n    };\n\n    const onSetupOutdentState = editor => onSetupEvent(editor, 'NodeChange', api => {\n      api.setEnabled(editor.queryCommandState('outdent') && editor.selection.isEditable());\n    });\n    const registerButtons$2 = editor => {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onSetup: onSetupEditableToggle(editor),\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    const register$5 = editor => {\n      registerButtons$2(editor);\n    };\n\n    const makeSetupHandler = (editor, pasteAsText) => api => {\n      api.setActive(pasteAsText.get());\n      const pastePlainTextToggleHandler = e => {\n        pasteAsText.set(e.state);\n        api.setActive(e.state);\n      };\n      editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n      return composeUnbinders(() => editor.off('PastePlainTextToggle', pastePlainTextToggleHandler), onSetupEditableToggle(editor)(api));\n    };\n    const register$4 = editor => {\n      const pasteAsText = Cell(getPasteAsText(editor));\n      const onAction = () => editor.execCommand('mceTogglePlainTextPaste');\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction,\n        onSetup: makeSetupHandler(editor, pasteAsText)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        icon: 'paste-text',\n        onAction,\n        onSetup: makeSetupHandler(editor, pasteAsText)\n      });\n    };\n\n    const onActionToggleFormat = (editor, fmt) => () => {\n      editor.execCommand('mceToggleFormat', false, fmt);\n    };\n    const registerFormatButtons = editor => {\n      global$1.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], (btn, _idx) => {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupStateToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name),\n          shortcut: btn.shortcut\n        });\n      });\n      for (let i = 1; i <= 6; i++) {\n        const name = 'h' + i;\n        const shortcut = `Access+${ i }`;\n        editor.ui.registry.addToggleButton(name, {\n          text: name.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupStateToggle(editor, name),\n          onAction: onActionToggleFormat(editor, name),\n          shortcut\n        });\n      }\n    };\n    const registerCommandButtons = editor => {\n      global$1.each([\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help',\n          shortcut: 'Alt+0'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'print',\n          text: 'Print',\n          action: 'mcePrint',\n          icon: 'print',\n          shortcut: 'Meta+P'\n        }\n      ], btn => {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          shortcut: btn.shortcut\n        });\n      });\n      global$1.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        },\n        {\n          name: 'hr',\n          text: 'Horizontal line',\n          action: 'InsertHorizontalRule',\n          icon: 'horizontal-rule'\n        }\n      ], btn => {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupEditableToggle(editor),\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    const registerCommandToggleButtons = editor => {\n      global$1.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], btn => {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupStateToggle(editor, btn.name)\n        });\n      });\n    };\n    const registerButtons$1 = editor => {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    const registerMenuItems$2 = editor => {\n      global$1.each([\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        },\n        {\n          name: 'print',\n          text: 'Print...',\n          action: 'mcePrint',\n          icon: 'print',\n          shortcut: 'Meta+P'\n        }\n      ], menuitem => {\n        editor.ui.registry.addMenuItem(menuitem.name, {\n          text: menuitem.text,\n          icon: menuitem.icon,\n          shortcut: menuitem.shortcut,\n          onAction: onActionExecCommand(editor, menuitem.action)\n        });\n      });\n      global$1.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'hr',\n          text: 'Horizontal line',\n          action: 'InsertHorizontalRule',\n          icon: 'horizontal-rule'\n        }\n      ], menuitem => {\n        editor.ui.registry.addMenuItem(menuitem.name, {\n          text: menuitem.text,\n          icon: menuitem.icon,\n          shortcut: menuitem.shortcut,\n          onSetup: onSetupEditableToggle(editor),\n          onAction: onActionExecCommand(editor, menuitem.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onSetup: onSetupEditableToggle(editor),\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    const register$3 = editor => {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    const onSetupUndoRedoState = (editor, type) => onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', api => {\n      api.setEnabled(!editor.mode.isReadOnly() && editor.undoManager[type]());\n    });\n    const registerMenuItems$1 = editor => {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    const registerButtons = editor => {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        enabled: false,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo'),\n        shortcut: 'Meta+Z'\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        enabled: false,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo'),\n        shortcut: 'Meta+Y'\n      });\n    };\n    const register$2 = editor => {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    const onSetupVisualAidState = editor => onSetupEvent(editor, 'VisualAid', api => {\n      api.setActive(editor.hasVisual);\n    });\n    const registerMenuItems = editor => {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    const registerToolbarButton = editor => {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    const register$1 = editor => {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    const setup$6 = (editor, backstage) => {\n      register$8(editor);\n      register$3(editor);\n      register$6(editor, backstage);\n      register$2(editor);\n      register$c(editor);\n      register$1(editor);\n      register$5(editor);\n      register$7(editor);\n      register$4(editor);\n    };\n\n    const patchPipeConfig = config => isString(config) ? config.split(/[ ,]/) : config;\n    const option = name => editor => editor.options.get(name);\n    const register = editor => {\n      const registerOption = editor.options.register;\n      registerOption('contextmenu_avoid_overlap', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('contextmenu_never_use_native', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('contextmenu', {\n        processor: value => {\n          if (value === false) {\n            return {\n              value: [],\n              valid: true\n            };\n          } else if (isString(value) || isArrayOf(value, isString)) {\n            return {\n              value: patchPipeConfig(value),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false or a string.'\n            };\n          }\n        },\n        default: 'link linkchecker image editimage table spellchecker configurepermanentpen'\n      });\n    };\n    const shouldNeverUseNative = option('contextmenu_never_use_native');\n    const getAvoidOverlapSelector = option('contextmenu_avoid_overlap');\n    const isContextMenuDisabled = editor => getContextMenu(editor).length === 0;\n    const getContextMenu = editor => {\n      const contextMenus = editor.ui.registry.getAll().contextMenus;\n      const contextMenu = editor.options.get('contextmenu');\n      if (editor.options.isSet('contextmenu')) {\n        return contextMenu;\n      } else {\n        return filter$2(contextMenu, item => has$2(contextMenus, item));\n      }\n    };\n\n    const nu = (x, y) => ({\n      type: 'makeshift',\n      x,\n      y\n    });\n    const transpose = (pos, dx, dy) => {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    const isTouchEvent$1 = e => e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    const fromPageXY = e => {\n      if (isTouchEvent$1(e)) {\n        const touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    const fromClientXY = e => {\n      if (isTouchEvent$1(e)) {\n        const touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    const transposeContentAreaContainer = (element, pos) => {\n      const containerPos = global$7.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    const getPointAnchor = (editor, e) => {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    const getSelectionAnchor = editor => {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    const getNodeAnchor = editor => ({\n      type: 'node',\n      node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n      root: SugarElement.fromDom(editor.getBody())\n    });\n    const getAnchorSpec$1 = (editor, e, anchorType) => {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    const initAndShow$1 = (editor, e, buildMenu, backstage, contextmenu, anchorType) => {\n      const items = buildMenu();\n      const anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n        isHorizontalMenu: false,\n        search: Optional.none()\n      }).map(menuData => {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    const layouts = {\n      onLtr: () => [\n        south$2,\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        north$2,\n        north,\n        south,\n        northeast,\n        southeast,\n        northwest,\n        southwest\n      ],\n      onRtl: () => [\n        south$2,\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        north$2,\n        north,\n        south,\n        northwest,\n        southwest,\n        northeast,\n        southeast\n      ]\n    };\n    const bubbleSize = 12;\n    const bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    const isTouchWithinSelection = (editor, e) => {\n      const selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        const touch = e.touches[0];\n        const rng = selection.getRng();\n        const rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(rngRect => rngRect.left <= touch.clientX && rngRect.right >= touch.clientX && rngRect.top <= touch.clientY && rngRect.bottom >= touch.clientY);\n      }\n    };\n    const setupiOSOverrides = editor => {\n      const originalSelection = editor.selection.getRng();\n      const selectionReset = () => {\n        global$9.setEditorTimeout(editor, () => {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      const preventMousedown = e => {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      const clearSelectionReset = () => unbindEventListeners();\n      editor.once('longpresscancel', clearSelectionReset);\n      const unbindEventListeners = () => {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    const getAnchorSpec = (editor, e, anchorType) => {\n      const anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      const bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return {\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        },\n        ...anchorSpec\n      };\n    };\n    const show = (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) => {\n      const anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n        isHorizontalMenu: true,\n        search: Optional.none()\n      }).map(menuData => {\n        e.preventDefault();\n        const highlightOnOpen = highlightImmediately ? HighlightOnOpen.HighlightMenuAndItem : HighlightOnOpen.HighlightNone;\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightOnOpen\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, () => Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection')));\n        editor.dispatch(hideContextToolbarEvent);\n      });\n    };\n    const initAndShow = (editor, e, buildMenu, backstage, contextmenu, anchorType) => {\n      const detection = detect$1();\n      const isiOS = detection.os.isiOS();\n      const isMacOS = detection.os.isMacOS();\n      const isAndroid = detection.os.isAndroid();\n      const isTouch = detection.deviceType.isTouch();\n      const shouldHighlightImmediately = () => !(isAndroid || isiOS || isMacOS && isTouch);\n      const open = () => {\n        const items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isMacOS || isiOS) && anchorType !== 'node') {\n        const openiOS = () => {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS();\n        } else {\n          editor.once('selectionchange', openiOS);\n          editor.once('touchend', () => editor.off('selectionchange', openiOS));\n        }\n      } else {\n        open();\n      }\n    };\n\n    const isSeparator = item => isString(item) ? item === '|' : item.type === 'separator';\n    const separator = { type: 'separator' };\n    const makeContextItem = item => {\n      const commonMenuItem = item => ({\n        text: item.text,\n        icon: item.icon,\n        enabled: item.enabled,\n        shortcut: item.shortcut\n      });\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            ...commonMenuItem(item),\n            getSubmenuItems: () => {\n              const items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          const commonItem = item;\n          return {\n            type: 'menuitem',\n            ...commonMenuItem(commonItem),\n            onAction: noarg(commonItem.onAction)\n          };\n        }\n      }\n    };\n    const addContextMenuGroup = (xs, groupItems) => {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      const lastMenuItem = last$1(xs).filter(item => !isSeparator(item));\n      const before = lastMenuItem.fold(() => [], _ => [separator]);\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    const generateContextMenu = (contextMenus, menuConfig, selectedElement) => {\n      const sections = foldl(menuConfig, (acc, name) => {\n        return get$g(contextMenus, name.toLowerCase()).map(menu => {\n          const items = menu.update(selectedElement);\n          if (isString(items) && isNotEmpty(trim$1(items))) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (isArray(items) && items.length > 0) {\n            const allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(() => acc.concat([name]));\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    const isNativeOverrideKeyEvent = (editor, e) => e.ctrlKey && !shouldNeverUseNative(editor);\n    const isTouchEvent = e => e.type === 'longpress' || has$2(e, 'touches');\n    const isTriggeredByKeyboard = (editor, e) => !isTouchEvent(e) && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    const getSelectedElement = (editor, e) => isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    const getAnchorType = (editor, e) => {\n      const selector = getAvoidOverlapSelector(editor);\n      const anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        const target = getSelectedElement(editor, e);\n        const selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    const setup$5 = (editor, lazySink, backstage) => {\n      const detection = detect$1();\n      const isTouch = detection.deviceType.isTouch;\n      const contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink,\n        onEscape: () => editor.focus(),\n        onShow: () => backstage.setContextMenuState(true),\n        onHide: () => backstage.setContextMenuState(false),\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), (comp, _se) => {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      const hideContextMenu = () => InlineView.hide(contextmenu);\n      const showContextMenu = e => {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        const anchorType = getAnchorType(editor, e);\n        const buildMenu = () => {\n          const selectedElement = getSelectedElement(editor, e);\n          const registry = editor.ui.registry.getAll();\n          const menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        const initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', () => {\n        const hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    const adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    const subtract = change => point => point.translate(-change.left, -change.top);\n    const add = change => point => point.translate(change.left, change.top);\n    const transform = changes => (x, y) => foldl(changes, (rest, f) => f(rest), SugarPosition(x, y));\n    const asFixed = (coord, scroll, origin) => coord.fold(transform([\n      add(origin),\n      subtract(scroll)\n    ]), transform([subtract(scroll)]), transform([]));\n    const asAbsolute = (coord, scroll, origin) => coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    const asOffset = (coord, scroll, origin) => coord.fold(transform([]), transform([subtract(origin)]), transform([\n      add(scroll),\n      subtract(origin)\n    ]));\n    const withinRange = (coord1, coord2, xRange, yRange, scroll, origin) => {\n      const a1 = asAbsolute(coord1, scroll, origin);\n      const a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    const getDeltas = (coord1, coord2, xRange, yRange, scroll, origin) => {\n      const a1 = asAbsolute(coord1, scroll, origin);\n      const a2 = asAbsolute(coord2, scroll, origin);\n      const left = Math.abs(a1.left - a2.left);\n      const top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    const toStyles = (coord, scroll, origin) => {\n      const stylesOpt = coord.fold((x, y) => ({\n        position: Optional.some('absolute'),\n        left: Optional.some(x + 'px'),\n        top: Optional.some(y + 'px')\n      }), (x, y) => ({\n        position: Optional.some('absolute'),\n        left: Optional.some(x - origin.left + 'px'),\n        top: Optional.some(y - origin.top + 'px')\n      }), (x, y) => ({\n        position: Optional.some('fixed'),\n        left: Optional.some(x + 'px'),\n        top: Optional.some(y + 'px')\n      }));\n      return {\n        right: Optional.none(),\n        bottom: Optional.none(),\n        ...stylesOpt\n      };\n    };\n    const translate = (coord, deltaX, deltaY) => coord.fold((x, y) => offset(x + deltaX, y + deltaY), (x, y) => absolute(x + deltaX, y + deltaY), (x, y) => fixed(x + deltaX, y + deltaY));\n    const absorb = (partialCoord, originalCoord, scroll, origin) => {\n      const absorbOne = (stencil, nu) => (optX, optY) => {\n        const original = stencil(originalCoord, scroll, origin);\n        return nu(optX.getOr(original.left), optY.getOr(original.top));\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    const offset = adt.offset;\n    const absolute = adt.absolute;\n    const fixed = adt.fixed;\n\n    const parseAttrToInt = (element, name) => {\n      const value = get$f(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    const get = (component, snapsInfo) => {\n      const element = component.element;\n      const x = parseAttrToInt(element, snapsInfo.leftAttr);\n      const y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    const set = (component, snapsInfo, pt) => {\n      const element = component.element;\n      set$9(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$9(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    const clear = (component, snapsInfo) => {\n      const element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    const getCoords = (component, snapInfo, coord, delta) => get(component, snapInfo).fold(() => coord, fixed$1 => fixed(fixed$1.left + delta.left, fixed$1.top + delta.top));\n    const moveOrSnap = (component, snapInfo, coord, delta, scroll, origin) => {\n      const newCoord = getCoords(component, snapInfo, coord, delta);\n      const snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      const fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(() => ({\n        coord: fixed(fixedCoord.left, fixedCoord.top),\n        extra: Optional.none()\n      }), spanned => ({\n        coord: spanned.output,\n        extra: spanned.extra\n      }));\n    };\n    const stopDrag = (component, snapInfo) => {\n      clear(component, snapInfo);\n    };\n    const findMatchingSnap = (snaps, newCoord, scroll, origin) => findMap(snaps, snap => {\n      const sensor = snap.sensor;\n      const inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n      return inRange ? Optional.some({\n        output: absorb(snap.output, newCoord, scroll, origin),\n        extra: snap.extra\n      }) : Optional.none();\n    });\n    const findClosestSnap = (component, snapInfo, newCoord, scroll, origin) => {\n      const snaps = snapInfo.getSnapPoints(component);\n      const matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(() => {\n        const bestSnap = foldl(snaps, (acc, snap) => {\n          const sensor = snap.sensor;\n          const deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(() => ({\n            deltas: Optional.some(deltas),\n            snap: Optional.some(snap)\n          }), bestDeltas => {\n            const currAvg = (deltas.left + deltas.top) / 2;\n            const bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(snap => ({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }));\n      });\n    };\n    const findSnap = (component, snapInfo, newCoord, scroll, origin) => {\n      const snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    const snapTo$1 = (snap, scroll, origin) => ({\n      coord: absorb(snap.output, snap.output, scroll, origin),\n      extra: snap.extra\n    });\n\n    const snapTo = (component, dragConfig, _state, snap) => {\n      const target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        const doc = owner$4(component.element);\n        const scroll = get$b(doc);\n        const origin = getOrigin(target);\n        const snapPin = snapTo$1(snap, scroll, origin);\n        const styles = toStyles(snapPin.coord, scroll, origin);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    const initialAttribute = 'data-initial-z-index';\n    const resetZIndex = blocker => {\n      parent(blocker.element).filter(isElement$1).each(root => {\n        getOpt(root, initialAttribute).fold(() => remove$6(root, 'z-index'), zIndex => set$8(root, 'z-index', zIndex));\n        remove$7(root, initialAttribute);\n      });\n    };\n    const changeZIndex = blocker => {\n      parent(blocker.element).filter(isElement$1).each(root => {\n        getRaw(root, 'z-index').each(zindex => {\n          set$9(root, initialAttribute, zindex);\n        });\n        set$8(root, 'z-index', get$e(blocker.element, 'z-index'));\n      });\n    };\n    const instigate = (anyComponent, blocker) => {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    const discard = blocker => {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    const createComponent = (component, blockerClass, blockerEvents) => component.getSystem().build(Container.sketch({\n      dom: {\n        styles: {\n          'left': '0px',\n          'top': '0px',\n          'width': '100%',\n          'height': '100%',\n          'position': 'fixed',\n          'z-index': '1000000000000000'\n        },\n        classes: [blockerClass]\n      },\n      events: blockerEvents\n    }));\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    const schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    const getCurrentCoord = target => lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), (left, top, position) => {\n      const nu = position === 'fixed' ? fixed : offset;\n      return nu(parseInt(left, 10), parseInt(top, 10));\n    }).getOrThunk(() => {\n      const location = absolute$3(target);\n      return absolute(location.left, location.top);\n    });\n    const clampCoords = (component, coords, scroll, origin, startData) => {\n      const bounds = startData.bounds;\n      const absoluteCoord = asAbsolute(coords, scroll, origin);\n      const newX = clamp(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      const newY = clamp(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      const newCoords = absolute(newX, newY);\n      return coords.fold(() => {\n        const offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), () => {\n        const fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    const calcNewCoord = (component, optSnaps, currentCoord, scroll, origin, delta, startData) => {\n      const newCoord = optSnaps.fold(() => {\n        const translated = translate(currentCoord, delta.left, delta.top);\n        const fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, snapInfo => {\n        const snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(extra => {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    const dragBy = (component, dragConfig, startData, delta) => {\n      const target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        const doc = owner$4(component.element);\n        const scroll = get$b(doc);\n        const origin = getOrigin(target);\n        const currentCoord = getCurrentCoord(target);\n        const newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll, origin, delta, startData);\n        const styles = toStyles(newCoord, scroll, origin);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    const calcStartData = (dragConfig, comp) => ({\n      bounds: dragConfig.getBounds(),\n      height: getOuter$2(comp.element),\n      width: getOuter$1(comp.element)\n    });\n    const move = (component, dragConfig, dragState, dragMode, event) => {\n      const delta = dragState.update(dragMode, event);\n      const dragStartData = dragState.getStartData().getOrThunk(() => calcStartData(dragConfig, component));\n      delta.each(dlt => {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    const stop = (component, blocker, dragConfig, dragState) => {\n      blocker.each(discard);\n      dragConfig.snaps.each(snapInfo => {\n        stopDrag(component, snapInfo);\n      });\n      const target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    const handlers = events => (dragConfig, dragState) => {\n      const updateStartState = comp => {\n        dragState.setStartData(calcStartData(dragConfig, comp));\n      };\n      return derive$2([\n        run$1(windowScroll(), comp => {\n          dragState.getStartData().each(() => updateStartState(comp));\n        }),\n        ...events(dragConfig, dragState, updateStartState)\n      ]);\n    };\n\n    const init$3 = dragApi => derive$2([\n      run$1(mousedown(), dragApi.forceDrop),\n      run$1(mouseup(), dragApi.drop),\n      run$1(mousemove(), (comp, simulatedEvent) => {\n        dragApi.move(simulatedEvent.event);\n      }),\n      run$1(mouseout(), dragApi.delayDrop)\n    ]);\n\n    const getData$1 = event => Optional.from(SugarPosition(event.x, event.y));\n    const getDelta$1 = (old, nu) => SugarPosition(nu.left - old.left, nu.top - old.top);\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    const events$3 = (dragConfig, dragState, updateStartState) => [run$1(mousedown(), (component, simulatedEvent) => {\n        const raw = simulatedEvent.event.raw;\n        if (raw.button !== 0) {\n          return;\n        }\n        simulatedEvent.stop();\n        const stop$1 = () => stop(component, Optional.some(blocker), dragConfig, dragState);\n        const delayDrop = DelayedFunction(stop$1, 200);\n        const dragApi = {\n          drop: stop$1,\n          delayDrop: delayDrop.schedule,\n          forceDrop: stop$1,\n          move: event => {\n            delayDrop.cancel();\n            move(component, dragConfig, dragState, MouseData, event);\n          }\n        };\n        const blocker = createComponent(component, dragConfig.blockerClass, init$3(dragApi));\n        const start = () => {\n          updateStartState(component);\n          instigate(component, blocker);\n        };\n        start();\n      })];\n    const schema$5 = [\n      ...schema$6,\n      output$1('dragger', { handlers: handlers(events$3) })\n    ];\n\n    const init$2 = dragApi => derive$2([\n      run$1(touchstart(), dragApi.forceDrop),\n      run$1(touchend(), dragApi.drop),\n      run$1(touchcancel(), dragApi.drop),\n      run$1(touchmove(), (comp, simulatedEvent) => {\n        dragApi.move(simulatedEvent.event);\n      })\n    ]);\n\n    const getDataFrom = touches => {\n      const touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    const getData = event => {\n      const raw = event.raw;\n      const touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    const getDelta = (old, nu) => SugarPosition(nu.left - old.left, nu.top - old.top);\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    const events$2 = (dragConfig, dragState, updateStartState) => {\n      const blockerSingleton = value$2();\n      const stopBlocking = component => {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), (component, simulatedEvent) => {\n          simulatedEvent.stop();\n          const stop = () => stopBlocking(component);\n          const dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: event => {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          const blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          blockerSingleton.set(blocker);\n          const start = () => {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), (component, simulatedEvent) => {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), (component, simulatedEvent) => {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    const schema$4 = [\n      ...schema$6,\n      output$1('dragger', { handlers: handlers(events$2) })\n    ];\n\n    const events$1 = (dragConfig, dragState, updateStartState) => [\n      ...events$3(dragConfig, dragState, updateStartState),\n      ...events$2(dragConfig, dragState, updateStartState)\n    ];\n    const schema$3 = [\n      ...schema$6,\n      output$1('dragger', { handlers: handlers(events$1) })\n    ];\n\n    const mouse = schema$5;\n    const touch = schema$4;\n    const mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    const init$1 = () => {\n      let previous = Optional.none();\n      let startData = Optional.none();\n      const reset = () => {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      const calculateDelta = (mode, nu) => {\n        const result = previous.map(old => mode.getDelta(old, nu));\n        previous = Optional.some(nu);\n        return result;\n      };\n      const update = (mode, dragEvent) => mode.getData(dragEvent).bind(nuData => calculateDelta(mode, nuData));\n      const setStartData = data => {\n        startData = Optional.some(data);\n      };\n      const getStartData = () => startData;\n      const readState = constant$1({});\n      return nu$8({\n        readState,\n        reset,\n        update,\n        getStartData,\n        setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$1\n    });\n\n    const Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: (dragConfig, dragState) => {\n          const dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: sConfig => ({\n          sensor: sConfig.sensor,\n          range: sConfig.range,\n          output: sConfig.output,\n          extra: Optional.from(sConfig.extra)\n        })\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    const snapWidth = 40;\n    const snapOffset = snapWidth / 2;\n    const calcSnap = (selectorOpt, td, x, y, width, height) => selectorOpt.fold(() => Dragging.snap({\n      sensor: absolute(x - snapOffset, y - snapOffset),\n      range: SugarPosition(width, height),\n      output: absolute(Optional.some(x), Optional.some(y)),\n      extra: { td }\n    }), selectorHandle => {\n      const sensorLeft = x - snapOffset;\n      const sensorTop = y - snapOffset;\n      const sensorWidth = snapWidth;\n      const sensorHeight = snapWidth;\n      const rect = selectorHandle.element.dom.getBoundingClientRect();\n      return Dragging.snap({\n        sensor: absolute(sensorLeft, sensorTop),\n        range: SugarPosition(sensorWidth, sensorHeight),\n        output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n        extra: { td }\n      });\n    });\n    const getSnapsConfig = (getSnapPoints, cell, onChange) => {\n      const isSameCell = (cellOpt, td) => cellOpt.exists(currentTd => eq(currentTd, td));\n      return {\n        getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: (component, extra) => {\n          const td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    const createSelector = snaps => record(Button.sketch({\n      dom: {\n        tag: 'div',\n        classes: ['tox-selector']\n      },\n      buttonBehaviours: derive$1([\n        Dragging.config({\n          mode: 'mouseOrTouch',\n          blockerClass: 'blocker',\n          snaps\n        }),\n        Unselecting.config({})\n      ]),\n      eventOrder: {\n        mousedown: [\n          'dragging',\n          'alloy.base.behaviour'\n        ],\n        touchstart: [\n          'dragging',\n          'alloy.base.behaviour'\n        ]\n      }\n    }));\n    const setup$4 = (editor, sink) => {\n      const tlTds = Cell([]);\n      const brTds = Cell([]);\n      const isVisible = Cell(false);\n      const startCell = value$2();\n      const finishCell = value$2();\n      const getTopLeftSnap = td => {\n        const box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      const getTopLeftSnaps = () => map$2(tlTds.get(), td => getTopLeftSnap(td));\n      const getBottomRightSnap = td => {\n        const box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      const getBottomRightSnaps = () => map$2(brTds.get(), td => getBottomRightSnap(td));\n      const topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, start => {\n        finishCell.get().each(finish => {\n          editor.dispatch('TableSelectorChange', {\n            start,\n            finish\n          });\n        });\n      });\n      const bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, finish => {\n        startCell.get().each(start => {\n          editor.dispatch('TableSelectorChange', {\n            start,\n            finish\n          });\n        });\n      });\n      const memTopLeft = createSelector(topLeftSnaps);\n      const memBottomRight = createSelector(bottomRightSnaps);\n      const topLeft = build$1(memTopLeft.asSpec());\n      const bottomRight = build$1(memBottomRight.asSpec());\n      const showOrHideHandle = (selector, cell, isAbove, isBelow) => {\n        const cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        const viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        const aboveViewport = isAbove(cellRect);\n        const belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$8(selector.element, 'display', 'none');\n        }\n      };\n      const snapTo = (selector, cell, getSnapConfig, pos) => {\n        const snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        const isAbove = rect => rect[pos] < 0;\n        const isBelow = (rect, viewportHeight) => rect[pos] > viewportHeight;\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      const snapTopLeft = cell => snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      const snapLastTopLeft = () => startCell.get().each(snapTopLeft);\n      const snapBottomRight = cell => snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      const snapLastBottomRight = () => finishCell.get().each(snapBottomRight);\n      if (detect$1().deviceType.isTouch()) {\n        const domToSugar = arr => map$2(arr, SugarElement.fromDom);\n        editor.on('TableSelectionChange', e => {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          const start = SugarElement.fromDom(e.start);\n          const finish = SugarElement.fromDom(e.finish);\n          startCell.set(start);\n          finishCell.set(finish);\n          Optional.from(e.otherCells).each(otherCells => {\n            tlTds.set(domToSugar(otherCells.upOrLeftCells));\n            brTds.set(domToSugar(otherCells.downOrRightCells));\n            snapTopLeft(start);\n            snapBottomRight(finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', () => {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', () => {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var Logo = \"<svg width=\\\"50px\\\" height=\\\"16px\\\" viewBox=\\\"0 0 50 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z\\\"/>\\n</svg>\\n\";\n\n    const isHidden = elm => elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus') || elm.getAttribute('data-mce-type') === 'bookmark';\n    const renderElementPath = (editor, settings, providersBackstage) => {\n      var _a;\n      const delimiter = (_a = settings.delimiter) !== null && _a !== void 0 ? _a : '\\u203A';\n      const renderElement = (name, element, index) => Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path-item'],\n          attributes: {\n            'data-index': index,\n            'aria-level': index + 1\n          }\n        },\n        components: [text$2(name)],\n        action: _btn => {\n          editor.focus();\n          editor.selection.select(element);\n          editor.nodeChanged();\n        },\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig()\n        ])\n      });\n      const renderDivider = () => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path-divider'],\n          attributes: { 'aria-hidden': true }\n        },\n        components: [text$2(` ${ delimiter } `)]\n      });\n      const renderPathData = data => foldl(data, (acc, path, index) => {\n        const element = renderElement(path.name, path.element, index);\n        if (index === 0) {\n          return acc.concat([element]);\n        } else {\n          return acc.concat([\n            renderDivider(),\n            element\n          ]);\n        }\n      }, []);\n      const updatePath = parents => {\n        const newPath = [];\n        let i = parents.length;\n        while (i-- > 0) {\n          const parent = parents[i];\n          if (parent.nodeType === 1 && !isHidden(parent)) {\n            const args = fireResolveName(editor, parent);\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached((comp, _e) => {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', () => Keying.focusIn(comp));\n              editor.on('NodeChange', e => {\n                const newPath = updatePath(e.parents);\n                const newChildren = newPath.length > 0 ? renderPathData(newPath) : [];\n                Replacing.set(comp, newChildren);\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    const getDimensions = (editor, deltas, resizeType, originalHeight, originalWidth) => {\n      const dimensions = { height: calcCappedSize(originalHeight + deltas.top, getMinHeightOption(editor), getMaxHeightOption(editor)) };\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthOption(editor), getMaxWidthOption(editor));\n      }\n      return dimensions;\n    };\n    const resize = (editor, deltas, resizeType) => {\n      const container = SugarElement.fromDom(editor.getContainer());\n      const dimensions = getDimensions(editor, deltas, resizeType, get$d(container), get$c(container));\n      each(dimensions, (val, dim) => {\n        if (isNumber(val)) {\n          set$8(container, dim, numToPx(val));\n        }\n      });\n      fireResizeEditor(editor);\n    };\n\n    const getResizeType = editor => {\n      const resize = getResize(editor);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    const keyboardHandler = (editor, resizeType, x, y) => {\n      const scale = 20;\n      const delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    const renderResizeHandler = (editor, providersBackstage) => {\n      const resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      const resizeLabel = resizeType === ResizeTypes.Both ? 'Press the arrow keys to resize the editor.' : 'Press the Up and Down arrow keys to resize the editor.';\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: {\n          'aria-label': providersBackstage.translate(resizeLabel),\n          'data-mce-name': 'resize-handle'\n        },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: (_comp, _target, delta) => resize(editor, delta, resizeType),\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: () => keyboardHandler(editor, resizeType, -1, 0),\n            onRight: () => keyboardHandler(editor, resizeType, 1, 0),\n            onUp: () => keyboardHandler(editor, resizeType, 0, -1),\n            onDown: () => keyboardHandler(editor, resizeType, 0, 1)\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          Tooltipping.config(providersBackstage.tooltips.getConfig({ tooltipText: providersBackstage.translate('Resize') }))\n        ]\n      }, providersBackstage.icons));\n    };\n\n    const renderWordCount = (editor, providersBackstage) => {\n      const replaceCountText = (comp, count, mode) => Replacing.set(comp, [text$2(providersBackstage.translate([\n          '{0} ' + mode,\n          count[mode]\n        ]))]);\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(comp => {\n              const currentVal = Representing.getValue(comp);\n              const newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(comp => {\n              editor.on('wordCountUpdate', e => {\n                const {mode} = Representing.getValue(comp);\n                Representing.setValue(comp, {\n                  mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: {\n          [execute$5()]: [\n            'disabling',\n            'alloy.base.behaviour',\n            'wordcount-events'\n          ]\n        }\n      });\n    };\n\n    const renderStatusbar = (editor, providersBackstage) => {\n      const renderBranding = () => {\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding']\n          },\n          components: [{\n              dom: {\n                tag: 'a',\n                attributes: {\n                  'href': 'https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7',\n                  'rel': 'noopener',\n                  'target': '_blank',\n                  'aria-label': global$8.translate([\n                    'Powered by {0}',\n                    'Tiny'\n                  ])\n                },\n                innerHtml: Logo.trim()\n              },\n              behaviours: derive$1([Focusing.config({})])\n            }]\n        };\n      };\n      const renderHelpAccessibility = () => {\n        const shortcutText = convertText('Alt+0');\n        const text = `Press {0} for help`;\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__help-text']\n          },\n          components: [text$2(global$8.translate([\n              text,\n              shortcutText\n            ]))]\n        };\n      };\n      const renderRightContainer = () => {\n        const components = [];\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (useBranding(editor)) {\n          components.push(renderBranding());\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__right-container']\n          },\n          components\n        };\n      };\n      const getTextComponents = () => {\n        const components = [];\n        const shouldRenderHelp = useHelpAccessibility(editor);\n        const shouldRenderElementPath = useElementPath(editor);\n        const shouldRenderRightContainer = useBranding(editor) || editor.hasPlugin('wordcount');\n        const getTextComponentClasses = () => {\n          const flexStart = 'tox-statusbar__text-container--flex-start';\n          const flexEnd = 'tox-statusbar__text-container--flex-end';\n          const spaceAround = 'tox-statusbar__text-container--space-around';\n          if (shouldRenderHelp) {\n            const container3Columns = 'tox-statusbar__text-container-3-cols';\n            if (!shouldRenderRightContainer && !shouldRenderElementPath) {\n              return [\n                container3Columns,\n                spaceAround\n              ];\n            }\n            if (shouldRenderRightContainer && !shouldRenderElementPath) {\n              return [\n                container3Columns,\n                flexEnd\n              ];\n            }\n            return [\n              container3Columns,\n              flexStart\n            ];\n          }\n          return [shouldRenderRightContainer && !shouldRenderElementPath ? flexEnd : flexStart];\n        };\n        if (shouldRenderElementPath) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (shouldRenderHelp) {\n          components.push(renderHelpAccessibility());\n        }\n        if (shouldRenderRightContainer) {\n          components.push(renderRightContainer());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: [\n                  'tox-statusbar__text-container',\n                  ...getTextComponentClasses()\n                ]\n              },\n              components\n            }];\n        }\n        return [];\n      };\n      const getComponents = () => {\n        const components = getTextComponents();\n        const resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    const getLazyMothership = (label, singleton) => singleton.get().getOrDie(`UI for ${ label } has not been rendered`);\n    const setup$3 = (editor, setupForTheme) => {\n      const isInline = editor.inline;\n      const mode = isInline ? Inline : Iframe;\n      const header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      const lazyUiRefs = LazyUiReferences();\n      const lazyMothership = value$2();\n      const lazyDialogMothership = value$2();\n      const lazyPopupMothership = value$2();\n      const platform = detect$1();\n      const isTouch = platform.deviceType.isTouch();\n      const touchPlatformClass = 'tox-platform-touch';\n      const deviceClasses = isTouch ? [touchPlatformClass] : [];\n      const isToolbarBottom = isToolbarLocationBottom(editor);\n      const toolbarMode = getToolbarMode(editor);\n      const memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      const memBottomAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-bottom-anchorbar']\n        }\n      });\n      const lazyHeader = () => lazyUiRefs.mainUi.get().map(ui => ui.outerContainer).bind(OuterContainer.getHeader);\n      const lazyDialogSinkResult = () => Result.fromOption(lazyUiRefs.dialogUi.get().map(ui => ui.sink), 'UI has not been rendered');\n      const lazyPopupSinkResult = () => Result.fromOption(lazyUiRefs.popupUi.get().map(ui => ui.sink), '(popup) UI has not been rendered');\n      const lazyAnchorBar = lazyUiRefs.lazyGetInOuterOrDie('anchor bar', memAnchorBar.getOpt);\n      const lazyBottomAnchorBar = lazyUiRefs.lazyGetInOuterOrDie('bottom anchor bar', memBottomAnchorBar.getOpt);\n      const lazyToolbar = lazyUiRefs.lazyGetInOuterOrDie('toolbar', OuterContainer.getToolbar);\n      const lazyThrobber = lazyUiRefs.lazyGetInOuterOrDie('throbber', OuterContainer.getThrobber);\n      const backstages = init$6({\n        popup: lazyPopupSinkResult,\n        dialog: lazyDialogSinkResult\n      }, editor, lazyAnchorBar, lazyBottomAnchorBar);\n      const makeHeaderPart = () => {\n        const verticalDirAttributes = { attributes: { [Attribute]: isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom } };\n        const partMenubar = OuterContainer.parts.menubar({\n          dom: {\n            tag: 'div',\n            classes: ['tox-menubar']\n          },\n          backstage: backstages.popup,\n          onEscape: () => {\n            editor.focus();\n          }\n        });\n        const partToolbar = OuterContainer.parts.toolbar({\n          dom: {\n            tag: 'div',\n            classes: ['tox-toolbar']\n          },\n          getSink: backstages.popup.shared.getSink,\n          providers: backstages.popup.shared.providers,\n          onEscape: () => {\n            editor.focus();\n          },\n          onToolbarToggled: state => {\n            fireToggleToolbarDrawer(editor, state);\n          },\n          type: toolbarMode,\n          lazyToolbar,\n          lazyHeader: () => lazyHeader().getOrDie('Could not find header element'),\n          ...verticalDirAttributes\n        });\n        const partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n          dom: {\n            tag: 'div',\n            classes: ['tox-toolbar-overlord']\n          },\n          providers: backstages.popup.shared.providers,\n          onEscape: () => {\n            editor.focus();\n          },\n          type: toolbarMode\n        });\n        const hasMultipleToolbar = isMultipleToolbars(editor);\n        const hasToolbar = isToolbarEnabled(editor);\n        const hasMenubar = isMenubarEnabled(editor);\n        const shouldHavePromotion = promotionEnabled(editor);\n        const partPromotion = makePromotion();\n        const hasAnyContents = hasMultipleToolbar || hasToolbar || hasMenubar;\n        const getPartToolbar = () => {\n          if (hasMultipleToolbar) {\n            return [partMultipleToolbar];\n          } else if (hasToolbar) {\n            return [partToolbar];\n          } else {\n            return [];\n          }\n        };\n        const menubarCollection = shouldHavePromotion ? [\n          partPromotion,\n          partMenubar\n        ] : [partMenubar];\n        return OuterContainer.parts.header({\n          dom: {\n            tag: 'div',\n            classes: ['tox-editor-header'].concat(hasAnyContents ? [] : ['tox-editor-header--empty']),\n            ...verticalDirAttributes\n          },\n          components: flatten([\n            hasMenubar ? menubarCollection : [],\n            getPartToolbar(),\n            useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n          ]),\n          sticky: isStickyToolbar(editor),\n          editor,\n          sharedBackstage: backstages.popup.shared\n        });\n      };\n      const makePromotion = () => {\n        return OuterContainer.parts.promotion({\n          dom: {\n            tag: 'div',\n            classes: ['tox-promotion']\n          }\n        });\n      };\n      const makeSidebarDefinition = () => {\n        const partSocket = OuterContainer.parts.socket({\n          dom: {\n            tag: 'div',\n            classes: ['tox-edit-area']\n          }\n        });\n        const partSidebar = OuterContainer.parts.sidebar({\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar']\n          }\n        });\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar-wrap']\n          },\n          components: [\n            partSocket,\n            partSidebar\n          ]\n        };\n      };\n      const renderDialogUi = () => {\n        const uiContainer = getUiContainer(editor);\n        const isGridUiContainer = eq(body(), uiContainer) && get$e(uiContainer, 'display') === 'grid';\n        const sinkSpec = {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(deviceClasses),\n            attributes: { ...global$8.isRtl() ? { dir: 'rtl' } : {} }\n          },\n          behaviours: derive$1([Positioning.config({ useFixed: () => header.isDocked(lazyHeader) })])\n        };\n        const reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), comp => {\n              set$8(comp.element, 'width', document.body.clientWidth + 'px');\n            })])\n        };\n        const sink = build$1(deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {}));\n        const uiMothership = takeover(sink);\n        lazyDialogMothership.set(uiMothership);\n        return {\n          sink,\n          mothership: uiMothership\n        };\n      };\n      const renderPopupUi = () => {\n        const sinkSpec = {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-silver-popup-sink',\n              'tox-tinymce-aux'\n            ].concat(deviceClasses),\n            attributes: { ...global$8.isRtl() ? { dir: 'rtl' } : {} }\n          },\n          behaviours: derive$1([Positioning.config({\n              useFixed: () => header.isDocked(lazyHeader),\n              getBounds: () => setupForTheme.getPopupSinkBounds()\n            })])\n        };\n        const sink = build$1(sinkSpec);\n        const uiMothership = takeover(sink);\n        lazyPopupMothership.set(uiMothership);\n        return {\n          sink,\n          mothership: uiMothership\n        };\n      };\n      const renderMainUi = () => {\n        const partHeader = makeHeaderPart();\n        const sidebarContainer = makeSidebarDefinition();\n        const partThrobber = OuterContainer.parts.throbber({\n          dom: {\n            tag: 'div',\n            classes: ['tox-throbber']\n          },\n          backstage: backstages.popup\n        });\n        const partViewWrapper = OuterContainer.parts.viewWrapper({ backstage: backstages.popup });\n        const statusbar = useStatusBar(editor) && !isInline ? Optional.some(renderStatusbar(editor, backstages.popup.shared.providers)) : Optional.none();\n        const editorComponents = flatten([\n          isToolbarBottom ? [] : [partHeader],\n          isInline ? [] : [sidebarContainer],\n          isToolbarBottom ? [partHeader] : []\n        ]);\n        const editorContainer = OuterContainer.parts.editorContainer({\n          components: flatten([\n            editorComponents,\n            isInline ? [] : [\n              memBottomAnchorBar.asSpec(),\n              ...statusbar.toArray()\n            ]\n          ])\n        });\n        const isHidden = isDistractionFree(editor);\n        const attributes = {\n          role: 'application',\n          ...global$8.isRtl() ? { dir: 'rtl' } : {},\n          ...isHidden ? { 'aria-hidden': 'true' } : {}\n        };\n        const outerContainer = build$1(OuterContainer.sketch({\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-tinymce'\n            ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses),\n            styles: {\n              visibility: 'hidden',\n              ...isHidden ? {\n                opacity: '0',\n                border: '0'\n              } : {}\n            },\n            attributes\n          },\n          components: [\n            editorContainer,\n            ...isInline ? [] : [partViewWrapper],\n            partThrobber\n          ],\n          behaviours: derive$1([\n            receivingConfig(),\n            Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n            Keying.config({\n              mode: 'cyclic',\n              selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n            })\n          ])\n        }));\n        const mothership = takeover(outerContainer);\n        lazyMothership.set(mothership);\n        return {\n          mothership,\n          outerContainer\n        };\n      };\n      const setEditorSize = outerContainer => {\n        const parsedHeight = numToPx(getHeightWithFallback(editor));\n        const parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue$1('div', 'width', parsedWidth)) {\n            set$8(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue$1('div', 'height', parsedHeight)) {\n            set$8(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$8(outerContainer.element, 'height', '400px');\n          }\n        }\n        return parsedHeight;\n      };\n      const setupShortcutsAndCommands = outerContainer => {\n        editor.addShortcut('alt+F9', 'focus menubar', () => {\n          OuterContainer.focusMenubar(outerContainer);\n        });\n        editor.addShortcut('alt+F10', 'focus toolbar', () => {\n          OuterContainer.focusToolbar(outerContainer);\n        });\n        editor.addCommand('ToggleToolbarDrawer', (_ui, options) => {\n          if (options === null || options === void 0 ? void 0 : options.skipFocus) {\n            OuterContainer.toggleToolbarDrawerWithoutFocusing(outerContainer);\n          } else {\n            OuterContainer.toggleToolbarDrawer(outerContainer);\n          }\n        });\n        editor.addQueryStateHandler('ToggleToolbarDrawer', () => OuterContainer.isToolbarDrawerToggled(outerContainer));\n      };\n      const renderUIWithRefs = uiRefs => {\n        const {mainUi, popupUi, uiMotherships} = uiRefs;\n        map$1(getToolbarGroups(editor), (toolbarGroupButtonConfig, name) => {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        const {buttons, menuItems, contextToolbars, sidebars, views} = editor.ui.registry.getAll();\n        const toolbarOpt = getMultipleToolbarsOption(editor);\n        const rawUiConfig = {\n          menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(() => getToolbar(editor)),\n          allowToolbarGroups: toolbarMode === ToolbarMode$1.floating,\n          buttons,\n          sidebar: sidebars,\n          views\n        };\n        setupShortcutsAndCommands(mainUi.outerContainer);\n        setup$b(editor, mainUi.mothership, uiMotherships);\n        header.setup(editor, backstages.popup.shared, lazyHeader);\n        setup$6(editor, backstages.popup);\n        setup$5(editor, backstages.popup.shared.getSink, backstages.popup);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstages.popup.shared);\n        register$9(editor, contextToolbars, popupUi.sink, { backstage: backstages.popup });\n        setup$4(editor, popupUi.sink);\n        const elm = editor.getElement();\n        const height = setEditorSize(mainUi.outerContainer);\n        const args = {\n          targetNode: elm,\n          height\n        };\n        return mode.render(editor, uiRefs, rawUiConfig, backstages.popup, args);\n      };\n      const reuseDialogUiForPopuUi = dialogUi => {\n        lazyPopupMothership.set(dialogUi.mothership);\n        return dialogUi;\n      };\n      const renderUI = () => {\n        const mainUi = renderMainUi();\n        const dialogUi = renderDialogUi();\n        const popupUi = isSplitUiMode(editor) ? renderPopupUi() : reuseDialogUiForPopuUi(dialogUi);\n        lazyUiRefs.dialogUi.set(dialogUi);\n        lazyUiRefs.popupUi.set(popupUi);\n        lazyUiRefs.mainUi.set(mainUi);\n        const uiRefs = {\n          popupUi,\n          dialogUi,\n          mainUi,\n          uiMotherships: lazyUiRefs.getUiMotherships()\n        };\n        return renderUIWithRefs(uiRefs);\n      };\n      return {\n        popups: {\n          backstage: backstages.popup,\n          getMothership: () => getLazyMothership('popups', lazyPopupMothership)\n        },\n        dialogs: {\n          backstage: backstages.dialog,\n          getMothership: () => getLazyMothership('dialogs', lazyDialogMothership)\n        },\n        renderUI\n      };\n    };\n\n    const labelledBy = (labelledElement, labelElement) => {\n      const labelId = getOpt(labelledElement, 'id').fold(() => {\n        const id = generate$6('dialog-label');\n        set$9(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$9(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    const schema$2 = constant$1([\n      required$1('lazySink'),\n      option$3('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('firstTabstop', 0),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    const basic = { sketch: identity };\n    const parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: (detail, spec) => {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: handle => {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external({\n        factory: {\n          sketch: (spec, detail) => ({\n            ...spec,\n            dom: detail.dom,\n            components: detail.components\n          })\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    const factory$4 = (detail, components, spec, externals) => {\n      const dialogComp = value$2();\n      const showDialog = dialog => {\n        dialogComp.set(dialog);\n        const sink = detail.lazySink(dialog).getOrDie();\n        const externalBlocker = externals.blocker();\n        const blocker = sink.getSystem().build({\n          ...externalBlocker,\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), () => {\n                Blocking.isBlocked(dialog) ? noop() : Keying.focusIn(dialog);\n              })])\n          ])\n        });\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      const hideDialog = dialog => {\n        dialogComp.clear();\n        parent(dialog.element).each(blockerDom => {\n          dialog.getSystem().getByDom(blockerDom).each(blocker => {\n            detach(blocker);\n          });\n        });\n      };\n      const getDialogBody = dialog => getPartOrDie(dialog, detail, 'body');\n      const getDialogFooter = dialog => getPart(dialog, detail, 'footer');\n      const setBusy = (dialog, getBusySpec) => {\n        Blocking.block(dialog, getBusySpec);\n      };\n      const setIdle = dialog => {\n        Blocking.unblock(dialog);\n      };\n      const modalEventsId = generate$6('modal-events');\n      const eventOrder = {\n        ...detail.eventOrder,\n        [attachedToDom()]: [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || [])\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle,\n          setBusy\n        },\n        eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt,\n            firstTabstop: detail.firstTabstop\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(c => {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n            })])\n        ])\n      };\n    };\n    const ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: (apis, dialog) => {\n          apis.show(dialog);\n        },\n        hide: (apis, dialog) => {\n          apis.hide(dialog);\n        },\n        getBody: (apis, dialog) => apis.getBody(dialog),\n        getFooter: (apis, dialog) => apis.getFooter(dialog),\n        setBusy: (apis, dialog, getBusySpec) => {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: (apis, dialog) => {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    const dialogToggleMenuItemSchema = objOf([\n      type,\n      name$1\n    ].concat(commonMenuItemFields));\n    const dialogToggleMenuItemDataProcessor = boolean;\n\n    const baseFooterButtonFields = [\n      generatedName('button'),\n      optionalIcon,\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      primary,\n      enabled,\n      optionStringEnum('buttonType', [\n        'primary',\n        'secondary'\n      ])\n    ];\n    const dialogFooterButtonFields = [\n      ...baseFooterButtonFields,\n      text\n    ];\n    const normalFooterButtonFields = [\n      requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ]),\n      ...dialogFooterButtonFields\n    ];\n    const menuFooterButtonFields = [\n      requiredStringEnum('type', ['menu']),\n      optionalText,\n      optionalTooltip,\n      optionalIcon,\n      requiredArrayOf('items', dialogToggleMenuItemSchema),\n      ...baseFooterButtonFields\n    ];\n    const toggleButtonSpecFields = [\n      ...baseFooterButtonFields,\n      requiredStringEnum('type', ['togglebutton']),\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      defaultedBoolean('active', false)\n    ];\n    const dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields,\n      togglebutton: toggleButtonSpecFields\n    });\n\n    const alertBannerFields = [\n      type,\n      text,\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      icon,\n      defaulted('url', '')\n    ];\n    const alertBannerSchema = objOf(alertBannerFields);\n\n    const createBarFields = itemsField => [\n      type,\n      itemsField\n    ];\n\n    const buttonFields = [\n      type,\n      text,\n      enabled,\n      generatedName('button'),\n      optionalIcon,\n      borderless,\n      optionStringEnum('buttonType', [\n        'primary',\n        'secondary',\n        'toolbar'\n      ]),\n      primary\n    ];\n    const buttonSchema = objOf(buttonFields);\n\n    const formComponentFields = [\n      type,\n      name$1\n    ];\n    const formComponentWithLabelFields = formComponentFields.concat([optionalLabel]);\n\n    const checkboxFields = formComponentFields.concat([\n      label,\n      enabled\n    ]);\n    const checkboxSchema = objOf(checkboxFields);\n    const checkboxDataProcessor = boolean;\n\n    const collectionFields = formComponentWithLabelFields.concat([defaultedColumns('auto')]);\n    const collectionSchema = objOf(collectionFields);\n    const collectionDataProcessor = arrOfObj([\n      value$1,\n      text,\n      icon\n    ]);\n\n    const colorInputFields = formComponentWithLabelFields.concat([defaultedString('storageKey', 'default')]);\n    const colorInputSchema = objOf(colorInputFields);\n    const colorInputDataProcessor = string;\n\n    const colorPickerFields = formComponentWithLabelFields;\n    const colorPickerSchema = objOf(colorPickerFields);\n    const colorPickerDataProcessor = string;\n\n    const customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      optionFunction('onFocus'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    const customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    const customEditorSchema = valueOf(v => asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(() => asRaw('customeditor.new', objOfOnly(customEditorFields), v)));\n    const customEditorDataProcessor = string;\n\n    const dropZoneFields = formComponentWithLabelFields;\n    const dropZoneSchema = objOf(dropZoneFields);\n    const dropZoneDataProcessor = arrOfVal();\n\n    const createGridFields = itemsField => [\n      type,\n      requiredNumber('columns'),\n      itemsField\n    ];\n\n    const htmlPanelFields = [\n      type,\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    const htmlPanelSchema = objOf(htmlPanelFields);\n\n    const iframeFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('border', false),\n      defaultedBoolean('sandboxed', true),\n      defaultedBoolean('streamContent', false),\n      defaultedBoolean('transparent', true)\n    ]);\n    const iframeSchema = objOf(iframeFields);\n    const iframeDataProcessor = string;\n\n    const imagePreviewSchema = objOf(formComponentFields.concat([optionString('height')]));\n    const imagePreviewDataProcessor = objOf([\n      requiredString('url'),\n      optionNumber('zoom'),\n      optionNumber('cachedWidth'),\n      optionNumber('cachedHeight')\n    ]);\n\n    const inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      enabled\n    ]);\n    const inputSchema = objOf(inputFields);\n    const inputDataProcessor = string;\n\n    const createLabelFields = itemsField => [\n      type,\n      label,\n      itemsField,\n      defaultedStringEnum('align', 'start', [\n        'start',\n        'center',\n        'end'\n      ])\n    ];\n\n    const listBoxSingleItemFields = [\n      text,\n      value$1\n    ];\n    const listBoxNestedItemFields = [\n      text,\n      requiredArrayOf('items', thunkOf('items', () => listBoxItemSchema))\n    ];\n    const listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    const listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      enabled\n    ]);\n    const listBoxSchema = objOf(listBoxFields);\n    const listBoxDataProcessor = string;\n\n    const selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        text,\n        value$1\n      ]),\n      defaultedNumber('size', 1),\n      enabled\n    ]);\n    const selectBoxSchema = objOf(selectBoxFields);\n    const selectBoxDataProcessor = string;\n\n    const sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      enabled\n    ]);\n    const sizeInputSchema = objOf(sizeInputFields);\n    const sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    const sliderFields = formComponentFields.concat([\n      label,\n      defaultedNumber('min', 0),\n      defaultedNumber('max', 0)\n    ]);\n    const sliderSchema = objOf(sliderFields);\n    const sliderInputDataProcessor = number;\n\n    const tableFields = [\n      type,\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    const tableSchema = objOf(tableFields);\n\n    const textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      enabled\n    ]);\n    const textAreaSchema = objOf(textAreaFields);\n    const textAreaDataProcessor = string;\n\n    const baseTreeItemFields = [\n      requiredStringEnum('type', [\n        'directory',\n        'leaf'\n      ]),\n      title,\n      requiredString('id'),\n      optionOf('menu', MenuButtonSchema)\n    ];\n    const treeItemLeafFields = baseTreeItemFields;\n    const treeItemLeafSchema = objOf(treeItemLeafFields);\n    const treeItemDirectoryFields = baseTreeItemFields.concat([requiredArrayOf('children', thunkOf('children', () => {\n        return choose$2('type', {\n          directory: treeItemDirectorySchema,\n          leaf: treeItemLeafSchema\n        });\n      }))]);\n    const treeItemDirectorySchema = objOf(treeItemDirectoryFields);\n    const treeItemSchema = choose$2('type', {\n      directory: treeItemDirectorySchema,\n      leaf: treeItemLeafSchema\n    });\n    const treeFields = [\n      type,\n      requiredArrayOf('items', treeItemSchema),\n      optionFunction('onLeafAction'),\n      optionFunction('onToggleExpand'),\n      defaultedArrayOf('defaultExpandedIds', [], string),\n      optionString('defaultSelectedId')\n    ];\n    const treeSchema = objOf(treeFields);\n\n    const urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      enabled,\n      optionString('picker_text')\n    ]);\n    const urlInputSchema = objOf(urlInputFields);\n    const urlInputDataProcessor = objOf([\n      value$1,\n      defaultedMeta\n    ]);\n\n    const createItemsField = name => field$1('items', 'items', required$2(), arrOf(valueOf(v => asRaw(`Checking item of ${ name }`, itemSchema, v).fold(sErr => Result.error(formatError(sErr)), passValue => Result.value(passValue)))));\n    const itemSchema = valueThunk(() => choose$2('type', {\n      alertbanner: alertBannerSchema,\n      bar: objOf(createBarFields(createItemsField('bar'))),\n      button: buttonSchema,\n      checkbox: checkboxSchema,\n      colorinput: colorInputSchema,\n      colorpicker: colorPickerSchema,\n      dropzone: dropZoneSchema,\n      grid: objOf(createGridFields(createItemsField('grid'))),\n      iframe: iframeSchema,\n      input: inputSchema,\n      listbox: listBoxSchema,\n      selectbox: selectBoxSchema,\n      sizeinput: sizeInputSchema,\n      slider: sliderSchema,\n      textarea: textAreaSchema,\n      urlinput: urlInputSchema,\n      customeditor: customEditorSchema,\n      htmlpanel: htmlPanelSchema,\n      imagepreview: imagePreviewSchema,\n      collection: collectionSchema,\n      label: objOf(createLabelFields(createItemsField('label'))),\n      table: tableSchema,\n      tree: treeSchema,\n      panel: panelSchema\n    }));\n    const panelFields = [\n      type,\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    const panelSchema = objOf(panelFields);\n\n    const tabFields = [\n      generatedName('tab'),\n      title,\n      requiredArrayOf('items', itemSchema)\n    ];\n    const tabPanelFields = [\n      type,\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    const tabPanelSchema = objOf(tabPanelFields);\n\n    const dialogButtonFields = dialogFooterButtonFields;\n    const dialogButtonSchema = dialogFooterButtonSchema;\n    const dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      defaultedArrayOf('buttons', [], dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onTabChange', noop)\n    ]);\n    const createDialog = spec => asRaw('dialog', dialogSchema, spec);\n\n    const urlDialogButtonSchema = objOf([\n      requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ]),\n      ...dialogButtonFields\n    ]);\n    const urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    const createUrlDialog = spec => asRaw('dialog', urlDialogSchema, spec);\n\n    const getAllObjects = obj => {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    const isNamedItem = obj => isString(obj.type) && isString(obj.name);\n    const dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      imagepreview: imagePreviewDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      slider: sliderInputDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    const getDataProcessor = item => Optional.from(dataProcessors[item.type]);\n    const getNamedItems = structure => filter$2(getAllObjects(structure), isNamedItem);\n\n    const createDataValidator = structure => {\n      const namedItems = getNamedItems(structure);\n      const fields = bind$3(namedItems, item => getDataProcessor(item).fold(() => [], schema => [requiredOf(item.name, schema)]));\n      return objOf(fields);\n    };\n\n    const extract = structure => {\n      var _a;\n      const internalDialog = getOrDie(createDialog(structure));\n      const dataValidator = createDataValidator(structure);\n      const initialData = (_a = structure.initialData) !== null && _a !== void 0 ? _a : {};\n      return {\n        internalDialog,\n        dataValidator,\n        initialData\n      };\n    };\n    const DialogManager = {\n      open: (factory, structure) => {\n        const extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: (factory, structure) => {\n        const internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: structure => extract(structure)\n    };\n\n    const events = (reflectingConfig, reflectingState) => {\n      const update = (component, data) => {\n        reflectingConfig.updateState.each(updateState => {\n          const newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(renderComponents => {\n          const newComponents = renderComponents(data, reflectingState.get());\n          const replacer = reflectingConfig.reuseDom ? withReuse : withoutReuse;\n          replacer(component, newComponents);\n        });\n      };\n      return derive$2([\n        run$1(receive(), (component, message) => {\n          const receivingData = message;\n          if (!receivingData.universal) {\n            const channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached((comp, _se) => {\n          reflectingConfig.initialData.each(rawData => {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    const getState = (component, replaceConfig, reflectState) => reflectState;\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option$3('renderComponents'),\n      option$3('updateState'),\n      option$3('initialData'),\n      defaultedBoolean('reuseDom', true)\n    ];\n\n    const init = () => {\n      const cell = Cell(Optional.none());\n      const clear = () => cell.set(Optional.none());\n      const readState = () => cell.get().getOr('none');\n      return {\n        readState,\n        get: cell.get,\n        set: cell.set,\n        clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    const Reflecting = create$4({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    const toValidValues = values => {\n      const errors = [];\n      const result = {};\n      each(values, (value, name) => {\n        value.fold(() => {\n          errors.push(name);\n        }, v => {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    const renderBodyPanel = (spec, dialogData, backstage) => {\n      const memForm = record(Form.sketch(parts => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form'].concat(spec.classes)\n        },\n        components: map$2(spec.items, item => interpretInForm(parts, item, dialogData, backstage))\n      })));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          memento(memForm, {\n            postprocess: formValue => toValidValues(formValue).fold(err => {\n              console.error(err);\n              return {};\n            }, identity)\n          }),\n          config('dialog-body-panel', [run$1(focusin(), (comp, se) => {\n              comp.getSystem().broadcastOn([dialogFocusShiftedChannel], { newFocus: Optional.some(se.event.target) });\n            })])\n        ])\n      };\n    };\n\n    const factory$3 = (detail, _spec) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components: detail.components,\n      events: events$a(detail.action),\n      behaviours: augment(detail.tabButtonBehaviours, [\n        Focusing.config({}),\n        Keying.config({\n          mode: 'execution',\n          useSpace: true,\n          useEnter: true\n        }),\n        Representing.config({\n          store: {\n            mode: 'memory',\n            initialValue: detail.value\n          }\n        })\n      ]),\n      domModification: detail.domModification\n    });\n    const TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(() => ({\n          attributes: {\n            'role': 'tab',\n            'id': generate$6('aria'),\n            'aria-selected': 'false'\n          }\n        })), anyValue()),\n        option$3('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    const schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    const tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: barDetail => {\n        const dismissTab$1 = (tabbar, button) => {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar,\n            button\n          });\n        };\n        const changeTab$1 = (tabbar, button) => {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar,\n            button\n          });\n        };\n        return {\n          action: button => {\n            const tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            const activeButton = Highlighting.isHighlighted(tabbar, button);\n            const response = (() => {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            })();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    const parts$1 = constant$1([tabsPart]);\n\n    const factory$2 = (detail, components, _spec, _externals) => ({\n      'uid': detail.uid,\n      'dom': detail.dom,\n      components,\n      'debug.sketcher': 'Tabbar',\n      'domModification': { attributes: { role: 'tablist' } },\n      'behaviours': augment(detail.tabbarBehaviours, [\n        Highlighting.config({\n          highlightClass: detail.markers.selectedClass,\n          itemClass: detail.markers.tabClass,\n          onHighlight: (tabbar, tab) => {\n            set$9(tab.element, 'aria-selected', 'true');\n          },\n          onDehighlight: (tabbar, tab) => {\n            set$9(tab.element, 'aria-selected', 'false');\n          }\n        }),\n        Keying.config({\n          mode: 'flow',\n          getInitial: tabbar => {\n            return Highlighting.getHighlighted(tabbar).map(tab => tab.element);\n          },\n          selector: '.' + detail.markers.tabClass,\n          executeOnMove: true\n        })\n      ])\n    });\n    const Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    const factory$1 = (detail, _spec) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n      domModification: { attributes: { role: 'tabpanel' } }\n    });\n    const Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    const schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    const barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: detail => {\n        return { tabs: detail.tabs };\n      }\n    });\n    const viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    const parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    const factory = (detail, components, _spec, _externals) => {\n      const changeTab$1 = button => {\n        const tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(tabview => {\n          const tabWithValue = find$5(detail.tabs, t => t.value === tabValue);\n          tabWithValue.each(tabData => {\n            const panel = tabData.view();\n            getOpt(button.element, 'id').each(id => {\n              set$9(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      const changeTabBy = (section, byPred) => {\n        getPart(section, detail, 'tabbar').each(tabbar => {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: get$3(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached((section, _simulatedEvent) => {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), (section, simulatedEvent) => {\n              const button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), (section, simulatedEvent) => {\n              const button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: section => {\n            return getPart(section, detail, 'tabview').map(tabview => Replacing.contents(tabview)).getOr([]);\n          },\n          showTab: (section, tabKey) => {\n            const getTabIfNotActive = tabbar => {\n              const candidates = Highlighting.getCandidates(tabbar);\n              const optTab = find$5(candidates, c => Representing.getValue(c) === tabKey);\n              return optTab.filter(tab => !Highlighting.isHighlighted(tabbar, tab));\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    const TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory,\n      apis: {\n        getViewItems: (apis, component) => apis.getViewItems(component),\n        showTab: (apis, component, tabKey) => {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    const measureHeights = (allTabs, tabview, tabviewComp) => map$2(allTabs, (_tab, i) => {\n      Replacing.set(tabviewComp, allTabs[i].view());\n      const rect = tabview.dom.getBoundingClientRect();\n      Replacing.set(tabviewComp, []);\n      return rect.height;\n    });\n    const getMaxHeight = heights => head(sort(heights, (a, b) => {\n      if (a > b) {\n        return -1;\n      } else if (a < b) {\n        return +1;\n      } else {\n        return 0;\n      }\n    }));\n    const getMaxTabviewHeight = (dialog, tabview, tablist) => {\n      const documentElement$1 = documentElement(dialog).dom;\n      const rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      const isFixed = get$e(rootElm, 'position') === 'fixed';\n      let maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      const tabviewHeight = get$d(tabview);\n      const isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$c(tablist);\n      const currentTabHeight = isTabListBeside ? Math.max(get$d(tablist), tabviewHeight) : tabviewHeight;\n      const dialogTopMargin = parseInt(get$e(dialog, 'margin-top'), 10) || 0;\n      const dialogBottomMargin = parseInt(get$e(dialog, 'margin-bottom'), 10) || 0;\n      const dialogHeight = get$d(dialog) + dialogTopMargin + dialogBottomMargin;\n      const chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    const showTab = (allTabs, comp) => {\n      head(allTabs).each(tab => TabSection.showTab(comp, tab.value));\n    };\n    const setTabviewHeight = (tabview, height) => {\n      set$8(tabview, 'height', height + 'px');\n      set$8(tabview, 'flex-basis', height + 'px');\n    };\n    const updateTabviewHeight = (dialogBody, tabview, maxTabHeight) => {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(dialog => {\n        descendant(dialog, '[role=\"tablist\"]').each(tablist => {\n          maxTabHeight.get().map(height => {\n            set$8(tabview, 'height', '0');\n            set$8(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(height => {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    const getTabview = dialog => descendant(dialog, '[role=\"tabpanel\"]');\n    const smartMode = allTabs => {\n      const maxTabHeight = value$2();\n      const extraEvents = [\n        runOnAttached(comp => {\n          const dialog = comp.element;\n          getTabview(dialog).each(tabview => {\n            set$8(tabview, 'visibility', 'hidden');\n            comp.getSystem().getByDom(tabview).toOptional().each(tabviewComp => {\n              const heights = measureHeights(allTabs, tabview, tabviewComp);\n              const maxTabHeightOpt = getMaxHeight(heights);\n              maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n            });\n            updateTabviewHeight(dialog, tabview, maxTabHeight);\n            remove$6(tabview, 'visibility');\n            showTab(allTabs, comp);\n            requestAnimationFrame(() => {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          });\n        }),\n        run$1(windowResize(), comp => {\n          const dialog = comp.element;\n          getTabview(dialog).each(tabview => {\n            updateTabviewHeight(dialog, tabview, maxTabHeight);\n          });\n        }),\n        run$1(formResizeEvent, (comp, _se) => {\n          const dialog = comp.element;\n          getTabview(dialog).each(tabview => {\n            const oldFocus = active$1(getRootNode(tabview));\n            set$8(tabview, 'visibility', 'hidden');\n            const oldHeight = getRaw(tabview, 'height').map(h => parseInt(h, 10));\n            remove$6(tabview, 'height');\n            remove$6(tabview, 'flex-basis');\n            const newHeight = tabview.dom.getBoundingClientRect().height;\n            const hasGrown = oldHeight.forall(h => newHeight > h);\n            if (hasGrown) {\n              maxTabHeight.set(newHeight);\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            } else {\n              oldHeight.each(h => {\n                setTabviewHeight(tabview, h);\n              });\n            }\n            remove$6(tabview, 'visibility');\n            oldFocus.each(focus$3);\n          });\n        })\n      ];\n      const selectFirst = false;\n      return {\n        extraEvents,\n        selectFirst\n      };\n    };\n\n    const SendDataToSectionChannel = 'send-data-to-section';\n    const SendDataToViewChannel = 'send-data-to-view';\n    const renderTabPanel = (spec, dialogData, backstage) => {\n      const storedValue = Cell({});\n      const updateDataWithForm = form => {\n        const formData = Representing.getValue(form);\n        const validData = toValidValues(formData).getOr({});\n        const currentData = storedValue.get();\n        const newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      const setDataOnForm = form => {\n        const tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      const oldTab = Cell(null);\n      const allTabs = map$2(spec.tabs, tab => {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item']\n          },\n          components: [text$2(backstage.shared.providers.translate(tab.title))],\n          view: () => {\n            return [Form.sketch(parts => ({\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-form']\n                },\n                components: map$2(tab.items, item => interpretInForm(parts, item, dialogData, backstage)),\n                formBehaviours: derive$1([\n                  Keying.config({\n                    mode: 'acyclic',\n                    useTabstopAt: not(isPseudoStop)\n                  }),\n                  config('TabView.form.events', [\n                    runOnAttached(setDataOnForm),\n                    runOnDetached(updateDataWithForm)\n                  ]),\n                  Receiving.config({\n                    channels: wrapAll([\n                      {\n                        key: SendDataToSectionChannel,\n                        value: { onReceive: updateDataWithForm }\n                      },\n                      {\n                        key: SendDataToViewChannel,\n                        value: { onReceive: setDataOnForm }\n                      }\n                    ])\n                  })\n                ])\n              }))];\n          }\n        };\n      });\n      const tabMode = smartMode(allTabs);\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: (section, button, _viewItems) => {\n          const name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({ find: comp => head(TabSection.getViewItems(comp)) }),\n          withComp(Optional.none(), tsection => {\n            tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n            return storedValue.get();\n          }, (tsection, value) => {\n            storedValue.set(value);\n            tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n          })\n        ])\n      });\n    };\n\n    const renderBody = (spec, dialogId, contentId, backstage, ariaAttrs) => {\n      const renderComponents = incoming => {\n        const body = incoming.body;\n        switch (body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(body, incoming.initialData, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(body, incoming.initialData, backstage)];\n          }\n        }\n      };\n      const updateState = (_comp, incoming) => Optional.some({ isTabPanel: () => incoming.body.type === 'tabpanel' });\n      const ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: {\n            ...contentId.map(x => ({ id: x })).getOr({}),\n            ...ariaAttrs ? ariaAttributes : {}\n          }\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: `${ bodyChannel }-${ dialogId }`,\n            updateState,\n            renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    const renderInlineBody = (spec, dialogId, contentId, backstage, ariaAttrs) => renderBody(spec, dialogId, Optional.some(contentId), backstage, ariaAttrs);\n    const renderModalBody = (spec, dialogId, backstage) => {\n      const bodySpec = renderBody(spec, dialogId, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    const renderIframeBody = spec => {\n      const bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft(Optional.none(), {\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    const isTouch = global$5.deviceType.isTouch();\n    const hiddenHeader = (title, close) => ({\n      dom: {\n        tag: 'div',\n        styles: { display: 'none' },\n        classes: ['tox-dialog__header']\n      },\n      components: [\n        title,\n        close\n      ]\n    });\n    const pClose = (onClose, providersBackstage) => ModalDialog.parts.close(Button.sketch({\n      dom: {\n        tag: 'button',\n        classes: [\n          'tox-button',\n          'tox-button--icon',\n          'tox-button--naked'\n        ],\n        attributes: {\n          'type': 'button',\n          'aria-label': providersBackstage.translate('Close')\n        }\n      },\n      action: onClose,\n      buttonBehaviours: derive$1([Tabstopping.config({})])\n    }));\n    const pUntitled = () => ModalDialog.parts.title({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__title'],\n        innerHtml: '',\n        styles: { display: 'none' }\n      }\n    });\n    const pBodyMessage = (message, providersBackstage) => ModalDialog.parts.body({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__body']\n      },\n      components: [{\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-content']\n          },\n          components: [{ dom: fromHtml(`<p>${ sanitizeHtmlString(providersBackstage.translate(message)) }</p>`) }]\n        }]\n    });\n    const pFooter = buttons => ModalDialog.parts.footer({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__footer']\n      },\n      components: buttons\n    });\n    const pFooterGroup = (startButtons, endButtons) => [\n      Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer-start']\n        },\n        components: startButtons\n      }),\n      Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer-end']\n        },\n        components: endButtons\n      })\n    ];\n    const renderDialog$1 = spec => {\n      const dialogClass = 'tox-dialog';\n      const blockerClass = dialogClass + '-wrap';\n      const blockerBackdropClass = blockerClass + '__backdrop';\n      const scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: comp => {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: elem => !isPseudoStop(elem),\n        firstTabstop: spec.firstTabstop,\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: {\n            position: 'relative',\n            ...spec.extraStyles\n          }\n        },\n        components: [\n          spec.header,\n          spec.body,\n          ...spec.footer.toArray()\n        ],\n        parts: {\n          blocker: {\n            dom: fromHtml(`<div class=\"${ blockerClass }\"></div>`),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([\n            runOnSource(focusin(), (comp, _se) => {\n              Blocking.isBlocked(comp) ? noop() : Keying.focusIn(comp);\n            }),\n            run$1(focusShifted(), (comp, se) => {\n              comp.getSystem().broadcastOn([dialogFocusShiftedChannel], { newFocus: se.event.newFocus });\n            })\n          ])),\n          config('scroll-lock', [\n            runOnAttached(() => {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(() => {\n              remove$2(body(), scrollLockClass);\n            })\n          ]),\n          ...spec.extraBehaviours\n        ]),\n        eventOrder: {\n          [execute$5()]: ['dialog-events'],\n          [attachedToDom()]: [\n            'scroll-lock',\n            'dialog-events',\n            'alloy.base.behaviour'\n          ],\n          [detachedFromDom()]: [\n            'alloy.base.behaviour',\n            'dialog-events',\n            'scroll-lock'\n          ],\n          ...spec.eventOrder\n        }\n      });\n    };\n\n    const renderClose = providersBackstage => Button.sketch({\n      dom: {\n        tag: 'button',\n        classes: [\n          'tox-button',\n          'tox-button--icon',\n          'tox-button--naked'\n        ],\n        attributes: {\n          'type': 'button',\n          'aria-label': providersBackstage.translate('Close'),\n          'data-mce-name': 'close'\n        }\n      },\n      buttonBehaviours: derive$1([\n        Tabstopping.config({}),\n        Tooltipping.config(providersBackstage.tooltips.getConfig({ tooltipText: providersBackstage.translate('Close') }))\n      ]),\n      components: [render$3('close', {\n          tag: 'span',\n          classes: ['tox-icon']\n        }, providersBackstage.icons)],\n      action: comp => {\n        emit(comp, formCancelEvent);\n      }\n    });\n    const renderTitle = (spec, dialogId, titleId, providersBackstage) => {\n      const renderComponents = data => [text$2(providersBackstage.translate(data.title))];\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: { ...titleId.map(x => ({ id: x })).getOr({}) }\n        },\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: `${ titleChannel }-${ dialogId }`,\n            initialData: spec,\n            renderComponents\n          })])\n      };\n    };\n    const renderDragHandle = () => ({ dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') });\n    const renderInlineHeader = (spec, dialogId, titleId, providersBackstage) => Container.sketch({\n      dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n      components: [\n        renderTitle(spec, dialogId, Optional.some(titleId), providersBackstage),\n        renderDragHandle(),\n        renderClose(providersBackstage)\n      ],\n      containerBehaviours: derive$1([Dragging.config({\n          mode: 'mouse',\n          blockerClass: 'blocker',\n          getTarget: handle => {\n            return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n          },\n          snaps: {\n            getSnapPoints: () => [],\n            leftAttr: 'data-drag-left',\n            topAttr: 'data-drag-top'\n          }\n        })])\n    });\n    const renderModalHeader = (spec, dialogId, providersBackstage) => {\n      const pTitle = ModalDialog.parts.title(renderTitle(spec, dialogId, Optional.none(), providersBackstage));\n      const pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      const pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      const components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components\n      });\n    };\n\n    const getHeader = (title, dialogId, backstage) => renderModalHeader({\n      title: backstage.shared.providers.translate(title),\n      draggable: backstage.dialog.isDraggableModal()\n    }, dialogId, backstage.shared.providers);\n    const getBusySpec = (message, bs, providers, headerHeight) => ({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__busy-spinner'],\n        attributes: { 'aria-label': providers.translate(message) },\n        styles: {\n          left: '0px',\n          right: '0px',\n          bottom: '0px',\n          top: `${ headerHeight.getOr(0) }px`,\n          position: 'absolute'\n        }\n      },\n      behaviours: bs,\n      components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n    });\n    const getEventExtras = (lazyDialog, providers, extra) => ({\n      onClose: () => extra.closeWindow(),\n      onBlock: blockEvent => {\n        const headerHeight = descendant(lazyDialog().element, '.tox-dialog__header').map(header => get$d(header));\n        ModalDialog.setBusy(lazyDialog(), (_comp, bs) => getBusySpec(blockEvent.message, bs, providers, headerHeight));\n      },\n      onUnblock: () => {\n        ModalDialog.setIdle(lazyDialog());\n      }\n    });\n    const fullscreenClass = 'tox-dialog--fullscreen';\n    const largeDialogClass = 'tox-dialog--width-lg';\n    const mediumDialogClass = 'tox-dialog--width-md';\n    const getDialogSizeClass = size => {\n      switch (size) {\n      case 'large':\n        return Optional.some(largeDialogClass);\n      case 'medium':\n        return Optional.some(mediumDialogClass);\n      default:\n        return Optional.none();\n      }\n    };\n    const updateDialogSizeClass = (size, component) => {\n      const dialogBody = SugarElement.fromDom(component.element.dom);\n      if (!has(dialogBody, fullscreenClass)) {\n        remove$1(dialogBody, [\n          largeDialogClass,\n          mediumDialogClass\n        ]);\n        getDialogSizeClass(size).each(dialogSizeClass => add$2(dialogBody, dialogSizeClass));\n      }\n    };\n    const toggleFullscreen = (comp, currentSize) => {\n      const dialogBody = SugarElement.fromDom(comp.element.dom);\n      const classes = get$7(dialogBody);\n      const currentSizeClass = find$5(classes, c => c === largeDialogClass || c === mediumDialogClass).or(getDialogSizeClass(currentSize));\n      toggle$3(dialogBody, [\n        fullscreenClass,\n        ...currentSizeClass.toArray()\n      ]);\n    };\n    const renderModalDialog = (spec, dialogEvents, backstage) => build$1(renderDialog$1({\n      ...spec,\n      firstTabstop: 1,\n      lazySink: backstage.shared.getSink,\n      extraBehaviours: [\n        memory({}),\n        ...spec.extraBehaviours\n      ],\n      onEscape: comp => {\n        emit(comp, formCancelEvent);\n      },\n      dialogEvents,\n      eventOrder: {\n        [receive()]: [\n          Reflecting.name(),\n          Receiving.name()\n        ],\n        [attachedToDom()]: [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ],\n        [detachedFromDom()]: [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ]\n      }\n    }));\n    const mapMenuButtons = (buttons, menuItemStates = {}) => {\n      const mapItems = button => {\n        const items = map$2(button.items, item => {\n          const cell = get$g(menuItemStates, item.name).getOr(Cell(false));\n          return {\n            ...item,\n            storage: cell\n          };\n        });\n        return {\n          ...button,\n          items\n        };\n      };\n      return map$2(buttons, button => {\n        return button.type === 'menu' ? mapItems(button) : button;\n      });\n    };\n    const extractCellsToObject = buttons => foldl(buttons, (acc, button) => {\n      if (button.type === 'menu') {\n        const menuButton = button;\n        return foldl(menuButton.items, (innerAcc, item) => {\n          innerAcc[item.name] = item.storage;\n          return innerAcc;\n        }, acc);\n      }\n      return acc;\n    }, {});\n\n    const initCommonEvents = (fireApiEvent, extras) => [\n      runWithTarget(focusin(), onFocus),\n      fireApiEvent(formCloseEvent, (_api, spec, _event, self) => {\n        active$1(getRootNode(self.element)).fold(noop, blur$1);\n        extras.onClose();\n        spec.onClose();\n      }),\n      fireApiEvent(formCancelEvent, (api, spec, _event, self) => {\n        spec.onCancel(api);\n        emit(self, formCloseEvent);\n      }),\n      run$1(formUnblockEvent, (_c, _se) => extras.onUnblock()),\n      run$1(formBlockEvent, (_c, se) => extras.onBlock(se.event))\n    ];\n    const initUrlDialog = (getInstanceApi, extras) => {\n      const fireApiEvent = (eventName, f) => run$1(eventName, (c, se) => {\n        withSpec(c, (spec, _c) => {\n          f(getInstanceApi(), spec, se.event, c);\n        });\n      });\n      const withSpec = (c, f) => {\n        Reflecting.getState(c).get().each(currentDialog => {\n          f(currentDialog, c);\n        });\n      };\n      return [\n        ...initCommonEvents(fireApiEvent, extras),\n        fireApiEvent(formActionEvent, (api, spec, event) => {\n          spec.onAction(api, { name: event.name });\n        })\n      ];\n    };\n    const initDialog = (getInstanceApi, extras, getSink) => {\n      const fireApiEvent = (eventName, f) => run$1(eventName, (c, se) => {\n        withSpec(c, (spec, _c) => {\n          f(getInstanceApi(), spec, se.event, c);\n        });\n      });\n      const withSpec = (c, f) => {\n        Reflecting.getState(c).get().each(currentDialogInit => {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return [\n        ...initCommonEvents(fireApiEvent, extras),\n        fireApiEvent(formSubmitEvent, (api, spec) => spec.onSubmit(api)),\n        fireApiEvent(formChangeEvent, (api, spec, event) => {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, (api, spec, event, component) => {\n          const focusIn = () => component.getSystem().isConnected() ? Keying.focusIn(component) : undefined;\n          const isDisabled = focused => has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(val => val === 'true');\n          const rootNode = getRootNode(component.element);\n          const current = active$1(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active$1(rootNode).fold(focusIn, focused => {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(cur => contains(focused, cur) && isDisabled(cur))) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(sink => !contains(sink.element, focused)).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, (api, spec, event) => {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(component => {\n          const api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ];\n    };\n\n    const makeButton = (button, backstage) => renderFooterButton(button, button.type, backstage);\n    const lookup = (compInSystem, footerButtons, buttonName) => find$5(footerButtons, button => button.name === buttonName).bind(memButton => memButton.memento.getOpt(compInSystem));\n    const renderComponents = (_data, state) => {\n      const footerButtons = state.map(s => s.footerButtons).getOr([]);\n      const buttonGroups = partition$3(footerButtons, button => button.align === 'start');\n      const makeGroup = (edge, buttons) => Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [`tox-dialog__footer-${ edge }`]\n        },\n        components: map$2(buttons, button => button.memento.asSpec())\n      });\n      const startButtons = makeGroup('start', buttonGroups.pass);\n      const endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    const renderFooter = (initSpec, dialogId, backstage) => {\n      const updateState = (comp, data) => {\n        const footerButtons = map$2(data.buttons, button => {\n          const memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        const lookupByName = buttonName => lookup(comp, footerButtons, buttonName);\n        return Optional.some({\n          lookupByName,\n          footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: `${ footerChannel }-${ dialogId }`,\n            initialData: initSpec,\n            updateState,\n            renderComponents\n          })])\n      };\n    };\n    const renderInlineFooter = (initSpec, dialogId, backstage) => renderFooter(initSpec, dialogId, backstage);\n    const renderModalFooter = (initSpec, dialogId, backstage) => ModalDialog.parts.footer(renderFooter(initSpec, dialogId, backstage));\n\n    const getCompByName = (access, name) => {\n      const root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        const form = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form, name).orThunk(() => {\n          const footer = access.getFooter();\n          const footerState = footer.bind(f => Reflecting.getState(f).get());\n          return footerState.bind(f => f.lookupByName(name));\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const validateData$1 = (access, data) => {\n      const root = access.getRoot();\n      return Reflecting.getState(root).get().map(dialogState => getOrDie(asRaw('data', dialogState.dataValidator, data))).getOr(data);\n    };\n    const getDialogApi = (access, doRedial, menuItemStates) => {\n      const withRoot = f => {\n        const root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      const getData = () => {\n        const root = access.getRoot();\n        const valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        const representedValues = Representing.getValue(valueComp);\n        const menuItemCurrentState = map$1(menuItemStates, cell => cell.get());\n        return {\n          ...representedValues,\n          ...menuItemCurrentState\n        };\n      };\n      const setData = newData => {\n        withRoot(_ => {\n          const prevData = instanceApi.getData();\n          const mergedData = deepMerge(prevData, newData);\n          const newInternalData = validateData$1(access, mergedData);\n          const form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, (v, k) => {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      const setEnabled = (name, state) => {\n        getCompByName(access, name).each(state ? Disabling.enable : Disabling.disable);\n      };\n      const focus = name => {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      const block = message => {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(root => {\n          emitWith(root, formBlockEvent, { message });\n        });\n      };\n      const unblock = () => {\n        withRoot(root => {\n          emit(root, formUnblockEvent);\n        });\n      };\n      const showTab = name => {\n        withRoot(_ => {\n          const body = access.getBody();\n          const bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(b => b.isTabPanel())) {\n            Composing.getCurrent(body).each(tabSection => {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      const redial = d => {\n        withRoot(root => {\n          const id = access.getId();\n          const dialogInit = doRedial(d);\n          const storedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons, menuItemStates);\n          root.getSystem().broadcastOn([`${ dialogChannel }-${ id }`], dialogInit);\n          root.getSystem().broadcastOn([`${ titleChannel }-${ id }`], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([`${ bodyChannel }-${ id }`], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([`${ footerChannel }-${ id }`], {\n            ...dialogInit.internalDialog,\n            buttons: storedMenuButtons\n          });\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      const close = () => {\n        withRoot(root => {\n          emit(root, formCloseEvent);\n        });\n      };\n      const instanceApi = {\n        getData,\n        setData,\n        setEnabled,\n        focus,\n        block,\n        unblock,\n        showTab,\n        redial,\n        close,\n        toggleFullscreen: access.toggleFullscreen\n      };\n      return instanceApi;\n    };\n\n    const renderDialog = (dialogInit, extra, backstage) => {\n      const dialogId = generate$6('dialog');\n      const internalDialog = dialogInit.internalDialog;\n      const header = getHeader(internalDialog.title, dialogId, backstage);\n      const dialogSize = Cell(internalDialog.size);\n      const dialogSizeClasses = getDialogSizeClass(dialogSize.get()).toArray();\n      const updateState = (comp, incoming) => {\n        dialogSize.set(incoming.internalDialog.size);\n        updateDialogSizeClass(incoming.internalDialog.size, comp);\n        return Optional.some(incoming);\n      };\n      const body = renderModalBody({\n        body: internalDialog.body,\n        initialData: internalDialog.initialData\n      }, dialogId, backstage);\n      const storedMenuButtons = mapMenuButtons(internalDialog.buttons);\n      const objOfCells = extractCellsToObject(storedMenuButtons);\n      const footer = someIf(storedMenuButtons.length !== 0, renderModalFooter({ buttons: storedMenuButtons }, dialogId, backstage));\n      const dialogEvents = initDialog(() => instanceApi, getEventExtras(() => dialog, backstage.shared.providers, extra), backstage.shared.getSink);\n      const spec = {\n        id: dialogId,\n        header,\n        body,\n        footer,\n        extraClasses: dialogSizeClasses,\n        extraBehaviours: [Reflecting.config({\n            channel: `${ dialogChannel }-${ dialogId }`,\n            updateState,\n            initialData: dialogInit\n          })],\n        extraStyles: {}\n      };\n      const dialog = renderModalDialog(spec, dialogEvents, backstage);\n      const modalAccess = (() => {\n        const getForm = () => {\n          const outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        const toggleFullscreen$1 = () => {\n          toggleFullscreen(dialog, dialogSize.get());\n        };\n        return {\n          getId: constant$1(dialogId),\n          getRoot: constant$1(dialog),\n          getBody: () => ModalDialog.getBody(dialog),\n          getFooter: () => ModalDialog.getFooter(dialog),\n          getFormWrapper: getForm,\n          toggleFullscreen: toggleFullscreen$1\n        };\n      })();\n      const instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog,\n        instanceApi\n      };\n    };\n\n    const renderInlineDialog = (dialogInit, extra, backstage, ariaAttrs = false, refreshDocking) => {\n      const dialogId = generate$6('dialog');\n      const dialogLabelId = generate$6('dialog-label');\n      const dialogContentId = generate$6('dialog-content');\n      const internalDialog = dialogInit.internalDialog;\n      const dialogSize = Cell(internalDialog.size);\n      const dialogSizeClass = getDialogSizeClass(dialogSize.get()).toArray();\n      const updateState = (comp, incoming) => {\n        dialogSize.set(incoming.internalDialog.size);\n        updateDialogSizeClass(incoming.internalDialog.size, comp);\n        refreshDocking();\n        return Optional.some(incoming);\n      };\n      const memHeader = record(renderInlineHeader({\n        title: internalDialog.title,\n        draggable: true\n      }, dialogId, dialogLabelId, backstage.shared.providers));\n      const memBody = record(renderInlineBody({\n        body: internalDialog.body,\n        initialData: internalDialog.initialData\n      }, dialogId, dialogContentId, backstage, ariaAttrs));\n      const storagedMenuButtons = mapMenuButtons(internalDialog.buttons);\n      const objOfCells = extractCellsToObject(storagedMenuButtons);\n      const optMemFooter = someIf(storagedMenuButtons.length !== 0, record(renderInlineFooter({ buttons: storagedMenuButtons }, dialogId, backstage)));\n      const dialogEvents = initDialog(() => instanceApi, {\n        onBlock: event => {\n          Blocking.block(dialog, (_comp, bs) => {\n            const headerHeight = memHeader.getOpt(dialog).map(dialog => get$d(dialog.element));\n            return getBusySpec(event.message, bs, backstage.shared.providers, headerHeight);\n          });\n        },\n        onUnblock: () => {\n          Blocking.unblock(dialog);\n        },\n        onClose: () => extra.closeWindow()\n      }, backstage.shared.getSink);\n      const inlineClass = 'tox-dialog-inline';\n      const dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            inlineClass,\n            ...dialogSizeClass\n          ],\n          attributes: {\n            role: 'dialog',\n            ['aria-labelledby']: dialogLabelId\n          }\n        },\n        eventOrder: {\n          [receive()]: [\n            Reflecting.name(),\n            Receiving.name()\n          ],\n          [execute$5()]: ['execute-on-form'],\n          [attachedToDom()]: [\n            'reflecting',\n            'execute-on-form'\n          ]\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: c => {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: elem => !isPseudoStop(elem) && (name$3(elem) !== 'button' || get$f(elem, 'disabled') !== 'disabled'),\n            firstTabstop: 1\n          }),\n          Reflecting.config({\n            channel: `${ dialogChannel }-${ dialogId }`,\n            updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([\n            runOnSource(focusin(), (comp, _se) => {\n              Keying.focusIn(comp);\n            }),\n            run$1(focusShifted(), (comp, se) => {\n              comp.getSystem().broadcastOn([dialogFocusShiftedChannel], { newFocus: se.event.newFocus });\n            })\n          ])),\n          Blocking.config({ getRoot: () => Optional.some(dialog) }),\n          Replacing.config({}),\n          memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          ...optMemFooter.map(memFooter => memFooter.asSpec()).toArray()\n        ]\n      });\n      const toggleFullscreen$1 = () => {\n        toggleFullscreen(dialog, dialogSize.get());\n      };\n      const instanceApi = getDialogApi({\n        getId: constant$1(dialogId),\n        getRoot: constant$1(dialog),\n        getFooter: () => optMemFooter.map(memFooter => memFooter.get(dialog)),\n        getBody: () => memBody.get(dialog),\n        getFormWrapper: () => {\n          const body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        },\n        toggleFullscreen: toggleFullscreen$1\n      }, extra.redial, objOfCells);\n      return {\n        dialog,\n        instanceApi\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    const getUrlDialogApi = root => {\n      const withRoot = f => {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      const block = message => {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(root => {\n          emitWith(root, formBlockEvent, { message });\n        });\n      };\n      const unblock = () => {\n        withRoot(root => {\n          emit(root, formUnblockEvent);\n        });\n      };\n      const close = () => {\n        withRoot(root => {\n          emit(root, formCloseEvent);\n        });\n      };\n      const sendMessage = data => {\n        withRoot(root => {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block,\n        unblock,\n        close,\n        sendMessage\n      };\n    };\n\n    const SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    const isSupportedMessage = data => isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    const isCustomMessage = data => !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    const handleMessage = (editor, api, data) => {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        const ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    const renderUrlDialog = (internalDialog, extra, editor, backstage) => {\n      const dialogId = generate$6('dialog');\n      const header = getHeader(internalDialog.title, dialogId, backstage);\n      const body = renderIframeBody(internalDialog);\n      const footer = internalDialog.buttons.bind(buttons => {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons }, dialogId, backstage));\n        }\n      });\n      const dialogEvents = initUrlDialog(() => instanceApi, getEventExtras(() => dialog, backstage.shared.providers, extra));\n      const styles = {\n        ...internalDialog.height.fold(() => ({}), height => ({\n          'height': height + 'px',\n          'max-height': height + 'px'\n        })),\n        ...internalDialog.width.fold(() => ({}), width => ({\n          'width': width + 'px',\n          'max-width': width + 'px'\n        }))\n      };\n      const classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      const iframeUri = new global(internalDialog.url, { base_uri: new global(window.location.href) });\n      const iframeDomain = `${ iframeUri.protocol }://${ iframeUri.host }${ iframeUri.port ? ':' + iframeUri.port : '' }`;\n      const messageHandlerUnbinder = unbindable();\n      const updateState = (_comp, incoming) => Optional.some(incoming);\n      const extraBehaviours = [\n        Reflecting.config({\n          channel: `${ dialogChannel }-${ dialogId }`,\n          updateState,\n          initialData: internalDialog\n        }),\n        config('messages', [\n          runOnAttached(() => {\n            const unbind = bind(SugarElement.fromDom(window), 'message', e => {\n              if (iframeUri.isSameOrigin(new global(e.raw.origin))) {\n                const data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: {\n            [bodySendMessageChannel]: {\n              onReceive: (comp, data) => {\n                descendant(comp.element, 'iframe').each(iframeEle => {\n                  const iframeWin = iframeEle.dom.contentWindow;\n                  if (isNonNullable(iframeWin)) {\n                    iframeWin.postMessage(data, iframeDomain);\n                  }\n                });\n              }\n            }\n          }\n        })\n      ];\n      const spec = {\n        id: dialogId,\n        header,\n        body,\n        footer,\n        extraClasses: classes,\n        extraBehaviours,\n        extraStyles: styles\n      };\n      const dialog = renderModalDialog(spec, dialogEvents, backstage);\n      const instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog,\n        instanceApi\n      };\n    };\n\n    const setup$2 = backstage => {\n      const sharedBackstage = backstage.shared;\n      const open = (message, callback) => {\n        const closeDialog = () => {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        const memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          buttonType: Optional.some('primary'),\n          align: 'end',\n          enabled: true,\n          icon: Optional.none()\n        }, 'cancel', backstage));\n        const titleSpec = pUntitled();\n        const closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        const alertDialog = build$1(renderDialog$1({\n          lazySink: () => sharedBackstage.getSink(),\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        const footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open };\n    };\n\n    const setup$1 = backstage => {\n      const sharedBackstage = backstage.shared;\n      const open = (message, callback) => {\n        const closeDialog = state => {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        const memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          buttonType: Optional.some('primary'),\n          align: 'end',\n          enabled: true,\n          icon: Optional.none()\n        }, 'submit', backstage));\n        const footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          buttonType: Optional.some('secondary'),\n          align: 'end',\n          enabled: true,\n          icon: Optional.none()\n        }, 'cancel', backstage);\n        const titleSpec = pUntitled();\n        const closeSpec = pClose(() => closeDialog(false), sharedBackstage.providers);\n        const confirmDialog = build$1(renderDialog$1({\n          lazySink: () => sharedBackstage.getSink(),\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: () => closeDialog(false),\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, () => closeDialog(false)),\n            run$1(formSubmitEvent, () => closeDialog(true))\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        const footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open };\n    };\n\n    const validateData = (data, validator) => getOrDie(asRaw('data', validator, data));\n    const isAlertOrConfirmDialog = target => closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    const inlineAdditionalBehaviours = (editor, isStickyToolbar, isToolbarLocationTop) => {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: () => Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer()))),\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top'],\n            lazyViewport: comp => {\n              const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n              return optScrollingContext.map(sc => {\n                const combinedBounds = getBoundsFrom(sc);\n                return {\n                  bounds: combinedBounds,\n                  optScrollEnv: Optional.some({\n                    currentScrollTop: sc.element.dom.scrollTop,\n                    scrollElmTop: absolute$3(sc.element).top\n                  })\n                };\n              }).getOrThunk(() => ({\n                bounds: win(),\n                optScrollEnv: Optional.none()\n              }));\n            }\n          })];\n      }\n    };\n    const setup = extras => {\n      const editor = extras.editor;\n      const isStickyToolbar$1 = isStickyToolbar(editor);\n      const alertDialog = setup$2(extras.backstages.dialog);\n      const confirmDialog = setup$1(extras.backstages.dialog);\n      const open = (config, params, closeWindow) => {\n        if (!isUndefined(params)) {\n          if (params.inline === 'toolbar') {\n            return openInlineDialog(config, extras.backstages.popup.shared.anchors.inlineDialog(), closeWindow, params);\n          } else if (params.inline === 'bottom') {\n            return openBottomInlineDialog(config, extras.backstages.popup.shared.anchors.inlineBottomDialog(), closeWindow, params);\n          } else if (params.inline === 'cursor') {\n            return openInlineDialog(config, extras.backstages.popup.shared.anchors.cursor(), closeWindow, params);\n          }\n        }\n        return openModalDialog(config, closeWindow);\n      };\n      const openUrl = (config, closeWindow) => openModalUrlDialog(config, closeWindow);\n      const openModalUrlDialog = (config, closeWindow) => {\n        const factory = contents => {\n          const dialog = renderUrlDialog(contents, {\n            closeWindow: () => {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, extras.backstages.dialog);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      const openModalDialog = (config, closeWindow) => {\n        const factory = (contents, internalInitialData, dataValidator) => {\n          const initialData = internalInitialData;\n          const dialogInit = {\n            dataValidator,\n            initialData,\n            internalDialog: contents\n          };\n          const dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: () => {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, extras.backstages.dialog);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      const openInlineDialog = (config$1, anchor, closeWindow, windowParams) => {\n        const factory = (contents, internalInitialData, dataValidator) => {\n          const initialData = validateData(internalInitialData, dataValidator);\n          const inlineDialog = value$2();\n          const isToolbarLocationTop = extras.backstages.popup.shared.header.isPositionedAtTop();\n          const dialogInit = {\n            dataValidator,\n            initialData,\n            internalDialog: contents\n          };\n          const refreshDocking = () => inlineDialog.on(dialog => {\n            InlineView.reposition(dialog);\n            if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n              Docking.refresh(dialog);\n            }\n          });\n          const dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: () => {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, extras.backstages.popup, windowParams.ariaAttrs, refreshDocking);\n          const inlineDialogComp = build$1(InlineView.sketch({\n            lazySink: extras.backstages.popup.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: windowParams.persistent ? { event: 'doNotDismissYet' } : {},\n            ...isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} },\n            inlineBehaviours: derive$1([\n              config('window-manager-inline-events', [run$1(dismissRequested(), (_comp, _se) => {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })]),\n              ...inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop)\n            ]),\n            isExtraPart: (_comp, target) => isAlertOrConfirmDialog(target)\n          }));\n          inlineDialog.set(inlineDialogComp);\n          const getInlineDialogBounds = () => {\n            const elem = editor.inline ? body() : SugarElement.fromDom(editor.getContainer());\n            const bounds = box$1(elem);\n            return Optional.some(bounds);\n          };\n          InlineView.showWithinBounds(inlineDialogComp, premade(dialogUi.dialog), { anchor }, getInlineDialogBounds);\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      const openBottomInlineDialog = (config$1, anchor, closeWindow, windowParams) => {\n        const factory = (contents, internalInitialData, dataValidator) => {\n          const initialData = validateData(internalInitialData, dataValidator);\n          const inlineDialog = value$2();\n          const isToolbarLocationTop = extras.backstages.popup.shared.header.isPositionedAtTop();\n          const dialogInit = {\n            dataValidator,\n            initialData,\n            internalDialog: contents\n          };\n          const refreshDocking = () => inlineDialog.on(dialog => {\n            InlineView.reposition(dialog);\n            Docking.refresh(dialog);\n          });\n          const dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: () => {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor ScrollWindow ElementScroll', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, extras.backstages.popup, windowParams.ariaAttrs, refreshDocking);\n          const inlineDialogComp = build$1(InlineView.sketch({\n            lazySink: extras.backstages.popup.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: windowParams.persistent ? { event: 'doNotDismissYet' } : {},\n            ...isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} },\n            inlineBehaviours: derive$1([\n              config('window-manager-inline-events', [run$1(dismissRequested(), (_comp, _se) => {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })]),\n              Docking.config({\n                contextual: {\n                  lazyContext: () => Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer()))),\n                  fadeInClass: 'tox-dialog-dock-fadein',\n                  fadeOutClass: 'tox-dialog-dock-fadeout',\n                  transitionClass: 'tox-dialog-dock-transition'\n                },\n                modes: [\n                  'top',\n                  'bottom'\n                ],\n                lazyViewport: comp => {\n                  const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n                  return optScrollingContext.map(sc => {\n                    const combinedBounds = getBoundsFrom(sc);\n                    return {\n                      bounds: combinedBounds,\n                      optScrollEnv: Optional.some({\n                        currentScrollTop: sc.element.dom.scrollTop,\n                        scrollElmTop: absolute$3(sc.element).top\n                      })\n                    };\n                  }).getOrThunk(() => ({\n                    bounds: win(),\n                    optScrollEnv: Optional.none()\n                  }));\n                }\n              })\n            ]),\n            isExtraPart: (_comp, target) => isAlertOrConfirmDialog(target)\n          }));\n          inlineDialog.set(inlineDialogComp);\n          const getInlineDialogBounds = () => {\n            return extras.backstages.popup.shared.getSink().toOptional().bind(s => {\n              const optScrollingContext = detectWhenSplitUiMode(editor, s.element);\n              const margin = 15;\n              const bounds$1 = optScrollingContext.map(sc => getBoundsFrom(sc)).getOr(win());\n              const contentAreaContainer = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n              const constrainedBounds = constrain(contentAreaContainer, bounds$1);\n              return Optional.some(bounds(constrainedBounds.x, constrainedBounds.y, constrainedBounds.width, constrainedBounds.height - margin));\n            });\n          };\n          InlineView.showWithinBounds(inlineDialogComp, premade(dialogUi.dialog), { anchor }, getInlineDialogBounds);\n          Docking.refresh(inlineDialogComp);\n          editor.on('ResizeEditor ScrollWindow ElementScroll ResizeWindow', refreshDocking);\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      const confirm = (message, callback) => {\n        confirmDialog.open(message, callback);\n      };\n      const alert = (message, callback) => {\n        alertDialog.open(message, callback);\n      };\n      const close = instanceApi => {\n        instanceApi.close();\n      };\n      return {\n        open,\n        openUrl,\n        alert,\n        close,\n        confirm\n      };\n    };\n\n    const registerOptions = editor => {\n      register$e(editor);\n      register$d(editor);\n      register(editor);\n    };\n    var Theme = () => {\n      global$a.add('silver', editor => {\n        registerOptions(editor);\n        let popupSinkBounds = () => win();\n        const {\n          dialogs,\n          popups,\n          renderUI: renderModeUI\n        } = setup$3(editor, { getPopupSinkBounds: () => popupSinkBounds() });\n        const renderUI = () => {\n          const renderResult = renderModeUI();\n          const optScrollingContext = detectWhenSplitUiMode(editor, popups.getMothership().element);\n          optScrollingContext.each(sc => {\n            popupSinkBounds = () => {\n              return getBoundsFrom(sc);\n            };\n          });\n          return renderResult;\n        };\n        Autocompleter.register(editor, popups.backstage.shared);\n        const windowMgr = setup({\n          editor,\n          backstages: {\n            popup: popups.backstage,\n            dialog: dialogs.backstage\n          }\n        });\n        const getNotificationManagerImpl = () => NotificationManagerImpl(editor, { backstage: popups.backstage }, popups.getMothership());\n        return {\n          renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl\n        };\n      });\n    };\n\n    Theme();\n\n})();\n","/**\n * TinyMCE version 7.0.0 (2024-03-20)\n */\n\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    const getPrototypeOf$2 = Object.getPrototypeOf;\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType$1 = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq$1 = t => a => t === a;\n    const is$4 = (value, constructor) => isObject(value) && hasProto(value, constructor, (o, proto) => getPrototypeOf$2(o) === proto);\n    const isString = isType$1('string');\n    const isObject = isType$1('object');\n    const isPlainObject = value => is$4(value, Object);\n    const isArray$1 = isType$1('array');\n    const isNull = eq$1(null);\n    const isBoolean = isSimpleType('boolean');\n    const isUndefined = eq$1(undefined);\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isNumber = isSimpleType('number');\n    const isArrayOf = (value, pred) => {\n      if (isArray$1(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const compose = (fa, fb) => {\n      return (...args) => {\n        return fa(fb.apply(null, args));\n      };\n    };\n    const compose1 = (fbc, fab) => a => fbc(fab(a));\n    const constant = value => {\n      return () => {\n        return value;\n      };\n    };\n    const identity = x => {\n      return x;\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n    function curry(fn, ...initialArgs) {\n      return (...restArgs) => {\n        const all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    const not = f => t => !f(t);\n    const die = msg => {\n      return () => {\n        throw new Error(msg);\n      };\n    };\n    const apply$1 = f => {\n      return f();\n    };\n    const call = f => {\n      f();\n    };\n    const never = constant(false);\n    const always = constant(true);\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeSlice = Array.prototype.slice;\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const indexOf$1 = (xs, x) => {\n      const r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    const contains$2 = (xs, x) => rawIndexOf(xs, x) > -1;\n    const exists = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const map$3 = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$e = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const eachr = (xs, f) => {\n      for (let i = xs.length - 1; i >= 0; i--) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const partition$2 = (xs, pred) => {\n      const pass = [];\n      const fail = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        const arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass,\n        fail\n      };\n    };\n    const filter$5 = (xs, pred) => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    const foldr = (xs, f, acc) => {\n      eachr(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const foldl = (xs, f, acc) => {\n      each$e(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const findUntil$1 = (xs, pred, until) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const find$2 = (xs, pred) => {\n      return findUntil$1(xs, pred, never);\n    };\n    const findIndex$2 = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind$3 = (xs, f) => flatten(map$3(xs, f));\n    const forall = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        const x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const reverse = xs => {\n      const r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    const difference = (a1, a2) => filter$5(a1, x => !contains$2(a2, x));\n    const mapToObject = (xs, f) => {\n      const r = {};\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    const sort = (xs, comparator) => {\n      const copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    const get$b = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = xs => get$b(xs, 0);\n    const last$2 = xs => get$b(xs, xs.length - 1);\n    const from = isFunction(Array.from) ? Array.from : x => nativeSlice.call(x);\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n    const unique$1 = (xs, comparator) => {\n      const r = [];\n      const isDuplicated = isFunction(comparator) ? x => exists(r, i => comparator(i, x)) : x => contains$2(r, x);\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (!isDuplicated(x)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n\n    const keys = Object.keys;\n    const hasOwnProperty$1 = Object.hasOwnProperty;\n    const each$d = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const map$2 = (obj, f) => {\n      return tupleMap(obj, (x, i) => ({\n        k: i,\n        v: f(x, i)\n      }));\n    };\n    const tupleMap = (obj, f) => {\n      const r = {};\n      each$d(obj, (x, i) => {\n        const tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each$d(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const bifilter = (obj, pred) => {\n      const t = {};\n      const f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t,\n        f\n      };\n    };\n    const filter$4 = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const mapToArray = (obj, f) => {\n      const r = [];\n      each$d(obj, (value, name) => {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    const values = obj => {\n      return mapToArray(obj, identity);\n    };\n    const get$a = (obj, key) => {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    const has$2 = (obj, key) => hasOwnProperty$1.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    const equal$1 = (a1, a2, eq = eqAny) => eqRecord(eq).eq(a1, a2);\n\n    const stringArray = a => {\n      const all = {};\n      each$e(a, key => {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    const isArrayLike = o => o.length !== undefined;\n    const isArray = Array.isArray;\n    const toArray$1 = obj => {\n      if (!isArray(obj)) {\n        const array = [];\n        for (let i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    const each$c = (o, cb, s) => {\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (isArrayLike(o)) {\n        for (let n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (const n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    const map$1 = (array, callback) => {\n      const out = [];\n      each$c(array, (item, index) => {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    const filter$3 = (a, f) => {\n      const o = [];\n      each$c(a, (v, index) => {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    const indexOf = (a, v) => {\n      if (a) {\n        for (let i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    const reduce = (collection, iteratee, accumulator, thisArg) => {\n      let acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (let i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    const findIndex$1 = (array, predicate, thisArg) => {\n      for (let i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    const last$1 = collection => collection[collection.length - 1];\n\n    const cached = f => {\n      let called = false;\n      let r;\n      return (...args) => {\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    const DeviceType = (os, browser, userAgent, mediaMatch) => {\n      const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      const isiPhone = os.isiOS() && !isiPad;\n      const isMobile = os.isiOS() || os.isAndroid();\n      const isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      const isPhone = isiPhone || isMobile && !isTablet;\n      const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      const isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    const firstMatch = (regexes, s) => {\n      for (let i = 0; i < regexes.length; i++) {\n        const x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    const find$1 = (regexes, agent) => {\n      const r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      const group = i => {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$3(group(1), group(2));\n    };\n    const detect$4 = (versionRegexes, agent) => {\n      const cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    const unknown$2 = () => {\n      return nu$3(0, 0);\n    };\n    const nu$3 = (major, minor) => {\n      return {\n        major,\n        minor\n      };\n    };\n    const Version = {\n      nu: nu$3,\n      detect: detect$4,\n      unknown: unknown$2\n    };\n\n    const detectBrowser$1 = (browsers, userAgentData) => {\n      return findMap(userAgentData.brands, uaBrand => {\n        const lcBrand = uaBrand.brand.toLowerCase();\n        return find$2(browsers, browser => {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(info => ({\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        }));\n      });\n    };\n\n    const detect$3 = (candidates, userAgent) => {\n      const agent = String(userAgent).toLowerCase();\n      return find$2(candidates, candidate => {\n        return candidate.search(agent);\n      });\n    };\n    const detectBrowser = (browsers, userAgent) => {\n      return detect$3(browsers, userAgent).map(browser => {\n        const version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version\n        };\n      });\n    };\n    const detectOs = (oses, userAgent) => {\n      return detect$3(oses, userAgent).map(os => {\n        const version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version\n        };\n      });\n    };\n\n    const removeFromStart = (str, numChars) => {\n      return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    const contains$1 = (str, substr, start = 0, end) => {\n      const idx = str.indexOf(substr, start);\n      if (idx !== -1) {\n        return isUndefined(end) ? true : idx + substr.length <= end;\n      } else {\n        return false;\n      }\n    };\n    const startsWith = (str, prefix) => {\n      return checkRange(str, prefix, 0);\n    };\n    const endsWith = (str, suffix) => {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    const blank = r => s => s.replace(r, '');\n    const trim$4 = blank(/^\\s+|\\s+$/g);\n    const lTrim = blank(/^\\s+/g);\n    const rTrim = blank(/\\s+$/g);\n    const isNotEmpty = s => s.length > 0;\n    const isEmpty$3 = s => !isNotEmpty(s);\n    const repeat = (s, count) => count <= 0 ? '' : new Array(count + 1).join(s);\n    const toInt = (value, radix = 10) => {\n      const num = parseInt(value, radix);\n      return isNaN(num) ? Optional.none() : Optional.some(num);\n    };\n\n    const normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    const checkContains = target => {\n      return uastring => {\n        return contains$1(uastring, target);\n      };\n    };\n    const browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: uastring => {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chromium',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: uastring => {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    const oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: uastring => {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'macOS',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    const PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    const edge = 'Edge';\n    const chromium = 'Chromium';\n    const ie = 'IE';\n    const opera = 'Opera';\n    const firefox = 'Firefox';\n    const safari = 'Safari';\n    const unknown$1 = () => {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$2 = info => {\n      const current = info.current;\n      const version = info.version;\n      const isBrowser = name => () => current === name;\n      return {\n        current,\n        version,\n        isEdge: isBrowser(edge),\n        isChromium: isBrowser(chromium),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    const Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chromium: constant(chromium),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    const windows = 'Windows';\n    const ios = 'iOS';\n    const android = 'Android';\n    const linux = 'Linux';\n    const macos = 'macOS';\n    const solaris = 'Solaris';\n    const freebsd = 'FreeBSD';\n    const chromeos = 'ChromeOS';\n    const unknown = () => {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$1 = info => {\n      const current = info.current;\n      const version = info.version;\n      const isOS = name => () => current === name;\n      return {\n        current,\n        version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isMacOS: isOS(macos),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    const OperatingSystem = {\n      unknown,\n      nu: nu$1,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      macos: constant(macos),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    const detect$2 = (userAgent, userAgentDataOpt, mediaMatch) => {\n      const browsers = PlatformInfo.browsers();\n      const oses = PlatformInfo.oses();\n      const browser = userAgentDataOpt.bind(userAgentData => detectBrowser$1(browsers, userAgentData)).orThunk(() => detectBrowser(browsers, userAgent)).fold(Browser.unknown, Browser.nu);\n      const os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      const deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser,\n        os,\n        deviceType\n      };\n    };\n    const PlatformDetection = { detect: detect$2 };\n\n    const mediaMatch = query => window.matchMedia(query).matches;\n    let platform$4 = cached(() => PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch));\n    const detect$1 = () => platform$4();\n\n    const userAgent = navigator.userAgent;\n    const platform$3 = detect$1();\n    const browser$3 = platform$3.browser;\n    const os$1 = platform$3.os;\n    const deviceType = platform$3.deviceType;\n    const windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    const Env = {\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      documentMode: browser$3.isIE() ? document.documentMode || 7 : 10,\n      cacheSuffix: null,\n      container: null,\n      canHaveCSP: !browser$3.isIE(),\n      windowsPhone,\n      browser: {\n        current: browser$3.current,\n        version: browser$3.version,\n        isChromium: browser$3.isChromium,\n        isEdge: browser$3.isEdge,\n        isFirefox: browser$3.isFirefox,\n        isIE: browser$3.isIE,\n        isOpera: browser$3.isOpera,\n        isSafari: browser$3.isSafari\n      },\n      os: {\n        current: os$1.current,\n        version: os$1.version,\n        isAndroid: os$1.isAndroid,\n        isChromeOS: os$1.isChromeOS,\n        isFreeBSD: os$1.isFreeBSD,\n        isiOS: os$1.isiOS,\n        isLinux: os$1.isLinux,\n        isMacOS: os$1.isMacOS,\n        isSolaris: os$1.isSolaris,\n        isWindows: os$1.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    const whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    const trim$3 = str => {\n      return isNullable(str) ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    const is$3 = (obj, type) => {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    const makeMap$4 = (items, delim, map = {}) => {\n      const resolvedItems = isString(items) ? items.split(delim || ',') : items || [];\n      let i = resolvedItems.length;\n      while (i--) {\n        map[resolvedItems[i]] = {};\n      }\n      return map;\n    };\n    const hasOwnProperty = has$2;\n    const extend$3 = (obj, ...exts) => {\n      for (let i = 0; i < exts.length; i++) {\n        const ext = exts[i];\n        for (const name in ext) {\n          if (has$2(ext, name)) {\n            const value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    const walk$4 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$c(o, (o, i) => {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          } else {\n            walk$4(o, f, n, s);\n            return true;\n          }\n        });\n      }\n    };\n    const resolve$3 = (n, o = window) => {\n      const path = n.split('.');\n      for (let i = 0, l = path.length; i < l; i++) {\n        o = o[path[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    const explode$3 = (s, d) => {\n      if (isArray$1(s)) {\n        return s;\n      } else if (s === '') {\n        return [];\n      } else {\n        return map$1(s.split(d || ','), trim$3);\n      }\n    };\n    const _addCacheSuffix = url => {\n      const cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    const Tools = {\n      trim: trim$3,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$c,\n      map: map$1,\n      grep: filter$3,\n      inArray: indexOf,\n      hasOwn: hasOwnProperty,\n      extend: extend$3,\n      walk: walk$4,\n      resolve: resolve$3,\n      explode: explode$3,\n      _addCacheSuffix\n    };\n\n    const is$2 = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const equals = (lhs, rhs, comparator = tripleEquals) => lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const lift2 = (oa, ob, f) => oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    const lift3 = (oa, ob, oc, f) => oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    const path = (parts, scope) => {\n      let o = scope !== undefined && scope !== null ? scope : Global;\n      for (let i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    const resolve$2 = (p, scope) => {\n      const parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    const unsafe = (name, scope) => {\n      return resolve$2(name, scope);\n    };\n    const getOrDie = (name, scope) => {\n      const actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n\n    const getPrototypeOf$1 = Object.getPrototypeOf;\n    const sandHTMLElement = scope => {\n      return getOrDie('HTMLElement', scope);\n    };\n    const isPrototypeOf = x => {\n      const scope = resolve$2('ownerDocument.defaultView', x);\n      return isObject(x) && (sandHTMLElement(scope).prototype.isPrototypeOf(x) || /^HTML\\w*Element$/.test(getPrototypeOf$1(x).constructor.name));\n    };\n\n    const COMMENT = 8;\n    const DOCUMENT = 9;\n    const DOCUMENT_FRAGMENT = 11;\n    const ELEMENT = 1;\n    const TEXT = 3;\n\n    const name = element => {\n      const r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    const type$1 = element => element.dom.nodeType;\n    const isType = t => element => type$1(element) === t;\n    const isComment$1 = element => type$1(element) === COMMENT || name(element) === '#comment';\n    const isHTMLElement$1 = element => isElement$7(element) && isPrototypeOf(element.dom);\n    const isElement$7 = isType(ELEMENT);\n    const isText$c = isType(TEXT);\n    const isDocument$2 = isType(DOCUMENT);\n    const isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    const isTag = tag => e => isElement$7(e) && name(e) === tag;\n\n    const rawSet = (dom, key, value) => {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    const set$3 = (element, key, value) => {\n      rawSet(element.dom, key, value);\n    };\n    const setAll$1 = (element, attrs) => {\n      const dom = element.dom;\n      each$d(attrs, (v, k) => {\n        rawSet(dom, k, v);\n      });\n    };\n    const get$9 = (element, key) => {\n      const v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    const getOpt = (element, key) => Optional.from(get$9(element, key));\n    const has$1 = (element, key) => {\n      const dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    const remove$9 = (element, key) => {\n      element.dom.removeAttribute(key);\n    };\n    const hasNone = element => {\n      const attrs = element.dom.attributes;\n      return attrs === undefined || attrs === null || attrs.length === 0;\n    };\n    const clone$4 = element => foldl(element.dom.attributes, (acc, attr) => {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n\n    const read$4 = (element, attr) => {\n      const value = get$9(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    const add$4 = (element, attr, id) => {\n      const old = read$4(element, attr);\n      const nu = old.concat([id]);\n      set$3(element, attr, nu.join(' '));\n      return true;\n    };\n    const remove$8 = (element, attr, id) => {\n      const nu = filter$5(read$4(element, attr), v => v !== id);\n      if (nu.length > 0) {\n        set$3(element, attr, nu.join(' '));\n      } else {\n        remove$9(element, attr);\n      }\n      return false;\n    };\n\n    const supports = element => element.dom.classList !== undefined;\n    const get$8 = element => read$4(element, 'class');\n    const add$3 = (element, clazz) => add$4(element, 'class', clazz);\n    const remove$7 = (element, clazz) => remove$8(element, 'class', clazz);\n    const toggle$2 = (element, clazz) => {\n      if (contains$2(get$8(element), clazz)) {\n        return remove$7(element, clazz);\n      } else {\n        return add$3(element, clazz);\n      }\n    };\n\n    const add$2 = (element, clazz) => {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    const cleanClass = element => {\n      const classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove$9(element, 'class');\n      }\n    };\n    const remove$6 = (element, clazz) => {\n      if (supports(element)) {\n        const classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$7(element, clazz);\n      }\n      cleanClass(element);\n    };\n    const toggle$1 = (element, clazz) => {\n      const result = supports(element) ? element.dom.classList.toggle(clazz) : toggle$2(element, clazz);\n      cleanClass(element);\n      return result;\n    };\n    const has = (element, clazz) => supports(element) && element.dom.classList.contains(clazz);\n\n    const fromHtml$1 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        const message = 'HTML does not have a single root node';\n        console.error(message, html);\n        throw new Error(message);\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    const fromTag = (tag, scope) => {\n      const doc = scope || document;\n      const node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    const fromText = (text, scope) => {\n      const doc = scope || document;\n      const node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    const fromDom$2 = node => {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    const fromPoint$2 = (docElm, x, y) => Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    const SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag,\n      fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$2\n    };\n\n    const toArray = (target, f) => {\n      const r = [];\n      const recurse = e => {\n        r.push(e);\n        return f(e);\n      };\n      let cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    const is$1 = (element, selector) => {\n      const dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        const elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    const bypassSelector = dom => dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    const all = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    const one = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    const eq = (e1, e2) => e1.dom === e2.dom;\n    const contains = (e1, e2) => {\n      const d1 = e1.dom;\n      const d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n\n    const owner$1 = element => SugarElement.fromDom(element.dom.ownerDocument);\n    const documentOrOwner = dos => isDocument$2(dos) ? dos : owner$1(dos);\n    const documentElement = element => SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    const defaultView = element => SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    const parent = element => Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    const parentElement = element => Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    const parents$1 = (element, isRoot) => {\n      const stop = isFunction(isRoot) ? isRoot : never;\n      let dom = element.dom;\n      const ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        const rawParent = dom.parentNode;\n        const p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    const siblings = element => {\n      const filterSelf = elements => filter$5(elements, x => !eq(element, x));\n      return parent(element).map(children$1).map(filterSelf).getOr([]);\n    };\n    const prevSibling = element => Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    const nextSibling = element => Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    const prevSiblings = element => reverse(toArray(element, prevSibling));\n    const nextSiblings = element => toArray(element, nextSibling);\n    const children$1 = element => map$3(element.dom.childNodes, SugarElement.fromDom);\n    const child$1 = (element, index) => {\n      const cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    const firstChild = element => child$1(element, 0);\n    const lastChild = element => child$1(element, element.dom.childNodes.length - 1);\n    const childNodesCount = element => element.dom.childNodes.length;\n    const hasChildNodes = element => element.dom.hasChildNodes();\n\n    const getHead = doc => {\n      const b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    const isShadowRoot = dos => isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    const supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    const isSupported$1 = constant(supported);\n    const getRootNode = supported ? e => SugarElement.fromDom(e.dom.getRootNode()) : documentOrOwner;\n    const getStyleContainer = dos => isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    const getContentContainer = dos => isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    const getShadowRoot = e => {\n      const r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    const getShadowHost = e => SugarElement.fromDom(e.dom.host);\n    const getOriginalEventTarget = event => {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        const el = SugarElement.fromDom(event.target);\n        if (isElement$7(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            const composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    const isOpenShadowHost = element => isNonNullable(element.dom.shadowRoot);\n\n    const inBody = element => {\n      const dom = isText$c(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      const doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(() => doc.body.contains(dom), compose1(inBody, getShadowHost));\n    };\n\n    var ClosestOrAncestor = (is, ancestor, scope, a, isRoot) => {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    };\n\n    const ancestor$4 = (scope, predicate, isRoot) => {\n      let element = scope.dom;\n      const stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$4 = (scope, predicate, isRoot) => {\n      const is = (s, test) => test(s);\n      return ClosestOrAncestor(is, ancestor$4, scope, predicate, isRoot);\n    };\n    const sibling$1 = (scope, predicate) => {\n      const element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), x => !eq(scope, x) && predicate(x));\n    };\n    const child = (scope, predicate) => {\n      const pred = node => predicate(SugarElement.fromDom(node));\n      const result = find$2(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    const descendant$2 = (scope, predicate) => {\n      const descend = node => {\n        for (let i = 0; i < node.childNodes.length; i++) {\n          const child = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    const ancestor$3 = (scope, selector, isRoot) => ancestor$4(scope, e => is$1(e, selector), isRoot);\n    const descendant$1 = (scope, selector) => one(selector, scope);\n    const closest$3 = (scope, selector, isRoot) => {\n      const is = (element, selector) => is$1(element, selector);\n      return ClosestOrAncestor(is, ancestor$3, scope, selector, isRoot);\n    };\n\n    const closest$2 = target => closest$3(target, '[contenteditable]');\n    const isEditable$2 = (element, assumeEditable = false) => {\n      if (inBody(element)) {\n        return element.dom.isContentEditable;\n      } else {\n        return closest$2(element).fold(constant(assumeEditable), editable => getRaw$1(editable) === 'true');\n      }\n    };\n    const getRaw$1 = element => element.dom.contentEditable;\n\n    const isSupported = dom => dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n\n    const internalSet = (dom, property, value) => {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    const internalRemove = (dom, property) => {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    const set$2 = (element, property, value) => {\n      const dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    const setAll = (element, css) => {\n      const dom = element.dom;\n      each$d(css, (v, k) => {\n        internalSet(dom, k, v);\n      });\n    };\n    const get$7 = (element, property) => {\n      const dom = element.dom;\n      const styles = window.getComputedStyle(dom);\n      const r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    const getUnsafeProperty = (dom, property) => isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    const getRaw = (element, property) => {\n      const dom = element.dom;\n      const raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(r => r.length > 0);\n    };\n    const getAllRaw = element => {\n      const css = {};\n      const dom = element.dom;\n      if (isSupported(dom)) {\n        for (let i = 0; i < dom.style.length; i++) {\n          const ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    const remove$5 = (element, property) => {\n      const dom = element.dom;\n      internalRemove(dom, property);\n      if (is$2(getOpt(element, 'style').map(trim$4), '')) {\n        remove$9(element, 'style');\n      }\n    };\n    const reflow = e => e.dom.offsetWidth;\n\n    const before$3 = (marker, element) => {\n      const parent$1 = parent(marker);\n      parent$1.each(v => {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    const after$4 = (marker, element) => {\n      const sibling = nextSibling(marker);\n      sibling.fold(() => {\n        const parent$1 = parent(marker);\n        parent$1.each(v => {\n          append$1(v, element);\n        });\n      }, v => {\n        before$3(v, element);\n      });\n    };\n    const prepend = (parent, element) => {\n      const firstChild$1 = firstChild(parent);\n      firstChild$1.fold(() => {\n        append$1(parent, element);\n      }, v => {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    const append$1 = (parent, element) => {\n      parent.dom.appendChild(element.dom);\n    };\n    const wrap$2 = (element, wrapper) => {\n      before$3(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    const after$3 = (marker, elements) => {\n      each$e(elements, (x, i) => {\n        const e = i === 0 ? marker : elements[i - 1];\n        after$4(e, x);\n      });\n    };\n    const append = (parent, elements) => {\n      each$e(elements, x => {\n        append$1(parent, x);\n      });\n    };\n\n    const empty = element => {\n      element.dom.textContent = '';\n      each$e(children$1(element), rogue => {\n        remove$4(rogue);\n      });\n    };\n    const remove$4 = element => {\n      const dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    const unwrap = wrapper => {\n      const children = children$1(wrapper);\n      if (children.length > 0) {\n        after$3(wrapper, children);\n      }\n      remove$4(wrapper);\n    };\n\n    const fromHtml = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      return children$1(SugarElement.fromDom(div));\n    };\n    const fromDom$1 = nodes => map$3(nodes, SugarElement.fromDom);\n\n    const get$6 = element => element.dom.innerHTML;\n    const set$1 = (element, content) => {\n      const owner = owner$1(element);\n      const docDom = owner.dom;\n      const fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      const contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n    const getOuter = element => {\n      const container = SugarElement.fromTag('div');\n      const clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$1(container, clone);\n      return get$6(container);\n    };\n\n    const mkEvent = (target, x, y, stop, prevent, kill, raw) => ({\n      target,\n      x,\n      y,\n      stop,\n      prevent,\n      kill,\n      raw\n    });\n    const fromRawEvent = rawEvent => {\n      const target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      const stop = () => rawEvent.stopPropagation();\n      const prevent = () => rawEvent.preventDefault();\n      const kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    const handle$1 = (filter, handler) => rawEvent => {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent(rawEvent));\n      }\n    };\n    const binder = (element, event, filter, handler, useCapture) => {\n      const wrapped = handle$1(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    const bind$2 = (element, event, filter, handler) => binder(element, event, filter, handler, false);\n    const unbind = (element, event, handler, useCapture) => {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    const r = (left, top) => {\n      const translate = (x, y) => r(left + x, top + y);\n      return {\n        left,\n        top,\n        translate\n      };\n    };\n    const SugarPosition = r;\n\n    const boxPosition = dom => {\n      const box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    const firstDefinedOrZero = (a, b) => {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    const absolute = element => {\n      const doc = element.dom.ownerDocument;\n      const body = doc.body;\n      const win = doc.defaultView;\n      const html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      const scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      const scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    const viewport = element => {\n      const dom = element.dom;\n      const doc = dom.ownerDocument;\n      const body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    const get$5 = _DOC => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      const y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    const to = (x, y, _DOC) => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    const intoView = (element, alignToTop) => {\n      const isSafari = detect$1().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    const get$4 = _win => {\n      const win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win.visualViewport);\n      }\n    };\n    const bounds = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const getBounds = _win => {\n      const win = _win === undefined ? window : _win;\n      const doc = win.document;\n      const scroll = get$5(SugarElement.fromDom(doc));\n      return get$4(win).fold(() => {\n        const html = win.document.documentElement;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, visualViewport => bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height));\n    };\n\n    const children = (scope, predicate) => filter$5(children$1(scope), predicate);\n    const descendants$1 = (scope, predicate) => {\n      let result = [];\n      each$e(children$1(scope), x => {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    const descendants = (scope, selector) => all(selector, scope);\n\n    const ancestor$2 = (scope, predicate, isRoot) => ancestor$4(scope, predicate, isRoot).isSome();\n    const sibling = (scope, predicate) => sibling$1(scope, predicate).isSome();\n    const descendant = (scope, predicate) => descendant$2(scope, predicate).isSome();\n\n    class DomTreeWalker {\n      constructor(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      current() {\n        return this.node;\n      }\n      next(shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      }\n      prev(shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      }\n      prev2(shallow) {\n        this.node = this.findPreviousNode(this.node, shallow);\n        return this.node;\n      }\n      findSibling(node, startName, siblingName, shallow) {\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            let sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (let parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n        return undefined;\n      }\n      findPreviousNode(node, shallow) {\n        if (node) {\n          const sibling = node.previousSibling;\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (let child = sibling.lastChild; child; child = child.lastChild) {\n                if (!child.lastChild) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          const parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n        return undefined;\n      }\n    }\n\n    const zeroWidth = '\\uFEFF';\n    const nbsp = '\\xA0';\n    const isZwsp$2 = char => char === zeroWidth;\n    const removeZwsp = s => s.replace(/\\uFEFF/g, '');\n\n    const whiteSpaceRegExp = /^[ \\t\\r\\n]*$/;\n    const isWhitespaceText = text => whiteSpaceRegExp.test(text);\n    const isZwsp$1 = text => {\n      for (const c of text) {\n        if (!isZwsp$2(c)) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const isCollapsibleWhitespace$1 = c => ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    const isNewLineChar = c => c === '\\n' || c === '\\r';\n    const isNewline = (text, idx) => idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    const normalize$4 = (text, tabSpaces = 4, isStartOfContent = true, isEndOfContent = true) => {\n      const tabSpace = repeat(' ', tabSpaces);\n      const normalizedText = text.replace(/\\t/g, tabSpace);\n      const result = foldl(normalizedText, (acc, c) => {\n        if (isCollapsibleWhitespace$1(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' && isStartOfContent || acc.str.length === normalizedText.length - 1 && isEndOfContent || isNewline(normalizedText, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    const isNodeType = type => {\n      return node => {\n        return !!node && node.nodeType === type;\n      };\n    };\n    const isRestrictedNode = node => !!node && !Object.getPrototypeOf(node);\n    const isElement$6 = isNodeType(1);\n    const isHTMLElement = node => isElement$6(node) && isHTMLElement$1(SugarElement.fromDom(node));\n    const isSVGElement = node => isElement$6(node) && node.namespaceURI === 'http://www.w3.org/2000/svg';\n    const matchNodeName = name => {\n      const lowerCasedName = name.toLowerCase();\n      return node => isNonNullable(node) && node.nodeName.toLowerCase() === lowerCasedName;\n    };\n    const matchNodeNames = names => {\n      const lowerCasedNames = names.map(s => s.toLowerCase());\n      return node => {\n        if (node && node.nodeName) {\n          const nodeName = node.nodeName.toLowerCase();\n          return contains$2(lowerCasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    const matchStyleValues = (name, values) => {\n      const items = values.toLowerCase().split(' ');\n      return node => {\n        if (isElement$6(node)) {\n          const win = node.ownerDocument.defaultView;\n          if (win) {\n            for (let i = 0; i < items.length; i++) {\n              const computed = win.getComputedStyle(node, null);\n              const cssValue = computed ? computed.getPropertyValue(name) : null;\n              if (cssValue === items[i]) {\n                return true;\n              }\n            }\n          }\n        }\n        return false;\n      };\n    };\n    const hasAttribute = attrName => {\n      return node => {\n        return isElement$6(node) && node.hasAttribute(attrName);\n      };\n    };\n    const isBogus$1 = node => isElement$6(node) && node.hasAttribute('data-mce-bogus');\n    const isBogusAll = node => isElement$6(node) && node.getAttribute('data-mce-bogus') === 'all';\n    const isTable$2 = node => isElement$6(node) && node.tagName === 'TABLE';\n    const hasContentEditableState = value => {\n      return node => {\n        if (isHTMLElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    const isText$b = isNodeType(3);\n    const isCData = isNodeType(4);\n    const isPi = isNodeType(7);\n    const isComment = isNodeType(8);\n    const isDocument$1 = isNodeType(9);\n    const isDocumentFragment = isNodeType(11);\n    const isBr$6 = matchNodeName('br');\n    const isImg = matchNodeName('img');\n    const isContentEditableTrue$3 = hasContentEditableState('true');\n    const isContentEditableFalse$b = hasContentEditableState('false');\n    const isTableCell$3 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    const isTableCellOrCaption = matchNodeNames([\n      'td',\n      'th',\n      'caption'\n    ]);\n    const isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    const isListItem$2 = matchNodeName('li');\n    const isDetails = matchNodeName('details');\n    const isSummary$1 = matchNodeName('summary');\n\n    const defaultOptionValues = {\n      skipBogus: true,\n      includeZwsp: false,\n      checkRootAsContent: false\n    };\n    const hasWhitespacePreserveParent = (node, rootNode, schema) => {\n      const rootElement = SugarElement.fromDom(rootNode);\n      const startNode = SugarElement.fromDom(node);\n      const whitespaceElements = schema.getWhitespaceElements();\n      const predicate = node => has$2(whitespaceElements, name(node));\n      return ancestor$2(startNode, predicate, curry(eq, rootElement));\n    };\n    const isNamedAnchor = node => {\n      return isElement$6(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    const isNonEmptyElement$1 = (node, schema) => {\n      return isElement$6(node) && has$2(schema.getNonEmptyElements(), node.nodeName);\n    };\n    const isBookmark = hasAttribute('data-mce-bookmark');\n    const hasNonEditableParent = node => parentElement(SugarElement.fromDom(node)).exists(parent => !isEditable$2(parent));\n    const isWhitespace$1 = (node, rootNode, schema) => isWhitespaceText(node.data) && !hasWhitespacePreserveParent(node, rootNode, schema);\n    const isText$a = (node, rootNode, schema, options) => isText$b(node) && !isWhitespace$1(node, rootNode, schema) && (!options.includeZwsp || !isZwsp$1(node.data));\n    const isContentNode = (schema, node, rootNode, options) => {\n      return isFunction(options.isContent) && options.isContent(node) || isNonEmptyElement$1(node, schema) || isBookmark(node) || isNamedAnchor(node) || isText$a(node, rootNode, schema, options) || isContentEditableFalse$b(node) || isContentEditableTrue$3(node) && hasNonEditableParent(node);\n    };\n    const isEmptyNode = (schema, targetNode, opts) => {\n      const options = {\n        ...defaultOptionValues,\n        ...opts\n      };\n      if (options.checkRootAsContent) {\n        if (isContentNode(schema, targetNode, targetNode, options)) {\n          return false;\n        }\n      }\n      let node = targetNode.firstChild;\n      let brCount = 0;\n      if (!node) {\n        return true;\n      }\n      const walker = new DomTreeWalker(node, targetNode);\n      do {\n        if (options.skipBogus && isElement$6(node)) {\n          const bogusValue = node.getAttribute('data-mce-bogus');\n          if (bogusValue) {\n            node = walker.next(bogusValue === 'all');\n            continue;\n          }\n        }\n        if (isComment(node)) {\n          node = walker.next(true);\n          continue;\n        }\n        if (isBr$6(node)) {\n          brCount++;\n          node = walker.next();\n          continue;\n        }\n        if (isContentNode(schema, node, targetNode, options)) {\n          return false;\n        }\n        node = walker.next();\n      } while (node);\n      return brCount <= 1;\n    };\n    const isEmpty$2 = (schema, elm, options) => {\n      return isEmptyNode(schema, elm.dom, {\n        checkRootAsContent: true,\n        ...options\n      });\n    };\n    const isContent$1 = (schema, node, options) => {\n      return isContentNode(schema, node, node, {\n        includeZwsp: defaultOptionValues.includeZwsp,\n        ...options\n      });\n    };\n\n    const isNonHtmlElementRootName = name => name.toLowerCase() === 'svg';\n    const isNonHtmlElementRoot = node => isNonHtmlElementRootName(node.nodeName);\n    const toScopeType = node => (node === null || node === void 0 ? void 0 : node.nodeName) === 'svg' ? 'svg' : 'html';\n    const namespaceElements = ['svg'];\n    const createNamespaceTracker = () => {\n      let scopes = [];\n      const peek = () => scopes[scopes.length - 1];\n      const track = node => {\n        if (isNonHtmlElementRoot(node)) {\n          scopes.push(node);\n        }\n        let currentScope = peek();\n        if (currentScope && !currentScope.contains(node)) {\n          scopes.pop();\n          currentScope = peek();\n        }\n        return toScopeType(currentScope);\n      };\n      const current = () => toScopeType(peek());\n      const reset = () => {\n        scopes = [];\n      };\n      return {\n        track,\n        current,\n        reset\n      };\n    };\n\n    const transparentBlockAttr = 'data-mce-block';\n    const elementNames = map => filter$5(keys(map), key => !/[A-Z]/.test(key));\n    const makeSelectorFromSchemaMap = map => map$3(elementNames(map), name => {\n      return `${ name }:` + map$3(namespaceElements, ns => `not(${ ns } ${ name })`).join(':');\n    }).join(',');\n    const updateTransparent = (blocksSelector, transparent) => {\n      if (isNonNullable(transparent.querySelector(blocksSelector))) {\n        transparent.setAttribute(transparentBlockAttr, 'true');\n        if (transparent.getAttribute('data-mce-selected') === 'inline-boundary') {\n          transparent.removeAttribute('data-mce-selected');\n        }\n        return true;\n      } else {\n        transparent.removeAttribute(transparentBlockAttr);\n        return false;\n      }\n    };\n    const updateBlockStateOnChildren = (schema, scope) => {\n      const transparentSelector = makeSelectorFromSchemaMap(schema.getTransparentElements());\n      const blocksSelector = makeSelectorFromSchemaMap(schema.getBlockElements());\n      return filter$5(scope.querySelectorAll(transparentSelector), transparent => updateTransparent(blocksSelector, transparent));\n    };\n    const trimEdge = (schema, el, leftSide) => {\n      var _a;\n      const childPropertyName = leftSide ? 'lastChild' : 'firstChild';\n      for (let child = el[childPropertyName]; child; child = child[childPropertyName]) {\n        if (isEmptyNode(schema, child, { checkRootAsContent: true })) {\n          (_a = child.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(child);\n          return;\n        }\n      }\n    };\n    const split$2 = (schema, parentElm, splitElm) => {\n      const range = document.createRange();\n      const parentNode = parentElm.parentNode;\n      if (parentNode) {\n        range.setStartBefore(parentElm);\n        range.setEndBefore(splitElm);\n        const beforeFragment = range.extractContents();\n        trimEdge(schema, beforeFragment, true);\n        range.setStartAfter(splitElm);\n        range.setEndAfter(parentElm);\n        const afterFragment = range.extractContents();\n        trimEdge(schema, afterFragment, false);\n        if (!isEmptyNode(schema, beforeFragment, { checkRootAsContent: true })) {\n          parentNode.insertBefore(beforeFragment, parentElm);\n        }\n        if (!isEmptyNode(schema, splitElm, { checkRootAsContent: true })) {\n          parentNode.insertBefore(splitElm, parentElm);\n        }\n        if (!isEmptyNode(schema, afterFragment, { checkRootAsContent: true })) {\n          parentNode.insertBefore(afterFragment, parentElm);\n        }\n        parentNode.removeChild(parentElm);\n      }\n    };\n    const splitInvalidChildren = (schema, scope, transparentBlocks) => {\n      const blocksElements = schema.getBlockElements();\n      const rootNode = SugarElement.fromDom(scope);\n      const isBlock = el => name(el) in blocksElements;\n      const isRoot = el => eq(el, rootNode);\n      each$e(fromDom$1(transparentBlocks), transparentBlock => {\n        ancestor$4(transparentBlock, isBlock, isRoot).each(parentBlock => {\n          const invalidChildren = children(transparentBlock, el => isBlock(el) && !schema.isValidChild(name(parentBlock), name(el)));\n          if (invalidChildren.length > 0) {\n            const stateScope = parentElement(parentBlock);\n            each$e(invalidChildren, child => {\n              ancestor$4(child, isBlock, isRoot).each(parentBlock => {\n                split$2(schema, parentBlock.dom, child.dom);\n              });\n            });\n            stateScope.each(scope => updateBlockStateOnChildren(schema, scope.dom));\n          }\n        });\n      });\n    };\n    const unwrapInvalidChildren = (schema, scope, transparentBlocks) => {\n      each$e([\n        ...transparentBlocks,\n        ...isTransparentBlock(schema, scope) ? [scope] : []\n      ], block => each$e(descendants(SugarElement.fromDom(block), block.nodeName.toLowerCase()), elm => {\n        if (isTransparentInline(schema, elm.dom)) {\n          unwrap(elm);\n        }\n      }));\n    };\n    const updateChildren = (schema, scope) => {\n      const transparentBlocks = updateBlockStateOnChildren(schema, scope);\n      splitInvalidChildren(schema, scope, transparentBlocks);\n      unwrapInvalidChildren(schema, scope, transparentBlocks);\n    };\n    const updateElement = (schema, target) => {\n      if (isTransparentElement(schema, target)) {\n        const blocksSelector = makeSelectorFromSchemaMap(schema.getBlockElements());\n        updateTransparent(blocksSelector, target);\n      }\n    };\n    const updateCaret = (schema, root, caretParent) => {\n      const isRoot = el => eq(el, SugarElement.fromDom(root));\n      const parents = parents$1(SugarElement.fromDom(caretParent), isRoot);\n      get$b(parents, parents.length - 2).filter(isElement$7).fold(() => updateChildren(schema, root), scope => updateChildren(schema, scope.dom));\n    };\n    const hasBlockAttr = el => el.hasAttribute(transparentBlockAttr);\n    const isTransparentElementName = (schema, name) => has$2(schema.getTransparentElements(), name);\n    const isTransparentElement = (schema, node) => isElement$6(node) && isTransparentElementName(schema, node.nodeName);\n    const isTransparentBlock = (schema, node) => isTransparentElement(schema, node) && hasBlockAttr(node);\n    const isTransparentInline = (schema, node) => isTransparentElement(schema, node) && !hasBlockAttr(node);\n    const isTransparentAstBlock = (schema, node) => node.type === 1 && isTransparentElementName(schema, node.name) && isString(node.attr(transparentBlockAttr));\n\n    const browser$2 = detect$1().browser;\n    const firstElement = nodes => find$2(nodes, isElement$7);\n    const getTableCaptionDeltaY = elm => {\n      if (browser$2.isFirefox() && name(elm) === 'table') {\n        return firstElement(children$1(elm)).filter(elm => {\n          return name(elm) === 'caption';\n        }).bind(caption => {\n          return firstElement(nextSiblings(caption)).map(body => {\n            const bodyTop = body.dom.offsetTop;\n            const captionTop = caption.dom.offsetTop;\n            const captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    const hasChild = (elm, child) => elm.children && contains$2(elm.children, child);\n    const getPos = (body, elm, rootElm) => {\n      let x = 0, y = 0;\n      const doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$7(SugarElement.fromDom(body), 'position') === 'static') {\n          const pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x,\n            y\n          };\n        }\n        let offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          const castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x,\n        y\n      };\n    };\n\n    const StyleSheetLoader = (documentOrShadowRoot, settings = {}) => {\n      let idCount = 0;\n      const loadedStates = {};\n      const edos = SugarElement.fromDom(documentOrShadowRoot);\n      const doc = documentOrOwner(edos);\n      const _setReferrerPolicy = referrerPolicy => {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      const _setContentCssCors = contentCssCors => {\n        settings.contentCssCors = contentCssCors;\n      };\n      const addStyle = element => {\n        append$1(getStyleContainer(edos), element);\n      };\n      const removeStyle = id => {\n        const styleContainer = getStyleContainer(edos);\n        descendant$1(styleContainer, '#' + id).each(remove$4);\n      };\n      const getOrCreateState = url => get$a(loadedStates, url).getOrThunk(() => ({\n        id: 'mce-u' + idCount++,\n        passed: [],\n        failed: [],\n        count: 0\n      }));\n      const load = url => new Promise((success, failure) => {\n        let link;\n        const urlWithSuffix = Tools._addCacheSuffix(url);\n        const state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        const resolve = (callbacks, status) => {\n          each$e(callbacks, call);\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        const passed = () => resolve(state.passed, 2);\n        const failed = () => resolve(state.failed, 3);\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        const linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        if (settings.contentCssCors) {\n          set$3(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$3(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = passed;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$3(linkElem, 'href', urlWithSuffix);\n      });\n      const loadRawCss = (key, css) => {\n        const state = getOrCreateState(key);\n        loadedStates[key] = state;\n        state.count++;\n        const styleElem = SugarElement.fromTag('style', doc.dom);\n        setAll$1(styleElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        styleElem.dom.innerHTML = css;\n        addStyle(styleElem);\n      };\n      const loadAll = urls => {\n        const loadedUrls = Promise.allSettled(map$3(urls, url => load(url).then(constant(url))));\n        return loadedUrls.then(results => {\n          const parts = partition$2(results, r => r.status === 'fulfilled');\n          if (parts.fail.length > 0) {\n            return Promise.reject(map$3(parts.fail, result => result.reason));\n          } else {\n            return map$3(parts.pass, result => result.value);\n          }\n        });\n      };\n      const unload = url => {\n        const urlWithSuffix = Tools._addCacheSuffix(url);\n        get$a(loadedStates, urlWithSuffix).each(state => {\n          const count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      const unloadRawCss = key => {\n        get$a(loadedStates, key).each(state => {\n          const count = --state.count;\n          if (count === 0) {\n            delete loadedStates[key];\n            removeStyle(state.id);\n          }\n        });\n      };\n      const unloadAll = urls => {\n        each$e(urls, url => {\n          unload(url);\n        });\n      };\n      return {\n        load,\n        loadRawCss,\n        loadAll,\n        unload,\n        unloadRawCss,\n        unloadAll,\n        _setReferrerPolicy,\n        _setContentCssCors\n      };\n    };\n\n    const create$c = () => {\n      const map = new WeakMap();\n      const forElement = (referenceElement, settings) => {\n        const root = getRootNode(referenceElement);\n        const rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(() => {\n          const sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement };\n    };\n    const instance = create$c();\n\n    const isSpan = node => node.nodeName.toLowerCase() === 'span';\n    const isInlineContent = (node, schema) => isNonNullable(node) && (isContent$1(schema, node) || schema.isInline(node.nodeName.toLowerCase()));\n    const surroundedByInlineContent = (node, root, schema) => {\n      const prev = new DomTreeWalker(node, root).prev(false);\n      const next = new DomTreeWalker(node, root).next(false);\n      const prevIsInline = isUndefined(prev) || isInlineContent(prev, schema);\n      const nextIsInline = isUndefined(next) || isInlineContent(next, schema);\n      return prevIsInline && nextIsInline;\n    };\n    const isBookmarkNode$2 = node => isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    const isKeepTextNode = (node, root, schema) => isText$b(node) && node.data.length > 0 && surroundedByInlineContent(node, root, schema);\n    const isKeepElement = node => isElement$6(node) ? node.childNodes.length > 0 : false;\n    const isDocument = node => isDocumentFragment(node) || isDocument$1(node);\n    const trimNode = (dom, node, schema, root) => {\n      var _a;\n      const rootNode = root || node;\n      if (isElement$6(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      const children = node.childNodes;\n      for (let i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], schema, rootNode);\n      }\n      if (isElement$6(node)) {\n        const currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(schema, node) && !isKeepElement(node) && !isKeepTextNode(node, rootNode, schema)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    const makeMap$3 = Tools.makeMap;\n    const attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    const textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    const rawCharsRegExp = /[<>&\\\"\\']/g;\n    const entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    const asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    const baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    const reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': `'`\n    };\n    const nativeDecode = text => {\n      const elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    const buildEntitiesLookup = (items, radix) => {\n      const lookup = {};\n      if (items) {\n        const itemList = items.split(',');\n        radix = radix || 10;\n        for (let i = 0; i < itemList.length; i += 2) {\n          const chr = String.fromCharCode(parseInt(itemList[i], radix));\n          if (!baseEntities[chr]) {\n            const entity = '&' + itemList[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      } else {\n        return undefined;\n      }\n    };\n    const namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    const encodeRaw = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n      return baseEntities[chr] || chr;\n    });\n    const encodeAllRaw = text => ('' + text).replace(rawCharsRegExp, chr => {\n      return baseEntities[chr] || chr;\n    });\n    const encodeNumeric = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n      if (chr.length > 1) {\n        return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n      }\n      return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n    });\n    const encodeNamed = (text, attr, entities) => {\n      const resolveEntities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n        return baseEntities[chr] || resolveEntities[chr] || chr;\n      });\n    };\n    const getEncodeFunc = (name, entities) => {\n      const entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      const encodeNamedAndNumeric = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n        if (baseEntities[chr] !== undefined) {\n          return baseEntities[chr];\n        }\n        if (entitiesMap[chr] !== undefined) {\n          return entitiesMap[chr];\n        }\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return '&#' + chr.charCodeAt(0) + ';';\n      });\n      const encodeCustomNamed = (text, attr) => {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      const nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    const decode = text => text.replace(entityRegExp, (all, numeric) => {\n      if (numeric) {\n        if (numeric.charAt(0).toLowerCase() === 'x') {\n          numeric = parseInt(numeric.substr(1), 16);\n        } else {\n          numeric = parseInt(numeric, 10);\n        }\n        if (numeric > 65535) {\n          numeric -= 65536;\n          return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n        }\n        return asciiMap[numeric] || String.fromCharCode(numeric);\n      }\n      return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n    });\n    const Entities = {\n      encodeRaw,\n      encodeAllRaw,\n      encodeNumeric,\n      encodeNamed,\n      getEncodeFunc,\n      decode\n    };\n\n    const split$1 = (items, delim) => {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    const patternToRegExp = str => new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n    const isRegExp$1 = obj => isObject(obj) && obj.source && Object.prototype.toString.call(obj) === '[object RegExp]';\n    const deepCloneElementRule = obj => {\n      const helper = value => {\n        if (isArray$1(value)) {\n          return map$3(value, helper);\n        } else if (isRegExp$1(value)) {\n          return new RegExp(value.source, value.flags);\n        } else if (isObject(value)) {\n          return map$2(value, helper);\n        } else {\n          return value;\n        }\n      };\n      return helper(obj);\n    };\n\n    const parseCustomElementsRules = value => {\n      const customElementRegExp = /^(~)?(.+)$/;\n      return bind$3(split$1(value, ','), rule => {\n        const matches = customElementRegExp.exec(rule);\n        if (matches) {\n          const inline = matches[1] === '~';\n          const cloneName = inline ? 'span' : 'div';\n          const name = matches[2];\n          return [{\n              cloneName,\n              name\n            }];\n        } else {\n          return [];\n        }\n      });\n    };\n\n    const getGlobalAttributeSet = type => {\n      return Object.freeze([\n        'id',\n        'accesskey',\n        'class',\n        'dir',\n        'lang',\n        'style',\n        'tabindex',\n        'title',\n        'role',\n        ...type !== 'html4' ? [\n          'contenteditable',\n          'contextmenu',\n          'draggable',\n          'dropzone',\n          'hidden',\n          'spellcheck',\n          'translate'\n        ] : [],\n        ...type !== 'html5-strict' ? ['xml:lang'] : []\n      ]);\n    };\n\n    const getElementSetsAsStrings = type => {\n      let blockContent;\n      let phrasingContent;\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        const transparentContent = 'a ins del canvas map';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav ' + transparentContent;\n        phrasingContent += ' audio canvas command data datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen svg';\n      }\n      if (type !== 'html5-strict') {\n        const html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        const html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n      }\n      const flowContent = [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      return {\n        blockContent,\n        phrasingContent,\n        flowContent\n      };\n    };\n    const getElementSets = type => {\n      const {blockContent, phrasingContent, flowContent} = getElementSetsAsStrings(type);\n      const toArr = value => {\n        return Object.freeze(value.split(' '));\n      };\n      return Object.freeze({\n        blockContent: toArr(blockContent),\n        phrasingContent: toArr(phrasingContent),\n        flowContent: toArr(flowContent)\n      });\n    };\n\n    const cachedSets = {\n      'html4': cached(() => getElementSets('html4')),\n      'html5': cached(() => getElementSets('html5')),\n      'html5-strict': cached(() => getElementSets('html5-strict'))\n    };\n    const getElementsPreset = (type, name) => {\n      const {blockContent, phrasingContent, flowContent} = cachedSets[type]();\n      if (name === 'blocks') {\n        return Optional.some(blockContent);\n      } else if (name === 'phrasing') {\n        return Optional.some(phrasingContent);\n      } else if (name === 'flow') {\n        return Optional.some(flowContent);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    const makeSchema = type => {\n      const globalAttributes = getGlobalAttributeSet(type);\n      const {phrasingContent, flowContent} = getElementSetsAsStrings(type);\n      const schema = {};\n      const addElement = (name, attributes, children) => {\n        schema[name] = {\n          attributes: mapToObject(attributes, constant({})),\n          attributesOrder: attributes,\n          children: mapToObject(children, constant({}))\n        };\n      };\n      const add = (name, attributes = '', children = '') => {\n        const childNames = split$1(children);\n        const names = split$1(name);\n        let ni = names.length;\n        const allAttributes = [\n          ...globalAttributes,\n          ...split$1(attributes)\n        ];\n        while (ni--) {\n          addElement(names[ni], allAttributes.slice(), childNames);\n        }\n      };\n      const addAttrs = (name, attributes) => {\n        const names = split$1(name);\n        const attrs = split$1(attributes);\n        let ni = names.length;\n        while (ni--) {\n          const schemaItem = schema[names[ni]];\n          for (let i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (type !== 'html5-strict') {\n        const html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        each$e(split$1(html4PhrasingContent), name => {\n          add(name, '', phrasingContent);\n        });\n        const html4BlockContent = 'center dir isindex noframes';\n        each$e(split$1(html4BlockContent), name => {\n          add(name, '', flowContent);\n        });\n      }\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('dd div', '', flowContent);\n      add('address dt caption', '', type === 'html4' ? phrasingContent : flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', type === 'html4' ? phrasingContent : flowContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp bdi', '', phrasingContent);\n        add('summary', '', [\n          phrasingContent,\n          'h1 h2 h3 h4 h5 h6'\n        ].join(' '));\n        add('canvas', 'width height', flowContent);\n        add('data', 'value', phrasingContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n        addElement('svg', 'id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform'.split(' '), []);\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allow allowfullscreen loading');\n      }\n      if (type !== 'html4') {\n        each$e([\n          schema.video,\n          schema.audio\n        ], item => {\n          delete item.children.audio;\n          delete item.children.video;\n        });\n      }\n      each$e(split$1('a form meter progress dfn'), name => {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      return schema;\n    };\n\n    const prefixToOperation = prefix => prefix === '-' ? 'remove' : 'add';\n    const parseValidChild = name => {\n      const validChildRegExp = /^(@?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)$/;\n      return Optional.from(validChildRegExp.exec(name)).map(matches => ({\n        preset: matches[1] === '@',\n        name: matches[2]\n      }));\n    };\n    const parseValidChildrenRules = value => {\n      const childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n      return bind$3(split$1(value, ','), rule => {\n        const matches = childRuleRegExp.exec(rule);\n        if (matches) {\n          const prefix = matches[1];\n          const operation = prefix ? prefixToOperation(prefix) : 'replace';\n          const name = matches[2];\n          const validChildren = bind$3(split$1(matches[3], '|'), validChild => parseValidChild(validChild).toArray());\n          return [{\n              operation,\n              name,\n              validChildren\n            }];\n        } else {\n          return [];\n        }\n      });\n    };\n\n    const parseValidElementsAttrDataIntoElement = (attrData, targetElement) => {\n      const attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=~<]+)?(?:([=~<])(.*))?$/;\n      const hasPatternsRegExp = /[*?+]/;\n      const {attributes, attributesOrder} = targetElement;\n      return each$e(split$1(attrData, '|'), rule => {\n        const matches = attrRuleRegExp.exec(rule);\n        if (matches) {\n          const attr = {};\n          const attrType = matches[1];\n          const attrName = matches[2].replace(/[\\\\:]:/g, ':');\n          const attrPrefix = matches[3];\n          const value = matches[4];\n          if (attrType === '!') {\n            targetElement.attributesRequired = targetElement.attributesRequired || [];\n            targetElement.attributesRequired.push(attrName);\n            attr.required = true;\n          }\n          if (attrType === '-') {\n            delete attributes[attrName];\n            attributesOrder.splice(Tools.inArray(attributesOrder, attrName), 1);\n            return;\n          }\n          if (attrPrefix) {\n            if (attrPrefix === '=') {\n              targetElement.attributesDefault = targetElement.attributesDefault || [];\n              targetElement.attributesDefault.push({\n                name: attrName,\n                value\n              });\n              attr.defaultValue = value;\n            } else if (attrPrefix === '~') {\n              targetElement.attributesForced = targetElement.attributesForced || [];\n              targetElement.attributesForced.push({\n                name: attrName,\n                value\n              });\n              attr.forcedValue = value;\n            } else if (attrPrefix === '<') {\n              attr.validValues = Tools.makeMap(value, '?');\n            }\n          }\n          if (hasPatternsRegExp.test(attrName)) {\n            const attrPattern = attr;\n            targetElement.attributePatterns = targetElement.attributePatterns || [];\n            attrPattern.pattern = patternToRegExp(attrName);\n            targetElement.attributePatterns.push(attrPattern);\n          } else {\n            if (!attributes[attrName]) {\n              attributesOrder.push(attrName);\n            }\n            attributes[attrName] = attr;\n          }\n        }\n      });\n    };\n    const cloneAttributesInto = (from, to) => {\n      each$d(from.attributes, (value, key) => {\n        to.attributes[key] = value;\n      });\n      to.attributesOrder.push(...from.attributesOrder);\n    };\n    const parseValidElementsRules = (globalElement, validElements) => {\n      const elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/;\n      return bind$3(split$1(validElements, ','), rule => {\n        const matches = elementRuleRegExp.exec(rule);\n        if (matches) {\n          const prefix = matches[1];\n          const elementName = matches[2];\n          const outputName = matches[3];\n          const attrsPrefix = matches[4];\n          const attrData = matches[5];\n          const element = {\n            attributes: {},\n            attributesOrder: []\n          };\n          globalElement.each(el => cloneAttributesInto(el, element));\n          if (prefix === '#') {\n            element.paddEmpty = true;\n          } else if (prefix === '-') {\n            element.removeEmpty = true;\n          }\n          if (attrsPrefix === '!') {\n            element.removeEmptyAttrs = true;\n          }\n          if (attrData) {\n            parseValidElementsAttrDataIntoElement(attrData, element);\n          }\n          if (outputName) {\n            element.outputName = elementName;\n          }\n          if (elementName === '@') {\n            if (globalElement.isNone()) {\n              globalElement = Optional.some(element);\n            } else {\n              return [];\n            }\n          }\n          return [outputName ? {\n              name: elementName,\n              element,\n              aliasName: outputName\n            } : {\n              name: elementName,\n              element\n            }];\n        } else {\n          return [];\n        }\n      });\n    };\n\n    const mapCache = {};\n    const makeMap$2 = Tools.makeMap, each$b = Tools.each, extend$2 = Tools.extend, explode$2 = Tools.explode;\n    const createMap = (defaultValue, extendWith = {}) => {\n      const value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$2(value, extendWith);\n    };\n    const getTextRootBlockElements = schema => createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    const compileElementMap = (value, mode) => {\n      if (value) {\n        const styles = {};\n        if (isString(value)) {\n          value = { '*': value };\n        }\n        each$b(value, (value, key) => {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$2(value, /[, ]/);\n        });\n        return styles;\n      } else {\n        return undefined;\n      }\n    };\n    const Schema = (settings = {}) => {\n      var _a;\n      const elements = {};\n      const children = {};\n      let patternElements = [];\n      const customElementsMap = {};\n      const specialElements = {};\n      const createLookupTable = (option, defaultValue, extendWith) => {\n        const value = settings[option];\n        if (!value) {\n          let newValue = mapCache[option];\n          if (!newValue) {\n            newValue = createMap(defaultValue, extendWith);\n            mapCache[option] = newValue;\n          }\n          return newValue;\n        } else {\n          return makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n      };\n      const schemaType = (_a = settings.schema) !== null && _a !== void 0 ? _a : 'html5';\n      const schemaItems = makeSchema(schemaType);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      const validStyles = compileElementMap(settings.valid_styles);\n      const invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      const validClasses = compileElementMap(settings.valid_classes, 'map');\n      const whitespaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      const selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      const voidElementsMap = createLookupTable('void_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      const boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls allowfullscreen');\n      const nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      const nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre svg textarea summary', voidElementsMap);\n      const moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', voidElementsMap);\n      const headings = 'h1 h2 h3 h4 h5 h6';\n      const textBlockElementsMap = createLookupTable('text_block_elements', headings + ' p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      const blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary html body multicol listing', textBlockElementsMap);\n      const textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      const transparentElementsMap = createLookupTable('transparent_elements', 'a ins del canvas map');\n      const wrapBlockElementsMap = createLookupTable('wrap_block_elements', 'pre ' + headings);\n      each$b('script noscript iframe noframes noembed title style textarea xmp plaintext'.split(' '), name => {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      const addValidElements = validElements => {\n        const globalElement = Optional.from(elements['@']);\n        const hasPatternsRegExp = /[*?+]/;\n        each$e(parseValidElementsRules(globalElement, validElements !== null && validElements !== void 0 ? validElements : ''), ({name, element, aliasName}) => {\n          if (aliasName) {\n            elements[aliasName] = element;\n          }\n          if (hasPatternsRegExp.test(name)) {\n            const patternElement = element;\n            patternElement.pattern = patternToRegExp(name);\n            patternElements.push(patternElement);\n          } else {\n            elements[name] = element;\n          }\n        });\n      };\n      const setValidElements = validElements => {\n        patternElements = [];\n        each$e(keys(elements), name => {\n          delete elements[name];\n        });\n        addValidElements(validElements);\n      };\n      const addCustomElement = (name, spec) => {\n        var _a, _b;\n        delete mapCache.text_block_elements;\n        delete mapCache.block_elements;\n        const inline = spec.extends ? !isBlock(spec.extends) : false;\n        const cloneName = spec.extends;\n        children[name] = cloneName ? children[cloneName] : {};\n        customElementsMap[name] = cloneName !== null && cloneName !== void 0 ? cloneName : name;\n        nonEmptyElementsMap[name.toUpperCase()] = {};\n        nonEmptyElementsMap[name] = {};\n        if (!inline) {\n          blockElementsMap[name.toUpperCase()] = {};\n          blockElementsMap[name] = {};\n        }\n        if (cloneName && !elements[name] && elements[cloneName]) {\n          const customRule = deepCloneElementRule(elements[cloneName]);\n          delete customRule.removeEmptyAttrs;\n          delete customRule.removeEmpty;\n          elements[name] = customRule;\n        } else {\n          elements[name] = {\n            attributesOrder: [],\n            attributes: {}\n          };\n        }\n        if (isArray$1(spec.attributes)) {\n          const processAttrName = name => {\n            customRule.attributesOrder.push(name);\n            customRule.attributes[name] = {};\n          };\n          const customRule = (_a = elements[name]) !== null && _a !== void 0 ? _a : {};\n          delete customRule.attributesDefault;\n          delete customRule.attributesForced;\n          delete customRule.attributePatterns;\n          delete customRule.attributesRequired;\n          customRule.attributesOrder = [];\n          customRule.attributes = {};\n          each$e(spec.attributes, attrName => {\n            const globalAttrs = getGlobalAttributeSet(schemaType);\n            parseValidChild(attrName).each(({preset, name}) => {\n              if (preset) {\n                if (name === 'global') {\n                  each$e(globalAttrs, processAttrName);\n                }\n              } else {\n                processAttrName(name);\n              }\n            });\n          });\n          elements[name] = customRule;\n        }\n        if (isBoolean(spec.padEmpty)) {\n          const customRule = (_b = elements[name]) !== null && _b !== void 0 ? _b : {};\n          customRule.paddEmpty = spec.padEmpty;\n          elements[name] = customRule;\n        }\n        if (isArray$1(spec.children)) {\n          const customElementChildren = {};\n          const processNodeName = name => {\n            customElementChildren[name] = {};\n          };\n          const processPreset = name => {\n            getElementsPreset(schemaType, name).each(names => {\n              each$e(names, processNodeName);\n            });\n          };\n          each$e(spec.children, child => {\n            parseValidChild(child).each(({preset, name}) => {\n              if (preset) {\n                processPreset(name);\n              } else {\n                processNodeName(name);\n              }\n            });\n          });\n          children[name] = customElementChildren;\n        }\n        if (cloneName) {\n          each$d(children, (element, elmName) => {\n            if (element[cloneName]) {\n              children[elmName] = element = extend$2({}, children[elmName]);\n              element[name] = element[cloneName];\n            }\n          });\n        }\n      };\n      const addCustomElementsFromString = customElements => {\n        each$e(parseCustomElementsRules(customElements !== null && customElements !== void 0 ? customElements : ''), ({name, cloneName}) => {\n          addCustomElement(name, { extends: cloneName });\n        });\n      };\n      const addCustomElements = customElements => {\n        if (isObject(customElements)) {\n          each$d(customElements, (spec, name) => addCustomElement(name, spec));\n        } else if (isString(customElements)) {\n          addCustomElementsFromString(customElements);\n        }\n      };\n      const addValidChildren = validChildren => {\n        each$e(parseValidChildrenRules(validChildren !== null && validChildren !== void 0 ? validChildren : ''), ({operation, name, validChildren}) => {\n          const parent = operation === 'replace' ? { '#comment': {} } : children[name];\n          const processNodeName = name => {\n            if (operation === 'remove') {\n              delete parent[name];\n            } else {\n              parent[name] = {};\n            }\n          };\n          const processPreset = name => {\n            getElementsPreset(schemaType, name).each(names => {\n              each$e(names, processNodeName);\n            });\n          };\n          each$e(validChildren, ({preset, name}) => {\n            if (preset) {\n              processPreset(name);\n            } else {\n              processNodeName(name);\n            }\n          });\n          children[name] = parent;\n        });\n      };\n      const getElementRule = name => {\n        const element = elements[name];\n        if (element) {\n          return element;\n        }\n        let i = patternElements.length;\n        while (i--) {\n          const patternElement = patternElements[i];\n          if (patternElement.pattern.test(name)) {\n            return patternElement;\n          }\n        }\n        return undefined;\n      };\n      const setup = () => {\n        if (!settings.valid_elements) {\n          each$b(schemaItems, (element, name) => {\n            elements[name] = {\n              attributes: element.attributes,\n              attributesOrder: element.attributesOrder\n            };\n            children[name] = element.children;\n          });\n          each$b(split$1('strong/b em/i'), item => {\n            const items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n          each$b(textInlineElementsMap, (_val, name) => {\n            if (elements[name]) {\n              if (settings.padd_empty_block_inline_children) {\n                elements[name].paddInEmptyBlock = true;\n              }\n              elements[name].removeEmpty = true;\n            }\n          });\n          each$b(split$1('ol ul blockquote a table tbody'), name => {\n            if (elements[name]) {\n              elements[name].removeEmpty = true;\n            }\n          });\n          each$b(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary'), name => {\n            if (elements[name]) {\n              elements[name].paddEmpty = true;\n            }\n          });\n          each$b(split$1('span'), name => {\n            elements[name].removeEmptyAttrs = true;\n          });\n        } else {\n          setValidElements(settings.valid_elements);\n          each$b(schemaItems, (element, name) => {\n            children[name] = element.children;\n          });\n        }\n        delete elements.svg;\n        addCustomElements(settings.custom_elements);\n        addValidChildren(settings.valid_children);\n        addValidElements(settings.extended_valid_elements);\n        addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n        each$b({\n          dd: 'dl',\n          dt: 'dl',\n          li: 'ul ol',\n          td: 'tr',\n          th: 'tr',\n          tr: 'tbody thead tfoot',\n          tbody: 'table',\n          thead: 'table',\n          tfoot: 'table',\n          legend: 'fieldset',\n          area: 'map',\n          param: 'video audio object'\n        }, (parents, item) => {\n          if (elements[item]) {\n            elements[item].parentsRequired = split$1(parents);\n          }\n        });\n        if (settings.invalid_elements) {\n          each$b(explode$2(settings.invalid_elements), item => {\n            if (elements[item]) {\n              delete elements[item];\n            }\n          });\n        }\n        if (!getElementRule('span')) {\n          addValidElements('span[!data-mce-type|*]');\n        }\n      };\n      const getValidStyles = constant(validStyles);\n      const getInvalidStyles = constant(invalidStyles);\n      const getValidClasses = constant(validClasses);\n      const getBoolAttrs = constant(boolAttrMap);\n      const getBlockElements = constant(blockElementsMap);\n      const getTextBlockElements = constant(textBlockElementsMap);\n      const getTextInlineElements = constant(textInlineElementsMap);\n      const getVoidElements = constant(Object.seal(voidElementsMap));\n      const getSelfClosingElements = constant(selfClosingElementsMap);\n      const getNonEmptyElements = constant(nonEmptyElementsMap);\n      const getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      const getWhitespaceElements = constant(whitespaceElementsMap);\n      const getTransparentElements = constant(transparentElementsMap);\n      const getWrapBlockElements = constant(wrapBlockElementsMap);\n      const getSpecialElements = constant(Object.seal(specialElements));\n      const isValidChild = (name, child) => {\n        const parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      const isValid = (name, attr) => {\n        const rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            const attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              let i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(attr)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      const isBlock = name => has$2(getBlockElements(), name);\n      const isInline = name => !startsWith(name, '#') && isValid(name) && !isBlock(name);\n      const isWrapper = name => has$2(getWrapBlockElements(), name) || isInline(name);\n      const getCustomElements = constant(customElementsMap);\n      setup();\n      return {\n        type: schemaType,\n        children,\n        elements,\n        getValidStyles,\n        getValidClasses,\n        getBlockElements,\n        getInvalidStyles,\n        getVoidElements,\n        getTextBlockElements,\n        getTextInlineElements,\n        getBoolAttrs,\n        getElementRule,\n        getSelfClosingElements,\n        getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements,\n        getWhitespaceElements,\n        getTransparentElements,\n        getSpecialElements,\n        isValidChild,\n        isValid,\n        isBlock,\n        isInline,\n        isWrapper,\n        getCustomElements,\n        addValidElements,\n        setValidElements,\n        addCustomElements,\n        addValidChildren\n      };\n    };\n\n    const hexColour = value => ({ value: normalizeHex(value) });\n    const normalizeHex = hex => removeLeading(hex, '#').toUpperCase();\n    const toHex = component => {\n      const hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    const fromRgba = rgbaColour => {\n      const value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    const rgbRegex = /^\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i;\n    const rgbaRegex = /^\\s*rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?(?:\\.\\d+)?)\\s*\\)\\s*$/i;\n    const rgbaColour = (red, green, blue, alpha) => ({\n      red,\n      green,\n      blue,\n      alpha\n    });\n    const fromStringValues = (red, green, blue, alpha) => {\n      const r = parseInt(red, 10);\n      const g = parseInt(green, 10);\n      const b = parseInt(blue, 10);\n      const a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    const fromString = rgbaString => {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      const rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      const rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    const toString = rgba => `rgba(${ rgba.red },${ rgba.green },${ rgba.blue },${ rgba.alpha })`;\n\n    const rgbaToHexString = color => fromString(color).map(fromRgba).map(h => '#' + h.value).getOr(color);\n\n    const Styles = (settings = {}, schema) => {\n      const urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      const styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      const trimRightRegExp = /\\s+$/;\n      const rgbaRegExp = /rgba *\\(/i;\n      const encodingLookup = {};\n      let validStyles;\n      let invalidStyles;\n      const invisibleChar = zeroWidth;\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      const encodingItems = (`\\\\\" \\\\' \\\\; \\\\: ; : ` + invisibleChar).split(' ');\n      for (let i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      const self = {\n        parse: css => {\n          const styles = {};\n          let isEncoded = false;\n          const urlConverter = settings.url_converter;\n          const urlConverterScope = settings.url_converter_scope || self;\n          const compress = (prefix, suffix, noJoin) => {\n            const top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            const right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            const bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            const left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            const box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            let i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          const canCompress = key => {\n            const value = styles[key];\n            if (!value) {\n              return;\n            }\n            const values = value.indexOf(',') > -1 ? [value] : value.split(' ');\n            let i = values.length;\n            while (i--) {\n              if (values[i] !== values[0]) {\n                return false;\n              }\n            }\n            styles[key] = values[0];\n            return true;\n          };\n          const compress2 = (target, a, b, c) => {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          const encode = str => {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          const decode = (str, keepSlashes) => {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, str => {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          const decodeSingleHexSequence = escSeq => {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          const decodeHexSequences = value => {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          const processUrl = (match, url, url2, url3, str, str2) => {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return `'` + str.replace(/\\'/g, `\\\\'`) + `'`;\n            }\n            url = decode(url || url2 || url3 || '');\n            if (!settings.allow_script_urls) {\n              const scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return `url('` + url.replace(/\\'/g, `\\\\'`) + `')`;\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, str => {\n              return str.replace(/[;:]/g, encode);\n            });\n            let matches;\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              let name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              let value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                if (!rgbaRegExp.test(value)) {\n                  fromString(value).each(rgba => {\n                    value = rgbaToHexString(toString(rgba)).toLowerCase();\n                  });\n                }\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: (styles, elementName) => {\n          let css = '';\n          const serializeStyles = (elemName, validStyleList) => {\n            const styleList = validStyleList[elemName];\n            if (styleList) {\n              for (let i = 0, l = styleList.length; i < l; i++) {\n                const name = styleList[i];\n                const value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          const isValid = (name, elemName) => {\n            if (!invalidStyles || !elemName) {\n              return true;\n            }\n            let styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elemName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*', validStyles);\n            serializeStyles(elementName, validStyles);\n          } else {\n            each$d(styles, (value, name) => {\n              if (value && isValid(name, elementName)) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n      return self;\n    };\n\n    const deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    const isNativeEvent = event => event instanceof Event || isFunction(event.initEvent);\n    const hasIsDefaultPrevented = event => event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    const needsNormalizing = event => isNullable(event.preventDefault) || isNativeEvent(event);\n    const clone$3 = (originalEvent, data) => {\n      const event = data !== null && data !== void 0 ? data : {};\n      for (const name in originalEvent) {\n        if (!has$2(deprecated, name)) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (isNonNullable(originalEvent.composedPath)) {\n        event.composedPath = () => originalEvent.composedPath();\n      }\n      if (isNonNullable(originalEvent.getModifierState)) {\n        event.getModifierState = keyArg => originalEvent.getModifierState(keyArg);\n      }\n      if (isNonNullable(originalEvent.getTargetRanges)) {\n        event.getTargetRanges = () => originalEvent.getTargetRanges();\n      }\n      return event;\n    };\n    const normalize$3 = (type, originalEvent, fallbackTarget, data) => {\n      var _a;\n      const event = clone$3(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = () => {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          }\n        };\n        event.stopPropagation = () => {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          }\n        };\n        event.stopImmediatePropagation = () => {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    const eventExpandoPrefix = 'mce-data-';\n    const mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    const addEvent = (target, name, callback, capture) => {\n      target.addEventListener(name, callback, capture || false);\n    };\n    const removeEvent = (target, name, callback, capture) => {\n      target.removeEventListener(name, callback, capture || false);\n    };\n    const isMouseEvent = event => isNonNullable(event) && mouseEventRe.test(event.type);\n    const fix = (originalEvent, data) => {\n      const event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        const eventDoc = event.target.ownerDocument || document;\n        const doc = eventDoc.documentElement;\n        const body = eventDoc.body;\n        const mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      return event;\n    };\n    const bindOnReady = (win, callback, eventUtils) => {\n      const doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      const isDocReady = () => {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      const readyHandler = () => {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    class EventUtils {\n      constructor() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      bind(target, names, callback, scope) {\n        const self = this;\n        let callbackList;\n        const win = window;\n        const defaultNativeHandler = evt => {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || isText$b(target) || isComment(target)) {\n          return callback;\n        }\n        let id;\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        const namesList = names.split(' ');\n        let i = namesList.length;\n        while (i--) {\n          let name = namesList[i];\n          let nativeHandler = defaultNativeHandler;\n          let capture = false;\n          let fakeName = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = evt => {\n              const event = fix(evt || win.event);\n              event.type = event.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(event, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      }\n      unbind(target, names, callback) {\n        if (!target || isText$b(target) || isComment(target)) {\n          return this;\n        }\n        const id = target[this.expando];\n        if (id) {\n          let eventMap = this.events[id];\n          if (names) {\n            const namesList = names.split(' ');\n            let i = namesList.length;\n            while (i--) {\n              const name = namesList[i];\n              const callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  let ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      const nativeHandler = callbackList.nativeHandler;\n                      const fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      const newCallbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      newCallbackList.nativeHandler = nativeHandler;\n                      newCallbackList.fakeName = fakeName;\n                      newCallbackList.capture = capture;\n                      eventMap[name] = newCallbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$d(eventMap, (callbackList, name) => {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (const name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      }\n      fire(target, name, args) {\n        return this.dispatch(target, name, args);\n      }\n      dispatch(target, name, args) {\n        if (!target || isText$b(target) || isComment(target)) {\n          return this;\n        }\n        const event = fix({\n          type: name,\n          target\n        }, args);\n        do {\n          const id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      }\n      clean(target) {\n        if (!target || isText$b(target) || isComment(target)) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          const children = target.getElementsByTagName('*');\n          let i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      }\n      destroy() {\n        this.events = {};\n      }\n      cancel(e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      }\n      executeHandlers(evt, id) {\n        const container = this.events[id];\n        const callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (let i = 0, l = callbackList.length; i < l; i++) {\n            const callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      }\n    }\n    EventUtils.Event = new EventUtils();\n\n    const each$a = Tools.each;\n    const grep = Tools.grep;\n    const internalStyleName = 'data-mce-style';\n    const numericalCssMap = Tools.makeMap('fill-opacity font-weight line-height opacity orphans widows z-index zoom', ' ');\n    const legacySetAttribute = (elm, name, value) => {\n      if (isNullable(value) || value === '') {\n        remove$9(elm, name);\n      } else {\n        set$3(elm, name, value);\n      }\n    };\n    const camelCaseToHyphens = name => name.replace(/[A-Z]/g, v => '-' + v.toLowerCase());\n    const findNodeIndex = (node, normalized) => {\n      let idx = 0;\n      if (node) {\n        for (let lastNodeType = node.nodeType, tempNode = node.previousSibling; tempNode; tempNode = tempNode.previousSibling) {\n          const nodeType = tempNode.nodeType;\n          if (normalized && isText$b(tempNode)) {\n            if (nodeType === lastNodeType || !tempNode.data.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    const updateInternalStyleAttr = (styles, elm) => {\n      const rawValue = get$9(elm, 'style');\n      const value = styles.serialize(styles.parse(rawValue), name(elm));\n      legacySetAttribute(elm, internalStyleName, value);\n    };\n    const convertStyleToString = (cssValue, cssName) => {\n      if (isNumber(cssValue)) {\n        return has$2(numericalCssMap, cssName) ? cssValue + '' : cssValue + 'px';\n      } else {\n        return cssValue;\n      }\n    };\n    const applyStyle$1 = ($elm, cssName, cssValue) => {\n      const normalizedName = camelCaseToHyphens(cssName);\n      if (isNullable(cssValue) || cssValue === '') {\n        remove$5($elm, normalizedName);\n      } else {\n        set$2($elm, normalizedName, convertStyleToString(cssValue, normalizedName));\n      }\n    };\n    const setupAttrHooks = (styles, settings, getContext) => {\n      const keepValues = settings.keep_values;\n      const keepUrlHook = {\n        set: (elm, value, name) => {\n          const sugarElm = SugarElement.fromDom(elm);\n          if (isFunction(settings.url_converter) && isNonNullable(value)) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), String(value), name, elm);\n          }\n          const internalName = 'data-mce-' + name;\n          legacySetAttribute(sugarElm, internalName, value);\n          legacySetAttribute(sugarElm, name, value);\n        },\n        get: (elm, name) => {\n          const sugarElm = SugarElement.fromDom(elm);\n          return get$9(sugarElm, 'data-mce-' + name) || get$9(sugarElm, name);\n        }\n      };\n      const attrHooks = {\n        style: {\n          set: (elm, value) => {\n            const sugarElm = SugarElement.fromDom(elm);\n            if (keepValues) {\n              legacySetAttribute(sugarElm, internalStyleName, value);\n            }\n            remove$9(sugarElm, 'style');\n            if (isString(value)) {\n              setAll(sugarElm, styles.parse(value));\n            }\n          },\n          get: elm => {\n            const sugarElm = SugarElement.fromDom(elm);\n            const value = get$9(sugarElm, internalStyleName) || get$9(sugarElm, 'style');\n            return styles.serialize(styles.parse(value), name(sugarElm));\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    const DOMUtils = (doc, settings = {}) => {\n      const addedStyles = {};\n      const win = window;\n      const files = {};\n      let counter = 0;\n      const stdMode = true;\n      const boxModel = true;\n      const styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      const boundEvents = [];\n      const schema = settings.schema ? settings.schema : Schema({});\n      const styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      const events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      const blockElementsMap = schema.getBlockElements();\n      const isBlock = node => {\n        if (isString(node)) {\n          return has$2(blockElementsMap, node);\n        } else {\n          return isElement$6(node) && (has$2(blockElementsMap, node.nodeName) || isTransparentBlock(schema, node));\n        }\n      };\n      const get = elm => elm && doc && isString(elm) ? doc.getElementById(elm) : elm;\n      const _get = elm => {\n        const value = get(elm);\n        return isNonNullable(value) ? SugarElement.fromDom(value) : null;\n      };\n      const getAttrib = (elm, name, defaultVal = '') => {\n        let value;\n        const $elm = _get(elm);\n        if (isNonNullable($elm) && isElement$7($elm)) {\n          const hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm.dom, name);\n          } else {\n            value = get$9($elm, name);\n          }\n        }\n        return isNonNullable(value) ? value : defaultVal;\n      };\n      const getAttribs = elm => {\n        const node = get(elm);\n        return isNullable(node) ? [] : node.attributes;\n      };\n      const setAttrib = (elm, name, value) => {\n        run(elm, e => {\n          if (isElement$6(e)) {\n            const $elm = SugarElement.fromDom(e);\n            const val = value === '' ? null : value;\n            const originalValue = get$9($elm, name);\n            const hook = attrHooks[name];\n            if (hook && hook.set) {\n              hook.set($elm.dom, val, name);\n            } else {\n              legacySetAttribute($elm, name, val);\n            }\n            if (originalValue !== val && settings.onSetAttrib) {\n              settings.onSetAttrib({\n                attrElm: $elm.dom,\n                attrName: name,\n                attrValue: val\n              });\n            }\n          }\n        });\n      };\n      const clone = (node, deep) => {\n        return node.cloneNode(deep);\n      };\n      const getRoot = () => settings.root_element || doc.body;\n      const getViewPort = argWin => {\n        const vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      const getPos$1 = (elm, rootElm) => getPos(doc.body, get(elm), rootElm);\n      const setStyle = (elm, name, value) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          applyStyle$1($elm, name, value);\n          if (settings.update_styles) {\n            updateInternalStyleAttr(styles, $elm);\n          }\n        });\n      };\n      const setStyles = (elm, stylesArg) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          each$d(stylesArg, (v, n) => {\n            applyStyle$1($elm, n, v);\n          });\n          if (settings.update_styles) {\n            updateInternalStyleAttr(styles, $elm);\n          }\n        });\n      };\n      const getStyle = (elm, name, computed) => {\n        const $elm = get(elm);\n        if (isNullable($elm) || !isHTMLElement($elm) && !isSVGElement($elm)) {\n          return undefined;\n        }\n        if (computed) {\n          return get$7(SugarElement.fromDom($elm), camelCaseToHyphens(name));\n        } else {\n          name = name.replace(/-(\\D)/g, (a, b) => b.toUpperCase());\n          if (name === 'float') {\n            name = 'cssFloat';\n          }\n          return $elm.style ? $elm.style[name] : undefined;\n        }\n      };\n      const getSize = elm => {\n        const $elm = get(elm);\n        if (!$elm) {\n          return {\n            w: 0,\n            h: 0\n          };\n        }\n        let w = getStyle($elm, 'width');\n        let h = getStyle($elm, 'height');\n        if (!w || w.indexOf('px') === -1) {\n          w = '0';\n        }\n        if (!h || h.indexOf('px') === -1) {\n          h = '0';\n        }\n        return {\n          w: parseInt(w, 10) || $elm.offsetWidth || $elm.clientWidth,\n          h: parseInt(h, 10) || $elm.offsetHeight || $elm.clientHeight\n        };\n      };\n      const getRect = elm => {\n        const $elm = get(elm);\n        const pos = getPos$1($elm);\n        const size = getSize($elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      const is = (elm, selector) => {\n        if (!elm) {\n          return false;\n        }\n        const elms = isArray$1(elm) ? elm : [elm];\n        return exists(elms, e => {\n          return is$1(SugarElement.fromDom(e), selector);\n        });\n      };\n      const getParents = (elm, selector, root, collect) => {\n        const result = [];\n        let node = get(elm);\n        collect = collect === undefined;\n        const resolvedRoot = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (isString(selector)) {\n          if (selector === '*') {\n            selector = isElement$6;\n          } else {\n            const selectorVal = selector;\n            selector = node => is(node, selectorVal);\n          }\n        }\n        while (node) {\n          if (node === resolvedRoot || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      const getParent = (node, selector, root) => {\n        const parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      const _findSib = (node, selector, name) => {\n        let func = selector;\n        if (node) {\n          if (isString(selector)) {\n            func = node => {\n              return is(node, selector);\n            };\n          }\n          for (let tempNode = node[name]; tempNode; tempNode = tempNode[name]) {\n            if (isFunction(func) && func(tempNode)) {\n              return tempNode;\n            }\n          }\n        }\n        return null;\n      };\n      const getNext = (node, selector) => _findSib(node, selector, 'nextSibling');\n      const getPrev = (node, selector) => _findSib(node, selector, 'previousSibling');\n      const isParentNode = node => isFunction(node.querySelectorAll);\n      const select = (selector, scope) => {\n        var _a, _b;\n        const elm = (_b = (_a = get(scope)) !== null && _a !== void 0 ? _a : settings.root_element) !== null && _b !== void 0 ? _b : doc;\n        return isParentNode(elm) ? from(elm.querySelectorAll(selector)) : [];\n      };\n      const run = function (elm, func, scope) {\n        const context = scope !== null && scope !== void 0 ? scope : this;\n        if (isArray$1(elm)) {\n          const result = [];\n          each$a(elm, (e, i) => {\n            const node = get(e);\n            if (node) {\n              result.push(func.call(context, node, i));\n            }\n          });\n          return result;\n        } else {\n          const node = get(elm);\n          return !node ? false : func.call(context, node);\n        }\n      };\n      const setAttribs = (elm, attrs) => {\n        run(elm, $elm => {\n          each$d(attrs, (value, name) => {\n            setAttrib($elm, name, value);\n          });\n        });\n      };\n      const setHTML = (elm, html) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          set$1($elm, html);\n        });\n      };\n      const add = (parentElm, name, attrs, html, create) => run(parentElm, parentElm => {\n        const newElm = isString(name) ? doc.createElement(name) : name;\n        if (isNonNullable(attrs)) {\n          setAttribs(newElm, attrs);\n        }\n        if (html) {\n          if (!isString(html) && html.nodeType) {\n            newElm.appendChild(html);\n          } else if (isString(html)) {\n            setHTML(newElm, html);\n          }\n        }\n        return !create ? parentElm.appendChild(newElm) : newElm;\n      });\n      const create = (name, attrs, html) => add(doc.createElement(name), name, attrs, html, true);\n      const decode = Entities.decode;\n      const encode = Entities.encodeAllRaw;\n      const createHTML = (name, attrs, html = '') => {\n        let outHtml = '<' + name;\n        for (const key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (isEmpty$3(html) && has$2(schema.getVoidElements(), name)) {\n          return outHtml + ' />';\n        } else {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n      };\n      const createFragment = html => {\n        const container = doc.createElement('div');\n        const frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        let node;\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      const remove = (node, keepChildren) => {\n        return run(node, n => {\n          const $node = SugarElement.fromDom(n);\n          if (keepChildren) {\n            each$e(children$1($node), child => {\n              if (isText$c(child) && child.dom.length === 0) {\n                remove$4(child);\n              } else {\n                before$3($node, child);\n              }\n            });\n          }\n          remove$4($node);\n          return $node.dom;\n        });\n      };\n      const removeAllAttribs = e => run(e, e => {\n        const attrs = e.attributes;\n        for (let i = attrs.length - 1; i >= 0; i--) {\n          e.removeAttributeNode(attrs.item(i));\n        }\n      });\n      const parseStyle = cssText => styles.parse(cssText);\n      const serializeStyle = (stylesArg, name) => styles.serialize(stylesArg, name);\n      const addStyle = cssText => {\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        let styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          const head = doc.head;\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      const loadCSS = urls => {\n        if (!urls) {\n          urls = '';\n        }\n        each$e(urls.split(','), url => {\n          files[url] = true;\n          styleSheetLoader.load(url).catch(noop);\n        });\n      };\n      const toggleClass = (elm, cls, state) => {\n        run(elm, e => {\n          if (isElement$6(e)) {\n            const $elm = SugarElement.fromDom(e);\n            const classes = cls.split(' ');\n            each$e(classes, c => {\n              if (isNonNullable(state)) {\n                const fn = state ? add$2 : remove$6;\n                fn($elm, c);\n              } else {\n                toggle$1($elm, c);\n              }\n            });\n          }\n        });\n      };\n      const addClass = (elm, cls) => {\n        toggleClass(elm, cls, true);\n      };\n      const removeClass = (elm, cls) => {\n        toggleClass(elm, cls, false);\n      };\n      const hasClass = (elm, cls) => {\n        const $elm = _get(elm);\n        const classes = cls.split(' ');\n        return isNonNullable($elm) && forall(classes, c => has($elm, c));\n      };\n      const show = elm => {\n        run(elm, e => remove$5(SugarElement.fromDom(e), 'display'));\n      };\n      const hide = elm => {\n        run(elm, e => set$2(SugarElement.fromDom(e), 'display', 'none'));\n      };\n      const isHidden = elm => {\n        const $elm = _get(elm);\n        return isNonNullable($elm) && is$2(getRaw($elm, 'display'), 'none');\n      };\n      const uniqueId = prefix => (!prefix ? 'mce_' : prefix) + counter++;\n      const getOuterHTML = elm => {\n        const $elm = _get(elm);\n        if (isNonNullable($elm)) {\n          return isElement$6($elm.dom) ? $elm.dom.outerHTML : getOuter($elm);\n        } else {\n          return '';\n        }\n      };\n      const setOuterHTML = (elm, html) => {\n        run(elm, $elm => {\n          if (isElement$6($elm)) {\n            $elm.outerHTML = html;\n          }\n        });\n      };\n      const insertAfter = (node, reference) => {\n        const referenceNode = get(reference);\n        return run(node, node => {\n          const parent = referenceNode === null || referenceNode === void 0 ? void 0 : referenceNode.parentNode;\n          const nextSibling = referenceNode === null || referenceNode === void 0 ? void 0 : referenceNode.nextSibling;\n          if (parent) {\n            if (nextSibling) {\n              parent.insertBefore(node, nextSibling);\n            } else {\n              parent.appendChild(node);\n            }\n          }\n          return node;\n        });\n      };\n      const replace = (newElm, oldElm, keepChildren) => run(oldElm, elm => {\n        var _a;\n        const replacee = isArray$1(oldElm) ? newElm.cloneNode(true) : newElm;\n        if (keepChildren) {\n          each$a(grep(elm.childNodes), node => {\n            replacee.appendChild(node);\n          });\n        }\n        (_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(replacee, elm);\n        return elm;\n      });\n      const rename = (elm, name) => {\n        if (elm.nodeName !== name.toUpperCase()) {\n          const newElm = create(name);\n          each$a(getAttribs(elm), attrNode => {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n          return newElm;\n        } else {\n          return elm;\n        }\n      };\n      const findCommonAncestor = (a, b) => {\n        let ps = a;\n        while (ps) {\n          let pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        } else {\n          return ps;\n        }\n      };\n      const isEmpty = (node, elements, options) => {\n        if (isPlainObject(elements)) {\n          const isContent = node => {\n            const name = node.nodeName.toLowerCase();\n            return Boolean(elements[name]);\n          };\n          return isEmptyNode(schema, node, {\n            ...options,\n            isContent\n          });\n        } else {\n          return isEmptyNode(schema, node, options);\n        }\n      };\n      const createRng = () => doc.createRange();\n      const split = (parentElm, splitElm, replacementElm) => {\n        let range = createRng();\n        let beforeFragment;\n        let afterFragment;\n        if (parentElm && splitElm && parentElm.parentNode && splitElm.parentNode) {\n          const parentNode = parentElm.parentNode;\n          range.setStart(parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode.insertBefore(trimNode(self, beforeFragment, schema), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment, schema), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        } else {\n          return undefined;\n        }\n      };\n      const bind = (target, name, func, scope) => {\n        if (isArray$1(target)) {\n          let i = target.length;\n          const rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        } else {\n          if (settings.collect && (target === doc || target === win)) {\n            boundEvents.push([\n              target,\n              name,\n              func,\n              scope\n            ]);\n          }\n          return events.bind(target, name, func, scope || self);\n        }\n      };\n      const unbind = (target, name, func) => {\n        if (isArray$1(target)) {\n          let i = target.length;\n          const rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            let i = boundEvents.length;\n            while (i--) {\n              const [boundTarget, boundName, boundFunc] = boundEvents[i];\n              if (target === boundTarget && (!name || name === boundName) && (!func || func === boundFunc)) {\n                events.unbind(boundTarget, boundName, boundFunc);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      const dispatch = (target, name, evt) => events.dispatch(target, name, evt);\n      const fire = (target, name, evt) => events.dispatch(target, name, evt);\n      const getContentEditable = node => {\n        if (node && isHTMLElement(node)) {\n          const contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      const getContentEditableParent = node => {\n        const root = getRoot();\n        let state = null;\n        for (let tempNode = node; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n          state = getContentEditable(tempNode);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      const isEditable = node => {\n        if (isNonNullable(node)) {\n          const scope = isElement$6(node) ? node : node.parentElement;\n          return isNonNullable(scope) && isHTMLElement(scope) && isEditable$2(SugarElement.fromDom(scope));\n        } else {\n          return false;\n        }\n      };\n      const destroy = () => {\n        if (boundEvents.length > 0) {\n          let i = boundEvents.length;\n          while (i--) {\n            const [boundTarget, boundName, boundFunc] = boundEvents[i];\n            events.unbind(boundTarget, boundName, boundFunc);\n          }\n        }\n        each$d(files, (_, url) => {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n      };\n      const isChildOf = (node, parent) => {\n        return node === parent || parent.contains(node);\n      };\n      const dumpRng = r => 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      const self = {\n        doc,\n        settings,\n        win,\n        files,\n        stdMode,\n        boxModel,\n        styleSheetLoader,\n        boundEvents,\n        styles,\n        schema,\n        events,\n        isBlock: isBlock,\n        root: null,\n        clone,\n        getRoot,\n        getViewPort,\n        getRect,\n        getSize,\n        getParent,\n        getParents: getParents,\n        get,\n        getNext,\n        getPrev,\n        select,\n        is,\n        add,\n        create,\n        createHTML,\n        createFragment,\n        remove,\n        setStyle,\n        getStyle: getStyle,\n        setStyles,\n        removeAllAttribs,\n        setAttrib,\n        setAttribs,\n        getAttrib,\n        getPos: getPos$1,\n        parseStyle,\n        serializeStyle,\n        addStyle,\n        loadCSS,\n        addClass,\n        removeClass,\n        hasClass,\n        toggleClass,\n        show,\n        hide,\n        isHidden,\n        uniqueId,\n        setHTML,\n        getOuterHTML,\n        setOuterHTML,\n        decode,\n        encode,\n        insertAfter,\n        replace,\n        rename,\n        findCommonAncestor,\n        run,\n        getAttribs,\n        isEmpty,\n        createRng,\n        nodeIndex: findNodeIndex,\n        split,\n        bind: bind,\n        unbind: unbind,\n        fire,\n        dispatch,\n        getContentEditable,\n        getContentEditableParent,\n        isEditable,\n        destroy,\n        isChildOf,\n        dumpRng\n      };\n      const attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    const DOM$b = DOMUtils.DOM;\n    const QUEUED = 0;\n    const LOADING = 1;\n    const LOADED = 2;\n    const FAILED = 3;\n    class ScriptLoader {\n      constructor(settings = {}) {\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = false;\n        this.settings = settings;\n      }\n      _setReferrerPolicy(referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      }\n      loadScript(url) {\n        return new Promise((resolve, reject) => {\n          const dom = DOM$b;\n          let elm;\n          const cleanup = () => {\n            dom.remove(id);\n            if (elm) {\n              elm.onerror = elm.onload = elm = null;\n            }\n          };\n          const done = () => {\n            cleanup();\n            resolve();\n          };\n          const error = () => {\n            cleanup();\n            reject('Failed to load script: ' + url);\n          };\n          const id = dom.uniqueId();\n          elm = document.createElement('script');\n          elm.id = id;\n          elm.type = 'text/javascript';\n          elm.src = Tools._addCacheSuffix(url);\n          if (this.settings.referrerPolicy) {\n            dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n          }\n          elm.onload = done;\n          elm.onerror = error;\n          (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n        });\n      }\n      isDone(url) {\n        return this.states[url] === LOADED;\n      }\n      markDone(url) {\n        this.states[url] = LOADED;\n      }\n      add(url) {\n        const self = this;\n        self.queue.push(url);\n        const state = self.states[url];\n        if (state === undefined) {\n          self.states[url] = QUEUED;\n        }\n        return new Promise((resolve, reject) => {\n          if (!self.scriptLoadedCallbacks[url]) {\n            self.scriptLoadedCallbacks[url] = [];\n          }\n          self.scriptLoadedCallbacks[url].push({\n            resolve,\n            reject\n          });\n        });\n      }\n      load(url) {\n        return this.add(url);\n      }\n      remove(url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      }\n      loadQueue() {\n        const queue = this.queue;\n        this.queue = [];\n        return this.loadScripts(queue);\n      }\n      loadScripts(scripts) {\n        const self = this;\n        const execCallbacks = (name, url) => {\n          get$a(self.scriptLoadedCallbacks, url).each(callbacks => {\n            each$e(callbacks, callback => callback[name](url));\n          });\n          delete self.scriptLoadedCallbacks[url];\n        };\n        const processResults = results => {\n          const failures = filter$5(results, result => result.status === 'rejected');\n          if (failures.length > 0) {\n            return Promise.reject(bind$3(failures, ({reason}) => isArray$1(reason) ? reason : [reason]));\n          } else {\n            return Promise.resolve();\n          }\n        };\n        const load = urls => Promise.allSettled(map$3(urls, url => {\n          if (self.states[url] === LOADED) {\n            execCallbacks('resolve', url);\n            return Promise.resolve();\n          } else if (self.states[url] === FAILED) {\n            execCallbacks('reject', url);\n            return Promise.reject(url);\n          } else {\n            self.states[url] = LOADING;\n            return self.loadScript(url).then(() => {\n              self.states[url] = LOADED;\n              execCallbacks('resolve', url);\n              const queue = self.queue;\n              if (queue.length > 0) {\n                self.queue = [];\n                return load(queue).then(processResults);\n              } else {\n                return Promise.resolve();\n              }\n            }, () => {\n              self.states[url] = FAILED;\n              execCallbacks('reject', url);\n              return Promise.reject(url);\n            });\n          }\n        }));\n        const processQueue = urls => {\n          self.loading = true;\n          return load(urls).then(results => {\n            self.loading = false;\n            const nextQueuedItem = self.queueLoadedCallbacks.shift();\n            Optional.from(nextQueuedItem).each(call);\n            return processResults(results);\n          });\n        };\n        const uniqueScripts = stringArray(scripts);\n        if (self.loading) {\n          return new Promise((resolve, reject) => {\n            self.queueLoadedCallbacks.push(() => {\n              processQueue(uniqueScripts).then(resolve, reject);\n            });\n          });\n        } else {\n          return processQueue(uniqueScripts);\n        }\n      }\n    }\n    ScriptLoader.ScriptLoader = new ScriptLoader();\n\n    const Cell = initial => {\n      let value = initial;\n      const get = () => {\n        return value;\n      };\n      const set = v => {\n        value = v;\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    const isDuplicated = (items, item) => {\n      const firstIndex = items.indexOf(item);\n      return firstIndex !== -1 && items.indexOf(item, firstIndex + 1) > firstIndex;\n    };\n    const isRaw = str => isObject(str) && has$2(str, 'raw');\n    const isTokenised = str => isArray$1(str) && str.length > 1;\n    const data = {};\n    const currentCode = Cell('en');\n    const getLanguageData = () => get$a(data, currentCode.get());\n    const getData$1 = () => map$2(data, value => ({ ...value }));\n    const setCode = newCode => {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    const getCode = () => currentCode.get();\n    const add$1 = (code, items) => {\n      let langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      const lcNames = map$3(keys(items), name => name.toLowerCase());\n      each$d(items, (translation, name) => {\n        const lcName = name.toLowerCase();\n        if (lcName !== name && isDuplicated(lcNames, lcName)) {\n          if (!has$2(items, lcName)) {\n            langData[lcName] = translation;\n          }\n          langData[name] = translation;\n        } else {\n          langData[lcName] = translation;\n        }\n      });\n    };\n    const translate = text => {\n      const langData = getLanguageData().getOr({});\n      const toString = obj => {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      const isEmpty = text => text === '' || text === null || text === undefined;\n      const getLangData = text => {\n        const textStr = toString(text);\n        return has$2(langData, textStr) ? toString(langData[textStr]) : get$a(langData, textStr.toLowerCase()).map(toString).getOr(textStr);\n      };\n      const removeContext = str => str.replace(/{context:\\w+}$/, '');\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        const values = text.slice(1);\n        const substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, ($1, $2) => has$2(values, $2) ? toString(values[$2]) : $1);\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    const isRtl$1 = () => getLanguageData().bind(items => get$a(items, '_dir')).exists(dir => dir === 'rtl');\n    const hasCode = code => has$2(data, code);\n    const I18n = {\n      getData: getData$1,\n      setCode,\n      getCode,\n      add: add$1,\n      translate,\n      isRtl: isRtl$1,\n      hasCode\n    };\n\n    const AddOnManager = () => {\n      const items = [];\n      const urls = {};\n      const lookup = {};\n      const _listeners = [];\n      const runListeners = (name, state) => {\n        const matchedListeners = filter$5(_listeners, listener => listener.name === name && listener.state === state);\n        each$e(matchedListeners, listener => listener.resolve());\n      };\n      const isLoaded = name => has$2(urls, name);\n      const isAdded = name => has$2(lookup, name);\n      const get = name => {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      const loadLanguagePack = (name, languages) => {\n        const language = I18n.getCode();\n        const wrappedLanguages = ',' + (languages || '') + ',';\n        if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n          return;\n        }\n        ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n      };\n      const requireLangPack = (name, languages) => {\n        if (AddOnManager.languageLoad !== false) {\n          if (isLoaded(name)) {\n            loadLanguagePack(name, languages);\n          } else {\n            waitFor(name, 'loaded').then(() => loadLanguagePack(name, languages));\n          }\n        }\n      };\n      const add = (id, addOn) => {\n        items.push(addOn);\n        lookup[id] = { instance: addOn };\n        runListeners(id, 'added');\n        return addOn;\n      };\n      const remove = name => {\n        delete urls[name];\n        delete lookup[name];\n      };\n      const createUrl = (baseUrl, dep) => {\n        if (isString(dep)) {\n          return isString(baseUrl) ? {\n            prefix: '',\n            resource: dep,\n            suffix: ''\n          } : {\n            prefix: baseUrl.prefix,\n            resource: dep,\n            suffix: baseUrl.suffix\n          };\n        } else {\n          return dep;\n        }\n      };\n      const load = (name, addOnUrl) => {\n        if (urls[name]) {\n          return Promise.resolve();\n        }\n        let urlString = isString(addOnUrl) ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        const done = () => {\n          runListeners(name, 'loaded');\n          return Promise.resolve();\n        };\n        if (lookup[name]) {\n          return done();\n        } else {\n          return ScriptLoader.ScriptLoader.add(urlString).then(done);\n        }\n      };\n      const waitFor = (name, state = 'added') => {\n        if (state === 'added' && isAdded(name)) {\n          return Promise.resolve();\n        } else if (state === 'loaded' && isLoaded(name)) {\n          return Promise.resolve();\n        } else {\n          return new Promise(resolve => {\n            _listeners.push({\n              name,\n              state,\n              resolve\n            });\n          });\n        }\n      };\n      return {\n        items,\n        urls,\n        lookup,\n        get,\n        requireLangPack,\n        add,\n        remove,\n        createUrl,\n        load,\n        waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n    AddOnManager.ModelManager = AddOnManager();\n\n    const singleton = doRevoke => {\n      const subject = Cell(Optional.none());\n      const revoke = () => subject.get().each(doRevoke);\n      const clear = () => {\n        revoke();\n        subject.set(Optional.none());\n      };\n      const isSet = () => subject.get().isSome();\n      const get = () => subject.get();\n      const set = s => {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const repeatable = delay => {\n      const intervalId = Cell(Optional.none());\n      const revoke = () => intervalId.get().each(id => clearInterval(id));\n      const clear = () => {\n        revoke();\n        intervalId.set(Optional.none());\n      };\n      const isSet = () => intervalId.get().isSome();\n      const get = () => intervalId.get();\n      const set = functionToRepeat => {\n        revoke();\n        intervalId.set(Optional.some(setInterval(functionToRepeat, delay)));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const value$2 = () => {\n      const subject = singleton(noop);\n      const on = f => subject.get().each(f);\n      return {\n        ...subject,\n        on\n      };\n    };\n\n    const first$1 = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const last = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        cancel();\n        timer = setTimeout(() => {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n\n    const ancestor$1 = (scope, selector, isRoot) => ancestor$3(scope, selector, isRoot).isSome();\n\n    const annotation = constant('mce-annotation');\n    const dataAnnotation = constant('data-mce-annotation');\n    const dataAnnotationId = constant('data-mce-annotation-uid');\n    const dataAnnotationActive = constant('data-mce-annotation-active');\n    const dataAnnotationClasses = constant('data-mce-annotation-classes');\n    const dataAnnotationAttributes = constant('data-mce-annotation-attrs');\n\n    const isRoot$1 = root => node => eq(node, root);\n    const identify = (editor, annotationName) => {\n      const rng = editor.selection.getRng();\n      const start = SugarElement.fromDom(rng.startContainer);\n      const root = SugarElement.fromDom(editor.getBody());\n      const selector = annotationName.fold(() => '.' + annotation(), an => `[${ dataAnnotation() }=\"${ an }\"]`);\n      const newStart = child$1(start, rng.startOffset).getOr(start);\n      const closest = closest$3(newStart, selector, isRoot$1(root));\n      return closest.bind(c => getOpt(c, `${ dataAnnotationId() }`).bind(uid => getOpt(c, `${ dataAnnotation() }`).map(name => {\n        const elements = findMarkers(editor, uid);\n        return {\n          uid,\n          name,\n          elements\n        };\n      })));\n    };\n    const isAnnotation = elem => isElement$7(elem) && has(elem, annotation());\n    const isBogusElement = (elem, root) => has$1(elem, 'data-mce-bogus') || ancestor$1(elem, '[data-mce-bogus=\"all\"]', isRoot$1(root));\n    const findMarkers = (editor, uid) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const descendants$1 = descendants(body, `[${ dataAnnotationId() }=\"${ uid }\"]`);\n      return filter$5(descendants$1, descendant => !isBogusElement(descendant, body));\n    };\n    const findAll = (editor, name) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const markers = descendants(body, `[${ dataAnnotation() }=\"${ name }\"]`);\n      const directory = {};\n      each$e(markers, m => {\n        if (!isBogusElement(m, body)) {\n          const uid = get$9(m, dataAnnotationId());\n          const nodesAlready = get$a(directory, uid).getOr([]);\n          directory[uid] = nodesAlready.concat([m]);\n        }\n      });\n      return directory;\n    };\n\n    const setup$y = (editor, registry) => {\n      const changeCallbacks = Cell({});\n      const initData = () => ({\n        listeners: [],\n        previous: value$2()\n      });\n      const withCallbacks = (name, f) => {\n        updateCallbacks(name, data => {\n          f(data);\n          return data;\n        });\n      };\n      const updateCallbacks = (name, f) => {\n        const callbackMap = changeCallbacks.get();\n        const data = get$a(callbackMap, name).getOrThunk(initData);\n        const outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      const fireCallbacks = (name, uid, elements) => {\n        withCallbacks(name, data => {\n          each$e(data.listeners, f => f(true, name, {\n            uid,\n            nodes: map$3(elements, elem => elem.dom)\n          }));\n        });\n      };\n      const fireNoAnnotation = name => {\n        withCallbacks(name, data => {\n          each$e(data.listeners, f => f(false, name));\n        });\n      };\n      const toggleActiveAttr = (uid, state) => {\n        each$e(findMarkers(editor, uid), elem => {\n          if (state) {\n            set$3(elem, dataAnnotationActive(), 'true');\n          } else {\n            remove$9(elem, dataAnnotationActive());\n          }\n        });\n      };\n      const onNodeChange = last(() => {\n        const annotations = sort(registry.getNames());\n        each$e(annotations, name => {\n          updateCallbacks(name, data => {\n            const prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(() => {\n              prev.each(uid => {\n                fireNoAnnotation(name);\n                data.previous.clear();\n                toggleActiveAttr(uid, false);\n              });\n            }, ({uid, name, elements}) => {\n              if (!is$2(prev, uid)) {\n                prev.each(uid => toggleActiveAttr(uid, false));\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n                toggleActiveAttr(uid, true);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', () => {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', () => {\n        onNodeChange.throttle();\n      });\n      const addListener = (name, f) => {\n        updateCallbacks(name, data => ({\n          previous: data.previous,\n          listeners: data.listeners.concat([f])\n        }));\n      };\n      return { addListener };\n    };\n\n    const setup$x = (editor, registry) => {\n      const dataAnnotation$1 = dataAnnotation();\n      const identifyParserNode = node => Optional.from(node.attr(dataAnnotation$1)).bind(registry.lookup);\n      const removeDirectAnnotation = node => {\n        var _a, _b;\n        node.attr(dataAnnotationId(), null);\n        node.attr(dataAnnotation(), null);\n        node.attr(dataAnnotationActive(), null);\n        const customAttrNames = Optional.from(node.attr(dataAnnotationAttributes())).map(names => names.split(',')).getOr([]);\n        const customClasses = Optional.from(node.attr(dataAnnotationClasses())).map(names => names.split(',')).getOr([]);\n        each$e(customAttrNames, name => node.attr(name, null));\n        const classList = (_b = (_a = node.attr('class')) === null || _a === void 0 ? void 0 : _a.split(' ')) !== null && _b !== void 0 ? _b : [];\n        const newClassList = difference(classList, [annotation()].concat(customClasses));\n        node.attr('class', newClassList.length > 0 ? newClassList.join(' ') : null);\n        node.attr(dataAnnotationClasses(), null);\n        node.attr(dataAnnotationAttributes(), null);\n      };\n      editor.serializer.addTempAttr(dataAnnotationActive());\n      editor.serializer.addAttributeFilter(dataAnnotation$1, nodes => {\n        for (const node of nodes) {\n          identifyParserNode(node).each(settings => {\n            if (settings.persistent === false) {\n              if (node.name === 'span') {\n                node.unwrap();\n              } else {\n                removeDirectAnnotation(node);\n              }\n            }\n          });\n        }\n      });\n    };\n\n    const create$b = () => {\n      const annotations = {};\n      const register = (name, settings) => {\n        annotations[name] = {\n          name,\n          settings\n        };\n      };\n      const lookup = name => get$a(annotations, name).map(a => a.settings);\n      const getNames = () => keys(annotations);\n      return {\n        register,\n        lookup,\n        getNames\n      };\n    };\n\n    let unique = 0;\n    const generate$1 = prefix => {\n      const date = new Date();\n      const time = date.getTime();\n      const random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    const add = (element, classes) => {\n      each$e(classes, x => {\n        add$2(element, x);\n      });\n    };\n    const remove$3 = (element, classes) => {\n      each$e(classes, x => {\n        remove$6(element, x);\n      });\n    };\n\n    const clone$2 = (original, isDeep) => SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    const shallow$1 = original => clone$2(original, false);\n    const deep$1 = original => clone$2(original, true);\n    const shallowAs = (original, tag) => {\n      const nu = SugarElement.fromTag(tag);\n      const attributes = clone$4(original);\n      setAll$1(nu, attributes);\n      return nu;\n    };\n    const mutate = (original, tag) => {\n      const nu = shallowAs(original, tag);\n      after$4(original, nu);\n      const children = children$1(original);\n      append(nu, children);\n      remove$4(original);\n      return nu;\n    };\n\n    const TextWalker = (startNode, rootNode, isBoundary = never) => {\n      const walker = new DomTreeWalker(startNode, rootNode);\n      const walk = direction => {\n        let next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$b(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$b);\n      };\n      return {\n        current: () => Optional.from(walker.current()).filter(isText$b),\n        next: () => walk('next'),\n        prev: () => walk('prev'),\n        prev2: () => walk('prev2')\n      };\n    };\n\n    const TextSeeker = (dom, isBoundary) => {\n      const isBlockBoundary = isBoundary ? isBoundary : node => dom.isBlock(node) || isBr$6(node) || isContentEditableFalse$b(node);\n      const walk = (node, offset, walker, process) => {\n        if (isText$b(node)) {\n          const newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(next => walk(next.container, next.offset, walker, process));\n      };\n      const backwards = (node, offset, process, root) => {\n        const walker = TextWalker(node, root !== null && root !== void 0 ? root : dom.getRoot(), isBlockBoundary);\n        return walk(node, offset, () => walker.prev().map(prev => ({\n          container: prev,\n          offset: prev.length\n        })), process).getOrNull();\n      };\n      const forwards = (node, offset, process, root) => {\n        const walker = TextWalker(node, root !== null && root !== void 0 ? root : dom.getRoot(), isBlockBoundary);\n        return walk(node, offset, () => walker.next().map(next => ({\n          container: next,\n          offset: 0\n        })), process).getOrNull();\n      };\n      return {\n        backwards,\n        forwards\n      };\n    };\n\n    const NodeValue = (is, name) => {\n      const get = element => {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      const getOption = element => is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      const set = (element, value) => {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get,\n        getOption,\n        set\n      };\n    };\n\n    const api$1 = NodeValue(isText$c, 'text');\n    const get$3 = element => api$1.get(element);\n    const getOption = element => api$1.getOption(element);\n    const set = (element, value) => api$1.set(element, value);\n\n    const tableCells = [\n      'td',\n      'th'\n    ];\n    const tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    const textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    const listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    const lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    const wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    const lazyLookup = items => {\n      let lookup;\n      return node => {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    const isTable$1 = node => name(node) === 'table';\n    const isBr$5 = node => isElement$7(node) && name(node) === 'br';\n    const isTextBlock$2 = lazyLookup(textBlocks);\n    const isList = lazyLookup(lists);\n    const isListItem$1 = lazyLookup(listItems$1);\n    const isTableSection = lazyLookup(tableSections);\n    const isTableCell$2 = lazyLookup(tableCells);\n    const isWsPreserveElement = lazyLookup(wsElements);\n\n    const getLastChildren$1 = elm => {\n      const children = [];\n      let rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    const removeTrailingBr = elm => {\n      const allBrs = descendants(elm, 'br');\n      const brs = filter$5(getLastChildren$1(elm).slice(-1), isBr$5);\n      if (allBrs.length === brs.length) {\n        each$e(brs, remove$4);\n      }\n    };\n    const createPaddingBr = () => {\n      const br = SugarElement.fromTag('br');\n      set$3(br, 'data-mce-bogus', '1');\n      return br;\n    };\n    const fillWithPaddingBr = elm => {\n      empty(elm);\n      append$1(elm, createPaddingBr());\n    };\n    const trimBlockTrailingBr = (elm, schema) => {\n      lastChild(elm).each(lastChild => {\n        prevSibling(lastChild).each(lastChildPrevSibling => {\n          if (schema.isBlock(name(elm)) && isBr$5(lastChild) && schema.isBlock(name(lastChildPrevSibling))) {\n            remove$4(lastChild);\n          }\n        });\n      });\n    };\n\n    const ZWSP$1 = zeroWidth;\n    const isZwsp = isZwsp$2;\n    const trim$2 = removeZwsp;\n    const insert$5 = editor => editor.insertContent(ZWSP$1, { preserve_zwsp: true });\n\n    const isElement$5 = isElement$6;\n    const isText$9 = isText$b;\n    const isCaretContainerBlock$1 = node => {\n      if (isText$9(node)) {\n        node = node.parentNode;\n      }\n      return isElement$5(node) && node.hasAttribute('data-mce-caret');\n    };\n    const isCaretContainerInline = node => isText$9(node) && isZwsp(node.data);\n    const isCaretContainer$2 = node => isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    const hasContent = node => node.firstChild !== node.lastChild || !isBr$6(node.firstChild);\n    const insertInline$1 = (node, before) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const textNode = doc.createTextNode(ZWSP$1);\n      const parentNode = node.parentNode;\n      if (!before) {\n        const sibling = node.nextSibling;\n        if (isText$9(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.appendChild(textNode);\n        }\n      } else {\n        const sibling = node.previousSibling;\n        if (isText$9(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    const isBeforeInline = pos => {\n      const container = pos.container();\n      if (!isText$b(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    const isAfterInline = pos => {\n      const container = pos.container();\n      if (!isText$b(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    const insertBlock = (blockName, node, before) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createPaddingBr().dom);\n      const parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    const startsWithCaretContainer$1 = node => isText$9(node) && node.data[0] === ZWSP$1;\n    const endsWithCaretContainer$1 = node => isText$9(node) && node.data[node.data.length - 1] === ZWSP$1;\n    const trimBogusBr = elm => {\n      var _a;\n      const brs = elm.getElementsByTagName('br');\n      const lastBr = brs[brs.length - 1];\n      if (isBogus$1(lastBr)) {\n        (_a = lastBr.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(lastBr);\n      }\n    };\n    const showCaretContainerBlock = caretContainer => {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('data-mce-style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    const isRangeInCaretContainerBlock = range => isCaretContainerBlock$1(range.startContainer);\n\n    const round$2 = Math.round;\n    const clone$1 = rect => {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    const collapse = (rect, toStart) => {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    const isEqual = (rect1, rect2) => rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    const isValidOverflow = (overflowY, rect1, rect2) => overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    const isAbove$1 = (rect1, rect2) => {\n      const halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    const isBelow$1 = (rect1, rect2) => {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    const containsXY = (rect, clientX, clientY) => clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    const boundingClientRectFromRects = rects => {\n      return foldl(rects, (acc, rect) => {\n        return acc.fold(() => Optional.some(rect), prevRect => {\n          const left = Math.min(rect.left, prevRect.left);\n          const top = Math.min(rect.top, prevRect.top);\n          const right = Math.max(rect.right, prevRect.right);\n          const bottom = Math.max(rect.bottom, prevRect.bottom);\n          return Optional.some({\n            top,\n            right,\n            bottom,\n            left,\n            width: right - left,\n            height: bottom - top\n          });\n        });\n      }, Optional.none());\n    };\n    const distanceToRectEdgeFromXY = (rect, x, y) => {\n      const cx = Math.max(Math.min(x, rect.left + rect.width), rect.left);\n      const cy = Math.max(Math.min(y, rect.top + rect.height), rect.top);\n      return Math.sqrt((x - cx) * (x - cx) + (y - cy) * (y - cy));\n    };\n    const overlapY = (r1, r2) => Math.max(0, Math.min(r1.bottom, r2.bottom) - Math.max(r1.top, r2.top));\n\n    const clamp$2 = (value, min, max) => Math.min(Math.max(value, min), max);\n\n    const getSelectedNode = range => {\n      const startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer === range.endContainer && startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    const getNode$1 = (container, offset) => {\n      if (isElement$6(container) && container.hasChildNodes()) {\n        const childNodes = container.childNodes;\n        const safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    const getNodeUnsafe = (container, offset) => {\n      if (offset < 0 && isElement$6(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    const extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    const isExtendingChar = ch => isString(ch) && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n\n    const or = (...args) => {\n      return x => {\n        for (let i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const and = (...args) => {\n      return x => {\n        for (let i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    const isContentEditableTrue$2 = isContentEditableTrue$3;\n    const isContentEditableFalse$a = isContentEditableFalse$b;\n    const isBr$4 = isBr$6;\n    const isText$8 = isText$b;\n    const isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    const isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    const isTable = matchNodeNames(['table']);\n    const isCaretContainer$1 = isCaretContainer$2;\n    const isCaretCandidate$3 = node => {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$8(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$4(node) || isTable(node) || isNonUiContentEditableFalse(node);\n    };\n    const isUnselectable = node => isElement$6(node) && node.getAttribute('unselectable') === 'true';\n    const isNonUiContentEditableFalse = node => !isUnselectable(node) && isContentEditableFalse$a(node);\n    const isInEditable = (node, root) => {\n      for (let tempNode = node.parentNode; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n        if (isNonUiContentEditableFalse(tempNode)) {\n          return false;\n        }\n        if (isContentEditableTrue$2(tempNode)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    const isAtomicContentEditableFalse = node => {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return !foldl(from(node.getElementsByTagName('*')), (result, elm) => {\n        return result || isContentEditableTrue$2(elm);\n      }, false);\n    };\n    const isAtomic$1 = node => isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    const isEditableCaretCandidate$1 = (node, root) => isCaretCandidate$3(node) && isInEditable(node, root);\n\n    const isElement$4 = isElement$6;\n    const isCaretCandidate$2 = isCaretCandidate$3;\n    const isBlock$2 = matchStyleValues('display', 'block table');\n    const isFloated = matchStyleValues('float', 'left right');\n    const isValidElementCaretCandidate = and(isElement$4, isCaretCandidate$2, not(isFloated));\n    const isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    const isText$7 = isText$b;\n    const isBr$3 = isBr$6;\n    const nodeIndex$1 = DOMUtils.nodeIndex;\n    const resolveIndex$1 = getNodeUnsafe;\n    const createRange$1 = doc => doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    const isWhiteSpace$1 = chr => isString(chr) && /[\\r\\n\\t ]/.test(chr);\n    const isRange = rng => !!rng.setStart && !!rng.setEnd;\n    const isHiddenWhiteSpaceRange = range => {\n      const container = range.startContainer;\n      const offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$b(container)) {\n        const text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const getBrClientRect = brNode => {\n      const doc = brNode.ownerDocument;\n      const rng = createRange$1(doc);\n      const nbsp$1 = doc.createTextNode(nbsp);\n      const parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      const clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    const getBoundingClientRectWebKitText = rng => {\n      const sc = rng.startContainer;\n      const ec = rng.endContainer;\n      const so = rng.startOffset;\n      const eo = rng.endOffset;\n      if (sc === ec && isText$b(ec) && so === 0 && eo === 1) {\n        const newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    const isZeroRect = r => r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    const getBoundingClientRect$1 = item => {\n      var _a;\n      let clientRect;\n      const clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return (_a = getBoundingClientRectWebKitText(item)) !== null && _a !== void 0 ? _a : clientRect;\n      }\n      return clientRect;\n    };\n    const collapseAndInflateWidth = (clientRect, toStart) => {\n      const newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    const getCaretPositionClientRects = caretPosition => {\n      const clientRects = [];\n      const addUniqueAndValidRect = clientRect => {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      const addCharacterOffset = (container, offset) => {\n        const range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      const container = caretPosition.container();\n      const offset = caretPosition.offset();\n      if (isText$7(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$4(container)) {\n        if (caretPosition.isAtEnd()) {\n          const node = resolveIndex$1(container, offset);\n          if (isText$7(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          const node = resolveIndex$1(container, offset);\n          if (isText$7(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          const beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$2(beforeNode) || isBlock$2(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    const CaretPosition = (container, offset, clientRects) => {\n      const isAtStart = () => {\n        if (isText$7(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      const isAtEnd = () => {\n        if (isText$7(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      const toRange = () => {\n        const range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      const getClientRects = () => {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      const isVisible = () => getClientRects().length > 0;\n      const isEqual = caretPosition => caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      const getNode = before => resolveIndex$1(container, before ? offset - 1 : offset);\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange,\n        getClientRects,\n        isVisible,\n        isAtStart,\n        isAtEnd,\n        isEqual,\n        getNode\n      };\n    };\n    CaretPosition.fromRangeStart = range => CaretPosition(range.startContainer, range.startOffset);\n    CaretPosition.fromRangeEnd = range => CaretPosition(range.endContainer, range.endOffset);\n    CaretPosition.after = node => CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    CaretPosition.before = node => CaretPosition(node.parentNode, nodeIndex$1(node));\n    CaretPosition.isAbove = (pos1, pos2) => lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    CaretPosition.isBelow = (pos1, pos2) => lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    CaretPosition.isAtStart = pos => pos ? pos.isAtStart() : false;\n    CaretPosition.isAtEnd = pos => pos ? pos.isAtEnd() : false;\n    CaretPosition.isTextPosition = pos => pos ? isText$b(pos.container()) : false;\n    CaretPosition.isElementPosition = pos => !CaretPosition.isTextPosition(pos);\n\n    const trimEmptyTextNode$1 = (dom, node) => {\n      if (isText$b(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    const insertNode = (dom, rng, node) => {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    const insertFragment = (dom, rng, frag) => {\n      const firstChild = Optional.from(frag.firstChild);\n      const lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(child => trimEmptyTextNode$1(dom, child.previousSibling));\n      lastChild.each(child => trimEmptyTextNode$1(dom, child.nextSibling));\n    };\n    const rangeInsertNode = (dom, rng, node) => {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    const isText$6 = isText$b;\n    const isBogus = isBogus$1;\n    const nodeIndex = DOMUtils.nodeIndex;\n    const normalizedParent = node => {\n      const parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    const getChildNodes = node => {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, (result, node) => {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    const normalizedTextOffset = (node, offset) => {\n      let tempNode = node;\n      while (tempNode = tempNode.previousSibling) {\n        if (!isText$6(tempNode)) {\n          break;\n        }\n        offset += tempNode.data.length;\n      }\n      return offset;\n    };\n    const equal = a => b => a === b;\n    const normalizedNodeIndex = node => {\n      let nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      const numTextFragments = reduce(nodes, (result, node, i) => {\n        if (isText$6(node) && isText$6(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$3(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    const createPathItem = node => {\n      const name = isText$6(node) ? 'text()' : node.nodeName.toLowerCase();\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    const parentsUntil$1 = (root, node, predicate) => {\n      const parents = [];\n      for (let tempNode = node.parentNode; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n        if (predicate && predicate(tempNode)) {\n          break;\n        }\n        parents.push(tempNode);\n      }\n      return parents;\n    };\n    const create$a = (root, caretPosition) => {\n      let path = [];\n      let container = caretPosition.container();\n      let offset = caretPosition.offset();\n      let outputOffset;\n      if (isText$6(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        const childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      let parents = parentsUntil$1(root, container);\n      parents = filter$3(parents, not(isBogus$1));\n      path = path.concat(map$1(parents, node => {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    const resolvePathItem = (node, name, index) => {\n      let nodes = getChildNodes(node);\n      nodes = filter$3(nodes, (node, index) => {\n        return !isText$6(node) || !isText$6(nodes[index - 1]);\n      });\n      nodes = filter$3(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    const findTextPosition = (container, offset) => {\n      let node = container;\n      let targetOffset = 0;\n      while (isText$6(node)) {\n        const dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$6(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$6(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    const resolve$1 = (root, path) => {\n      if (!path) {\n        return null;\n      }\n      const parts = path.split(',');\n      const paths = parts[0].split('/');\n      const offset = parts.length > 1 ? parts[1] : 'before';\n      const container = reduce(paths, (result, value) => {\n        const match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$6(container) && container.parentNode) {\n        let nodeOffset;\n        if (offset === 'after') {\n          nodeOffset = nodeIndex(container) + 1;\n        } else {\n          nodeOffset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, nodeOffset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    const isContentEditableFalse$9 = isContentEditableFalse$b;\n    const getNormalizedTextOffset$1 = (trim, container, offset) => {\n      let trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (let node = container.previousSibling; node && isText$b(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    const getPoint = (dom, trim, normalized, rng, start) => {\n      const container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      const point = [];\n      const root = dom.getRoot();\n      if (isText$b(container)) {\n        point.push(normalized ? getNormalizedTextOffset$1(trim, container, offset) : offset);\n      } else {\n        let after = 0;\n        const childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (let node = container; node && node !== root; node = node.parentNode) {\n        point.push(dom.nodeIndex(node, normalized));\n      }\n      return point;\n    };\n    const getLocation = (trim, selection, normalized, rng) => {\n      const dom = selection.dom;\n      const start = getPoint(dom, trim, normalized, rng, true);\n      const forward = selection.isForward();\n      const fakeCaret = isRangeInCaretContainerBlock(rng) ? { isFakeCaret: true } : {};\n      if (!selection.isCollapsed()) {\n        const end = getPoint(dom, trim, normalized, rng, false);\n        return {\n          start,\n          end,\n          forward,\n          ...fakeCaret\n        };\n      } else {\n        return {\n          start,\n          forward,\n          ...fakeCaret\n        };\n      }\n    };\n    const findIndex = (dom, name, element) => {\n      let count = 0;\n      Tools.each(dom.select(name), node => {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        } else if (node === element) {\n          return false;\n        } else {\n          count++;\n          return;\n        }\n      });\n      return count;\n    };\n    const moveEndPoint$1 = (rng, start) => {\n      let container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      if (isElement$6(container) && container.nodeName === 'TR') {\n        const childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          if (start) {\n            rng.setStart(container, offset);\n          } else {\n            rng.setEnd(container, offset);\n          }\n        }\n      }\n    };\n    const normalizeTableCellSelection = rng => {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    const findSibling = (node, offset) => {\n      if (isElement$6(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$b(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        let sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n      return undefined;\n    };\n    const findAdjacentContentEditableFalseElm = rng => {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    const getOffsetBookmark = (trim, normalized, selection) => {\n      const element = selection.getNode();\n      const rng = selection.getRng();\n      if (element.nodeName === 'IMG' || isContentEditableFalse$9(element)) {\n        const name = element.nodeName;\n        return {\n          name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      const sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        const name = sibling.tagName;\n        return {\n          name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    const getCaretBookmark = selection => {\n      const rng = selection.getRng();\n      return {\n        start: create$a(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$a(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng)),\n        forward: selection.isForward()\n      };\n    };\n    const getRangeBookmark = selection => {\n      return {\n        rng: selection.getRng(),\n        forward: selection.isForward()\n      };\n    };\n    const createBookmarkSpan = (dom, id, filled) => {\n      const args = {\n        'data-mce-type': 'bookmark',\n        id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    const getPersistentBookmark = (selection, filled) => {\n      const dom = selection.dom;\n      let rng = selection.getRng();\n      const id = dom.uniqueId();\n      const collapsed = selection.isCollapsed();\n      const element = selection.getNode();\n      const name = element.nodeName;\n      const forward = selection.isForward();\n      if (name === 'IMG') {\n        return {\n          name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      const rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        const endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      const startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id,\n        keep: true,\n        forward\n      });\n      return {\n        id,\n        forward\n      };\n    };\n    const getBookmark$2 = (selection, type, normalized = false) => {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    const getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    const value$1 = value => {\n      const applyHelper = fn => fn(value);\n      const constHelper = constant(value);\n      const outputHelper = () => output;\n      const output = {\n        tag: true,\n        inner: value,\n        fold: (_onError, onValue) => onValue(value),\n        isValue: always,\n        isError: never,\n        map: mapper => Result.value(mapper(value)),\n        mapError: outputHelper,\n        bind: applyHelper,\n        exists: applyHelper,\n        forall: applyHelper,\n        getOr: constHelper,\n        or: outputHelper,\n        getOrThunk: constHelper,\n        orThunk: outputHelper,\n        getOrDie: constHelper,\n        each: fn => {\n          fn(value);\n        },\n        toOptional: () => Optional.some(value)\n      };\n      return output;\n    };\n    const error = error => {\n      const outputHelper = () => output;\n      const output = {\n        tag: false,\n        inner: error,\n        fold: (onError, _onValue) => onError(error),\n        isValue: never,\n        isError: always,\n        map: outputHelper,\n        mapError: mapper => Result.error(mapper(error)),\n        bind: outputHelper,\n        exists: never,\n        forall: always,\n        getOr: identity,\n        or: identity,\n        getOrThunk: apply$1,\n        orThunk: apply$1,\n        getOrDie: die(String(error)),\n        each: noop,\n        toOptional: Optional.none\n      };\n      return output;\n    };\n    const fromOption = (optional, err) => optional.fold(() => error(err), value$1);\n    const Result = {\n      value: value$1,\n      error,\n      fromOption\n    };\n\n    const generate = cases => {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      const constructors = [];\n      const adt = {};\n      each$e(cases, (acase, count) => {\n        const keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        const key = keys$1[0];\n        const value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = (...args) => {\n          const argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          const match = branches => {\n            const branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            const allReqd = forall(constructors, reqKey => {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: (...foldArgs) => {\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              const target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match,\n            log: label => {\n              console.log(label, {\n                constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    const Adt = { generate };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    const partition$1 = results => {\n      const errors = [];\n      const values = [];\n      each$e(results, result => {\n        result.fold(err => {\n          errors.push(err);\n        }, value => {\n          values.push(value);\n        });\n      });\n      return {\n        errors,\n        values\n      };\n    };\n\n    const isInlinePattern = pattern => pattern.type === 'inline-command' || pattern.type === 'inline-format';\n    const isBlockPattern = pattern => pattern.type === 'block-command' || pattern.type === 'block-format';\n    const hasBlockTrigger = (pattern, trigger) => (pattern.type === 'block-command' || pattern.type === 'block-format') && pattern.trigger === trigger;\n    const normalizePattern = pattern => {\n      var _a;\n      const err = message => Result.error({\n        message,\n        pattern\n      });\n      const formatOrCmd = (name, onFormat, onCommand) => {\n        if (pattern.format !== undefined) {\n          let formats;\n          if (isArray$1(pattern.format)) {\n            if (!forall(pattern.format, isString)) {\n              return err(name + ' pattern has non-string items in the `format` array');\n            }\n            formats = pattern.format;\n          } else if (isString(pattern.format)) {\n            formats = [pattern.format];\n          } else {\n            return err(name + ' pattern has non-string `format` parameter');\n          }\n          return Result.value(onFormat(formats));\n        } else if (pattern.cmd !== undefined) {\n          if (!isString(pattern.cmd)) {\n            return err(name + ' pattern has non-string `cmd` parameter');\n          }\n          return Result.value(onCommand(pattern.cmd, pattern.value));\n        } else {\n          return err(name + ' pattern is missing both `format` and `cmd` parameters');\n        }\n      };\n      if (!isObject(pattern)) {\n        return err('Raw pattern is not an object');\n      }\n      if (!isString(pattern.start)) {\n        return err('Raw pattern is missing `start` parameter');\n      }\n      if (pattern.end !== undefined) {\n        if (!isString(pattern.end)) {\n          return err('Inline pattern has non-string `end` parameter');\n        }\n        if (pattern.start.length === 0 && pattern.end.length === 0) {\n          return err('Inline pattern has empty `start` and `end` parameters');\n        }\n        let start = pattern.start;\n        let end = pattern.end;\n        if (end.length === 0) {\n          end = start;\n          start = '';\n        }\n        return formatOrCmd('Inline', format => ({\n          type: 'inline-format',\n          start,\n          end,\n          format\n        }), (cmd, value) => ({\n          type: 'inline-command',\n          start,\n          end,\n          cmd,\n          value\n        }));\n      } else if (pattern.replacement !== undefined) {\n        if (!isString(pattern.replacement)) {\n          return err('Replacement pattern has non-string `replacement` parameter');\n        }\n        if (pattern.start.length === 0) {\n          return err('Replacement pattern has empty `start` parameter');\n        }\n        return Result.value({\n          type: 'inline-command',\n          start: '',\n          end: pattern.start,\n          cmd: 'mceInsertContent',\n          value: pattern.replacement\n        });\n      } else {\n        const trigger = (_a = pattern.trigger) !== null && _a !== void 0 ? _a : 'space';\n        if (pattern.start.length === 0) {\n          return err('Block pattern has empty `start` parameter');\n        }\n        return formatOrCmd('Block', formats => ({\n          type: 'block-format',\n          start: pattern.start,\n          format: formats[0],\n          trigger\n        }), (command, commandValue) => ({\n          type: 'block-command',\n          start: pattern.start,\n          cmd: command,\n          value: commandValue,\n          trigger\n        }));\n      }\n    };\n    const getBlockPatterns = patterns => filter$5(patterns, isBlockPattern);\n    const getInlinePatterns = patterns => filter$5(patterns, isInlinePattern);\n    const createPatternSet = (patterns, dynamicPatternsLookup) => ({\n      inlinePatterns: getInlinePatterns(patterns),\n      blockPatterns: getBlockPatterns(patterns),\n      dynamicPatternsLookup\n    });\n    const filterByTrigger = (patterns, trigger) => {\n      return {\n        ...patterns,\n        blockPatterns: filter$5(patterns.blockPatterns, pattern => hasBlockTrigger(pattern, trigger))\n      };\n    };\n    const fromRawPatterns = patterns => {\n      const normalized = partition$1(map$3(patterns, normalizePattern));\n      each$e(normalized.errors, err => console.error(err.message, err.pattern));\n      return normalized.values;\n    };\n    const fromRawPatternsLookup = lookupFn => {\n      return ctx => {\n        const rawPatterns = lookupFn(ctx);\n        return fromRawPatterns(rawPatterns);\n      };\n    };\n\n    const deviceDetection$1 = detect$1().deviceType;\n    const isTouch = deviceDetection$1.isTouch();\n    const DOM$a = DOMUtils.DOM;\n    const getHash = value => {\n      const items = value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(',');\n      return foldl(items, (output, item) => {\n        const arr = item.split('=');\n        const key = arr[0];\n        const val = arr.length > 1 ? arr[1] : key;\n        output[trim$4(key)] = trim$4(val);\n        return output;\n      }, {});\n    };\n    const isRegExp = x => is$4(x, RegExp);\n    const option = name => editor => editor.options.get(name);\n    const stringOrObjectProcessor = value => isString(value) || isObject(value);\n    const bodyOptionProcessor = (editor, defaultValue = '') => value => {\n      const valid = isString(value);\n      if (valid) {\n        if (value.indexOf('=') !== -1) {\n          const bodyObj = getHash(value);\n          return {\n            value: get$a(bodyObj, editor.id).getOr(defaultValue),\n            valid\n          };\n        } else {\n          return {\n            value,\n            valid\n          };\n        }\n      } else {\n        return {\n          valid: false,\n          message: 'Must be a string.'\n        };\n      }\n    };\n    const register$7 = editor => {\n      const registerOption = editor.options.register;\n      registerOption('id', {\n        processor: 'string',\n        default: editor.id\n      });\n      registerOption('selector', { processor: 'string' });\n      registerOption('target', { processor: 'object' });\n      registerOption('suffix', { processor: 'string' });\n      registerOption('cache_suffix', { processor: 'string' });\n      registerOption('base_url', { processor: 'string' });\n      registerOption('referrer_policy', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('language_load', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('inline', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('iframe_attrs', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('doctype', {\n        processor: 'string',\n        default: '<!DOCTYPE html>'\n      });\n      registerOption('document_base_url', {\n        processor: 'string',\n        default: editor.documentBaseUrl\n      });\n      registerOption('body_id', {\n        processor: bodyOptionProcessor(editor, 'tinymce'),\n        default: 'tinymce'\n      });\n      registerOption('body_class', {\n        processor: bodyOptionProcessor(editor),\n        default: ''\n      });\n      registerOption('content_security_policy', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('br_in_pre', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('forced_root_block', {\n        processor: value => {\n          const valid = isString(value) && isNotEmpty(value);\n          if (valid) {\n            return {\n              value,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a non-empty string.'\n            };\n          }\n        },\n        default: 'p'\n      });\n      registerOption('forced_root_block_attrs', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('newline_behavior', {\n        processor: value => {\n          const valid = contains$2([\n            'block',\n            'linebreak',\n            'invert',\n            'default'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: block, linebreak, invert or default.'\n          };\n        },\n        default: 'default'\n      });\n      registerOption('br_newline_selector', {\n        processor: 'string',\n        default: '.mce-toc h2,figcaption,caption'\n      });\n      registerOption('no_newline_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('keep_styles', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('end_container_on_empty_block', {\n        processor: value => {\n          if (isBoolean(value)) {\n            return {\n              valid: true,\n              value\n            };\n          } else if (isString(value)) {\n            return {\n              valid: true,\n              value\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be boolean or a string'\n            };\n          }\n        },\n        default: 'blockquote'\n      });\n      registerOption('font_size_style_values', {\n        processor: 'string',\n        default: 'xx-small,x-small,small,medium,large,x-large,xx-large'\n      });\n      registerOption('font_size_legacy_values', {\n        processor: 'string',\n        default: 'xx-small,small,medium,large,x-large,xx-large,300%'\n      });\n      registerOption('font_size_classes', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('automatic_uploads', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('images_reuse_filename', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('images_replace_blob_uris', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('icons', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('icons_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_base_path', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_credentials', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('images_upload_handler', { processor: 'function' });\n      registerOption('language', {\n        processor: 'string',\n        default: 'en'\n      });\n      registerOption('language_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('entity_encoding', {\n        processor: 'string',\n        default: 'named'\n      });\n      registerOption('indent', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('indent_before', {\n        processor: 'string',\n        default: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'\n      });\n      registerOption('indent_after', {\n        processor: 'string',\n        default: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'\n      });\n      registerOption('indent_use_margin', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('indentation', {\n        processor: 'string',\n        default: '40px'\n      });\n      registerOption('content_css', {\n        processor: value => {\n          const valid = value === false || isString(value) || isArrayOf(value, isString);\n          if (valid) {\n            if (isString(value)) {\n              return {\n                value: map$3(value.split(','), trim$4),\n                valid\n              };\n            } else if (isArray$1(value)) {\n              return {\n                value,\n                valid\n              };\n            } else if (value === false) {\n              return {\n                value: [],\n                valid\n              };\n            } else {\n              return {\n                value,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false, a string or an array of strings.'\n            };\n          }\n        },\n        default: isInline$1(editor) ? [] : ['default']\n      });\n      registerOption('content_style', { processor: 'string' });\n      registerOption('content_css_cors', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('font_css', {\n        processor: value => {\n          const valid = isString(value) || isArrayOf(value, isString);\n          if (valid) {\n            const newValue = isArray$1(value) ? value : map$3(value.split(','), trim$4);\n            return {\n              value: newValue,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a string or an array of strings.'\n            };\n          }\n        },\n        default: []\n      });\n      registerOption('inline_boundaries', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('inline_boundaries_selector', {\n        processor: 'string',\n        default: 'a[href],code,span.mce-annotation'\n      });\n      registerOption('object_resizing', {\n        processor: value => {\n          const valid = isBoolean(value) || isString(value);\n          if (valid) {\n            if (value === false || deviceDetection$1.isiPhone() || deviceDetection$1.isiPad()) {\n              return {\n                value: '',\n                valid\n              };\n            } else {\n              return {\n                value: value === true ? 'table,img,figure.image,div,video,iframe' : value,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be boolean or a string'\n            };\n          }\n        },\n        default: !isTouch\n      });\n      registerOption('resize_img_proportional', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('event_root', { processor: 'string' });\n      registerOption('service_message', { processor: 'string' });\n      registerOption('theme', {\n        processor: value => value === false || isString(value) || isFunction(value),\n        default: 'silver'\n      });\n      registerOption('theme_url', { processor: 'string' });\n      registerOption('formats', { processor: 'object' });\n      registerOption('format_empty_lines', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('format_noneditable_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('preview_styles', {\n        processor: value => {\n          const valid = value === false || isString(value);\n          if (valid) {\n            return {\n              value: value === false ? '' : value,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false or a string'\n            };\n          }\n        },\n        default: 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow'\n      });\n      registerOption('custom_ui_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('hidden_input', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('submit_patch', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('encoding', { processor: 'string' });\n      registerOption('add_form_submit_trigger', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('add_unload_trigger', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('custom_undo_redo_levels', {\n        processor: 'number',\n        default: 0\n      });\n      registerOption('disable_nodechange', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('readonly', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('editable_root', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('plugins', {\n        processor: 'string[]',\n        default: []\n      });\n      registerOption('external_plugins', { processor: 'object' });\n      registerOption('forced_plugins', { processor: 'string[]' });\n      registerOption('model', {\n        processor: 'string',\n        default: editor.hasPlugin('rtc') ? 'plugin' : 'dom'\n      });\n      registerOption('model_url', { processor: 'string' });\n      registerOption('block_unsupported_drop', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('visual', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('visual_table_class', {\n        processor: 'string',\n        default: 'mce-item-table'\n      });\n      registerOption('visual_anchor_class', {\n        processor: 'string',\n        default: 'mce-item-anchor'\n      });\n      registerOption('iframe_aria_text', {\n        processor: 'string',\n        default: 'Rich Text Area. Press ALT-0 for help.'\n      });\n      registerOption('setup', { processor: 'function' });\n      registerOption('init_instance_callback', { processor: 'function' });\n      registerOption('url_converter', {\n        processor: 'function',\n        default: editor.convertURL\n      });\n      registerOption('url_converter_scope', {\n        processor: 'object',\n        default: editor\n      });\n      registerOption('urlconverter_callback', { processor: 'function' });\n      registerOption('allow_conditional_comments', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_html_data_urls', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_svg_data_urls', { processor: 'boolean' });\n      registerOption('allow_html_in_named_anchor', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_script_urls', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_unsafe_link_target', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('convert_fonts_to_spans', {\n        processor: 'boolean',\n        default: true,\n        deprecated: true\n      });\n      registerOption('fix_list_elements', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('preserve_cdata', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('remove_trailing_brs', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('pad_empty_with_br', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('inline_styles', {\n        processor: 'boolean',\n        default: true,\n        deprecated: true\n      });\n      registerOption('element_format', {\n        processor: 'string',\n        default: 'html'\n      });\n      registerOption('entities', { processor: 'string' });\n      registerOption('schema', {\n        processor: 'string',\n        default: 'html5'\n      });\n      registerOption('convert_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('relative_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('remove_script_host', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('custom_elements', { processor: stringOrObjectProcessor });\n      registerOption('extended_valid_elements', { processor: 'string' });\n      registerOption('invalid_elements', { processor: 'string' });\n      registerOption('invalid_styles', { processor: stringOrObjectProcessor });\n      registerOption('valid_children', { processor: 'string' });\n      registerOption('valid_classes', { processor: stringOrObjectProcessor });\n      registerOption('valid_elements', { processor: 'string' });\n      registerOption('valid_styles', { processor: stringOrObjectProcessor });\n      registerOption('verify_html', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('auto_focus', { processor: value => isString(value) || value === true });\n      registerOption('browser_spellcheck', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('protect', { processor: 'array' });\n      registerOption('images_file_types', {\n        processor: 'string',\n        default: 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp'\n      });\n      registerOption('deprecation_warnings', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('a11y_advanced_options', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('api_key', { processor: 'string' });\n      registerOption('license_key', { processor: 'string' });\n      registerOption('paste_block_drop', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('paste_data_images', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_preprocess', { processor: 'function' });\n      registerOption('paste_postprocess', { processor: 'function' });\n      registerOption('paste_webkit_styles', {\n        processor: 'string',\n        default: 'none'\n      });\n      registerOption('paste_remove_styles_if_webkit', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_merge_formats', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('smart_paste', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_as_text', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('paste_tab_spaces', {\n        processor: 'number',\n        default: 4\n      });\n      registerOption('text_patterns', {\n        processor: value => {\n          if (isArrayOf(value, isObject) || value === false) {\n            const patterns = value === false ? [] : value;\n            return {\n              value: fromRawPatterns(patterns),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be an array of objects or false.'\n            };\n          }\n        },\n        default: [\n          {\n            start: '*',\n            end: '*',\n            format: 'italic'\n          },\n          {\n            start: '**',\n            end: '**',\n            format: 'bold'\n          },\n          {\n            start: '#',\n            format: 'h1',\n            trigger: 'space'\n          },\n          {\n            start: '##',\n            format: 'h2',\n            trigger: 'space'\n          },\n          {\n            start: '###',\n            format: 'h3',\n            trigger: 'space'\n          },\n          {\n            start: '####',\n            format: 'h4',\n            trigger: 'space'\n          },\n          {\n            start: '#####',\n            format: 'h5',\n            trigger: 'space'\n          },\n          {\n            start: '######',\n            format: 'h6',\n            trigger: 'space'\n          },\n          {\n            start: '1.',\n            cmd: 'InsertOrderedList',\n            trigger: 'space'\n          },\n          {\n            start: '*',\n            cmd: 'InsertUnorderedList',\n            trigger: 'space'\n          },\n          {\n            start: '-',\n            cmd: 'InsertUnorderedList',\n            trigger: 'space'\n          },\n          {\n            start: '>',\n            cmd: 'mceBlockQuote',\n            trigger: 'space'\n          },\n          {\n            start: '---',\n            cmd: 'InsertHorizontalRule',\n            trigger: 'space'\n          }\n        ]\n      });\n      registerOption('text_patterns_lookup', {\n        processor: value => {\n          if (isFunction(value)) {\n            return {\n              value: fromRawPatternsLookup(value),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a single function'\n            };\n          }\n        },\n        default: _ctx => []\n      });\n      registerOption('noneditable_class', {\n        processor: 'string',\n        default: 'mceNonEditable'\n      });\n      registerOption('editable_class', {\n        processor: 'string',\n        default: 'mceEditable'\n      });\n      registerOption('noneditable_regexp', {\n        processor: value => {\n          if (isArrayOf(value, isRegExp)) {\n            return {\n              value,\n              valid: true\n            };\n          } else if (isRegExp(value)) {\n            return {\n              value: [value],\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a RegExp or an array of RegExp.'\n            };\n          }\n        },\n        default: []\n      });\n      registerOption('table_tab_navigation', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('highlight_on_focus', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('xss_sanitization', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('details_initial_state', {\n        processor: value => {\n          const valid = contains$2([\n            'inherited',\n            'collapsed',\n            'expanded'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: inherited, collapsed, or expanded.'\n          };\n        },\n        default: 'inherited'\n      });\n      registerOption('details_serialized_state', {\n        processor: value => {\n          const valid = contains$2([\n            'inherited',\n            'collapsed',\n            'expanded'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: inherited, collapsed, or expanded.'\n          };\n        },\n        default: 'inherited'\n      });\n      registerOption('init_content_sync', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('newdocument_content', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('sandbox_iframes', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('sandbox_iframes_exclusions', {\n        processor: 'string[]',\n        default: [\n          'youtube.com',\n          'youtu.be',\n          'vimeo.com',\n          'player.vimeo.com',\n          'dailymotion.com',\n          'embed.music.apple.com',\n          'open.spotify.com',\n          'giphy.com',\n          'dai.ly',\n          'codepen.io'\n        ]\n      });\n      registerOption('convert_unsafe_embeds', {\n        processor: 'boolean',\n        default: true\n      });\n      editor.on('ScriptsLoaded', () => {\n        registerOption('directionality', {\n          processor: 'string',\n          default: I18n.isRtl() ? 'rtl' : undefined\n        });\n        registerOption('placeholder', {\n          processor: 'string',\n          default: DOM$a.getAttrib(editor.getElement(), 'placeholder')\n        });\n      });\n    };\n    const getIframeAttrs = option('iframe_attrs');\n    const getDocType = option('doctype');\n    const getDocumentBaseUrl = option('document_base_url');\n    const getBodyId = option('body_id');\n    const getBodyClass = option('body_class');\n    const getContentSecurityPolicy = option('content_security_policy');\n    const shouldPutBrInPre$1 = option('br_in_pre');\n    const getForcedRootBlock = option('forced_root_block');\n    const getForcedRootBlockAttrs = option('forced_root_block_attrs');\n    const getNewlineBehavior = option('newline_behavior');\n    const getBrNewLineSelector = option('br_newline_selector');\n    const getNoNewLineSelector = option('no_newline_selector');\n    const shouldKeepStyles = option('keep_styles');\n    const shouldEndContainerOnEmptyBlock = option('end_container_on_empty_block');\n    const isAutomaticUploadsEnabled = option('automatic_uploads');\n    const shouldReuseFileName = option('images_reuse_filename');\n    const shouldReplaceBlobUris = option('images_replace_blob_uris');\n    const getIconPackName = option('icons');\n    const getIconsUrl = option('icons_url');\n    const getImageUploadUrl = option('images_upload_url');\n    const getImageUploadBasePath = option('images_upload_base_path');\n    const getImagesUploadCredentials = option('images_upload_credentials');\n    const getImagesUploadHandler = option('images_upload_handler');\n    const shouldUseContentCssCors = option('content_css_cors');\n    const getReferrerPolicy = option('referrer_policy');\n    const getLanguageCode = option('language');\n    const getLanguageUrl = option('language_url');\n    const shouldIndentUseMargin = option('indent_use_margin');\n    const getIndentation = option('indentation');\n    const getContentCss = option('content_css');\n    const getContentStyle = option('content_style');\n    const getFontCss = option('font_css');\n    const getDirectionality = option('directionality');\n    const getInlineBoundarySelector = option('inline_boundaries_selector');\n    const getObjectResizing = option('object_resizing');\n    const getResizeImgProportional = option('resize_img_proportional');\n    const getPlaceholder = option('placeholder');\n    const getEventRoot = option('event_root');\n    const getServiceMessage = option('service_message');\n    const getTheme = option('theme');\n    const getThemeUrl = option('theme_url');\n    const getModel = option('model');\n    const getModelUrl = option('model_url');\n    const isInlineBoundariesEnabled = option('inline_boundaries');\n    const getFormats = option('formats');\n    const getPreviewStyles = option('preview_styles');\n    const canFormatEmptyLines = option('format_empty_lines');\n    const getFormatNoneditableSelector = option('format_noneditable_selector');\n    const getCustomUiSelector = option('custom_ui_selector');\n    const isInline$1 = option('inline');\n    const hasHiddenInput = option('hidden_input');\n    const shouldPatchSubmit = option('submit_patch');\n    const shouldAddFormSubmitTrigger = option('add_form_submit_trigger');\n    const shouldAddUnloadTrigger = option('add_unload_trigger');\n    const getCustomUndoRedoLevels = option('custom_undo_redo_levels');\n    const shouldDisableNodeChange = option('disable_nodechange');\n    const isReadOnly$1 = option('readonly');\n    const hasEditableRoot$1 = option('editable_root');\n    const hasContentCssCors = option('content_css_cors');\n    const getPlugins = option('plugins');\n    const getExternalPlugins$1 = option('external_plugins');\n    const shouldBlockUnsupportedDrop = option('block_unsupported_drop');\n    const isVisualAidsEnabled = option('visual');\n    const getVisualAidsTableClass = option('visual_table_class');\n    const getVisualAidsAnchorClass = option('visual_anchor_class');\n    const getIframeAriaText = option('iframe_aria_text');\n    const getSetupCallback = option('setup');\n    const getInitInstanceCallback = option('init_instance_callback');\n    const getUrlConverterCallback = option('urlconverter_callback');\n    const getAutoFocus = option('auto_focus');\n    const shouldBrowserSpellcheck = option('browser_spellcheck');\n    const getProtect = option('protect');\n    const shouldPasteBlockDrop = option('paste_block_drop');\n    const shouldPasteDataImages = option('paste_data_images');\n    const getPastePreProcess = option('paste_preprocess');\n    const getPastePostProcess = option('paste_postprocess');\n    const getNewDocumentContent = option('newdocument_content');\n    const getPasteWebkitStyles = option('paste_webkit_styles');\n    const shouldPasteRemoveWebKitStyles = option('paste_remove_styles_if_webkit');\n    const shouldPasteMergeFormats = option('paste_merge_formats');\n    const isSmartPasteEnabled = option('smart_paste');\n    const isPasteAsTextEnabled = option('paste_as_text');\n    const getPasteTabSpaces = option('paste_tab_spaces');\n    const shouldAllowHtmlDataUrls = option('allow_html_data_urls');\n    const getTextPatterns = option('text_patterns');\n    const getTextPatternsLookup = option('text_patterns_lookup');\n    const getNonEditableClass = option('noneditable_class');\n    const getEditableClass = option('editable_class');\n    const getNonEditableRegExps = option('noneditable_regexp');\n    const shouldPreserveCData = option('preserve_cdata');\n    const shouldHighlightOnFocus = option('highlight_on_focus');\n    const shouldSanitizeXss = option('xss_sanitization');\n    const shouldUseDocumentWrite = option('init_content_sync');\n    const hasTextPatternsLookup = editor => editor.options.isSet('text_patterns_lookup');\n    const getFontStyleValues = editor => Tools.explode(editor.options.get('font_size_style_values'));\n    const getFontSizeClasses = editor => Tools.explode(editor.options.get('font_size_classes'));\n    const isEncodingXml = editor => editor.options.get('encoding') === 'xml';\n    const getAllowedImageFileTypes = editor => Tools.explode(editor.options.get('images_file_types'));\n    const hasTableTabNavigation = option('table_tab_navigation');\n    const getDetailsInitialState = option('details_initial_state');\n    const getDetailsSerializedState = option('details_serialized_state');\n    const shouldSandboxIframes = option('sandbox_iframes');\n    const getSandboxIframesExclusions = editor => editor.options.get('sandbox_iframes_exclusions');\n    const shouldConvertUnsafeEmbeds = option('convert_unsafe_embeds');\n    const getLicenseKey = option('license_key');\n    const getApiKey = option('api_key');\n\n    const isElement$3 = isElement$6;\n    const isText$5 = isText$b;\n    const removeNode$1 = node => {\n      const parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    const trimCount = text => {\n      const trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    const deleteZwspChars = caretContainer => {\n      let idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    const removeUnchanged = (caretContainer, pos) => {\n      remove$2(caretContainer);\n      return pos;\n    };\n    const removeTextAndReposition = (caretContainer, pos) => {\n      const before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      const after = trimCount(caretContainer.data.substr(pos.offset()));\n      const text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    const removeElementAndReposition = (caretContainer, pos) => {\n      const parentNode = pos.container();\n      const newPosition = indexOf$1(from(parentNode.childNodes), caretContainer).map(index => {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    const removeTextCaretContainer = (caretContainer, pos) => isText$5(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    const removeElementCaretContainer = (caretContainer, pos) => pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    const removeAndReposition = (container, pos) => CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    const remove$2 = caretContainerNode => {\n      if (isElement$3(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$5(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    const isContentEditableFalse$8 = isContentEditableFalse$b;\n    const isMedia$1 = isMedia$2;\n    const isTableCell$1 = isTableCell$3;\n    const inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    const getAbsoluteClientRect = (root, element, before) => {\n      const clientRect = collapse(element.getBoundingClientRect(), before);\n      let scrollX;\n      let scrollY;\n      if (root.tagName === 'BODY') {\n        const docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        const rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      let margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    const trimInlineCaretContainers = root => {\n      var _a, _b;\n      const fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (let i = 0; i < fakeCaretTargetNodes.length; i++) {\n        const node = fakeCaretTargetNodes[i].dom;\n        let sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          const data = sibling.data;\n          if (data.length === 1) {\n            (_a = sibling.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          const data = sibling.data;\n          if (data.length === 1) {\n            (_b = sibling.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    const FakeCaret = (editor, root, isBlock, hasFocus) => {\n      const lastVisualCaret = value$2();\n      let cursorInterval;\n      let caretContainerNode;\n      const caretBlock = getForcedRootBlock(editor);\n      const dom = editor.dom;\n      const show = (before, element) => {\n        let rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          const caretContainer = insertBlock(caretBlock, element, before);\n          const clientRect = getAbsoluteClientRect(root, element, before);\n          dom.setStyle(caretContainer, 'top', clientRect.top);\n          dom.setStyle(caretContainer, 'caret-color', 'transparent');\n          caretContainerNode = caretContainer;\n          const caret = dom.create('div', {\n            'class': 'mce-visual-caret',\n            'data-mce-bogus': 'all'\n          });\n          dom.setStyles(caret, { ...clientRect });\n          dom.add(root, caret);\n          lastVisualCaret.set({\n            caret,\n            element,\n            before\n          });\n          if (before) {\n            dom.addClass(caret, 'mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainer, 0);\n          rng.setEnd(caretContainer, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      const hide = () => {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(caretState => {\n          dom.remove(caretState.caret);\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      const startBlink = () => {\n        cursorInterval = setInterval(() => {\n          lastVisualCaret.on(caretState => {\n            if (hasFocus()) {\n              dom.toggleClass(caretState.caret, 'mce-visual-caret-hidden');\n            } else {\n              dom.addClass(caretState.caret, 'mce-visual-caret-hidden');\n            }\n          });\n        }, 500);\n      };\n      const reposition = () => {\n        lastVisualCaret.on(caretState => {\n          const clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          dom.setStyles(caretState.caret, { ...clientRect });\n        });\n      };\n      const destroy = () => clearInterval(cursorInterval);\n      const getCss = () => '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      return {\n        show,\n        hide,\n        getCss,\n        reposition,\n        destroy\n      };\n    };\n    const isFakeCaretTableBrowser = () => Env.browser.isFirefox();\n    const isInlineFakeCaretTarget = node => isContentEditableFalse$8(node) || isMedia$1(node);\n    const isFakeCaretTarget = node => {\n      const isTarget = isInlineFakeCaretTarget(node) || isTable$2(node) && isFakeCaretTableBrowser();\n      return isTarget && parentElement(SugarElement.fromDom(node)).exists(isEditable$2);\n    };\n\n    const isContentEditableTrue$1 = isContentEditableTrue$3;\n    const isContentEditableFalse$7 = isContentEditableFalse$b;\n    const isMedia = isMedia$2;\n    const isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    const isCaretContainer = isCaretContainer$2;\n    const isCaretContainerBlock = isCaretContainerBlock$1;\n    const isElement$2 = isElement$6;\n    const isText$4 = isText$b;\n    const isCaretCandidate$1 = isCaretCandidate$3;\n    const isForwards = direction => direction > 0;\n    const isBackwards = direction => direction < 0;\n    const skipCaretContainers = (walk, shallow) => {\n      let node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    const findNode = (node, direction, predicateFn, rootNode, shallow) => {\n      const walker = new DomTreeWalker(node, rootNode);\n      const isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      let tempNode;\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          tempNode = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n        while (tempNode = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          tempNode = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n        while (tempNode = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      return null;\n    };\n    const getEditingHost = (node, rootNode) => {\n      const isCETrue = node => isContentEditableTrue$1(node.dom);\n      const isRoot = node => node.dom === rootNode;\n      return ancestor$4(SugarElement.fromDom(node), isCETrue, isRoot).map(elm => elm.dom).getOr(rootNode);\n    };\n    const getParentBlock$3 = (node, rootNode) => {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    const isInSameBlock = (caretPosition1, caretPosition2, rootNode) => getParentBlock$3(caretPosition1.container(), rootNode) === getParentBlock$3(caretPosition2.container(), rootNode);\n    const getChildNodeAtRelativeOffset = (relativeOffset, caretPosition) => {\n      if (!caretPosition) {\n        return Optional.none();\n      }\n      const container = caretPosition.container();\n      const offset = caretPosition.offset();\n      if (!isElement$2(container)) {\n        return Optional.none();\n      }\n      return Optional.from(container.childNodes[offset + relativeOffset]);\n    };\n    const beforeAfter = (before, node) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const range = doc.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    const isNodesInSameBlock = (root, node1, node2) => getParentBlock$3(node1, root) === getParentBlock$3(node2, root);\n    const lean = (left, root, node) => {\n      const siblingName = left ? 'previousSibling' : 'nextSibling';\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        let sibling = tempNode[siblingName];\n        if (sibling && isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, tempNode)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        tempNode = tempNode.parentNode;\n      }\n      return null;\n    };\n    const before$2 = curry(beforeAfter, true);\n    const after$2 = curry(beforeAfter, false);\n    const normalizeRange = (direction, root, range) => {\n      let node;\n      const leanLeft = curry(lean, true, root);\n      const leanRight = curry(lean, false, root);\n      const container = range.startContainer;\n      const offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        const block = isText$4(container) ? container.parentNode : container;\n        const location = block.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = block.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = block.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$b(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    const getRelativeCefElm = (forward, caretPosition) => getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition).filter(isContentEditableFalse$7);\n    const getNormalizedRangeEndPoint = (direction, root, range) => {\n      const normalizedRange = normalizeRange(direction, root, range);\n      return direction === -1 ? CaretPosition.fromRangeStart(normalizedRange) : CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    const getElementFromPosition = pos => Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    const getElementFromPrevPosition = pos => Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    const getVisualCaretPosition = (walkFn, caretPosition) => {\n      let pos = caretPosition;\n      while (pos = walkFn(pos)) {\n        if (pos.isVisible()) {\n          return pos;\n        }\n      }\n      return pos;\n    };\n    const isMoveInsideSameBlock = (from, to) => {\n      const inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$6(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    const isContentEditableFalse$6 = isContentEditableFalse$b;\n    const isText$3 = isText$b;\n    const isElement$1 = isElement$6;\n    const isBr$2 = isBr$6;\n    const isCaretCandidate = isCaretCandidate$3;\n    const isAtomic = isAtomic$1;\n    const isEditableCaretCandidate = isEditableCaretCandidate$1;\n    const getParents$3 = (node, root) => {\n      const parents = [];\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        parents.push(tempNode);\n        tempNode = tempNode.parentNode;\n      }\n      return parents;\n    };\n    const nodeAtIndex = (container, offset) => {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    const getCaretCandidatePosition = (direction, node) => {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$3(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$3(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$3(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$3(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$2(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    const moveForwardFromBr = (root, nextNode) => {\n      const nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$3(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    const findCaretPosition$1 = (direction, startPos, root) => {\n      let node;\n      let nextNode;\n      let innerNode;\n      let caretPosition;\n      if (!isElement$1(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement$1(root.lastChild)) {\n          return isBr$2(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      const container = caretPosition.container();\n      let offset = caretPosition.offset();\n      if (isText$3(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$3(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$3(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$2(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$3(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$3(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (node && (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart())) {\n        node = findNode(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = node ? findNode(node, direction, isEditableCaretCandidate, root) : node;\n      const rootContentEditableFalseElm = last$1(filter$5(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    const CaretWalker = root => ({\n      next: caretPosition => {\n        return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n      },\n      prev: caretPosition => {\n        return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n      }\n    });\n\n    const walkToPositionIn = (forward, root, start) => {\n      const position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    const afterElement = node => isBr$6(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    const isBeforeOrStart = position => {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    const isAfterOrEnd = position => {\n      if (CaretPosition.isTextPosition(position)) {\n        const container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    const isBeforeAfterSameElement = (from, to) => !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    const isAtBr = position => !CaretPosition.isTextPosition(position) && isBr$6(position.getNode());\n    const shouldSkipPosition = (forward, from, to) => {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    const fromPosition = (forward, root, pos) => {\n      const walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    const navigate = (forward, root, from) => fromPosition(forward, root, from).bind(to => {\n      if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n        return fromPosition(forward, root, to);\n      } else {\n        return Optional.some(to);\n      }\n    });\n    const navigateIgnore = (forward, root, from, ignoreFilter) => navigate(forward, root, from).bind(pos => ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos));\n    const positionIn = (forward, element) => {\n      const startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$b(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    const nextPosition = curry(fromPosition, true);\n    const prevPosition = curry(fromPosition, false);\n    const firstPositionIn = curry(positionIn, true);\n    const lastPositionIn = curry(positionIn, false);\n\n    const CARET_ID = '_mce_caret';\n    const isCaretNode = node => isElement$6(node) && node.id === CARET_ID;\n    const getParentCaretContainer = (body, node) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== body) {\n        if (isCaretNode(currentNode)) {\n          return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    };\n\n    const isStringPathBookmark = bookmark => isString(bookmark.start);\n    const isRangeBookmark = bookmark => has$2(bookmark, 'rng');\n    const isIdBookmark = bookmark => has$2(bookmark, 'id');\n    const isIndexBookmark = bookmark => has$2(bookmark, 'name');\n    const isPathBookmark = bookmark => Tools.isArray(bookmark.start);\n\n    const isForwardBookmark = bookmark => !isIndexBookmark(bookmark) && isBoolean(bookmark.forward) ? bookmark.forward : true;\n    const addBogus = (dom, node) => {\n      if (isElement$6(node) && dom.isBlock(node) && !node.innerHTML) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    const resolveCaretPositionBookmark = (dom, bookmark) => {\n      const startPos = Optional.from(resolve$1(dom.getRoot(), bookmark.start));\n      const endPos = Optional.from(resolve$1(dom.getRoot(), bookmark.end));\n      return lift2(startPos, endPos, (start, end) => {\n        const range = dom.createRng();\n        range.setStart(start.container(), start.offset());\n        range.setEnd(end.container(), end.offset());\n        return {\n          range,\n          forward: isForwardBookmark(bookmark)\n        };\n      });\n    };\n    const insertZwsp = (node, rng) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const textNode = doc.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    const isEmpty$1 = node => !node.hasChildNodes();\n    const tryFindRangePosition = (node, rng) => lastPositionIn(node).fold(never, pos => {\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      return true;\n    });\n    const padEmptyCaretContainer = (root, node, rng) => {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const setEndPoint = (dom, start, bookmark, rng) => {\n      const point = bookmark[start ? 'start' : 'end'];\n      const root = dom.getRoot();\n      if (point) {\n        let node = root;\n        let offset = point[0];\n        for (let i = point.length - 1; node && i >= 1; i--) {\n          const children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (isText$b(node)) {\n          offset = Math.min(point[0], node.data.length);\n        }\n        if (isElement$6(node)) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    const isValidTextNode = node => isText$b(node) && node.data.length > 0;\n    const restoreEndPoint = (dom, suffix, bookmark) => {\n      const marker = dom.get(bookmark.id + '_' + suffix);\n      const markerParent = marker === null || marker === void 0 ? void 0 : marker.parentNode;\n      const keep = bookmark.keep;\n      if (marker && markerParent) {\n        let container;\n        let offset;\n        if (suffix === 'start') {\n          if (!keep) {\n            container = markerParent;\n            offset = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              container = marker.firstChild;\n              offset = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              container = marker.nextSibling;\n              offset = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              container = marker.previousSibling;\n              offset = marker.previousSibling.data.length;\n            } else {\n              container = markerParent;\n              offset = dom.nodeIndex(marker) + 1;\n            }\n          }\n        } else {\n          if (!keep) {\n            container = markerParent;\n            offset = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              container = marker.firstChild;\n              offset = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              container = marker.previousSibling;\n              offset = marker.previousSibling.data.length;\n            } else {\n              container = markerParent;\n              offset = dom.nodeIndex(marker);\n            }\n          }\n        }\n        if (!keep) {\n          const prev = marker.previousSibling;\n          const next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), node => {\n            if (isText$b(node)) {\n              node.data = node.data.replace(/\\uFEFF/g, '');\n            }\n          });\n          let otherMarker;\n          while (otherMarker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(otherMarker, true);\n          }\n          if (isText$b(next) && isText$b(prev) && !Env.browser.isOpera()) {\n            const idx = prev.data.length;\n            prev.appendData(next.data);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    const resolvePaths = (dom, bookmark) => {\n      const range = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, range) && setEndPoint(dom, false, bookmark, range)) {\n        return Optional.some({\n          range,\n          forward: isForwardBookmark(bookmark)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const resolveId = (dom, bookmark) => {\n      const startPos = restoreEndPoint(dom, 'start', bookmark);\n      const endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), (spos, epos) => {\n        const range = dom.createRng();\n        range.setStart(addBogus(dom, spos.container()), spos.offset());\n        range.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return {\n          range,\n          forward: isForwardBookmark(bookmark)\n        };\n      });\n    };\n    const resolveIndex = (dom, bookmark) => Optional.from(dom.select(bookmark.name)[bookmark.index]).map(elm => {\n      const range = dom.createRng();\n      range.selectNode(elm);\n      return {\n        range,\n        forward: true\n      };\n    });\n    const resolve = (selection, bookmark) => {\n      const dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return resolveCaretPositionBookmark(dom, bookmark);\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some({\n            range: bookmark.rng,\n            forward: isForwardBookmark(bookmark)\n          });\n        }\n      }\n      return Optional.none();\n    };\n\n    const getBookmark$1 = (selection, type, normalized) => {\n      return getBookmark$2(selection, type, normalized);\n    };\n    const moveToBookmark = (selection, bookmark) => {\n      resolve(selection, bookmark).each(({range, forward}) => {\n        selection.setRng(range, forward);\n      });\n    };\n    const isBookmarkNode$1 = node => {\n      return isElement$6(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    const is = expected => actual => expected === actual;\n    const isNbsp = is(nbsp);\n    const isWhiteSpace = chr => chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    const isContent = chr => !isWhiteSpace(chr) && !isNbsp(chr) && !isZwsp$2(chr);\n\n    const getRanges$1 = selection => {\n      const ranges = [];\n      if (selection) {\n        for (let i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    const getSelectedNodes = ranges => {\n      return bind$3(ranges, range => {\n        const node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    const hasMultipleRanges = selection => {\n      return getRanges$1(selection).length > 1;\n    };\n\n    const getCellsFromRanges = ranges => filter$5(getSelectedNodes(ranges), isTableCell$2);\n    const getCellsFromElement = elm => descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    const getCellsFromElementOrRanges = (ranges, element) => {\n      const selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    const getCellsFromEditor = editor => getCellsFromElementOrRanges(getRanges$1(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    const getClosestTable = (cell, isRoot) => ancestor$3(cell, 'table', isRoot);\n\n    const getStartNode = rng => {\n      const sc = rng.startContainer, so = rng.startOffset;\n      if (isText$b(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    const getEndNode = rng => {\n      const ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$b(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    const getFirstChildren = node => {\n      return firstChild(node).fold(constant([node]), child => {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    const getLastChildren = node => {\n      return lastChild(node).fold(constant([node]), child => {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(sibling => {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    const hasAllContentsSelected = (elm, rng) => {\n      return lift2(getStartNode(rng), getEndNode(rng), (startNode, endNode) => {\n        const start = find$2(getFirstChildren(elm), curry(eq, startNode));\n        const end = find$2(getLastChildren(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    const moveEndPoint = (dom, rng, node, start) => {\n      const root = node;\n      const walker = new DomTreeWalker(node, root);\n      const moveCaretBeforeOnEnterElementsMap = filter$4(dom.schema.getMoveCaretBeforeOnEnterElements(), (_, name) => !contains$2([\n        'td',\n        'th',\n        'table'\n      ], name.toLowerCase()));\n      let currentNode = node;\n      do {\n        if (isText$b(currentNode) && Tools.trim(currentNode.data).length !== 0) {\n          if (start) {\n            rng.setStart(currentNode, 0);\n          } else {\n            rng.setEnd(currentNode, currentNode.data.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[currentNode.nodeName]) {\n          if (start) {\n            rng.setStartBefore(currentNode);\n          } else {\n            if (currentNode.nodeName === 'BR') {\n              rng.setEndBefore(currentNode);\n            } else {\n              rng.setEndAfter(currentNode);\n            }\n          }\n          return;\n        }\n      } while (currentNode = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    const hasAnyRanges = editor => {\n      const sel = editor.selection.getSel();\n      return isNonNullable(sel) && sel.rangeCount > 0;\n    };\n    const runOnRanges = (editor, executor) => {\n      const fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$e(fakeSelectionNodes, elem => {\n          const node = elem.dom;\n          const fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    const preserve = (selection, fillBookmark, executor) => {\n      const bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    const isNode = node => isNumber(node === null || node === void 0 ? void 0 : node.nodeType);\n    const isElementNode$1 = node => isElement$6(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$1(node);\n    const isElementDirectlySelected = (dom, node) => {\n      if (isElementNode$1(node) && !/^(TD|TH)$/.test(node.nodeName)) {\n        const selectedAttr = dom.getAttrib(node, 'data-mce-selected');\n        const value = parseInt(selectedAttr, 10);\n        return !isNaN(value) && value > 0;\n      } else {\n        return false;\n      }\n    };\n    const preserveSelection = (editor, action, shouldMoveStart) => {\n      const {selection, dom} = editor;\n      const selectedNodeBeforeAction = selection.getNode();\n      const isSelectedBeforeNodeNoneditable = isContentEditableFalse$b(selectedNodeBeforeAction);\n      preserve(selection, true, () => {\n        action();\n      });\n      const isBeforeNodeStillNoneditable = isSelectedBeforeNodeNoneditable && isContentEditableFalse$b(selectedNodeBeforeAction);\n      if (isBeforeNodeStillNoneditable && dom.isChildOf(selectedNodeBeforeAction, editor.getBody())) {\n        editor.selection.select(selectedNodeBeforeAction);\n      } else if (shouldMoveStart(selection.getStart())) {\n        moveStartToNearestText(dom, selection);\n      }\n    };\n    const moveStartToNearestText = (dom, selection) => {\n      var _a, _b;\n      const rng = selection.getRng();\n      const {startContainer, startOffset} = rng;\n      const selectedNode = selection.getNode();\n      if (isElementDirectlySelected(dom, selectedNode)) {\n        return;\n      }\n      if (isElement$6(startContainer)) {\n        const nodes = startContainer.childNodes;\n        const root = dom.getRoot();\n        let walker;\n        if (startOffset < nodes.length) {\n          const startNode = nodes[startOffset];\n          walker = new DomTreeWalker(startNode, (_a = dom.getParent(startNode, dom.isBlock)) !== null && _a !== void 0 ? _a : root);\n        } else {\n          const startNode = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(startNode, (_b = dom.getParent(startNode, dom.isBlock)) !== null && _b !== void 0 ? _b : root);\n          walker.next(true);\n        }\n        for (let node = walker.current(); node; node = walker.next()) {\n          if (dom.getContentEditable(node) === 'false') {\n            return;\n          } else if (isText$b(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    const getNonWhiteSpaceSibling = (node, next, inc) => {\n      if (node) {\n        const nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$6(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n      return undefined;\n    };\n    const isTextBlock$1 = (schema, node) => !!schema.getTextBlockElements()[node.nodeName.toLowerCase()] || isTransparentBlock(schema, node);\n    const isValid = (ed, parent, child) => {\n      return ed.schema.isValidChild(parent, child);\n    };\n    const isWhiteSpaceNode$1 = (node, allowSpaces = false) => {\n      if (isNonNullable(node) && isText$b(node)) {\n        const data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    const isEmptyTextNode$1 = node => {\n      return isNonNullable(node) && isText$b(node) && node.length === 0;\n    };\n    const isWrapNoneditableTarget = (editor, node) => {\n      const baseDataSelector = '[data-mce-cef-wrappable]';\n      const formatNoneditableSelector = getFormatNoneditableSelector(editor);\n      const selector = isEmpty$3(formatNoneditableSelector) ? baseDataSelector : `${ baseDataSelector },${ formatNoneditableSelector }`;\n      return is$1(SugarElement.fromDom(node), selector);\n    };\n    const isWrappableNoneditable = (editor, node) => {\n      const dom = editor.dom;\n      return isElementNode$1(node) && dom.getContentEditable(node) === 'false' && isWrapNoneditableTarget(editor, node) && dom.select('[contenteditable=\"true\"]', node).length === 0;\n    };\n    const replaceVars = (value, vars) => {\n      if (isFunction(value)) {\n        return value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, (str, name) => {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    const isEq$5 = (str1, str2) => {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    const normalizeStyleValue = (value, name) => {\n      if (isNullable(value)) {\n        return null;\n      } else {\n        let strValue = String(value);\n        if (name === 'color' || name === 'backgroundColor') {\n          strValue = rgbaToHexString(strValue);\n        }\n        if (name === 'fontWeight' && value === 700) {\n          strValue = 'bold';\n        }\n        if (name === 'fontFamily') {\n          strValue = strValue.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n        }\n        return strValue;\n      }\n    };\n    const getStyle = (dom, node, name) => {\n      const style = dom.getStyle(node, name);\n      return normalizeStyleValue(style, name);\n    };\n    const getTextDecoration = (dom, node) => {\n      let decoration;\n      dom.getParent(node, n => {\n        if (isElement$6(n)) {\n          decoration = dom.getStyle(n, 'text-decoration');\n          return !!decoration && decoration !== 'none';\n        } else {\n          return false;\n        }\n      });\n      return decoration;\n    };\n    const getParents$2 = (dom, node, selector) => {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    const isFormatPredicate = (editor, formatName, predicate) => {\n      const formats = editor.formatter.get(formatName);\n      return isNonNullable(formats) && exists(formats, predicate);\n    };\n    const isVariableFormatName = (editor, formatName) => {\n      const hasVariableValues = format => {\n        const isVariableValue = val => isFunction(val) || val.length > 1 && val.charAt(0) === '%';\n        return exists([\n          'styles',\n          'attributes'\n        ], key => get$a(format, key).exists(field => {\n          const fieldValues = isArray$1(field) ? field : values(field);\n          return exists(fieldValues, isVariableValue);\n        }));\n      };\n      return isFormatPredicate(editor, formatName, hasVariableValues);\n    };\n    const areSimilarFormats = (editor, formatName, otherFormatName) => {\n      const validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      const filterObj = format => filter$4(format, (_, key) => exists(validKeys, validKey => validKey === key));\n      return isFormatPredicate(editor, formatName, fmt1 => {\n        const filteredFmt1 = filterObj(fmt1);\n        return isFormatPredicate(editor, otherFormatName, fmt2 => {\n          const filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    const isBlockFormat = format => hasNonNullableKey(format, 'block');\n    const isWrappingBlockFormat = format => isBlockFormat(format) && format.wrapper === true;\n    const isNonWrappingBlockFormat = format => isBlockFormat(format) && format.wrapper !== true;\n    const isSelectorFormat = format => hasNonNullableKey(format, 'selector');\n    const isInlineFormat = format => hasNonNullableKey(format, 'inline');\n    const isMixedFormat = format => isSelectorFormat(format) && isInlineFormat(format) && is$2(get$a(format, 'mixed'), true);\n    const shouldExpandToSelector = format => isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    const getEmptyCaretContainers = node => {\n      const nodes = [];\n      let tempNode = node;\n      while (tempNode) {\n        if (isText$b(tempNode) && tempNode.data !== ZWSP$1 || tempNode.childNodes.length > 1) {\n          return [];\n        }\n        if (isElement$6(tempNode)) {\n          nodes.push(tempNode);\n        }\n        tempNode = tempNode.firstChild;\n      }\n      return nodes;\n    };\n    const isCaretContainerEmpty = node => {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    const isEmptyCaretFormatElement = element => {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    const isBookmarkNode = isBookmarkNode$1;\n    const getParents$1 = getParents$2;\n    const isWhiteSpaceNode = isWhiteSpaceNode$1;\n    const isTextBlock = isTextBlock$1;\n    const isBogusBr = node => {\n      return isBr$6(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    const findParentContentEditable = (dom, node) => {\n      let parent = node;\n      while (parent) {\n        if (isElement$6(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    const walkText = (start, node, offset, predicate) => {\n      const str = node.data;\n      if (start) {\n        for (let i = offset; i > 0; i--) {\n          if (predicate(str.charAt(i - 1))) {\n            return i;\n          }\n        }\n      } else {\n        for (let i = offset; i < str.length; i++) {\n          if (predicate(str.charAt(i))) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    const findSpace = (start, node, offset) => walkText(start, node, offset, c => isNbsp(c) || isWhiteSpace(c));\n    const findContent = (start, node, offset) => walkText(start, node, offset, isContent);\n    const findWordEndPoint = (dom, body, container, offset, start, includeTrailingSpaces) => {\n      let lastTextNode;\n      const rootNode = dom.getParent(container, dom.isBlock) || body;\n      const walk = (container, offset, pred) => {\n        const textSeeker = TextSeeker(dom);\n        const walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, (text, textOffset) => {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      const spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(result => includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result)).orThunk(() => lastTextNode ? Optional.some({\n        container: lastTextNode,\n        offset: start ? 0 : lastTextNode.length\n      }) : Optional.none());\n    };\n    const findSelectorEndPoint = (dom, formatList, rng, container, siblingName) => {\n      const sibling = container[siblingName];\n      if (isText$b(container) && isEmpty$3(container.data) && sibling) {\n        container = sibling;\n      }\n      const parents = getParents$1(dom, container);\n      for (let i = 0; i < parents.length; i++) {\n        for (let y = 0; y < formatList.length; y++) {\n          const curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    const findBlockEndPoint = (dom, formatList, container, siblingName) => {\n      var _a;\n      let node = container;\n      const root = dom.getRoot();\n      const format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        const scopeRoot = (_a = dom.getParent(container, 'LI,TD,TH,SUMMARY')) !== null && _a !== void 0 ? _a : root;\n        node = dom.getParent(isText$b(container) ? container.parentNode : container, node => node !== root && isTextBlock(dom.schema, node), scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node && node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    const isAtBlockBoundary$1 = (dom, root, container, siblingName) => {\n      const parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    const findParentContainer = (dom, formatList, container, offset, start) => {\n      let parent = container;\n      const siblingName = start ? 'previousSibling' : 'nextSibling';\n      const root = dom.getRoot();\n      if (isText$b(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (parent) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (let sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          const allowSpaces = isText$b(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    const isSelfOrParentBookmark = container => isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    const expandRng = (dom, rng, formatList, includeTrailingSpace = false) => {\n      let {startContainer, startOffset, endContainer, endOffset} = rng;\n      const format = formatList[0];\n      if (isElement$6(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$b(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$6(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$b(endContainer)) {\n          endOffset = endContainer.data.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$b(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$b(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        const startPoint = findWordEndPoint(dom, dom.getRoot(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(({container, offset}) => {\n          startContainer = container;\n          startOffset = offset;\n        });\n        const endPoint = findWordEndPoint(dom, dom.getRoot(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(({container, offset}) => {\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$b(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$b(endContainer) || endOffset === endContainer.data.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(dom, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(dom, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n            if (isText$b(startContainer)) {\n              startOffset = 0;\n            }\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n            if (isText$b(endContainer)) {\n              endOffset = endContainer.data.length;\n            }\n          }\n        }\n      }\n      if (isElement$6(startContainer) && startContainer.parentNode) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$6(endContainer) && endContainer.parentNode) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer,\n        startOffset,\n        endContainer,\n        endOffset\n      };\n    };\n\n    const walk$3 = (dom, rng, callback) => {\n      var _a;\n      const startOffset = rng.startOffset;\n      const startContainer = getNode$1(rng.startContainer, startOffset);\n      const endOffset = rng.endOffset;\n      const endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      const exclude = nodes => {\n        const firstNode = nodes[0];\n        if (isText$b(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        const lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$b(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      const collectSiblings = (node, name, endNode) => {\n        const siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      const findEndPoint = (node, root) => dom.getParent(node, node => node.parentNode === root, root);\n      const walkBoundary = (startNode, endNode, next) => {\n        const siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (let node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          const siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      const ancestor = (_a = dom.findCommonAncestor(startContainer, endContainer)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      const startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      const endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      const siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    const validBlocks = [\n      'pre[class*=language-][contenteditable=\"false\"]',\n      'figure.image',\n      'div[data-ephox-embed-iri]',\n      'div.tiny-pageembed',\n      'div.mce-toc',\n      'div[data-mce-toc]'\n    ];\n    const isZeroWidth = elem => isText$c(elem) && get$3(elem) === ZWSP$1;\n    const context = (editor, elem, wrapName, nodeName) => parent(elem).fold(() => 'skipping', parent => {\n      if (nodeName === 'br' || isZeroWidth(elem)) {\n        return 'valid';\n      } else if (isAnnotation(elem)) {\n        return 'existing';\n      } else if (isCaretNode(elem.dom)) {\n        return 'caret';\n      } else if (exists(validBlocks, selector => is$1(elem, selector))) {\n        return 'valid-block';\n      } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n        return 'invalid-child';\n      } else {\n        return 'valid';\n      }\n    });\n\n    const applyWordGrab = (editor, rng) => {\n      const r = expandRng(editor.dom, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    const applyAnnotation = (elem, masterUId, data, annotationName, decorate, directAnnotation) => {\n      const {uid = masterUId, ...otherData} = data;\n      add$2(elem, annotation());\n      set$3(elem, `${ dataAnnotationId() }`, uid);\n      set$3(elem, `${ dataAnnotation() }`, annotationName);\n      const {attributes = {}, classes = []} = decorate(uid, otherData);\n      setAll$1(elem, attributes);\n      add(elem, classes);\n      if (directAnnotation) {\n        if (classes.length > 0) {\n          set$3(elem, `${ dataAnnotationClasses() }`, classes.join(','));\n        }\n        const attributeNames = keys(attributes);\n        if (attributeNames.length > 0) {\n          set$3(elem, `${ dataAnnotationAttributes() }`, attributeNames.join(','));\n        }\n      }\n    };\n    const removeDirectAnnotation = elem => {\n      remove$6(elem, annotation());\n      remove$9(elem, `${ dataAnnotationId() }`);\n      remove$9(elem, `${ dataAnnotation() }`);\n      remove$9(elem, `${ dataAnnotationActive() }`);\n      const customAttrNames = getOpt(elem, `${ dataAnnotationAttributes() }`).map(names => names.split(',')).getOr([]);\n      const customClasses = getOpt(elem, `${ dataAnnotationClasses() }`).map(names => names.split(',')).getOr([]);\n      each$e(customAttrNames, name => remove$9(elem, name));\n      remove$3(elem, customClasses);\n      remove$9(elem, `${ dataAnnotationClasses() }`);\n      remove$9(elem, `${ dataAnnotationAttributes() }`);\n    };\n    const makeAnnotation = (eDoc, uid, data, annotationName, decorate) => {\n      const master = SugarElement.fromTag('span', eDoc);\n      applyAnnotation(master, uid, data, annotationName, decorate, false);\n      return master;\n    };\n    const annotate = (editor, rng, uid, annotationName, decorate, data) => {\n      const newWrappers = [];\n      const master = makeAnnotation(editor.getDoc(), uid, data, annotationName, decorate);\n      const wrapper = value$2();\n      const finishWrapper = () => {\n        wrapper.clear();\n      };\n      const getOrOpenWrapper = () => wrapper.get().getOrThunk(() => {\n        const nu = shallow$1(master);\n        newWrappers.push(nu);\n        wrapper.set(nu);\n        return nu;\n      });\n      const processElements = elems => {\n        each$e(elems, processElement);\n      };\n      const processElement = elem => {\n        const ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            const children = children$1(elem);\n            processElements(children);\n            finishWrapper();\n            break;\n          }\n        case 'valid-block': {\n            finishWrapper();\n            applyAnnotation(elem, uid, data, annotationName, decorate, true);\n            break;\n          }\n        case 'valid': {\n            const w = getOrOpenWrapper();\n            wrap$2(elem, w);\n            break;\n          }\n        }\n      };\n      const processNodes = nodes => {\n        const elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$3(editor.dom, rng, nodes => {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    const annotateWithBookmark = (editor, name, settings, data) => {\n      editor.undoManager.transact(() => {\n        const selection = editor.selection;\n        const initialRng = selection.getRng();\n        const hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        const masterUid = generate$1('mce-annotation');\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          const wrapper = makeAnnotation(editor.getDoc(), masterUid, data, name, settings.decorate);\n          set$1(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, () => {\n            runOnRanges(editor, selectionRng => {\n              annotate(editor, selectionRng, masterUid, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    const Annotator = editor => {\n      const registry = create$b();\n      setup$x(editor, registry);\n      const changes = setup$y(editor, registry);\n      const isSpan = isTag('span');\n      const removeAnnotations = elements => {\n        each$e(elements, element => {\n          if (isSpan(element)) {\n            unwrap(element);\n          } else {\n            removeDirectAnnotation(element);\n          }\n        });\n      };\n      return {\n        register: (name, settings) => {\n          registry.register(name, settings);\n        },\n        annotate: (name, data) => {\n          registry.lookup(name).each(settings => {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: (name, callback) => {\n          changes.addListener(name, callback);\n        },\n        remove: name => {\n          identify(editor, Optional.some(name)).each(({elements}) => {\n            const bookmark = editor.selection.getBookmark();\n            removeAnnotations(elements);\n            editor.selection.moveToBookmark(bookmark);\n          });\n        },\n        removeAll: name => {\n          const bookmark = editor.selection.getBookmark();\n          each$d(findAll(editor, name), (elements, _) => {\n            removeAnnotations(elements);\n          });\n          editor.selection.moveToBookmark(bookmark);\n        },\n        getAll: name => {\n          const directory = findAll(editor, name);\n          return map$2(directory, elems => map$3(elems, elem => elem.dom));\n        }\n      };\n    };\n\n    const BookmarkManager = selection => {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    const isXYWithinRange = (clientX, clientY, range) => {\n      if (range.collapsed) {\n        return false;\n      } else {\n        return exists(range.getClientRects(), rect => containsXY(rect, clientX, clientY));\n      }\n    };\n\n    const firePreProcess = (editor, args) => editor.dispatch('PreProcess', args);\n    const firePostProcess = (editor, args) => editor.dispatch('PostProcess', args);\n    const fireRemove = editor => {\n      editor.dispatch('remove');\n    };\n    const fireDetach = editor => {\n      editor.dispatch('detach');\n    };\n    const fireSwitchMode = (editor, mode) => {\n      editor.dispatch('SwitchMode', { mode });\n    };\n    const fireObjectResizeStart = (editor, target, width, height, origin) => {\n      editor.dispatch('ObjectResizeStart', {\n        target,\n        width,\n        height,\n        origin\n      });\n    };\n    const fireObjectResized = (editor, target, width, height, origin) => {\n      editor.dispatch('ObjectResized', {\n        target,\n        width,\n        height,\n        origin\n      });\n    };\n    const firePreInit = editor => {\n      editor.dispatch('PreInit');\n    };\n    const firePostRender = editor => {\n      editor.dispatch('PostRender');\n    };\n    const fireInit = editor => {\n      editor.dispatch('Init');\n    };\n    const firePlaceholderToggle = (editor, state) => {\n      editor.dispatch('PlaceholderToggle', { state });\n    };\n    const fireError = (editor, errorType, error) => {\n      editor.dispatch(errorType, error);\n    };\n    const fireFormatApply = (editor, format, node, vars) => {\n      editor.dispatch('FormatApply', {\n        format,\n        node,\n        vars\n      });\n    };\n    const fireFormatRemove = (editor, format, node, vars) => {\n      editor.dispatch('FormatRemove', {\n        format,\n        node,\n        vars\n      });\n    };\n    const fireBeforeSetContent = (editor, args) => editor.dispatch('BeforeSetContent', args);\n    const fireSetContent = (editor, args) => editor.dispatch('SetContent', args);\n    const fireBeforeGetContent = (editor, args) => editor.dispatch('BeforeGetContent', args);\n    const fireGetContent = (editor, args) => editor.dispatch('GetContent', args);\n    const fireAutocompleterStart = (editor, args) => {\n      editor.dispatch('AutocompleterStart', args);\n    };\n    const fireAutocompleterUpdate = (editor, args) => {\n      editor.dispatch('AutocompleterUpdate', args);\n    };\n    const fireAutocompleterUpdateActiveRange = (editor, args) => {\n      editor.dispatch('AutocompleterUpdateActiveRange', args);\n    };\n    const fireAutocompleterEnd = editor => {\n      editor.dispatch('AutocompleterEnd');\n    };\n    const firePastePreProcess = (editor, html, internal) => editor.dispatch('PastePreProcess', {\n      content: html,\n      internal\n    });\n    const firePastePostProcess = (editor, node, internal) => editor.dispatch('PastePostProcess', {\n      node,\n      internal\n    });\n    const firePastePlainTextToggle = (editor, state) => editor.dispatch('PastePlainTextToggle', { state });\n    const fireEditableRootStateChange = (editor, state) => editor.dispatch('EditableRootStateChange', { state });\n\n    const VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: e => {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: e => {\n        return Env.os.isMacOS() || Env.os.isiOS() ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    const elementSelectionAttr = 'data-mce-selected';\n    const controlElmSelector = 'table,img,figure.image,hr,video,span.mce-preview-object,details';\n    const abs = Math.abs;\n    const round$1 = Math.round;\n    const resizeHandles = {\n      nw: [\n        0,\n        0,\n        -1,\n        -1\n      ],\n      ne: [\n        1,\n        0,\n        1,\n        -1\n      ],\n      se: [\n        1,\n        1,\n        1,\n        1\n      ],\n      sw: [\n        0,\n        1,\n        -1,\n        1\n      ]\n    };\n    const isTouchEvent = evt => evt.type === 'longpress' || evt.type.indexOf('touch') === 0;\n    const ControlSelection = (selection, editor) => {\n      const dom = editor.dom;\n      const editableDoc = editor.getDoc();\n      const rootDocument = document;\n      const rootElement = editor.getBody();\n      let selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      let startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      let width;\n      let height;\n      let startScrollWidth;\n      let startScrollHeight;\n      const isImage = elm => isNonNullable(elm) && (isImg(elm) || dom.is(elm, 'figure.image'));\n      const isMedia = elm => isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      const isEventOnImageOutsideRange = (evt, range) => {\n        if (isTouchEvent(evt)) {\n          const touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      const contextMenuSelectImage = evt => {\n        const target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      const getResizeTargets = elm => {\n        if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else {\n          return [elm];\n        }\n      };\n      const isResizable = elm => {\n        const selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return is$1(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$1(SugarElement.fromDom(elm), selector);\n        }\n      };\n      const createGhostElement = (dom, elm) => {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else if (isTable$2(elm)) {\n          const isNorth = startsWith(selectedHandle.name, 'n');\n          const rowSelect = isNorth ? head : last$2;\n          const tableElm = elm.cloneNode(true);\n          rowSelect(dom.select('tr', tableElm)).each(tr => {\n            const cells = dom.select('td,th', tr);\n            dom.setStyle(tr, 'height', null);\n            each$e(cells, cell => dom.setStyle(cell, 'height', null));\n          });\n          return tableElm;\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      const setSizeProp = (element, name, value) => {\n        if (isNonNullable(value)) {\n          const targets = getResizeTargets(element);\n          each$e(targets, target => {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      const setGhostElmSize = (ghostElm, width, height) => {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      const resizeGhostElement = e => {\n        let deltaX, deltaY, proportional;\n        let resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round$1(width * ratio);\n            width = round$1(height / ratio);\n          } else {\n            width = round$1(height / ratio);\n            height = round$1(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      const endGhostResize = () => {\n        const wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      const showResizeRect = targetElm => {\n        unbindResizeHandleEvents();\n        const position = dom.getPos(targetElm, rootElement);\n        const selectedElmX = position.x;\n        const selectedElmY = position.y;\n        const rect = targetElm.getBoundingClientRect();\n        const targetWidth = rect.width || rect.right - rect.left;\n        const targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        const e = editor.dispatch('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each$d(resizeHandles, (handle, name) => {\n            const startDrag = e => {\n              const target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(dom, selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            let handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            dom.bind(handleElm, 'mousedown', e => {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect(false);\n        }\n      };\n      const throttledShowResizeRect = first$1(showResizeRect, 0);\n      const hideResizeRect = (removeSelected = true) => {\n        throttledShowResizeRect.cancel();\n        unbindResizeHandleEvents();\n        if (selectedElm && removeSelected) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$d(resizeHandles, (value, name) => {\n          const handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      const isChildOrEqual = (node, parent) => dom.isChildOf(node, parent);\n      const updateResizeRect = e => {\n        if (resizeStarted || editor.removed || editor.composing) {\n          return;\n        }\n        const targetElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        const controlElm = closest$3(SugarElement.fromDom(targetElm), controlElmSelector).map(e => e.dom).filter(e => dom.isEditable(e.parentElement) || e.nodeName === 'IMG' && dom.isEditable(e)).getOrUndefined();\n        const selectedValue = isNonNullable(controlElm) ? dom.getAttrib(controlElm, elementSelectionAttr, '1') : '1';\n        each$e(dom.select(`img[${ elementSelectionAttr }],hr[${ elementSelectionAttr }]`), img => {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        if (isNonNullable(controlElm) && isChildOrEqual(controlElm, rootElement) && editor.hasFocus()) {\n          disableGeckoResize();\n          const startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            dom.setAttrib(controlElm, elementSelectionAttr, selectedValue);\n            throttledShowResizeRect.throttle(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      const unbindResizeHandleEvents = () => {\n        each$d(resizeHandles, handle => {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      const disableGeckoResize = () => {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', () => {\n        disableGeckoResize();\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', updateResizeRect);\n        editor.on('keyup compositionend', e => {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      const destroy = () => {\n        throttledShowResizeRect.cancel();\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable,\n        showResizeRect,\n        hideResizeRect,\n        updateResizeRect,\n        destroy\n      };\n    };\n\n    const setStart = (rng, situ) => {\n      situ.fold(e => {\n        rng.setStartBefore(e.dom);\n      }, (e, o) => {\n        rng.setStart(e.dom, o);\n      }, e => {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    const setFinish = (rng, situ) => {\n      situ.fold(e => {\n        rng.setEndBefore(e.dom);\n      }, (e, o) => {\n        rng.setEnd(e.dom, o);\n      }, e => {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    const relativeToNative = (win, startSitu, finishSitu) => {\n      const range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    const exactToNative = (win, start, soffset, finish, foffset) => {\n      const rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n\n    const adt$3 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const fromRange = (win, type, range) => type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    const getRanges = (win, selection) => selection.match({\n      domRange: rng => {\n        return {\n          ltr: constant(rng),\n          rtl: Optional.none\n        };\n      },\n      relative: (startSitu, finishSitu) => {\n        return {\n          ltr: cached(() => relativeToNative(win, startSitu, finishSitu)),\n          rtl: cached(() => Optional.some(relativeToNative(win, finishSitu, startSitu)))\n        };\n      },\n      exact: (start, soffset, finish, foffset) => {\n        return {\n          ltr: cached(() => exactToNative(win, start, soffset, finish, foffset)),\n          rtl: cached(() => Optional.some(exactToNative(win, finish, foffset, start, soffset)))\n        };\n      }\n    });\n    const doDiagnose = (win, ranges) => {\n      const rng = ranges.ltr();\n      if (rng.collapsed) {\n        const reversed = ranges.rtl().filter(rev => rev.collapsed === false);\n        return reversed.map(rev => adt$3.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset)).getOrThunk(() => fromRange(win, adt$3.ltr, rng));\n      } else {\n        return fromRange(win, adt$3.ltr, rng);\n      }\n    };\n    const diagnose = (win, selection) => {\n      const ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    adt$3.ltr;\n    adt$3.rtl;\n\n    const create$9 = (start, soffset, finish, foffset) => ({\n      start,\n      soffset,\n      finish,\n      foffset\n    });\n    const SimRange = { create: create$9 };\n\n    const caretPositionFromPoint = (doc, x, y) => {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretPositionFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y)).bind(pos => {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        const r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    const caretRangeFromPoint = (doc, x, y) => {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretRangeFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y));\n    };\n    const availableSearch = (() => {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return Optional.none;\n      }\n    })();\n    const fromPoint$1 = (win, x, y) => {\n      const doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(rng => SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n    };\n\n    const adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    const cata = (subject, onBefore, onOn, onAfter) => subject.fold(onBefore, onOn, onAfter);\n    const getStart$2 = situ => situ.fold(identity, identity, identity);\n    const before$1 = adt$2.before;\n    const on = adt$2.on;\n    const after$1 = adt$2.after;\n    const Situ = {\n      before: before$1,\n      on,\n      after: after$1,\n      cata,\n      getStart: getStart$2\n    };\n\n    const adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const exactFromRange = simRange => adt$1.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    const getStart$1 = selection => selection.match({\n      domRange: rng => SugarElement.fromDom(rng.startContainer),\n      relative: (startSitu, _finishSitu) => Situ.getStart(startSitu),\n      exact: (start, _soffset, _finish, _foffset) => start\n    });\n    const domRange = adt$1.domRange;\n    const relative = adt$1.relative;\n    const exact = adt$1.exact;\n    const getWin = selection => {\n      const start = getStart$1(selection);\n      return defaultView(start);\n    };\n    const range = SimRange.create;\n    const SimSelection = {\n      domRange,\n      relative,\n      exact,\n      exactFromRange,\n      getWin,\n      range\n    };\n\n    const beforeSpecial = (element, offset) => {\n      const name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains$2([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    const preprocessRelative = (startSitu, finishSitu) => {\n      const start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      const finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    const preprocessExact = (start, soffset, finish, foffset) => {\n      const startSitu = beforeSpecial(start, soffset);\n      const finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    const preprocess = selection => selection.match({\n      domRange: rng => {\n        const start = SugarElement.fromDom(rng.startContainer);\n        const finish = SugarElement.fromDom(rng.endContainer);\n        return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n      },\n      relative: preprocessRelative,\n      exact: preprocessExact\n    });\n\n    const fromElements = (elements, scope) => {\n      const doc = scope || document;\n      const fragment = doc.createDocumentFragment();\n      each$e(elements, element => {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    const toNative = selection => {\n      const win = SimSelection.getWin(selection).dom;\n      const getDomRange = (start, soffset, finish, foffset) => exactToNative(win, start, soffset, finish, foffset);\n      const filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    const getAtPoint = (win, x, y) => fromPoint$1(win, x, y);\n\n    const fromPoint = (clientX, clientY, doc) => {\n      const win = defaultView(SugarElement.fromDom(doc));\n      return getAtPoint(win.dom, clientX, clientY).map(simRange => {\n        const rng = doc.createRange();\n        rng.setStart(simRange.start.dom, simRange.soffset);\n        rng.setEnd(simRange.finish.dom, simRange.foffset);\n        return rng;\n      }).getOrUndefined();\n    };\n\n    const isEq$4 = (rng1, rng2) => {\n      return isNonNullable(rng1) && isNonNullable(rng2) && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    const findParent = (node, rootNode, predicate) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== rootNode) {\n        if (predicate(currentNode)) {\n          return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    };\n    const hasParent$1 = (node, rootNode, predicate) => findParent(node, rootNode, predicate) !== null;\n    const hasParentWithName = (node, rootNode, name) => hasParent$1(node, rootNode, node => node.nodeName === name);\n    const isCeFalseCaretContainer = (node, rootNode) => isCaretContainer$2(node) && !hasParent$1(node, rootNode, isCaretNode);\n    const hasBrBeforeAfter = (dom, node, left) => {\n      const parentNode = node.parentNode;\n      if (parentNode) {\n        const walker = new DomTreeWalker(node, dom.getParent(parentNode, dom.isBlock) || dom.getRoot());\n        let currentNode;\n        while (currentNode = walker[left ? 'prev' : 'next']()) {\n          if (isBr$6(currentNode)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    const isPrevNode = (node, name) => {\n      var _a;\n      return ((_a = node.previousSibling) === null || _a === void 0 ? void 0 : _a.nodeName) === name;\n    };\n    const hasContentEditableFalseParent = (root, node) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== root) {\n        if (isContentEditableFalse$b(currentNode)) {\n          return true;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return false;\n    };\n    const findTextNodeRelative = (dom, isAfterNode, collapsed, left, startNode) => {\n      const body = dom.getRoot();\n      const nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      const parentNode = startNode.parentNode;\n      let lastInlineElement;\n      let node;\n      if (!parentNode) {\n        return Optional.none();\n      }\n      const parentBlockContainer = dom.getParent(parentNode, dom.isBlock) || body;\n      if (left && isBr$6(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(parentNode, dom.nodeIndex(startNode)));\n      }\n      const walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$b(node) && node.data.length > 0) {\n          if (!hasParentWithName(node, body, 'A')) {\n            return Optional.some(CaretPosition(node, left ? node.data.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (isComment(lastInlineElement)) {\n        return Optional.none();\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    const normalizeEndPoint = (dom, collapsed, start, rng) => {\n      const body = dom.getRoot();\n      let node;\n      let normalized = false;\n      let container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      const isAfterNode = isElement$6(container) && offset === container.childNodes.length;\n      const nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      let directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$6(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$2(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$b(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$2(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (isDetails(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && !isTable$2(container)) {\n            node = container;\n            const walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$b(node) && node.data.length > 0) {\n                offset = directionLeft ? 0 : node.data.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCellOrCaption(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$b(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(pos => {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$6(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$6(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(pos => {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$b(container) && offset === container.data.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(pos => {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized && container ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    const normalize$2 = (dom, rng) => {\n      const collapsed = rng.collapsed, normRng = rng.cloneRange();\n      const startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(pos => {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(pos => {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    const splitText = (node, offset) => {\n      return node.splitText(offset);\n    };\n    const split = rng => {\n      let startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$b(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.data.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            const newContainer = splitText(endContainer, endOffset).previousSibling;\n            startContainer = endContainer = newContainer;\n            endOffset = newContainer.data.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$b(startContainer) && startOffset > 0 && startOffset < startContainer.data.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$b(endContainer) && endOffset > 0 && endOffset < endContainer.data.length) {\n          const newContainer = splitText(endContainer, endOffset).previousSibling;\n          endContainer = newContainer;\n          endOffset = newContainer.data.length;\n        }\n      }\n      return {\n        startContainer,\n        startOffset,\n        endContainer,\n        endOffset\n      };\n    };\n\n    const RangeUtils = dom => {\n      const walk = (rng, callback) => {\n        return walk$3(dom, rng, callback);\n      };\n      const split$1 = split;\n      const normalize = rng => {\n        return normalize$2(dom, rng).fold(never, normalizedRng => {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      const expand = (rng, options = { type: 'word' }) => {\n        if (options.type === 'word') {\n          const rangeLike = expandRng(dom, rng, [{ inline: 'span' }]);\n          const newRange = dom.createRng();\n          newRange.setStart(rangeLike.startContainer, rangeLike.startOffset);\n          newRange.setEnd(rangeLike.endContainer, rangeLike.endOffset);\n          return newRange;\n        }\n        return rng;\n      };\n      return {\n        walk,\n        split: split$1,\n        expand,\n        normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    const Dimension = (name, getOffset) => {\n      const set = (element, h) => {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        const dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      const get = element => {\n        const r = getOffset(element);\n        if (r <= 0 || r === null) {\n          const css = get$7(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      const getOuter = get;\n      const aggregate = (element, properties) => foldl(properties, (acc, property) => {\n        const val = get$7(element, property);\n        const value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n      const max = (element, value, properties) => {\n        const cumulativeInclusions = aggregate(element, properties);\n        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set,\n        get,\n        getOuter,\n        aggregate,\n        max\n      };\n    };\n\n    const api = Dimension('height', element => {\n      const dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    const get$2 = element => api.get(element);\n\n    const getDocument = () => SugarElement.fromDom(document);\n\n    const walkUp = (navigation, doc) => {\n      const frame = navigation.view(doc);\n      return frame.fold(constant([]), f => {\n        const parent = navigation.owner(f);\n        const rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    const pathTo = (element, navigation) => {\n      const d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    const view = doc => {\n      var _a;\n      const element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    const owner = element => documentOrOwner(element);\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    const find = element => {\n      const doc = getDocument();\n      const scroll = get$5(doc);\n      const frames = pathTo(element, Navigation);\n      const offset = viewport(element);\n      const r = foldr(frames, (b, a) => {\n        const loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    const excludeFromDescend = element => name(element) === 'textarea';\n    const fireScrollIntoViewEvent = (editor, data) => {\n      const scrollEvent = editor.dispatch('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    const fireAfterScrollIntoViewEvent = (editor, data) => {\n      editor.dispatch('AfterScrollIntoView', data);\n    };\n    const descend = (element, offset) => {\n      const children = children$1(element);\n      if (children.length === 0 || excludeFromDescend(element)) {\n        return {\n          element,\n          offset\n        };\n      } else if (offset < children.length && !excludeFromDescend(children[offset])) {\n        return {\n          element: children[offset],\n          offset: 0\n        };\n      } else {\n        const last = children[children.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element,\n            offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$c(last)) {\n            return {\n              element: last,\n              offset: get$3(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children$1(last).length\n            };\n          }\n        }\n      }\n    };\n    const markerInfo = (element, cleanupFun) => {\n      const pos = absolute(element);\n      const height = get$2(element);\n      return {\n        element,\n        bottom: pos.top + height,\n        height,\n        pos,\n        cleanup: cleanupFun\n      };\n    };\n    const createMarker$1 = (element, offset) => {\n      const startPoint = descend(element, offset);\n      const span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$3(startPoint.element, span);\n      return markerInfo(span, () => remove$4(span));\n    };\n    const elementMarker = element => markerInfo(SugarElement.fromDom(element), noop);\n    const withMarker = (editor, f, rng, alignToTop) => {\n      preserveWith(editor, (_s, _e) => applyWithMarker(editor, f, rng, alignToTop), rng);\n    };\n    const withScrollEvents = (editor, doc, f, marker, alignToTop) => {\n      const data = {\n        elm: marker.element.dom,\n        alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      const scrollTop = get$5(doc).top;\n      f(editor, doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    const applyWithMarker = (editor, f, rng, alignToTop) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      const marker = createMarker$1(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    const withElement = (editor, element, f, alignToTop) => {\n      const doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    const preserveWith = (editor, f, rng) => {\n      const startElement = rng.startContainer;\n      const startOffset = rng.startOffset;\n      const endElement = rng.endContainer;\n      const endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      const newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    const scrollToMarker = (editor, marker, viewHeight, alignToTop, doc) => {\n      const pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        const y = pos.top - viewHeight + marker.height;\n        to(-editor.getBody().getBoundingClientRect().left, y, doc);\n      }\n    };\n    const intoWindowIfNeeded = (editor, doc, scrollTop, viewHeight, marker, alignToTop) => {\n      const viewportBottom = viewHeight + scrollTop;\n      const markerTop = marker.pos.top;\n      const markerBottom = marker.bottom;\n      const largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(editor, marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        const align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(editor, marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(editor, marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    const intoWindow = (editor, doc, scrollTop, marker, alignToTop) => {\n      const viewHeight = defaultView(doc).dom.innerHeight;\n      intoWindowIfNeeded(editor, doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    const intoFrame = (editor, doc, scrollTop, marker, alignToTop) => {\n      const frameViewHeight = defaultView(doc).dom.innerHeight;\n      intoWindowIfNeeded(editor, doc, scrollTop, frameViewHeight, marker, alignToTop);\n      const op = find(marker.element);\n      const viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    const rangeIntoWindow = (editor, rng, alignToTop) => withMarker(editor, intoWindow, rng, alignToTop);\n    const elementIntoWindow = (editor, element, alignToTop) => withElement(editor, element, intoWindow, alignToTop);\n    const rangeIntoFrame = (editor, rng, alignToTop) => withMarker(editor, intoFrame, rng, alignToTop);\n    const elementIntoFrame = (editor, element, alignToTop) => withElement(editor, element, intoFrame, alignToTop);\n    const scrollElementIntoView = (editor, element, alignToTop) => {\n      const scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    const scrollRangeIntoView = (editor, rng, alignToTop) => {\n      const scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    const focus$1 = (element, preventScroll = false) => element.dom.focus({ preventScroll });\n    const hasFocus$1 = element => {\n      const root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    const active$1 = (root = getDocument()) => Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    const search = element => active$1(getRootNode(element)).filter(e => element.dom.contains(e.dom));\n\n    const clamp$1 = (offset, element) => {\n      const max = isText$c(element) ? get$3(element).length : children$1(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    const normalizeRng = rng => SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    const isOrContains = (root, elm) => !isRestrictedNode(elm.dom) && (contains(root, elm) || eq(root, elm));\n    const isRngInRoot = root => rng => isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n    const shouldStore = editor => editor.inline || Env.browser.isFirefox();\n    const nativeRangeToSelectionRange = r => SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    const readRange = win => {\n      const selection = win.getSelection();\n      const rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    const getBookmark = root => {\n      const win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    const validate = (root, bookmark) => Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    const bookmarkToNativeRng = bookmark => {\n      const rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    const store = editor => {\n      const newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    const getRng = editor => {\n      const bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(x => validate(SugarElement.fromDom(editor.getBody()), x)).bind(bookmarkToNativeRng);\n    };\n    const restore = editor => {\n      getRng(editor).each(rng => editor.selection.setRng(rng));\n    };\n\n    const isEditorUIElement$1 = elm => {\n      const className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    const FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    const wrappedSetTimeout = (callback, time) => {\n      if (!isNumber(time)) {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    const wrappedSetInterval = (callback, time) => {\n      if (!isNumber(time)) {\n        time = 0;\n      }\n      return setInterval(callback, time);\n    };\n    const Delay = {\n      setEditorTimeout: (editor, callback, time) => {\n        return wrappedSetTimeout(() => {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: (editor, callback, time) => {\n        const timer = wrappedSetInterval(() => {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      }\n    };\n\n    const isManualNodeChange = e => {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    const registerPageMouseUp = (editor, throttledStore) => {\n      const mouseUpPage = () => {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', () => {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    const registerMouseUp = (editor, throttledStore) => {\n      editor.on('mouseup touchend', _e => {\n        throttledStore.throttle();\n      });\n    };\n    const registerEditorEvents = (editor, throttledStore) => {\n      registerMouseUp(editor, throttledStore);\n      editor.on('keyup NodeChange AfterSetSelectionRange', e => {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    const register$6 = editor => {\n      const throttledStore = first$1(() => {\n        store(editor);\n      }, 0);\n      editor.on('init', () => {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', () => {\n        throttledStore.cancel();\n      });\n    };\n\n    let documentFocusInHandler;\n    const DOM$9 = DOMUtils.DOM;\n    const isEditorUIElement = elm => {\n      return isElement$6(elm) && FocusManager.isEditorUIElement(elm);\n    };\n    const isEditorContentAreaElement = elm => {\n      const classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    const isUIElement = (editor, elm) => {\n      const customSelector = getCustomUiSelector(editor);\n      const parent = DOM$9.getParent(elm, elm => {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    const getActiveElement = editor => {\n      try {\n        const root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active$1(root).fold(() => document.body, x => x.dom);\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    const registerEvents$1 = (editorManager, e) => {\n      const editor = e.editor;\n      register$6(editor);\n      const toggleContentAreaOnFocus = (editor, fn) => {\n        if (shouldHighlightOnFocus(editor) && editor.inline !== true) {\n          const contentArea = SugarElement.fromDom(editor.getContainer());\n          fn(contentArea, 'tox-edit-focus');\n        }\n      };\n      editor.on('focusin', () => {\n        const focusedEditor = editorManager.focusedEditor;\n        if (isEditorContentAreaElement(getActiveElement(editor))) {\n          toggleContentAreaOnFocus(editor, add$2);\n        }\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.dispatch('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.dispatch('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', () => {\n        Delay.setEditorTimeout(editor, () => {\n          const focusedEditor = editorManager.focusedEditor;\n          if (!isEditorContentAreaElement(getActiveElement(editor)) || focusedEditor !== editor) {\n            toggleContentAreaOnFocus(editor, remove$6);\n          }\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.dispatch('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = e => {\n          const activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(target => {\n              const elem = target;\n              if (elem.ownerDocument === document) {\n                if (elem !== document.body && !isUIElement(activeEditor, elem) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.dispatch('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$9.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    const unregisterDocumentEvents = (editorManager, e) => {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor && documentFocusInHandler) {\n        DOM$9.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    const setup$w = editorManager => {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    const getContentEditableHost = (editor, node) => editor.dom.getParent(node, node => editor.dom.getContentEditable(node) === 'true');\n    const getCollapsedNode = rng => rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    const getFocusInElement = (root, rng) => getCollapsedNode(rng).bind(node => {\n      if (isTableSection(node)) {\n        return Optional.some(node);\n      } else if (!contains(root, node)) {\n        return Optional.some(root);\n      } else {\n        return Optional.none();\n      }\n    });\n    const normalizeSelection = (editor, rng) => {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(elm => {\n        return firstPositionIn(elm.dom);\n      }).fold(() => {\n        editor.selection.normalize();\n      }, caretPos => editor.selection.setRng(caretPos.toRange()));\n    };\n    const focusBody = body => {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    const hasElementFocus = elm => hasFocus$1(elm) || search(elm).isSome();\n    const hasIframeFocus = editor => isNonNullable(editor.iframeElement) && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    const hasInlineFocus = editor => {\n      const rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    const hasUiFocus = editor => {\n      const dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active$1(dos).filter(elem => !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom)).isSome();\n    };\n    const hasFocus = editor => editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    const hasEditorOrUiFocus = editor => hasFocus(editor) || hasUiFocus(editor);\n    const focusEditor = editor => {\n      const selection = editor.selection;\n      const body = editor.getBody();\n      let rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (isNonNullable(editor.bookmark) && !hasFocus(editor)) {\n        getRng(editor).each(bookmarkRng => {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      const contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (contentEditableHost && editor.dom.isChildOf(contentEditableHost, body)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.browser.isOpera()) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.browser.isFirefox() || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    const activateEditor = editor => editor.editorManager.setActive(editor);\n    const focus = (editor, skipFocus) => {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    const isEditableRange = (dom, rng) => {\n      if (rng.collapsed) {\n        return dom.isEditable(rng.startContainer);\n      } else {\n        return dom.isEditable(rng.startContainer) && dom.isEditable(rng.endContainer);\n      }\n    };\n\n    const getEndpointElement = (root, rng, start, real, resolve) => {\n      const container = start ? rng.startContainer : rng.endContainer;\n      const offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(elm => !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm).bind(elm => isElement$7(elm) ? Optional.some(elm) : parent(elm).filter(isElement$7)).map(elm => elm.dom).getOr(root);\n    };\n    const getStart = (root, rng, real = false) => getEndpointElement(root, rng, true, real, (elm, offset) => Math.min(childNodesCount(elm), offset));\n    const getEnd = (root, rng, real = false) => getEndpointElement(root, rng, false, real, (elm, offset) => offset > 0 ? offset - 1 : offset);\n    const skipEmptyTextNodes = (node, forwards) => {\n      const orig = node;\n      while (node && isText$b(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    const getNode = (root, rng) => {\n      if (!rng) {\n        return root;\n      }\n      let startContainer = rng.startContainer;\n      let endContainer = rng.endContainer;\n      const startOffset = rng.startOffset;\n      const endOffset = rng.endOffset;\n      let node = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              node = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (isText$b(startContainer) && isText$b(endContainer)) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            node = startContainer;\n          }\n        }\n      }\n      const elm = isText$b(node) ? node.parentNode : node;\n      return isHTMLElement(elm) ? elm : root;\n    };\n    const getSelectedBlocks = (dom, rng, startElm, endElm) => {\n      const selectedBlocks = [];\n      const root = dom.getRoot();\n      const start = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      const end = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (start && start !== root) {\n        selectedBlocks.push(start);\n      }\n      if (start && end && start !== end) {\n        let node;\n        const walker = new DomTreeWalker(start, root);\n        while ((node = walker.next()) && node !== end) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (end && start !== end && end !== root) {\n        selectedBlocks.push(end);\n      }\n      return selectedBlocks;\n    };\n    const select = (dom, node, content) => Optional.from(node).bind(node => Optional.from(node.parentNode).map(parent => {\n      const idx = dom.nodeIndex(node);\n      const rng = dom.createRng();\n      rng.setStart(parent, idx);\n      rng.setEnd(parent, idx + 1);\n      if (content) {\n        moveEndPoint(dom, rng, node, true);\n        moveEndPoint(dom, rng, node, false);\n      }\n      return rng;\n    }));\n\n    const processRanges = (editor, ranges) => map$3(ranges, range => {\n      const evt = editor.dispatch('GetSelectionRange', { range });\n      return evt.range !== range ? evt.range : range;\n    });\n\n    const typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    const walk$2 = (node, root, prev) => {\n      const startName = prev ? 'lastChild' : 'firstChild';\n      const siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        let sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (let parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n      return undefined;\n    };\n    const isEmptyTextNode = node => {\n      var _a;\n      const text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n      if (!isWhitespaceText(text)) {\n        return false;\n      }\n      const parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(text)) {\n        return false;\n      }\n      return true;\n    };\n    const isNonEmptyElement = node => {\n      const isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    class AstNode {\n      static create(name, attrs) {\n        const node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$d(attrs, (value, attrName) => {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      }\n      constructor(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      replace(node) {\n        const self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      }\n      attr(name, value) {\n        const self = this;\n        if (!isString(name)) {\n          if (isNonNullable(name)) {\n            each$d(name, (value, key) => {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        const attrs = self.attributes;\n        if (attrs) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                let i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              let i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name,\n                value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n        return undefined;\n      }\n      clone() {\n        const self = this;\n        const clone = new AstNode(self.name, self.type);\n        const selfAttrs = self.attributes;\n        if (selfAttrs) {\n          const cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (let i = 0, l = selfAttrs.length; i < l; i++) {\n            const selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        return clone;\n      }\n      wrap(wrapper) {\n        const self = this;\n        if (self.parent) {\n          self.parent.insert(wrapper, self);\n          wrapper.append(self);\n        }\n        return self;\n      }\n      unwrap() {\n        const self = this;\n        for (let node = self.firstChild; node;) {\n          const next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      }\n      remove() {\n        const self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else if (prev) {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else if (next) {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      }\n      append(node) {\n        const self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        const last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      }\n      insert(node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        const parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else if (refNode.prev) {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else if (refNode.next) {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      }\n      getAll(name) {\n        const self = this;\n        const collection = [];\n        for (let node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      }\n      children() {\n        const self = this;\n        const collection = [];\n        for (let node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      }\n      empty() {\n        const self = this;\n        if (self.firstChild) {\n          const nodes = [];\n          for (let node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      }\n      isEmpty(elements, whitespace = {}, predicate) {\n        var _a;\n        const self = this;\n        let node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText((_a = node.value) !== null && _a !== void 0 ? _a : '')) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      }\n      walk(prev) {\n        return walk$2(this, null, prev);\n      }\n    }\n\n    const unescapedTextParents = Tools.makeMap('NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT', ' ');\n    const containsZwsp = node => isString(node.nodeValue) && node.nodeValue.includes(ZWSP$1);\n    const getTemporaryNodeSelector = tempAttrs => `${ tempAttrs.length === 0 ? '' : `${ map$3(tempAttrs, attr => `[${ attr }]`).join(',') },` }[data-mce-bogus=\"all\"]`;\n    const getTemporaryNodes = (tempAttrs, body) => body.querySelectorAll(getTemporaryNodeSelector(tempAttrs));\n    const createZwspCommentWalker = body => document.createTreeWalker(body, NodeFilter.SHOW_COMMENT, node => containsZwsp(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP);\n    const createUnescapedZwspTextWalker = body => document.createTreeWalker(body, NodeFilter.SHOW_TEXT, node => {\n      if (containsZwsp(node)) {\n        const parent = node.parentNode;\n        return parent && has$2(unescapedTextParents, parent.nodeName) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n      } else {\n        return NodeFilter.FILTER_SKIP;\n      }\n    });\n    const hasZwspComment = body => createZwspCommentWalker(body).nextNode() !== null;\n    const hasUnescapedZwspText = body => createUnescapedZwspTextWalker(body).nextNode() !== null;\n    const hasTemporaryNode = (tempAttrs, body) => body.querySelector(getTemporaryNodeSelector(tempAttrs)) !== null;\n    const trimTemporaryNodes = (tempAttrs, body) => {\n      each$e(getTemporaryNodes(tempAttrs, body), elm => {\n        const element = SugarElement.fromDom(elm);\n        if (get$9(element, 'data-mce-bogus') === 'all') {\n          remove$4(element);\n        } else {\n          each$e(tempAttrs, attr => {\n            if (has$1(element, attr)) {\n              remove$9(element, attr);\n            }\n          });\n        }\n      });\n    };\n    const emptyAllNodeValuesInWalker = walker => {\n      let curr = walker.nextNode();\n      while (curr !== null) {\n        curr.nodeValue = null;\n        curr = walker.nextNode();\n      }\n    };\n    const emptyZwspComments = compose(emptyAllNodeValuesInWalker, createZwspCommentWalker);\n    const emptyUnescapedZwspTexts = compose(emptyAllNodeValuesInWalker, createUnescapedZwspTextWalker);\n    const trim$1 = (body, tempAttrs) => {\n      const conditionalTrims = [\n        {\n          condition: curry(hasTemporaryNode, tempAttrs),\n          action: curry(trimTemporaryNodes, tempAttrs)\n        },\n        {\n          condition: hasZwspComment,\n          action: emptyZwspComments\n        },\n        {\n          condition: hasUnescapedZwspText,\n          action: emptyUnescapedZwspTexts\n        }\n      ];\n      let trimmed = body;\n      let cloned = false;\n      each$e(conditionalTrims, ({condition, action}) => {\n        if (condition(trimmed)) {\n          if (!cloned) {\n            trimmed = body.cloneNode(true);\n            cloned = true;\n          }\n          action(trimmed);\n        }\n      });\n      return trimmed;\n    };\n\n    const cleanupBogusElements = parent => {\n      const bogusElements = descendants(parent, '[data-mce-bogus]');\n      each$e(bogusElements, elem => {\n        const bogusValue = get$9(elem, 'data-mce-bogus');\n        if (bogusValue === 'all') {\n          remove$4(elem);\n        } else if (isBr$5(elem)) {\n          before$3(elem, SugarElement.fromText(zeroWidth));\n          remove$4(elem);\n        } else {\n          unwrap(elem);\n        }\n      });\n    };\n    const cleanupInputNames = parent => {\n      const inputs = descendants(parent, 'input');\n      each$e(inputs, input => {\n        remove$9(input, 'name');\n      });\n    };\n\n    const trimEmptyContents = (editor, html) => {\n      const blockName = getForcedRootBlock(editor);\n      const emptyRegExp = new RegExp(`^(<${ blockName }[^>]*>(&nbsp;|&#160;|\\\\s|\\u00a0|<br \\\\/>|)<\\\\/${ blockName }>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$`);\n      return html.replace(emptyRegExp, '');\n    };\n    const getPlainTextContent = (editor, body) => {\n      const doc = editor.getDoc();\n      const dos = getRootNode(SugarElement.fromDom(editor.getBody()));\n      const offscreenDiv = SugarElement.fromTag('div', doc);\n      set$3(offscreenDiv, 'data-mce-bogus', 'all');\n      setAll(offscreenDiv, {\n        position: 'fixed',\n        left: '-9999999px',\n        top: '0'\n      });\n      set$1(offscreenDiv, body.innerHTML);\n      cleanupBogusElements(offscreenDiv);\n      cleanupInputNames(offscreenDiv);\n      const root = getContentContainer(dos);\n      append$1(root, offscreenDiv);\n      const content = trim$2(offscreenDiv.dom.innerText);\n      remove$4(offscreenDiv);\n      return content;\n    };\n    const getContentFromBody = (editor, args, body) => {\n      let content;\n      if (args.format === 'raw') {\n        content = Tools.trim(trim$2(trim$1(body, editor.serializer.getTempAttrs()).innerHTML));\n      } else if (args.format === 'text') {\n        content = getPlainTextContent(editor, body);\n      } else if (args.format === 'tree') {\n        content = editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      const shouldTrim = args.format !== 'text' && !isWsPreserveElement(SugarElement.fromDom(body));\n      return shouldTrim && isString(content) ? Tools.trim(content) : content;\n    };\n    const getContentInternal = (editor, args) => Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), body => getContentFromBody(editor, args, body));\n\n    const makeMap$1 = Tools.makeMap;\n    const Writer = settings => {\n      const html = [];\n      settings = settings || {};\n      const indent = settings.indent;\n      const indentBefore = makeMap$1(settings.indent_before || '');\n      const indentAfter = makeMap$1(settings.indent_after || '');\n      const encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      const htmlOutput = settings.element_format !== 'xhtml';\n      return {\n        start: (name, attrs, empty) => {\n          if (indent && indentBefore[name] && html.length > 0) {\n            const value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (let i = 0, l = attrs.length; i < l; i++) {\n              const attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            const value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: name => {\n          let value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: (text, raw) => {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: text => {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: text => {\n          html.push('<!--', text, '-->');\n        },\n        pi: (name, text) => {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: text => {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: () => {\n          html.length = 0;\n        },\n        getContent: () => {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    const HtmlSerializer = (settings = {}, schema = Schema()) => {\n      const writer = Writer(settings);\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      const serialize = node => {\n        const validate = settings.validate;\n        const handlers = {\n          3: node => {\n            var _a;\n            writer.text((_a = node.value) !== null && _a !== void 0 ? _a : '', node.raw);\n          },\n          8: node => {\n            var _a;\n            writer.comment((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          7: node => {\n            writer.pi(node.name, node.value);\n          },\n          10: node => {\n            var _a;\n            writer.doctype((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          4: node => {\n            var _a;\n            writer.cdata((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          11: node => {\n            let tempNode = node;\n            if (tempNode = tempNode.firstChild) {\n              do {\n                walk(tempNode);\n              } while (tempNode = tempNode.next);\n            }\n          }\n        };\n        writer.reset();\n        const walk = node => {\n          var _a;\n          const handler = handlers[node.type];\n          if (!handler) {\n            const name = node.name;\n            const isEmpty = name in schema.getVoidElements();\n            let attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              const sortedAttrs = [];\n              sortedAttrs.map = {};\n              const elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (let i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  const attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    const attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (let i = 0, l = attrs.length; i < l; i++) {\n                  const attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    const attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(name, attrs, isEmpty);\n            if (isNonHtmlElementRootName(name)) {\n              if (isString(node.value)) {\n                writer.text(node.value, true);\n              }\n              writer.end(name);\n            } else {\n              if (!isEmpty) {\n                let child = node.firstChild;\n                if (child) {\n                  if ((name === 'pre' || name === 'textarea') && child.type === 3 && ((_a = child.value) === null || _a === void 0 ? void 0 : _a[0]) === '\\n') {\n                    writer.text('\\n', true);\n                  }\n                  do {\n                    walk(child);\n                  } while (child = child.next);\n                }\n                writer.end(name);\n              }\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else if (node.type === 3) {\n          handlers[3](node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize };\n    };\n\n    const nonInheritableStyles = new Set();\n    (() => {\n      const nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$e(nonInheritableStylesArr, style => {\n        nonInheritableStyles.add(style);\n      });\n    })();\n    const shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    const getStyleProps = (dom, node) => keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    const isNonInheritableStyle = style => nonInheritableStyles.has(style);\n    const hasInheritableStyles = (dom, node) => forall(getStyleProps(dom, node), style => !isNonInheritableStyle(style));\n    const getLonghandStyleProps = styles => filter$5(styles, style => exists(shorthandStyleProps, prop => startsWith(style, prop)));\n    const hasStyleConflict = (dom, node, parentNode) => {\n      const nodeStyleProps = getStyleProps(dom, node);\n      const parentNodeStyleProps = getStyleProps(dom, parentNode);\n      const valueMismatch = prop => {\n        var _a, _b;\n        const nodeValue = (_a = dom.getStyle(node, prop)) !== null && _a !== void 0 ? _a : '';\n        const parentValue = (_b = dom.getStyle(parentNode, prop)) !== null && _b !== void 0 ? _b : '';\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, nodeStyleProp => {\n        const propExists = props => exists(props, prop => prop === nodeStyleProp);\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          const longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    const isChar = (forward, predicate, pos) => Optional.from(pos.container()).filter(isText$b).exists(text => {\n      const delta = forward ? 0 : -1;\n      return predicate(text.data.charAt(pos.offset() + delta));\n    });\n    const isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    const isAfterSpace = curry(isChar, false, isWhiteSpace);\n    const isEmptyText = pos => {\n      const container = pos.container();\n      return isText$b(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    const matchesElementPosition = (before, predicate) => pos => getChildNodeAtRelativeOffset(before ? 0 : -1, pos).filter(predicate).isSome();\n    const isImageBlock = node => isImg(node) && get$7(SugarElement.fromDom(node), 'display') === 'block';\n    const isCefNode = node => isContentEditableFalse$b(node) && !isBogusAll(node);\n    const isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    const isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    const isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    const isAfterMedia = matchesElementPosition(false, isMedia$2);\n    const isBeforeTable = matchesElementPosition(true, isTable$2);\n    const isAfterTable = matchesElementPosition(false, isTable$2);\n    const isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    const isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    const dropLast = xs => xs.slice(0, -1);\n    const parentsUntil = (start, root, predicate) => {\n      if (contains(root, start)) {\n        return dropLast(parents$1(start, elm => {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    const parents = (start, root) => parentsUntil(start, root, never);\n    const parentsAndSelf = (start, root) => [start].concat(parents(start, root));\n\n    const navigateIgnoreEmptyTextNodes = (forward, root, from) => navigateIgnore(forward, root, from, isEmptyText);\n    const isBlock$1 = schema => el => schema.isBlock(name(el));\n    const getClosestBlock$1 = (root, pos, schema) => find$2(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$1(schema));\n    const isAtBeforeAfterBlockBoundary = (forward, root, pos, schema) => navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(newPos => getClosestBlock$1(root, pos, schema).fold(() => !isInSameBlock(newPos, pos, root.dom), fromBlock => !isInSameBlock(newPos, pos, root.dom) && contains(fromBlock, SugarElement.fromDom(newPos.container()))));\n    const isAtBlockBoundary = (forward, root, pos, schema) => getClosestBlock$1(root, pos, schema).fold(() => navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(newPos => !isInSameBlock(newPos, pos, root.dom)), parent => navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone());\n    const isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    const isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    const isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    const isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    const isBr$1 = pos => getElementFromPosition(pos).exists(isBr$5);\n    const findBr = (forward, root, pos, schema) => {\n      const parentBlocks = filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()), root), el => schema.isBlock(name(el)));\n      const scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr$1);\n    };\n    const isBeforeBr$1 = (root, pos, schema) => getElementFromPosition(pos).exists(isBr$5) || findBr(true, root, pos, schema).isSome();\n    const isAfterBr = (root, pos, schema) => getElementFromPrevPosition(pos).exists(isBr$5) || findBr(false, root, pos, schema).isSome();\n    const findPreviousBr = curry(findBr, false);\n    const findNextBr = curry(findBr, true);\n\n    const isInMiddleOfText = pos => CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    const getClosestBlock = (root, pos, schema) => {\n      const parentBlocks = filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()), root), el => schema.isBlock(name(el)));\n      return head(parentBlocks).getOr(root);\n    };\n    const hasSpaceBefore = (root, pos, schema) => {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos, schema).dom, pos).exists(isAfterSpace);\n      }\n    };\n    const hasSpaceAfter = (root, pos, schema) => {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos, schema).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    const isPreValue = value => contains$2([\n      'pre',\n      'pre-wrap'\n    ], value);\n    const isInPre = pos => getElementFromPosition(pos).bind(elm => closest$4(elm, isElement$7)).exists(elm => isPreValue(get$7(elm, 'white-space')));\n    const isAtBeginningOfBody = (root, pos) => prevPosition(root.dom, pos).isNone();\n    const isAtEndOfBody = (root, pos) => nextPosition(root.dom, pos).isNone();\n    const isAtLineBoundary = (root, pos, schema) => isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos, schema) || isAtEndOfBlock(root, pos, schema) || isAfterBr(root, pos, schema) || isBeforeBr$1(root, pos, schema);\n    const isCefBlock = node => isNonNullable(node) && isContentEditableFalse$b(node) && isBlockLike(node);\n    const isSiblingCefBlock = (root, direction) => container => {\n      return isCefBlock(new DomTreeWalker(container, root)[direction]());\n    };\n    const isBeforeCefBlock = (root, pos) => {\n      const nextPos = nextPosition(root.dom, pos).getOr(pos);\n      const isNextCefBlock = isSiblingCefBlock(root.dom, 'next');\n      return pos.isAtEnd() && (isNextCefBlock(pos.container()) || isNextCefBlock(nextPos.container()));\n    };\n    const isAfterCefBlock = (root, pos) => {\n      const prevPos = prevPosition(root.dom, pos).getOr(pos);\n      const isPrevCefBlock = isSiblingCefBlock(root.dom, 'prev');\n      return pos.isAtStart() && (isPrevCefBlock(pos.container()) || isPrevCefBlock(prevPos.container()));\n    };\n    const needsToHaveNbsp = (root, pos, schema) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos, schema) || hasSpaceBefore(root, pos, schema) || hasSpaceAfter(root, pos, schema);\n      }\n    };\n    const needsToBeNbspLeft = (root, pos, schema) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos, schema) || isBeforeBlock(root, pos, schema) || isAfterBr(root, pos, schema) || hasSpaceBefore(root, pos, schema) || isAfterCefBlock(root, pos);\n      }\n    };\n    const leanRight = pos => {\n      const container = pos.container();\n      const offset = pos.offset();\n      if (isText$b(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    const needsToBeNbspRight = (root, pos, schema) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos, schema) || isAfterBlock(root, pos, schema) || isBeforeBr$1(root, pos, schema) || hasSpaceAfter(root, pos, schema) || isBeforeCefBlock(root, pos);\n      }\n    };\n    const needsToBeNbsp = (root, pos, schema) => needsToBeNbspLeft(root, pos, schema) || needsToBeNbspRight(root, leanRight(pos), schema);\n    const isNbspAt = (text, offset) => isNbsp(text.charAt(offset));\n    const isWhiteSpaceAt = (text, offset) => isWhiteSpace(text.charAt(offset));\n    const hasNbsp = pos => {\n      const container = pos.container();\n      return isText$b(container) && contains$1(container.data, nbsp);\n    };\n    const normalizeNbspMiddle = text => {\n      const chars = text.split('');\n      return map$3(chars, (chr, i) => {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    const normalizeNbspAtStart = (root, node, makeNbsp, schema) => {\n      const text = node.data;\n      const firstPos = CaretPosition(node, 0);\n      if (!makeNbsp && isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos, schema)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else if (makeNbsp && isWhiteSpaceAt(text, 0) && needsToBeNbspLeft(root, firstPos, schema)) {\n        node.data = nbsp + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbspInMiddleOfTextNode = node => {\n      const text = node.data;\n      const newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbspAtEnd = (root, node, makeNbsp, schema) => {\n      const text = node.data;\n      const lastPos = CaretPosition(node, text.length - 1);\n      if (!makeNbsp && isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos, schema)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else if (makeNbsp && isWhiteSpaceAt(text, text.length - 1) && needsToBeNbspRight(root, lastPos, schema)) {\n        node.data = text.slice(0, -1) + nbsp;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbsps = (root, pos, schema) => {\n      const container = pos.container();\n      if (!isText$b(container)) {\n        return Optional.none();\n      }\n      if (hasNbsp(pos)) {\n        const normalized = normalizeNbspAtStart(root, container, false, schema) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container, false, schema);\n        return someIf(normalized, pos);\n      } else if (needsToBeNbsp(root, pos, schema)) {\n        const normalized = normalizeNbspAtStart(root, container, true, schema) || normalizeNbspAtEnd(root, container, true, schema);\n        return someIf(normalized, pos);\n      } else {\n        return Optional.none();\n      }\n    };\n    const normalizeNbspsInEditor = editor => {\n      const root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng()), editor.schema).each(pos => {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    const normalize$1 = (node, offset, count, schema) => {\n      if (count === 0) {\n        return;\n      }\n      const elm = SugarElement.fromDom(node);\n      const root = ancestor$4(elm, el => schema.isBlock(name(el))).getOr(elm);\n      const whitespace = node.data.slice(offset, offset + count);\n      const isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length), schema);\n      const isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0), schema);\n      node.replaceData(offset, count, normalize$4(whitespace, 4, isStartOfContent, isEndOfContent));\n    };\n    const normalizeWhitespaceAfter = (node, offset, schema) => {\n      const content = node.data.slice(offset);\n      const whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount, schema);\n    };\n    const normalizeWhitespaceBefore = (node, offset, schema) => {\n      const content = node.data.slice(0, offset);\n      const whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount, schema);\n    };\n    const mergeTextNodes = (prevNode, nextNode, schema, normalizeWhitespace, mergeToPrev = true) => {\n      const whitespaceOffset = rTrim(prevNode.data).length;\n      const newNode = mergeToPrev ? prevNode : nextNode;\n      const removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$4(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset, schema);\n      }\n      return newNode;\n    };\n\n    const needsReposition = (pos, elm) => {\n      const container = pos.container();\n      const offset = pos.offset();\n      return !CaretPosition.isTextPosition(pos) && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    const reposition = (elm, pos) => needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    const beforeOrStartOf = node => isText$b(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    const afterOrEndOf = node => isText$b(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    const getPreviousSiblingCaretPosition = elm => {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    const getNextSiblingCaretPosition = elm => {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    const findCaretPositionBackwardsFromElm = (rootElement, elm) => {\n      return Optional.from(elm.previousSibling ? elm.previousSibling : elm.parentNode).bind(node => prevPosition(rootElement, CaretPosition.before(node))).orThunk(() => nextPosition(rootElement, CaretPosition.after(elm)));\n    };\n    const findCaretPositionForwardsFromElm = (rootElement, elm) => nextPosition(rootElement, CaretPosition.after(elm)).orThunk(() => prevPosition(rootElement, CaretPosition.before(elm)));\n    const findCaretPositionBackwards = (rootElement, elm) => getPreviousSiblingCaretPosition(elm).orThunk(() => getNextSiblingCaretPosition(elm)).orThunk(() => findCaretPositionBackwardsFromElm(rootElement, elm));\n    const findCaretPositionForward = (rootElement, elm) => getNextSiblingCaretPosition(elm).orThunk(() => getPreviousSiblingCaretPosition(elm)).orThunk(() => findCaretPositionForwardsFromElm(rootElement, elm));\n    const findCaretPosition = (forward, rootElement, elm) => forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    const findCaretPosOutsideElmAfterDelete = (forward, rootElement, elm) => findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    const setSelection$1 = (editor, forward, pos) => {\n      pos.fold(() => {\n        editor.focus();\n      }, pos => {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    const eqRawNode = rawNode => elm => elm.dom === rawNode;\n    const isBlock = (editor, elm) => elm && has$2(editor.schema.getBlockElements(), name(elm));\n    const paddEmptyBlock = (schema, elm, preserveEmptyCaret) => {\n      if (isEmpty$2(schema, elm)) {\n        const br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        if (preserveEmptyCaret) {\n          each$e(children$1(elm), node => {\n            if (!isEmptyCaretFormatElement(node)) {\n              remove$4(node);\n            }\n          });\n        } else {\n          empty(elm);\n        }\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    const deleteNormalized = (elm, afterDeletePosOpt, schema, normalizeWhitespace) => {\n      const prevTextOpt = prevSibling(elm).filter(isText$c);\n      const nextTextOpt = nextSibling(elm).filter(isText$c);\n      remove$4(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, (prev, next, pos) => {\n        const prevNode = prev.dom, nextNode = next.dom;\n        const offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, schema, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(() => {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(elm => normalizeWhitespaceBefore(elm.dom, elm.dom.length, schema));\n          nextTextOpt.each(elm => normalizeWhitespaceAfter(elm.dom, 0, schema));\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    const isInlineElement = (editor, element) => has$2(editor.schema.getTextInlineElements(), name(element));\n    const deleteElement$2 = (editor, forward, elm, moveCaret = true, preserveEmptyCaret = false) => {\n      const afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      const parentBlock = ancestor$4(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      const normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, editor.schema, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(elm => paddEmptyBlock(editor.schema, elm, preserveEmptyCaret)).fold(() => {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, paddPos => {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    const strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    const hasStrongRtl = text => strongRtl.test(text);\n\n    const isInlineTarget = (editor, elm) => is$1(SugarElement.fromDom(elm), getInlineBoundarySelector(editor)) && !isTransparentBlock(editor.schema, elm) && editor.dom.isEditable(elm);\n    const isRtl = element => {\n      var _a;\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl((_a = element.textContent) !== null && _a !== void 0 ? _a : '');\n    };\n    const findInlineParents = (isInlineTarget, rootNode, pos) => filter$5(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    const findRootInline = (isInlineTarget, rootNode, pos) => {\n      const parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    const hasSameParentBlock = (rootNode, node1, node2) => {\n      const block1 = getParentBlock$3(node1, rootNode);\n      const block2 = getParentBlock$3(node2, rootNode);\n      return isNonNullable(block1) && block1 === block2;\n    };\n    const isAtZwsp = pos => isBeforeInline(pos) || isAfterInline(pos);\n    const normalizePosition = (forward, pos) => {\n      const container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$b(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$b(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    const normalizeForwards = curry(normalizePosition, true);\n    const normalizeBackwards = curry(normalizePosition, false);\n\n    const execCommandIgnoreInputEvents = (editor, command) => {\n      const inputBlocker = e => e.stopImmediatePropagation();\n      editor.on('beforeinput input', inputBlocker, true);\n      editor.getDoc().execCommand(command);\n      editor.off('beforeinput input', inputBlocker);\n    };\n    const execEditorDeleteCommand = editor => {\n      editor.execCommand('delete');\n    };\n    const execNativeDeleteCommand = editor => execCommandIgnoreInputEvents(editor, 'Delete');\n    const execNativeForwardDeleteCommand = editor => execCommandIgnoreInputEvents(editor, 'ForwardDelete');\n    const isBeforeRoot = rootNode => elm => is$2(parent(elm), rootNode, eq);\n    const isTextBlockOrListItem = element => isTextBlock$2(element) || isListItem$1(element);\n    const getParentBlock$2 = (rootNode, elm) => {\n      if (contains(rootNode, elm)) {\n        return closest$4(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    const paddEmptyBody = (editor, moveSelection = true) => {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('', { no_selection: !moveSelection });\n      }\n    };\n    const willDeleteLastPositionInElement = (forward, fromPos, elm) => lift2(firstPositionIn(elm), lastPositionIn(elm), (firstPos, lastPos) => {\n      const normalizedFirstPos = normalizePosition(true, firstPos);\n      const normalizedLastPos = normalizePosition(false, lastPos);\n      const normalizedFromPos = normalizePosition(false, fromPos);\n      if (forward) {\n        return nextPosition(elm, normalizedFromPos).exists(nextPos => nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos));\n      } else {\n        return prevPosition(elm, normalizedFromPos).exists(prevPos => prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos));\n      }\n    }).getOr(true);\n    const freefallRtl = root => {\n      const child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(() => Optional.some(root));\n    };\n    const deleteRangeContents = (editor, rng, root, moveSelection = true) => {\n      var _a;\n      rng.deleteContents();\n      const lastNode = freefallRtl(root).getOr(root);\n      const lastBlock = SugarElement.fromDom((_a = editor.dom.getParent(lastNode.dom, editor.dom.isBlock)) !== null && _a !== void 0 ? _a : root.dom);\n      if (lastBlock.dom === editor.getBody()) {\n        paddEmptyBody(editor, moveSelection);\n      } else if (isEmpty$2(editor.schema, lastBlock, { checkRootAsContent: false })) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(root, lastBlock)) {\n        const additionalCleanupNodes = is$2(parent(lastBlock), root) ? [] : siblings(lastBlock);\n        each$e(additionalCleanupNodes.concat(children$1(root)), node => {\n          if (!eq(node, lastBlock) && !contains(node, lastBlock) && isEmpty$2(editor.schema, node)) {\n            remove$4(node);\n          }\n        });\n      }\n    };\n\n    const isRootFromElement = root => cur => eq(root, cur);\n    const getTableCells = table => descendants(table, 'td,th');\n    const getTable$1 = (node, isRoot) => getClosestTable(SugarElement.fromDom(node), isRoot);\n    const selectionInTableWithNestedTable = details => {\n      return lift2(details.startTable, details.endTable, (startTable, endTable) => {\n        const isStartTableParentOfEndTable = descendant(startTable, t => eq(t, endTable));\n        const isEndTableParentOfStartTable = descendant(endTable, t => eq(t, startTable));\n        return !isStartTableParentOfEndTable && !isEndTableParentOfStartTable ? details : {\n          ...details,\n          startTable: isStartTableParentOfEndTable ? Optional.none() : details.startTable,\n          endTable: isEndTableParentOfStartTable ? Optional.none() : details.endTable,\n          isSameTable: false,\n          isMultiTable: false\n        };\n      }).getOr(details);\n    };\n    const adjustQuirksInDetails = details => {\n      return selectionInTableWithNestedTable(details);\n    };\n    const getTableDetailsFromRange = (rng, isRoot) => {\n      const startTable = getTable$1(rng.startContainer, isRoot);\n      const endTable = getTable$1(rng.endContainer, isRoot);\n      const isStartInTable = startTable.isSome();\n      const isEndInTable = endTable.isSome();\n      const isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      const isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return adjustQuirksInDetails({\n        startTable,\n        endTable,\n        isStartInTable,\n        isEndInTable,\n        isSameTable,\n        isMultiTable\n      });\n    };\n\n    const tableCellRng = (start, end) => ({\n      start,\n      end\n    });\n    const tableSelection = (rng, table, cells) => ({\n      rng,\n      table,\n      cells\n    });\n    const deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    const getClosestCell$1 = (container, isRoot) => closest$3(SugarElement.fromDom(container), 'td,th', isRoot);\n    const isExpandedCellRng = cellRng => !eq(cellRng.start, cellRng.end);\n    const getTableFromCellRng = (cellRng, isRoot) => getClosestTable(cellRng.start, isRoot).bind(startParentTable => getClosestTable(cellRng.end, isRoot).bind(endParentTable => someIf(eq(startParentTable, endParentTable), startParentTable)));\n    const isSingleCellTable = (cellRng, isRoot) => !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(table => {\n      const rows = table.dom.rows;\n      return rows.length === 1 && rows[0].cells.length === 1;\n    });\n    const getCellRng = (rng, isRoot) => {\n      const startCell = getClosestCell$1(rng.startContainer, isRoot);\n      const endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    const getCellRangeFromStartTable = isRoot => startCell => getClosestTable(startCell, isRoot).bind(table => last$2(getTableCells(table)).map(endCell => tableCellRng(startCell, endCell)));\n    const getCellRangeFromEndTable = isRoot => endCell => getClosestTable(endCell, isRoot).bind(table => head(getTableCells(table)).map(startCell => tableCellRng(startCell, endCell)));\n    const getTableSelectionFromCellRng = isRoot => cellRng => getTableFromCellRng(cellRng, isRoot).map(table => tableSelection(cellRng, table, getTableCells(table)));\n    const getTableSelections = (cellRng, selectionDetails, rng, isRoot) => {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        const sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        const startCell = getClosestCell$1(rng.startContainer, isRoot);\n        const endCell = getClosestCell$1(rng.endContainer, isRoot);\n        const startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        const endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    const getCellIndex = (cells, cell) => findIndex$2(cells, x => eq(x, cell));\n    const getSelectedCells = tableSelection => lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), (startIndex, endIndex) => tableSelection.cells.slice(startIndex, endIndex + 1));\n    const isSingleCellTableContentSelected = (optCellRng, rng, isRoot) => optCellRng.exists(cellRng => isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng));\n    const unselectCells = (rng, selectionDetails) => {\n      const {startTable, endTable} = selectionDetails;\n      const otherContentRng = rng.cloneRange();\n      startTable.each(table => otherContentRng.setStartAfter(table.dom));\n      endTable.each(table => otherContentRng.setEndBefore(table.dom));\n      return otherContentRng;\n    };\n    const handleSingleTable = (cellRng, selectionDetails, rng, isRoot) => getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(({start, end}) => start.or(end)).bind(tableSelection => {\n      const {isSameTable} = selectionDetails;\n      const selectedCells = getSelectedCells(tableSelection).getOr([]);\n      if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n        return Optional.some(deleteAction.fullTable(tableSelection.table));\n      } else if (selectedCells.length > 0) {\n        if (isSameTable) {\n          return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n        } else {\n          const otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.partialTable(selectedCells, Optional.some({\n            ...selectionDetails,\n            rng: otherContentRng\n          })));\n        }\n      } else {\n        return Optional.none();\n      }\n    });\n    const handleMultiTable = (cellRng, selectionDetails, rng, isRoot) => getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(({start, end}) => {\n      const startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n      const endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n      if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n        const otherContentRng = unselectCells(rng, selectionDetails);\n        return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n      } else {\n        return Optional.none();\n      }\n    });\n    const getActionFromRange = (root, rng) => {\n      const isRoot = isRootFromElement(root);\n      const optCellRng = getCellRng(rng, isRoot);\n      const selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(cellRng => deleteAction.singleCellTable(rng, cellRng.start));\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    const cleanCells = cells => each$e(cells, cell => {\n      remove$9(cell, 'contenteditable');\n      fillWithPaddingBr(cell);\n    });\n    const getOutsideBlock = (editor, container) => Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    const handleEmptyBlock = (editor, startInTable, emptyBlock) => {\n      emptyBlock.each(block => {\n        if (startInTable) {\n          remove$4(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    const deleteContentInsideCell = (editor, cell, rng, isFirstCellInSelection) => {\n      const insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false).each(action => action());\n    };\n    const collapseAndRestoreCellSelection = editor => {\n      const selectedCells = getCellsFromEditor(editor);\n      const selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$3(selectedNode.dom) && isEmpty$2(editor.schema, selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, cell => eq(cell, selectedNode))) {\n        set$3(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    const emptySingleTableCells = (editor, cells, outsideDetails) => Optional.some(() => {\n      const editorRng = editor.selection.getRng();\n      const cellsToClean = outsideDetails.bind(({rng, isStartInTable}) => {\n        const outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(curry(isEmpty$2, editor.schema)));\n        const endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(editor.schema, endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n    });\n    const emptyMultiTableCells = (editor, startTableCells, endTableCells, betweenRng) => Optional.some(() => {\n      const rng = editor.selection.getRng();\n      const startCell = startTableCells[0];\n      const endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      const startTableCellsToClean = isEmpty$2(editor.schema, startCell) ? startTableCells : startTableCells.slice(1);\n      const endTableCellsToClean = isEmpty$2(editor.schema, endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n    });\n    const deleteCellContents = (editor, rng, cell, moveSelection = true) => Optional.some(() => {\n      deleteRangeContents(editor, rng, cell, moveSelection);\n    });\n    const deleteTableElement = (editor, table) => Optional.some(() => deleteElement$2(editor, false, table));\n    const deleteCellRange = (editor, rootElm, rng) => getActionFromRange(rootElm, rng).bind(action => action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor)));\n    const deleteCaptionRange = (editor, caption) => emptyElement(editor, caption);\n    const deleteTableRange = (editor, rootElm, rng, startElm) => getParentCaption(rootElm, startElm).fold(() => deleteCellRange(editor, rootElm, rng), caption => deleteCaptionRange(editor, caption));\n    const deleteRange$3 = (editor, startElm, selectedCells) => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    const getParentCell = (rootElm, elm) => find$2(parentsAndSelf(elm, rootElm), isTableCell$2);\n    const getParentCaption = (rootElm, elm) => find$2(parentsAndSelf(elm, rootElm), isTag('caption'));\n    const deleteBetweenCells = (editor, rootElm, forward, fromCell, from) => navigate(forward, editor.getBody(), from).bind(to => getParentCell(rootElm, SugarElement.fromDom(to.getNode())).bind(toCell => eq(toCell, fromCell) ? Optional.none() : Optional.some(noop)));\n    const emptyElement = (editor, elm) => Optional.some(() => {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n    });\n    const isDeleteOfLastCharPos = (fromCaption, forward, from, to) => firstPositionIn(fromCaption.dom).bind(first => lastPositionIn(fromCaption.dom).map(last => forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first))).getOr(true);\n    const emptyCaretCaption = (editor, elm) => emptyElement(editor, elm);\n    const validateCaretCaption = (rootElm, fromCaption, to) => getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).fold(() => Optional.some(noop), toCaption => someIf(!eq(toCaption, fromCaption), noop));\n    const deleteCaretInsideCaption = (editor, rootElm, forward, fromCaption, from) => navigate(forward, editor.getBody(), from).fold(() => Optional.some(noop), to => isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to));\n    const deleteCaretCells = (editor, forward, rootElm, startElm) => {\n      const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(fromCell => isEmpty$2(editor.schema, fromCell, { checkRootAsContent: false }) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from));\n    };\n    const deleteCaretCaption = (editor, forward, rootElm, fromCaption) => {\n      const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(editor.schema, fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    const isNearTable = (forward, pos) => forward ? isBeforeTable(pos) : isAfterTable(pos);\n    const isBeforeOrAfterTable = (editor, forward) => {\n      const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(pos => isNearTable(forward, pos));\n    };\n    const deleteCaret$3 = (editor, forward, startElm) => {\n      const rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(() => deleteCaretCells(editor, forward, rootElm, startElm).orThunk(() => someIf(isBeforeOrAfterTable(editor, forward), noop)), fromCaption => deleteCaretCaption(editor, forward, rootElm, fromCaption));\n    };\n    const backspaceDelete$a = (editor, forward) => {\n      const startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      const cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$3(editor, startElm, cells);\n    };\n\n    const getContentEditableRoot$1 = (root, node) => {\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        if (isContentEditableTrue$3(tempNode) || isContentEditableFalse$b(tempNode)) {\n          return tempNode;\n        }\n        tempNode = tempNode.parentNode;\n      }\n      return null;\n    };\n\n    const internalAttributesPrefixes = [\n      'data-ephox-',\n      'data-mce-',\n      'data-alloy-',\n      'data-snooker-',\n      '_'\n    ];\n    const each$9 = Tools.each;\n    const ElementUtils = editor => {\n      const dom = editor.dom;\n      const internalAttributes = new Set(editor.serializer.getTempAttrs());\n      const compare = (node1, node2) => {\n        if (node1.nodeName !== node2.nodeName || node1.nodeType !== node2.nodeType) {\n          return false;\n        }\n        const getAttribs = node => {\n          const attribs = {};\n          each$9(dom.getAttribs(node), attr => {\n            const name = attr.nodeName.toLowerCase();\n            if (name !== 'style' && !isAttributeInternal(name)) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        const compareObjects = (obj1, obj2) => {\n          for (const name in obj1) {\n            if (has$2(obj1, name)) {\n              const value = obj2[name];\n              if (isUndefined(value)) {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (const name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (isElement$6(node1) && isElement$6(node2)) {\n          if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n            return false;\n          }\n          if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n            return false;\n          }\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      const isAttributeInternal = attributeName => exists(internalAttributesPrefixes, value => startsWith(attributeName, value)) || internalAttributes.has(attributeName);\n      return {\n        compare,\n        isAttributeInternal\n      };\n    };\n\n    const isHeading = node => [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ].includes(node.name);\n    const isSummary = node => node.name === 'summary';\n\n    const traverse = (root, fn) => {\n      let node = root;\n      while (node = node.walk()) {\n        fn(node);\n      }\n    };\n    const matchNode$1 = (nodeFilters, attributeFilters, node, matches) => {\n      const name = node.name;\n      for (let ni = 0, nl = nodeFilters.length; ni < nl; ni++) {\n        const filter = nodeFilters[ni];\n        if (filter.name === name) {\n          const match = matches.nodes[name];\n          if (match) {\n            match.nodes.push(node);\n          } else {\n            matches.nodes[name] = {\n              filter,\n              nodes: [node]\n            };\n          }\n        }\n      }\n      if (node.attributes) {\n        for (let ai = 0, al = attributeFilters.length; ai < al; ai++) {\n          const filter = attributeFilters[ai];\n          const attrName = filter.name;\n          if (attrName in node.attributes.map) {\n            const match = matches.attributes[attrName];\n            if (match) {\n              match.nodes.push(node);\n            } else {\n              matches.attributes[attrName] = {\n                filter,\n                nodes: [node]\n              };\n            }\n          }\n        }\n      }\n    };\n    const findMatchingNodes = (nodeFilters, attributeFilters, node) => {\n      const matches = {\n        nodes: {},\n        attributes: {}\n      };\n      if (node.firstChild) {\n        traverse(node, childNode => {\n          matchNode$1(nodeFilters, attributeFilters, childNode, matches);\n        });\n      }\n      return matches;\n    };\n    const runFilters = (matches, args) => {\n      const run = (matchRecord, filteringAttributes) => {\n        each$d(matchRecord, match => {\n          const nodes = from(match.nodes);\n          each$e(match.filter.callbacks, callback => {\n            for (let i = nodes.length - 1; i >= 0; i--) {\n              const node = nodes[i];\n              const valueMatches = filteringAttributes ? node.attr(match.filter.name) !== undefined : node.name === match.filter.name;\n              if (!valueMatches || isNullable(node.parent)) {\n                nodes.splice(i, 1);\n              }\n            }\n            if (nodes.length > 0) {\n              callback(nodes, match.filter.name, args);\n            }\n          });\n        });\n      };\n      run(matches.nodes, false);\n      run(matches.attributes, true);\n    };\n    const filter$2 = (nodeFilters, attributeFilters, node, args = {}) => {\n      const matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      runFilters(matches, args);\n    };\n\n    const paddEmptyNode = (settings, args, isBlock, node) => {\n      const brPreferred = settings.pad_empty_with_br || args.insert;\n      if (brPreferred && isBlock(node)) {\n        const astNode = new AstNode('br', 1);\n        if (args.insert) {\n          astNode.attr('data-mce-bogus', '1');\n        }\n        node.empty().append(astNode);\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    const isPaddedWithNbsp = node => {\n      var _a;\n      return hasOnlyChild(node, '#text') && ((_a = node === null || node === void 0 ? void 0 : node.firstChild) === null || _a === void 0 ? void 0 : _a.value) === nbsp;\n    };\n    const hasOnlyChild = (node, name) => {\n      const firstChild = node === null || node === void 0 ? void 0 : node.firstChild;\n      return isNonNullable(firstChild) && firstChild === node.lastChild && firstChild.name === name;\n    };\n    const isPadded = (schema, node) => {\n      const rule = schema.getElementRule(node.name);\n      return (rule === null || rule === void 0 ? void 0 : rule.paddEmpty) === true;\n    };\n    const isEmpty = (schema, nonEmptyElements, whitespaceElements, node) => node.isEmpty(nonEmptyElements, whitespaceElements, node => isPadded(schema, node));\n    const isLineBreakNode = (node, isBlock) => isNonNullable(node) && (isBlock(node) || node.name === 'br');\n    const findClosestEditingHost = scope => {\n      let editableNode;\n      for (let node = scope; node; node = node.parent) {\n        const contentEditable = node.attr('contenteditable');\n        if (contentEditable === 'false') {\n          break;\n        } else if (contentEditable === 'true') {\n          editableNode = node;\n        }\n      }\n      return Optional.from(editableNode);\n    };\n\n    const removeOrUnwrapInvalidNode = (node, schema, originalNodeParent = node.parent) => {\n      if (schema.getSpecialElements()[node.name]) {\n        node.empty().remove();\n      } else {\n        const children = node.children();\n        for (const childNode of children) {\n          if (originalNodeParent && !schema.isValidChild(originalNodeParent.name, childNode.name)) {\n            removeOrUnwrapInvalidNode(childNode, schema, originalNodeParent);\n          }\n        }\n        node.unwrap();\n      }\n    };\n    const cleanInvalidNodes = (nodes, schema, rootNode, onCreate = noop) => {\n      const textBlockElements = schema.getTextBlockElements();\n      const nonEmptyElements = schema.getNonEmptyElements();\n      const whitespaceElements = schema.getWhitespaceElements();\n      const nonSplittableElements = Tools.makeMap('tr,td,th,tbody,thead,tfoot,table,summary');\n      const fixed = new Set();\n      const isSplittableElement = node => node !== rootNode && !nonSplittableElements[node.name];\n      for (let ni = 0; ni < nodes.length; ni++) {\n        const node = nodes[ni];\n        let parent;\n        let newParent;\n        let tempNode;\n        if (!node.parent || fixed.has(node)) {\n          continue;\n        }\n        if (textBlockElements[node.name] && node.parent.name === 'li') {\n          let sibling = node.next;\n          while (sibling) {\n            if (textBlockElements[sibling.name]) {\n              sibling.name = 'li';\n              fixed.add(sibling);\n              node.parent.insert(sibling, node.parent);\n            } else {\n              break;\n            }\n            sibling = sibling.next;\n          }\n          node.unwrap();\n          continue;\n        }\n        const parents = [node];\n        for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && isSplittableElement(parent); parent = parent.parent) {\n          parents.push(parent);\n        }\n        if (parent && parents.length > 1) {\n          if (!isInvalid(schema, node, parent)) {\n            parents.reverse();\n            newParent = parents[0].clone();\n            onCreate(newParent);\n            let currentNode = newParent;\n            for (let i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name) && i > 0) {\n                tempNode = parents[i].clone();\n                onCreate(tempNode);\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (let childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                const nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else {\n            removeOrUnwrapInvalidNode(node, schema);\n          }\n        } else if (node.parent) {\n          if (node.name === 'li') {\n            let sibling = node.prev;\n            if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n              sibling.append(node);\n              continue;\n            }\n            sibling = node.next;\n            if (sibling && (sibling.name === 'ul' || sibling.name === 'ol') && sibling.firstChild) {\n              sibling.insert(node, sibling.firstChild, true);\n              continue;\n            }\n            const wrapper = new AstNode('ul', 1);\n            onCreate(wrapper);\n            node.wrap(wrapper);\n            continue;\n          }\n          if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n            const wrapper = new AstNode('div', 1);\n            onCreate(wrapper);\n            node.wrap(wrapper);\n          } else {\n            removeOrUnwrapInvalidNode(node, schema);\n          }\n        }\n      }\n    };\n    const hasClosest = (node, parentName) => {\n      let tempNode = node;\n      while (tempNode) {\n        if (tempNode.name === parentName) {\n          return true;\n        }\n        tempNode = tempNode.parent;\n      }\n      return false;\n    };\n    const isInvalid = (schema, node, parent = node.parent) => {\n      if (!parent) {\n        return false;\n      }\n      if (schema.children[node.name] && !schema.isValidChild(parent.name, node.name)) {\n        return true;\n      }\n      if (node.name === 'a' && hasClosest(parent, 'a')) {\n        return true;\n      }\n      if (isSummary(parent) && isHeading(node)) {\n        return !((parent === null || parent === void 0 ? void 0 : parent.firstChild) === node && (parent === null || parent === void 0 ? void 0 : parent.lastChild) === node);\n      }\n      return false;\n    };\n\n    const createRange = (sc, so, ec, eo) => {\n      const rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    const normalizeBlockSelectionRange = rng => {\n      const startPos = CaretPosition.fromRangeStart(rng);\n      const endPos = CaretPosition.fromRangeEnd(rng);\n      const rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(newEndPos => {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    const normalize = rng => rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n\n    const hasOnlyOneChild$1 = node => {\n      return isNonNullable(node.firstChild) && node.firstChild === node.lastChild;\n    };\n    const isPaddingNode = node => {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    const isPaddedEmptyBlock = (schema, node) => {\n      const blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    const isEmptyFragmentElement = (schema, node) => {\n      const nonEmptyElements = schema.getNonEmptyElements();\n      return isNonNullable(node) && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    const isListFragment = (schema, fragment) => {\n      let firstChild = fragment.firstChild;\n      let lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild === null || lastChild === void 0 ? void 0 : lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    const cleanupDomFragment = domFragment => {\n      var _a, _b;\n      const firstChild = domFragment.firstChild;\n      const lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        (_a = firstChild.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        (_b = lastChild.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    const toDomFragment = (dom, serializer, fragment) => {\n      const html = serializer.serialize(fragment);\n      const domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    const listItems = elm => {\n      var _a;\n      return filter$5((_a = elm === null || elm === void 0 ? void 0 : elm.childNodes) !== null && _a !== void 0 ? _a : [], child => {\n        return child.nodeName === 'LI';\n      });\n    };\n    const isPadding = node => {\n      return node.data === nbsp || isBr$6(node);\n    };\n    const isListItemPadded = node => {\n      return isNonNullable(node === null || node === void 0 ? void 0 : node.firstChild) && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    const isEmptyOrPadded = elm => {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    const trimListItems = elms => {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    const getParentLi = (dom, node) => {\n      const parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    const isParentBlockLi = (dom, node) => {\n      return !!getParentLi(dom, node);\n    };\n    const getSplit = (parentNode, rng) => {\n      const beforeRng = rng.cloneRange();\n      const afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    const findFirstIn = (node, rootNode) => {\n      const caretPos = CaretPosition.before(node);\n      const caretWalker = CaretWalker(rootNode);\n      const newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    const findLastOf = (node, rootNode) => {\n      const caretPos = CaretPosition.after(node);\n      const caretWalker = CaretWalker(rootNode);\n      const newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    const insertMiddle = (target, elms, rootNode, rng) => {\n      const parts = getSplit(target, rng);\n      const parentElm = target.parentNode;\n      if (parentElm) {\n        parentElm.insertBefore(parts[0], target);\n        Tools.each(elms, li => {\n          parentElm.insertBefore(li, target);\n        });\n        parentElm.insertBefore(parts[1], target);\n        parentElm.removeChild(target);\n      }\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    const insertBefore$2 = (target, elms, rootNode) => {\n      const parentElm = target.parentNode;\n      if (parentElm) {\n        Tools.each(elms, elm => {\n          parentElm.insertBefore(elm, target);\n        });\n      }\n      return findFirstIn(target, rootNode);\n    };\n    const insertAfter$2 = (target, elms, rootNode, dom) => {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    const insertAtCaret$1 = (serializer, dom, rng, fragment) => {\n      const domFragment = toDomFragment(dom, serializer, fragment);\n      const liTarget = getParentLi(dom, rng.startContainer);\n      const liElms = trimListItems(listItems(domFragment.firstChild));\n      const BEGINNING = 1, END = 2;\n      const rootNode = dom.getRoot();\n      const isAt = location => {\n        const caretPos = CaretPosition.fromRangeStart(rng);\n        const caretWalker = CaretWalker(dom.getRoot());\n        const newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        const newPosNode = newPos === null || newPos === void 0 ? void 0 : newPos.getNode();\n        return newPosNode ? getParentLi(dom, newPosNode) !== liTarget : true;\n      };\n      if (!liTarget) {\n        return null;\n      } else if (isAt(BEGINNING)) {\n        return insertBefore$2(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$2(liTarget, liElms, rootNode, dom);\n      } else {\n        return insertMiddle(liTarget, liElms, rootNode, rng);\n      }\n    };\n\n    const mergeableWrappedElements = ['pre'];\n    const shouldPasteContentOnly = (dom, fragment, parentNode, root) => {\n      var _a;\n      const firstNode = fragment.firstChild;\n      const lastNode = fragment.lastChild;\n      const last = lastNode.attr('data-mce-type') === 'bookmark' ? lastNode.prev : lastNode;\n      const isPastingSingleElement = firstNode === last;\n      const isWrappedElement = contains$2(mergeableWrappedElements, firstNode.name);\n      if (isPastingSingleElement && isWrappedElement) {\n        const isContentEditable = firstNode.attr('contenteditable') !== 'false';\n        const isPastingInTheSameBlockTag = ((_a = dom.getParent(parentNode, dom.isBlock)) === null || _a === void 0 ? void 0 : _a.nodeName.toLowerCase()) === firstNode.name;\n        const isPastingInContentEditable = Optional.from(getContentEditableRoot$1(root, parentNode)).forall(isContentEditableTrue$3);\n        return isContentEditable && isPastingInTheSameBlockTag && isPastingInContentEditable;\n      } else {\n        return false;\n      }\n    };\n    const isTableCell = isTableCell$3;\n    const isTableCellContentSelected = (dom, rng, cell) => {\n      if (isNonNullable(cell)) {\n        const endCell = dom.getParent(rng.endContainer, isTableCell);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    const validInsertion = (editor, value, parentNode) => {\n      var _a;\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        (_a = parentNode.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        const node = parentNode.firstChild;\n        const node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value, { no_events: true });\n        }\n      }\n    };\n    const trimBrsFromTableCell = (dom, elm, schema) => {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(el => trimBlockTrailingBr(el, schema));\n    };\n    const reduceInlineTextElements = (editor, merge) => {\n      const textInlineElements = editor.schema.getTextInlineElements();\n      const dom = editor.dom;\n      if (merge) {\n        const root = editor.getBody();\n        const elementUtils = ElementUtils(editor);\n        Tools.each(dom.select('*[data-mce-fragment]'), node => {\n          const isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (let parentNode = node.parentElement; isNonNullable(parentNode) && parentNode !== root; parentNode = parentNode.parentElement) {\n              const styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    const markFragmentElements = fragment => {\n      let node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    const unmarkFragmentElements = elm => {\n      Tools.each(elm.getElementsByTagName('*'), elm => {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    const isPartOfFragment = node => {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    const canHaveChildren = (editor, node) => {\n      return isNonNullable(node) && !editor.schema.getVoidElements()[node.nodeName];\n    };\n    const moveSelectionToMarker = (editor, marker) => {\n      var _a, _b, _c;\n      let nextRng;\n      const dom = editor.dom;\n      const selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      const parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (parentEditableElm && dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      let rng = dom.createRng();\n      const node = marker.previousSibling;\n      if (isText$b(node)) {\n        rng.setStart(node, (_b = (_a = node.nodeValue) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n        const node2 = marker.nextSibling;\n        if (isText$b(node2)) {\n          node.appendData(node2.data);\n          (_c = node2.parentNode) === null || _c === void 0 ? void 0 : _c.removeChild(node2);\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      const findNextCaretRng = rng => {\n        let caretPos = CaretPosition.fromRangeStart(rng);\n        const caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        return caretPos === null || caretPos === void 0 ? void 0 : caretPos.toRange();\n      };\n      const parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        const isCell = isTableCell(parentBlock);\n        empty(SugarElement.fromDom(parentBlock));\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isCell && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', isCell ? {} : { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    const deleteSelectedContent = editor => {\n      const dom = editor.dom;\n      const rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      const startCell = dom.getParent(rng.startContainer, isTableCell);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else if (rng.startContainer === rng.endContainer && rng.endOffset - rng.startOffset === 1 && isText$b(rng.startContainer.childNodes[rng.startOffset])) {\n        rng.deleteContents();\n      } else {\n        editor.getDoc().execCommand('Delete', false);\n      }\n    };\n    const findMarkerNode = scope => {\n      for (let markerNode = scope; markerNode; markerNode = markerNode.walk()) {\n        if (markerNode.attr('id') === 'mce_marker') {\n          return Optional.some(markerNode);\n        }\n      }\n      return Optional.none();\n    };\n    const notHeadingsInSummary = (dom, node, fragment) => {\n      var _a;\n      return exists(fragment.children(), isHeading) && ((_a = dom.getParent(node, dom.isBlock)) === null || _a === void 0 ? void 0 : _a.nodeName) === 'SUMMARY';\n    };\n    const insertHtmlAtCaret = (editor, value, details) => {\n      var _a, _b;\n      const selection = editor.selection;\n      const dom = editor.dom;\n      const parser = editor.parser;\n      const merge = details.merge;\n      const serializer = HtmlSerializer({ validate: true }, editor.schema);\n      const bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      if (!details.preserve_zwsp) {\n        value = trim$2(value);\n      }\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      let rng = selection.getRng();\n      const caretElement = rng.startContainer;\n      const body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      const parentNode = selection.getNode();\n      const parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      const fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        if (rng) {\n          selection.setRng(rng);\n        }\n        return value;\n      }\n      if (details.paste === true && shouldPasteContentOnly(dom, fragment, parentNode, editor.getBody())) {\n        (_a = fragment.firstChild) === null || _a === void 0 ? void 0 : _a.unwrap();\n      }\n      markFragmentElements(fragment);\n      let node = fragment.lastChild;\n      if (node && node.attr('id') === 'mce_marker') {\n        const marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (node.parent && editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid && !notHeadingsInSummary(dom, parentNode, fragment)) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        let parentNode = selection.getNode();\n        let tempNode;\n        const rootNode = editor.getBody();\n        if (isDocument$1(parentNode)) {\n          parentNode = tempNode = rootNode;\n        } else {\n          tempNode = parentNode;\n        }\n        while (tempNode && tempNode !== rootNode) {\n          parentNode = tempNode;\n          tempNode = tempNode.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        const root = parser.parse(value);\n        const markerNode = findMarkerNode(root);\n        const editingHost = markerNode.bind(findClosestEditingHost).getOr(root);\n        markerNode.each(marker => marker.replace(fragment));\n        const toExtract = fragment.children();\n        const parent = (_b = fragment.parent) !== null && _b !== void 0 ? _b : root;\n        fragment.unwrap();\n        const invalidChildren = filter$5(toExtract, node => isInvalid(editor.schema, node, parent));\n        cleanInvalidNodes(invalidChildren, editor.schema, editingHost);\n        filter$2(parser.getNodeFilters(), parser.getAttributeFilters(), root);\n        value = serializer.serialize(root);\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart(), editor.schema);\n      updateCaret(editor.schema, editor.getBody(), selection.getStart());\n      return value;\n    };\n\n    const isTreeNode = content => content instanceof AstNode;\n\n    const moveSelection = editor => {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(pos => {\n          const node = pos.getNode();\n          const caretPos = isTable$2(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    const setEditorHtml = (editor, html, noSelection) => {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    const setContentString = (editor, body, content, args) => {\n      content = trim$2(content);\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        const padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        const forcedRootBlockName = getForcedRootBlock(editor);\n        if (editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = padd;\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        return {\n          content,\n          html: content\n        };\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: false }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        const trimmedHtml = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, trimmedHtml, args.no_selection);\n        return {\n          content: trimmedHtml,\n          html: trimmedHtml\n        };\n      }\n    };\n    const setContentTree = (editor, body, content, args) => {\n      filter$2(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      const html = HtmlSerializer({ validate: false }, editor.schema).serialize(content);\n      const trimmedHtml = trim$2(isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html));\n      setEditorHtml(editor, trimmedHtml, args.no_selection);\n      return {\n        content,\n        html: trimmedHtml\n      };\n    };\n    const setContentInternal = (editor, content, args) => {\n      return Optional.from(editor.getBody()).map(body => {\n        if (isTreeNode(content)) {\n          return setContentTree(editor, body, content, args);\n        } else {\n          return setContentString(editor, body, content, args);\n        }\n      }).getOr({\n        content,\n        html: isTreeNode(args.content) ? '' : args.content\n      });\n    };\n\n    const ensureIsRoot = isRoot => isFunction(isRoot) ? isRoot : never;\n    const ancestor = (scope, transform, isRoot) => {\n      let element = scope.dom;\n      const stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        const transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$1 = (scope, transform, isRoot) => {\n      const current = transform(scope);\n      const stop = ensureIsRoot(isRoot);\n      return current.orThunk(() => stop(scope) ? Optional.none() : ancestor(scope, transform, stop));\n    };\n\n    const isEq$3 = isEq$5;\n    const matchesUnInheritedFormatSelector = (ed, node, name) => {\n      const formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (let i = 0; i < formatList.length; i++) {\n          const format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    const matchParents = (editor, node, name, vars, similar) => {\n      const root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      const matchedNode = editor.dom.getParent(node, elm => {\n        if (matchesUnInheritedFormatSelector(editor, elm, name)) {\n          return true;\n        }\n        return elm.parentNode === root || !!matchNode(editor, elm, name, vars, true);\n      });\n      return !!matchNode(editor, matchedNode, name, vars, similar);\n    };\n    const matchName = (dom, node, format) => {\n      if (isInlineFormat(format) && isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$3(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$6(node) && dom.is(node, format.selector);\n      }\n      return false;\n    };\n    const matchItems = (dom, node, format, itemName, similar, vars) => {\n      const items = format[itemName];\n      const matchAttributes = itemName === 'attributes';\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (!isArrayLike(items)) {\n          for (const key in items) {\n            if (has$2(items, key)) {\n              const value = matchAttributes ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              const expectedValue = replaceVars(items[key], vars);\n              const isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (let i = 0; i < items.length; i++) {\n            if (matchAttributes ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    const matchNode = (ed, node, name, vars, similar) => {\n      const formatList = ed.formatter.get(name);\n      const dom = ed.dom;\n      if (formatList && isElement$6(node)) {\n        for (let i = 0; i < formatList.length; i++) {\n          const format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            const classes = format.classes;\n            if (classes) {\n              for (let x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n      return undefined;\n    };\n    const match$2 = (editor, name, vars, node, similar) => {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      const startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const matchAll = (editor, names, vars) => {\n      const matchedFormatNames = [];\n      const checkedMap = {};\n      const startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, node => {\n        for (let i = 0; i < names.length; i++) {\n          const name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    const closest = (editor, names) => {\n      const isRoot = elm => eq(elm, SugarElement.fromDom(editor.getBody()));\n      const match = (elm, name) => matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      return Optional.from(editor.selection.getStart(true)).bind(rawElm => closest$1(SugarElement.fromDom(rawElm), elm => findMap(names, name => match(elm, name)), isRoot)).getOrNull();\n    };\n    const canApply = (editor, name) => {\n      const formatList = editor.formatter.get(name);\n      const dom = editor.dom;\n      if (formatList && editor.selection.isEditable()) {\n        const startNode = editor.selection.getStart();\n        const parents = getParents$2(dom, startNode);\n        for (let x = formatList.length - 1; x >= 0; x--) {\n          const format = formatList[x];\n          if (!isSelectorFormat(format)) {\n            return true;\n          }\n          for (let i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    const matchAllOnNode = (editor, node, formatNames) => foldl(formatNames, (acc, name) => {\n      const matchSimilar = isVariableFormatName(editor, name);\n      if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n        return acc.concat([name]);\n      } else {\n        return acc;\n      }\n    }, []);\n\n    const ZWSP = ZWSP$1;\n    const importNode = (ownerDocument, node) => {\n      return ownerDocument.importNode(node, true);\n    };\n    const findFirstTextNode = node => {\n      if (node) {\n        const walker = new DomTreeWalker(node, node);\n        for (let tempNode = walker.current(); tempNode; tempNode = walker.next()) {\n          if (isText$b(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      return null;\n    };\n    const createCaretContainer = fill => {\n      const caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    const trimZwspFromCaretContainer = caretContainerNode => {\n      const textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.data.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    const removeCaretContainerNode = (editor, node, moveCaret) => {\n      const dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret, true);\n      } else {\n        const rng = selection.getRng();\n        const block = dom.getParent(node, dom.isBlock);\n        const startContainer = rng.startContainer;\n        const startOffset = rng.startOffset;\n        const endContainer = rng.endContainer;\n        const endOffset = rng.endOffset;\n        const textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    const removeCaretContainer = (editor, node, moveCaret) => {\n      const dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, moveCaret);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    const insertCaretContainerNode = (editor, caretContainer, formatNode) => {\n      var _a, _b;\n      const dom = editor.dom;\n      const block = dom.getParent(formatNode, curry(isTextBlock$1, editor.schema));\n      if (block && dom.isEmpty(block)) {\n        (_a = formatNode.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          (_b = formatNode.parentNode) === null || _b === void 0 ? void 0 : _b.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    const appendNode = (parentNode, node) => {\n      parentNode.appendChild(node);\n      return node;\n    };\n    const insertFormatNodesIntoCaretContainer = (formatNodes, caretContainer) => {\n      var _a;\n      const innerMostFormatNode = foldr(formatNodes, (parentNode, formatNode) => {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      const doc = (_a = innerMostFormatNode.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      return appendNode(innerMostFormatNode, doc.createTextNode(ZWSP));\n    };\n    const cleanFormatNode = (editor, caretContainer, formatNode, name, vars, similar) => {\n      const formatter = editor.formatter;\n      const dom = editor.dom;\n      const validFormats = filter$5(keys(formatter.get()), formatName => formatName !== name && !contains$1(formatName, 'removeformat'));\n      const matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      const uniqueFormats = filter$5(matchedFormats, fmtName => !areSimilarFormats(editor, fmtName, name));\n      if (uniqueFormats.length > 0) {\n        const clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    const applyCaretFormat = (editor, name, vars) => {\n      let caretContainer;\n      const selection = editor.selection;\n      const formatList = editor.formatter.get(name);\n      if (!formatList) {\n        return;\n      }\n      const selectionRng = selection.getRng();\n      let offset = selectionRng.startOffset;\n      const container = selectionRng.startContainer;\n      const text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      const wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        const bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        let rng = expandRng(editor.dom, selectionRng, formatList);\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        let textNode = caretContainer ? findFirstTextNode(caretContainer) : null;\n        if (!caretContainer || (textNode === null || textNode === void 0 ? void 0 : textNode.data) !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    const removeCaretFormat = (editor, name, vars, similar) => {\n      const dom = editor.dom;\n      const selection = editor.selection;\n      let hasContentAfter = false;\n      const formatList = editor.formatter.get(name);\n      if (!formatList) {\n        return;\n      }\n      const rng = selection.getRng();\n      const container = rng.startContainer;\n      const offset = rng.startOffset;\n      let node = container;\n      if (isText$b(container)) {\n        if (offset !== container.data.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      const parents = [];\n      let formatNode;\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        const bookmark = selection.getBookmark();\n        rng.collapse(true);\n        let expandedRng = expandRng(dom, rng, formatList, true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        const caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        const parentsAfter = isNonNullable(caretContainer) ? dom.getParents(formatNode.parentNode, always, caretContainer) : [];\n        const newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null && caretContainer !== void 0 ? caretContainer : formatNode);\n        const cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        const caretTextNode = insertFormatNodesIntoCaretContainer([\n          ...parents,\n          ...cleanedFormatNode.toArray(),\n          ...parentsAfter\n        ], newCaretContainer);\n        if (caretContainer) {\n          removeCaretContainerNode(editor, caretContainer, isNonNullable(caretContainer));\n        }\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    const disableCaretContainer = (editor, keyCode, moveCaret) => {\n      const selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, moveCaret);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()), true);\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()), true);\n      }\n    };\n    const endsWithNbsp = element => isText$b(element) && endsWith(element.data, nbsp);\n    const setup$v = editor => {\n      editor.on('mouseup keydown', e => {\n        disableCaretContainer(editor, e.keyCode, endsWithNbsp(editor.selection.getRng().endContainer));\n      });\n    };\n    const createCaretFormat = formatNodes => {\n      const caretContainer = createCaretContainer(false);\n      const innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      return {\n        caretContainer,\n        caretPosition: CaretPosition(innerMost, 0)\n      };\n    };\n    const replaceWithCaretFormat = (targetNode, formatNodes) => {\n      const {caretContainer, caretPosition} = createCaretFormat(formatNodes);\n      before$3(SugarElement.fromDom(targetNode), caretContainer);\n      remove$4(SugarElement.fromDom(targetNode));\n      return caretPosition;\n    };\n    const createCaretFormatAtStart$1 = (rng, formatNodes) => {\n      const {caretContainer, caretPosition} = createCaretFormat(formatNodes);\n      rng.insertNode(caretContainer.dom);\n      return caretPosition;\n    };\n    const isFormatElement = (editor, element) => {\n      if (isCaretNode(element.dom)) {\n        return false;\n      }\n      const inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$1(element.dom);\n    };\n\n    const postProcessHooks = {};\n    const isPre = matchNodeNames(['pre']);\n    const addPostProcessHook = (name, hook) => {\n      const hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    const postProcess$1 = (name, editor) => {\n      if (has$2(postProcessHooks, name)) {\n        each$e(postProcessHooks[name], hook => {\n          hook(editor);\n        });\n      }\n    };\n    addPostProcessHook('pre', editor => {\n      const rng = editor.selection.getRng();\n      const hasPreSibling = blocks => pre => {\n        const prev = pre.previousSibling;\n        return isPre(prev) && contains$2(blocks, prev);\n      };\n      const joinPre = (pre1, pre2) => {\n        const sPre2 = SugarElement.fromDom(pre2);\n        const doc = documentOrOwner(sPre2).dom;\n        remove$4(sPre2);\n        append(SugarElement.fromDom(pre1), [\n          SugarElement.fromTag('br', doc),\n          SugarElement.fromTag('br', doc),\n          ...children$1(sPre2)\n        ]);\n      };\n      if (!rng.collapsed) {\n        const blocks = editor.selection.getSelectedBlocks();\n        const preBlocks = filter$5(filter$5(blocks, isPre), hasPreSibling(blocks));\n        each$e(preBlocks, pre => {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    const listItemStyles = [\n      'fontWeight',\n      'fontStyle',\n      'color',\n      'fontSize',\n      'fontFamily'\n    ];\n    const hasListStyles = fmt => isObject(fmt.styles) && exists(keys(fmt.styles), name => contains$2(listItemStyles, name));\n    const findExpandedListItemFormat = formats => find$2(formats, fmt => isInlineFormat(fmt) && fmt.inline === 'span' && hasListStyles(fmt));\n    const getExpandedListItemFormat = (formatter, format) => {\n      const formatList = formatter.get(format);\n      return isArray$1(formatList) ? findExpandedListItemFormat(formatList) : Optional.none();\n    };\n    const isRngStartAtStartOfElement = (rng, elm) => prevPosition(elm, CaretPosition.fromRangeStart(rng)).isNone();\n    const isRngEndAtEndOfElement = (rng, elm) => {\n      return nextPosition(elm, CaretPosition.fromRangeEnd(rng)).exists(pos => !isBr$6(pos.getNode()) || nextPosition(elm, pos).isSome()) === false;\n    };\n    const isEditableListItem = dom => elm => isListItem$2(elm) && dom.isEditable(elm);\n    const getFullySelectedBlocks = selection => {\n      const blocks = selection.getSelectedBlocks();\n      const rng = selection.getRng();\n      if (selection.isCollapsed()) {\n        return [];\n      }\n      if (blocks.length === 1) {\n        return isRngStartAtStartOfElement(rng, blocks[0]) && isRngEndAtEndOfElement(rng, blocks[0]) ? blocks : [];\n      } else {\n        const first = head(blocks).filter(elm => isRngStartAtStartOfElement(rng, elm)).toArray();\n        const last = last$2(blocks).filter(elm => isRngEndAtEndOfElement(rng, elm)).toArray();\n        const middle = blocks.slice(1, -1);\n        return first.concat(middle).concat(last);\n      }\n    };\n    const getFullySelectedListItems = selection => filter$5(getFullySelectedBlocks(selection), isEditableListItem(selection.dom));\n    const getPartiallySelectedListItems = selection => filter$5(selection.getSelectedBlocks(), isEditableListItem(selection.dom));\n\n    const each$8 = Tools.each;\n    const isElementNode = node => isElement$6(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$1(node);\n    const findElementSibling = (node, siblingName) => {\n      for (let sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$b(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$6(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    const mergeSiblingsNodes = (editor, prev, next) => {\n      const elementUtils = ElementUtils(editor);\n      const isPrevEditable = isHTMLElement(prev) && editor.dom.isEditable(prev);\n      const isNextEditable = isHTMLElement(next) && editor.dom.isEditable(next);\n      if (isPrevEditable && isNextEditable) {\n        const prevSibling = findElementSibling(prev, 'previousSibling');\n        const nextSibling = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prevSibling, nextSibling)) {\n          for (let sibling = prevSibling.nextSibling; sibling && sibling !== nextSibling;) {\n            const tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prevSibling.appendChild(tmpSibling);\n          }\n          editor.dom.remove(nextSibling);\n          Tools.each(Tools.grep(nextSibling.childNodes), node => {\n            prevSibling.appendChild(node);\n          });\n          return prevSibling;\n        }\n      }\n      return next;\n    };\n    const mergeSiblings = (editor, format, vars, node) => {\n      var _a;\n      if (node && format.merge_siblings !== false) {\n        const newNode = (_a = mergeSiblingsNodes(editor, getNonWhiteSpaceSibling(node), node)) !== null && _a !== void 0 ? _a : node;\n        mergeSiblingsNodes(editor, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    const clearChildStyles = (dom, format, node) => {\n      if (format.clear_child_styles) {\n        const selector = format.links ? '*:not(a)' : '*';\n        each$8(dom.select(selector, node), childNode => {\n          if (isElementNode(childNode) && dom.isEditable(childNode)) {\n            each$8(format.styles, (_value, name) => {\n              dom.setStyle(childNode, name, '');\n            });\n          }\n        });\n      }\n    };\n    const processChildElements = (node, filter, process) => {\n      each$8(node.childNodes, node => {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    const unwrapEmptySpan = (dom, node) => {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    const hasStyle = (dom, name) => node => !!(node && getStyle(dom, node, name));\n    const applyStyle = (dom, name, value) => node => {\n      dom.setStyle(node, name, value);\n      if (node.getAttribute('style') === '') {\n        node.removeAttribute('style');\n      }\n      unwrapEmptySpan(dom, node);\n    };\n\n    const removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    const MCE_ATTR_RE = /^(src|href|style)$/;\n    const each$7 = Tools.each;\n    const isEq$2 = isEq$5;\n    const isTableCellOrRow = node => /^(TR|TH|TD)$/.test(node.nodeName);\n    const isChildOfInlineParent = (dom, node, parent) => dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    const getContainer = (ed, rng, start) => {\n      let container = rng[start ? 'startContainer' : 'endContainer'];\n      let offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$6(container)) {\n        const lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$b(container) && start && offset >= container.data.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$b(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    const normalizeTableSelection = (node, start) => {\n      const prop = start ? 'firstChild' : 'lastChild';\n      const childNode = node[prop];\n      if (isTableCellOrRow(node) && childNode) {\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    const wrap$1 = (dom, node, name, attrs) => {\n      var _a;\n      const wrapper = dom.create(name, attrs);\n      (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    const wrapWithSiblings = (dom, node, next, name, attrs) => {\n      const start = SugarElement.fromDom(node);\n      const wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      const siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$3(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$4(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    const isColorFormatAndAnchor = (node, format) => format.links && node.nodeName === 'A';\n    const removeNode = (ed, node, format) => {\n      const parentNode = node.parentNode;\n      let rootBlockElm;\n      const dom = ed.dom;\n      const forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (parentNode === dom.getRoot()) {\n          if (!format.list_block || !isEq$2(node, format.list_block)) {\n            each$e(from(node.childNodes), node => {\n              if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                if (!rootBlockElm) {\n                  rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                  dom.setAttribs(rootBlockElm, getForcedRootBlockAttrs(ed));\n                } else {\n                  rootBlockElm.appendChild(node);\n                }\n              } else {\n                rootBlockElm = null;\n              }\n            });\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    const processFormatAttrOrStyle = (name, value, vars) => {\n      if (isNumber(name)) {\n        return {\n          name: value,\n          value: null\n        };\n      } else {\n        return {\n          name,\n          value: replaceVars(value, vars)\n        };\n      }\n    };\n    const removeEmptyStyleAttributeIfNeeded = (dom, elm) => {\n      if (dom.getAttrib(elm, 'style') === '') {\n        elm.removeAttribute('style');\n        elm.removeAttribute('data-mce-style');\n      }\n    };\n    const removeStyles = (dom, elm, format, vars, compareNode) => {\n      let stylesModified = false;\n      each$7(format.styles, (value, name) => {\n        const {\n          name: styleName,\n          value: styleValue\n        } = processFormatAttrOrStyle(name, value, vars);\n        const normalizedStyleValue = normalizeStyleValue(styleValue, styleName);\n        if (format.remove_similar || isNull(styleValue) || !isElement$6(compareNode) || isEq$2(getStyle(dom, compareNode, styleName), normalizedStyleValue)) {\n          dom.setStyle(elm, styleName, '');\n        }\n        stylesModified = true;\n      });\n      if (stylesModified) {\n        removeEmptyStyleAttributeIfNeeded(dom, elm);\n      }\n    };\n    const removeListStyleFormats = (editor, name, vars) => {\n      if (name === 'removeformat') {\n        each$e(getPartiallySelectedListItems(editor.selection), li => {\n          each$e(listItemStyles, name => editor.dom.setStyle(li, name, ''));\n          removeEmptyStyleAttributeIfNeeded(editor.dom, li);\n        });\n      } else {\n        getExpandedListItemFormat(editor.formatter, name).each(liFmt => {\n          each$e(getPartiallySelectedListItems(editor.selection), li => removeStyles(editor.dom, li, liFmt, vars, null));\n        });\n      }\n    };\n    const removeNodeFormatInternal = (ed, format, vars, node, compareNode) => {\n      const dom = ed.dom;\n      const elementUtils = ElementUtils(ed);\n      const schema = ed.schema;\n      if (isInlineFormat(format) && isTransparentElementName(schema, format.inline) && isTransparentBlock(schema, node) && node.parentElement === ed.getBody()) {\n        removeNode(ed, node, format);\n        return removeResult.removed();\n      }\n      if (!format.ceFalseOverride && node && dom.getContentEditableParent(node) === 'false') {\n        return removeResult.keep();\n      }\n      if (node && !matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      const elm = node;\n      const preserveAttributes = format.preserve_attributes;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(preserveAttributes)) {\n        const attrsToPreserve = filter$5(dom.getAttribs(elm), attr => contains$2(preserveAttributes, attr.name.toLowerCase()));\n        dom.removeAllAttribs(elm);\n        each$e(attrsToPreserve, attr => dom.setAttrib(elm, attr.name, attr.value));\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        removeStyles(dom, elm, format, vars, compareNode);\n        each$7(format.attributes, (value, name) => {\n          const {\n            name: attrName,\n            value: attrValue\n          } = processFormatAttrOrStyle(name, value, vars);\n          if (format.remove_similar || isNull(attrValue) || !isElement$6(compareNode) || isEq$2(dom.getAttrib(compareNode, attrName), attrValue)) {\n            if (attrName === 'class') {\n              const currentValue = dom.getAttrib(elm, attrName);\n              if (currentValue) {\n                let valueOut = '';\n                each$e(currentValue.split(/\\s+/), cls => {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, attrName, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(attrName)) {\n              elm.removeAttribute('data-mce-' + attrName);\n            }\n            if (attrName === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(attrName);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (attrName === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(attrName);\n          }\n        });\n        each$7(format.classes, value => {\n          value = replaceVars(value, vars);\n          if (!isElement$6(compareNode) || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        const attrs = dom.getAttribs(elm);\n        for (let i = 0; i < attrs.length; i++) {\n          const attrName = attrs[i].nodeName;\n          if (!elementUtils.isAttributeInternal(attrName)) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    const findFormatRoot = (editor, container, name, vars, similar) => {\n      let formatRoot;\n      if (container.parentNode) {\n        each$e(getParents$2(editor.dom, container.parentNode).reverse(), parent => {\n          if (!formatRoot && isElement$6(parent) && parent.id !== '_start' && parent.id !== '_end') {\n            const format = matchNode(editor, parent, name, vars, similar);\n            if (format && format.split !== false) {\n              formatRoot = parent;\n            }\n          }\n        });\n      }\n      return formatRoot;\n    };\n    const removeNodeFormatFromClone = (editor, format, vars, clone) => removeNodeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), newName => {\n      const fragment = editor.dom.createFragment();\n      fragment.appendChild(clone);\n      return editor.dom.rename(clone, newName);\n    }, constant(null));\n    const wrapAndSplit = (editor, formatList, formatRoot, container, target, split, format, vars) => {\n      var _a, _b;\n      let lastClone;\n      let firstClone;\n      const dom = editor.dom;\n      if (formatRoot) {\n        const formatRootParent = formatRoot.parentNode;\n        for (let parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          let clone = dom.clone(parent, false);\n          for (let i = 0; i < formatList.length; i++) {\n            clone = removeNodeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = (_a = dom.split(formatRoot, container)) !== null && _a !== void 0 ? _a : container;\n        }\n        if (lastClone && firstClone) {\n          (_b = target.parentNode) === null || _b === void 0 ? void 0 : _b.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(editor, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    const removeFormatInternal = (ed, name, vars, node, similar) => {\n      const formatList = ed.formatter.get(name);\n      const format = formatList[0];\n      const dom = ed.dom;\n      const selection = ed.selection;\n      const splitToFormatRoot = container => {\n        const formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      const isRemoveBookmarkNode = node => isBookmarkNode$1(node) && isElement$6(node) && (node.id === '_start' || node.id === '_end');\n      const removeFormatOnNode = node => exists(formatList, fmt => removeNodeFormat(ed, fmt, vars, node, node));\n      const process = node => {\n        const children = from(node.childNodes);\n        const removed = removeFormatOnNode(node);\n        const currentNodeMatches = removed || exists(formatList, f => matchName(dom, node, f));\n        const parentNode = node.parentNode;\n        if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n          removeFormatOnNode(parentNode);\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (let i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n          }\n        }\n        const textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$e(textDecorations, decoration => {\n          if (isElement$6(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeNodeFormat(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, undefined, node);\n          }\n        });\n      };\n      const unwrap = start => {\n        const node = dom.get(start ? '_start' : '_end');\n        if (node) {\n          let out = node[start ? 'firstChild' : 'lastChild'];\n          if (isRemoveBookmarkNode(out)) {\n            out = out[start ? 'firstChild' : 'lastChild'];\n          }\n          if (isText$b(out) && out.data.length === 0) {\n            out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n          }\n          dom.remove(node, true);\n          return out;\n        } else {\n          return null;\n        }\n      };\n      const removeRngStyle = rng => {\n        let startContainer;\n        let endContainer;\n        let expandedRng = expandRng(dom, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              const marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              const marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            const newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$3(dom, newRng, nodes => {\n              each$e(nodes, n => {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$3(dom, expandedRng, nodes => {\n          each$e(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          const rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserveSelection(ed, () => runOnRanges(ed, removeRngStyle), startNode => isInlineFormat(format) && match$2(ed, name, vars, startNode));\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      removeListStyleFormats(ed, name, vars);\n      fireFormatRemove(ed, name, node, vars);\n    };\n    const removeFormat$1 = (ed, name, vars, node, similar) => {\n      if (node || ed.selection.isEditable()) {\n        removeFormatInternal(ed, name, vars, node, similar);\n      }\n    };\n    const removeNodeFormat = (editor, format, vars, node, compareNode) => {\n      return removeNodeFormatInternal(editor, format, vars, node, compareNode).fold(never, newName => {\n        editor.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n\n    const each$6 = Tools.each;\n    const mergeTextDecorationsAndColor = (dom, format, vars, node) => {\n      const processTextDecorationsAndColor = n => {\n        if (isHTMLElement(n) && isElement$6(n.parentNode) && dom.isEditable(n)) {\n          const parentTextDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && parentTextDecoration) {\n            dom.setStyle(n, 'text-decoration', parentTextDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === parentTextDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    const mergeBackgroundColorAndFontSize = (dom, format, vars, node) => {\n      if (format.styles && format.styles.backgroundColor) {\n        const hasFontSize = hasStyle(dom, 'fontSize');\n        processChildElements(node, elm => hasFontSize(elm) && dom.isEditable(elm), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    const mergeSubSup = (dom, format, vars, node) => {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        const hasFontSize = hasStyle(dom, 'fontSize');\n        processChildElements(node, elm => hasFontSize(elm) && dom.isEditable(elm), applyStyle(dom, 'fontSize', ''));\n        const inverseTagDescendants = filter$5(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), dom.isEditable);\n        dom.remove(inverseTagDescendants, true);\n      }\n    };\n    const mergeWithChildren = (editor, formatList, vars, node) => {\n      each$6(formatList, format => {\n        if (isInlineFormat(format)) {\n          each$6(editor.dom.select(format.inline, node), child => {\n            if (isElementNode(child)) {\n              removeNodeFormat(editor, format, vars, child, format.exact ? child : null);\n            }\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    const mergeWithParents = (editor, format, name, vars, node) => {\n      const parentNode = node.parentNode;\n      if (matchNode(editor, parentNode, name, vars)) {\n        if (removeNodeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents && parentNode) {\n        editor.dom.getParent(parentNode, parent => {\n          if (matchNode(editor, parent, name, vars)) {\n            removeNodeFormat(editor, format, vars, node);\n            return true;\n          } else {\n            return false;\n          }\n        });\n      }\n    };\n\n    const each$5 = Tools.each;\n    const canFormatBR = (editor, format, node, parentName) => {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format) && node.parentNode) {\n        const validBRParentElements = getTextRootBlockElements(editor.schema);\n        const hasCaretNodeSibling = sibling(SugarElement.fromDom(node), sibling => isCaretNode(sibling.dom));\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmptyNode(editor.schema, node.parentNode, {\n          skipBogus: false,\n          includeZwsp: true\n        }) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    const applyStyles = (dom, elm, format, vars) => {\n      each$5(format.styles, (value, name) => {\n        dom.setStyle(elm, name, replaceVars(value, vars));\n      });\n      if (format.styles) {\n        const styleVal = dom.getAttrib(elm, 'style');\n        if (styleVal) {\n          dom.setAttrib(elm, 'data-mce-style', styleVal);\n        }\n      }\n    };\n    const applyFormatAction = (ed, name, vars, node) => {\n      const formatList = ed.formatter.get(name);\n      const format = formatList[0];\n      const isCollapsed = !node && ed.selection.isCollapsed();\n      const dom = ed.dom;\n      const selection = ed.selection;\n      const setElementFormat = (elm, fmt = format) => {\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        applyStyles(dom, elm, fmt, vars);\n        each$5(fmt.attributes, (value, name) => {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$5(fmt.classes, value => {\n          const newValue = replaceVars(value, vars);\n          if (!dom.hasClass(elm, newValue)) {\n            dom.addClass(elm, newValue);\n          }\n        });\n      };\n      const applyNodeStyle = (formatList, node) => {\n        let found = false;\n        each$5(formatList, format => {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (dom.getContentEditable(node) === 'false' && !format.ceFalseOverride) {\n            return true;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return true;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n          return true;\n        });\n        return found;\n      };\n      const createWrapElement = wrapName => {\n        if (isString(wrapName)) {\n          const wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      const applyRngStyle = (dom, rng, nodeSpecific) => {\n        const newWrappers = [];\n        let contentEditable = true;\n        const wrapName = format.inline || format.block;\n        const wrapElm = createWrapElement(wrapName);\n        const isMatchingWrappingBlock = node => isWrappingBlockFormat(format) && matchNode(ed, node, name, vars);\n        const canRenameBlock = (node, parentName, isEditableDescendant) => {\n          const isValidBlockFormatForNode = isNonWrappingBlockFormat(format) && isTextBlock$1(ed.schema, node) && isValid(ed, parentName, wrapName);\n          return isEditableDescendant && isValidBlockFormatForNode;\n        };\n        const canWrapNode = (node, parentName, isEditableDescendant, isWrappableNoneditableElm) => {\n          const nodeName = node.nodeName.toLowerCase();\n          const isValidWrapNode = isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName);\n          const isZwsp$1 = !nodeSpecific && isText$b(node) && isZwsp(node.data);\n          const isCaret = isCaretNode(node);\n          const isCorrectFormatForNode = !isInlineFormat(format) || !dom.isBlock(node);\n          return (isEditableDescendant || isWrappableNoneditableElm) && isValidWrapNode && !isZwsp$1 && !isCaret && isCorrectFormatForNode;\n        };\n        walk$3(dom, rng, nodes => {\n          let currentWrapElm;\n          const process = node => {\n            let hasContentEditableState = false;\n            let lastContentEditable = contentEditable;\n            let isWrappableNoneditableElm = false;\n            const parentNode = node.parentNode;\n            const parentName = parentNode.nodeName.toLowerCase();\n            const contentEditableValue = dom.getContentEditable(node);\n            if (isNonNullable(contentEditableValue)) {\n              lastContentEditable = contentEditable;\n              contentEditable = contentEditableValue === 'true';\n              hasContentEditableState = true;\n              isWrappableNoneditableElm = isWrappableNoneditable(ed, node);\n            }\n            const isEditableDescendant = contentEditable && !hasContentEditableState;\n            if (isBr$6(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isMatchingWrappingBlock(node)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (canRenameBlock(node, parentName, isEditableDescendant)) {\n              const elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              let found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (isNonNullable(wrapElm) && canWrapNode(node, parentName, isEditableDescendant, isWrappableNoneditableElm)) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              if (isWrappableNoneditableElm && hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$e(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$e(nodes, process);\n        });\n        if (format.links === true) {\n          each$e(newWrappers, node => {\n            const process = node => {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$e(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$e(newWrappers, node => {\n          const getChildCount = node => {\n            let count = 0;\n            each$e(node.childNodes, node => {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          const mergeStyles = node => {\n            const childElement = find$2(node.childNodes, isElementNode$1).filter(child => dom.getContentEditable(child) !== 'false' && matchName(dom, child, format));\n            return childElement.map(child => {\n              const clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          const childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(ed, format, vars, node);\n          }\n        });\n      };\n      const targetNode = isNode(node) ? node : selection.getNode();\n      if (dom.getContentEditable(targetNode) === 'false' && !isWrappableNoneditable(ed, targetNode)) {\n        node = targetNode;\n        applyNodeStyle(formatList, node);\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              const rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(dom, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            selection.setRng(normalize(selection.getRng()));\n            preserveSelection(ed, () => {\n              runOnRanges(ed, (selectionRng, fake) => {\n                const expandedRng = fake ? selectionRng : expandRng(dom, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            }, always);\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n          getExpandedListItemFormat(ed.formatter, name).each(liFmt => {\n            each$e(getFullySelectedListItems(ed.selection), li => applyStyles(dom, li, liFmt, vars));\n          });\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n    const applyFormat$1 = (editor, name, vars, node) => {\n      if (node || editor.selection.isEditable()) {\n        applyFormatAction(editor, name, vars, node);\n      }\n    };\n\n    const hasVars = value => has$2(value, 'vars');\n    const setup$u = (registeredFormatListeners, editor) => {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', e => {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', e => {\n        const element = Optional.from(e.node).map(nodeOrRange => isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer).bind(node => isElement$6(node) ? Optional.some(node) : Optional.from(node.parentElement)).getOrThunk(() => fallbackElement(editor));\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    const fallbackElement = editor => editor.selection.getStart();\n    const matchingNode = (editor, parents, format, similar, vars) => {\n      const isMatchingNode = node => {\n        const matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      const isUnableToMatch = node => {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    const getParents = (editor, elm) => {\n      const element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$5(getParents$2(editor.dom, element), node => isElement$6(node) && !isBogus$1(node));\n    };\n    const updateAndFireChangeCallbacks = (editor, elm, registeredCallbacks) => {\n      const parents = getParents(editor, elm);\n      each$d(registeredCallbacks, (data, format) => {\n        const runIfChanged = spec => {\n          const match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          const isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            const node = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node,\n                format,\n                parents\n              });\n            } else {\n              each$e(spec.callbacks, callback => callback(isSet, {\n                node,\n                format,\n                parents\n              }));\n            }\n          }\n        };\n        each$e([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$e(data.withVars, runIfChanged);\n      });\n    };\n    const addListeners = (editor, registeredFormatListeners, formats, callback, similar, vars) => {\n      const formatChangeItems = registeredFormatListeners.get();\n      each$e(formats.split(','), format => {\n        const group = get$a(formatChangeItems, format).getOrThunk(() => {\n          const base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        const getCurrent = () => {\n          const parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          const toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar,\n            vars,\n            callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    const removeListeners = (registeredFormatListeners, formats, callback) => {\n      const formatChangeItems = registeredFormatListeners.get();\n      each$e(formats.split(','), format => get$a(formatChangeItems, format).each(group => {\n        formatChangeItems[format] = {\n          withSimilar: {\n            ...group.withSimilar,\n            callbacks: filter$5(group.withSimilar.callbacks, cb => cb !== callback)\n          },\n          withoutSimilar: {\n            ...group.withoutSimilar,\n            callbacks: filter$5(group.withoutSimilar.callbacks, cb => cb !== callback)\n          },\n          withVars: filter$5(group.withVars, item => item.callback !== callback)\n        };\n      }));\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    const formatChangedInternal = (editor, registeredFormatListeners, formats, callback, similar, vars) => {\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return { unbind: () => removeListeners(registeredFormatListeners, formats, callback) };\n    };\n\n    const toggle = (editor, name, vars, node) => {\n      const fmt = editor.formatter.get(name);\n      if (fmt) {\n        if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n          removeFormat$1(editor, name, vars, node);\n        } else {\n          applyFormat$1(editor, name, vars, node);\n        }\n      }\n    };\n\n    const explode$1 = Tools.explode;\n    const create$8 = () => {\n      const filters = {};\n      const addFilter = (name, callback) => {\n        each$e(explode$1(name), name => {\n          if (!has$2(filters, name)) {\n            filters[name] = {\n              name,\n              callbacks: []\n            };\n          }\n          filters[name].callbacks.push(callback);\n        });\n      };\n      const getFilters = () => values(filters);\n      const removeFilter = (name, callback) => {\n        each$e(explode$1(name), name => {\n          if (has$2(filters, name)) {\n            if (isNonNullable(callback)) {\n              const filter = filters[name];\n              const newCallbacks = filter$5(filter.callbacks, c => c !== callback);\n              if (newCallbacks.length > 0) {\n                filter.callbacks = newCallbacks;\n              } else {\n                delete filters[name];\n              }\n            } else {\n              delete filters[name];\n            }\n          }\n        });\n      };\n      return {\n        addFilter,\n        getFilters,\n        removeFilter\n      };\n    };\n\n    const removeAttrs = (node, names) => {\n      each$e(names, name => {\n        node.attr(name, null);\n      });\n    };\n    const addFontToSpansFilter = (domParser, styles, fontSizes) => {\n      domParser.addNodeFilter('font', nodes => {\n        each$e(nodes, node => {\n          const props = styles.parse(node.attr('style'));\n          const color = node.attr('color');\n          const face = node.attr('face');\n          const size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            toInt(size).each(num => {\n              props['font-size'] = fontSizes[num - 1];\n            });\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    const addStrikeFilter = (domParser, schema, styles) => {\n      domParser.addNodeFilter('strike', nodes => {\n        const convertToSTag = schema.type !== 'html4';\n        each$e(nodes, node => {\n          if (convertToSTag) {\n            node.name = 's';\n          } else {\n            const props = styles.parse(node.attr('style'));\n            props['text-decoration'] = 'line-through';\n            node.name = 'span';\n            node.attr('style', styles.serialize(props));\n          }\n        });\n      });\n    };\n    const addFilters = (domParser, settings, schema) => {\n      var _a;\n      const styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode((_a = settings.font_size_legacy_values) !== null && _a !== void 0 ? _a : ''));\n      }\n      addStrikeFilter(domParser, schema, styles);\n    };\n    const register$5 = (domParser, settings, schema) => {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings, schema);\n      }\n    };\n\n    const blobUriToBlob = url => fetch(url).then(res => res.ok ? res.blob() : Promise.reject()).catch(() => Promise.reject({\n      message: `Cannot convert ${ url } to Blob. Resource might not exist or is inaccessible.`,\n      uriType: 'blob'\n    }));\n    const extractBase64Data = data => {\n      const matches = /([a-z0-9+\\/=\\s]+)/i.exec(data);\n      return matches ? matches[1] : '';\n    };\n    const parseDataUri = uri => {\n      const [type, ...rest] = uri.split(',');\n      const data = rest.join(',');\n      const matches = /data:([^/]+\\/[^;]+)(;.+)?/.exec(type);\n      if (matches) {\n        const base64Encoded = matches[2] === ';base64';\n        const extractedData = base64Encoded ? extractBase64Data(data) : decodeURIComponent(data);\n        return Optional.some({\n          type: matches[1],\n          data: extractedData,\n          base64Encoded\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const buildBlob = (type, data, base64Encoded = true) => {\n      let str = data;\n      if (base64Encoded) {\n        try {\n          str = atob(data);\n        } catch (e) {\n          return Optional.none();\n        }\n      }\n      const arr = new Uint8Array(str.length);\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type }));\n    };\n    const dataUriToBlob = uri => {\n      return new Promise((resolve, reject) => {\n        parseDataUri(uri).bind(({type, data, base64Encoded}) => buildBlob(type, data, base64Encoded)).fold(() => reject('Invalid data URI'), resolve);\n      });\n    };\n    const uriToBlob = url => {\n      if (startsWith(url, 'blob:')) {\n        return blobUriToBlob(url);\n      } else if (startsWith(url, 'data:')) {\n        return dataUriToBlob(url);\n      } else {\n        return Promise.reject('Unknown URI format');\n      }\n    };\n    const blobToDataUri = blob => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = () => {\n          var _a;\n          reject((_a = reader.error) === null || _a === void 0 ? void 0 : _a.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    let count$1 = 0;\n    const uniqueId$1 = prefix => {\n      return (prefix || 'blobid') + count$1++;\n    };\n    const processDataUri = (dataUri, base64Only, generateBlobInfo) => {\n      return parseDataUri(dataUri).bind(({data, type, base64Encoded}) => {\n        if (base64Only && !base64Encoded) {\n          return Optional.none();\n        } else {\n          const base64 = base64Encoded ? data : btoa(data);\n          return generateBlobInfo(base64, type);\n        }\n      });\n    };\n    const createBlobInfo$1 = (blobCache, blob, base64) => {\n      const blobInfo = blobCache.create(uniqueId$1(), blob, base64);\n      blobCache.add(blobInfo);\n      return blobInfo;\n    };\n    const dataUriToBlobInfo = (blobCache, dataUri, base64Only = false) => {\n      return processDataUri(dataUri, base64Only, (base64, type) => Optional.from(blobCache.getByData(base64, type)).orThunk(() => buildBlob(type, base64).map(blob => createBlobInfo$1(blobCache, blob, base64))));\n    };\n    const imageToBlobInfo = (blobCache, imageSrc) => {\n      const invalidDataUri = () => Promise.reject('Invalid data URI');\n      if (startsWith(imageSrc, 'blob:')) {\n        const blobInfo = blobCache.getByUri(imageSrc);\n        if (isNonNullable(blobInfo)) {\n          return Promise.resolve(blobInfo);\n        } else {\n          return uriToBlob(imageSrc).then(blob => {\n            return blobToDataUri(blob).then(dataUri => {\n              return processDataUri(dataUri, false, base64 => {\n                return Optional.some(createBlobInfo$1(blobCache, blob, base64));\n              }).getOrThunk(invalidDataUri);\n            });\n          });\n        }\n      } else if (startsWith(imageSrc, 'data:')) {\n        return dataUriToBlobInfo(blobCache, imageSrc).fold(invalidDataUri, blobInfo => Promise.resolve(blobInfo));\n      } else {\n        return Promise.reject('Unknown image data format');\n      }\n    };\n\n    const hostCaptureRegex = /^(?:(?:(?:[A-Za-z][A-Za-z\\d.+-]{0,14}:\\/\\/(?:[-.~*+=!&;:'%@?^${}(),\\w]+@)?|www\\.|[-;:&=+$,.\\w]+@)([A-Za-z\\d-]+(?:\\.[A-Za-z\\d-]+)*))(?::\\d+)?(?:\\/(?:[-.~*+=!;:'%@$(),\\/\\w]*[-~*+=%@$()\\/\\w])?)?(?:\\?(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+)?)?)$/;\n    const extractHost = url => Optional.from(url.match(hostCaptureRegex)).bind(ms => get$b(ms, 1)).map(h => startsWith(h, 'www.') ? h.substring(4) : h);\n\n    const sandboxIframe = (iframeNode, exclusions) => {\n      if (Optional.from(iframeNode.attr('src')).bind(extractHost).forall(host => !contains$2(exclusions, host))) {\n        iframeNode.attr('sandbox', '');\n      }\n    };\n    const isMimeType = (mime, type) => startsWith(mime, `${ type }/`);\n    const getEmbedType = type => {\n      if (isUndefined(type)) {\n        return 'iframe';\n      } else if (isMimeType(type, 'image')) {\n        return 'img';\n      } else if (isMimeType(type, 'video')) {\n        return 'video';\n      } else if (isMimeType(type, 'audio')) {\n        return 'audio';\n      } else {\n        return 'iframe';\n      }\n    };\n    const createSafeEmbed = ({type, src, width, height} = {}, sandboxIframes, sandboxIframesExclusions) => {\n      const name = getEmbedType(type);\n      const embed = new AstNode(name, 1);\n      embed.attr(name === 'audio' ? { src } : {\n        src,\n        width,\n        height\n      });\n      if (name === 'audio' || name === 'video') {\n        embed.attr('controls', '');\n      }\n      if (name === 'iframe' && sandboxIframes) {\n        sandboxIframe(embed, sandboxIframesExclusions);\n      }\n      return embed;\n    };\n\n    const isBogusImage = img => isNonNullable(img.attr('data-mce-bogus'));\n    const isInternalImageSource = img => img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    const registerBase64ImageFilter = (parser, settings) => {\n      const {blob_cache: blobCache} = settings;\n      if (blobCache) {\n        const processImage = img => {\n          const inputSrc = img.attr('src');\n          if (isInternalImageSource(img) || isBogusImage(img) || isNullable(inputSrc)) {\n            return;\n          }\n          dataUriToBlobInfo(blobCache, inputSrc, true).each(blobInfo => {\n            img.attr('src', blobInfo.blobUri());\n          });\n        };\n        parser.addAttributeFilter('src', nodes => each$e(nodes, processImage));\n      }\n    };\n    const register$4 = (parser, settings) => {\n      var _a, _b;\n      const schema = parser.schema;\n      parser.addAttributeFilter('href', nodes => {\n        let i = nodes.length;\n        const appendRel = rel => {\n          const parts = rel.split(' ').filter(p => p.length > 0);\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        const addNoOpener = rel => {\n          const newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            const node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', nodes => {\n          let i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              while (sibling && parent) {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              }\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', nodes => {\n          let i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode && (parentNode.name === 'ul' || parentNode.name === 'ol')) {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                const li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      const validClasses = schema.getValidClasses();\n      if (settings.validate && validClasses) {\n        parser.addAttributeFilter('class', nodes => {\n          var _a;\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            const clazz = (_a = node.attr('class')) !== null && _a !== void 0 ? _a : '';\n            const classList = Tools.explode(clazz, ' ');\n            let classValue = '';\n            for (let ci = 0; ci < classList.length; ci++) {\n              const className = classList[ci];\n              let valid = false;\n              let validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n      const shouldSandboxIframes = (_a = settings.sandbox_iframes) !== null && _a !== void 0 ? _a : false;\n      const sandboxIframesExclusions = unique$1((_b = settings.sandbox_iframes_exclusions) !== null && _b !== void 0 ? _b : []);\n      if (settings.convert_unsafe_embeds) {\n        parser.addNodeFilter('object,embed', nodes => each$e(nodes, node => {\n          node.replace(createSafeEmbed({\n            type: node.attr('type'),\n            src: node.name === 'object' ? node.attr('data') : node.attr('src'),\n            width: node.attr('width'),\n            height: node.attr('height')\n          }, shouldSandboxIframes, sandboxIframesExclusions));\n        }));\n      }\n      if (shouldSandboxIframes) {\n        parser.addNodeFilter('iframe', nodes => each$e(nodes, node => sandboxIframe(node, sandboxIframesExclusions)));\n      }\n    };\n\n    const {entries, setPrototypeOf, isFrozen, getPrototypeOf, getOwnPropertyDescriptor} = Object;\n    let {freeze, seal, create: create$7} = Object;\n    let {apply, construct} = typeof Reflect !== 'undefined' && Reflect;\n    if (!apply) {\n      apply = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return new Func(...args);\n      };\n    }\n    const arrayForEach = unapply(Array.prototype.forEach);\n    const arrayPop = unapply(Array.prototype.pop);\n    const arrayPush = unapply(Array.prototype.push);\n    const stringToLowerCase = unapply(String.prototype.toLowerCase);\n    const stringToString = unapply(String.prototype.toString);\n    const stringMatch = unapply(String.prototype.match);\n    const stringReplace = unapply(String.prototype.replace);\n    const stringIndexOf = unapply(String.prototype.indexOf);\n    const stringTrim = unapply(String.prototype.trim);\n    const regExpTest = unapply(RegExp.prototype.test);\n    const typeErrorCreate = unconstruct(TypeError);\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply(func, thisArg, args);\n      };\n    }\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n    function addToSet(set, array, transformCaseFunc) {\n      var _transformCaseFunc;\n      transformCaseFunc = (_transformCaseFunc = transformCaseFunc) !== null && _transformCaseFunc !== void 0 ? _transformCaseFunc : stringToLowerCase;\n      if (setPrototypeOf) {\n        setPrototypeOf(set, null);\n      }\n      let l = array.length;\n      while (l--) {\n        let element = array[l];\n        if (typeof element === 'string') {\n          const lcElement = transformCaseFunc(element);\n          if (lcElement !== element) {\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n    function clone(object) {\n      const newObject = create$7(null);\n      for (const [property, value] of entries(object)) {\n        newObject[property] = value;\n      }\n      return newObject;\n    }\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        const desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue(element) {\n        console.warn('fallback value for', element);\n        return null;\n      }\n      return fallbackValue;\n    }\n    const html$1 = freeze([\n      'a',\n      'abbr',\n      'acronym',\n      'address',\n      'area',\n      'article',\n      'aside',\n      'audio',\n      'b',\n      'bdi',\n      'bdo',\n      'big',\n      'blink',\n      'blockquote',\n      'body',\n      'br',\n      'button',\n      'canvas',\n      'caption',\n      'center',\n      'cite',\n      'code',\n      'col',\n      'colgroup',\n      'content',\n      'data',\n      'datalist',\n      'dd',\n      'decorator',\n      'del',\n      'details',\n      'dfn',\n      'dialog',\n      'dir',\n      'div',\n      'dl',\n      'dt',\n      'element',\n      'em',\n      'fieldset',\n      'figcaption',\n      'figure',\n      'font',\n      'footer',\n      'form',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'head',\n      'header',\n      'hgroup',\n      'hr',\n      'html',\n      'i',\n      'img',\n      'input',\n      'ins',\n      'kbd',\n      'label',\n      'legend',\n      'li',\n      'main',\n      'map',\n      'mark',\n      'marquee',\n      'menu',\n      'menuitem',\n      'meter',\n      'nav',\n      'nobr',\n      'ol',\n      'optgroup',\n      'option',\n      'output',\n      'p',\n      'picture',\n      'pre',\n      'progress',\n      'q',\n      'rp',\n      'rt',\n      'ruby',\n      's',\n      'samp',\n      'section',\n      'select',\n      'shadow',\n      'small',\n      'source',\n      'spacer',\n      'span',\n      'strike',\n      'strong',\n      'style',\n      'sub',\n      'summary',\n      'sup',\n      'table',\n      'tbody',\n      'td',\n      'template',\n      'textarea',\n      'tfoot',\n      'th',\n      'thead',\n      'time',\n      'tr',\n      'track',\n      'tt',\n      'u',\n      'ul',\n      'var',\n      'video',\n      'wbr'\n    ]);\n    const svg$1 = freeze([\n      'svg',\n      'a',\n      'altglyph',\n      'altglyphdef',\n      'altglyphitem',\n      'animatecolor',\n      'animatemotion',\n      'animatetransform',\n      'circle',\n      'clippath',\n      'defs',\n      'desc',\n      'ellipse',\n      'filter',\n      'font',\n      'g',\n      'glyph',\n      'glyphref',\n      'hkern',\n      'image',\n      'line',\n      'lineargradient',\n      'marker',\n      'mask',\n      'metadata',\n      'mpath',\n      'path',\n      'pattern',\n      'polygon',\n      'polyline',\n      'radialgradient',\n      'rect',\n      'stop',\n      'style',\n      'switch',\n      'symbol',\n      'text',\n      'textpath',\n      'title',\n      'tref',\n      'tspan',\n      'view',\n      'vkern'\n    ]);\n    const svgFilters = freeze([\n      'feBlend',\n      'feColorMatrix',\n      'feComponentTransfer',\n      'feComposite',\n      'feConvolveMatrix',\n      'feDiffuseLighting',\n      'feDisplacementMap',\n      'feDistantLight',\n      'feDropShadow',\n      'feFlood',\n      'feFuncA',\n      'feFuncB',\n      'feFuncG',\n      'feFuncR',\n      'feGaussianBlur',\n      'feImage',\n      'feMerge',\n      'feMergeNode',\n      'feMorphology',\n      'feOffset',\n      'fePointLight',\n      'feSpecularLighting',\n      'feSpotLight',\n      'feTile',\n      'feTurbulence'\n    ]);\n    const svgDisallowed = freeze([\n      'animate',\n      'color-profile',\n      'cursor',\n      'discard',\n      'font-face',\n      'font-face-format',\n      'font-face-name',\n      'font-face-src',\n      'font-face-uri',\n      'foreignobject',\n      'hatch',\n      'hatchpath',\n      'mesh',\n      'meshgradient',\n      'meshpatch',\n      'meshrow',\n      'missing-glyph',\n      'script',\n      'set',\n      'solidcolor',\n      'unknown',\n      'use'\n    ]);\n    const mathMl$1 = freeze([\n      'math',\n      'menclose',\n      'merror',\n      'mfenced',\n      'mfrac',\n      'mglyph',\n      'mi',\n      'mlabeledtr',\n      'mmultiscripts',\n      'mn',\n      'mo',\n      'mover',\n      'mpadded',\n      'mphantom',\n      'mroot',\n      'mrow',\n      'ms',\n      'mspace',\n      'msqrt',\n      'mstyle',\n      'msub',\n      'msup',\n      'msubsup',\n      'mtable',\n      'mtd',\n      'mtext',\n      'mtr',\n      'munder',\n      'munderover',\n      'mprescripts'\n    ]);\n    const mathMlDisallowed = freeze([\n      'maction',\n      'maligngroup',\n      'malignmark',\n      'mlongdiv',\n      'mscarries',\n      'mscarry',\n      'msgroup',\n      'mstack',\n      'msline',\n      'msrow',\n      'semantics',\n      'annotation',\n      'annotation-xml',\n      'mprescripts',\n      'none'\n    ]);\n    const text = freeze(['#text']);\n    const html = freeze([\n      'accept',\n      'action',\n      'align',\n      'alt',\n      'autocapitalize',\n      'autocomplete',\n      'autopictureinpicture',\n      'autoplay',\n      'background',\n      'bgcolor',\n      'border',\n      'capture',\n      'cellpadding',\n      'cellspacing',\n      'checked',\n      'cite',\n      'class',\n      'clear',\n      'color',\n      'cols',\n      'colspan',\n      'controls',\n      'controlslist',\n      'coords',\n      'crossorigin',\n      'datetime',\n      'decoding',\n      'default',\n      'dir',\n      'disabled',\n      'disablepictureinpicture',\n      'disableremoteplayback',\n      'download',\n      'draggable',\n      'enctype',\n      'enterkeyhint',\n      'face',\n      'for',\n      'headers',\n      'height',\n      'hidden',\n      'high',\n      'href',\n      'hreflang',\n      'id',\n      'inputmode',\n      'integrity',\n      'ismap',\n      'kind',\n      'label',\n      'lang',\n      'list',\n      'loading',\n      'loop',\n      'low',\n      'max',\n      'maxlength',\n      'media',\n      'method',\n      'min',\n      'minlength',\n      'multiple',\n      'muted',\n      'name',\n      'nonce',\n      'noshade',\n      'novalidate',\n      'nowrap',\n      'open',\n      'optimum',\n      'pattern',\n      'placeholder',\n      'playsinline',\n      'poster',\n      'preload',\n      'pubdate',\n      'radiogroup',\n      'readonly',\n      'rel',\n      'required',\n      'rev',\n      'reversed',\n      'role',\n      'rows',\n      'rowspan',\n      'spellcheck',\n      'scope',\n      'selected',\n      'shape',\n      'size',\n      'sizes',\n      'span',\n      'srclang',\n      'start',\n      'src',\n      'srcset',\n      'step',\n      'style',\n      'summary',\n      'tabindex',\n      'title',\n      'translate',\n      'type',\n      'usemap',\n      'valign',\n      'value',\n      'width',\n      'xmlns',\n      'slot'\n    ]);\n    const svg = freeze([\n      'accent-height',\n      'accumulate',\n      'additive',\n      'alignment-baseline',\n      'ascent',\n      'attributename',\n      'attributetype',\n      'azimuth',\n      'basefrequency',\n      'baseline-shift',\n      'begin',\n      'bias',\n      'by',\n      'class',\n      'clip',\n      'clippathunits',\n      'clip-path',\n      'clip-rule',\n      'color',\n      'color-interpolation',\n      'color-interpolation-filters',\n      'color-profile',\n      'color-rendering',\n      'cx',\n      'cy',\n      'd',\n      'dx',\n      'dy',\n      'diffuseconstant',\n      'direction',\n      'display',\n      'divisor',\n      'dur',\n      'edgemode',\n      'elevation',\n      'end',\n      'fill',\n      'fill-opacity',\n      'fill-rule',\n      'filter',\n      'filterunits',\n      'flood-color',\n      'flood-opacity',\n      'font-family',\n      'font-size',\n      'font-size-adjust',\n      'font-stretch',\n      'font-style',\n      'font-variant',\n      'font-weight',\n      'fx',\n      'fy',\n      'g1',\n      'g2',\n      'glyph-name',\n      'glyphref',\n      'gradientunits',\n      'gradienttransform',\n      'height',\n      'href',\n      'id',\n      'image-rendering',\n      'in',\n      'in2',\n      'k',\n      'k1',\n      'k2',\n      'k3',\n      'k4',\n      'kerning',\n      'keypoints',\n      'keysplines',\n      'keytimes',\n      'lang',\n      'lengthadjust',\n      'letter-spacing',\n      'kernelmatrix',\n      'kernelunitlength',\n      'lighting-color',\n      'local',\n      'marker-end',\n      'marker-mid',\n      'marker-start',\n      'markerheight',\n      'markerunits',\n      'markerwidth',\n      'maskcontentunits',\n      'maskunits',\n      'max',\n      'mask',\n      'media',\n      'method',\n      'mode',\n      'min',\n      'name',\n      'numoctaves',\n      'offset',\n      'operator',\n      'opacity',\n      'order',\n      'orient',\n      'orientation',\n      'origin',\n      'overflow',\n      'paint-order',\n      'path',\n      'pathlength',\n      'patterncontentunits',\n      'patterntransform',\n      'patternunits',\n      'points',\n      'preservealpha',\n      'preserveaspectratio',\n      'primitiveunits',\n      'r',\n      'rx',\n      'ry',\n      'radius',\n      'refx',\n      'refy',\n      'repeatcount',\n      'repeatdur',\n      'restart',\n      'result',\n      'rotate',\n      'scale',\n      'seed',\n      'shape-rendering',\n      'specularconstant',\n      'specularexponent',\n      'spreadmethod',\n      'startoffset',\n      'stddeviation',\n      'stitchtiles',\n      'stop-color',\n      'stop-opacity',\n      'stroke-dasharray',\n      'stroke-dashoffset',\n      'stroke-linecap',\n      'stroke-linejoin',\n      'stroke-miterlimit',\n      'stroke-opacity',\n      'stroke',\n      'stroke-width',\n      'style',\n      'surfacescale',\n      'systemlanguage',\n      'tabindex',\n      'targetx',\n      'targety',\n      'transform',\n      'transform-origin',\n      'text-anchor',\n      'text-decoration',\n      'text-rendering',\n      'textlength',\n      'type',\n      'u1',\n      'u2',\n      'unicode',\n      'values',\n      'viewbox',\n      'visibility',\n      'version',\n      'vert-adv-y',\n      'vert-origin-x',\n      'vert-origin-y',\n      'width',\n      'word-spacing',\n      'wrap',\n      'writing-mode',\n      'xchannelselector',\n      'ychannelselector',\n      'x',\n      'x1',\n      'x2',\n      'xmlns',\n      'y',\n      'y1',\n      'y2',\n      'z',\n      'zoomandpan'\n    ]);\n    const mathMl = freeze([\n      'accent',\n      'accentunder',\n      'align',\n      'bevelled',\n      'close',\n      'columnsalign',\n      'columnlines',\n      'columnspan',\n      'denomalign',\n      'depth',\n      'dir',\n      'display',\n      'displaystyle',\n      'encoding',\n      'fence',\n      'frame',\n      'height',\n      'href',\n      'id',\n      'largeop',\n      'length',\n      'linethickness',\n      'lspace',\n      'lquote',\n      'mathbackground',\n      'mathcolor',\n      'mathsize',\n      'mathvariant',\n      'maxsize',\n      'minsize',\n      'movablelimits',\n      'notation',\n      'numalign',\n      'open',\n      'rowalign',\n      'rowlines',\n      'rowspacing',\n      'rowspan',\n      'rspace',\n      'rquote',\n      'scriptlevel',\n      'scriptminsize',\n      'scriptsizemultiplier',\n      'selection',\n      'separator',\n      'separators',\n      'stretchy',\n      'subscriptshift',\n      'supscriptshift',\n      'symmetric',\n      'voffset',\n      'width',\n      'xmlns'\n    ]);\n    const xml = freeze([\n      'xlink:href',\n      'xml:id',\n      'xlink:title',\n      'xml:space',\n      'xmlns:xlink'\n    ]);\n    const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\n    const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n    const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);\n    const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\n    const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);\n    const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);\n    const DOCTYPE_NAME = seal(/^html$/i);\n    var EXPRESSIONS = Object.freeze({\n      __proto__: null,\n      MUSTACHE_EXPR: MUSTACHE_EXPR,\n      ERB_EXPR: ERB_EXPR,\n      TMPLIT_EXPR: TMPLIT_EXPR,\n      DATA_ATTR: DATA_ATTR,\n      ARIA_ATTR: ARIA_ATTR,\n      IS_ALLOWED_URI: IS_ALLOWED_URI,\n      IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE: ATTR_WHITESPACE,\n      DOCTYPE_NAME: DOCTYPE_NAME\n    });\n    const getGlobal = () => typeof window === 'undefined' ? null : window;\n    const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n      if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n      let suffix = null;\n      const ATTR_NAME = 'data-tt-policy-suffix';\n      if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n        suffix = purifyHostElement.getAttribute(ATTR_NAME);\n      }\n      const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML(html) {\n            return html;\n          },\n          createScriptURL(scriptUrl) {\n            return scriptUrl;\n          }\n        });\n      } catch (_) {\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      const DOMPurify = root => createDOMPurify(root);\n      DOMPurify.version = '3.0.5';\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== 9) {\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      const originalDocument = window.document;\n      const currentScript = originalDocument.currentScript;\n      let {document} = window;\n      const {DocumentFragment, HTMLTemplateElement, Node, Element, NodeFilter, NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap, HTMLFormElement, DOMParser, trustedTypes} = window;\n      const ElementPrototype = Element.prototype;\n      const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n      if (typeof HTMLTemplateElement === 'function') {\n        const template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      let trustedTypesPolicy;\n      let emptyHTML = '';\n      const {implementation, createNodeIterator, createDocumentFragment, getElementsByTagName} = document;\n      const {importNode} = originalDocument;\n      let hooks = {};\n      DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n      const {MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR, DATA_ATTR, ARIA_ATTR, IS_SCRIPT_OR_DATA, ATTR_WHITESPACE} = EXPRESSIONS;\n      let {IS_ALLOWED_URI: IS_ALLOWED_URI$1} = EXPRESSIONS;\n      let ALLOWED_TAGS = null;\n      const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n        ...html$1,\n        ...svg$1,\n        ...svgFilters,\n        ...mathMl$1,\n        ...text\n      ]);\n      let ALLOWED_ATTR = null;\n      const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n        ...html,\n        ...svg,\n        ...mathMl,\n        ...xml\n      ]);\n      let CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n      let FORBID_TAGS = null;\n      let FORBID_ATTR = null;\n      let ALLOW_ARIA_ATTR = true;\n      let ALLOW_DATA_ATTR = true;\n      let ALLOW_UNKNOWN_PROTOCOLS = false;\n      let ALLOW_SELF_CLOSE_IN_ATTR = true;\n      let SAFE_FOR_TEMPLATES = false;\n      let WHOLE_DOCUMENT = false;\n      let SET_CONFIG = false;\n      let FORCE_BODY = false;\n      let RETURN_DOM = false;\n      let RETURN_DOM_FRAGMENT = false;\n      let RETURN_TRUSTED_TYPE = false;\n      let SANITIZE_DOM = true;\n      let SANITIZE_NAMED_PROPS = false;\n      const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n      let KEEP_CONTENT = true;\n      let IN_PLACE = false;\n      let USE_PROFILES = {};\n      let FORBID_CONTENTS = null;\n      const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n        'annotation-xml',\n        'audio',\n        'colgroup',\n        'desc',\n        'foreignobject',\n        'head',\n        'iframe',\n        'math',\n        'mi',\n        'mn',\n        'mo',\n        'ms',\n        'mtext',\n        'noembed',\n        'noframes',\n        'noscript',\n        'plaintext',\n        'script',\n        'style',\n        'svg',\n        'template',\n        'thead',\n        'title',\n        'video',\n        'xmp'\n      ]);\n      let DATA_URI_TAGS = null;\n      const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n        'audio',\n        'video',\n        'img',\n        'source',\n        'image',\n        'track'\n      ]);\n      let URI_SAFE_ATTRIBUTES = null;\n      const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n        'alt',\n        'class',\n        'for',\n        'id',\n        'label',\n        'name',\n        'pattern',\n        'placeholder',\n        'role',\n        'summary',\n        'title',\n        'value',\n        'style',\n        'xmlns'\n      ]);\n      const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      let NAMESPACE = HTML_NAMESPACE;\n      let IS_EMPTY_INPUT = false;\n      let ALLOWED_NAMESPACES = null;\n      const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [\n        MATHML_NAMESPACE,\n        SVG_NAMESPACE,\n        HTML_NAMESPACE\n      ], stringToString);\n      let PARSER_MEDIA_TYPE;\n      const SUPPORTED_PARSER_MEDIA_TYPES = [\n        'application/xhtml+xml',\n        'text/html'\n      ];\n      const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      let transformCaseFunc;\n      let CONFIG = null;\n      const formElement = document.createElement('form');\n      const isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n      const _parseConfig = function _parseConfig(cfg) {\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n        if (!cfg || typeof cfg !== 'object') {\n          cfg = {};\n        }\n        cfg = clone(cfg);\n        PARSER_MEDIA_TYPE = SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n        ALLOWED_NAMESPACES = 'ALLOWED_NAMESPACES' in cfg ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n        URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n        USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n        ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false;\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n        RETURN_DOM = cfg.RETURN_DOM || false;\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n        FORCE_BODY = cfg.FORCE_BODY || false;\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n        SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false;\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n        IN_PLACE = cfg.IN_PLACE || false;\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, [...text]);\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n        }\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, [\n            'html',\n            'head',\n            'body'\n          ]);\n        }\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (cfg.TRUSTED_TYPES_POLICY) {\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n          }\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n          }\n          trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        } else {\n          if (trustedTypesPolicy === undefined) {\n            trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n          }\n          if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n            emptyHTML = trustedTypesPolicy.createHTML('');\n          }\n        }\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n        'mi',\n        'mo',\n        'mn',\n        'ms',\n        'mtext'\n      ]);\n      const HTML_INTEGRATION_POINTS = addToSet({}, [\n        'foreignobject',\n        'desc',\n        'title',\n        'annotation-xml'\n      ]);\n      const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script'\n      ]);\n      const ALL_SVG_TAGS = addToSet({}, svg$1);\n      addToSet(ALL_SVG_TAGS, svgFilters);\n      addToSet(ALL_SVG_TAGS, svgDisallowed);\n      const ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n      addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n      const _checkValidNamespace = function _checkValidNamespace(element) {\n        let parent = getParentNode(element);\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        const tagName = stringToLowerCase(element.tagName);\n        const parentTagName = stringToLowerCase(parent.tagName);\n        if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return false;\n        }\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return true;\n        }\n        return false;\n      };\n      const _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, { element: node });\n        try {\n          node.parentNode.removeChild(node);\n        } catch (_) {\n          node.remove();\n        }\n      };\n      const _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {\n            }\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {\n            }\n          }\n        }\n      };\n      const _initDocument = function _initDocument(dirty) {\n        let doc;\n        let leadingWhitespace;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {\n          }\n        }\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n          } catch (_) {\n          }\n        }\n        const body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n      const _createIterator = function _createIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n      };\n      const _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n      };\n      const _isNode = function _isNode(object) {\n        return typeof Node === 'object' ? object instanceof Node : object && typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n      };\n      const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], hook => {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n      const _sanitizeElements = function _sanitizeElements(currentNode) {\n        let content;\n        _executeHook('beforeSanitizeElements', currentNode, null);\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        const tagName = transformCaseFunc(currentNode.nodeName);\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName))\n              return false;\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))\n              return false;\n          }\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              const childCount = childNodes.length;\n              for (let i = childCount - 1; i >= 0; --i) {\n                parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n          content = currentNode.textContent;\n          content = stringReplace(content, MUSTACHE_EXPR, ' ');\n          content = stringReplace(content, ERB_EXPR, ' ');\n          content = stringReplace(content, TMPLIT_EXPR, ' ');\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n            currentNode.textContent = content;\n          }\n        }\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n      const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName));\n        else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName));\n        else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (_basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));\n          else {\n            return false;\n          }\n        } else if (URI_SAFE_ATTRIBUTES[lcName]);\n        else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, '')));\n        else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]);\n        else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, '')));\n        else if (value) {\n          return false;\n        } else ;\n        return true;\n      };\n      const _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n        return tagName.indexOf('-') > 0;\n      };\n      const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        let attr;\n        let value;\n        let lcName;\n        let l;\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        const {attributes} = currentNode;\n        if (!attributes) {\n          return;\n        }\n        const hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n        while (l--) {\n          attr = attributes[l];\n          const {name, namespaceURI} = attr;\n          value = name === 'value' ? attr.value : stringTrim(attr.value);\n          const initValue = value;\n          lcName = transformCaseFunc(name);\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined;\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n          if (!hookEvent.keepAttr) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SAFE_FOR_TEMPLATES) {\n            value = stringReplace(value, MUSTACHE_EXPR, ' ');\n            value = stringReplace(value, ERB_EXPR, ' ');\n            value = stringReplace(value, TMPLIT_EXPR, ' ');\n          }\n          const lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n            _removeAttribute(name, currentNode);\n            value = SANITIZE_NAMED_PROPS_PREFIX + value;\n          }\n          if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n            if (namespaceURI);\n            else {\n              switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n              case 'TrustedHTML': {\n                  value = trustedTypesPolicy.createHTML(value);\n                  break;\n                }\n              case 'TrustedScriptURL': {\n                  value = trustedTypesPolicy.createScriptURL(value);\n                  break;\n                }\n              }\n            }\n          }\n          if (value !== initValue) {\n            try {\n              if (namespaceURI) {\n                currentNode.setAttributeNS(namespaceURI, name, value);\n              } else {\n                currentNode.setAttribute(name, value);\n              }\n            } catch (_) {\n              _removeAttribute(name, currentNode);\n            }\n          }\n        }\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n      const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        let shadowNode;\n        const shadowIterator = _createIterator(fragment);\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n          _sanitizeAttributes(shadowNode);\n        }\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n      DOMPurify.sanitize = function (dirty) {\n        let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        let body;\n        let importedNode;\n        let currentNode;\n        let returnNode;\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString === 'function') {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          } else {\n            throw typeErrorCreate('toString is not a function');\n          }\n        }\n        if (!DOMPurify.isSupported) {\n          return dirty;\n        }\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n        DOMPurify.removed = [];\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          if (dirty.nodeName) {\n            const tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            body.appendChild(importedNode);\n          }\n        } else {\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n          body = _initDocument(dirty);\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n        const nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n        while (currentNode = nodeIterator.nextNode()) {\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n          _sanitizeAttributes(currentNode);\n        }\n        if (IN_PLACE) {\n          return dirty;\n        }\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');\n          serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');\n          serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR, ' ');\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n      DOMPurify.setConfig = function (cfg) {\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        const lcTag = transformCaseFunc(tag);\n        const lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    const each$4 = Tools.each, trim = Tools.trim;\n    const queryParts = [\n      'source',\n      'protocol',\n      'authority',\n      'userInfo',\n      'user',\n      'password',\n      'host',\n      'port',\n      'relative',\n      'path',\n      'directory',\n      'file',\n      'query',\n      'anchor'\n    ];\n    const DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    const safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    const blockSvgDataUris = (allowSvgDataUrls, tagName) => {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$2(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    const decodeUri = encodedUri => {\n      try {\n        return decodeURIComponent(encodedUri);\n      } catch (ex) {\n        return unescape(encodedUri);\n      }\n    };\n    const isInvalidUri = (settings, uri, tagName) => {\n      const decodedUri = decodeUri(uri).replace(/\\s/g, '');\n      if (settings.allow_script_urls) {\n        return false;\n      } else if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n        return true;\n      } else if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(decodedUri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(decodedUri);\n      } else {\n        return /^data:/i.test(decodedUri);\n      }\n    };\n    class URI {\n      static parseDataUri(uri) {\n        let type;\n        const uriComponents = decodeURIComponent(uri).split(',');\n        const matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type,\n          data: uriComponents[1]\n        };\n      }\n      static isDomSafe(uri, context, options = {}) {\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          const decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      }\n      static getDocumentBaseUrl(loc) {\n        var _a;\n        let baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = (_a = loc.href) !== null && _a !== void 0 ? _a : '';\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      }\n      constructor(url, settings = {}) {\n        this.path = '';\n        this.directory = '';\n        url = trim(url);\n        this.settings = settings;\n        const baseUri = settings.base_uri;\n        const self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        const isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          const baseUrl = baseUri ? baseUri.path : new URI(document.location.href).directory;\n          if ((baseUri === null || baseUri === void 0 ? void 0 : baseUri.protocol) === '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            const match = /([^#?]*)([#?]?.*)/.exec(url);\n            if (match) {\n              url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n            }\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        const urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        if (urlMatch) {\n          each$4(queryParts, (v, i) => {\n            let part = urlMatch[i];\n            if (part) {\n              part = part.replace(/\\(mce_at\\)/g, '@@');\n            }\n            self[v] = part;\n          });\n        }\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      setPath(path) {\n        const pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        if (pathMatch) {\n          this.path = pathMatch[0];\n          this.directory = pathMatch[1];\n          this.file = pathMatch[2];\n        }\n        this.source = '';\n        this.getURI();\n      }\n      toRelative(uri) {\n        if (uri === './') {\n          return uri;\n        }\n        const relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        const tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        let output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      }\n      toAbsolute(uri, noHost) {\n        const absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      }\n      isSameOrigin(uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          const defaultPort = this.protocol ? DEFAULT_PORTS[this.protocol] : null;\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      }\n      toRelPath(base, path) {\n        let breakPoint = 0, out = '', i, l;\n        const normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        const items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      }\n      toAbsPath(base, path) {\n        let nb = 0;\n        const tr = /\\/$/.test(path) ? '/' : '';\n        const normalizedBase = base.split('/');\n        const normalizedPath = path.split('/');\n        const baseParts = [];\n        each$4(normalizedBase, k => {\n          if (k) {\n            baseParts.push(k);\n          }\n        });\n        const pathParts = [];\n        for (let i = normalizedPath.length - 1; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          pathParts.push(normalizedPath[i]);\n        }\n        const i = baseParts.length - nb;\n        let outPath;\n        if (i <= 0) {\n          outPath = reverse(pathParts).join('/');\n        } else {\n          outPath = baseParts.slice(0, i).join('/') + '/' + reverse(pathParts).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      }\n      getURI(noProtoHost = false) {\n        let s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      }\n    }\n\n    const filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n    const internalElementAttr = 'data-mce-type';\n    let uid = 0;\n    const processNode = (node, settings, schema, scope, evt) => {\n      var _a, _b, _c, _d;\n      const validate = settings.validate;\n      const specialElements = schema.getSpecialElements();\n      if (node.nodeType === COMMENT && !settings.allow_conditional_comments && /^\\[if/i.test((_a = node.nodeValue) !== null && _a !== void 0 ? _a : '')) {\n        node.nodeValue = ' ' + node.nodeValue;\n      }\n      const lcTagName = (_b = evt === null || evt === void 0 ? void 0 : evt.tagName) !== null && _b !== void 0 ? _b : node.nodeName.toLowerCase();\n      if (scope !== 'html' && schema.isValid(scope)) {\n        if (isNonNullable(evt)) {\n          evt.allowedTags[lcTagName] = true;\n        }\n        return;\n      }\n      if (node.nodeType !== ELEMENT || lcTagName === 'body') {\n        return;\n      }\n      const element = SugarElement.fromDom(node);\n      const isInternalElement = has$1(element, internalElementAttr);\n      const bogus = get$9(element, 'data-mce-bogus');\n      if (!isInternalElement && isString(bogus)) {\n        if (bogus === 'all') {\n          remove$4(element);\n        } else {\n          unwrap(element);\n        }\n        return;\n      }\n      const rule = schema.getElementRule(lcTagName);\n      if (validate && !rule) {\n        if (has$2(specialElements, lcTagName)) {\n          remove$4(element);\n        } else {\n          unwrap(element);\n        }\n        return;\n      } else {\n        if (isNonNullable(evt)) {\n          evt.allowedTags[lcTagName] = true;\n        }\n      }\n      if (validate && rule && !isInternalElement) {\n        each$e((_c = rule.attributesForced) !== null && _c !== void 0 ? _c : [], attr => {\n          set$3(element, attr.name, attr.value === '{$uid}' ? `mce_${ uid++ }` : attr.value);\n        });\n        each$e((_d = rule.attributesDefault) !== null && _d !== void 0 ? _d : [], attr => {\n          if (!has$1(element, attr.name)) {\n            set$3(element, attr.name, attr.value === '{$uid}' ? `mce_${ uid++ }` : attr.value);\n          }\n        });\n        if (rule.attributesRequired && !exists(rule.attributesRequired, attr => has$1(element, attr))) {\n          unwrap(element);\n          return;\n        }\n        if (rule.removeEmptyAttrs && hasNone(element)) {\n          unwrap(element);\n          return;\n        }\n        if (rule.outputName && rule.outputName !== lcTagName) {\n          mutate(element, rule.outputName);\n        }\n      }\n    };\n    const processAttr = (ele, settings, schema, scope, evt) => {\n      const tagName = ele.tagName.toLowerCase();\n      const {attrName, attrValue} = evt;\n      evt.keepAttr = shouldKeepAttribute(settings, schema, scope, tagName, attrName, attrValue);\n      if (evt.keepAttr) {\n        evt.allowedAttributes[attrName] = true;\n        if (isBooleanAttribute(attrName, schema)) {\n          evt.attrValue = attrName;\n        }\n        if (settings.allow_svg_data_urls && startsWith(attrValue, 'data:image/svg+xml')) {\n          evt.forceKeepAttr = true;\n        }\n      } else if (isRequiredAttributeOfInternalElement(ele, attrName)) {\n        evt.forceKeepAttr = true;\n      }\n    };\n    const shouldKeepAttribute = (settings, schema, scope, tagName, attrName, attrValue) => {\n      if (scope !== 'html' && !isNonHtmlElementRootName(tagName)) {\n        return true;\n      }\n      return !(attrName in filteredUrlAttrs && isInvalidUri(settings, attrValue, tagName)) && (!settings.validate || schema.isValid(tagName, attrName) || startsWith(attrName, 'data-') || startsWith(attrName, 'aria-'));\n    };\n    const isRequiredAttributeOfInternalElement = (ele, attrName) => ele.hasAttribute(internalElementAttr) && (attrName === 'id' || attrName === 'class' || attrName === 'style');\n    const isBooleanAttribute = (attrName, schema) => attrName in schema.getBoolAttrs();\n    const filterAttributes = (ele, settings, schema, scope) => {\n      const {attributes} = ele;\n      for (let i = attributes.length - 1; i >= 0; i--) {\n        const attr = attributes[i];\n        const attrName = attr.name;\n        const attrValue = attr.value;\n        if (!shouldKeepAttribute(settings, schema, scope, ele.tagName.toLowerCase(), attrName, attrValue) && !isRequiredAttributeOfInternalElement(ele, attrName)) {\n          ele.removeAttribute(attrName);\n        } else if (isBooleanAttribute(attrName, schema)) {\n          ele.setAttribute(attrName, attrName);\n        }\n      }\n    };\n    const setupPurify = (settings, schema, namespaceTracker) => {\n      const purify$1 = purify();\n      purify$1.addHook('uponSanitizeElement', (ele, evt) => {\n        processNode(ele, settings, schema, namespaceTracker.track(ele), evt);\n      });\n      purify$1.addHook('uponSanitizeAttribute', (ele, evt) => {\n        processAttr(ele, settings, schema, namespaceTracker.current(), evt);\n      });\n      return purify$1;\n    };\n    const getPurifyConfig = (settings, mimeType) => {\n      const basePurifyConfig = {\n        IN_PLACE: true,\n        ALLOW_UNKNOWN_PROTOCOLS: true,\n        ALLOWED_TAGS: [\n          '#comment',\n          '#cdata-section',\n          'body'\n        ],\n        ALLOWED_ATTR: []\n      };\n      const config = { ...basePurifyConfig };\n      config.PARSER_MEDIA_TYPE = mimeType;\n      if (settings.allow_script_urls) {\n        config.ALLOWED_URI_REGEXP = /.*/;\n      } else if (settings.allow_html_data_urls) {\n        config.ALLOWED_URI_REGEXP = /^(?!(\\w+script|mhtml):)/i;\n      }\n      return config;\n    };\n    const sanitizeNamespaceElement = ele => {\n      const xlinkAttrs = [\n        'type',\n        'href',\n        'role',\n        'arcrole',\n        'title',\n        'show',\n        'actuate',\n        'label',\n        'from',\n        'to'\n      ].map(name => `xlink:${ name }`);\n      const config = {\n        IN_PLACE: true,\n        USE_PROFILES: {\n          html: true,\n          svg: true,\n          svgFilters: true\n        },\n        ALLOWED_ATTR: xlinkAttrs\n      };\n      purify().sanitize(ele, config);\n      return ele.innerHTML;\n    };\n    const getSanitizer = (settings, schema) => {\n      const namespaceTracker = createNamespaceTracker();\n      if (settings.sanitize) {\n        const purify = setupPurify(settings, schema, namespaceTracker);\n        const sanitizeHtmlElement = (body, mimeType) => {\n          purify.sanitize(body, getPurifyConfig(settings, mimeType));\n          purify.removed = [];\n          namespaceTracker.reset();\n        };\n        return {\n          sanitizeHtmlElement,\n          sanitizeNamespaceElement\n        };\n      } else {\n        const sanitizeHtmlElement = (body, _mimeType) => {\n          const nodeIterator = document.createNodeIterator(body, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT);\n          let node;\n          while (node = nodeIterator.nextNode()) {\n            const currentScope = namespaceTracker.track(node);\n            processNode(node, settings, schema, currentScope);\n            if (isElement$6(node)) {\n              filterAttributes(node, settings, schema, currentScope);\n            }\n          }\n          namespaceTracker.reset();\n        };\n        const sanitizeNamespaceElement = noop;\n        return {\n          sanitizeHtmlElement,\n          sanitizeNamespaceElement\n        };\n      }\n    };\n\n    const makeMap = Tools.makeMap, extend$1 = Tools.extend;\n    const transferChildren = (parent, nativeParent, specialElements, nsSanitizer) => {\n      const parentName = parent.name;\n      const isSpecial = parentName in specialElements && parentName !== 'title' && parentName !== 'textarea';\n      const childNodes = nativeParent.childNodes;\n      for (let ni = 0, nl = childNodes.length; ni < nl; ni++) {\n        const nativeChild = childNodes[ni];\n        const child = new AstNode(nativeChild.nodeName.toLowerCase(), nativeChild.nodeType);\n        if (isElement$6(nativeChild)) {\n          const attributes = nativeChild.attributes;\n          for (let ai = 0, al = attributes.length; ai < al; ai++) {\n            const attr = attributes[ai];\n            child.attr(attr.name, attr.value);\n          }\n          if (isNonHtmlElementRootName(child.name)) {\n            nsSanitizer(nativeChild);\n            child.value = nativeChild.innerHTML;\n          }\n        } else if (isText$b(nativeChild)) {\n          child.value = nativeChild.data;\n          if (isSpecial) {\n            child.raw = true;\n          }\n        } else if (isComment(nativeChild) || isCData(nativeChild) || isPi(nativeChild)) {\n          child.value = nativeChild.data;\n        }\n        if (!isNonHtmlElementRootName(child.name)) {\n          transferChildren(child, nativeChild, specialElements, nsSanitizer);\n        }\n        parent.append(child);\n      }\n    };\n    const walkTree = (root, preprocessors, postprocessors) => {\n      const traverseOrder = [];\n      for (let node = root, lastNode = node; node; lastNode = node, node = node.walk()) {\n        const tempNode = node;\n        each$e(preprocessors, preprocess => preprocess(tempNode));\n        if (isNullable(tempNode.parent) && tempNode !== root) {\n          node = lastNode;\n        } else {\n          traverseOrder.push(tempNode);\n        }\n      }\n      for (let i = traverseOrder.length - 1; i >= 0; i--) {\n        const node = traverseOrder[i];\n        each$e(postprocessors, postprocess => postprocess(node));\n      }\n    };\n    const whitespaceCleaner = (root, schema, settings, args) => {\n      const validate = settings.validate;\n      const nonEmptyElements = schema.getNonEmptyElements();\n      const whitespaceElements = schema.getWhitespaceElements();\n      const blockElements = extend$1(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n      const textRootBlockElements = getTextRootBlockElements(schema);\n      const allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n      const startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n      const endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n      const hasWhitespaceParent = node => {\n        let tempNode = node.parent;\n        while (isNonNullable(tempNode)) {\n          if (tempNode.name in whitespaceElements) {\n            return true;\n          } else {\n            tempNode = tempNode.parent;\n          }\n        }\n        return false;\n      };\n      const isTextRootBlockEmpty = node => {\n        let tempNode = node;\n        while (isNonNullable(tempNode)) {\n          if (tempNode.name in textRootBlockElements) {\n            return isEmpty(schema, nonEmptyElements, whitespaceElements, tempNode);\n          } else {\n            tempNode = tempNode.parent;\n          }\n        }\n        return false;\n      };\n      const isBlock = node => node.name in blockElements || isTransparentAstBlock(schema, node) || isNonHtmlElementRootName(node.name) && node.parent === root;\n      const isAtEdgeOfBlock = (node, start) => {\n        const neighbour = start ? node.prev : node.next;\n        if (isNonNullable(neighbour) || isNullable(node.parent)) {\n          return false;\n        }\n        return isBlock(node.parent) && (node.parent !== root || args.isRootContent === true);\n      };\n      const preprocess = node => {\n        var _a;\n        if (node.type === 3) {\n          if (!hasWhitespaceParent(node)) {\n            let text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n            text = text.replace(allWhiteSpaceRegExp, ' ');\n            if (isLineBreakNode(node.prev, isBlock) || isAtEdgeOfBlock(node, true)) {\n              text = text.replace(startWhiteSpaceRegExp, '');\n            }\n            if (text.length === 0) {\n              node.remove();\n            } else {\n              node.value = text;\n            }\n          }\n        }\n      };\n      const postprocess = node => {\n        var _a;\n        if (node.type === 1) {\n          const elementRule = schema.getElementRule(node.name);\n          if (validate && elementRule) {\n            const isNodeEmpty = isEmpty(schema, nonEmptyElements, whitespaceElements, node);\n            if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n              paddEmptyNode(settings, args, isBlock, node);\n            } else if (elementRule.removeEmpty && isNodeEmpty) {\n              if (isBlock(node)) {\n                node.remove();\n              } else {\n                node.unwrap();\n              }\n            } else if (elementRule.paddEmpty && (isNodeEmpty || isPaddedWithNbsp(node))) {\n              paddEmptyNode(settings, args, isBlock, node);\n            }\n          }\n        } else if (node.type === 3) {\n          if (!hasWhitespaceParent(node)) {\n            let text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n            if (node.next && isBlock(node.next) || isAtEdgeOfBlock(node, false)) {\n              text = text.replace(endWhiteSpaceRegExp, '');\n            }\n            if (text.length === 0) {\n              node.remove();\n            } else {\n              node.value = text;\n            }\n          }\n        }\n      };\n      return [\n        preprocess,\n        postprocess\n      ];\n    };\n    const getRootBlockName = (settings, args) => {\n      var _a;\n      const name = (_a = args.forced_root_block) !== null && _a !== void 0 ? _a : settings.forced_root_block;\n      if (name === false) {\n        return '';\n      } else if (name === true) {\n        return 'p';\n      } else {\n        return name;\n      }\n    };\n    const DomParser = (settings = {}, schema = Schema()) => {\n      const nodeFilterRegistry = create$8();\n      const attributeFilterRegistry = create$8();\n      const defaultedSettings = {\n        validate: true,\n        root_name: 'body',\n        sanitize: true,\n        ...settings\n      };\n      const parser = new DOMParser();\n      const sanitizer = getSanitizer(defaultedSettings, schema);\n      const parseAndSanitizeWithContext = (html, rootName, format = 'html') => {\n        const mimeType = format === 'xhtml' ? 'application/xhtml+xml' : 'text/html';\n        const isSpecialRoot = has$2(schema.getSpecialElements(), rootName.toLowerCase());\n        const content = isSpecialRoot ? `<${ rootName }>${ html }</${ rootName }>` : html;\n        const wrappedHtml = format === 'xhtml' ? `<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>${ content }</body></html>` : `<body>${ content }</body>`;\n        const body = parser.parseFromString(wrappedHtml, mimeType).body;\n        sanitizer.sanitizeHtmlElement(body, mimeType);\n        return isSpecialRoot ? body.firstChild : body;\n      };\n      const addNodeFilter = nodeFilterRegistry.addFilter;\n      const getNodeFilters = nodeFilterRegistry.getFilters;\n      const removeNodeFilter = nodeFilterRegistry.removeFilter;\n      const addAttributeFilter = attributeFilterRegistry.addFilter;\n      const getAttributeFilters = attributeFilterRegistry.getFilters;\n      const removeAttributeFilter = attributeFilterRegistry.removeFilter;\n      const findInvalidChildren = (node, invalidChildren) => {\n        if (isInvalid(schema, node)) {\n          invalidChildren.push(node);\n        }\n      };\n      const isWrappableNode = (blockElements, node) => {\n        const isInternalElement = isString(node.attr(internalElementAttr));\n        const isInlineElement = node.type === 1 && (!has$2(blockElements, node.name) && !isTransparentAstBlock(schema, node)) && !isNonHtmlElementRootName(node.name);\n        return node.type === 3 || isInlineElement && !isInternalElement;\n      };\n      const addRootBlocks = (rootNode, rootBlockName) => {\n        const blockElements = extend$1(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        const startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        const endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        let node = rootNode.firstChild, rootBlockNode = null;\n        const trim = rootBlock => {\n          var _a, _b;\n          if (rootBlock) {\n            node = rootBlock.firstChild;\n            if (node && node.type === 3) {\n              node.value = (_a = node.value) === null || _a === void 0 ? void 0 : _a.replace(startWhiteSpaceRegExp, '');\n            }\n            node = rootBlock.lastChild;\n            if (node && node.type === 3) {\n              node.value = (_b = node.value) === null || _b === void 0 ? void 0 : _b.replace(endWhiteSpaceRegExp, '');\n            }\n          }\n        };\n        if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n          return;\n        }\n        while (node) {\n          const next = node.next;\n          if (isWrappableNode(blockElements, node)) {\n            if (!rootBlockNode) {\n              rootBlockNode = new AstNode(rootBlockName, 1);\n              rootBlockNode.attr(defaultedSettings.forced_root_block_attrs);\n              rootNode.insert(rootBlockNode, node);\n              rootBlockNode.append(node);\n            } else {\n              rootBlockNode.append(node);\n            }\n          } else {\n            trim(rootBlockNode);\n            rootBlockNode = null;\n          }\n          node = next;\n        }\n        trim(rootBlockNode);\n      };\n      const parse = (html, args = {}) => {\n        var _a;\n        const validate = defaultedSettings.validate;\n        const rootName = (_a = args.context) !== null && _a !== void 0 ? _a : defaultedSettings.root_name;\n        const element = parseAndSanitizeWithContext(html, rootName, args.format);\n        updateChildren(schema, element);\n        const rootNode = new AstNode(rootName, 11);\n        transferChildren(rootNode, element, schema.getSpecialElements(), sanitizer.sanitizeNamespaceElement);\n        element.innerHTML = '';\n        const [whitespacePre, whitespacePost] = whitespaceCleaner(rootNode, schema, defaultedSettings, args);\n        const invalidChildren = [];\n        const invalidFinder = validate ? node => findInvalidChildren(node, invalidChildren) : noop;\n        const matches = {\n          nodes: {},\n          attributes: {}\n        };\n        const matchFinder = node => matchNode$1(getNodeFilters(), getAttributeFilters(), node, matches);\n        walkTree(rootNode, [\n          whitespacePre,\n          matchFinder\n        ], [\n          whitespacePost,\n          invalidFinder\n        ]);\n        invalidChildren.reverse();\n        if (validate && invalidChildren.length > 0) {\n          if (args.context) {\n            const {\n              pass: topLevelChildren,\n              fail: otherChildren\n            } = partition$2(invalidChildren, child => child.parent === rootNode);\n            cleanInvalidNodes(otherChildren, schema, rootNode, matchFinder);\n            args.invalid = topLevelChildren.length > 0;\n          } else {\n            cleanInvalidNodes(invalidChildren, schema, rootNode, matchFinder);\n          }\n        }\n        const rootBlockName = getRootBlockName(defaultedSettings, args);\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks(rootNode, rootBlockName);\n        }\n        if (!args.invalid) {\n          runFilters(matches, args);\n        }\n        return rootNode;\n      };\n      const exports = {\n        schema,\n        addAttributeFilter,\n        getAttributeFilters,\n        removeAttributeFilter,\n        addNodeFilter,\n        getNodeFilters,\n        removeNodeFilter,\n        parse\n      };\n      register$4(exports, defaultedSettings);\n      register$5(exports, defaultedSettings, schema);\n      return exports;\n    };\n\n    const serializeContent = content => isTreeNode(content) ? HtmlSerializer({ validate: false }).serialize(content) : content;\n    const withSerializedContent = (content, fireEvent, parserSettings) => {\n      const serializedContent = serializeContent(content);\n      const eventArgs = fireEvent(serializedContent);\n      if (eventArgs.isDefaultPrevented()) {\n        return eventArgs;\n      } else if (isTreeNode(content)) {\n        if (eventArgs.content !== serializedContent) {\n          const rootNode = DomParser({\n            validate: false,\n            forced_root_block: false,\n            ...parserSettings\n          }).parse(eventArgs.content, { context: content.name });\n          return {\n            ...eventArgs,\n            content: rootNode\n          };\n        } else {\n          return {\n            ...eventArgs,\n            content\n          };\n        }\n      } else {\n        return eventArgs;\n      }\n    };\n    const makeParserSettings = editor => ({\n      sanitize: shouldSanitizeXss(editor),\n      sandbox_iframes: shouldSandboxIframes(editor),\n      sandbox_iframes_exclusions: getSandboxIframesExclusions(editor)\n    });\n    const preProcessGetContent = (editor, args) => {\n      if (args.no_events) {\n        return Result.value(args);\n      } else {\n        const eventArgs = fireBeforeGetContent(editor, args);\n        if (eventArgs.isDefaultPrevented()) {\n          return Result.error(fireGetContent(editor, {\n            content: '',\n            ...eventArgs\n          }).content);\n        } else {\n          return Result.value(eventArgs);\n        }\n      }\n    };\n    const postProcessGetContent = (editor, content, args) => {\n      if (args.no_events) {\n        return content;\n      } else {\n        const processedEventArgs = withSerializedContent(content, content => fireGetContent(editor, {\n          ...args,\n          content\n        }), makeParserSettings(editor));\n        return processedEventArgs.content;\n      }\n    };\n    const preProcessSetContent = (editor, args) => {\n      if (args.no_events) {\n        return Result.value(args);\n      } else {\n        const processedEventArgs = withSerializedContent(args.content, content => fireBeforeSetContent(editor, {\n          ...args,\n          content\n        }), makeParserSettings(editor));\n        if (processedEventArgs.isDefaultPrevented()) {\n          fireSetContent(editor, processedEventArgs);\n          return Result.error(undefined);\n        } else {\n          return Result.value(processedEventArgs);\n        }\n      }\n    };\n    const postProcessSetContent = (editor, content, args) => {\n      if (!args.no_events) {\n        fireSetContent(editor, {\n          ...args,\n          content\n        });\n      }\n    };\n\n    const tableModel = (element, width, rows) => ({\n      element,\n      width,\n      rows\n    });\n    const tableRow = (element, cells) => ({\n      element,\n      cells\n    });\n    const cellPosition = (x, y) => ({\n      x,\n      y\n    });\n    const getSpan = (td, key) => {\n      return getOpt(td, key).bind(toInt).getOr(1);\n    };\n    const fillout = (table, x, y, tr, td) => {\n      const rowspan = getSpan(td, 'rowspan');\n      const colspan = getSpan(td, 'colspan');\n      const rows = table.rows;\n      for (let y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (let x2 = x; x2 < x + colspan; x2++) {\n          const cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow$1(td);\n        }\n      }\n    };\n    const cellExists = (table, x, y) => {\n      const rows = table.rows;\n      const cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    const skipCellsX = (table, x, y) => {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    const getWidth = rows => {\n      return foldl(rows, (acc, row) => {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    const findElementPos = (table, element) => {\n      const rows = table.rows;\n      for (let y = 0; y < rows.length; y++) {\n        const cells = rows[y].cells;\n        for (let x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    const extractRows = (table, sx, sy, ex, ey) => {\n      const newRows = [];\n      const rows = table.rows;\n      for (let y = sy; y <= ey; y++) {\n        const cells = rows[y].cells;\n        const slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    const subTable = (table, startPos, endPos) => {\n      const sx = startPos.x, sy = startPos.y;\n      const ex = endPos.x, ey = endPos.y;\n      const newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    const createDomTable = (table, rows) => {\n      const tableElement = shallow$1(table.element);\n      const tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    const modelRowsToDomRows = table => {\n      return map$3(table.rows, row => {\n        const cells = map$3(row.cells, cell => {\n          const td = deep$1(cell);\n          remove$9(td, 'colspan');\n          remove$9(td, 'rowspan');\n          return td;\n        });\n        const tr = shallow$1(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    const fromDom = tableElm => {\n      const table = tableModel(shallow$1(tableElm), 0, []);\n      each$e(descendants(tableElm, 'tr'), (tr, y) => {\n        each$e(descendants(tr, 'td,th'), (td, x) => {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    const toDom = table => {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    const subsection = (table, startElement, endElement) => {\n      return findElementPos(table, startElement).bind(startPos => {\n        return findElementPos(table, endElement).map(endPos => {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    const findParentListContainer = parents => find$2(parents, elm => name(elm) === 'ul' || name(elm) === 'ol');\n    const getFullySelectedListWrappers = (parents, rng) => find$2(parents, elm => name(elm) === 'li' && hasAllContentsSelected(elm, rng)).fold(constant([]), _li => findParentListContainer(parents).map(listCont => {\n      const listElm = SugarElement.fromTag(name(listCont));\n      const listStyles = filter$4(getAllRaw(listCont), (_style, name) => startsWith(name, 'list-style'));\n      setAll(listElm, listStyles);\n      return [\n        SugarElement.fromTag('li'),\n        listElm\n      ];\n    }).getOr([]));\n    const wrap = (innerElm, elms) => {\n      const wrapped = foldl(elms, (acc, elm) => {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    const directListWrappers = commonAnchorContainer => {\n      if (isListItem$1(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), listElm => [\n          commonAnchorContainer,\n          listElm\n        ]);\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    const getWrapElements = (rootNode, rng, schema) => {\n      const commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      const parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      const wrapElements = filter$5(parents, el => schema.isWrapper(name(el)));\n      const listWrappers = getFullySelectedListWrappers(parents, rng);\n      const allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow$1);\n    };\n    const emptyFragment = () => fromElements([]);\n    const getFragmentFromRange = (rootNode, rng, schema) => wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng, schema));\n    const getParentTable = (rootElm, cell) => ancestor$3(cell, 'table', curry(eq, rootElm));\n    const getTableFragment = (rootNode, selectedTableCells) => getParentTable(rootNode, selectedTableCells[0]).bind(tableElm => {\n      const firstCell = selectedTableCells[0];\n      const lastCell = selectedTableCells[selectedTableCells.length - 1];\n      const fullTableModel = fromDom(tableElm);\n      return subsection(fullTableModel, firstCell, lastCell).map(sectionedTableModel => fromElements([toDom(sectionedTableModel)]));\n    }).getOrThunk(emptyFragment);\n    const getSelectionFragment = (rootNode, ranges, schema) => ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0], schema);\n    const read$3 = (rootNode, ranges, schema) => {\n      const selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges, schema);\n    };\n\n    const isCollapsibleWhitespace = (text, index) => index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    const getInnerText = bin => {\n      return trim$2(bin.innerText);\n    };\n    const getContextNodeName = parentBlockOpt => parentBlockOpt.map(block => block.nodeName).getOr('div').toLowerCase();\n    const getTextContent = editor => Optional.from(editor.selection.getRng()).map(rng => {\n      var _a;\n      const parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n      const body = editor.getBody();\n      const contextNodeName = getContextNodeName(parentBlockOpt);\n      const rangeContentClone = SugarElement.fromDom(rng.cloneContents());\n      cleanupBogusElements(rangeContentClone);\n      cleanupInputNames(rangeContentClone);\n      const bin = editor.dom.add(body, contextNodeName, {\n        'data-mce-bogus': 'all',\n        'style': 'overflow: hidden; opacity: 0;'\n      }, rangeContentClone.dom);\n      const text = getInnerText(bin);\n      const nonRenderedText = trim$2((_a = bin.textContent) !== null && _a !== void 0 ? _a : '');\n      editor.dom.remove(bin);\n      if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n        const parentBlock = parentBlockOpt.getOr(body);\n        const parentBlockText = getInnerText(parentBlock);\n        const textIndex = parentBlockText.indexOf(text);\n        if (textIndex === -1) {\n          return text;\n        } else {\n          const hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n          const hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n          return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n        }\n      } else {\n        return text;\n      }\n    }).getOr('');\n    const getSerializedContent = (editor, args) => {\n      const rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      const sel = editor.selection.getSel();\n      const ranges = processRanges(editor, getRanges$1(sel));\n      const fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges, editor.schema).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    const extractSelectedContent = (editor, args) => {\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        const content = getSerializedContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          return editor.selection.isCollapsed() ? '' : content;\n        }\n      }\n    };\n    const setupArgs$3 = (args, format) => ({\n      ...args,\n      format,\n      get: true,\n      selection: true,\n      getInner: true\n    });\n    const getSelectedContentInternal = (editor, format, args = {}) => {\n      const defaultedArgs = setupArgs$3(args, format);\n      return preProcessGetContent(editor, defaultedArgs).fold(identity, updatedArgs => {\n        const content = extractSelectedContent(editor, updatedArgs);\n        return postProcessGetContent(editor, content, updatedArgs);\n      });\n    };\n\n    const KEEP = 0, INSERT = 1, DELETE = 2;\n    const diff = (left, right) => {\n      const size = left.length + right.length + 2;\n      const vDown = new Array(size);\n      const vUp = new Array(size);\n      const snake = (start, end, diag) => {\n        return {\n          start,\n          end,\n          diag\n        };\n      };\n      const buildScript = (start1, end1, start2, end2, script) => {\n        const middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          let i = start1;\n          let j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (let i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      const buildSnake = (start, diag, end1, end2) => {\n        let end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      const getMiddleSnake = (start1, end1, start2, end2) => {\n        const m = end1 - start1;\n        const n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        const delta = m - n;\n        const sum = n + m;\n        const offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        let d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n        return null;\n      };\n      const script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    const getOuterHtml = elm => {\n      if (isElement$6(elm)) {\n        return elm.outerHTML;\n      } else if (isText$b(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    const createFragment = html => {\n      let node;\n      const container = document.createElement('div');\n      const frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    const insertAt = (elm, html, index) => {\n      const fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        const target = elm.childNodes[index];\n        elm.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    const removeAt = (elm, index) => {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        const target = elm.childNodes[index];\n        elm.removeChild(target);\n      }\n    };\n    const applyDiff = (diff, elm) => {\n      let index = 0;\n      each$e(diff, action => {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    const read$2 = (elm, trimZwsp) => filter$5(map$3(from(elm.childNodes), trimZwsp ? compose(trim$2, getOuterHtml) : getOuterHtml), item => {\n      return item.length > 0;\n    });\n    const write = (fragments, elm) => {\n      const currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    const lazyTempDocument = cached(() => document.implementation.createHTMLDocument('undo'));\n    const hasIframes = body => body.querySelector('iframe') !== null;\n    const createFragmentedLevel = fragments => {\n      return {\n        type: 'fragmented',\n        fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    const createCompleteLevel = content => {\n      return {\n        type: 'complete',\n        fragments: null,\n        content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    const createFromEditor = editor => {\n      const tempAttrs = editor.serializer.getTempAttrs();\n      const body = trim$1(editor.getBody(), tempAttrs);\n      return hasIframes(body) ? createFragmentedLevel(read$2(body, true)) : createCompleteLevel(trim$2(body.innerHTML));\n    };\n    const applyToEditor = (editor, level, before) => {\n      const bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      if (bookmark) {\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.scrollIntoView();\n      }\n    };\n    const getLevelContent = level => {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    const getCleanLevelContent = level => {\n      const elm = SugarElement.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each$e(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$6(elm);\n    };\n    const hasEqualContent = (level1, level2) => getLevelContent(level1) === getLevelContent(level2);\n    const hasEqualCleanedContent = (level1, level2) => getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    const isEq$1 = (level1, level2) => {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    const isUnlocked = locks => locks.get() === 0;\n\n    const setTyping = (undoManager, typing, locks) => {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    const endTyping = (undoManager, locks) => {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    const endTypingLevelIgnoreLocks = undoManager => {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    const beforeChange$1 = (editor, locks, beforeBookmark) => {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    const addUndoLevel$1 = (editor, undoManager, index, locks, beforeBookmark, level, event) => {\n      const currentLevel = createFromEditor(editor);\n      const newLevel = Tools.extend(level || {}, currentLevel);\n      if (!isUnlocked(locks) || editor.removed) {\n        return null;\n      }\n      const lastLevel = undoManager.data[index.get()];\n      if (editor.dispatch('BeforeAddUndo', {\n          level: newLevel,\n          lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, newLevel)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(bm => {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      const customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (let i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      newLevel.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(newLevel);\n      index.set(undoManager.data.length - 1);\n      const args = {\n        level: newLevel,\n        lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.dispatch('AddUndo', args);\n        editor.dispatch('change', args);\n      } else {\n        editor.dispatch('AddUndo', args);\n      }\n      return newLevel;\n    };\n    const clear$1 = (editor, undoManager, index) => {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.dispatch('ClearUndos');\n    };\n    const extra$1 = (editor, undoManager, index, callback1, callback2) => {\n      if (undoManager.transact(callback1)) {\n        const bookmark = undoManager.data[index.get()].bookmark;\n        const lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    const redo$1 = (editor, index, data) => {\n      let level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.dispatch('Redo', { level });\n      }\n      return level;\n    };\n    const undo$1 = (editor, undoManager, locks, index) => {\n      let level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.dispatch('Undo', { level });\n      }\n      return level;\n    };\n    const reset$1 = undoManager => {\n      undoManager.clear();\n      undoManager.add();\n    };\n    const hasUndo$1 = (editor, undoManager, index) => index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    const hasRedo$1 = (undoManager, index) => index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    const transact$1 = (undoManager, locks, callback) => {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    const ignore$1 = (locks, callback) => {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    const addVisualInternal = (editor, elm) => {\n      const dom = editor.dom;\n      const scope = isNonNullable(elm) ? elm : editor.getBody();\n      each$e(dom.select('table,a', scope), matchedElm => {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          const cls = getVisualAidsTableClass(editor);\n          const value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            const value = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            const cls = getVisualAidsAnchorClass(editor);\n            if (value && editor.hasVisual) {\n              dom.addClass(matchedElm, cls);\n            } else {\n              dom.removeClass(matchedElm, cls);\n            }\n          }\n          break;\n        }\n      });\n      editor.dispatch('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    const makePlainAdaptor = editor => ({\n      init: { bindEvents: noop },\n      undoManager: {\n        beforeChange: (locks, beforeBookmark) => beforeChange$1(editor, locks, beforeBookmark),\n        add: (undoManager, index, locks, beforeBookmark, level, event) => addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event),\n        undo: (undoManager, locks, index) => undo$1(editor, undoManager, locks, index),\n        redo: (index, data) => redo$1(editor, index, data),\n        clear: (undoManager, index) => clear$1(editor, undoManager, index),\n        reset: undoManager => reset$1(undoManager),\n        hasUndo: (undoManager, index) => hasUndo$1(editor, undoManager, index),\n        hasRedo: (undoManager, index) => hasRedo$1(undoManager, index),\n        transact: (undoManager, locks, callback) => transact$1(undoManager, locks, callback),\n        ignore: (locks, callback) => ignore$1(locks, callback),\n        extra: (undoManager, index, callback1, callback2) => extra$1(editor, undoManager, index, callback1, callback2)\n      },\n      formatter: {\n        match: (name, vars, node, similar) => match$2(editor, name, vars, node, similar),\n        matchAll: (names, vars) => matchAll(editor, names, vars),\n        matchNode: (node, name, vars, similar) => matchNode(editor, node, name, vars, similar),\n        canApply: name => canApply(editor, name),\n        closest: names => closest(editor, names),\n        apply: (name, vars, node) => applyFormat$1(editor, name, vars, node),\n        remove: (name, vars, node, similar) => removeFormat$1(editor, name, vars, node, similar),\n        toggle: (name, vars, node) => toggle(editor, name, vars, node),\n        formatChanged: (registeredFormatListeners, formats, callback, similar, vars) => formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars)\n      },\n      editor: {\n        getContent: args => getContentInternal(editor, args),\n        setContent: (content, args) => setContentInternal(editor, content, args),\n        insertContent: (value, details) => insertHtmlAtCaret(editor, value, details),\n        addVisual: elm => addVisualInternal(editor, elm)\n      },\n      selection: { getContent: (format, args) => getSelectedContentInternal(editor, format, args) },\n      autocompleter: {\n        addDecoration: noop,\n        removeDecoration: noop\n      },\n      raw: { getModel: () => Optional.none() }\n    });\n    const makeRtcAdaptor = rtcEditor => {\n      const defaultVars = vars => isObject(vars) ? vars : {};\n      const {init, undoManager, formatter, editor, selection, autocompleter, raw} = rtcEditor;\n      return {\n        init: { bindEvents: init.bindEvents },\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: (_undoManager, _locks, fn) => undoManager.transact(fn),\n          ignore: (_locks, callback) => undoManager.ignore(callback),\n          extra: (_undoManager, _index, callback1, callback2) => undoManager.extra(callback1, callback2)\n        },\n        formatter: {\n          match: (name, vars, _node, similar) => formatter.match(name, defaultVars(vars), similar),\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: name => formatter.canApply(name),\n          closest: names => formatter.closest(names),\n          apply: (name, vars, _node) => formatter.apply(name, defaultVars(vars)),\n          remove: (name, vars, _node, _similar) => formatter.remove(name, defaultVars(vars)),\n          toggle: (name, vars, _node) => formatter.toggle(name, defaultVars(vars)),\n          formatChanged: (_rfl, formats, callback, similar, vars) => formatter.formatChanged(formats, callback, similar, vars)\n        },\n        editor: {\n          getContent: args => editor.getContent(args),\n          setContent: (content, args) => {\n            return {\n              content: editor.setContent(content, args),\n              html: ''\n            };\n          },\n          insertContent: (content, _details) => {\n            editor.insertContent(content);\n            return '';\n          },\n          addVisual: editor.addVisual\n        },\n        selection: { getContent: (_format, args) => selection.getContent(args) },\n        autocompleter: {\n          addDecoration: autocompleter.addDecoration,\n          removeDecoration: autocompleter.removeDecoration\n        },\n        raw: { getModel: () => Optional.some(raw.getRawModel()) }\n      };\n    };\n    const makeNoopAdaptor = () => {\n      const nul = constant(null);\n      const empty = constant('');\n      return {\n        init: { bindEvents: noop },\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: constant({\n            content: '',\n            html: ''\n          }),\n          insertContent: constant(''),\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        autocompleter: {\n          addDecoration: noop,\n          removeDecoration: noop\n        },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    const isRtc = editor => has$2(editor.plugins, 'rtc');\n    const getRtcSetup = editor => get$a(editor.plugins, 'rtc').bind(rtcPlugin => Optional.from(rtcPlugin.setup));\n    const setup$t = editor => {\n      const editorCast = editor;\n      return getRtcSetup(editor).fold(() => {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, setup => {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(() => setup().then(rtcEditor => {\n          editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n          return rtcEditor.rtc.isRemote;\n        }));\n      });\n    };\n    const getRtcInstanceWithFallback = editor => editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    const getRtcInstanceWithError = editor => {\n      const rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    const beforeChange = (editor, locks, beforeBookmark) => {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    const addUndoLevel = (editor, undoManager, index, locks, beforeBookmark, level, event) => getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    const undo = (editor, undoManager, locks, index) => getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    const redo = (editor, index, data) => getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    const clear = (editor, undoManager, index) => {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    const reset = (editor, undoManager) => {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    const hasUndo = (editor, undoManager, index) => getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    const hasRedo = (editor, undoManager, index) => getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    const transact = (editor, undoManager, locks, callback) => getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    const ignore = (editor, locks, callback) => {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    const extra = (editor, undoManager, index, callback1, callback2) => {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    const matchFormat = (editor, name, vars, node, similar) => getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    const matchAllFormats = (editor, names, vars) => getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    const matchNodeFormat = (editor, node, name, vars, similar) => getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    const canApplyFormat = (editor, name) => getRtcInstanceWithError(editor).formatter.canApply(name);\n    const closestFormat = (editor, names) => getRtcInstanceWithError(editor).formatter.closest(names);\n    const applyFormat = (editor, name, vars, node) => {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    const removeFormat = (editor, name, vars, node, similar) => {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    const toggleFormat = (editor, name, vars, node) => {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    const formatChanged = (editor, registeredFormatListeners, formats, callback, similar, vars) => getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    const getContent$2 = (editor, args) => getRtcInstanceWithFallback(editor).editor.getContent(args);\n    const setContent$2 = (editor, content, args) => getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    const insertContent$1 = (editor, value, details) => getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    const getSelectedContent = (editor, format, args) => getRtcInstanceWithError(editor).selection.getContent(format, args);\n    const addVisual$1 = (editor, elm) => getRtcInstanceWithError(editor).editor.addVisual(elm);\n    const bindEvents = editor => getRtcInstanceWithError(editor).init.bindEvents();\n\n    const getContent$1 = (editor, args = {}) => {\n      const format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    const removeEmpty = text => {\n      if (text.dom.length === 0) {\n        remove$4(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    const walkPastBookmark = (node, start) => node.filter(elm => BookmarkManager.isBookmarkNode(elm.dom)).bind(start ? nextSibling : prevSibling);\n    const merge$1 = (outer, inner, rng, start, schema) => {\n      const outerElm = outer.dom;\n      const innerElm = inner.dom;\n      const oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, schema, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, schema, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    const normalizeTextIfRequired = (inner, start, schema) => {\n      parent(inner).each(root => {\n        const text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0), schema)) {\n          normalizeWhitespaceAfter(text, 0, schema);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length), schema)) {\n          normalizeWhitespaceBefore(text, text.length, schema);\n        }\n      });\n    };\n    const mergeAndNormalizeText = (outerNode, innerNode, rng, start, schema) => {\n      outerNode.bind(outer => {\n        const normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0, schema);\n        return innerNode.filter(isText$c).map(inner => merge$1(outer, inner, rng, start, schema));\n      }).orThunk(() => {\n        const innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$c);\n        return innerTextNode.map(inner => normalizeTextIfRequired(inner, start, schema));\n      });\n    };\n    const rngSetContent = (rng, fragment, schema) => {\n      const firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      const lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      const prevText = firstChild.bind(prevSibling).filter(isText$c).bind(removeEmpty);\n      const nextText = lastChild.bind(nextSibling).filter(isText$c).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true, schema);\n      mergeAndNormalizeText(nextText, lastChild, rng, false, schema);\n      rng.collapse(false);\n    };\n    const setupArgs$2 = (args, content) => ({\n      format: 'html',\n      ...args,\n      set: true,\n      selection: true,\n      content\n    });\n    const cleanContent = (editor, args) => {\n      if (args.format !== 'raw') {\n        const rng = editor.selection.getRng();\n        const contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        const contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        const node = editor.parser.parse(args.content, {\n          forced_root_block: false,\n          ...contextArgs,\n          ...args\n        });\n        return HtmlSerializer({ validate: false }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    const setContent$1 = (editor, content, args = {}) => {\n      const defaultedArgs = setupArgs$2(args, content);\n      preProcessSetContent(editor, defaultedArgs).each(updatedArgs => {\n        const cleanedContent = cleanContent(editor, updatedArgs);\n        const rng = editor.selection.getRng();\n        rngSetContent(rng, rng.createContextualFragment(cleanedContent), editor.schema);\n        editor.selection.setRng(rng);\n        scrollRangeIntoView(editor, rng);\n        postProcessSetContent(editor, cleanedContent, updatedArgs);\n      });\n    };\n\n    const deleteFromCallbackMap = (callbackMap, selector, callback) => {\n      if (has$2(callbackMap, selector)) {\n        const newCallbacks = filter$5(callbackMap[selector], cb => cb !== callback);\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    var SelectorChanged = (dom, editor) => {\n      let selectorChangedData;\n      let currentSelectors;\n      const findMatchingNode = (selector, nodes) => find$2(nodes, node => dom.is(node, selector));\n      const getParents = elem => dom.getParents(elem, undefined, dom.getRoot());\n      const setup = () => {\n        selectorChangedData = {};\n        currentSelectors = {};\n        editor.on('NodeChange', e => {\n          const node = e.element;\n          const parents = getParents(node);\n          const matchedSelectors = {};\n          each$d(selectorChangedData, (callbacks, selector) => {\n            findMatchingNode(selector, parents).each(node => {\n              if (!currentSelectors[selector]) {\n                each$e(callbacks, callback => {\n                  callback(true, {\n                    node,\n                    selector,\n                    parents\n                  });\n                });\n                currentSelectors[selector] = callbacks;\n              }\n              matchedSelectors[selector] = callbacks;\n            });\n          });\n          each$d(currentSelectors, (callbacks, selector) => {\n            if (!matchedSelectors[selector]) {\n              delete currentSelectors[selector];\n              each$e(callbacks, callback => {\n                callback(false, {\n                  node,\n                  selector,\n                  parents\n                });\n              });\n            }\n          });\n        });\n      };\n      return {\n        selectorChangedWithUnbind: (selector, callback) => {\n          if (!selectorChangedData) {\n            setup();\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(() => {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: () => {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    };\n\n    const isAttachedToDom = node => {\n      return !!(node && node.ownerDocument) && contains(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    const isValidRange = rng => {\n      if (!rng) {\n        return false;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    const EditorSelection = (dom, win, serializer, editor) => {\n      let selectedRange;\n      let explicitRange;\n      const {selectorChangedWithUnbind} = SelectorChanged(dom, editor);\n      const setCursorLocation = (node, offset) => {\n        const rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      const getContent = args => getContent$1(editor, args);\n      const setContent = (content, args) => setContent$1(editor, content, args);\n      const getStart$1 = real => getStart(editor.getBody(), getRng$1(), real);\n      const getEnd$1 = real => getEnd(editor.getBody(), getRng$1(), real);\n      const getBookmark = (type, normalized) => bookmarkManager.getBookmark(type, normalized);\n      const moveToBookmark = bookmark => bookmarkManager.moveToBookmark(bookmark);\n      const select$1 = (node, content) => {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      const isCollapsed = () => {\n        const rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      const isEditable = () => {\n        const rng = getRng$1();\n        const fakeSelectedElements = editor.getBody().querySelectorAll('[data-mce-selected=\"1\"]');\n        if (fakeSelectedElements.length > 0) {\n          return forall(fakeSelectedElements, el => dom.isEditable(el.parentElement));\n        } else {\n          return isEditableRange(dom, rng);\n        }\n      };\n      const collapse = toStart => {\n        const rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      const getSel = () => win.getSelection ? win.getSelection() : win.document.selection;\n      const getRng$1 = () => {\n        let rng;\n        const tryCompareBoundaryPoints = (how, sourceRange, destinationRange) => {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        const doc = win.document;\n        if (isNonNullable(editor.bookmark) && !hasFocus(editor)) {\n          const bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(r => processRanges(editor, [r])[0]).getOr(doc.createRange());\n          }\n        }\n        try {\n          const selection = getSel();\n          if (selection && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange();\n        }\n        if (isDocument$1(rng.startContainer) && rng.collapsed) {\n          const elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      const setRng = (rng, forward) => {\n        if (!isValidRange(rng)) {\n          return;\n        }\n        const sel = getSel();\n        const evt = editor.dispatch('SetSelectionRange', {\n          range: rng,\n          forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && (sel === null || sel === void 0 ? void 0 : sel.setBaseAndExtent)) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              const node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.nodeName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.dispatch('AfterSetSelectionRange', {\n          range: rng,\n          forward\n        });\n      };\n      const setNode = elm => {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      const getNode$1 = () => getNode(editor.getBody(), getRng$1());\n      const getSelectedBlocks$1 = (startElm, endElm) => getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      const isForward = () => {\n        const sel = getSel();\n        const anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        const focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        const anchorRange = dom.createRng();\n        const focusRange = dom.createRng();\n        try {\n          anchorRange.setStart(anchorNode, sel.anchorOffset);\n          anchorRange.collapse(true);\n          focusRange.setStart(focusNode, sel.focusOffset);\n          focusRange.collapse(true);\n        } catch (e) {\n          return true;\n        }\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      const normalize = () => {\n        const rng = getRng$1();\n        const sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          const normRng = normalize$2(dom, rng);\n          normRng.each(normRng => {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      const selectorChanged = (selector, callback) => {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      const getScrollContainer = () => {\n        let scrollContainer;\n        let node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      const scrollIntoView = (elm, alignToTop) => {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      const placeCaretAt = (clientX, clientY) => setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      const getBoundingClientRect = () => {\n        const rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      const destroy = () => {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      const expand = (options = { type: 'word' }) => setRng(RangeUtils(dom).expand(getRng$1(), options));\n      const exports = {\n        dom,\n        win,\n        serializer,\n        editor,\n        expand,\n        collapse,\n        setCursorLocation,\n        getContent,\n        setContent,\n        getBookmark,\n        moveToBookmark,\n        select: select$1,\n        isCollapsed,\n        isEditable,\n        isForward,\n        setNode,\n        getNode: getNode$1,\n        getSel,\n        setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize,\n        selectorChanged,\n        selectorChangedWithUnbind,\n        getScrollContainer,\n        scrollIntoView,\n        placeCaretAt,\n        getBoundingClientRect,\n        destroy\n      };\n      const bookmarkManager = BookmarkManager(exports);\n      const controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    const addNodeFilter = (settings, htmlParser, schema) => {\n      htmlParser.addNodeFilter('br', (nodes, _, args) => {\n        const blockElements = Tools.extend({}, schema.getBlockElements());\n        const nonEmptyElements = schema.getNonEmptyElements();\n        const whitespaceElements = schema.getWhitespaceElements();\n        blockElements.body = 1;\n        const isBlock = node => node.name in blockElements || isTransparentAstBlock(schema, node);\n        for (let i = 0, l = nodes.length; i < l; i++) {\n          let node = nodes[i];\n          let parent = node.parent;\n          if (parent && isBlock(parent) && node === parent.lastChild) {\n            let prev = node.prev;\n            while (prev) {\n              const prevName = prev.name;\n              if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                if (prevName === 'br') {\n                  node = null;\n                }\n                break;\n              }\n              prev = prev.prev;\n            }\n            if (node) {\n              node.remove();\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent)) {\n                const elementRule = schema.getElementRule(parent.name);\n                if (elementRule) {\n                  if (elementRule.removeEmpty) {\n                    parent.remove();\n                  } else if (elementRule.paddEmpty) {\n                    paddEmptyNode(settings, args, isBlock, parent);\n                  }\n                }\n              }\n            }\n          } else {\n            let lastParent = node;\n            while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n              lastParent = parent;\n              if (blockElements[parent.name]) {\n                break;\n              }\n              parent = parent.parent;\n            }\n            if (lastParent === parent) {\n              const textNode = new AstNode('#text', 3);\n              textNode.value = nbsp;\n              node.replace(textNode);\n            }\n          }\n        }\n      });\n    };\n\n    const register$3 = (htmlParser, settings, dom) => {\n      htmlParser.addAttributeFilter('data-mce-tabindex', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', (nodes, name) => {\n        const internalName = 'data-mce-' + name;\n        const urlConverter = settings.url_converter;\n        const urlConverterScope = settings.url_converter_scope;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr('class');\n          if (value) {\n            value = value.replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', (nodes, name, args) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            const hasChildren = Optional.from(node.firstChild).exists(firstChild => {\n              var _a;\n              return !isZwsp((_a = firstChild.value) !== null && _a !== void 0 ? _a : '');\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', nodes => {\n        var _a;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', (nodes, name) => {\n        var _a;\n        const trim = value => {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const firstChild = node.firstChild;\n          const value = (_a = firstChild === null || firstChild === void 0 ? void 0 : firstChild.value) !== null && _a !== void 0 ? _a : '';\n          if (name === 'script') {\n            const type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && firstChild && value.length > 0) {\n              firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && firstChild && value.length > 0) {\n              firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const value = node.value;\n          if (settings.preserve_cdata && (value === null || value === void 0 ? void 0 : value.indexOf('[CDATA[')) === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if ((value === null || value === void 0 ? void 0 : value.indexOf('mce:protected ')) === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', nodes => {\n        each$e(nodes, node => {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,data-mce-block,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n      if (settings.remove_trailing_brs) {\n        addNodeFilter(settings, htmlParser, htmlParser.schema);\n      }\n    };\n    const trimTrailingBr = rootNode => {\n      const isBr = node => {\n        return (node === null || node === void 0 ? void 0 : node.name) === 'br';\n      };\n      const brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        const brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    const preProcess$1 = (editor, node, args) => {\n      let oldDoc;\n      const dom = editor.dom;\n      let clonedNode = node.cloneNode(true);\n      const impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        const doc = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], node => {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc.body.firstChild;\n        } else {\n          clonedNode = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      firePreProcess(editor, {\n        ...args,\n        node: clonedNode\n      });\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    const shouldFireEvent = (editor, args) => {\n      return isNonNullable(editor) && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    const process$1 = (editor, node, args) => {\n      return shouldFireEvent(editor, args) ? preProcess$1(editor, node, args) : node;\n    };\n\n    const addTempAttr = (htmlParser, tempAttrs, name) => {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, (nodes, name) => {\n          let i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    const postProcess = (editor, args, content) => {\n      if (!args.no_events && editor) {\n        const outArgs = firePostProcess(editor, {\n          ...args,\n          content\n        });\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    const getHtmlFromNode = (dom, node, args) => {\n      const html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    const parseHtml = (htmlParser, html, args) => {\n      const parserArgs = args.selection ? {\n        forced_root_block: false,\n        ...args\n      } : args;\n      const rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    const serializeNode = (settings, schema, node) => {\n      const htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    const toHtml = (editor, settings, schema, rootNode, args) => {\n      const content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    const DomSerializerImpl = (settings, editor) => {\n      const tempAttrs = ['data-mce-selected'];\n      const defaultedSettings = {\n        entity_encoding: 'named',\n        remove_trailing_brs: true,\n        pad_empty_with_br: false,\n        ...settings\n      };\n      const dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      const schema = editor && editor.schema ? editor.schema : Schema(defaultedSettings);\n      const htmlParser = DomParser(defaultedSettings, schema);\n      register$3(htmlParser, defaultedSettings, dom);\n      const serialize = (node, parserArgs = {}) => {\n        const args = {\n          format: 'html',\n          ...parserArgs\n        };\n        const targetNode = process$1(editor, node, args);\n        const html = getHtmlFromNode(dom, targetNode, args);\n        const rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, defaultedSettings, schema, rootNode, args);\n      };\n      return {\n        schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters,\n        removeNodeFilter: htmlParser.removeNodeFilter,\n        removeAttributeFilter: htmlParser.removeAttributeFilter\n      };\n    };\n\n    const DomSerializer = (settings, editor) => {\n      const domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters,\n        removeNodeFilter: domSerializer.removeNodeFilter,\n        removeAttributeFilter: domSerializer.removeAttributeFilter\n      };\n    };\n\n    const defaultFormat$1 = 'html';\n    const setupArgs$1 = (args, format) => ({\n      ...args,\n      format,\n      get: true,\n      getInner: true\n    });\n    const getContent = (editor, args = {}) => {\n      const format = args.format ? args.format : defaultFormat$1;\n      const defaultedArgs = setupArgs$1(args, format);\n      return preProcessGetContent(editor, defaultedArgs).fold(identity, updatedArgs => {\n        const content = getContent$2(editor, updatedArgs);\n        return postProcessGetContent(editor, content, updatedArgs);\n      });\n    };\n\n    const defaultFormat = 'html';\n    const setupArgs = (args, content) => ({\n      format: defaultFormat,\n      ...args,\n      set: true,\n      content\n    });\n    const setContent = (editor, content, args = {}) => {\n      const defaultedArgs = setupArgs(args, content);\n      return preProcessSetContent(editor, defaultedArgs).map(updatedArgs => {\n        const result = setContent$2(editor, updatedArgs.content, updatedArgs);\n        postProcessSetContent(editor, result.html, updatedArgs);\n        return result.content;\n      }).getOr(content);\n    };\n\n    const removedOptions = ('autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,' + 'template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format').split(',');\n    const deprecatedOptions = [];\n    const removedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc'.split(',');\n    const deprecatedPlugins = [];\n    const getMatchingOptions = (options, searchingFor) => {\n      const settingNames = filter$5(searchingFor, setting => has$2(options, setting));\n      return sort(settingNames);\n    };\n    const getRemovedOptions = options => {\n      const settingNames = getMatchingOptions(options, removedOptions);\n      const forcedRootBlock = options.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    const getDeprecatedOptions = options => getMatchingOptions(options, deprecatedOptions);\n    const getMatchingPlugins = (options, searchingFor) => {\n      const plugins = Tools.makeMap(options.plugins, ' ');\n      const hasPlugin = plugin => has$2(plugins, plugin);\n      const pluginNames = filter$5(searchingFor, hasPlugin);\n      return sort(pluginNames);\n    };\n    const getRemovedPlugins = options => getMatchingPlugins(options, removedPlugins);\n    const getDeprecatedPlugins = options => getMatchingPlugins(options, deprecatedPlugins.map(entry => entry.name));\n    const logRemovedWarnings = (rawOptions, normalizedOptions) => {\n      const removedOptions = getRemovedOptions(rawOptions);\n      const removedPlugins = getRemovedPlugins(normalizedOptions);\n      const hasRemovedPlugins = removedPlugins.length > 0;\n      const hasRemovedOptions = removedOptions.length > 0;\n      const isLegacyMobileTheme = normalizedOptions.theme === 'mobile';\n      if (hasRemovedPlugins || hasRemovedOptions || isLegacyMobileTheme) {\n        const listJoiner = '\\n- ';\n        const themesMessage = isLegacyMobileTheme ? `\\n\\nThemes:${ listJoiner }mobile` : '';\n        const pluginsMessage = hasRemovedPlugins ? `\\n\\nPlugins:${ listJoiner }${ removedPlugins.join(listJoiner) }` : '';\n        const optionsMessage = hasRemovedOptions ? `\\n\\nOptions:${ listJoiner }${ removedOptions.join(listJoiner) }` : '';\n        console.warn('The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. ' + 'See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information.' + themesMessage + pluginsMessage + optionsMessage);\n      }\n    };\n    const getPluginDescription = name => find$2(deprecatedPlugins, entry => entry.name === name).fold(() => name, entry => {\n      if (entry.replacedWith) {\n        return `${ name }, replaced by ${ entry.replacedWith }`;\n      } else {\n        return name;\n      }\n    });\n    const logDeprecatedWarnings = (rawOptions, normalizedOptions) => {\n      const deprecatedOptions = getDeprecatedOptions(rawOptions);\n      const deprecatedPlugins = getDeprecatedPlugins(normalizedOptions);\n      const hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      const hasDeprecatedOptions = deprecatedOptions.length > 0;\n      if (hasDeprecatedPlugins || hasDeprecatedOptions) {\n        const listJoiner = '\\n- ';\n        const pluginsMessage = hasDeprecatedPlugins ? `\\n\\nPlugins:${ listJoiner }${ deprecatedPlugins.map(getPluginDescription).join(listJoiner) }` : '';\n        const optionsMessage = hasDeprecatedOptions ? `\\n\\nOptions:${ listJoiner }${ deprecatedOptions.join(listJoiner) }` : '';\n        console.warn('The following deprecated features are currently enabled but will be removed soon.' + pluginsMessage + optionsMessage);\n      }\n    };\n    const logWarnings = (rawOptions, normalizedOptions) => {\n      logRemovedWarnings(rawOptions, normalizedOptions);\n      logDeprecatedWarnings(rawOptions, normalizedOptions);\n    };\n\n    const DOM$8 = DOMUtils.DOM;\n    const restoreOriginalStyles = editor => {\n      DOM$8.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    const safeDestroy = x => Optional.from(x).each(x => x.destroy());\n    const clearDomReferences = editor => {\n      const ed = editor;\n      ed.contentAreaContainer = ed.formElement = ed.container = ed.editorContainer = null;\n      ed.bodyElement = ed.contentDocument = ed.contentWindow = null;\n      ed.iframeElement = ed.targetElm = null;\n      const selection = editor.selection;\n      if (selection) {\n        const dom = selection.dom;\n        ed.selection = selection.win = selection.dom = dom.doc = null;\n      }\n    };\n    const restoreForm = editor => {\n      const form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          delete form._mceOldSubmit;\n        }\n        DOM$8.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    const remove$1 = editor => {\n      if (!editor.removed) {\n        const {_selectionOverrides, editorUpload} = editor;\n        const body = editor.getBody();\n        const element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && isNonNullable(element === null || element === void 0 ? void 0 : element.nextSibling)) {\n          DOM$8.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$8.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    const destroy = (editor, automatic) => {\n      const {selection, dom} = editor;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    const CreateIconManager = () => {\n      const lookup = {};\n      const add = (id, iconPack) => {\n        lookup[id] = iconPack;\n      };\n      const get = id => {\n        if (lookup[id]) {\n          return lookup[id];\n        } else {\n          return { icons: {} };\n        }\n      };\n      const has = id => has$2(lookup, id);\n      return {\n        add,\n        get,\n        has\n      };\n    };\n    const IconManager = CreateIconManager();\n\n    const ModelManager = AddOnManager.ModelManager;\n\n    const getProp = (propName, elm) => {\n      const rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    const getComputedSizeProp = (propName, elm) => parseInt(get$7(elm, propName), 10);\n    const getClientWidth = curry(getProp, 'clientWidth');\n    const getClientHeight = curry(getProp, 'clientHeight');\n    const getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    const getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    const getBoundingClientRect = elm => elm.dom.getBoundingClientRect();\n    const isInsideElementContentArea = (bodyElm, clientX, clientY) => {\n      const clientWidth = getClientWidth(bodyElm);\n      const clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    const transpose = (inline, elm, clientX, clientY) => {\n      const clientRect = getBoundingClientRect(elm);\n      const deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      const deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      const x = clientX - deltaX;\n      const y = clientY - deltaY;\n      return {\n        x,\n        y\n      };\n    };\n    const isXYInContentArea = (editor, clientX, clientY) => {\n      const bodyElm = SugarElement.fromDom(editor.getBody());\n      const targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      const transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    const fromDomSafe = node => Optional.from(node).map(SugarElement.fromDom);\n    const isEditorAttachedToDom = editor => {\n      const rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = () => {\n      const unimplemented = () => {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    const NotificationManager = editor => {\n      const notifications = [];\n      const getImplementation = () => {\n        const theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      const getTopNotification = () => {\n        return Optional.from(notifications[0]);\n      };\n      const isEqual = (a, b) => {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      const reposition = () => {\n        each$e(notifications, notification => {\n          notification.reposition();\n        });\n      };\n      const addNotification = notification => {\n        notifications.push(notification);\n      };\n      const closeNotification = notification => {\n        findIndex$2(notifications, otherNotification => {\n          return otherNotification === notification;\n        }).each(index => {\n          notifications.splice(index, 1);\n        });\n      };\n      const open = (spec, fireEvent = true) => {\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return {};\n        }\n        if (fireEvent) {\n          editor.dispatch('BeforeOpenNotification', { notification: spec });\n        }\n        return find$2(notifications, notification => {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(() => {\n          editor.editorManager.setActive(editor);\n          const notification = getImplementation().open(spec, () => {\n            closeNotification(notification);\n            reposition();\n            if (hasEditorOrUiFocus(editor)) {\n              getTopNotification().fold(() => editor.focus(), top => focus$1(SugarElement.fromDom(top.getEl())));\n            }\n          });\n          addNotification(notification);\n          reposition();\n          editor.dispatch('OpenNotification', { notification: { ...notification } });\n          return notification;\n        });\n      };\n      const close = () => {\n        getTopNotification().each(notification => {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      const getNotifications = constant(notifications);\n      const registerEvents = editor => {\n        editor.on('SkinLoaded', () => {\n          const serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', () => {\n          requestAnimationFrame(reposition);\n        });\n        editor.on('remove', () => {\n          each$e(notifications.slice(), notification => {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open,\n        close,\n        getNotifications\n      };\n    };\n\n    const PluginManager = AddOnManager.PluginManager;\n\n    const ThemeManager = AddOnManager.ThemeManager;\n\n    var WindowManagerImpl = () => {\n      const unimplemented = () => {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented\n      };\n    };\n\n    const WindowManager = editor => {\n      let dialogs = [];\n      const getImplementation = () => {\n        const theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      const funcBind = (scope, f) => {\n        return (...args) => {\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      const fireOpenEvent = dialog => {\n        editor.dispatch('OpenWindow', { dialog });\n      };\n      const fireCloseEvent = dialog => {\n        editor.dispatch('CloseWindow', { dialog });\n      };\n      const addDialog = dialog => {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      const closeDialog = dialog => {\n        fireCloseEvent(dialog);\n        dialogs = filter$5(dialogs, otherDialog => {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      const getTopDialog = () => {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      const storeSelectionAndOpenDialog = openDialog => {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        editor.ui.show();\n        const dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      const open = (args, params) => {\n        return storeSelectionAndOpenDialog(() => getImplementation().open(args, params, closeDialog));\n      };\n      const openUrl = args => {\n        return storeSelectionAndOpenDialog(() => getImplementation().openUrl(args, closeDialog));\n      };\n      const alert = (message, callback, scope) => {\n        const windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      const confirm = (message, callback, scope) => {\n        const windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      const close = () => {\n        getTopDialog().each(dialog => {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', () => {\n        each$e(dialogs, dialog => {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open,\n        openUrl,\n        alert,\n        confirm,\n        close\n      };\n    };\n\n    const displayNotification = (editor, message) => {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    const displayError = (editor, message) => {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', () => {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    const uploadError = (editor, message) => {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    const logError = (editor, errorType, msg) => {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    const createLoadError = (type, url, name) => name ? `Failed to load ${ type }: ${ name } from url ${ url }` : `Failed to load ${ type } url: ${ url }`;\n    const pluginLoadError = (editor, url, name) => {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    const iconsLoadError = (editor, url, name) => {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    const languageLoadError = (editor, url, name) => {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    const themeLoadError = (editor, url, name) => {\n      logError(editor, 'ThemeLoadError', createLoadError('theme', url, name));\n    };\n    const modelLoadError = (editor, url, name) => {\n      logError(editor, 'ModelLoadError', createLoadError('model', url, name));\n    };\n    const pluginInitError = (editor, name, err) => {\n      const message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    const initError = (message, ...x) => {\n      const console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error(message, ...x);\n        } else {\n          console.log(message, ...x);\n        }\n      }\n    };\n\n    const isContentCssSkinName = url => /^[a-z0-9\\-]+$/i.test(url);\n    const toContentSkinResourceName = url => 'content/' + url + '/content.css';\n    const isBundledCssSkinName = url => tinymce.Resource.has(toContentSkinResourceName(url));\n    const getContentCssUrls = editor => {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    const getFontCssUrls = editor => {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    const transformToUrls = (editor, cssLinks) => {\n      const skinUrl = editor.editorManager.baseURL + '/skins/content';\n      const suffix = editor.editorManager.suffix;\n      const contentCssFile = `content${ suffix }.css`;\n      return map$3(cssLinks, url => {\n        if (isBundledCssSkinName(url)) {\n          return url;\n        } else if (isContentCssSkinName(url) && !editor.inline) {\n          return `${ skinUrl }/${ url }/${ contentCssFile }`;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    const appendContentCssFromSettings = editor => {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    const getAllImages = elm => {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    const ImageScanner = (uploadStatus, blobCache) => {\n      const cachedPromises = {};\n      const findAll = (elm, predicate = always) => {\n        const images = filter$5(getAllImages(elm), img => {\n          const src = img.src;\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (startsWith(src, 'blob:')) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (startsWith(src, 'data:')) {\n            return predicate(img);\n          }\n          return false;\n        });\n        const promises = map$3(images, img => {\n          const imageSrc = img.src;\n          if (has$2(cachedPromises, imageSrc)) {\n            return cachedPromises[imageSrc].then(imageInfo => {\n              if (isString(imageInfo)) {\n                return imageInfo;\n              } else {\n                return {\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                };\n              }\n            });\n          } else {\n            const newPromise = imageToBlobInfo(blobCache, imageSrc).then(blobInfo => {\n              delete cachedPromises[imageSrc];\n              return {\n                image: img,\n                blobInfo\n              };\n            }).catch(error => {\n              delete cachedPromises[imageSrc];\n              return error;\n            });\n            cachedPromises[imageSrc] = newPromise;\n            return newPromise;\n          }\n        });\n        return Promise.all(promises);\n      };\n      return { findAll };\n    };\n\n    const UploadStatus = () => {\n      const PENDING = 1, UPLOADED = 2;\n      let blobUriStatuses = {};\n      const createStatus = (status, resultUri) => {\n        return {\n          status,\n          resultUri\n        };\n      };\n      const hasBlobUri = blobUri => {\n        return blobUri in blobUriStatuses;\n      };\n      const getResultUri = blobUri => {\n        const result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      const isPending = blobUri => {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      const isUploaded = blobUri => {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      const markPending = blobUri => {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      const markUploaded = (blobUri, resultUri) => {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      const removeFailed = blobUri => {\n        delete blobUriStatuses[blobUri];\n      };\n      const destroy = () => {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri,\n        getResultUri,\n        isPending,\n        isUploaded,\n        markPending,\n        markUploaded,\n        removeFailed,\n        destroy\n      };\n    };\n\n    let count = 0;\n    const seed = () => {\n      const rnd = () => {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      const now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    const uuid = prefix => {\n      return prefix + count++ + seed();\n    };\n\n    const BlobCache = () => {\n      let cache = [];\n      const mimeToExt = mime => {\n        const mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      const create = (o, blob, base64, name, filename) => {\n        if (isString(o)) {\n          const id = o;\n          return toBlobInfo({\n            id,\n            name,\n            filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      const toBlobInfo = o => {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        const id = o.id || uuid('blobid');\n        const name = o.name || id;\n        const blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      const add = blobInfo => {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      const findFirst = predicate => find$2(cache, predicate).getOrUndefined();\n      const get = id => findFirst(cachedBlobInfo => cachedBlobInfo.id() === id);\n      const getByUri = blobUri => findFirst(blobInfo => blobInfo.blobUri() === blobUri);\n      const getByData = (base64, type) => findFirst(blobInfo => blobInfo.base64() === base64 && blobInfo.blob().type === type);\n      const removeByUri = blobUri => {\n        cache = filter$5(cache, blobInfo => {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      const destroy = () => {\n        each$e(cache, cachedBlobInfo => {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create,\n        add,\n        get,\n        getByUri,\n        getByData,\n        findFirst,\n        removeByUri,\n        destroy\n      };\n    };\n\n    const Uploader = (uploadStatus, settings) => {\n      const pendingPromises = {};\n      const pathJoin = (path1, path2) => {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      const defaultHandler = (blobInfo, progress) => new Promise((success, failure) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = e => {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = () => {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = () => {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          const json = JSON.parse(xhr.responseText);\n          if (!json || !isString(json.location)) {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        const formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      });\n      const uploadHandler = isFunction(settings.handler) ? settings.handler : defaultHandler;\n      const noUpload = () => new Promise(resolve => {\n        resolve([]);\n      });\n      const handlerSuccess = (blobInfo, url) => ({\n        url,\n        blobInfo,\n        status: true\n      });\n      const handlerFailure = (blobInfo, error) => ({\n        url: '',\n        blobInfo,\n        status: false,\n        error\n      });\n      const resolvePending = (blobUri, result) => {\n        Tools.each(pendingPromises[blobUri], resolve => {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      const uploadBlobInfo = (blobInfo, handler, openNotification) => {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new Promise(resolve => {\n          let notification;\n          let progress;\n          try {\n            const closeNotification = () => {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            const success = url => {\n              closeNotification();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            const failure = error => {\n              closeNotification();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = percent => {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(() => Optional.from(openNotification).map(apply$1)).each(n => {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, progress).then(success, err => {\n              failure(isString(err) ? { message: err } : err);\n            });\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex));\n          }\n        });\n      };\n      const isDefaultHandler = handler => handler === defaultHandler;\n      const pendingUploadBlobInfo = blobInfo => {\n        const blobUri = blobInfo.blobUri();\n        return new Promise(resolve => {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      const uploadBlobs = (blobInfos, openNotification) => {\n        blobInfos = Tools.grep(blobInfos, blobInfo => !uploadStatus.isUploaded(blobInfo.blobUri()));\n        return Promise.all(Tools.map(blobInfos, blobInfo => uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, uploadHandler, openNotification)));\n      };\n      const upload = (blobInfos, openNotification) => !settings.url && isDefaultHandler(uploadHandler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      return { upload };\n    };\n\n    const openNotification = editor => () => editor.notificationManager.open({\n      text: editor.translate('Image uploading...'),\n      type: 'info',\n      timeout: -1,\n      progressBar: true\n    });\n    const createUploader = (editor, uploadStatus) => Uploader(uploadStatus, {\n      url: getImageUploadUrl(editor),\n      basePath: getImageUploadBasePath(editor),\n      credentials: getImagesUploadCredentials(editor),\n      handler: getImagesUploadHandler(editor)\n    });\n    const ImageUploader = editor => {\n      const uploadStatus = UploadStatus();\n      const uploader = createUploader(editor, uploadStatus);\n      return { upload: (blobInfos, showNotification = true) => uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined) };\n    };\n\n    const isEmptyForPadding = (editor, element) => editor.dom.isEmpty(element.dom) && isNonNullable(editor.schema.getTextBlockElements()[name(element)]);\n    const addPaddingToEmpty = editor => element => {\n      if (isEmptyForPadding(editor, element)) {\n        append$1(element, SugarElement.fromHtml('<br data-mce-bogus=\"1\" />'));\n      }\n    };\n    const EditorUpload = editor => {\n      const blobCache = BlobCache();\n      let uploader, imageScanner;\n      const uploadStatus = UploadStatus();\n      const urlFilters = [];\n      const aliveGuard = callback => {\n        return result => {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      const cacheInvalidator = url => url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      const replaceString = (content, search, replace) => {\n        let index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      const replaceImageUrl = (content, targetUrl, replacementUrl) => {\n        const replacementString = `src=\"${ replacementUrl }\"${ replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '' }`;\n        content = replaceString(content, `src=\"${ targetUrl }\"`, replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      const replaceUrlInUndoStack = (targetUrl, replacementUrl) => {\n        each$e(editor.undoManager.data, level => {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, fragment => replaceImageUrl(fragment, targetUrl, replacementUrl));\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      const replaceImageUriInView = (image, resultUri) => {\n        const src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        setAll$1(SugarElement.fromDom(image), {\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      const uploadImages = () => {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(imageInfos => {\n          const blobInfos = map$3(imageInfos, imageInfo => imageInfo.blobInfo);\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(result => {\n            const imagesToRemove = [];\n            let shouldDispatchChange = false;\n            const filteredResult = map$3(result, (uploadInfo, index) => {\n              const {blobInfo, image} = imageInfos[index];\n              let removed = false;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                if (uploadInfo.url && !contains$1(image.src, uploadInfo.url)) {\n                  shouldDispatchChange = true;\n                }\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.remove) {\n                  replaceUrlInUndoStack(image.src, Env.transparentSrc);\n                  imagesToRemove.push(image);\n                  removed = true;\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo,\n                removed\n              };\n            });\n            if (imagesToRemove.length > 0 && !isRtc(editor)) {\n              editor.undoManager.transact(() => {\n                each$e(fromDom$1(imagesToRemove), sugarElement => {\n                  const parentOpt = parent(sugarElement);\n                  remove$4(sugarElement);\n                  parentOpt.each(addPaddingToEmpty(editor));\n                  blobCache.removeByUri(sugarElement.dom.src);\n                });\n              });\n            } else if (shouldDispatchChange) {\n              editor.undoManager.dispatchChange();\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      const uploadImagesAuto = () => isAutomaticUploadsEnabled(editor) ? uploadImages() : Promise.resolve([]);\n      const isValidDataUriImage = imgElm => forall(urlFilters, filter => filter(imgElm));\n      const addFilter = filter => {\n        urlFilters.push(filter);\n      };\n      const scanForImages = () => {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(result => {\n          const filteredResult = filter$5(result, resultItem => {\n            if (isString(resultItem)) {\n              displayError(editor, resultItem);\n              return false;\n            } else if (resultItem.uriType === 'blob') {\n              return false;\n            } else {\n              return true;\n            }\n          });\n          if (isRtc(editor)) ; else {\n            each$e(filteredResult, resultItem => {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return filteredResult;\n        }));\n      };\n      const destroy = () => {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      const replaceBlobUris = content => {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, (match, blobUri) => {\n          const resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          let blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), (result, editor) => {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, undefined);\n          }\n          if (blobInfo) {\n            const blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', () => {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', e => {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', e => {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', () => {\n        editor.parser.addNodeFilter('img', images => {\n          each$e(images, img => {\n            const src = img.attr('src');\n            if (!src || blobCache.getByUri(src)) {\n              return;\n            }\n            const resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache,\n        addFilter,\n        uploadImages,\n        uploadImagesAuto,\n        scanForImages,\n        destroy\n      };\n    };\n\n    const get$1 = editor => {\n      const dom = editor.dom;\n      const schemaType = editor.schema.type;\n      const formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: '0px',\n              marginRight: 'auto'\n            },\n            onformat: table => {\n              dom.setStyle(table, 'float', null);\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object,[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: { float: 'left' }\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object',\n            ceFalseOverride: true,\n            styles: {\n              display: 'table',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: '[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginRight: '0px',\n              marginLeft: 'auto'\n            },\n            onformat: table => {\n              dom.setStyle(table, 'float', null);\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object,[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: { float: 'right' },\n            preview: false\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: (() => {\n          const span = {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          };\n          const strike = {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          };\n          const s = {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          };\n          return schemaType !== 'html4' ? [\n            s,\n            span,\n            strike\n          ] : [\n            span,\n            s,\n            strike\n          ];\n        })(),\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: (node, _fmt, _itemName) => {\n            return isElement$6(node) && node.hasAttribute('href');\n          },\n          onformat: (elm, _fmt, vars) => {\n            Tools.each(vars, (value, key) => {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': vars => {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), name => {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    const genericBase = {\n      remove_similar: true,\n      inherit: false\n    };\n    const cellBase = {\n      selector: 'td,th',\n      ...genericBase\n    };\n    const cellFormats = {\n      tablecellbackgroundcolor: {\n        styles: { backgroundColor: '%value' },\n        ...cellBase\n      },\n      tablecellverticalalign: {\n        styles: { 'vertical-align': '%value' },\n        ...cellBase\n      },\n      tablecellbordercolor: {\n        styles: { borderColor: '%value' },\n        ...cellBase\n      },\n      tablecellclass: {\n        classes: ['%value'],\n        ...cellBase\n      },\n      tableclass: {\n        selector: 'table',\n        classes: ['%value'],\n        ...genericBase\n      },\n      tablecellborderstyle: {\n        styles: { borderStyle: '%value' },\n        ...cellBase\n      },\n      tablecellborderwidth: {\n        styles: { borderWidth: '%value' },\n        ...cellBase\n      }\n    };\n    const get = constant(cellFormats);\n\n    const FormatRegistry = editor => {\n      const formats = {};\n      const get$2 = name => isNonNullable(name) ? formats[name] : formats;\n      const has = name => has$2(formats, name);\n      const register = (name, format) => {\n        if (name) {\n          if (!isString(name)) {\n            each$d(name, (format, name) => {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$e(format, format => {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      const unregister = name => {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get$1(editor));\n      register(get());\n      register(getFormats(editor));\n      return {\n        get: get$2,\n        has,\n        register,\n        unregister\n      };\n    };\n\n    const each$3 = Tools.each;\n    const dom = DOMUtils.DOM;\n    const isPreviewItem = item => isNonNullable(item) && isObject(item);\n    const parsedSelectorToHtml = (ancestry, editor) => {\n      const schema = editor && editor.schema || Schema({});\n      const decorate = (elm, item) => {\n        if (item.classes.length > 0) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      const createElement = sItem => {\n        const item = isString(sItem) ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        const elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      const getRequiredParent = (elm, candidate) => {\n        const elmRule = schema.getElementRule(elm.nodeName.toLowerCase());\n        const parentsRequired = elmRule === null || elmRule === void 0 ? void 0 : elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && contains$2(parentsRequired, candidate) ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      const wrapInHtml = (elm, ancestors, siblings) => {\n        let parentCandidate;\n        const ancestor = ancestors[0];\n        const ancestorName = isPreviewItem(ancestor) ? ancestor.name : undefined;\n        const parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestor;\n            ancestors = ancestors.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestor;\n          ancestors = ancestors.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        const parent = parentCandidate ? createElement(parentCandidate) : dom.create('div');\n        parent.appendChild(elm);\n        if (siblings) {\n          Tools.each(siblings, sibling => {\n            const siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        const parentSiblings = isPreviewItem(parentCandidate) ? parentCandidate.siblings : undefined;\n        return wrapInHtml(parent, ancestors, parentSiblings);\n      };\n      const fragment = dom.create('div');\n      if (ancestry.length > 0) {\n        const item = ancestry[0];\n        const elm = createElement(item);\n        const siblings = isPreviewItem(item) ? item.siblings : undefined;\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), siblings));\n      }\n      return fragment;\n    };\n    const parseSelectorItem = item => {\n      item = Tools.trim(item);\n      let tagName = 'div';\n      const obj = {\n        name: tagName,\n        classes: [],\n        attrs: {},\n        selector: item\n      };\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, ($0, $1, $2, $3, $4) => {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            const m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    const parseSelector = selector => {\n      if (!isString(selector)) {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), item => {\n        const siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        const obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    const getCssText = (editor, format) => {\n      let previewCss = '';\n      let previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      const removeVars = val => {\n        return isString(val) ? val.replace(/%(\\w+)/g, '') : '';\n      };\n      const getComputedStyle = (name, elm) => {\n        return dom.getStyle(elm !== null && elm !== void 0 ? elm : editor.getBody(), name, true);\n      };\n      if (isString(format)) {\n        const formats = editor.formatter.get(format);\n        if (!formats) {\n          return '';\n        }\n        format = formats[0];\n      }\n      if ('preview' in format) {\n        const preview = format.preview;\n        if (preview === false) {\n          return '';\n        } else {\n          previewStyles = preview || previewStyles;\n        }\n      }\n      let name = format.block || format.inline || 'span';\n      let previewFrag;\n      const items = parseSelector(format.selector);\n      if (items.length > 0) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      const previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$3(format.styles, (value, name) => {\n        const newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$3(format.attributes, (value, name) => {\n        const newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$3(format.classes, value => {\n        const newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.dispatch('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      const rawParentFontSize = getComputedStyle('fontSize');\n      const parentFontSize = /px$/.test(rawParentFontSize) ? parseInt(rawParentFontSize, 10) : 0;\n      each$3(previewStyles.split(' '), name => {\n        let value = getComputedStyle(name, previewElm);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = getComputedStyle(name);\n          if (rgbaToHexString(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (rgbaToHexString(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            const numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.dispatch('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    const setup$s = editor => {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (let i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    const Formatter = editor => {\n      const formats = FormatRegistry(editor);\n      const formatChangeState = Cell({});\n      setup$s(editor);\n      setup$v(editor);\n      if (!isRtc(editor)) {\n        setup$u(formatChangeState, editor);\n      }\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: (name, vars, node) => {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: (name, vars, node, similar) => {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: (name, vars, node) => {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: (name, vars, node, similar) => matchFormat(editor, name, vars, node, similar),\n        closest: names => closestFormat(editor, names),\n        matchAll: (names, vars) => matchAllFormats(editor, names, vars),\n        matchNode: (node, name, vars, similar) => matchNodeFormat(editor, node, name, vars, similar),\n        canApply: name => canApplyFormat(editor, name),\n        formatChanged: (formats, callback, similar, vars) => formatChanged(editor, formatChangeState, formats, callback, similar, vars),\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    const shouldIgnoreCommand = cmd => {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    const registerEvents = (editor, undoManager, locks) => {\n      const isFirstTypedCharacter = Cell(false);\n      const addNonTypingUndoLevel = e => {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', () => {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', e => {\n        const cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', e => {\n        const cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', () => {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', e => {\n        const keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        const isMeta = Env.os.isMacOS() && e.key === 'Meta';\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey || isMeta) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && !isEq$1(createFromEditor(editor), undoManager.data[0])) {\n          if (!editor.isDirty()) {\n            editor.setDirty(true);\n          }\n          editor.dispatch('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', e => {\n        const keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        const modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n          return;\n        }\n        const hasOnlyMetaOrCtrlModifier = Env.os.isMacOS() ? e.metaKey : e.ctrlKey && !e.altKey;\n        if (hasOnlyMetaOrCtrlModifier) {\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('mousedown', e => {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      const isInsertReplacementText = event => event.inputType === 'insertReplacementText';\n      const isInsertTextDataNull = event => event.inputType === 'insertText' && event.data === null;\n      const isInsertFromPasteOrDrop = event => event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      editor.on('input', e => {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', e => {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    const addKeyboardShortcuts = editor => {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    const UndoManager = editor => {\n      const beforeBookmark = value$2();\n      const locks = Cell(0);\n      const index = Cell(0);\n      const undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: () => {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: (level, event) => {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        dispatchChange: () => {\n          editor.setDirty(true);\n          const level = createFromEditor(editor);\n          level.bookmark = getUndoBookmark(editor.selection);\n          editor.dispatch('change', {\n            level,\n            lastLevel: get$b(undoManager.data, index.get()).getOrUndefined()\n          });\n        },\n        undo: () => {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: () => {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: () => {\n          clear(editor, undoManager, index);\n        },\n        reset: () => {\n          reset(editor, undoManager);\n        },\n        hasUndo: () => {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: () => {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: callback => {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: callback => {\n          ignore(editor, locks, callback);\n        },\n        extra: (callback1, callback2) => {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    const nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    const placeholderAttr = 'data-mce-placeholder';\n    const isKeyboardEvent = e => e.type === 'keydown' || e.type === 'keyup';\n    const isDeleteEvent = e => {\n      const keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    const isNonTypingKeyboardEvent = e => {\n      if (isKeyboardEvent(e)) {\n        const keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$2(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    const isTypingKeyboardEvent = e => isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    const isVisuallyEmpty = (dom, rootElm, forcedRootBlock) => {\n      if (dom.isEmpty(rootElm, undefined, {\n          skipBogus: false,\n          includeZwsp: true\n        })) {\n        const firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    const setup$r = editor => {\n      var _a;\n      const dom = editor.dom;\n      const rootBlock = getForcedRootBlock(editor);\n      const placeholder = (_a = getPlaceholder(editor)) !== null && _a !== void 0 ? _a : '';\n      const updatePlaceholder = (e, initial) => {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        const body = editor.getBody();\n        const showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        const isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (isNotEmpty(placeholder)) {\n        editor.on('init', e => {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', e => Delay.setEditorTimeout(editor, () => updatePlaceholder(e)));\n        });\n      }\n    };\n\n    const blockPosition = (block, position) => ({\n      block,\n      position\n    });\n    const blockBoundary = (from, to) => ({\n      from,\n      to\n    });\n    const getBlockPosition = (rootNode, pos) => {\n      const rootElm = SugarElement.fromDom(rootNode);\n      const containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$2(rootElm, containerElm).map(block => blockPosition(block, pos));\n    };\n    const isDifferentBlocks = blockBoundary => !eq(blockBoundary.from.block, blockBoundary.to.block);\n    const getClosestHost = (root, scope) => {\n      const isRoot = node => eq(node, root);\n      const isHost = node => isTableCell$2(node) || isContentEditableTrue$3(node.dom);\n      return closest$4(scope, isHost, isRoot).filter(isElement$7).getOr(root);\n    };\n    const hasSameHost = (rootNode, blockBoundary) => {\n      const root = SugarElement.fromDom(rootNode);\n      return eq(getClosestHost(root, blockBoundary.from.block), getClosestHost(root, blockBoundary.to.block));\n    };\n    const isEditable$1 = blockBoundary => isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    const hasValidBlocks = blockBoundary => {\n      const isValidBlock = block => isTextBlock$2(block) || hasBlockAttr(block.dom);\n      return isValidBlock(blockBoundary.from.block) && isValidBlock(blockBoundary.to.block);\n    };\n    const skipLastBr = (schema, rootNode, forward, blockPosition) => {\n      if (isBr$6(blockPosition.position.getNode()) && !isEmpty$2(schema, blockPosition.block)) {\n        return positionIn(false, blockPosition.block.dom).bind(lastPositionInBlock => {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(to => getBlockPosition(rootNode, to));\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    const readFromRange = (schema, rootNode, forward, rng) => {\n      const fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      const toBlockPos = fromBlockPos.bind(blockPos => fromPosition(forward, rootNode, blockPos.position).bind(to => getBlockPosition(rootNode, to).map(blockPos => skipLastBr(schema, rootNode, forward, blockPos))));\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(blockBoundary => isDifferentBlocks(blockBoundary) && hasSameHost(rootNode, blockBoundary) && isEditable$1(blockBoundary) && hasValidBlocks(blockBoundary));\n    };\n    const read$1 = (schema, rootNode, forward, rng) => rng.collapsed ? readFromRange(schema, rootNode, forward, rng) : Optional.none();\n\n    const getChildrenUntilBlockBoundary = (block, schema) => {\n      const children = children$1(block);\n      return findIndex$2(children, el => schema.isBlock(name(el))).fold(constant(children), index => children.slice(0, index));\n    };\n    const extractChildren = (block, schema) => {\n      const children = getChildrenUntilBlockBoundary(block, schema);\n      each$e(children, remove$4);\n      return children;\n    };\n    const removeEmptyRoot = (schema, rootNode, block) => {\n      const parents = parentsAndSelf(block, rootNode);\n      return find$2(parents.reverse(), element => isEmpty$2(schema, element)).each(remove$4);\n    };\n    const isEmptyBefore = (schema, el) => filter$5(prevSiblings(el), el => !isEmpty$2(schema, el)).length === 0;\n    const nestedBlockMerge = (rootNode, fromBlock, toBlock, schema, insertionPoint) => {\n      if (isEmpty$2(schema, toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(schema, insertionPoint) && isEmpty$2(schema, fromBlock)) {\n        before$3(insertionPoint, SugarElement.fromTag('br'));\n      }\n      const position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$e(extractChildren(fromBlock, schema), child => {\n        before$3(insertionPoint, child);\n      });\n      removeEmptyRoot(schema, rootNode, fromBlock);\n      return position;\n    };\n    const isInline = (schema, node) => schema.isInline(name(node));\n    const sidelongBlockMerge = (rootNode, fromBlock, toBlock, schema) => {\n      if (isEmpty$2(schema, toBlock)) {\n        if (isEmpty$2(schema, fromBlock)) {\n          const getInlineToBlockDescendants = el => {\n            const helper = (node, elements) => firstChild(node).fold(() => elements, child => isInline(schema, child) ? helper(child, elements.concat(shallow$1(child))) : elements);\n            return helper(el, []);\n          };\n          const newFromBlockDescendants = foldr(getInlineToBlockDescendants(toBlock), (element, descendant) => {\n            wrap$2(element, descendant);\n            return descendant;\n          }, createPaddingBr());\n          empty(fromBlock);\n          append$1(fromBlock, newFromBlockDescendants);\n        }\n        remove$4(toBlock);\n        return firstPositionIn(fromBlock.dom);\n      }\n      const position = lastPositionIn(toBlock.dom);\n      each$e(extractChildren(fromBlock, schema), child => {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(schema, rootNode, fromBlock);\n      return position;\n    };\n    const findInsertionPoint = (toBlock, block) => {\n      const parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    const getInsertionPoint = (fromBlock, toBlock) => contains(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    const trimBr = (first, block) => {\n      positionIn(first, block.dom).bind(position => Optional.from(position.getNode())).map(SugarElement.fromDom).filter(isBr$5).each(remove$4);\n    };\n    const mergeBlockInto = (rootNode, fromBlock, toBlock, schema) => {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock, schema), curry(nestedBlockMerge, rootNode, fromBlock, toBlock, schema));\n    };\n    const mergeBlocks = (rootNode, forward, block1, block2, schema) => forward ? mergeBlockInto(rootNode, block2, block1, schema) : mergeBlockInto(rootNode, block1, block2, schema);\n\n    const backspaceDelete$9 = (editor, forward) => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const position = read$1(editor.schema, rootNode.dom, forward, editor.selection.getRng()).map(blockBoundary => () => {\n        mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block, editor.schema).each(pos => {\n          editor.selection.setRng(pos.toRange());\n        });\n      });\n      return position;\n    };\n\n    const deleteRangeMergeBlocks = (rootNode, selection, schema) => {\n      const rng = selection.getRng();\n      return lift2(getParentBlock$2(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$2(rootNode, SugarElement.fromDom(rng.endContainer)), (block1, block2) => {\n        if (!eq(block1, block2)) {\n          return Optional.some(() => {\n            rng.deleteContents();\n            mergeBlocks(rootNode, true, block1, block2, schema).each(pos => {\n              selection.setRng(pos.toRange());\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      }).getOr(Optional.none());\n    };\n    const isRawNodeInTable = (root, rawNode) => {\n      const node = SugarElement.fromDom(rawNode);\n      const isRoot = curry(eq, root);\n      return ancestor$4(node, isTableCell$2, isRoot).isSome();\n    };\n    const isSelectionInTable = (root, rng) => isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    const isEverythingSelected = (root, rng) => {\n      const noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      const noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    const emptyEditor = editor => {\n      return Optional.some(() => {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      });\n    };\n    const deleteRange$2 = editor => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection, editor.schema);\n    };\n    const backspaceDelete$8 = (editor, _forward) => editor.selection.isCollapsed() ? Optional.none() : deleteRange$2(editor);\n\n    const showCaret = (direction, editor, node, before, scrollIntoView) => Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    const getNodeRange = node => {\n      const rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    const selectNode = (editor, node) => {\n      const e = editor.dispatch('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    const renderCaretAtRange = (editor, range, scrollIntoView) => {\n      const normalizedRange = normalizeRange(1, editor.getBody(), range);\n      const caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      const caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      const caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      const ceRoot = getContentEditableRoot$1(editor.dom.getRoot(), caretPosition.getNode());\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    const renderRangeCaret = (editor, range, scrollIntoView) => range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n\n    const isBeforeBoundary = pos => isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    const isAfterBoundary = pos => isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    const trimEmptyTextNode = (dom, node) => {\n      if (isText$b(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    const deleteContentAndShowCaret = (editor, range, node, direction, forward, peekCaretPosition) => {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(caretRange => {\n        if (range.collapsed) {\n          const deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n    };\n    const deleteBoundaryText = (editor, forward) => {\n      const range = editor.selection.getRng();\n      if (!isText$b(range.commonAncestorContainer)) {\n        return Optional.none();\n      }\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const caretWalker = CaretWalker(editor.getBody());\n      const getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      const isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      const nextCaretPosition = getNextPosFn(caretPosition);\n      const normalizedNextCaretPosition = nextCaretPosition ? normalizePosition(forward, nextCaretPosition) : nextCaretPosition;\n      if (!normalizedNextCaretPosition || !isMoveInsideSameBlock(caretPosition, normalizedNextCaretPosition)) {\n        return Optional.none();\n      } else if (isBeforeFn(normalizedNextCaretPosition)) {\n        return Optional.some(() => deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, normalizedNextCaretPosition));\n      }\n      const peekCaretPosition = getNextPosFn(normalizedNextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(normalizedNextCaretPosition, peekCaretPosition)) {\n          return Optional.some(() => deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition));\n        }\n      }\n      return Optional.none();\n    };\n    const backspaceDelete$7 = (editor, forward) => deleteBoundaryText(editor, forward);\n\n    const getEdgeCefPosition = (editor, atStart) => {\n      const root = editor.getBody();\n      return atStart ? firstPositionIn(root).filter(isBeforeContentEditableFalse) : lastPositionIn(root).filter(isAfterContentEditableFalse);\n    };\n    const isCefAtEdgeSelected = editor => {\n      const rng = editor.selection.getRng();\n      return !rng.collapsed && (getEdgeCefPosition(editor, true).exists(pos => pos.isEqual(CaretPosition.fromRangeStart(rng))) || getEdgeCefPosition(editor, false).exists(pos => pos.isEqual(CaretPosition.fromRangeEnd(rng))));\n    };\n\n    const isCompoundElement = node => isNonNullable(node) && (isTableCell$2(SugarElement.fromDom(node)) || isListItem$1(SugarElement.fromDom(node)));\n    const DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    const isAtContentEditableBlockCaret = (forward, from) => {\n      const elm = from.getNode(!forward);\n      const caretLocation = forward ? 'after' : 'before';\n      return isElement$6(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    const isDeleteFromCefDifferentBlocks = (root, forward, from, to, schema) => {\n      const inSameBlock = elm => schema.isInline(elm.nodeName.toLowerCase()) && !isInSameBlock(from, to, root);\n      return getRelativeCefElm(!forward, from).fold(() => getRelativeCefElm(forward, to).fold(never, inSameBlock), inSameBlock);\n    };\n    const deleteEmptyBlockOrMoveToCef = (schema, root, forward, from, to) => {\n      const toCefElm = to.getNode(!forward);\n      return getParentBlock$2(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(blockElm => isEmpty$2(schema, blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm)).orThunk(() => Optional.some(DeleteAction.moveToElement(toCefElm)));\n    };\n    const findCefPosition = (root, forward, from, schema) => fromPosition(forward, root, from).bind(to => {\n      if (isCompoundElement(to.getNode())) {\n        return Optional.none();\n      } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to, schema)) {\n        return Optional.none();\n      } else if (forward && isContentEditableFalse$b(to.getNode())) {\n        return deleteEmptyBlockOrMoveToCef(schema, root, forward, from, to);\n      } else if (!forward && isContentEditableFalse$b(to.getNode(true))) {\n        return deleteEmptyBlockOrMoveToCef(schema, root, forward, from, to);\n      } else if (forward && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      } else if (!forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      } else {\n        return Optional.none();\n      }\n    });\n    const getContentEditableBlockAction = (forward, elm) => {\n      if (isNullable(elm)) {\n        return Optional.none();\n      } else if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (!forward && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    const skipMoveToActionFromInlineCefToContent = (root, from, deleteAction) => deleteAction.fold(elm => Optional.some(DeleteAction.remove(elm)), elm => Optional.some(DeleteAction.moveToElement(elm)), to => {\n      if (isInSameBlock(from, to, root)) {\n        return Optional.none();\n      } else {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      }\n    });\n    const getContentEditableAction = (root, forward, from, schema) => {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(!forward)).orThunk(() => findCefPosition(root, forward, from, schema));\n      } else {\n        return findCefPosition(root, forward, from, schema).bind(deleteAction => skipMoveToActionFromInlineCefToContent(root, from, deleteAction));\n      }\n    };\n    const read = (root, forward, rng, schema) => {\n      const normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      const from = CaretPosition.fromRangeStart(normalizedRange);\n      const rootElement = SugarElement.fromDom(root);\n      if (!forward && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (!forward && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from, schema)) {\n        return findPreviousBr(rootElement, from, schema).map(br => DeleteAction.remove(br.getNode()));\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from, schema)) {\n        return findNextBr(rootElement, from, schema).map(br => DeleteAction.remove(br.getNode()));\n      } else {\n        return getContentEditableAction(root, forward, from, schema);\n      }\n    };\n\n    const deleteElement$1 = (editor, forward) => element => {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    const moveToElement = (editor, forward) => element => {\n      const pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n      editor.selection.setRng(pos.toRange());\n      return true;\n    };\n    const moveToPosition = editor => pos => {\n      editor.selection.setRng(pos.toRange());\n      return true;\n    };\n    const getAncestorCe = (editor, node) => Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    const backspaceDeleteCaret = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(() => read(editor.getBody(), forward, editor.selection.getRng(), editor.schema).map(deleteAction => () => deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor))), () => Optional.some(noop));\n    };\n    const deleteOffscreenSelection = rootElement => {\n      each$e(descendants(rootElement, '.mce-offscreen-selection'), remove$4);\n    };\n    const backspaceDeleteRange = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$3(selectedNode)) {\n        const hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(() => Optional.some(() => {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n        }), () => Optional.some(noop));\n      }\n      if (isCefAtEdgeSelected(editor)) {\n        return Optional.some(() => {\n          deleteRangeContents(editor, editor.selection.getRng(), SugarElement.fromDom(editor.getBody()));\n        });\n      }\n      return Optional.none();\n    };\n    const paddEmptyElement = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$3(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        const br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    const backspaceDelete$6 = (editor, forward) => {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    const deleteCaret$2 = (editor, forward) => {\n      const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(pos => forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos)).bind(pos => getChildNodeAtRelativeOffset(forward ? 0 : -1, pos)).map(elm => () => editor.selection.select(elm));\n    };\n    const backspaceDelete$5 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : Optional.none();\n\n    const isText$2 = isText$b;\n    const startsWithCaretContainer = node => isText$2(node) && node.data[0] === ZWSP$1;\n    const endsWithCaretContainer = node => isText$2(node) && node.data[node.data.length - 1] === ZWSP$1;\n    const createZwsp = node => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      return doc.createTextNode(ZWSP$1);\n    };\n    const insertBefore$1 = node => {\n      var _a;\n      if (isText$2(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText$2(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        const newNode = createZwsp(node);\n        (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    const insertAfter$1 = node => {\n      var _a, _b;\n      if (isText$2(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText$2(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        const newNode = createZwsp(node);\n        if (node.nextSibling) {\n          (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(newNode, node.nextSibling);\n        } else {\n          (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    const insertInline = (before, node) => before ? insertBefore$1(node) : insertAfter$1(node);\n    const insertInlineBefore = curry(insertInline, true);\n    const insertInlineAfter = curry(insertInline, false);\n\n    const insertInlinePos = (pos, before) => {\n      if (isText$b(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    const isPosCaretContainer = (pos, caret) => {\n      const caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    const renderCaret = (caret, location) => location.fold(element => {\n      remove$2(caret.get());\n      const text = insertInlineBefore(element);\n      caret.set(text);\n      return Optional.some(CaretPosition(text, text.length - 1));\n    }, element => firstPositionIn(element).map(pos => {\n      if (!isPosCaretContainer(pos, caret)) {\n        remove$2(caret.get());\n        const text = insertInlinePos(pos, true);\n        caret.set(text);\n        return CaretPosition(text, 1);\n      } else {\n        const node = caret.get();\n        return CaretPosition(node, 1);\n      }\n    }), element => lastPositionIn(element).map(pos => {\n      if (!isPosCaretContainer(pos, caret)) {\n        remove$2(caret.get());\n        const text = insertInlinePos(pos, false);\n        caret.set(text);\n        return CaretPosition(text, text.length - 1);\n      } else {\n        const node = caret.get();\n        return CaretPosition(node, node.length - 1);\n      }\n    }), element => {\n      remove$2(caret.get());\n      const text = insertInlineAfter(element);\n      caret.set(text);\n      return Optional.some(CaretPosition(text, 1));\n    });\n\n    const evaluateUntil = (fns, args) => {\n      for (let i = 0; i < fns.length; i++) {\n        const result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    const Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    const rescope$1 = (rootNode, node) => {\n      const parentBlock = getParentBlock$3(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    const before = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeForwards(pos);\n      const scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(() => nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(inline => Location.before(inline)), Optional.none);\n    };\n    const isNotInsideFormatCaretContainer = (rootNode, elm) => getParentCaretContainer(rootNode, elm) === null;\n    const findInsideRootInline = (isInlineTarget, rootNode, pos) => findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    const start$1 = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(inline => {\n        const prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    const end = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(inline => {\n        const nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    const after = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeBackwards(pos);\n      const scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(() => prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(inline => Location.after(inline)), Optional.none);\n    };\n    const isValidLocation = location => !isRtl(getElement(location));\n    const readLocation = (isInlineTarget, rootNode, pos) => {\n      const location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    const getElement = location => location.fold(identity, identity, identity, identity);\n    const getName = location => location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    const outside = location => location.fold(Location.before, Location.before, Location.after, Location.after);\n    const inside = location => location.fold(Location.start, Location.start, Location.end, Location.end);\n    const isEq = (location1, location2) => getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    const betweenInlines = (forward, isInlineTarget, rootNode, from, to, location) => lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), (fromInline, toInline) => {\n      if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n        return Location.after(forward ? fromInline : toInline);\n      } else {\n        return location;\n      }\n    }).getOr(location);\n    const skipNoMovement = (fromLocation, toLocation) => fromLocation.fold(always, fromLocation => !isEq(fromLocation, toLocation));\n    const findLocationTraverse = (forward, isInlineTarget, rootNode, fromLocation, pos) => {\n      const from = normalizePosition(forward, pos);\n      const to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      const location = to.fold(() => fromLocation.map(outside), to => readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation)));\n      return location.filter(isValidLocation);\n    };\n    const findLocationSimple = (forward, location) => {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    const findLocation$1 = (forward, isInlineTarget, rootNode, pos) => {\n      const from = normalizePosition(forward, pos);\n      const fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(() => findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos));\n    };\n\n    const hasSelectionModifyApi = editor => {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    const moveRel = (forward, selection, pos) => {\n      const delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    const moveByWord = (forward, editor) => {\n      const rng = editor.selection.getRng();\n      const pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    const flip = (direction, positions) => direction === HDirection.Backwards ? reverse(positions) : positions;\n    const walk$1 = (direction, caretWalker, pos) => direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    const getBreakType = (scope, direction, currentPos, nextPos) => {\n      if (isBr$6(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    const getPositionsUntil = (predicate, direction, scope, start) => {\n      const caretWalker = CaretWalker(scope);\n      let currentPos = start;\n      const positions = [];\n      while (currentPos) {\n        const nextPos = walk$1(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$6(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          const breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    const getAdjacentLinePositions = (direction, getPositionsUntilBreak, scope, start) => getPositionsUntilBreak(scope, start).breakAt.map(pos => {\n      const positions = getPositionsUntilBreak(scope, pos).positions;\n      return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n    }).getOr([]);\n    const findClosestHorizontalPositionFromPoint = (positions, x) => foldl(positions, (acc, newPos) => acc.fold(() => Optional.some(newPos), lastPos => lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), (lastRect, newRect) => {\n      const lastDist = Math.abs(x - lastRect.left);\n      const newDist = Math.abs(x - newRect.left);\n      return newDist <= lastDist ? newPos : lastPos;\n    }).or(acc)), Optional.none());\n    const findClosestHorizontalPosition = (positions, pos) => head(pos.getClientRects()).bind(targetRect => findClosestHorizontalPositionFromPoint(positions, targetRect.left));\n    const getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    const getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    const getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    const getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    const isAtFirstLine = (scope, pos) => getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    const isAtLastLine = (scope, pos) => getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    const getFirstLinePositions = scope => firstPositionIn(scope).map(pos => [pos].concat(getPositionsUntilNextLine(scope, pos).positions)).getOr([]);\n    const getLastLinePositions = scope => lastPositionIn(scope).map(pos => getPositionsUntilPreviousLine(scope, pos).positions.concat(pos)).getOr([]);\n    const getClosestPositionAbove = (scope, pos) => findClosestHorizontalPosition(getPositionsAbove(scope, pos), pos);\n    const getClosestPositionBelow = (scope, pos) => findClosestHorizontalPosition(getPositionsBelow(scope, pos), pos);\n\n    const isContentEditableFalse$5 = isContentEditableFalse$b;\n    const distanceToRectLeft$1 = (clientRect, clientX) => Math.abs(clientRect.left - clientX);\n    const distanceToRectRight$1 = (clientRect, clientX) => Math.abs(clientRect.right - clientX);\n    const isNodeClientRect = rect => hasNonNullableKey(rect, 'node');\n    const findClosestClientRect = (clientRects, clientX) => reduce(clientRects, (oldClientRect, clientRect) => {\n      const oldDistance = Math.min(distanceToRectLeft$1(oldClientRect, clientX), distanceToRectRight$1(oldClientRect, clientX));\n      const newDistance = Math.min(distanceToRectLeft$1(clientRect, clientX), distanceToRectRight$1(clientRect, clientX));\n      if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$5(clientRect.node)) {\n        return clientRect;\n      }\n      if (newDistance < oldDistance) {\n        return clientRect;\n      }\n      return oldClientRect;\n    });\n\n    const getNodeClientRects = node => {\n      const toArrayWithNode = clientRects => {\n        return map$3(clientRects, rect => {\n          const clientRect = clone$1(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$6(node)) {\n        return toArrayWithNode(node.getClientRects());\n      } else if (isText$b(node)) {\n        const rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      } else {\n        return [];\n      }\n    };\n    const getClientRects = nodes => bind$3(nodes, getNodeClientRects);\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    const findUntil = (direction, root, predicateFn, node) => {\n      let currentNode = node;\n      while (currentNode = findNode(currentNode, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(currentNode)) {\n          return;\n        }\n      }\n    };\n    const walkUntil = (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) => {\n      let line = 0;\n      const result = [];\n      const add = node => {\n        let clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (let i = 0; i < clientRects.length; i++) {\n          const clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n        return false;\n      };\n      const targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      const node = caretPosition.getNode();\n      if (node) {\n        add(node);\n        findUntil(direction, root, add, node);\n      }\n      return result;\n    };\n    const aboveLineNumber = (lineNumber, clientRect) => clientRect.line > lineNumber;\n    const isLineNumber = (lineNumber, clientRect) => clientRect.line === lineNumber;\n    const upUntil = curry(walkUntil, VDirection.Up, isAbove$1, isBelow$1);\n    const downUntil = curry(walkUntil, VDirection.Down, isBelow$1, isAbove$1);\n    const getLastClientRect = caretPosition => {\n      return last$1(caretPosition.getClientRects());\n    };\n    const positionsUntil = (direction, root, predicateFn, node) => {\n      const caretWalker = CaretWalker(root);\n      let walkFn;\n      let isBelowFn;\n      let isAboveFn;\n      let caretPosition;\n      const result = [];\n      let line = 0;\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      const targetClientRect = getLastClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        const rect = getLastClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        const clientRect = clone$1(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    const isAboveLine = lineNumber => clientRect => aboveLineNumber(lineNumber, clientRect);\n    const isLine = lineNumber => clientRect => isLineNumber(lineNumber, clientRect);\n\n    const moveToRange = (editor, rng) => {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    const renderRangeCaretOpt = (editor, range, scrollIntoView) => Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    const moveHorizontally = (editor, direction, range, isBefore, isAfter, isElement) => {\n      const forwards = direction === HDirection.Forwards;\n      const caretWalker = CaretWalker(editor.getBody());\n      const getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      const isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        const node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        } else if (isCefAtEdgeSelected(editor)) {\n          const newRange = range.cloneRange();\n          newRange.collapse(direction === HDirection.Backwards);\n          return Optional.from(newRange);\n        }\n      }\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      let nextCaretPosition = getNextPosFn(caretPosition);\n      const rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      } else {\n        nextCaretPosition = normalizePosition(forwards, nextCaretPosition);\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      const peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    const moveVertically = (editor, direction, range, isBefore, isAfter, isElement) => {\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      const caretClientRect = last$1(caretPosition.getClientRects());\n      const forwards = direction === VDirection.Down;\n      const root = editor.getBody();\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      if (isCefAtEdgeSelected(editor)) {\n        const caretPosition = forwards ? CaretPosition.fromRangeEnd(range) : CaretPosition.fromRangeStart(range);\n        const getClosestFn = !forwards ? getClosestPositionAbove : getClosestPositionBelow;\n        return getClosestFn(root, caretPosition).orThunk(() => Optional.from(caretPosition)).map(pos => pos.toRange());\n      }\n      const walkerFn = forwards ? downUntil : upUntil;\n      const linePositions = walkerFn(root, isAboveLine(1), caretPosition);\n      const nextLinePositions = filter$5(linePositions, isLine(1));\n      const clientX = caretClientRect.left;\n      const nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        const dist1 = Math.abs(clientX - nextLineRect.left);\n        const dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      let currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        const caretPositions = positionsUntil(direction, root, isAboveLine(1), currentNode);\n        let closestNextLineRect = findClosestClientRect(filter$5(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$5(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(pos => renderRangeCaret(editor, pos.toRange(), false));\n      }\n      return Optional.none();\n    };\n    const getLineEndPoint = (editor, forward) => {\n      const rng = editor.selection.getRng();\n      const from = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      const host = getEditingHost(from.container(), editor.getBody());\n      if (forward) {\n        const lineInfo = getPositionsUntilNextLine(host, from);\n        return last$2(lineInfo.positions);\n      } else {\n        const lineInfo = getPositionsUntilPreviousLine(host, from);\n        return head(lineInfo.positions);\n      }\n    };\n    const moveToLineEndPoint$3 = (editor, forward, isElementPosition) => getLineEndPoint(editor, forward).filter(isElementPosition).exists(pos => {\n      editor.selection.setRng(pos.toRange());\n      return true;\n    });\n\n    const setCaretPosition = (editor, pos) => {\n      const rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    const setSelected = (state, elm) => {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    const renderCaretLocation = (editor, caret, location) => renderCaret(caret, location).map(pos => {\n      setCaretPosition(editor, pos);\n      return location;\n    });\n    const getPositionFromRange = (range, root, forward) => {\n      const start = CaretPosition.fromRangeStart(range);\n      if (range.collapsed) {\n        return start;\n      } else {\n        const end = CaretPosition.fromRangeEnd(range);\n        return forward ? prevPosition(root, end).getOr(end) : nextPosition(root, start).getOr(start);\n      }\n    };\n    const findLocation = (editor, caret, forward) => {\n      const rootNode = editor.getBody();\n      const from = getPositionFromRange(editor.selection.getRng(), rootNode, forward);\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(location => renderCaretLocation(editor, caret, location));\n    };\n    const toggleInlines = (isInlineTarget, dom, elms) => {\n      const inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), e => e.dom);\n      const selectedInlines = filter$5(inlineBoundaries, isInlineTarget);\n      const targetInlines = filter$5(elms, isInlineTarget);\n      each$e(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$e(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    const safeRemoveCaretContainer = (editor, caret) => {\n      const caretValue = caret.get();\n      if (editor.selection.isCollapsed() && !editor.composing && caretValue) {\n        const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && !isAtZwsp(pos)) {\n          setCaretPosition(editor, removeAndReposition(caretValue, pos));\n          caret.set(null);\n        }\n      }\n    };\n    const renderInsideInlineCaret = (isInlineTarget, editor, caret, elms) => {\n      if (editor.selection.isCollapsed()) {\n        const inlines = filter$5(elms, isInlineTarget);\n        each$e(inlines, _inline => {\n          const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(location => renderCaretLocation(editor, caret, location));\n        });\n      }\n    };\n    const move$3 = (editor, caret, forward) => isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    const moveWord = (forward, editor, _caret) => isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    const setupSelectedState = editor => {\n      const caret = Cell(null);\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', e => {\n        if (isInlineBoundariesEnabled(editor)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    const moveNextWord = curry(moveWord, true);\n    const movePrevWord = curry(moveWord, false);\n    const moveToLineEndPoint$2 = (editor, forward, caret) => {\n      if (isInlineBoundariesEnabled(editor)) {\n        const linePoint = getLineEndPoint(editor, forward).getOrThunk(() => {\n          const rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(loc => {\n          const outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(pos => {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    const rangeFromPositions = (from, to) => {\n      const range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    const hasOnlyTwoOrLessPositionsLeft = elm => lift2(firstPositionIn(elm), lastPositionIn(elm), (firstPos, lastPos) => {\n      const normalizedFirstPos = normalizePosition(true, firstPos);\n      const normalizedLastPos = normalizePosition(false, lastPos);\n      return nextPosition(elm, normalizedFirstPos).forall(pos => pos.isEqual(normalizedLastPos));\n    }).getOr(true);\n    const setCaretLocation = (editor, caret) => location => renderCaret(caret, location).map(pos => () => setCaretPosition(editor, pos));\n    const deleteFromTo = (editor, caret, from, to) => {\n      const rootNode = editor.getBody();\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(() => {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        execNativeDeleteCommand(editor);\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).bind(setCaretLocation(editor, caret)).each(call);\n      });\n      editor.nodeChanged();\n    };\n    const rescope = (rootNode, node) => {\n      const parentBlock = getParentBlock$3(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    const backspaceDeleteCollapsed = (editor, caret, forward, from) => {\n      const rootNode = rescope(editor.getBody(), from.container());\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      const location = fromLocation.bind(location => {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      });\n      return location.map(setCaretLocation(editor, caret)).getOrThunk(() => {\n        const toPosition = navigate(forward, rootNode, from);\n        const toLocation = toPosition.bind(pos => readLocation(isInlineTarget$1, rootNode, pos));\n        return lift2(fromLocation, toLocation, () => findRootInline(isInlineTarget$1, rootNode, from).bind(elm => {\n          if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n            return Optional.some(() => {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n            });\n          } else {\n            return Optional.none();\n          }\n        })).getOrThunk(() => toLocation.bind(() => toPosition.map(to => {\n          return () => {\n            if (forward) {\n              deleteFromTo(editor, caret, from, to);\n            } else {\n              deleteFromTo(editor, caret, to, from);\n            }\n          };\n        })));\n      });\n    };\n    const backspaceDelete$4 = (editor, caret, forward) => {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return Optional.none();\n    };\n\n    const hasMultipleChildren = elm => childNodesCount(elm) > 1;\n    const getParentsUntil = (editor, pred) => {\n      const rootElm = SugarElement.fromDom(editor.getBody());\n      const startElm = SugarElement.fromDom(editor.selection.getStart());\n      const parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, pred).fold(constant(parents), index => parents.slice(0, index));\n    };\n    const hasOnlyOneChild = elm => childNodesCount(elm) === 1;\n    const getParentInlinesUntilMultichildInline = editor => getParentsUntil(editor, elm => editor.schema.isBlock(name(elm)) || hasMultipleChildren(elm));\n    const getParentInlines = editor => getParentsUntil(editor, el => editor.schema.isBlock(name(el)));\n    const getFormatNodes = (editor, parentInlines) => {\n      const isFormatElement$1 = curry(isFormatElement, editor);\n      return bind$3(parentInlines, elm => isFormatElement$1(elm) ? [elm.dom] : []);\n    };\n    const getFormatNodesAtStart = editor => {\n      const parentInlines = getParentInlines(editor);\n      return getFormatNodes(editor, parentInlines);\n    };\n    const deleteLastPosition = (forward, editor, target, parentInlines) => {\n      const formatNodes = getFormatNodes(editor, parentInlines);\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        const pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    const deleteCaret$1 = (editor, forward) => {\n      const parentInlines = filter$5(getParentInlinesUntilMultichildInline(editor), hasOnlyOneChild);\n      return last$2(parentInlines).bind(target => {\n        const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          return Optional.some(() => deleteLastPosition(forward, editor, target, parentInlines));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const isBrInEmptyElement = (editor, elm) => {\n      const parentElm = elm.parentElement;\n      return isBr$6(elm) && !isNull(parentElm) && editor.dom.isEmpty(parentElm);\n    };\n    const isEmptyCaret = elm => isEmptyCaretFormatElement(SugarElement.fromDom(elm));\n    const createCaretFormatAtStart = (editor, formatNodes) => {\n      const startElm = editor.selection.getStart();\n      const pos = isBrInEmptyElement(editor, startElm) || isEmptyCaret(startElm) ? replaceWithCaretFormat(startElm, formatNodes) : createCaretFormatAtStart$1(editor.selection.getRng(), formatNodes);\n      editor.selection.setRng(pos.toRange());\n    };\n    const updateCaretFormat = (editor, updateFormats) => {\n      const missingFormats = difference(updateFormats, getFormatNodesAtStart(editor));\n      if (missingFormats.length > 0) {\n        createCaretFormatAtStart(editor, missingFormats);\n      }\n    };\n    const rangeStartsAtTextContainer = rng => isText$b(rng.startContainer);\n    const rangeStartsAtStartOfTextContainer = rng => rng.startOffset === 0 && rangeStartsAtTextContainer(rng);\n    const rangeStartParentIsFormatElement = (editor, rng) => {\n      const startParent = rng.startContainer.parentElement;\n      return !isNull(startParent) && isFormatElement(editor, SugarElement.fromDom(startParent));\n    };\n    const rangeStartAndEndHaveSameParent = rng => {\n      const startParent = rng.startContainer.parentNode;\n      const endParent = rng.endContainer.parentNode;\n      return !isNull(startParent) && !isNull(endParent) && startParent.isEqualNode(endParent);\n    };\n    const rangeEndsAtEndOfEndContainer = rng => {\n      const endContainer = rng.endContainer;\n      return rng.endOffset === (isText$b(endContainer) ? endContainer.length : endContainer.childNodes.length);\n    };\n    const rangeEndsAtEndOfStartContainer = rng => rangeStartAndEndHaveSameParent(rng) && rangeEndsAtEndOfEndContainer(rng);\n    const rangeEndsAfterEndOfStartContainer = rng => !rng.endContainer.isEqualNode(rng.commonAncestorContainer);\n    const rangeEndsAtOrAfterEndOfStartContainer = rng => rangeEndsAtEndOfStartContainer(rng) || rangeEndsAfterEndOfStartContainer(rng);\n    const requiresDeleteRangeOverride = editor => {\n      const rng = editor.selection.getRng();\n      return rangeStartsAtStartOfTextContainer(rng) && rangeStartParentIsFormatElement(editor, rng) && rangeEndsAtOrAfterEndOfStartContainer(rng);\n    };\n    const deleteRange$1 = editor => {\n      if (requiresDeleteRangeOverride(editor)) {\n        const formatNodes = getFormatNodesAtStart(editor);\n        return Optional.some(() => {\n          execNativeDeleteCommand(editor);\n          updateCaretFormat(editor, formatNodes);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const backspaceDelete$3 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : deleteRange$1(editor);\n    const hasAncestorInlineCaret = (elm, schema) => ancestor$2(elm, node => isCaretNode(node.dom), el => schema.isBlock(name(el)));\n    const hasAncestorInlineCaretAtStart = editor => hasAncestorInlineCaret(SugarElement.fromDom(editor.selection.getStart()), editor.schema);\n    const requiresRefreshCaretOverride = editor => {\n      const rng = editor.selection.getRng();\n      return rng.collapsed && (rangeStartsAtTextContainer(rng) || editor.dom.isEmpty(rng.startContainer)) && !hasAncestorInlineCaretAtStart(editor);\n    };\n    const refreshCaret = editor => {\n      if (requiresRefreshCaretOverride(editor)) {\n        createCaretFormatAtStart(editor, []);\n      }\n      return true;\n    };\n\n    const deleteElement = (editor, forward, element) => {\n      if (isNonNullable(element)) {\n        return Optional.some(() => {\n          editor._selectionOverrides.hideFakeCaret();\n          deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const deleteCaret = (editor, forward) => {\n      const isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(pos => isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos)).bind(pos => deleteElement(editor, forward, pos.getNode(!forward)));\n      }\n    };\n    const deleteRange = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : Optional.none();\n    };\n    const backspaceDelete$2 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n\n    const isEditable = target => closest$4(target, elm => isContentEditableTrue$3(elm.dom) || isContentEditableFalse$b(elm.dom)).exists(elm => isContentEditableTrue$3(elm.dom));\n    const parseIndentValue = value => toInt(value !== null && value !== void 0 ? value : '').getOr(0);\n    const getIndentStyleName = (useMargin, element) => {\n      const indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      const suffix = get$7(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    const indentElement = (dom, command, useMargin, value, unit, element) => {\n      const indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      const parsedValue = parseIndentValue(dom.getStyle(element, indentStyleName));\n      if (command === 'outdent') {\n        const styleValue = Math.max(0, parsedValue - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        const styleValue = parsedValue + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    const validateBlocks = (editor, blocks) => forall(blocks, block => {\n      const indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n      const intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n      const contentEditable = editor.dom.getContentEditable(block.dom);\n      return contentEditable !== 'false' && intentValue > 0;\n    });\n    const canOutdent = editor => {\n      const blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    const isListComponent = el => isList(el) || isListItem$1(el);\n    const parentIsListComponent = el => parent(el).exists(isListComponent);\n    const getBlocksToIndent = editor => filter$5(fromDom$1(editor.selection.getSelectedBlocks()), el => !isListComponent(el) && !parentIsListComponent(el) && isEditable(el));\n    const handle = (editor, command) => {\n      var _a, _b;\n      const {dom} = editor;\n      const indentation = getIndentation(editor);\n      const indentUnit = (_b = (_a = /[a-z%]+$/i.exec(indentation)) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : 'px';\n      const indentValue = parseIndentValue(indentation);\n      const useMargin = shouldIndentUseMargin(editor);\n      each$e(getBlocksToIndent(editor), block => {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n    const indent = editor => handle(editor, 'indent');\n    const outdent = editor => handle(editor, 'outdent');\n\n    const backspaceDelete$1 = editor => {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        const dom = editor.dom;\n        const rng = editor.selection.getRng();\n        const pos = CaretPosition.fromRangeStart(rng);\n        const block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos, editor.schema)) {\n          return Optional.some(() => outdent(editor));\n        }\n      }\n      return Optional.none();\n    };\n\n    const findAction = (editor, caret, forward) => findMap([\n      backspaceDelete$1,\n      backspaceDelete$6,\n      backspaceDelete$7,\n      (editor, forward) => backspaceDelete$4(editor, caret, forward),\n      backspaceDelete$9,\n      backspaceDelete$a,\n      backspaceDelete$5,\n      backspaceDelete$2,\n      backspaceDelete$8,\n      backspaceDelete$3\n    ], item => item(editor, forward)).filter(_ => editor.selection.isEditable());\n    const deleteCommand = (editor, caret) => {\n      const result = findAction(editor, caret, false);\n      result.fold(() => {\n        if (editor.selection.isEditable()) {\n          execNativeDeleteCommand(editor);\n          paddEmptyBody(editor);\n        }\n      }, call);\n    };\n    const forwardDeleteCommand = (editor, caret) => {\n      const result = findAction(editor, caret, true);\n      result.fold(() => {\n        if (editor.selection.isEditable()) {\n          execNativeForwardDeleteCommand(editor);\n        }\n      }, call);\n    };\n    const setup$q = (editor, caret) => {\n      editor.addCommand('delete', () => {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', () => {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    const SIGNIFICANT_MOVE = 5;\n    const LONGPRESS_DELAY = 400;\n    const getTouch = event => {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    const isFarEnough = (touch, data) => {\n      const distX = Math.abs(touch.clientX - data.x);\n      const distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    const setup$p = editor => {\n      const startData = value$2();\n      const longpressFired = Cell(false);\n      const debounceLongpress = last(e => {\n        editor.dispatch('longpress', {\n          ...e,\n          type: 'longpress'\n        });\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', e => {\n        getTouch(e).each(touch => {\n          debounceLongpress.cancel();\n          const data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', e => {\n        debounceLongpress.cancel();\n        getTouch(e).each(touch => {\n          startData.on(data => {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.dispatch('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', e => {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(data => data.target.isEqualNode(e.target)).each(() => {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.dispatch('tap', {\n              ...e,\n              type: 'tap'\n            });\n          }\n        });\n      }, true);\n    };\n\n    const isBlockElement = (blockElements, node) => has$2(blockElements, node.nodeName);\n    const isValidTarget = (schema, node) => {\n      if (isText$b(node)) {\n        return true;\n      } else if (isElement$6(node)) {\n        return !isBlockElement(schema.getBlockElements(), node) && !isBookmarkNode$1(node) && !isTransparentBlock(schema, node) && !isNonHtmlElementRoot(node);\n      } else {\n        return false;\n      }\n    };\n    const hasBlockParent = (blockElements, root, node) => {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), elm => {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    const shouldRemoveTextNode = (blockElements, node) => {\n      if (isText$b(node)) {\n        if (node.data.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.data)) {\n          return !node.nextSibling || isBlockElement(blockElements, node.nextSibling) || isNonHtmlElementRoot(node.nextSibling);\n        }\n      }\n      return false;\n    };\n    const createRootBlock = editor => editor.dom.create(getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n    const addRootBlocks = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const schema = editor.schema;\n      const blockElements = schema.getBlockElements();\n      const startNode = selection.getStart();\n      const rootNode = editor.getBody();\n      let rootBlockNode;\n      let tempNode;\n      let wrapped = false;\n      const forcedRootBlock = getForcedRootBlock(editor);\n      if (!startNode || !isElement$6(startNode)) {\n        return;\n      }\n      const rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, startNode)) {\n        return;\n      }\n      const rng = selection.getRng();\n      const {startContainer, startOffset, endContainer, endOffset} = rng;\n      const restoreSelection = hasFocus(editor);\n      let node = rootNode.firstChild;\n      while (node) {\n        if (isElement$6(node)) {\n          updateElement(schema, node);\n        }\n        if (isValidTarget(schema, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = createRootBlock(editor);\n            rootNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    const insertEmptyLine = (editor, root, insertBlock) => {\n      const block = SugarElement.fromDom(createRootBlock(editor));\n      const br = createPaddingBr();\n      append$1(block, br);\n      insertBlock(root, block);\n      const rng = document.createRange();\n      rng.setStartBefore(br.dom);\n      rng.setEndBefore(br.dom);\n      return rng;\n    };\n    const setup$o = editor => {\n      editor.on('NodeChange', curry(addRootBlocks, editor));\n    };\n\n    const hasClass = checkClassName => node => (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n    const replaceMatchWithSpan = (editor, content, cls) => {\n      return function (match) {\n        const args = arguments, index = args[args.length - 2];\n        const prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          const findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            const tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    const convertRegExpsToNonEditable = (editor, nonEditableRegExps, e) => {\n      let i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    const setup$n = editor => {\n      const contentEditableAttrName = 'contenteditable';\n      const editClass = ' ' + Tools.trim(getEditableClass(editor)) + ' ';\n      const nonEditClass = ' ' + Tools.trim(getNonEditableClass(editor)) + ' ';\n      const hasEditClass = hasClass(editClass);\n      const hasNonEditClass = hasClass(nonEditClass);\n      const nonEditableRegExps = getNonEditableRegExps(editor);\n      if (nonEditableRegExps.length > 0) {\n        editor.on('BeforeSetContent', e => {\n          convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n        });\n      }\n      editor.parser.addAttributeFilter('class', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (hasEditClass(node)) {\n            node.attr(contentEditableAttrName, 'true');\n          } else if (hasNonEditClass(node)) {\n            node.attr(contentEditableAttrName, 'false');\n          }\n        }\n      });\n      editor.serializer.addAttributeFilter(contentEditableAttrName, nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (!hasEditClass(node) && !hasNonEditClass(node)) {\n            continue;\n          }\n          if (nonEditableRegExps.length > 0 && node.attr('data-mce-content')) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = node.attr('data-mce-content');\n          } else {\n            node.attr(contentEditableAttrName, null);\n          }\n        }\n      });\n    };\n\n    const findBlockCaretContainer = editor => descendant$1(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(elm => elm.dom).getOrNull();\n    const showBlockCaretContainer = (editor, blockCaretContainer) => {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        editor.selection.setRng(editor.selection.getRng());\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    const handleBlockContainer = (editor, e) => {\n      const blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    const setup$m = editor => {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    const isContentEditableFalse$4 = isContentEditableFalse$b;\n    const moveToCeFalseHorizontally = (direction, editor, range) => moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$4);\n    const moveToCeFalseVertically = (direction, editor, range) => {\n      const isBefore = caretPosition => isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      const isAfter = caretPosition => isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$4);\n    };\n    const createTextBlock = editor => {\n      const textBlock = editor.dom.create(getForcedRootBlock(editor));\n      textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      return textBlock;\n    };\n    const exitPreBlock = (editor, direction, range) => {\n      const caretWalker = CaretWalker(editor.getBody());\n      const getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed) {\n        const pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        const caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          const newBlock = SugarElement.fromDom(createTextBlock(editor));\n          if (direction === 1) {\n            after$4(SugarElement.fromDom(pre), newBlock);\n          } else {\n            before$3(SugarElement.fromDom(pre), newBlock);\n          }\n          editor.selection.select(newBlock.dom, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    const getHorizontalRange = (editor, forward) => {\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(() => {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    const getVerticalRange = (editor, down) => {\n      const direction = down ? 1 : -1;\n      const range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(() => {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    const flipDirection = (selection, forward) => {\n      const elm = forward ? selection.getEnd(true) : selection.getStart(true);\n      return isRtl(elm) ? !forward : forward;\n    };\n    const moveH$2 = (editor, forward) => getHorizontalRange(editor, flipDirection(editor.selection, forward)).exists(newRange => {\n      moveToRange(editor, newRange);\n      return true;\n    });\n    const moveV$4 = (editor, down) => getVerticalRange(editor, down).exists(newRange => {\n      moveToRange(editor, newRange);\n      return true;\n    });\n    const moveToLineEndPoint$1 = (editor, forward) => {\n      const isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n    const selectToEndPoint = (editor, forward) => getEdgeCefPosition(editor, !forward).map(pos => {\n      const rng = pos.toRange();\n      const curRng = editor.selection.getRng();\n      if (forward) {\n        rng.setStart(curRng.startContainer, curRng.startOffset);\n      } else {\n        rng.setEnd(curRng.endContainer, curRng.endOffset);\n      }\n      return rng;\n    }).exists(rng => {\n      moveToRange(editor, rng);\n      return true;\n    });\n\n    const isTarget = node => contains$2(['figcaption'], name(node));\n    const getClosestTargetBlock = (pos, root, schema) => {\n      const isRoot = curry(eq, root);\n      return closest$4(SugarElement.fromDom(pos.container()), el => schema.isBlock(name(el)), isRoot).filter(isTarget);\n    };\n    const isAtFirstOrLastLine = (root, forward, pos) => forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    const moveCaretToNewEmptyLine = (editor, forward) => {\n      const root = SugarElement.fromDom(editor.getBody());\n      const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getClosestTargetBlock(pos, root, editor.schema).exists(() => {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          const insertFn = forward ? append$1 : prepend;\n          const rng = insertEmptyLine(editor, root, insertFn);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    const moveV$3 = (editor, forward) => {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    const moveUp = (editor, details, summary) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (root.firstChild === details && isAtFirstLine(summary, pos)) {\n        editor.execCommand('InsertNewBlockBefore');\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const moveDown = (editor, details) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (root.lastChild === details && isAtLastLine(details, pos)) {\n        editor.execCommand('InsertNewBlockAfter');\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const move$2 = (editor, forward) => {\n      if (forward) {\n        return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'details')).map(details => moveDown(editor, details)).getOr(false);\n      } else {\n        return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'summary')).bind(summary => Optional.from(editor.dom.getParent(summary, 'details')).map(details => moveUp(editor, details, summary))).getOr(false);\n      }\n    };\n    const moveV$2 = (editor, forward) => move$2(editor, forward);\n\n    const baseKeyPattern = {\n      shiftKey: false,\n      altKey: false,\n      ctrlKey: false,\n      metaKey: false,\n      keyCode: 0\n    };\n    const defaultPatterns = patterns => map$3(patterns, pattern => ({\n      ...baseKeyPattern,\n      ...pattern\n    }));\n    const defaultDelayedPatterns = patterns => map$3(patterns, pattern => ({\n      ...baseKeyPattern,\n      ...pattern\n    }));\n    const matchesEvent = (pattern, evt) => evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    const match$1 = (patterns, evt) => bind$3(defaultPatterns(patterns), pattern => matchesEvent(pattern, evt) ? [pattern] : []);\n    const matchDelayed = (patterns, evt) => bind$3(defaultDelayedPatterns(patterns), pattern => matchesEvent(pattern, evt) ? [pattern] : []);\n    const action = (f, ...x) => () => f.apply(null, x);\n    const execute = (patterns, evt) => find$2(match$1(patterns, evt), pattern => pattern.action());\n    const executeWithDelayedAction = (patterns, evt) => findMap(matchDelayed(patterns, evt), pattern => pattern.action());\n\n    const moveH$1 = (editor, forward) => {\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(newRange => {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    const moveV$1 = (editor, down) => {\n      const direction = down ? 1 : -1;\n      const range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(newRange => {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    const moveToLineEndPoint = (editor, forward) => {\n      const isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    const adt = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    const none = current => adt.none(current);\n    const CellLocation = {\n      ...adt,\n      none\n    };\n\n    const firstLayer = (scope, selector) => {\n      return filterFirstLayer(scope, selector, always);\n    };\n    const filterFirstLayer = (scope, selector, predicate) => {\n      return bind$3(children$1(scope), x => {\n        if (is$1(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    const lookup$1 = (tags, element, isRoot = never) => {\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains$2(tags, name(element))) {\n        return Optional.some(element);\n      }\n      const isRootOrUpperTable = elm => is$1(elm, 'table') || isRoot(elm);\n      return ancestor$3(element, tags.join(','), isRootOrUpperTable);\n    };\n    const cell = (element, isRoot) => lookup$1([\n      'td',\n      'th'\n    ], element, isRoot);\n    const cells = ancestor => firstLayer(ancestor, 'th,td');\n    const table = (element, isRoot) => closest$3(element, 'table', isRoot);\n\n    const walk = (all, current, index, direction, isEligible = always) => {\n      const forwards = direction === 1;\n      if (!forwards && index <= 0) {\n        return CellLocation.first(all[0]);\n      } else if (forwards && index >= all.length - 1) {\n        return CellLocation.last(all[all.length - 1]);\n      } else {\n        const newIndex = index + direction;\n        const elem = all[newIndex];\n        return isEligible(elem) ? CellLocation.middle(current, elem) : walk(all, current, newIndex, direction, isEligible);\n      }\n    };\n    const detect = (current, isRoot) => {\n      return table(current, isRoot).bind(table => {\n        const all = cells(table);\n        const index = findIndex$2(all, x => eq(current, x));\n        return index.map(index => ({\n          index,\n          all\n        }));\n      });\n    };\n    const next = (current, isEligible, isRoot) => {\n      const detection = detect(current, isRoot);\n      return detection.fold(() => {\n        return CellLocation.none(current);\n      }, info => {\n        return walk(info.all, current, info.index, 1, isEligible);\n      });\n    };\n    const prev = (current, isEligible, isRoot) => {\n      const detection = detect(current, isRoot);\n      return detection.fold(() => {\n        return CellLocation.none();\n      }, info => {\n        return walk(info.all, current, info.index, -1, isEligible);\n      });\n    };\n\n    const isTextNodeWithCursorPosition = el => getOption(el).filter(text => text.trim().length !== 0 || text.indexOf(nbsp) > -1).isSome();\n    const isContentEditableFalse$3 = elem => isHTMLElement$1(elem) && get$9(elem, 'contenteditable') === 'false';\n    const elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    const isCursorPosition = elem => {\n      const hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name(elem)) || isContentEditableFalse$3(elem);\n    };\n\n    const first = element => descendant$2(element, isCursorPosition);\n\n    const deflate = (rect, delta) => ({\n      left: rect.left - delta,\n      top: rect.top - delta,\n      right: rect.right + delta * 2,\n      bottom: rect.bottom + delta * 2,\n      width: rect.width + delta,\n      height: rect.height + delta\n    });\n    const getCorners = (getYAxisValue, tds) => bind$3(tds, td => {\n      const rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n      return [\n        {\n          x: rect.left,\n          y: getYAxisValue(rect),\n          cell: td\n        },\n        {\n          x: rect.right,\n          y: getYAxisValue(rect),\n          cell: td\n        }\n      ];\n    });\n    const findClosestCorner = (corners, x, y) => foldl(corners, (acc, newCorner) => acc.fold(() => Optional.some(newCorner), oldCorner => {\n      const oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n      const newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n      return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n    }), Optional.none());\n    const getClosestCell = (getYAxisValue, isTargetCorner, table, x, y) => {\n      const cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(e => e.dom);\n      const corners = filter$5(getCorners(getYAxisValue, cells), corner => isTargetCorner(corner, y));\n      return findClosestCorner(corners, x, y).map(corner => corner.cell);\n    };\n    const getBottomValue = rect => rect.bottom;\n    const getTopValue = rect => rect.top;\n    const isAbove = (corner, y) => corner.y < y;\n    const isBelow = (corner, y) => corner.y > y;\n    const getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    const getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    const findClosestPositionInAboveCell = (table, pos) => head(pos.getClientRects()).bind(rect => getClosestCellAbove(table, rect.left, rect.top)).bind(cell => findClosestHorizontalPosition(getLastLinePositions(cell), pos));\n    const findClosestPositionInBelowCell = (table, pos) => last$2(pos.getClientRects()).bind(rect => getClosestCellBelow(table, rect.left, rect.top)).bind(cell => findClosestHorizontalPosition(getFirstLinePositions(cell), pos));\n\n    const hasNextBreak = (getPositionsUntil, scope, lineInfo) => lineInfo.breakAt.exists(breakPos => getPositionsUntil(scope, breakPos).breakAt.isSome());\n    const startsWithWrapBreak = lineInfo => lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    const startsWithBrBreak = lineInfo => lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    const isAtTableCellLine = (getPositionsUntil, scope, pos) => {\n      const lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$6(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    const isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    const isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    const isCaretAtStartOrEndOfTable = (forward, rng, table) => {\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(pos => pos.isEqual(caretPos));\n    };\n    const navigateHorizontally = (editor, forward, table, _td) => {\n      const rng = editor.selection.getRng();\n      const direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(newRng => {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    const getClosestAbovePosition = (root, table, start) => findClosestPositionInAboveCell(table, start).orThunk(() => head(start.getClientRects()).bind(rect => findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left))).getOr(CaretPosition.before(table));\n    const getClosestBelowPosition = (root, table, start) => findClosestPositionInBelowCell(table, start).orThunk(() => head(start.getClientRects()).bind(rect => findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left))).getOr(CaretPosition.after(table));\n    const getTable = (previous, pos) => {\n      const node = pos.getNode(previous);\n      return isTable$2(node) ? Optional.some(node) : Optional.none();\n    };\n    const renderBlock = (down, editor, table) => {\n      editor.undoManager.transact(() => {\n        const insertFn = down ? after$4 : before$3;\n        const rng = insertEmptyLine(editor, SugarElement.fromDom(table), insertFn);\n        moveToRange(editor, rng);\n      });\n    };\n    const moveCaret = (editor, down, pos) => {\n      const table = down ? getTable(true, pos) : getTable(false, pos);\n      const last = down === false;\n      table.fold(() => moveToRange(editor, pos.toRange()), table => positionIn(last, editor.getBody()).filter(lastPos => lastPos.isEqual(pos)).fold(() => moveToRange(editor, pos.toRange()), _ => renderBlock(down, editor, table)));\n    };\n    const navigateVertically = (editor, down, table, td) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        const newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        const newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const move$1 = (editor, forward, mover) => Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(td => Optional.from(editor.dom.getParent(td, 'table')).map(table => mover(editor, forward, table, td))).getOr(false);\n    const moveH = (editor, forward) => move$1(editor, forward, navigateHorizontally);\n    const moveV = (editor, forward) => move$1(editor, forward, navigateVertically);\n    const getCellFirstCursorPosition = cell => {\n      const selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    const tabGo = (editor, isRoot, cell) => {\n      return cell.fold(Optional.none, Optional.none, (_current, next) => {\n        return first(next).map(cell => {\n          return getCellFirstCursorPosition(cell);\n        });\n      }, current => {\n        editor.execCommand('mceTableInsertRowAfter');\n        return tabForward(editor, isRoot, current);\n      });\n    };\n    const tabForward = (editor, isRoot, cell) => tabGo(editor, isRoot, next(cell, isEditable$2));\n    const tabBackward = (editor, isRoot, cell) => tabGo(editor, isRoot, prev(cell, isEditable$2));\n    const handleTab = (editor, forward) => {\n      const rootElements = [\n        'table',\n        'li',\n        'dl'\n      ];\n      const body = SugarElement.fromDom(editor.getBody());\n      const isRoot = element => {\n        const name$1 = name(element);\n        return eq(element, body) || contains$2(rootElements, name$1);\n      };\n      const rng = editor.selection.getRng();\n      const container = SugarElement.fromDom(!forward ? rng.startContainer : rng.endContainer);\n      return cell(container, isRoot).map(cell => {\n        table(cell, isRoot).each(table => {\n          editor.model.table.clearSelectedCells(table.dom);\n        });\n        editor.selection.collapse(!forward);\n        const navigation = !forward ? tabBackward : tabForward;\n        const rng = navigation(editor, isRoot, cell);\n        rng.each(range => {\n          editor.selection.setRng(range);\n        });\n        return true;\n      }).getOr(false);\n    };\n\n    const executeKeydownOverride$4 = (editor, caret, evt) => {\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$4, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$4, editor, true)\n        },\n        ...isMac ? [\n          {\n            keyCode: VK.UP,\n            action: action(selectToEndPoint, editor, false),\n            metaKey: true,\n            shiftKey: true\n          },\n          {\n            keyCode: VK.DOWN,\n            action: action(selectToEndPoint, editor, true),\n            metaKey: true,\n            shiftKey: true\n          }\n        ] : [],\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !isMac,\n          altKey: isMac,\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !isMac,\n          altKey: isMac,\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        }\n      ], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$l = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$4(editor, caret, evt);\n        }\n      });\n    };\n\n    const point = (container, offset) => ({\n      container,\n      offset\n    });\n\n    const DOM$7 = DOMUtils.DOM;\n    const alwaysNext = startNode => node => startNode === node ? -1 : 0;\n    const isBoundary = dom => node => dom.isBlock(node) || contains$2([\n      'BR',\n      'IMG',\n      'HR',\n      'INPUT'\n    ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    const textBefore = (node, offset, rootNode) => {\n      if (isText$b(node) && offset >= 0) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.backwards(node, offset, alwaysNext(node), rootNode)).map(prev => point(prev.container, prev.container.data.length));\n      }\n    };\n    const textAfter = (node, offset, rootNode) => {\n      if (isText$b(node) && offset >= node.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.forwards(node, offset, alwaysNext(node), rootNode)).map(prev => point(prev.container, 0));\n      }\n    };\n    const scanLeft = (node, offset, rootNode) => {\n      if (!isText$b(node)) {\n        return Optional.none();\n      }\n      const text = node.data;\n      if (offset >= 0 && offset <= text.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.backwards(node, offset, alwaysNext(node), rootNode)).bind(prev => {\n          const prevText = prev.container.data;\n          return scanLeft(prev.container, offset + prevText.length, rootNode);\n        });\n      }\n    };\n    const scanRight = (node, offset, rootNode) => {\n      if (!isText$b(node)) {\n        return Optional.none();\n      }\n      const text = node.data;\n      if (offset <= text.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.forwards(node, offset, alwaysNext(node), rootNode)).bind(next => scanRight(next.container, offset - text.length, rootNode));\n      }\n    };\n    const repeatLeft = (dom, node, offset, process, rootNode) => {\n      const search = TextSeeker(dom, isBoundary(dom));\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    const isValidTextRange = rng => rng.collapsed && isText$b(rng.startContainer);\n    const getText = rng => trim$2(rng.toString().replace(/\\u00A0/g, ' '));\n    const isWhitespace = chr => chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n\n    const stripTrigger = (text, trigger) => text.substring(trigger.length);\n    const findTrigger = (text, index, trigger, includeWhitespace = false) => {\n      let i;\n      const firstChar = trigger.charAt(0);\n      for (i = index - 1; i >= 0; i--) {\n        const char = text.charAt(i);\n        if (!includeWhitespace && isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (firstChar === char && contains$1(text, trigger, i, index)) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    const getContext = (dom, initRange, trigger, includeWhitespace = false) => {\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      const buffer = {\n        text: '',\n        offset: 0\n      };\n      const findTriggerIndex = (element, offset, text) => {\n        buffer.text = text + buffer.text;\n        buffer.offset += offset;\n        return findTrigger(buffer.text, buffer.offset, trigger, includeWhitespace).getOr(offset);\n      };\n      const root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerIndex, root).bind(spot => {\n        const range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        const text = getText(range);\n        const triggerIndex = text.lastIndexOf(trigger);\n        if (triggerIndex !== 0) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTrigger(text, trigger),\n            range,\n            trigger\n          });\n        }\n      });\n    };\n\n    const isText$1 = node => node.nodeType === TEXT;\n    const isElement = node => node.nodeType === ELEMENT;\n    const toLast = node => {\n      if (isText$1(node)) {\n        return point(node, node.data.length);\n      } else {\n        const children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    const toLeaf = (node, offset) => {\n      const children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    const isPreviousCharContent = (dom, leaf) => {\n      var _a;\n      const root = (_a = dom.getParent(leaf.container, dom.isBlock)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      return repeatLeft(dom, leaf.container, leaf.offset, (_element, offset) => offset === 0 ? -1 : offset, root).filter(spot => {\n        const char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    const isStartOfWord = dom => rng => {\n      const leaf = toLeaf(rng.startContainer, rng.startOffset);\n      return !isPreviousCharContent(dom, leaf);\n    };\n    const getTriggerContext = (dom, initRange, database) => findMap(database.triggers, trigger => getContext(dom, initRange, trigger));\n    const lookup = (editor, getDatabase) => {\n      const database = getDatabase();\n      const rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(context => lookupWithContext(editor, getDatabase, context));\n    };\n    const lookupWithContext = (editor, getDatabase, context, fetchOptions = {}) => {\n      var _a;\n      const database = getDatabase();\n      const rng = editor.selection.getRng();\n      const startText = (_a = rng.startContainer.nodeValue) !== null && _a !== void 0 ? _a : '';\n      const autocompleters = filter$5(database.lookupByTrigger(context.trigger), autocompleter => context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(() => isStartOfWord(editor.dom))(context.range, startText, context.text));\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      const lookupData = Promise.all(map$3(autocompleters, ac => {\n        const fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(results => ({\n          matchText: context.text,\n          items: results,\n          columns: ac.columns,\n          onAction: ac.onAction,\n          highlightOn: ac.highlightOn\n        }));\n      }));\n      return Optional.some({\n        lookupData,\n        context\n      });\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    const fold$1 = (res, onError, onValue) => res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    const partition = results => {\n      const values = [];\n      const errors = [];\n      each$e(results, obj => {\n        fold$1(obj, err => errors.push(err), val => values.push(val));\n      });\n      return {\n        values,\n        errors\n      };\n    };\n    const mapError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    const map = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    const bind$1 = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    const bindError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    const svalue = v => ({\n      stype: SimpleResultType.Value,\n      svalue: v\n    });\n    const serror = e => ({\n      stype: SimpleResultType.Error,\n      serror: e\n    });\n    const toResult = res => fold$1(res, Result.error, Result.value);\n    const fromResult = res => res.fold(serror, svalue);\n    const SimpleResult = {\n      fromResult,\n      toResult,\n      svalue,\n      partition,\n      serror,\n      bind: bind$1,\n      bindError,\n      map,\n      mapError,\n      fold: fold$1\n    };\n\n    const formatObj = input => {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    const formatErrors = errors => {\n      const es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant('... (only showing first ten failures)')\n        }]) : errors;\n      return map$3(es, e => {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    const nu = (path, getErrorInfo) => {\n      return SimpleResult.serror([{\n          path,\n          getErrorInfo\n        }]);\n    };\n    const missingRequired = (path, key, obj) => nu(path, () => 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj));\n    const missingKey = (path, key) => nu(path, () => 'Choice schema did not contain choice key: \"' + key + '\"');\n    const missingBranch = (path, branches, branch) => nu(path, () => 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches));\n    const custom = (path, err) => nu(path, constant(err));\n\n    const chooseFrom = (path, input, branches, ch) => {\n      const fields = get$a(branches, ch);\n      return fields.fold(() => missingBranch(path, branches, ch), vp => vp.extract(path.concat(['branch: ' + ch]), input));\n    };\n    const choose$1 = (key, branches) => {\n      const extract = (path, input) => {\n        const choice = get$a(input, key);\n        return choice.fold(() => missingKey(path, key), chosen => chooseFrom(path, input, branches, chosen));\n      };\n      const toString = () => 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const shallow = (old, nu) => {\n      return nu;\n    };\n    const deep = (old, nu) => {\n      const bothObjects = isPlainObject(old) && isPlainObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    const baseMerge = merger => {\n      return (...objects) => {\n        if (objects.length === 0) {\n          throw new Error(`Can't merge zero objects`);\n        }\n        const ret = {};\n        for (let j = 0; j < objects.length; j++) {\n          const curObject = objects[j];\n          for (const key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    const deepMerge = baseMerge(deep);\n    const merge = baseMerge(shallow);\n\n    const required = () => ({\n      tag: 'required',\n      process: {}\n    });\n    const defaultedThunk = fallbackThunk => ({\n      tag: 'defaultedThunk',\n      process: fallbackThunk\n    });\n    const defaulted$1 = fallback => defaultedThunk(constant(fallback));\n    const asOption = () => ({\n      tag: 'option',\n      process: {}\n    });\n\n    const mergeValues = (values, base) => values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    const mergeErrors = errors => compose(SimpleResult.serror, flatten)(errors);\n    const consolidateObj = (objects, base) => {\n      const partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors(partition.errors) : mergeValues(partition.values, base);\n    };\n    const consolidateArr = objects => {\n      const partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    const ResultCombine = {\n      consolidateObj,\n      consolidateArr\n    };\n\n    const field$1 = (key, newKey, presence, prop) => ({\n      tag: 'field',\n      key,\n      newKey,\n      presence,\n      prop\n    });\n    const customField$1 = (newKey, instantiator) => ({\n      tag: 'custom',\n      newKey,\n      instantiator\n    });\n    const fold = (value, ifField, ifCustom) => {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    const value = validator => {\n      const extract = (path, val) => {\n        return SimpleResult.bindError(validator(val), err => custom(path, err));\n      };\n      const toString = constant('val');\n      return {\n        extract,\n        toString\n      };\n    };\n    const anyValue$1 = value(SimpleResult.svalue);\n\n    const requiredAccess = (path, obj, key, bundle) => get$a(obj, key).fold(() => missingRequired(path, key, obj), bundle);\n    const fallbackAccess = (obj, key, fallback, bundle) => {\n      const v = get$a(obj, key).getOrThunk(() => fallback(obj));\n      return bundle(v);\n    };\n    const optionAccess = (obj, key, bundle) => bundle(get$a(obj, key));\n    const optionDefaultedAccess = (obj, key, fallback, bundle) => {\n      const opt = get$a(obj, key).map(val => val === true ? fallback(obj) : val);\n      return bundle(opt);\n    };\n    const extractField = (field, path, obj, key, prop) => {\n      const bundle = av => prop.extract(path.concat([key]), av);\n      const bundleAsOption = optValue => optValue.fold(() => SimpleResult.svalue(Optional.none()), ov => {\n        const result = prop.extract(path.concat([key]), ov);\n        return SimpleResult.map(result, Optional.some);\n      });\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant({}), v => {\n            const result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    const extractFields = (path, obj, fields) => {\n      const success = {};\n      const errors = [];\n      for (const field of fields) {\n        fold(field, (key, newKey, presence, prop) => {\n          const result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, err => {\n            errors.push(...err);\n          }, res => {\n            success[newKey] = res;\n          });\n        }, (newKey, instantiator) => {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    const objOf = values => {\n      const extract = (path, o) => extractFields(path, o, values);\n      const toString = () => {\n        const fieldStrings = map$3(values, value => fold(value, (key, _okey, _presence, prop) => key + ' -> ' + prop.toString(), (newKey, _instantiator) => 'state(' + newKey + ')'));\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOf = prop => {\n      const extract = (path, array) => {\n        const results = map$3(array, (a, i) => prop.extract(path.concat(['[' + i + ']']), a));\n        return ResultCombine.consolidateArr(results);\n      };\n      const toString = () => 'array(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const valueOf = validator => value(v => validator(v).fold(SimpleResult.serror, SimpleResult.svalue));\n    const extractValue = (label, prop, obj) => {\n      const res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, errs => ({\n        input: obj,\n        errors: errs\n      }));\n    };\n    const asRaw = (label, prop, obj) => SimpleResult.toResult(extractValue(label, prop, obj));\n    const formatError = errInfo => {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    const choose = (key, branches) => choose$1(key, map$2(branches, objOf));\n\n    const anyValue = constant(anyValue$1);\n    const typedValue = (validator, expectedType) => value(a => {\n      const actualType = typeof a;\n      return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror(`Expected type: ${ expectedType } but got: ${ actualType }`);\n    });\n    const number = typedValue(isNumber, 'number');\n    const string = typedValue(isString, 'string');\n    const boolean = typedValue(isBoolean, 'boolean');\n    const functionProcessor = typedValue(isFunction, 'function');\n\n    const field = field$1;\n    const customField = customField$1;\n    const validateEnum = values => valueOf(value => contains$2(values, value) ? Result.value(value) : Result.error(`Unsupported value: \"${ value }\", choose one of \"${ values.join(', ') }\".`));\n    const requiredOf = (key, schema) => field(key, key, required(), schema);\n    const requiredString = key => requiredOf(key, string);\n    const requiredFunction = key => requiredOf(key, functionProcessor);\n    const requiredArrayOf = (key, schema) => field(key, key, required(), arrOf(schema));\n    const optionOf = (key, schema) => field(key, key, asOption(), schema);\n    const optionString = key => optionOf(key, string);\n    const optionFunction = key => optionOf(key, functionProcessor);\n    const defaulted = (key, fallback) => field(key, key, defaulted$1(fallback), anyValue());\n    const defaultedOf = (key, fallback, schema) => field(key, key, defaulted$1(fallback), schema);\n    const defaultedNumber = (key, fallback) => defaultedOf(key, fallback, number);\n    const defaultedString = (key, fallback) => defaultedOf(key, fallback, string);\n    const defaultedStringEnum = (key, fallback, values) => defaultedOf(key, fallback, validateEnum(values));\n    const defaultedBoolean = (key, fallback) => defaultedOf(key, fallback, boolean);\n    const defaultedFunction = (key, fallback) => defaultedOf(key, fallback, functionProcessor);\n    const defaultedArrayOf = (key, fallback, schema) => defaultedOf(key, fallback, arrOf(schema));\n\n    const type = requiredString('type');\n    const fetch$1 = requiredFunction('fetch');\n    const onAction = requiredFunction('onAction');\n    const onSetup = defaultedFunction('onSetup', () => noop);\n    const optionalText = optionString('text');\n    const optionalIcon = optionString('icon');\n    const optionalTooltip = optionString('tooltip');\n    const optionalLabel = optionString('label');\n    const active = defaultedBoolean('active', false);\n    const enabled = defaultedBoolean('enabled', true);\n    const primary = defaultedBoolean('primary', false);\n    const defaultedColumns = num => defaulted('columns', num);\n    const defaultedType = type => defaultedString('type', type);\n\n    const autocompleterSchema = objOf([\n      type,\n      requiredString('trigger'),\n      defaultedNumber('minChars', 1),\n      defaultedColumns(1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      fetch$1,\n      onAction,\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    const createAutocompleter = spec => asRaw('Autocompleter', autocompleterSchema, spec);\n\n    const baseToolbarButtonFields = [\n      enabled,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      onSetup\n    ];\n\n    const baseToolbarToggleButtonFields = [active].concat(baseToolbarButtonFields);\n\n    const contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    const contextButtonFields = baseToolbarButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const launchButtonFields = baseToolbarButtonFields.concat([defaultedType('contextformbutton')]);\n    const launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaultedType('contextformtogglebutton')]);\n    const toggleOrNormal = choose('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    objOf([\n      defaultedType('contextform'),\n      defaultedFunction('initValue', constant('')),\n      optionalLabel,\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n\n    const register$2 = editor => {\n      const popups = editor.ui.registry.getAll().popups;\n      const dataset = map$2(popups, popup => createAutocompleter(popup).fold(err => {\n        throw new Error(formatError(err));\n      }, identity));\n      const triggers = stringArray(mapToArray(dataset, v => v.trigger));\n      const datasetValues = values(dataset);\n      const lookupByTrigger = trigger => filter$5(datasetValues, dv => dv.trigger === trigger);\n      return {\n        dataset,\n        triggers,\n        lookupByTrigger\n      };\n    };\n\n    const setupEditorInput = (editor, api) => {\n      const update = last(api.load, 50);\n      editor.on('input', () => {\n        update.throttle();\n      });\n      editor.on('keydown', e => {\n        const keyCode = e.which;\n        if (keyCode === 8) {\n          update.throttle();\n        } else if (keyCode === 27) {\n          update.cancel();\n          api.cancelIfNecessary();\n        } else if (keyCode === 38 || keyCode === 40) {\n          update.cancel();\n        }\n      }, true);\n      editor.on('remove', update.cancel);\n    };\n    const setup$k = editor => {\n      const activeAutocompleter = value$2();\n      const uiActive = Cell(false);\n      const isActive = activeAutocompleter.isSet;\n      const cancelIfNecessary = () => {\n        if (isActive()) {\n          fireAutocompleterEnd(editor);\n          uiActive.set(false);\n          activeAutocompleter.clear();\n        }\n      };\n      const commenceIfNecessary = context => {\n        if (!isActive()) {\n          activeAutocompleter.set({\n            trigger: context.trigger,\n            matchLength: context.text.length\n          });\n        }\n      };\n      const getAutocompleters = cached(() => register$2(editor));\n      const doLookup = fetchOptions => activeAutocompleter.get().map(ac => getContext(editor.dom, editor.selection.getRng(), ac.trigger, true).bind(newContext => lookupWithContext(editor, getAutocompleters, newContext, fetchOptions))).getOrThunk(() => lookup(editor, getAutocompleters));\n      const load = fetchOptions => {\n        doLookup(fetchOptions).fold(cancelIfNecessary, lookupInfo => {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(lookupData => {\n            activeAutocompleter.get().map(ac => {\n              const context = lookupInfo.context;\n              if (ac.trigger === context.trigger) {\n                if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  activeAutocompleter.set({\n                    ...ac,\n                    matchLength: context.text.length\n                  });\n                  if (uiActive.get()) {\n                    fireAutocompleterUpdateActiveRange(editor, { range: context.range });\n                    fireAutocompleterUpdate(editor, { lookupData });\n                  } else {\n                    uiActive.set(true);\n                    fireAutocompleterUpdateActiveRange(editor, { range: context.range });\n                    fireAutocompleterStart(editor, { lookupData });\n                  }\n                }\n              }\n            });\n          });\n        });\n      };\n      const isRangeInsideOrEqual = (innerRange, outerRange) => {\n        const startComparison = innerRange.compareBoundaryPoints(window.Range.START_TO_START, outerRange);\n        const endComparison = innerRange.compareBoundaryPoints(window.Range.END_TO_END, outerRange);\n        return startComparison >= 0 && endComparison <= 0;\n      };\n      const readActiveRange = () => {\n        return activeAutocompleter.get().bind(({trigger}) => {\n          const selRange = editor.selection.getRng();\n          return getContext(editor.dom, selRange, trigger, uiActive.get()).filter(({range}) => isRangeInsideOrEqual(selRange, range)).map(({range}) => range);\n        });\n      };\n      editor.addCommand('mceAutocompleterReload', (_ui, value) => {\n        const fetchOptions = isObject(value) ? value.fetchOptions : {};\n        load(fetchOptions);\n      });\n      editor.addCommand('mceAutocompleterClose', cancelIfNecessary);\n      editor.addCommand('mceAutocompleterRefreshActiveRange', () => {\n        readActiveRange().each(range => {\n          fireAutocompleterUpdateActiveRange(editor, { range });\n        });\n      });\n      editor.editorCommands.addQueryStateHandler('mceAutoCompleterInRange', () => readActiveRange().isSome());\n      setupEditorInput(editor, {\n        cancelIfNecessary,\n        load\n      });\n    };\n\n    const browser$1 = detect$1().browser;\n    const isSafari = browser$1.isSafari();\n    const emptyNodeContents = node => fillWithPaddingBr(SugarElement.fromDom(node));\n    const isEntireNodeSelected = (rng, node) => {\n      var _a;\n      return rng.startOffset === 0 && rng.endOffset === ((_a = node.textContent) === null || _a === void 0 ? void 0 : _a.length);\n    };\n    const getParentDetailsElementAtPos = (dom, pos) => Optional.from(dom.getParent(pos.container(), 'details'));\n    const isInDetailsElement = (dom, pos) => getParentDetailsElementAtPos(dom, pos).isSome();\n    const getDetailsElements = (dom, rng) => {\n      const startDetails = Optional.from(dom.getParent(rng.startContainer, 'details'));\n      const endDetails = Optional.from(dom.getParent(rng.endContainer, 'details'));\n      if (startDetails.isSome() || endDetails.isSome()) {\n        const startSummary = startDetails.bind(details => Optional.from(dom.select('summary', details)[0]));\n        return Optional.some({\n          startSummary,\n          startDetails,\n          endDetails\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const isCaretInTheBeginningOf = (caretPos, element) => firstPositionIn(element).exists(pos => pos.isEqual(caretPos));\n    const isCaretInTheEndOf = (caretPos, element) => {\n      return lastPositionIn(element).exists(pos => {\n        if (isBr$6(pos.getNode())) {\n          return prevPosition(element, pos).exists(pos2 => pos2.isEqual(caretPos)) || pos.isEqual(caretPos);\n        } else {\n          return pos.isEqual(caretPos);\n        }\n      });\n    };\n    const isCaretAtStartOfSummary = (caretPos, detailsElements) => detailsElements.startSummary.exists(summary => isCaretInTheBeginningOf(caretPos, summary));\n    const isCaretAtEndOfSummary = (caretPos, detailsElements) => detailsElements.startSummary.exists(summary => isCaretInTheEndOf(caretPos, summary));\n    const isCaretInFirstPositionInBody = (caretPos, detailsElements) => detailsElements.startDetails.exists(details => prevPosition(details, caretPos).forall(pos => detailsElements.startSummary.exists(summary => !summary.contains(caretPos.container()) && summary.contains(pos.container()))));\n    const isCaretInLastPositionInBody = (root, caretPos, detailsElements) => detailsElements.startDetails.exists(details => nextPosition(root, caretPos).forall(pos => !details.contains(pos.container())));\n    const setCaretToPosition = (editor, position) => {\n      const node = position.getNode();\n      if (!isUndefined(node)) {\n        editor.selection.setCursorLocation(node, position.offset());\n      }\n    };\n    const moveCaretToDetailsPos = (editor, pos, forward) => {\n      const details = editor.dom.getParent(pos.container(), 'details');\n      if (details && !details.open) {\n        const summary = editor.dom.select('summary', details)[0];\n        if (summary) {\n          const newPos = forward ? firstPositionIn(summary) : lastPositionIn(summary);\n          newPos.each(pos => setCaretToPosition(editor, pos));\n        }\n      } else {\n        setCaretToPosition(editor, pos);\n      }\n    };\n    const isPartialDelete = (rng, detailsElements) => {\n      const containsStart = element => element.contains(rng.startContainer);\n      const containsEnd = element => element.contains(rng.endContainer);\n      const startInSummary = detailsElements.startSummary.exists(containsStart);\n      const endInSummary = detailsElements.startSummary.exists(containsEnd);\n      const isPartiallySelectedDetailsElements = detailsElements.startDetails.forall(startDetails => detailsElements.endDetails.forall(endDetails => startDetails !== endDetails));\n      const isInPartiallySelectedSummary = (startInSummary || endInSummary) && !(startInSummary && endInSummary);\n      return isInPartiallySelectedSummary || isPartiallySelectedDetailsElements;\n    };\n    const shouldPreventDeleteIntoDetails = (editor, forward, granularity) => {\n      const {dom, selection} = editor;\n      const root = editor.getBody();\n      if (granularity === 'character') {\n        const caretPos = CaretPosition.fromRangeStart(selection.getRng());\n        const parentBlock = dom.getParent(caretPos.container(), dom.isBlock);\n        const parentDetailsAtCaret = getParentDetailsElementAtPos(dom, caretPos);\n        const inEmptyParentBlock = parentBlock && dom.isEmpty(parentBlock);\n        const isFirstBlock = isNull(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.previousSibling);\n        const isLastBlock = isNull(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.nextSibling);\n        if (inEmptyParentBlock) {\n          const firstOrLast = forward ? isLastBlock : isFirstBlock;\n          if (firstOrLast) {\n            const isBeforeAfterDetails = navigate(!forward, root, caretPos).exists(pos => {\n              return isInDetailsElement(dom, pos) && !equals(parentDetailsAtCaret, getParentDetailsElementAtPos(dom, pos));\n            });\n            if (isBeforeAfterDetails) {\n              return true;\n            }\n          }\n        }\n        return navigate(forward, root, caretPos).fold(never, pos => {\n          const parentDetailsAtNewPos = getParentDetailsElementAtPos(dom, pos);\n          if (isInDetailsElement(dom, pos) && !equals(parentDetailsAtCaret, parentDetailsAtNewPos)) {\n            if (!forward) {\n              moveCaretToDetailsPos(editor, pos, false);\n            }\n            if (parentBlock && inEmptyParentBlock) {\n              if (forward && isFirstBlock) {\n                return true;\n              } else if (!forward && isLastBlock) {\n                return true;\n              }\n              moveCaretToDetailsPos(editor, pos, forward);\n              editor.dom.remove(parentBlock);\n            }\n            return true;\n          } else {\n            return false;\n          }\n        });\n      } else {\n        return false;\n      }\n    };\n    const shouldPreventDeleteSummaryAction = (editor, detailElements, forward, granularity) => {\n      const selection = editor.selection;\n      const rng = selection.getRng();\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (granularity === 'selection') {\n        return isPartialDelete(rng, detailElements);\n      } else if (forward) {\n        return isCaretAtEndOfSummary(caretPos, detailElements) || isCaretInLastPositionInBody(root, caretPos, detailElements);\n      } else {\n        return isCaretAtStartOfSummary(caretPos, detailElements) || isCaretInFirstPositionInBody(caretPos, detailElements);\n      }\n    };\n    const shouldPreventDeleteAction = (editor, forward, granularity) => getDetailsElements(editor.dom, editor.selection.getRng()).fold(() => shouldPreventDeleteIntoDetails(editor, forward, granularity), detailsElements => shouldPreventDeleteSummaryAction(editor, detailsElements, forward, granularity) || shouldPreventDeleteIntoDetails(editor, forward, granularity));\n    const handleDeleteActionSafari = (editor, forward, granularity) => {\n      const selection = editor.selection;\n      const node = selection.getNode();\n      const rng = selection.getRng();\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      if (isSummary$1(node)) {\n        if (granularity === 'selection' && isEntireNodeSelected(rng, node) || willDeleteLastPositionInElement(forward, caretPos, node)) {\n          emptyNodeContents(node);\n        } else {\n          editor.undoManager.transact(() => {\n            const sel = selection.getSel();\n            let {anchorNode, anchorOffset, focusNode, focusOffset} = sel !== null && sel !== void 0 ? sel : {};\n            const applySelection = () => {\n              if (isNonNullable(anchorNode) && isNonNullable(anchorOffset) && isNonNullable(focusNode) && isNonNullable(focusOffset)) {\n                sel === null || sel === void 0 ? void 0 : sel.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);\n              }\n            };\n            const updateSelection = () => {\n              anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n              anchorOffset = sel === null || sel === void 0 ? void 0 : sel.anchorOffset;\n              focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n              focusOffset = sel === null || sel === void 0 ? void 0 : sel.focusOffset;\n            };\n            const appendAllChildNodes = (from, to) => {\n              each$e(from.childNodes, child => {\n                if (isNode(child)) {\n                  to.appendChild(child);\n                }\n              });\n            };\n            const container = editor.dom.create('span', { 'data-mce-bogus': '1' });\n            appendAllChildNodes(node, container);\n            node.appendChild(container);\n            applySelection();\n            if (granularity === 'word' || granularity === 'line') {\n              sel === null || sel === void 0 ? void 0 : sel.modify('extend', forward ? 'right' : 'left', granularity);\n            }\n            if (!selection.isCollapsed() && isEntireNodeSelected(selection.getRng(), container)) {\n              emptyNodeContents(node);\n            } else {\n              editor.execCommand(forward ? 'ForwardDelete' : 'Delete');\n              updateSelection();\n              appendAllChildNodes(container, node);\n              applySelection();\n            }\n            editor.dom.remove(container);\n          });\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const backspaceDelete = (editor, forward, granularity) => shouldPreventDeleteAction(editor, forward, granularity) || isSafari && handleDeleteActionSafari(editor, forward, granularity) ? Optional.some(noop) : Optional.none();\n\n    const createAndFireInputEvent = eventType => (editor, inputType, specifics = {}) => {\n      const target = editor.getBody();\n      const overrides = {\n        bubbles: true,\n        composed: true,\n        data: null,\n        isComposing: false,\n        detail: 0,\n        view: null,\n        target,\n        currentTarget: target,\n        eventPhase: Event.AT_TARGET,\n        originalTarget: target,\n        explicitOriginalTarget: target,\n        isTrusted: false,\n        srcElement: target,\n        cancelable: false,\n        preventDefault: noop,\n        inputType\n      };\n      const input = clone$3(new InputEvent(eventType));\n      return editor.dispatch(eventType, {\n        ...input,\n        ...overrides,\n        ...specifics\n      });\n    };\n    const fireInputEvent = createAndFireInputEvent('input');\n    const fireBeforeInputEvent = createAndFireInputEvent('beforeinput');\n\n    const platform$2 = detect$1();\n    const os = platform$2.os;\n    const isMacOSOriOS = os.isMacOS() || os.isiOS();\n    const browser = platform$2.browser;\n    const isFirefox = browser.isFirefox();\n    const executeKeydownOverride$3 = (editor, caret, evt) => {\n      const inputType = evt.keyCode === VK.BACKSPACE ? 'deleteContentBackward' : 'deleteContentForward';\n      const isCollapsed = editor.selection.isCollapsed();\n      const unmodifiedGranularity = isCollapsed ? 'character' : 'selection';\n      const getModifiedGranularity = isWord => {\n        if (isCollapsed) {\n          return isWord ? 'word' : 'line';\n        } else {\n          return 'selection';\n        }\n      };\n      executeWithDelayedAction([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$a, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$a, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false, unmodifiedGranularity)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete, editor, true, unmodifiedGranularity)\n        },\n        ...isMacOSOriOS ? [\n          {\n            keyCode: VK.BACKSPACE,\n            altKey: true,\n            action: action(backspaceDelete, editor, false, getModifiedGranularity(true))\n          },\n          {\n            keyCode: VK.DELETE,\n            altKey: true,\n            action: action(backspaceDelete, editor, true, getModifiedGranularity(true))\n          },\n          {\n            keyCode: VK.BACKSPACE,\n            metaKey: true,\n            action: action(backspaceDelete, editor, false, getModifiedGranularity(false))\n          }\n        ] : [\n          {\n            keyCode: VK.BACKSPACE,\n            ctrlKey: true,\n            action: action(backspaceDelete, editor, false, getModifiedGranularity(true))\n          },\n          {\n            keyCode: VK.DELETE,\n            ctrlKey: true,\n            action: action(backspaceDelete, editor, true, getModifiedGranularity(true))\n          }\n        ],\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, true)\n        }\n      ], evt).filter(_ => editor.selection.isEditable()).each(applyAction => {\n        evt.preventDefault();\n        const beforeInput = fireBeforeInputEvent(editor, inputType);\n        if (!beforeInput.isDefaultPrevented()) {\n          applyAction();\n          fireInputEvent(editor, inputType);\n        }\n      });\n    };\n    const executeKeyupOverride = (editor, evt, isBackspaceKeydown) => execute([\n      {\n        keyCode: VK.BACKSPACE,\n        action: action(paddEmptyElement, editor)\n      },\n      {\n        keyCode: VK.DELETE,\n        action: action(paddEmptyElement, editor)\n      },\n      ...isMacOSOriOS ? [\n        {\n          keyCode: VK.BACKSPACE,\n          altKey: true,\n          action: action(refreshCaret, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          altKey: true,\n          action: action(refreshCaret, editor)\n        },\n        ...isBackspaceKeydown ? [{\n            keyCode: isFirefox ? 224 : 91,\n            action: action(refreshCaret, editor)\n          }] : []\n      ] : [\n        {\n          keyCode: VK.BACKSPACE,\n          ctrlKey: true,\n          action: action(refreshCaret, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          ctrlKey: true,\n          action: action(refreshCaret, editor)\n        }\n      ]\n    ], evt);\n    const setup$j = (editor, caret) => {\n      let isBackspaceKeydown = false;\n      editor.on('keydown', evt => {\n        isBackspaceKeydown = evt.keyCode === VK.BACKSPACE;\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeyupOverride(editor, evt, isBackspaceKeydown);\n        }\n        isBackspaceKeydown = false;\n      });\n    };\n\n    const firstNonWhiteSpaceNodeSibling = node => {\n      while (node) {\n        if (isElement$6(node) || isText$b(node) && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n      return null;\n    };\n    const moveToCaretPosition = (editor, root) => {\n      const dom = editor.dom;\n      const moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        const firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      const rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        const walker = new DomTreeWalker(root, root);\n        let lastNode = root;\n        let node;\n        while (node = walker.current()) {\n          if (isText$b(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$6(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    const getEditableRoot = (dom, node) => {\n      const root = dom.getRoot();\n      let editableRoot;\n      let parent = node;\n      while (parent !== root && parent && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    const getParentBlock$1 = editor => {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    const getParentBlockName = editor => {\n      return getParentBlock$1(editor).fold(constant(''), parentBlock => {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    const isListItemParentBlock = editor => {\n      return getParentBlock$1(editor).filter(elm => {\n        return isListItem$1(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n    const emptyBlock = elm => {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    const applyAttributes = (editor, node, forcedRootBlockAttrs) => {\n      const dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(attrStyles => {\n        const currentStyles = getAllRaw(SugarElement.fromDom(node));\n        const newStyles = {\n          ...currentStyles,\n          ...attrStyles\n        };\n        dom.setStyles(node, newStyles);\n      });\n      const attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(attrClasses => attrClasses.split(/\\s+/));\n      const currentClassesOpt = Optional.from(node.className).map(currentClasses => filter$5(currentClasses.split(/\\s+/), clazz => clazz !== ''));\n      lift2(attrClassesOpt, currentClassesOpt, (attrClasses, currentClasses) => {\n        const filteredClasses = filter$5(currentClasses, clazz => !contains$2(attrClasses, clazz));\n        const newClasses = [\n          ...attrClasses,\n          ...filteredClasses\n        ];\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      const appliedAttrs = [\n        'style',\n        'class'\n      ];\n      const remainingAttrs = filter$4(forcedRootBlockAttrs, (_, attrs) => !contains$2(appliedAttrs, attrs));\n      dom.setAttribs(node, remainingAttrs);\n    };\n    const setForcedBlockAttrs = (editor, node) => {\n      const forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        const forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    const createNewBlock = (editor, container, parentBlock, editableRoot, keepStyles = true, name, styles) => {\n      const dom = editor.dom;\n      const schema = editor.schema;\n      const newBlockName = getForcedRootBlock(editor);\n      const parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      let node = container;\n      const textInlineElements = schema.getTextInlineElements();\n      let block;\n      if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n        block = dom.create(name || newBlockName, styles || {});\n      } else {\n        block = parentBlock.cloneNode(false);\n      }\n      let caretNode = block;\n      if (!keepStyles) {\n        dom.setAttrib(block, 'style', null);\n        dom.setAttrib(block, 'class', null);\n      } else {\n        do {\n          if (textInlineElements[node.nodeName]) {\n            if (isCaretNode(node) || isBookmarkNode$1(node)) {\n              continue;\n            }\n            const clonedNode = node.cloneNode(false);\n            dom.setAttrib(clonedNode, 'id', '');\n            if (block.hasChildNodes()) {\n              clonedNode.appendChild(block.firstChild);\n              block.appendChild(clonedNode);\n            } else {\n              caretNode = clonedNode;\n              block.appendChild(clonedNode);\n            }\n          }\n        } while ((node = node.parentNode) && node !== editableRoot);\n      }\n      setForcedBlockAttrs(editor, block);\n      emptyBlock(caretNode);\n      return block;\n    };\n\n    const getDetailsRoot = (editor, element) => editor.dom.getParent(element, isDetails);\n    const isAtDetailsEdge = (root, element, isTextBlock) => {\n      let node = element;\n      while (node && node !== root && isNull(node.nextSibling)) {\n        const parent = node.parentElement;\n        if (!parent || !isTextBlock(parent)) {\n          return isDetails(parent);\n        }\n        node = parent;\n      }\n      return false;\n    };\n    const isLastEmptyBlockInDetails = (editor, shiftKey, element) => !shiftKey && element.nodeName.toLowerCase() === getForcedRootBlock(editor) && editor.dom.isEmpty(element) && isAtDetailsEdge(editor.getBody(), element, el => has$2(editor.schema.getTextBlockElements(), el.nodeName.toLowerCase()));\n    const insertNewLine = (editor, createNewBlock, parentBlock) => {\n      var _a, _b, _c;\n      const newBlock = createNewBlock(getForcedRootBlock(editor));\n      const root = getDetailsRoot(editor, parentBlock);\n      if (!root) {\n        return;\n      }\n      editor.dom.insertAfter(newBlock, root);\n      moveToCaretPosition(editor, newBlock);\n      if (((_c = (_b = (_a = parentBlock.parentElement) === null || _a === void 0 ? void 0 : _a.childNodes) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 1) {\n        editor.dom.remove(parentBlock);\n      }\n    };\n\n    const hasFirstChild = (elm, name) => {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    const isFirstChild = elm => {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    const hasParent = (elm, parentName) => {\n      const parentNode = elm === null || elm === void 0 ? void 0 : elm.parentNode;\n      return isNonNullable(parentNode) && parentNode.nodeName === parentName;\n    };\n    const isListBlock = elm => {\n      return isNonNullable(elm) && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    const isListItem = elm => {\n      return isNonNullable(elm) && /^(LI|DT|DD)$/.test(elm.nodeName);\n    };\n    const isNestedList = elm => {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    const getContainerBlock = containerBlock => {\n      const containerBlockParent = containerBlock.parentNode;\n      return isListItem(containerBlockParent) ? containerBlockParent : containerBlock;\n    };\n    const isFirstOrLastLi = (containerBlock, parentBlock, first) => {\n      let node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$6(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    const getStyles = elm => foldl(mapToArray(getAllRaw(SugarElement.fromDom(elm)), (style, styleName) => `${ styleName }: ${ style };`), (acc, s) => acc + s, '');\n    const insert$4 = (editor, createNewBlock, containerBlock, parentBlock, newBlockName) => {\n      const dom = editor.dom;\n      const rng = editor.selection.getRng();\n      const containerParent = containerBlock.parentNode;\n      if (containerBlock === editor.getBody() || !containerParent) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      const parentBlockStyles = isListItem(parentBlock) ? getStyles(parentBlock) : undefined;\n      let newBlock = isListItem(parentBlock) && parentBlockStyles ? createNewBlock(newBlockName, { style: getStyles(parentBlock) }) : createNewBlock(newBlockName);\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          const containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerParent.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        const tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        const fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          const previousChildren = filter$5(map$3(newBlock.children, SugarElement.fromDom), not(isTag('br')));\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n          each$e(previousChildren, child => prepend(SugarElement.fromDom(newBlock), child));\n          if (parentBlockStyles) {\n            newBlock.setAttribute('style', parentBlockStyles);\n          }\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    const trimZwsp = fragment => {\n      each$e(descendants$1(SugarElement.fromDom(fragment), isText$c), text => {\n        const rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.data);\n      });\n    };\n    const isWithinNonEditableList = (editor, node) => {\n      const parentList = editor.dom.getParent(node, 'ol,ul,dl');\n      return parentList !== null && editor.dom.getContentEditableParent(parentList) === 'false';\n    };\n    const isEmptyAnchor = (dom, elm) => {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    const containerAndSiblingName = (container, nodeName) => {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    const canSplitBlock = (dom, node) => {\n      return isNonNullable(node) && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.isEditable(node.parentNode) && dom.getContentEditable(node) !== 'false';\n    };\n    const trimInlineElementsOnLeftSideOfBlock = (dom, nonEmptyElementsMap, block) => {\n      var _a;\n      const firstChilds = [];\n      if (!block) {\n        return;\n      }\n      let currentNode = block;\n      while (currentNode = currentNode.firstChild) {\n        if (dom.isBlock(currentNode)) {\n          return;\n        }\n        if (isElement$6(currentNode) && !nonEmptyElementsMap[currentNode.nodeName.toLowerCase()]) {\n          firstChilds.push(currentNode);\n        }\n      }\n      let i = firstChilds.length;\n      while (i--) {\n        currentNode = firstChilds[i];\n        if (!currentNode.hasChildNodes() || currentNode.firstChild === currentNode.lastChild && ((_a = currentNode.firstChild) === null || _a === void 0 ? void 0 : _a.nodeValue) === '') {\n          dom.remove(currentNode);\n        } else {\n          if (isEmptyAnchor(dom, currentNode)) {\n            dom.remove(currentNode);\n          }\n        }\n      }\n    };\n    const normalizeZwspOffset = (start, container, offset) => {\n      if (!isText$b(container)) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    const includeZwspInRange = rng => {\n      const newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    const trimLeadingLineBreaks = node => {\n      let currentNode = node;\n      do {\n        if (isText$b(currentNode)) {\n          currentNode.data = currentNode.data.replace(/^[\\r\\n]+/, '');\n        }\n        currentNode = currentNode.firstChild;\n      } while (currentNode);\n    };\n    const wrapSelfAndSiblingsInDefaultBlock = (editor, newBlockName, rng, container, offset) => {\n      var _a, _b;\n      const dom = editor.dom;\n      const editableRoot = (_a = getEditableRoot(dom, container)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      let parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (!parentBlock.hasChildNodes()) {\n          const newBlock = dom.create(newBlockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        let node = container;\n        while (node && node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        let startNode;\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        const startNodeName = (_b = startNode === null || startNode === void 0 ? void 0 : startNode.parentElement) === null || _b === void 0 ? void 0 : _b.nodeName;\n        if (startNode && startNodeName && editor.schema.isValidChild(startNodeName, newBlockName.toLowerCase())) {\n          const startNodeParent = startNode.parentNode;\n          const newBlock = dom.create(newBlockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNodeParent.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            const next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    const addBrToBlockIfNeeded = (dom, block) => {\n      block.normalize();\n      const lastChild = block.lastChild;\n      if (!lastChild || isElement$6(lastChild) && /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    const shouldEndContainer = (editor, container) => {\n      const optionValue = shouldEndContainerOnEmptyBlock(editor);\n      if (isNullable(container)) {\n        return false;\n      } else if (isString(optionValue)) {\n        return contains$2(Tools.explode(optionValue), container.nodeName.toLowerCase());\n      } else {\n        return optionValue;\n      }\n    };\n    const insert$3 = (editor, evt) => {\n      let container;\n      let offset;\n      let parentBlockName;\n      let containerBlock;\n      let isAfterLastNodeInContainer = false;\n      const dom = editor.dom;\n      const schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      const rng = editor.selection.getRng();\n      const newBlockName = getForcedRootBlock(editor);\n      const start = SugarElement.fromDom(rng.startContainer);\n      const child = child$1(start, rng.startOffset);\n      const isCef = child.exists(element => isHTMLElement$1(element) && !isEditable$2(element));\n      const collapsedAndCef = rng.collapsed && isCef;\n      const createNewBlock$1 = (name, styles) => {\n        return createNewBlock(editor, container, parentBlock, editableRoot, shouldKeepStyles(editor), name, styles);\n      };\n      const isCaretAtStartOrEndOfBlock = start => {\n        const normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$b(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.data.length)) {\n          return false;\n        }\n        if ((container.parentNode === parentBlock || container === parentBlock) && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$6(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        const walker = new DomTreeWalker(container, parentBlock);\n        if (isText$b(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.data.length) {\n            walker.next();\n          }\n        }\n        let node;\n        while (node = walker.current()) {\n          if (isElement$6(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              const name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$b(node) && !isWhitespaceText(node.data)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      const insertNewBlockAfter = () => {\n        let block;\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          block = createNewBlock$1(newBlockName);\n        } else {\n          block = createNewBlock$1();\n        }\n        if (shouldEndContainer(editor, containerBlock) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock, undefined, { includeZwsp: true })) {\n          block = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(block, parentBlock);\n        }\n        moveToCaretPosition(editor, block);\n        return block;\n      };\n      normalize$2(dom, rng).each(normRng => {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      const shiftKey = !!(evt && evt.shiftKey);\n      const ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$6(container) && container.hasChildNodes() && !collapsedAndCef) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$b(container)) {\n          offset = container.data.length;\n        } else {\n          offset = 0;\n        }\n      }\n      const editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot || isWithinNonEditableList(editor, container)) {\n        return;\n      }\n      if (!shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      let parentBlock = dom.getParent(container, dom.isBlock) || dom.getRoot();\n      containerBlock = isNonNullable(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.parentNode) ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      const containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        const liBlock = containerBlock;\n        parentBlock = liBlock;\n        containerBlock = liBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (isElement$6(containerBlock) && isLastEmptyBlockInDetails(editor, shiftKey, parentBlock)) {\n        return insertNewLine(editor, createNewBlock$1, parentBlock);\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName) && isElement$6(containerBlock)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$4(editor, createNewBlock$1, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (!collapsedAndCef && (parentBlock === editor.getBody() || !canSplitBlock(dom, parentBlock))) {\n        return;\n      }\n      const parentBlockParent = parentBlock.parentNode;\n      let newBlock;\n      if (collapsedAndCef) {\n        newBlock = createNewBlock$1(newBlockName);\n        child.fold(() => {\n          append$1(start, SugarElement.fromDom(newBlock));\n        }, child => {\n          before$3(child, SugarElement.fromDom(newBlock));\n        });\n        editor.selection.setCursorLocation(newBlock, 0);\n      } else if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock(false)) {\n        newBlock = insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true) && parentBlockParent) {\n        newBlock = parentBlockParent.insertBefore(createNewBlock$1(), parentBlock);\n        const isNearChildren = hasChildNodes(SugarElement.fromDom(rng.startContainer)) && rng.collapsed;\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') || isNearChildren ? newBlock : parentBlock);\n      } else {\n        const tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        const fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.dispatch('NewBlock', { newBlock });\n    };\n    const fakeEventName$1 = 'insertParagraph';\n    const blockbreak = {\n      insert: insert$3,\n      fakeEventName: fakeEventName$1\n    };\n\n    const hasRightSideContent = (schema, container, parentBlock) => {\n      const walker = new DomTreeWalker(container, parentBlock);\n      let node;\n      const nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || isText$b(node) && node.length > 0) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const moveSelectionToBr = (editor, brElm, extraBr) => {\n      const rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    const insertBrAtCaret = (editor, evt) => {\n      const selection = editor.selection;\n      const dom = editor.dom;\n      const rng = selection.getRng();\n      let brElm;\n      let extraBr = false;\n      normalize$2(dom, rng).each(normRng => {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      let offset = rng.startOffset;\n      let container = rng.startContainer;\n      if (isElement$6(container) && container.hasChildNodes()) {\n        const isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$b(container)) {\n          offset = container.data.length;\n        } else {\n          offset = 0;\n        }\n      }\n      let parentBlock = dom.getParent(container, dom.isBlock);\n      const containerBlock = parentBlock && parentBlock.parentNode ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      const containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      const isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (isText$b(container) && offset >= container.data.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock || dom.getRoot())) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    const insertBrBefore = (editor, inline) => {\n      const br = SugarElement.fromTag('br');\n      before$3(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    const insertBrAfter = (editor, inline) => {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$4(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      const br = SugarElement.fromTag('br');\n      after$4(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    const isBeforeBr = pos => {\n      return isBr$6(pos.getNode());\n    };\n    const hasBrAfter = (rootNode, startNode) => {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(pos => {\n          return isBr$6(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    const isAnchorLink = elm => {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    const isInsideAnchor = location => {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    const readInlineAnchorLocation = editor => {\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    const insertBrOutsideAnchor = (editor, location) => {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    const insert$2 = (editor, evt) => {\n      const anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    const fakeEventName = 'insertLineBreak';\n    const linebreak = {\n      insert: insert$2,\n      fakeEventName\n    };\n\n    const matchesSelector = (editor, selector) => {\n      return getParentBlock$1(editor).filter(parentBlock => {\n        return selector.length > 0 && is$1(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    const shouldInsertBr = editor => {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    const shouldBlockNewLine$1 = editor => {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    const newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    const shouldBlockNewLine = (editor, _shiftKey) => {\n      return shouldBlockNewLine$1(editor);\n    };\n    const inListBlock = requiredState => {\n      return (editor, _shiftKey) => {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    const inBlock = (blockName, requiredState) => (editor, _shiftKey) => {\n      const state = getParentBlockName(editor) === blockName.toUpperCase();\n      return state === requiredState;\n    };\n    const inCefBlock = editor => {\n      const editableRoot = getEditableRoot(editor.dom, editor.selection.getStart());\n      return isNullable(editableRoot);\n    };\n    const inPreBlock = requiredState => inBlock('pre', requiredState);\n    const inSummaryBlock = () => inBlock('summary', true);\n    const shouldPutBrInPre = requiredState => {\n      return (editor, _shiftKey) => {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    const inBrContext = (editor, _shiftKey) => {\n      return shouldInsertBr(editor);\n    };\n    const hasShiftKey = (_editor, shiftKey) => {\n      return shiftKey;\n    };\n    const canInsertIntoEditableRoot = editor => {\n      const forcedRootBlock = getForcedRootBlock(editor);\n      const rootEditable = getEditableRoot(editor.dom, editor.selection.getStart());\n      return isNonNullable(rootEditable) && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock);\n    };\n    const isInRootWithEmptyOrCEF = editor => {\n      const rng = editor.selection.getRng();\n      const start = SugarElement.fromDom(rng.startContainer);\n      const child = child$1(start, rng.startOffset);\n      const isCefOpt = child.map(element => isHTMLElement$1(element) && !isEditable$2(element));\n      return rng.collapsed && isCefOpt.getOr(true);\n    };\n    const match = (predicates, action) => {\n      return (editor, shiftKey) => {\n        const isMatch = foldl(predicates, (res, p) => {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    const getAction = (editor, evt) => {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([\n          inPreBlock(true),\n          inCefBlock\n        ], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([inBrContext], newLineAction.br()),\n        match([hasShiftKey], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block()),\n        match([isInRootWithEmptyOrCEF], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    const insertBreak = (breakType, editor, evt) => {\n      if (!editor.selection.isCollapsed()) {\n        execEditorDeleteCommand(editor);\n      }\n      if (isNonNullable(evt)) {\n        const event = fireBeforeInputEvent(editor, breakType.fakeEventName);\n        if (event.isDefaultPrevented()) {\n          return;\n        }\n      }\n      breakType.insert(editor, evt);\n      if (isNonNullable(evt)) {\n        fireInputEvent(editor, breakType.fakeEventName);\n      }\n    };\n    const insert$1 = (editor, evt) => {\n      const br = () => insertBreak(linebreak, editor, evt);\n      const block = () => insertBreak(blockbreak, editor, evt);\n      const logicalAction = getAction(editor, evt);\n      switch (getNewlineBehavior(editor)) {\n      case 'linebreak':\n        logicalAction.fold(br, br, noop);\n        break;\n      case 'block':\n        logicalAction.fold(block, block, noop);\n        break;\n      case 'invert':\n        logicalAction.fold(block, br, noop);\n        break;\n      default:\n        logicalAction.fold(br, block, noop);\n        break;\n      }\n    };\n\n    const platform$1 = detect$1();\n    const isIOSSafari = platform$1.os.isiOS() && platform$1.browser.isSafari();\n    const handleEnterKeyEvent = (editor, event) => {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(() => {\n        insert$1(editor, event);\n      });\n    };\n    const isCaretAfterKoreanCharacter = rng => {\n      if (!rng.collapsed) {\n        return false;\n      }\n      const startContainer = rng.startContainer;\n      if (isText$b(startContainer)) {\n        const koreanCharRegex = /^[\\uAC00-\\uD7AF\\u1100-\\u11FF\\u3130-\\u318F\\uA960-\\uA97F\\uD7B0-\\uD7FF]$/;\n        const char = startContainer.data.charAt(rng.startOffset - 1);\n        return koreanCharRegex.test(char);\n      } else {\n        return false;\n      }\n    };\n    const setup$i = editor => {\n      let iOSSafariKeydownBookmark = Optional.none();\n      const iOSSafariKeydownOverride = editor => {\n        iOSSafariKeydownBookmark = Optional.some(editor.selection.getBookmark());\n        editor.undoManager.add();\n      };\n      const iOSSafariKeyupOverride = (editor, event) => {\n        editor.undoManager.undo();\n        iOSSafariKeydownBookmark.fold(noop, b => editor.selection.moveToBookmark(b));\n        handleEnterKeyEvent(editor, event);\n        iOSSafariKeydownBookmark = Optional.none();\n      };\n      editor.on('keydown', event => {\n        if (event.keyCode === VK.ENTER) {\n          if (isIOSSafari && isCaretAfterKoreanCharacter(editor.selection.getRng())) {\n            iOSSafariKeydownOverride(editor);\n          } else {\n            handleEnterKeyEvent(editor, event);\n          }\n        }\n      });\n      editor.on('keyup', event => {\n        if (event.keyCode === VK.ENTER) {\n          iOSSafariKeydownBookmark.each(() => iOSSafariKeyupOverride(editor, event));\n        }\n      });\n    };\n\n    const executeKeydownOverride$2 = (editor, caret, evt) => {\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        ...!isMac ? [\n          {\n            keyCode: VK.HOME,\n            action: action(selectToEndPoint, editor, false),\n            ctrlKey: true,\n            shiftKey: true\n          },\n          {\n            keyCode: VK.END,\n            action: action(selectToEndPoint, editor, true),\n            ctrlKey: true,\n            shiftKey: true\n          }\n        ] : [],\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$h = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n    };\n\n    const setup$g = editor => {\n      editor.on('input', e => {\n        if (!e.isComposing) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    const platform = detect$1();\n    const executeKeyupAction = (editor, caret, evt) => {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    const stopImmediatePropagation = e => e.stopImmediatePropagation();\n    const isPageUpDown = evt => evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    const setNodeChangeBlocker = (blocked, editor, block) => {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    const setup$f = (editor, caret) => {\n      if (platform.os.isMacOS()) {\n        return;\n      }\n      const blocked = Cell(false);\n      editor.on('keydown', evt => {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    const setup$e = editor => {\n      editor.on('beforeinput', e => {\n        if (!editor.selection.isEditable() || exists(e.getTargetRanges(), rng => !isEditableRange(editor.dom, rng))) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    const insertTextAtPosition = (text, pos) => {\n      const container = pos.container();\n      const offset = pos.offset();\n      if (isText$b(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(elm => {\n          const textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$4(elm, textNode);\n          } else {\n            before$3(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    const insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    const insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    const insertSpaceOrNbspAtPosition = (root, pos, schema) => needsToHaveNbsp(root, pos, schema) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n    const locationToCaretPosition = root => location => location.fold(element => prevPosition(root.dom, CaretPosition.before(element)), element => firstPositionIn(element), element => lastPositionIn(element), element => nextPosition(root.dom, CaretPosition.after(element)));\n    const insertInlineBoundarySpaceOrNbsp = (root, pos, schema) => checkPos => needsToHaveNbsp(root, checkPos, schema) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n    const setSelection = editor => pos => {\n      editor.selection.setRng(pos.toRange());\n      editor.nodeChanged();\n    };\n    const isInsideSummary = (domUtils, node) => domUtils.isEditable(domUtils.getParent(node, 'summary'));\n    const insertSpaceOrNbspAtSelection = editor => {\n      const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      const root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        const isInlineTarget$1 = curry(isInlineTarget, editor);\n        const caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).map(checkPos => () => insertInlineBoundarySpaceOrNbsp(root, pos, editor.schema)(checkPos).each(setSelection(editor)));\n      } else {\n        return Optional.none();\n      }\n    };\n    const insertSpaceInSummaryAtSelectionOnFirefox = editor => {\n      const insertSpaceThunk = () => {\n        const root = SugarElement.fromDom(editor.getBody());\n        if (!editor.selection.isCollapsed()) {\n          editor.getDoc().execCommand('Delete');\n        }\n        const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        insertSpaceOrNbspAtPosition(root, pos, editor.schema).each(setSelection(editor));\n      };\n      return someIf(Env.browser.isFirefox() && editor.selection.isEditable() && isInsideSummary(editor.dom, editor.selection.getRng().startContainer), insertSpaceThunk);\n    };\n\n    const executeKeydownOverride$1 = (editor, evt) => {\n      executeWithDelayedAction([\n        {\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        },\n        {\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceInSummaryAtSelectionOnFirefox, editor)\n        }\n      ], evt).each(applyAction => {\n        evt.preventDefault();\n        const event = fireBeforeInputEvent(editor, 'insertText', { data: ' ' });\n        if (!event.isDefaultPrevented()) {\n          applyAction();\n          fireInputEvent(editor, 'insertText', { data: ' ' });\n        }\n      });\n    };\n    const setup$d = editor => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$1(editor, evt);\n        }\n      });\n    };\n\n    const tableTabNavigation = editor => {\n      if (hasTableTabNavigation(editor)) {\n        return [\n          {\n            keyCode: VK.TAB,\n            action: action(handleTab, editor, true)\n          },\n          {\n            keyCode: VK.TAB,\n            shiftKey: true,\n            action: action(handleTab, editor, false)\n          }\n        ];\n      } else {\n        return [];\n      }\n    };\n    const executeKeydownOverride = (editor, evt) => {\n      execute([...tableTabNavigation(editor)], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$c = editor => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    const setup$b = editor => {\n      editor.addShortcut('Meta+P', '', 'mcePrint');\n      setup$k(editor);\n      if (isRtc(editor)) {\n        return Cell(null);\n      } else {\n        const caret = setupSelectedState(editor);\n        setup$e(editor);\n        setup$m(editor);\n        setup$l(editor, caret);\n        setup$j(editor, caret);\n        setup$i(editor);\n        setup$d(editor);\n        setup$g(editor);\n        setup$c(editor);\n        setup$h(editor, caret);\n        setup$f(editor, caret);\n        return caret;\n      }\n    };\n\n    class NodeChange {\n      constructor(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        let lastRng;\n        const self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', e => {\n            const nativeRng = editor.selection.getRng();\n            const fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.dispatch('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', () => {\n          store(editor);\n          editor.dispatch('SelectionChange');\n        });\n        editor.on('SelectionChange', () => {\n          const startElm = editor.selection.getStart(true);\n          if (!startElm) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', e => {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, () => {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      nodeChanged(args = {}) {\n        const selection = this.editor.selection;\n        let node;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          const root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          const parents = [];\n          this.editor.dom.getParent(node, node => {\n            if (node === root) {\n              return true;\n            } else {\n              parents.push(node);\n              return false;\n            }\n          });\n          this.editor.dispatch('NodeChange', {\n            ...args,\n            element: node,\n            parents\n          });\n        }\n      }\n      isSameElementPath(startElm) {\n        let i;\n        const editor = this.editor;\n        const currentPath = reverse(editor.dom.getParents(startElm, always, editor.getBody()));\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      }\n    }\n\n    const imageId = generate$1('image');\n    const getDragImage = transfer => {\n      const dt = transfer;\n      return Optional.from(dt[imageId]);\n    };\n    const setDragImage = (transfer, imageData) => {\n      const dt = transfer;\n      dt[imageId] = imageData;\n    };\n\n    const eventId = generate$1('event');\n    const getEvent = transfer => {\n      const dt = transfer;\n      return Optional.from(dt[eventId]);\n    };\n    const mkSetEventFn = type => transfer => {\n      const dt = transfer;\n      dt[eventId] = type;\n    };\n    const setEvent = (transfer, type) => mkSetEventFn(type)(transfer);\n    const setDragstartEvent = mkSetEventFn(0);\n    const setDropEvent = mkSetEventFn(2);\n    const setDragendEvent = mkSetEventFn(1);\n    const checkEvent = expectedType => transfer => {\n      const dt = transfer;\n      return Optional.from(dt[eventId]).exists(type => type === expectedType);\n    };\n    const isInDragStartEvent = checkEvent(0);\n\n    const createEmptyFileList = () => Object.freeze({\n      length: 0,\n      item: _ => null\n    });\n\n    const modeId = generate$1('mode');\n    const getMode = transfer => {\n      const dt = transfer;\n      return Optional.from(dt[modeId]);\n    };\n    const mkSetModeFn = mode => transfer => {\n      const dt = transfer;\n      dt[modeId] = mode;\n    };\n    const setMode$1 = (transfer, mode) => mkSetModeFn(mode)(transfer);\n    const setReadWriteMode = mkSetModeFn(0);\n    const setReadOnlyMode = mkSetModeFn(2);\n    const setProtectedMode = mkSetModeFn(1);\n    const checkMode = expectedMode => transfer => {\n      const dt = transfer;\n      return Optional.from(dt[modeId]).exists(mode => mode === expectedMode);\n    };\n    const isInReadWriteMode = checkMode(0);\n    const isInProtectedMode = checkMode(1);\n\n    const normalizeItems = (dataTransfer, itemsImpl) => ({\n      ...itemsImpl,\n      get length() {\n        return itemsImpl.length;\n      },\n      add: (data, type) => {\n        if (isInReadWriteMode(dataTransfer)) {\n          if (isString(data)) {\n            if (!isUndefined(type)) {\n              return itemsImpl.add(data, type);\n            }\n          } else {\n            return itemsImpl.add(data);\n          }\n        }\n        return null;\n      },\n      remove: idx => {\n        if (isInReadWriteMode(dataTransfer)) {\n          itemsImpl.remove(idx);\n        }\n      },\n      clear: () => {\n        if (isInReadWriteMode(dataTransfer)) {\n          itemsImpl.clear();\n        }\n      }\n    });\n\n    const validDropEffects = [\n      'none',\n      'copy',\n      'link',\n      'move'\n    ];\n    const validEffectAlloweds = [\n      'none',\n      'copy',\n      'copyLink',\n      'copyMove',\n      'link',\n      'linkMove',\n      'move',\n      'all',\n      'uninitialized'\n    ];\n    const createDataTransfer = () => {\n      const dataTransferImpl = new window.DataTransfer();\n      let dropEffect = 'move';\n      let effectAllowed = 'all';\n      const dataTransfer = {\n        get dropEffect() {\n          return dropEffect;\n        },\n        set dropEffect(effect) {\n          if (contains$2(validDropEffects, effect)) {\n            dropEffect = effect;\n          }\n        },\n        get effectAllowed() {\n          return effectAllowed;\n        },\n        set effectAllowed(allowed) {\n          if (isInDragStartEvent(dataTransfer) && contains$2(validEffectAlloweds, allowed)) {\n            effectAllowed = allowed;\n          }\n        },\n        get items() {\n          return normalizeItems(dataTransfer, dataTransferImpl.items);\n        },\n        get files() {\n          if (isInProtectedMode(dataTransfer)) {\n            return createEmptyFileList();\n          } else {\n            return dataTransferImpl.files;\n          }\n        },\n        get types() {\n          return dataTransferImpl.types;\n        },\n        setDragImage: (image, x, y) => {\n          if (isInReadWriteMode(dataTransfer)) {\n            setDragImage(dataTransfer, {\n              image,\n              x,\n              y\n            });\n            dataTransferImpl.setDragImage(image, x, y);\n          }\n        },\n        getData: format => {\n          if (isInProtectedMode(dataTransfer)) {\n            return '';\n          } else {\n            return dataTransferImpl.getData(format);\n          }\n        },\n        setData: (format, data) => {\n          if (isInReadWriteMode(dataTransfer)) {\n            dataTransferImpl.setData(format, data);\n          }\n        },\n        clearData: format => {\n          if (isInReadWriteMode(dataTransfer)) {\n            dataTransferImpl.clearData(format);\n          }\n        }\n      };\n      setReadWriteMode(dataTransfer);\n      return dataTransfer;\n    };\n    const cloneDataTransfer = original => {\n      const clone = createDataTransfer();\n      const originalMode = getMode(original);\n      setReadOnlyMode(original);\n      setDragstartEvent(clone);\n      clone.dropEffect = original.dropEffect;\n      clone.effectAllowed = original.effectAllowed;\n      getDragImage(original).each(imageData => clone.setDragImage(imageData.image, imageData.x, imageData.y));\n      each$e(original.types, type => {\n        if (type !== 'Files') {\n          clone.setData(type, original.getData(type));\n        }\n      });\n      each$e(original.files, file => clone.items.add(file));\n      getEvent(original).each(type => {\n        setEvent(clone, type);\n      });\n      originalMode.each(mode => {\n        setMode$1(original, mode);\n        setMode$1(clone, mode);\n      });\n      return clone;\n    };\n\n    const getHtmlData = dataTransfer => {\n      const html = dataTransfer.getData('text/html');\n      return html === '' ? Optional.none() : Optional.some(html);\n    };\n    const setHtmlData = (dataTransfer, html) => dataTransfer.setData('text/html', html);\n\n    const internalMimeType = 'x-tinymce/html';\n    const internalHtmlMime = constant(internalMimeType);\n    const internalMark = '<!-- ' + internalMimeType + ' -->';\n    const mark = html => internalMark + html;\n    const unmark = html => html.replace(internalMark, '');\n    const isMarked = html => html.indexOf(internalMark) !== -1;\n\n    const isPlainText = text => {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    const openContainer = (rootTag, rootAttrs) => {\n      let tag = '<' + rootTag;\n      const attrs = mapToArray(rootAttrs, (value, key) => key + '=\"' + Entities.encodeAllRaw(value) + '\"');\n      if (attrs.length) {\n        tag += ' ' + attrs.join(' ');\n      }\n      return tag + '>';\n    };\n    const toBlockElements = (text, rootTag, rootAttrs) => {\n      const blocks = text.split(/\\n\\n/);\n      const tagOpen = openContainer(rootTag, rootAttrs);\n      const tagClose = '</' + rootTag + '>';\n      const paragraphs = map$3(blocks, p => {\n        return p.split(/\\n/).join('<br />');\n      });\n      const stitch = p => {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : map$3(paragraphs, stitch).join('');\n    };\n\n    const pasteBinDefaultContent = '%MCEPASTEBIN%';\n    const create$6 = (editor, lastRngCell) => {\n      const {dom, selection} = editor;\n      const body = editor.getBody();\n      lastRngCell.set(selection.getRng());\n      const pasteBinElm = dom.add(editor.getBody(), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (Env.browser.isFirefox()) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', e => {\n        e.stopPropagation();\n      });\n      pasteBinElm.focus();\n      selection.select(pasteBinElm, true);\n    };\n    const remove = (editor, lastRngCell) => {\n      const dom = editor.dom;\n      if (getEl(editor)) {\n        let pasteBinClone;\n        const lastRng = lastRngCell.get();\n        while (pasteBinClone = getEl(editor)) {\n          dom.remove(pasteBinClone);\n          dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    const getEl = editor => editor.dom.get('mcepastebin');\n    const isPasteBin = elm => isNonNullable(elm) && elm.id === 'mcepastebin';\n    const getHtml = editor => {\n      const dom = editor.dom;\n      const copyAndRemove = (toElm, fromElm) => {\n        toElm.appendChild(fromElm);\n        dom.remove(fromElm, true);\n      };\n      const [pasteBinElm, ...pasteBinClones] = filter$5(editor.getBody().childNodes, isPasteBin);\n      each$e(pasteBinClones, pasteBinClone => {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      const dirtyWrappers = dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (let i = dirtyWrappers.length - 1; i >= 0; i--) {\n        const cleanWrapper = dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    const isDefaultPasteBinContent = content => content === pasteBinDefaultContent;\n    const PasteBin = editor => {\n      const lastRng = Cell(null);\n      return {\n        create: () => create$6(editor, lastRng),\n        remove: () => remove(editor, lastRng),\n        getEl: () => getEl(editor),\n        getHtml: () => getHtml(editor),\n        getLastRng: lastRng.get\n      };\n    };\n\n    const filter$1 = (content, items) => {\n      Tools.each(items, v => {\n        if (is$4(v, RegExp)) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    };\n    const innerText = html => {\n      const schema = Schema();\n      const domParser = DomParser({}, schema);\n      let text = '';\n      const voidElements = schema.getVoidElements();\n      const ignoreElements = Tools.makeMap('script noscript style textarea video audio iframe object', ' ');\n      const blockElements = schema.getBlockElements();\n      const walk = node => {\n        const name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (voidElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!(node.name in schema.getVoidElements())) {\n          let currentNode = node.firstChild;\n          if (currentNode) {\n            do {\n              walk(currentNode);\n            } while (currentNode = currentNode.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      };\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    };\n    const trimHtml = html => {\n      const trimSpaces = (all, s1, s2) => {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      };\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    };\n    const createIdGenerator = prefix => {\n      let count = 0;\n      return () => {\n        return prefix + count++;\n      };\n    };\n    const getImageMimeType = ext => {\n      const lowerExt = ext.toLowerCase();\n      const mimeOverrides = {\n        jpg: 'jpeg',\n        jpe: 'jpeg',\n        jfi: 'jpeg',\n        jif: 'jpeg',\n        jfif: 'jpeg',\n        pjpeg: 'jpeg',\n        pjp: 'jpeg',\n        svg: 'svg+xml'\n      };\n      return Tools.hasOwn(mimeOverrides, lowerExt) ? 'image/' + mimeOverrides[lowerExt] : 'image/' + lowerExt;\n    };\n\n    const preProcess = (editor, html) => {\n      const parser = DomParser({\n        sanitize: shouldSanitizeXss(editor),\n        sandbox_iframes: shouldSandboxIframes(editor),\n        sandbox_iframes_exclusions: getSandboxIframesExclusions(editor),\n        convert_unsafe_embeds: shouldConvertUnsafeEmbeds(editor)\n      }, editor.schema);\n      parser.addNodeFilter('meta', nodes => {\n        Tools.each(nodes, node => {\n          node.remove();\n        });\n      });\n      const fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return HtmlSerializer({ validate: true }, editor.schema).serialize(fragment);\n    };\n    const processResult = (content, cancelled) => ({\n      content,\n      cancelled\n    });\n    const postProcessFilter = (editor, html, internal) => {\n      const tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      const postProcessArgs = firePastePostProcess(editor, tempBody, internal);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    const filterContent = (editor, content, internal) => {\n      const preProcessArgs = firePastePreProcess(editor, content, internal);\n      const filteredContent = preProcess(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    const process = (editor, html, internal) => {\n      return filterContent(editor, html, internal);\n    };\n\n    const pasteHtml$1 = (editor, html) => {\n      editor.insertContent(html, {\n        merge: shouldPasteMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    const isAbsoluteUrl = url => /^https?:\\/\\/[\\w\\-\\/+=.,!;:&%@^~(){}?#]+$/i.test(url);\n    const isImageUrl = (editor, url) => {\n      return isAbsoluteUrl(url) && exists(getAllowedImageFileTypes(editor), type => endsWith(url.toLowerCase(), `.${ type.toLowerCase() }`));\n    };\n    const createImage = (editor, url, pasteHtmlFn) => {\n      editor.undoManager.extra(() => {\n        pasteHtmlFn(editor, url);\n      }, () => {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    const createLink = (editor, url, pasteHtmlFn) => {\n      editor.undoManager.extra(() => {\n        pasteHtmlFn(editor, url);\n      }, () => {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    const linkSelection = (editor, html, pasteHtmlFn) => !editor.selection.isCollapsed() && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    const insertImage = (editor, html, pasteHtmlFn) => isImageUrl(editor, html) ? createImage(editor, html, pasteHtmlFn) : false;\n    const smartInsertContent = (editor, html) => {\n      Tools.each([\n        linkSelection,\n        insertImage,\n        pasteHtml$1\n      ], action => {\n        return !action(editor, html, pasteHtml$1);\n      });\n    };\n    const insertContent = (editor, html, pasteAsText) => {\n      if (pasteAsText || !isSmartPasteEnabled(editor)) {\n        pasteHtml$1(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    const uniqueId = createIdGenerator('mceclip');\n    const createPasteDataTransfer = html => {\n      const dataTransfer = createDataTransfer();\n      setHtmlData(dataTransfer, html);\n      setReadOnlyMode(dataTransfer);\n      return dataTransfer;\n    };\n    const doPaste = (editor, content, internal, pasteAsText, shouldSimulateInputEvent) => {\n      const res = process(editor, content, internal);\n      if (!res.cancelled) {\n        const content = res.content;\n        const doPasteAction = () => insertContent(editor, content, pasteAsText);\n        if (shouldSimulateInputEvent) {\n          const args = fireBeforeInputEvent(editor, 'insertFromPaste', { dataTransfer: createPasteDataTransfer(content) });\n          if (!args.isDefaultPrevented()) {\n            doPasteAction();\n            fireInputEvent(editor, 'insertFromPaste');\n          }\n        } else {\n          doPasteAction();\n        }\n      }\n    };\n    const pasteHtml = (editor, html, internalFlag, shouldSimulateInputEvent) => {\n      const internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false, shouldSimulateInputEvent);\n    };\n    const pasteText = (editor, text, shouldSimulateInputEvent) => {\n      const encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      const normalizedText = normalize$4(encodedText, getPasteTabSpaces(editor));\n      const html = toBlockElements(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true, shouldSimulateInputEvent);\n    };\n    const getDataTransferItems = dataTransfer => {\n      const items = {};\n      if (dataTransfer && dataTransfer.types) {\n        for (let i = 0; i < dataTransfer.types.length; i++) {\n          const contentType = dataTransfer.types[i];\n          try {\n            items[contentType] = dataTransfer.getData(contentType);\n          } catch (ex) {\n            items[contentType] = '';\n          }\n        }\n      }\n      return items;\n    };\n    const hasContentType = (clipboardContent, mimeType) => mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    const hasHtmlOrText = content => hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    const extractFilename = (editor, str) => {\n      const m = str.match(/([\\s\\S]+?)(?:\\.[a-z0-9.]+)$/i);\n      return isNonNullable(m) ? editor.dom.encode(m[1]) : undefined;\n    };\n    const createBlobInfo = (editor, blobCache, file, base64) => {\n      const id = uniqueId();\n      const useFileName = shouldReuseFileName(editor) && isNonNullable(file.name);\n      const name = useFileName ? extractFilename(editor, file.name) : id;\n      const filename = useFileName ? file.name : undefined;\n      const blobInfo = blobCache.create(id, file, base64, name, filename);\n      blobCache.add(blobInfo);\n      return blobInfo;\n    };\n    const pasteImage = (editor, imageItem) => {\n      parseDataUri(imageItem.uri).each(({data, type, base64Encoded}) => {\n        const base64 = base64Encoded ? data : btoa(data);\n        const file = imageItem.file;\n        const blobCache = editor.editorUpload.blobCache;\n        const existingBlobInfo = blobCache.getByData(base64, type);\n        const blobInfo = existingBlobInfo !== null && existingBlobInfo !== void 0 ? existingBlobInfo : createBlobInfo(editor, blobCache, file, base64);\n        pasteHtml(editor, `<img src=\"${ blobInfo.blobUri() }\">`, false, true);\n      });\n    };\n    const isClipboardEvent = event => event.type === 'paste';\n    const readFilesAsDataUris = items => Promise.all(map$3(items, file => {\n      return blobToDataUri(file).then(uri => ({\n        file,\n        uri\n      }));\n    }));\n    const isImage = editor => {\n      const allowedExtensions = getAllowedImageFileTypes(editor);\n      return file => startsWith(file.type, 'image/') && exists(allowedExtensions, extension => {\n        return getImageMimeType(extension) === file.type;\n      });\n    };\n    const getImagesFromDataTransfer = (editor, dataTransfer) => {\n      const items = dataTransfer.items ? bind$3(from(dataTransfer.items), item => {\n        return item.kind === 'file' ? [item.getAsFile()] : [];\n      }) : [];\n      const files = dataTransfer.files ? from(dataTransfer.files) : [];\n      return filter$5(items.length > 0 ? items : files, isImage(editor));\n    };\n    const pasteImageData = (editor, e, rng) => {\n      const dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (shouldPasteDataImages(editor) && dataTransfer) {\n        const images = getImagesFromDataTransfer(editor, dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readFilesAsDataUris(images).then(fileResults => {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each$e(fileResults, result => {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    const isBrokenAndroidClipboardEvent = e => {\n      var _a, _b;\n      return Env.os.isAndroid() && ((_b = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.items) === null || _b === void 0 ? void 0 : _b.length) === 0;\n    };\n    const isKeyboardPasteEvent = e => VK.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    const insertClipboardContent = (editor, clipboardContent, html, plainTextMode, shouldSimulateInputEvent) => {\n      let content = trimHtml(html);\n      const isInternal = hasContentType(clipboardContent, internalHtmlMime()) || isMarked(html);\n      const isPlainTextHtml = !isInternal && isPlainText(content);\n      const isAbsoluteUrl$1 = isAbsoluteUrl(content);\n      if (isDefaultPasteBinContent(content) || !content.length || isPlainTextHtml && !isAbsoluteUrl$1) {\n        plainTextMode = true;\n      }\n      if (plainTextMode || isAbsoluteUrl$1) {\n        if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n          content = clipboardContent['text/plain'];\n        } else {\n          content = innerText(content);\n        }\n      }\n      if (isDefaultPasteBinContent(content)) {\n        return;\n      }\n      if (plainTextMode) {\n        pasteText(editor, content, shouldSimulateInputEvent);\n      } else {\n        pasteHtml(editor, content, isInternal, shouldSimulateInputEvent);\n      }\n    };\n    const registerEventHandlers = (editor, pasteBin, pasteFormat) => {\n      let keyboardPastePlainTextState;\n      const getLastRng = () => pasteBin.getLastRng() || editor.selection.getRng();\n      editor.on('keydown', e => {\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n        }\n      });\n      editor.on('paste', e => {\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          return;\n        }\n        const plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        keyboardPastePlainTextState = false;\n        const clipboardContent = getDataTransferItems(e.clipboardData);\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          return;\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          insertClipboardContent(editor, clipboardContent, clipboardContent['text/html'], plainTextMode, true);\n        } else if (hasContentType(clipboardContent, 'text/plain') && hasContentType(clipboardContent, 'text/uri-list')) {\n          e.preventDefault();\n          insertClipboardContent(editor, clipboardContent, clipboardContent['text/plain'], plainTextMode, true);\n        } else {\n          pasteBin.create();\n          Delay.setEditorTimeout(editor, () => {\n            const html = pasteBin.getHtml();\n            pasteBin.remove();\n            insertClipboardContent(editor, clipboardContent, html, plainTextMode, false);\n          }, 0);\n        }\n      });\n    };\n    const registerDataImageFilter = editor => {\n      const isWebKitFakeUrl = src => startsWith(src, 'webkit-fake-url');\n      const isDataUri = src => startsWith(src, 'data:');\n      const isPasteInsert = args => {\n        var _a;\n        return ((_a = args.data) === null || _a === void 0 ? void 0 : _a.paste) === true;\n      };\n      editor.parser.addNodeFilter('img', (nodes, name, args) => {\n        if (!shouldPasteDataImages(editor) && isPasteInsert(args)) {\n          for (const node of nodes) {\n            const src = node.attr('src');\n            if (isString(src) && !node.attr('data-mce-object') && src !== Env.transparentSrc) {\n              if (isWebKitFakeUrl(src)) {\n                node.remove();\n              } else if (!shouldAllowHtmlDataUrls(editor) && isDataUri(src)) {\n                node.remove();\n              }\n            }\n          }\n        }\n      });\n    };\n    const registerEventsAndFilters = (editor, pasteBin, pasteFormat) => {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      registerDataImageFilter(editor);\n    };\n\n    const togglePlainTextPaste = (editor, pasteFormat) => {\n      if (pasteFormat.get() === 'text') {\n        pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n    const register$1 = (editor, pasteFormat) => {\n      editor.addCommand('mceTogglePlainTextPaste', () => {\n        togglePlainTextPaste(editor, pasteFormat);\n      });\n      editor.addCommand('mceInsertClipboardContent', (ui, value) => {\n        if (value.html) {\n          pasteHtml(editor, value.html, value.internal, false);\n        }\n        if (value.text) {\n          pasteText(editor, value.text, false);\n        }\n      });\n    };\n\n    const setHtml5Clipboard = (clipboardData, html, text) => {\n      if (clipboardData) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    const setClipboardData = (evt, data, fallback, done) => {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    const fallback = editor => (html, done) => {\n      const {dom, selection} = editor;\n      const outer = dom.create('div', {\n        'contenteditable': 'false',\n        'data-mce-bogus': 'all'\n      });\n      const inner = dom.create('div', { contenteditable: 'true' }, html);\n      dom.setStyles(outer, {\n        position: 'fixed',\n        top: '0',\n        left: '-3000px',\n        width: '1000px',\n        overflow: 'hidden'\n      });\n      outer.appendChild(inner);\n      dom.add(editor.getBody(), outer);\n      const range = selection.getRng();\n      inner.focus();\n      const offscreenRange = dom.createRng();\n      offscreenRange.selectNodeContents(inner);\n      selection.setRng(offscreenRange);\n      Delay.setEditorTimeout(editor, () => {\n        selection.setRng(range);\n        dom.remove(outer);\n        done();\n      }, 0);\n    };\n    const getData = editor => ({\n      html: mark(editor.selection.getContent({ contextual: true })),\n      text: editor.selection.getContent({ format: 'text' })\n    });\n    const isTableSelection = editor => !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    const hasSelectedContent = editor => !editor.selection.isCollapsed() || isTableSelection(editor);\n    const cut = editor => evt => {\n      if (!evt.isDefaultPrevented() && hasSelectedContent(editor) && editor.selection.isEditable()) {\n        setClipboardData(evt, getData(editor), fallback(editor), () => {\n          if (Env.browser.isChromium() || Env.browser.isFirefox()) {\n            const rng = editor.selection.getRng();\n            Delay.setEditorTimeout(editor, () => {\n              editor.selection.setRng(rng);\n              editor.execCommand('Delete');\n            }, 0);\n          } else {\n            editor.execCommand('Delete');\n          }\n        });\n      }\n    };\n    const copy = editor => evt => {\n      if (!evt.isDefaultPrevented() && hasSelectedContent(editor)) {\n        setClipboardData(evt, getData(editor), fallback(editor), noop);\n      }\n    };\n    const register = editor => {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    const getCaretRangeFromEvent = (editor, e) => {\n      var _a, _b;\n      return RangeUtils.getCaretRangeFromPoint((_a = e.clientX) !== null && _a !== void 0 ? _a : 0, (_b = e.clientY) !== null && _b !== void 0 ? _b : 0, editor.getDoc());\n    };\n    const isPlainTextFileUrl = content => {\n      const plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    const setFocusedRange = (editor, rng) => {\n      editor.focus();\n      if (rng) {\n        editor.selection.setRng(rng);\n      }\n    };\n    const hasImage = dataTransfer => exists(dataTransfer.files, file => /^image\\//.test(file.type));\n    const needsCustomInternalDrop = (dom, schema, target, dropContent) => {\n      const parentTransparent = dom.getParent(target, node => isTransparentBlock(schema, node));\n      const inSummary = !isNull(dom.getParent(target, 'summary'));\n      if (inSummary) {\n        return true;\n      } else if (parentTransparent && has$2(dropContent, 'text/html')) {\n        const fragment = new DOMParser().parseFromString(dropContent['text/html'], 'text/html').body;\n        return !isNull(fragment.querySelector(parentTransparent.nodeName.toLowerCase()));\n      } else {\n        return false;\n      }\n    };\n    const setupSummaryDeleteByDragFix = editor => {\n      editor.on('input', e => {\n        const hasNoSummary = el => isNull(el.querySelector('summary'));\n        if (e.inputType === 'deleteByDrag') {\n          const brokenDetailElements = filter$5(editor.dom.select('details'), hasNoSummary);\n          each$e(brokenDetailElements, details => {\n            if (isBr$6(details.firstChild)) {\n              details.firstChild.remove();\n            }\n            const summary = editor.dom.create('summary');\n            summary.appendChild(createPaddingBr().dom);\n            details.prepend(summary);\n          });\n        }\n      });\n    };\n    const setup$a = (editor, draggingInternallyState) => {\n      if (shouldPasteBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', e => {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', e => {\n          const dataTransfer = e.dataTransfer;\n          if (dataTransfer && hasImage(dataTransfer)) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', e => {\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        const rng = getCaretRangeFromEvent(editor, e);\n        if (isNullable(rng)) {\n          return;\n        }\n        const dropContent = getDataTransferItems(e.dataTransfer);\n        const internal = hasContentType(dropContent, internalHtmlMime());\n        if ((!hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && pasteImageData(editor, e, rng)) {\n          return;\n        }\n        const internalContent = dropContent[internalHtmlMime()];\n        const content = internalContent || dropContent['text/html'] || dropContent['text/plain'];\n        const needsInternalDrop = needsCustomInternalDrop(editor.dom, editor.schema, rng.startContainer, dropContent);\n        const isInternalDrop = draggingInternallyState.get();\n        if (isInternalDrop && !needsInternalDrop) {\n          return;\n        }\n        if (content) {\n          e.preventDefault();\n          Delay.setEditorTimeout(editor, () => {\n            editor.undoManager.transact(() => {\n              if (internalContent || isInternalDrop && needsInternalDrop) {\n                editor.execCommand('Delete');\n              }\n              setFocusedRange(editor, rng);\n              const trimmedContent = trimHtml(content);\n              if (dropContent['text/html']) {\n                pasteHtml(editor, trimmedContent, internal, true);\n              } else {\n                pasteText(editor, trimmedContent, true);\n              }\n            });\n          });\n        }\n      });\n      editor.on('dragstart', _e => {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', e => {\n        if (shouldPasteDataImages(editor) && !draggingInternallyState.get()) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n      setupSummaryDeleteByDragFix(editor);\n    };\n\n    const setup$9 = editor => {\n      const processEvent = f => e => {\n        f(editor, e);\n      };\n      const preProcess = getPastePreProcess(editor);\n      if (isFunction(preProcess)) {\n        editor.on('PastePreProcess', processEvent(preProcess));\n      }\n      const postProcess = getPastePostProcess(editor);\n      if (isFunction(postProcess)) {\n        editor.on('PastePostProcess', processEvent(postProcess));\n      }\n    };\n\n    const addPreProcessFilter = (editor, filterFunc) => {\n      editor.on('PastePreProcess', e => {\n        e.content = filterFunc(editor, e.content, e.internal);\n      });\n    };\n    const rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n    const rgbToHex = value => Tools.trim(value).replace(rgbRegExp, rgbaToHexString).toLowerCase();\n    const removeWebKitStyles = (editor, content, internal) => {\n      const webKitStylesOption = getPasteWebkitStyles(editor);\n      if (internal || webKitStylesOption === 'all' || !shouldPasteRemoveWebKitStyles(editor)) {\n        return content;\n      }\n      const webKitStyles = webKitStylesOption ? webKitStylesOption.split(/[, ]/) : [];\n      if (webKitStyles && webKitStylesOption !== 'none') {\n        const dom = editor.dom, node = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, (all, before, value, after) => {\n          const inputStyles = dom.parseStyle(dom.decode(value));\n          const outputStyles = {};\n          for (let i = 0; i < webKitStyles.length; i++) {\n            const inputValue = inputStyles[webKitStyles[i]];\n            let compareInput = inputValue;\n            let currentValue = dom.getStyle(node, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              compareInput = rgbToHex(compareInput);\n              currentValue = rgbToHex(currentValue);\n            }\n            if (currentValue !== compareInput) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          const outputStyle = dom.serializeStyle(outputStyles, 'span');\n          if (outputStyle) {\n            return before + ' style=\"' + outputStyle + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, (all, before, value, after) => {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    };\n    const setup$8 = editor => {\n      if (Env.browser.isChromium() || Env.browser.isSafari()) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n    };\n\n    const setup$7 = editor => {\n      const draggingInternallyState = Cell(false);\n      const pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n      const pasteBin = PasteBin(editor);\n      setup$8(editor);\n      register$1(editor, pasteFormat);\n      setup$9(editor);\n      editor.on('PreInit', () => {\n        register(editor);\n        setup$a(editor, draggingInternallyState);\n        registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n    };\n\n    const preventSummaryToggle = editor => {\n      editor.on('click', e => {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    const filterDetails = editor => {\n      editor.parser.addNodeFilter('details', elms => {\n        const initialStateOption = getDetailsInitialState(editor);\n        each$e(elms, details => {\n          if (initialStateOption === 'expanded') {\n            details.attr('open', 'open');\n          } else if (initialStateOption === 'collapsed') {\n            details.attr('open', null);\n          }\n        });\n      });\n      editor.serializer.addNodeFilter('details', elms => {\n        const serializedStateOption = getDetailsSerializedState(editor);\n        each$e(elms, details => {\n          if (serializedStateOption === 'expanded') {\n            details.attr('open', 'open');\n          } else if (serializedStateOption === 'collapsed') {\n            details.attr('open', null);\n          }\n        });\n      });\n    };\n    const setup$6 = editor => {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    const isBr = isBr$6;\n    const isText = isText$b;\n    const isContentEditableFalse$2 = elm => isContentEditableFalse$b(elm.dom);\n    const isContentEditableTrue = elm => isContentEditableTrue$3(elm.dom);\n    const isRoot = rootNode => elm => eq(SugarElement.fromDom(rootNode), elm);\n    const getClosestScope = (node, rootNode, schema) => closest$4(SugarElement.fromDom(node), elm => isContentEditableTrue(elm) || schema.isBlock(name(elm)), isRoot(rootNode)).getOr(SugarElement.fromDom(rootNode)).dom;\n    const getClosestCef = (node, rootNode) => closest$4(SugarElement.fromDom(node), isContentEditableFalse$2, isRoot(rootNode));\n    const findEdgeCaretCandidate = (startNode, scope, forward) => {\n      const walker = new DomTreeWalker(startNode, scope);\n      const next = forward ? walker.next.bind(walker) : walker.prev.bind(walker);\n      let result = startNode;\n      for (let current = forward ? startNode : next(); current && !isBr(current); current = next()) {\n        if (isCaretCandidate$3(current)) {\n          result = current;\n        }\n      }\n      return result;\n    };\n    const findClosestBlockRange = (startRng, rootNode, schema) => {\n      const startPos = CaretPosition.fromRangeStart(startRng);\n      const clickNode = startPos.getNode();\n      const scope = getClosestScope(clickNode, rootNode, schema);\n      const startNode = findEdgeCaretCandidate(clickNode, scope, false);\n      const endNode = findEdgeCaretCandidate(clickNode, scope, true);\n      const rng = document.createRange();\n      getClosestCef(startNode, scope).fold(() => {\n        if (isText(startNode)) {\n          rng.setStart(startNode, 0);\n        } else {\n          rng.setStartBefore(startNode);\n        }\n      }, cef => rng.setStartBefore(cef.dom));\n      getClosestCef(endNode, scope).fold(() => {\n        if (isText(endNode)) {\n          rng.setEnd(endNode, endNode.data.length);\n        } else {\n          rng.setEndAfter(endNode);\n        }\n      }, cef => rng.setEndAfter(cef.dom));\n      return rng;\n    };\n    const onTripleClickSelect = editor => {\n      const rng = findClosestBlockRange(editor.selection.getRng(), editor.getBody(), editor.schema);\n      editor.selection.setRng(normalize(rng));\n    };\n    const setup$5 = editor => {\n      editor.on('mousedown', e => {\n        if (e.detail >= 3) {\n          e.preventDefault();\n          onTripleClickSelect(editor);\n        }\n      });\n    };\n\n    var FakeCaretPosition;\n    (function (FakeCaretPosition) {\n      FakeCaretPosition['Before'] = 'before';\n      FakeCaretPosition['After'] = 'after';\n    }(FakeCaretPosition || (FakeCaretPosition = {})));\n    const distanceToRectLeft = (clientRect, clientX) => Math.abs(clientRect.left - clientX);\n    const distanceToRectRight = (clientRect, clientX) => Math.abs(clientRect.right - clientX);\n    const isInsideY = (clientY, clientRect) => clientY >= clientRect.top && clientY <= clientRect.bottom;\n    const collidesY = (r1, r2) => r1.top < r2.bottom && r1.bottom > r2.top;\n    const isOverlapping = (r1, r2) => {\n      const overlap = overlapY(r1, r2) / Math.min(r1.height, r2.height);\n      return collidesY(r1, r2) && overlap > 0.5;\n    };\n    const splitRectsPerAxis = (rects, y) => {\n      const intersectingRects = filter$5(rects, rect => isInsideY(y, rect));\n      return boundingClientRectFromRects(intersectingRects).fold(() => [\n        [],\n        rects\n      ], boundingRect => {\n        const {\n          pass: horizontal,\n          fail: vertical\n        } = partition$2(rects, rect => isOverlapping(rect, boundingRect));\n        return [\n          horizontal,\n          vertical\n        ];\n      });\n    };\n    const clientInfo = (rect, clientX) => {\n      return {\n        node: rect.node,\n        position: distanceToRectLeft(rect, clientX) < distanceToRectRight(rect, clientX) ? FakeCaretPosition.Before : FakeCaretPosition.After\n      };\n    };\n    const horizontalDistance = (rect, x, _y) => x > rect.left && x < rect.right ? 0 : Math.min(Math.abs(rect.left - x), Math.abs(rect.right - x));\n    const closestChildCaretCandidateNodeRect = (children, clientX, clientY, findCloserTextNode) => {\n      const caretCandidateRect = rect => {\n        if (isCaretCandidate$3(rect.node)) {\n          return Optional.some(rect);\n        } else if (isElement$6(rect.node)) {\n          return closestChildCaretCandidateNodeRect(from(rect.node.childNodes), clientX, clientY, false);\n        } else {\n          return Optional.none();\n        }\n      };\n      const tryFindSecondBestTextNode = (closest, sndClosest, distance) => {\n        return caretCandidateRect(sndClosest).filter(rect => {\n          const deltaDistance = Math.abs(distance(closest, clientX, clientY) - distance(rect, clientX, clientY));\n          return deltaDistance < 2 && isText$b(rect.node);\n        });\n      };\n      const findClosestCaretCandidateNodeRect = (rects, distance) => {\n        const sortedRects = sort(rects, (r1, r2) => distance(r1, clientX, clientY) - distance(r2, clientX, clientY));\n        return findMap(sortedRects, caretCandidateRect).map(closest => {\n          if (findCloserTextNode && !isText$b(closest.node) && sortedRects.length > 1) {\n            return tryFindSecondBestTextNode(closest, sortedRects[1], distance).getOr(closest);\n          } else {\n            return closest;\n          }\n        });\n      };\n      const [horizontalRects, verticalRects] = splitRectsPerAxis(getClientRects(children), clientY);\n      const {\n        pass: above,\n        fail: below\n      } = partition$2(verticalRects, rect => rect.top < clientY);\n      return findClosestCaretCandidateNodeRect(horizontalRects, horizontalDistance).orThunk(() => findClosestCaretCandidateNodeRect(below, distanceToRectEdgeFromXY)).orThunk(() => findClosestCaretCandidateNodeRect(above, distanceToRectEdgeFromXY));\n    };\n    const traverseUp = (rootElm, scope, clientX, clientY) => {\n      const helper = (scope, prevScope) => {\n        const isDragGhostContainer = node => isElement$6(node) && node.classList.contains('mce-drag-container');\n        const childNodesWithoutGhost = filter$5(scope.dom.childNodes, not(isDragGhostContainer));\n        return prevScope.fold(() => closestChildCaretCandidateNodeRect(childNodesWithoutGhost, clientX, clientY, true), prevScope => {\n          const uncheckedChildren = filter$5(childNodesWithoutGhost, node => node !== prevScope.dom);\n          return closestChildCaretCandidateNodeRect(uncheckedChildren, clientX, clientY, true);\n        }).orThunk(() => {\n          const parent = eq(scope, rootElm) ? Optional.none() : parentElement(scope);\n          return parent.bind(newScope => helper(newScope, Optional.some(scope)));\n        });\n      };\n      return helper(scope, Optional.none());\n    };\n    const closestCaretCandidateNodeRect = (root, clientX, clientY) => {\n      const rootElm = SugarElement.fromDom(root);\n      const ownerDoc = documentOrOwner(rootElm);\n      const elementAtPoint = SugarElement.fromPoint(ownerDoc, clientX, clientY).filter(elm => contains(rootElm, elm));\n      const element = elementAtPoint.getOr(rootElm);\n      return traverseUp(rootElm, element, clientX, clientY);\n    };\n    const closestFakeCaretCandidate = (root, clientX, clientY) => closestCaretCandidateNodeRect(root, clientX, clientY).filter(rect => isFakeCaretTarget(rect.node)).map(rect => clientInfo(rect, clientX));\n\n    const getAbsolutePosition = elm => {\n      var _a, _b;\n      const clientRect = elm.getBoundingClientRect();\n      const doc = elm.ownerDocument;\n      const docElem = doc.documentElement;\n      const win = doc.defaultView;\n      return {\n        top: clientRect.top + ((_a = win === null || win === void 0 ? void 0 : win.scrollY) !== null && _a !== void 0 ? _a : 0) - docElem.clientTop,\n        left: clientRect.left + ((_b = win === null || win === void 0 ? void 0 : win.scrollX) !== null && _b !== void 0 ? _b : 0) - docElem.clientLeft\n      };\n    };\n    const getBodyPosition = editor => editor.inline ? getAbsolutePosition(editor.getBody()) : {\n      left: 0,\n      top: 0\n    };\n    const getScrollPosition = editor => {\n      const body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    const getBodyScroll = editor => {\n      const body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      const inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      const iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    const getMousePosition = (editor, event) => {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        const iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        const scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    const calculatePosition = (bodyPosition, scrollPosition, mousePosition) => ({\n      pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n      pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n    });\n    const calc = (editor, event) => calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n\n    const getTargetProps = target => ({\n      target,\n      srcElement: target\n    });\n    const makeDndEventFromMouseEvent = (type, mouseEvent, target, dataTransfer) => ({\n      ...mouseEvent,\n      dataTransfer,\n      type,\n      ...getTargetProps(target)\n    });\n    const makeDndEvent = (type, target, dataTransfer) => {\n      const fail = die('Function not supported on simulated event.');\n      const event = {\n        bubbles: true,\n        cancelBubble: false,\n        cancelable: true,\n        composed: false,\n        currentTarget: null,\n        defaultPrevented: false,\n        eventPhase: 0,\n        isTrusted: true,\n        returnValue: false,\n        timeStamp: 0,\n        type,\n        composedPath: fail,\n        initEvent: fail,\n        preventDefault: noop,\n        stopImmediatePropagation: noop,\n        stopPropagation: noop,\n        AT_TARGET: window.Event.AT_TARGET,\n        BUBBLING_PHASE: window.Event.BUBBLING_PHASE,\n        CAPTURING_PHASE: window.Event.CAPTURING_PHASE,\n        NONE: window.Event.NONE,\n        altKey: false,\n        button: 0,\n        buttons: 0,\n        clientX: 0,\n        clientY: 0,\n        ctrlKey: false,\n        metaKey: false,\n        movementX: 0,\n        movementY: 0,\n        offsetX: 0,\n        offsetY: 0,\n        pageX: 0,\n        pageY: 0,\n        relatedTarget: null,\n        screenX: 0,\n        screenY: 0,\n        shiftKey: false,\n        x: 0,\n        y: 0,\n        detail: 0,\n        view: null,\n        which: 0,\n        initUIEvent: fail,\n        initMouseEvent: fail,\n        getModifierState: fail,\n        dataTransfer,\n        ...getTargetProps(target)\n      };\n      return event;\n    };\n    const makeDataTransferCopyForDragEvent = (dataTransfer, eventType) => {\n      const copy = cloneDataTransfer(dataTransfer);\n      if (eventType === 'dragstart') {\n        setDragstartEvent(copy);\n        setReadWriteMode(copy);\n      } else if (eventType === 'drop') {\n        setDropEvent(copy);\n        setReadOnlyMode(copy);\n      } else {\n        setDragendEvent(copy);\n        setProtectedMode(copy);\n      }\n      return copy;\n    };\n    const makeDragEvent = (type, target, dataTransfer, mouseEvent) => {\n      const dataTransferForDispatch = makeDataTransferCopyForDragEvent(dataTransfer, type);\n      return isUndefined(mouseEvent) ? makeDndEvent(type, target, dataTransferForDispatch) : makeDndEventFromMouseEvent(type, mouseEvent, target, dataTransferForDispatch);\n    };\n\n    const scrollPixelsPerInterval = 32;\n    const scrollIntervalValue = 100;\n    const mouseRangeToTriggerScrollInsideEditor = 8;\n    const mouseRangeToTriggerScrollOutsideEditor = 16;\n    const isContentEditableFalse$1 = isContentEditableFalse$b;\n    const isContentEditable = or(isContentEditableFalse$1, isContentEditableTrue$3);\n    const isDraggable = (dom, rootElm, elm) => isContentEditableFalse$1(elm) && elm !== rootElm && dom.isEditable(elm.parentElement);\n    const isValidDropTarget = (editor, targetElement, dragElement) => {\n      if (isNullable(targetElement)) {\n        return false;\n      } else if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      } else {\n        return editor.dom.isEditable(targetElement);\n      }\n    };\n    const createGhost = (editor, elm, width, height) => {\n      const dom = editor.dom;\n      const clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width,\n        height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      const ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width,\n        height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    const appendGhostToBody = (ghostElm, bodyElm) => {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    const scrollEditor = (direction, amount) => win => () => {\n      const current = direction === 'left' ? win.scrollX : win.scrollY;\n      win.scroll({\n        [direction]: current + amount,\n        behavior: 'smooth'\n      });\n    };\n    const scrollLeft = scrollEditor('left', -scrollPixelsPerInterval);\n    const scrollRight = scrollEditor('left', scrollPixelsPerInterval);\n    const scrollUp = scrollEditor('top', -scrollPixelsPerInterval);\n    const scrollDown = scrollEditor('top', scrollPixelsPerInterval);\n    const moveGhost = (ghostElm, position, width, height, maxX, maxY, mouseY, mouseX, contentAreaContainer, win, state, mouseEventOriginatedFromWithinTheEditor) => {\n      let overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n      const clientHeight = contentAreaContainer.clientHeight;\n      const clientWidth = contentAreaContainer.clientWidth;\n      const outerMouseY = mouseY + contentAreaContainer.getBoundingClientRect().top;\n      const outerMouseX = mouseX + contentAreaContainer.getBoundingClientRect().left;\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging && mouseEventOriginatedFromWithinTheEditor) {\n          if (mouseY + mouseRangeToTriggerScrollInsideEditor >= clientHeight) {\n            state.intervalId.set(scrollDown(win));\n          } else if (mouseY - mouseRangeToTriggerScrollInsideEditor <= 0) {\n            state.intervalId.set(scrollUp(win));\n          } else if (mouseX + mouseRangeToTriggerScrollInsideEditor >= clientWidth) {\n            state.intervalId.set(scrollRight(win));\n          } else if (mouseX - mouseRangeToTriggerScrollInsideEditor <= 0) {\n            state.intervalId.set(scrollLeft(win));\n          } else if (outerMouseY + mouseRangeToTriggerScrollOutsideEditor >= window.innerHeight) {\n            state.intervalId.set(scrollDown(window));\n          } else if (outerMouseY - mouseRangeToTriggerScrollOutsideEditor <= 0) {\n            state.intervalId.set(scrollUp(window));\n          } else if (outerMouseX + mouseRangeToTriggerScrollOutsideEditor >= window.innerWidth) {\n            state.intervalId.set(scrollRight(window));\n          } else if (outerMouseX - mouseRangeToTriggerScrollOutsideEditor <= 0) {\n            state.intervalId.set(scrollLeft(window));\n          }\n        }\n      });\n    };\n    const removeElement = elm => {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    const removeElementWithPadding = (dom, elm) => {\n      const parentBlock = dom.getParent(elm.parentNode, dom.isBlock);\n      removeElement(elm);\n      if (parentBlock && parentBlock !== dom.getRoot() && dom.isEmpty(parentBlock)) {\n        fillWithPaddingBr(SugarElement.fromDom(parentBlock));\n      }\n    };\n    const isLeftMouseButtonPressed = e => e.button === 0;\n    const applyRelPos = (state, position) => ({\n      pageX: position.pageX - state.relX,\n      pageY: position.pageY + 5\n    });\n    const start = (state, editor) => e => {\n      if (isLeftMouseButtonPressed(e)) {\n        const ceElm = find$2(editor.dom.getParents(e.target), isContentEditable).getOr(null);\n        if (isNonNullable(ceElm) && isDraggable(editor.dom, editor.getBody(), ceElm)) {\n          const elmPos = editor.dom.getPos(ceElm);\n          const bodyElm = editor.getBody();\n          const docElm = editor.getDoc().documentElement;\n          state.set({\n            element: ceElm,\n            dataTransfer: createDataTransfer(),\n            dragging: false,\n            screenX: e.screenX,\n            screenY: e.screenY,\n            maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n            maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n            relX: e.pageX - elmPos.x,\n            relY: e.pageY - elmPos.y,\n            width: ceElm.offsetWidth,\n            height: ceElm.offsetHeight,\n            ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight),\n            intervalId: repeatable(scrollIntervalValue)\n          });\n        }\n      }\n    };\n    const placeCaretAt = (editor, clientX, clientY) => {\n      editor._selectionOverrides.hideFakeCaret();\n      closestFakeCaretCandidate(editor.getBody(), clientX, clientY).fold(() => editor.selection.placeCaretAt(clientX, clientY), caretInfo => {\n        const range = editor._selectionOverrides.showCaret(1, caretInfo.node, caretInfo.position === FakeCaretPosition.Before, false);\n        if (range) {\n          editor.selection.setRng(range);\n        } else {\n          editor.selection.placeCaretAt(clientX, clientY);\n        }\n      });\n    };\n    const dispatchDragEvent = (editor, type, target, dataTransfer, mouseEvent) => {\n      if (type === 'dragstart') {\n        setHtmlData(dataTransfer, editor.dom.getOuterHTML(target));\n      }\n      const event = makeDragEvent(type, target, dataTransfer, mouseEvent);\n      const args = editor.dispatch(type, event);\n      return args;\n    };\n    const move = (state, editor) => {\n      const throttledPlaceCaretAt = first$1((clientX, clientY) => placeCaretAt(editor, clientX, clientY), 0);\n      editor.on('remove', throttledPlaceCaretAt.cancel);\n      const state_ = state;\n      return e => state.on(state => {\n        const movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (!state.dragging && movement > 10) {\n          const args = dispatchDragEvent(editor, 'dragstart', state.element, state.dataTransfer, e);\n          if (isNonNullable(args.dataTransfer)) {\n            state.dataTransfer = args.dataTransfer;\n          }\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          const mouseEventOriginatedFromWithinTheEditor = e.currentTarget === editor.getDoc().documentElement;\n          const targetPos = applyRelPos(state, calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY, e.clientY, e.clientX, editor.getContentAreaContainer(), editor.getWin(), state_, mouseEventOriginatedFromWithinTheEditor);\n          throttledPlaceCaretAt.throttle(e.clientX, e.clientY);\n        }\n      });\n    };\n    const getRawTarget = selection => {\n      const sel = selection.getSel();\n      if (isNonNullable(sel)) {\n        const rng = sel.getRangeAt(0);\n        const startContainer = rng.startContainer;\n        return isText$b(startContainer) ? startContainer.parentNode : startContainer;\n      } else {\n        return null;\n      }\n    };\n    const drop = (state, editor) => e => {\n      state.on(state => {\n        var _a;\n        state.intervalId.clear();\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            const dropTarget = (_a = editor.getDoc().elementFromPoint(e.clientX, e.clientY)) !== null && _a !== void 0 ? _a : editor.getBody();\n            const args = dispatchDragEvent(editor, 'drop', dropTarget, state.dataTransfer, e);\n            if (!args.isDefaultPrevented()) {\n              editor.undoManager.transact(() => {\n                removeElementWithPadding(editor.dom, state.element);\n                getHtmlData(state.dataTransfer).each(content => editor.insertContent(content));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n          dispatchDragEvent(editor, 'dragend', editor.getBody(), state.dataTransfer, e);\n        }\n      });\n      removeDragState(state);\n    };\n    const stopDragging = (state, editor, e) => {\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging) {\n          e.fold(() => dispatchDragEvent(editor, 'dragend', state.element, state.dataTransfer), mouseEvent => dispatchDragEvent(editor, 'dragend', state.element, state.dataTransfer, mouseEvent));\n        }\n      });\n      removeDragState(state);\n    };\n    const stop = (state, editor) => e => stopDragging(state, editor, Optional.some(e));\n    const removeDragState = state => {\n      state.on(state => {\n        state.intervalId.clear();\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    const bindFakeDragEvents = editor => {\n      const state = value$2();\n      const pageDom = DOMUtils.DOM;\n      const rootDocument = document;\n      const dragStartHandler = start(state, editor);\n      const dragHandler = move(state, editor);\n      const dropHandler = drop(state, editor);\n      const dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', () => {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', e => {\n        if (e.keyCode === VK.ESC) {\n          stopDragging(state, editor, Optional.none());\n        }\n      });\n    };\n    const blockUnsupportedFileDrop = editor => {\n      const preventFileDrop = e => {\n        if (!e.isDefaultPrevented()) {\n          const dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$2(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      const preventFileDropIfUIElement = e => {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      const setup = () => {\n        const pageDom = DOMUtils.DOM;\n        const dom = editor.dom;\n        const doc = document;\n        const editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        const eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$e(eventNames, name => {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', () => {\n          each$e(eventNames, name => {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', () => {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    const init$2 = editor => {\n      bindFakeDragEvents(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    const setup$4 = editor => {\n      const renderFocusCaret = first$1(() => {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          const rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            const caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', () => {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', () => {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    const setup$3 = editor => {\n      editor.on('init', () => {\n        editor.on('focusin', e => {\n          const target = e.target;\n          if (isMedia$2(target)) {\n            const ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            const node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(rng => editor.selection.setRng(rng));\n            }\n          }\n        });\n      });\n    };\n\n    const isContentEditableFalse = isContentEditableFalse$b;\n    const getContentEditableRoot = (editor, node) => getContentEditableRoot$1(editor.getBody(), node);\n    const SelectionOverrides = editor => {\n      const selection = editor.selection, dom = editor.dom;\n      const rootNode = editor.getBody();\n      const fakeCaret = FakeCaret(editor, rootNode, dom.isBlock, () => hasFocus(editor));\n      const realSelectionId = 'sel-' + dom.uniqueId();\n      const elementSelectionAttr = 'data-mce-selected';\n      let selectedElement;\n      const isFakeSelectionElement = node => isNonNullable(node) && dom.hasClass(node, 'mce-offscreen-selection');\n      const isFakeSelectionTargetElement = node => node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode) && dom.isEditable(node.parentNode);\n      const setRange = range => {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      const showCaret = (direction, node, before, scrollIntoView = true) => {\n        const e = editor.dispatch('ShowCaret', {\n          target: node,\n          direction,\n          before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      const showBlockCaretContainer = blockCaretContainer => {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      const registerEvents = () => {\n        editor.on('click', e => {\n          if (!dom.isEditable(e.target)) {\n            e.preventDefault();\n            editor.focus();\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        editor.on('tap', e => {\n          const targetElm = e.target;\n          const contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', e => {\n          const targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (!isXYInContentArea(editor, e.clientX, e.clientY)) {\n            return;\n          }\n          removeElementSelection();\n          hideFakeCaret();\n          const closestContentEditable = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(closestContentEditable)) {\n            e.preventDefault();\n            selectNode(editor, closestContentEditable).each(setElementSelection);\n          } else {\n            closestFakeCaretCandidate(rootNode, e.clientX, e.clientY).each(caretInfo => {\n              e.preventDefault();\n              const range = showCaret(1, caretInfo.node, caretInfo.position === FakeCaretPosition.Before, false);\n              setRange(range);\n              if (isHTMLElement(closestContentEditable)) {\n                closestContentEditable.focus();\n              } else {\n                editor.getBody().focus();\n              }\n            });\n          }\n        });\n        editor.on('keypress', e => {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', e => {\n          let rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', e => {\n          e.range = normalizeVoidElementSelection(e.range);\n          const rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        const isPasteBin = node => isElement$6(node) && node.id === 'mcepastebin';\n        editor.on('AfterSetSelectionRange', e => {\n          const rng = e.range;\n          const parent = rng.startContainer.parentElement;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parent)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parent)) {\n            removeElementSelection();\n          }\n        });\n        init$2(editor);\n        setup$4(editor);\n        setup$3(editor);\n      };\n      const isWithinCaretContainer = node => isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      const isRangeInCaretContainer = rng => isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      const normalizeVoidElementSelection = rng => {\n        const voidElements = editor.schema.getVoidElements();\n        const newRng = dom.createRng();\n        const startContainer = rng.startContainer;\n        const startOffset = rng.startOffset;\n        const endContainer = rng.endContainer;\n        const endOffset = rng.endOffset;\n        if (has$2(voidElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(voidElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      const setupOffscreenSelection = (node, targetClone) => {\n        const body = SugarElement.fromDom(editor.getBody());\n        const doc = editor.getDoc();\n        const realSelectionContainer = descendant$1(body, '#' + realSelectionId).getOrThunk(() => {\n          const newContainer = SugarElement.fromHtml('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>', doc);\n          set$3(newContainer, 'id', realSelectionId);\n          append$1(body, newContainer);\n          return newContainer;\n        });\n        const newRange = dom.createRng();\n        empty(realSelectionContainer);\n        append(realSelectionContainer, [\n          SugarElement.fromText(nbsp, doc),\n          SugarElement.fromDom(targetClone),\n          SugarElement.fromText(nbsp, doc)\n        ]);\n        newRange.setStart(realSelectionContainer.dom.firstChild, 1);\n        newRange.setEnd(realSelectionContainer.dom.lastChild, 0);\n        setAll(realSelectionContainer, { top: dom.getPos(node, editor.getBody()).y + 'px' });\n        focus$1(realSelectionContainer);\n        const sel = selection.getSel();\n        if (sel) {\n          sel.removeAllRanges();\n          sel.addRange(newRange);\n        }\n        return newRange;\n      };\n      const selectElement = elm => {\n        const targetClone = elm.cloneNode(true);\n        const e = editor.dispatch('ObjectSelected', {\n          target: elm,\n          targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        const range = setupOffscreenSelection(elm, e.targetClone);\n        const nodeElm = SugarElement.fromDom(elm);\n        each$e(descendants(SugarElement.fromDom(editor.getBody()), `*[${ elementSelectionAttr }]`), elm => {\n          if (!eq(nodeElm, elm)) {\n            remove$9(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      const setElementSelection = (range, forward) => {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            const dir = forward ? 1 : -1;\n            const caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            const beforeNode = caretPosition.getNode(!forward);\n            if (isNonNullable(beforeNode)) {\n              if (isFakeCaretTarget(beforeNode)) {\n                return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n              }\n              if (isCaretContainerInline(beforeNode) && isContentEditableFalse$b(beforeNode.nextSibling)) {\n                const rng = dom.createRng();\n                rng.setStart(beforeNode, 0);\n                rng.setEnd(beforeNode, 0);\n                return rng;\n              }\n            }\n            const afterNode = caretPosition.getNode(forward);\n            if (isNonNullable(afterNode)) {\n              if (isFakeCaretTarget(afterNode)) {\n                return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n              }\n              if (isCaretContainerInline(afterNode) && isContentEditableFalse$b(afterNode.previousSibling)) {\n                const rng = dom.createRng();\n                rng.setStart(afterNode, 1);\n                rng.setEnd(afterNode, 1);\n                return rng;\n              }\n            }\n          }\n          return null;\n        }\n        let startContainer = range.startContainer;\n        let startOffset = range.startOffset;\n        const endOffset = range.endOffset;\n        if (isText$b(startContainer) && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (!isElement$6(startContainer)) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          const node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      const removeElementSelection = () => {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant$1(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$4);\n        selectedElement = null;\n      };\n      const destroy = () => {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      const hideFakeCaret = () => {\n        fakeCaret.hide();\n      };\n      if (!isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret,\n        showBlockCaretContainer,\n        hideFakeCaret,\n        destroy\n      };\n    };\n\n    const getNormalizedTextOffset = (container, offset) => {\n      let normalizedOffset = offset;\n      for (let node = container.previousSibling; isText$b(node); node = node.previousSibling) {\n        normalizedOffset += node.data.length;\n      }\n      return normalizedOffset;\n    };\n    const generatePath = (dom, root, node, offset, normalized) => {\n      if (isText$b(node) && (offset < 0 || offset > node.data.length)) {\n        return [];\n      }\n      const p = normalized && isText$b(node) ? [getNormalizedTextOffset(node, offset)] : [offset];\n      let current = node;\n      while (current !== root && current.parentNode) {\n        p.push(dom.nodeIndex(current, normalized));\n        current = current.parentNode;\n      }\n      return current === root ? p.reverse() : [];\n    };\n    const generatePathRange = (dom, root, startNode, startOffset, endNode, endOffset, normalized = false) => {\n      const start = generatePath(dom, root, startNode, startOffset, normalized);\n      const end = generatePath(dom, root, endNode, endOffset, normalized);\n      return {\n        start,\n        end\n      };\n    };\n    const resolvePath = (root, path) => {\n      const nodePath = path.slice();\n      const offset = nodePath.pop();\n      if (!isNumber(offset)) {\n        return Optional.none();\n      } else {\n        const resolvedNode = foldl(nodePath, (optNode, index) => optNode.bind(node => Optional.from(node.childNodes[index])), Optional.some(root));\n        return resolvedNode.bind(node => {\n          if (isText$b(node) && (offset < 0 || offset > node.data.length)) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              node,\n              offset\n            });\n          }\n        });\n      }\n    };\n    const resolvePathRange = (root, range) => resolvePath(root, range.start).bind(({\n      node: startNode,\n      offset: startOffset\n    }) => resolvePath(root, range.end).map(({\n      node: endNode,\n      offset: endOffset\n    }) => {\n      const rng = document.createRange();\n      rng.setStart(startNode, startOffset);\n      rng.setEnd(endNode, endOffset);\n      return rng;\n    }));\n    const generatePathRangeFromRange = (dom, root, range, normalized = false) => generatePathRange(dom, root, range.startContainer, range.startOffset, range.endContainer, range.endOffset, normalized);\n\n    const cleanEmptyNodes = (dom, node, isRoot) => {\n      if (node && dom.isEmpty(node) && !isRoot(node)) {\n        const parent = node.parentNode;\n        dom.remove(node, isText$b(node.firstChild) && isWhitespaceText(node.firstChild.data));\n        cleanEmptyNodes(dom, parent, isRoot);\n      }\n    };\n    const deleteRng = (dom, rng, isRoot, clean = true) => {\n      const startParent = rng.startContainer.parentNode;\n      const endParent = rng.endContainer.parentNode;\n      rng.deleteContents();\n      if (clean && !isRoot(rng.startContainer)) {\n        if (isText$b(rng.startContainer) && rng.startContainer.data.length === 0) {\n          dom.remove(rng.startContainer);\n        }\n        if (isText$b(rng.endContainer) && rng.endContainer.data.length === 0) {\n          dom.remove(rng.endContainer);\n        }\n        cleanEmptyNodes(dom, startParent, isRoot);\n        if (startParent !== endParent) {\n          cleanEmptyNodes(dom, endParent, isRoot);\n        }\n      }\n    };\n    const getParentBlock = (editor, rng) => Optional.from(editor.dom.getParent(rng.startContainer, editor.dom.isBlock));\n    const resolveFromDynamicPatterns = (patternSet, block, beforeText) => {\n      const dynamicPatterns = patternSet.dynamicPatternsLookup({\n        text: beforeText,\n        block\n      });\n      return {\n        ...patternSet,\n        blockPatterns: getBlockPatterns(dynamicPatterns).concat(patternSet.blockPatterns),\n        inlinePatterns: getInlinePatterns(dynamicPatterns).concat(patternSet.inlinePatterns)\n      };\n    };\n    const getBeforeText = (dom, block, node, offset) => {\n      const rng = dom.createRng();\n      rng.setStart(block, 0);\n      rng.setEnd(node, offset);\n      return rng.toString();\n    };\n\n    const newMarker = (dom, id) => dom.create('span', {\n      'data-mce-type': 'bookmark',\n      id\n    });\n    const rangeFromMarker = (dom, marker) => {\n      const rng = dom.createRng();\n      rng.setStartAfter(marker.start);\n      rng.setEndBefore(marker.end);\n      return rng;\n    };\n    const createMarker = (dom, markerPrefix, pathRange) => {\n      const rng = resolvePathRange(dom.getRoot(), pathRange).getOrDie('Unable to resolve path range');\n      const startNode = rng.startContainer;\n      const endNode = rng.endContainer;\n      const textEnd = rng.endOffset === 0 ? endNode : endNode.splitText(rng.endOffset);\n      const textStart = rng.startOffset === 0 ? startNode : startNode.splitText(rng.startOffset);\n      const startParentNode = textStart.parentNode;\n      const endParentNode = textEnd.parentNode;\n      return {\n        prefix: markerPrefix,\n        end: endParentNode.insertBefore(newMarker(dom, markerPrefix + '-end'), textEnd),\n        start: startParentNode.insertBefore(newMarker(dom, markerPrefix + '-start'), textStart)\n      };\n    };\n    const removeMarker = (dom, marker, isRoot) => {\n      cleanEmptyNodes(dom, dom.get(marker.prefix + '-end'), isRoot);\n      cleanEmptyNodes(dom, dom.get(marker.prefix + '-start'), isRoot);\n    };\n\n    const isReplacementPattern = pattern => pattern.start.length === 0;\n    const matchesPattern = patternContent => (element, offset) => {\n      const text = element.data;\n      const searchText = text.substring(0, offset);\n      const startEndIndex = searchText.lastIndexOf(patternContent.charAt(patternContent.length - 1));\n      const startIndex = searchText.lastIndexOf(patternContent);\n      if (startIndex !== -1) {\n        return startIndex + patternContent.length;\n      } else if (startEndIndex !== -1) {\n        return startEndIndex + 1;\n      } else {\n        return -1;\n      }\n    };\n    const findPatternStartFromSpot = (dom, pattern, block, spot) => {\n      const startPattern = pattern.start;\n      const startSpot = repeatLeft(dom, spot.container, spot.offset, matchesPattern(startPattern), block);\n      return startSpot.bind(spot => {\n        var _a, _b;\n        const startPatternIndex = (_b = (_a = block.textContent) === null || _a === void 0 ? void 0 : _a.indexOf(startPattern)) !== null && _b !== void 0 ? _b : -1;\n        const isCompleteMatch = startPatternIndex !== -1 && spot.offset >= startPatternIndex + startPattern.length;\n        if (isCompleteMatch) {\n          const rng = dom.createRng();\n          rng.setStart(spot.container, spot.offset - startPattern.length);\n          rng.setEnd(spot.container, spot.offset);\n          return Optional.some(rng);\n        } else {\n          const offset = spot.offset - startPattern.length;\n          return scanLeft(spot.container, offset, block).map(nextSpot => {\n            const rng = dom.createRng();\n            rng.setStart(nextSpot.container, nextSpot.offset);\n            rng.setEnd(spot.container, spot.offset);\n            return rng;\n          }).filter(rng => rng.toString() === startPattern).orThunk(() => findPatternStartFromSpot(dom, pattern, block, point(spot.container, 0)));\n        }\n      });\n    };\n    const findPatternStart = (dom, pattern, node, offset, block, requireGap = false) => {\n      if (pattern.start.length === 0 && !requireGap) {\n        const rng = dom.createRng();\n        rng.setStart(node, offset);\n        rng.setEnd(node, offset);\n        return Optional.some(rng);\n      }\n      return textBefore(node, offset, block).bind(spot => {\n        const start = findPatternStartFromSpot(dom, pattern, block, spot);\n        return start.bind(startRange => {\n          var _a;\n          if (requireGap) {\n            if (startRange.endContainer === spot.container && startRange.endOffset === spot.offset) {\n              return Optional.none();\n            } else if (spot.offset === 0 && ((_a = startRange.endContainer.textContent) === null || _a === void 0 ? void 0 : _a.length) === startRange.endOffset) {\n              return Optional.none();\n            }\n          }\n          return Optional.some(startRange);\n        });\n      });\n    };\n    const findPattern$3 = (editor, block, details, normalizedMatches) => {\n      const dom = editor.dom;\n      const root = dom.getRoot();\n      const pattern = details.pattern;\n      const endNode = details.position.container;\n      const endOffset = details.position.offset;\n      return scanLeft(endNode, endOffset - details.pattern.end.length, block).bind(spot => {\n        const endPathRng = generatePathRange(dom, root, spot.container, spot.offset, endNode, endOffset, normalizedMatches);\n        if (isReplacementPattern(pattern)) {\n          return Optional.some({\n            matches: [{\n                pattern,\n                startRng: endPathRng,\n                endRng: endPathRng\n              }],\n            position: spot\n          });\n        } else {\n          const resultsOpt = findPatternsRec(editor, details.remainingPatterns, spot.container, spot.offset, block, normalizedMatches);\n          const results = resultsOpt.getOr({\n            matches: [],\n            position: spot\n          });\n          const pos = results.position;\n          const start = findPatternStart(dom, pattern, pos.container, pos.offset, block, resultsOpt.isNone());\n          return start.map(startRng => {\n            const startPathRng = generatePathRangeFromRange(dom, root, startRng, normalizedMatches);\n            return {\n              matches: results.matches.concat([{\n                  pattern,\n                  startRng: startPathRng,\n                  endRng: endPathRng\n                }]),\n              position: point(startRng.startContainer, startRng.startOffset)\n            };\n          });\n        }\n      });\n    };\n    const findPatternsRec = (editor, patterns, node, offset, block, normalizedMatches) => {\n      const dom = editor.dom;\n      return textBefore(node, offset, dom.getRoot()).bind(endSpot => {\n        const text = getBeforeText(dom, block, node, offset);\n        for (let i = 0; i < patterns.length; i++) {\n          const pattern = patterns[i];\n          if (!endsWith(text, pattern.end)) {\n            continue;\n          }\n          const patternsWithoutCurrent = patterns.slice();\n          patternsWithoutCurrent.splice(i, 1);\n          const result = findPattern$3(editor, block, {\n            pattern,\n            remainingPatterns: patternsWithoutCurrent,\n            position: endSpot\n          }, normalizedMatches);\n          if (result.isNone() && offset > 0) {\n            return findPatternsRec(editor, patterns, node, offset - 1, block, normalizedMatches);\n          }\n          if (result.isSome()) {\n            return result;\n          }\n        }\n        return Optional.none();\n      });\n    };\n    const applyPattern$2 = (editor, pattern, patternRange) => {\n      editor.selection.setRng(patternRange);\n      if (pattern.type === 'inline-format') {\n        each$e(pattern.format, format => {\n          editor.formatter.apply(format);\n        });\n      } else {\n        editor.execCommand(pattern.cmd, false, pattern.value);\n      }\n    };\n    const applyReplacementPattern = (editor, pattern, marker, isRoot) => {\n      const markerRange = rangeFromMarker(editor.dom, marker);\n      deleteRng(editor.dom, markerRange, isRoot);\n      applyPattern$2(editor, pattern, markerRange);\n    };\n    const applyPatternWithContent = (editor, pattern, startMarker, endMarker, isRoot) => {\n      const dom = editor.dom;\n      const markerEndRange = rangeFromMarker(dom, endMarker);\n      const markerStartRange = rangeFromMarker(dom, startMarker);\n      deleteRng(dom, markerStartRange, isRoot);\n      deleteRng(dom, markerEndRange, isRoot);\n      const patternMarker = {\n        prefix: startMarker.prefix,\n        start: startMarker.end,\n        end: endMarker.start\n      };\n      const patternRange = rangeFromMarker(dom, patternMarker);\n      applyPattern$2(editor, pattern, patternRange);\n    };\n    const addMarkers = (dom, matches) => {\n      const markerPrefix = generate$1('mce_textpattern');\n      const matchesWithEnds = foldr(matches, (acc, match) => {\n        const endMarker = createMarker(dom, markerPrefix + `_end${ acc.length }`, match.endRng);\n        return acc.concat([{\n            ...match,\n            endMarker\n          }]);\n      }, []);\n      return foldr(matchesWithEnds, (acc, match) => {\n        const idx = matchesWithEnds.length - acc.length - 1;\n        const startMarker = isReplacementPattern(match.pattern) ? match.endMarker : createMarker(dom, markerPrefix + `_start${ idx }`, match.startRng);\n        return acc.concat([{\n            ...match,\n            startMarker\n          }]);\n      }, []);\n    };\n    const sortPatterns$1 = patterns => sort(patterns, (a, b) => b.end.length - a.end.length);\n    const getBestMatches = (matches, matchesWithSortedPatterns) => {\n      const hasSameMatches = forall(matches, match => exists(matchesWithSortedPatterns, sortedMatch => match.pattern.start === sortedMatch.pattern.start && match.pattern.end === sortedMatch.pattern.end));\n      if (matches.length === matchesWithSortedPatterns.length) {\n        if (hasSameMatches) {\n          return matches;\n        } else {\n          return matchesWithSortedPatterns;\n        }\n      }\n      return matches.length > matchesWithSortedPatterns.length ? matches : matchesWithSortedPatterns;\n    };\n    const findPatterns$2 = (editor, block, node, offset, patternSet, normalizedMatches) => {\n      const matches = findPatternsRec(editor, patternSet.inlinePatterns, node, offset, block, normalizedMatches).fold(() => [], result => result.matches);\n      const matchesWithSortedPatterns = findPatternsRec(editor, sortPatterns$1(patternSet.inlinePatterns), node, offset, block, normalizedMatches).fold(() => [], result => result.matches);\n      return getBestMatches(matches, matchesWithSortedPatterns);\n    };\n    const applyMatches$2 = (editor, matches) => {\n      if (matches.length === 0) {\n        return;\n      }\n      const dom = editor.dom;\n      const bookmark = editor.selection.getBookmark();\n      const matchesWithMarkers = addMarkers(dom, matches);\n      each$e(matchesWithMarkers, match => {\n        const block = dom.getParent(match.startMarker.start, dom.isBlock);\n        const isRoot = node => node === block;\n        if (isReplacementPattern(match.pattern)) {\n          applyReplacementPattern(editor, match.pattern, match.endMarker, isRoot);\n        } else {\n          applyPatternWithContent(editor, match.pattern, match.startMarker, match.endMarker, isRoot);\n        }\n        removeMarker(dom, match.endMarker, isRoot);\n        removeMarker(dom, match.startMarker, isRoot);\n      });\n      editor.selection.moveToBookmark(bookmark);\n    };\n\n    const stripPattern$1 = (dom, block, pattern) => {\n      return textAfter(block, 0, block).map(spot => {\n        const node = spot.container;\n        scanRight(node, pattern.start.length, block).each(end => {\n          const rng = dom.createRng();\n          rng.setStart(node, 0);\n          rng.setEnd(end.container, end.offset);\n          deleteRng(dom, rng, e => e === block);\n        });\n        return node;\n      });\n    };\n    const createApplyPattern = stripPattern => (editor, match) => {\n      const dom = editor.dom;\n      const pattern = match.pattern;\n      const rng = resolvePathRange(dom.getRoot(), match.range).getOrDie('Unable to resolve path range');\n      const isBlockFormatName = (name, formatter) => {\n        const formatSet = formatter.get(name);\n        return isArray$1(formatSet) && head(formatSet).exists(format => has$2(format, 'block'));\n      };\n      getParentBlock(editor, rng).each(block => {\n        if (pattern.type === 'block-format') {\n          if (isBlockFormatName(pattern.format, editor.formatter)) {\n            editor.undoManager.transact(() => {\n              stripPattern(editor.dom, block, pattern);\n              editor.formatter.apply(pattern.format);\n            });\n          }\n        } else if (pattern.type === 'block-command') {\n          editor.undoManager.transact(() => {\n            stripPattern(editor.dom, block, pattern);\n            editor.execCommand(pattern.cmd, false, pattern.value);\n          });\n        }\n      });\n      return true;\n    };\n    const sortPatterns = patterns => sort(patterns, (a, b) => b.start.length - a.start.length);\n    const findPattern$2 = predicate => (patterns, text) => {\n      const sortedPatterns = sortPatterns(patterns);\n      const nuText = text.replace(nbsp, ' ');\n      return find$2(sortedPatterns, pattern => predicate(pattern, text, nuText));\n    };\n    const createFindPatterns = (findPattern, skipFullMatch) => (editor, block, patternSet, normalizedMatches, text) => {\n      var _a;\n      if (text === void 0) {\n        text = (_a = block.textContent) !== null && _a !== void 0 ? _a : '';\n      }\n      const dom = editor.dom;\n      const forcedRootBlock = getForcedRootBlock(editor);\n      if (!dom.is(block, forcedRootBlock)) {\n        return [];\n      }\n      return findPattern(patternSet.blockPatterns, text).map(pattern => {\n        if (skipFullMatch && Tools.trim(text).length === pattern.start.length) {\n          return [];\n        }\n        return [{\n            pattern,\n            range: generatePathRange(dom, dom.getRoot(), block, 0, block, 0, normalizedMatches)\n          }];\n      }).getOr([]);\n    };\n\n    const startsWithSingleSpace = s => /^\\s[^\\s]/.test(s);\n    const stripPattern = (dom, block, pattern) => {\n      stripPattern$1(dom, block, pattern).each(node => {\n        const text = SugarElement.fromDom(node);\n        const textContent = get$3(text);\n        if (startsWithSingleSpace(textContent)) {\n          set(text, textContent.slice(1));\n        }\n      });\n    };\n    const applyPattern$1 = createApplyPattern(stripPattern);\n    const findPattern$1 = findPattern$2((pattern, text, nuText) => text.indexOf(pattern.start) === 0 || nuText.indexOf(pattern.start) === 0);\n    const findPatterns$1 = createFindPatterns(findPattern$1, true);\n    const getMatches$1 = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      return getParentBlock(editor, rng).map(block => {\n        var _a;\n        const offset = Math.max(0, rng.startOffset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, (_a = block.textContent) !== null && _a !== void 0 ? _a : '');\n        const inlineMatches = findPatterns$2(editor, block, rng.startContainer, offset, dynamicPatternSet, true);\n        const blockMatches = findPatterns$1(editor, block, dynamicPatternSet, true);\n        return {\n          inlineMatches,\n          blockMatches\n        };\n      }).filter(({inlineMatches, blockMatches}) => blockMatches.length > 0 || inlineMatches.length > 0);\n    };\n    const applyMatches$1 = (editor, matches) => {\n      if (matches.length === 0) {\n        return;\n      }\n      const bookmark = editor.selection.getBookmark();\n      each$e(matches, match => applyPattern$1(editor, match));\n      editor.selection.moveToBookmark(bookmark);\n    };\n\n    const applyPattern = createApplyPattern(stripPattern$1);\n    const findPattern = findPattern$2((pattern, text, nuText) => text === pattern.start || nuText === pattern.start);\n    const findPatterns = createFindPatterns(findPattern, false);\n    const getMatches = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      return getParentBlock(editor, rng).map(block => {\n        const offset = Math.max(0, rng.startOffset);\n        const beforeText = getBeforeText(editor.dom, block, rng.startContainer, offset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, beforeText);\n        return findPatterns(editor, block, dynamicPatternSet, false, beforeText);\n      }).filter(matches => matches.length > 0);\n    };\n    const applyMatches = (editor, matches) => {\n      each$e(matches, match => applyPattern(editor, match));\n    };\n\n    const handleEnter = (editor, patternSet) => getMatches$1(editor, patternSet).fold(never, ({inlineMatches, blockMatches}) => {\n      editor.undoManager.add();\n      editor.undoManager.extra(() => {\n        editor.execCommand('mceInsertNewLine');\n      }, () => {\n        insert$5(editor);\n        applyMatches$2(editor, inlineMatches);\n        applyMatches$1(editor, blockMatches);\n        const range = editor.selection.getRng();\n        const spot = textBefore(range.startContainer, range.startOffset, editor.dom.getRoot());\n        editor.execCommand('mceInsertNewLine');\n        spot.each(s => {\n          const node = s.container;\n          if (node.data.charAt(s.offset - 1) === zeroWidth) {\n            node.deleteData(s.offset - 1, 1);\n            cleanEmptyNodes(editor.dom, node.parentNode, e => e === editor.dom.getRoot());\n          }\n        });\n      });\n      return true;\n    });\n    const handleInlineKey = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      getParentBlock(editor, rng).map(block => {\n        const offset = Math.max(0, rng.startOffset - 1);\n        const beforeText = getBeforeText(editor.dom, block, rng.startContainer, offset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, beforeText);\n        const inlineMatches = findPatterns$2(editor, block, rng.startContainer, offset, dynamicPatternSet, false);\n        if (inlineMatches.length > 0) {\n          editor.undoManager.transact(() => {\n            applyMatches$2(editor, inlineMatches);\n          });\n        }\n      });\n    };\n    const handleBlockPatternOnSpace = (editor, patternSet) => getMatches(editor, patternSet).fold(never, matches => {\n      editor.undoManager.transact(() => {\n        applyMatches(editor, matches);\n      });\n      return true;\n    });\n    const checkKeyEvent = (codes, event, predicate) => {\n      for (let i = 0; i < codes.length; i++) {\n        if (predicate(codes[i], event)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const checkKeyCode = (codes, event) => checkKeyEvent(codes, event, (code, event) => {\n      return code === event.keyCode && !VK.modifierPressed(event);\n    });\n    const checkCharCode = (chars, event) => checkKeyEvent(chars, event, (chr, event) => {\n      return chr.charCodeAt(0) === event.charCode;\n    });\n\n    const setup$2 = editor => {\n      const charCodes = [\n        ',',\n        '.',\n        ';',\n        ':',\n        '!',\n        '?'\n      ];\n      const keyCodes = [32];\n      const getPatternSet = () => createPatternSet(getTextPatterns(editor), getTextPatternsLookup(editor));\n      const hasDynamicPatterns = () => hasTextPatternsLookup(editor);\n      editor.on('keydown', e => {\n        if (e.keyCode === 13 && !VK.modifierPressed(e) && editor.selection.isCollapsed()) {\n          const patternSet = filterByTrigger(getPatternSet(), 'enter');\n          const hasPatterns = patternSet.inlinePatterns.length > 0 || patternSet.blockPatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns && handleEnter(editor, patternSet)) {\n            e.preventDefault();\n          }\n        }\n      }, true);\n      editor.on('keydown', e => {\n        if (e.keyCode === 32 && editor.selection.isCollapsed()) {\n          const patternSet = filterByTrigger(getPatternSet(), 'space');\n          const hasPatterns = patternSet.blockPatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns && handleBlockPatternOnSpace(editor, patternSet)) {\n            e.preventDefault();\n          }\n        }\n      }, true);\n      const handleInlineTrigger = () => {\n        if (editor.selection.isCollapsed()) {\n          const patternSet = filterByTrigger(getPatternSet(), 'space');\n          const hasPatterns = patternSet.inlinePatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns) {\n            handleInlineKey(editor, patternSet);\n          }\n        }\n      };\n      editor.on('keyup', e => {\n        if (checkKeyCode(keyCodes, e)) {\n          handleInlineTrigger();\n        }\n      });\n      editor.on('keypress', e => {\n        if (checkCharCode(charCodes, e)) {\n          Delay.setEditorTimeout(editor, handleInlineTrigger);\n        }\n      });\n    };\n\n    const setup$1 = editor => {\n      setup$2(editor);\n    };\n\n    const Quirks = editor => {\n      const each = Tools.each;\n      const BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      const browser = Env.browser;\n      const isGecko = browser.isFirefox();\n      const isWebKit = browser.isChromium() || browser.isSafari();\n      const isiOS = Env.deviceType.isiPhone() || Env.deviceType.isiPad();\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      const setEditorCommandState = (cmd, state) => {\n        try {\n          editor.getDoc().execCommand(cmd, false, String(state));\n        } catch (ex) {\n        }\n      };\n      const isDefaultPrevented = e => {\n        return e.isDefaultPrevented();\n      };\n      const emptyEditorWhenDeleting = () => {\n        const serializeRng = rng => {\n          const body = dom.create('body');\n          const contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        const allContentsSelected = rng => {\n          const selection = serializeRng(rng);\n          const allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          const allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', e => {\n          const keyCode = e.keyCode;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE) && editor.selection.isEditable()) {\n            const isCollapsed = editor.selection.isCollapsed();\n            const body = editor.getBody();\n            if (isCollapsed && !isEmptyNode(editor.schema, body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      const selectAll = () => {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      const documentElementEditingFocus = () => {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', e => {\n            let rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      const removeHrOnBackspace = () => {\n        editor.on('keydown', e => {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              const node = selection.getNode();\n              const previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      const focusBody = () => {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', e => {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              const body = editor.getBody();\n              body.blur();\n              Delay.setEditorTimeout(editor, () => {\n                body.focus();\n              });\n            }\n          });\n        }\n      };\n      const selectControlElements = () => {\n        const visualAidsAnchorClass = getVisualAidsAnchorClass(editor);\n        editor.on('click', e => {\n          const target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.isEditable(target)) {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, visualAidsAnchorClass) && target.childNodes.length === 0 && dom.isEditable(target.parentNode)) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      const removeStylesWhenDeletingAcrossBlockElements = () => {\n        const getAttributeApplyFunction = () => {\n          const template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return () => {\n            const target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, attr => {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        const isSelectionAcrossElements = () => {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', e => {\n          let applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          } else {\n            return true;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', e => {\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            const applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, () => {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      const disableBackspaceIntoATable = () => {\n        editor.on('keydown', e => {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              const previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n          return true;\n        });\n      };\n      const removeBlockQuoteOnBackSpace = () => {\n        editor.on('keydown', e => {\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          let rng = selection.getRng();\n          const container = rng.startContainer;\n          const offset = rng.startOffset;\n          const root = dom.getRoot();\n          let parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.nodeName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', undefined, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      const setGeckoEditingOptions = () => {\n        const setOpts = () => {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      const addBrAfterLastLinks = () => {\n        const fixLinks = () => {\n          each(dom.select('a:not([data-mce-block])'), node => {\n            var _a;\n            let parentNode = node.parentNode;\n            const root = dom.getRoot();\n            if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.lastChild) === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (((_a = parentNode.parentNode) === null || _a === void 0 ? void 0 : _a.lastChild) !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', e => {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      const setDefaultBlockType = () => {\n        editor.on('init', () => {\n          setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n        });\n      };\n      const isAllContentSelected = editor => {\n        const body = editor.getBody();\n        const rng = editor.selection.getRng();\n        return rng.startContainer === rng.endContainer && rng.startContainer === body && rng.startOffset === 0 && rng.endOffset === body.childNodes.length;\n      };\n      const normalizeSelection = () => {\n        editor.on('keyup focusin mouseup', e => {\n          if (!VK.modifierPressed(e) && !isAllContentSelected(editor)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      const showBrokenImageIcon = () => {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      const restoreFocusOnKeyDown = () => {\n        if (!editor.inline) {\n          editor.on('keydown', () => {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      const bodyHeight = () => {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', e => {\n            let rng;\n            if (e.target.nodeName === 'HTML') {\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      const blockCmdArrowNavigation = () => {\n        if (isMac) {\n          editor.on('keydown', e => {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              const selection = editor.selection.getSel();\n              selection.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      const tapLinksAndImages = () => {\n        editor.on('click', e => {\n          let elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      const blockFormSubmitInsideEditor = () => {\n        editor.on('init', () => {\n          editor.dom.bind(editor.getBody(), 'submit', e => {\n            e.preventDefault();\n          });\n        });\n      };\n      const removeAppleInterchangeBrs = () => {\n        parser.addNodeFilter('br', nodes => {\n          let i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      const refreshContentEditable = noop;\n      const isHidden = () => {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        const sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      const setupRtc = () => {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (isiOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      const setup = () => {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (isiOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable,\n        isHidden\n      };\n    };\n\n    const isGplKey = key => key.toLowerCase() === 'gpl';\n    const isValidGeneratedKey = key => key.length >= 64 && key.length <= 255;\n    const validateLicenseKey = key => isGplKey(key) || isValidGeneratedKey(key) ? 'VALID' : 'INVALID';\n    const validateEditorLicenseKey = editor => {\n      const licenseKey = getLicenseKey(editor);\n      const hasApiKey = isString(getApiKey(editor));\n      if (!hasApiKey && (isUndefined(licenseKey) || validateLicenseKey(licenseKey) === 'INVALID')) {\n        console.warn(`TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/`);\n      }\n    };\n\n    const DOM$6 = DOMUtils.DOM;\n    const appendStyle = (editor, text) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const container = getStyleContainer(getRootNode(body));\n      const style = SugarElement.fromTag('style');\n      set$3(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', () => {\n        remove$4(style);\n      });\n    };\n    const getRootName = editor => editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    const removeUndefined = obj => filter$4(obj, v => isUndefined(v) === false);\n    const mkParserSettings = editor => {\n      const getOption = editor.options.get;\n      const blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: getOption('allow_conditional_comments'),\n        allow_html_data_urls: getOption('allow_html_data_urls'),\n        allow_svg_data_urls: getOption('allow_svg_data_urls'),\n        allow_html_in_named_anchor: getOption('allow_html_in_named_anchor'),\n        allow_script_urls: getOption('allow_script_urls'),\n        allow_unsafe_link_target: getOption('allow_unsafe_link_target'),\n        convert_unsafe_embeds: getOption('convert_unsafe_embeds'),\n        convert_fonts_to_spans: getOption('convert_fonts_to_spans'),\n        fix_list_elements: getOption('fix_list_elements'),\n        font_size_legacy_values: getOption('font_size_legacy_values'),\n        forced_root_block: getOption('forced_root_block'),\n        forced_root_block_attrs: getOption('forced_root_block_attrs'),\n        preserve_cdata: getOption('preserve_cdata'),\n        inline_styles: getOption('inline_styles'),\n        root_name: getRootName(editor),\n        sandbox_iframes: getOption('sandbox_iframes'),\n        sandbox_iframes_exclusions: getSandboxIframesExclusions(editor),\n        sanitize: getOption('xss_sanitization'),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc()\n      });\n    };\n    const mkSchemaSettings = editor => {\n      const getOption = editor.options.get;\n      return removeUndefined({\n        custom_elements: getOption('custom_elements'),\n        extended_valid_elements: getOption('extended_valid_elements'),\n        invalid_elements: getOption('invalid_elements'),\n        invalid_styles: getOption('invalid_styles'),\n        schema: getOption('schema'),\n        valid_children: getOption('valid_children'),\n        valid_classes: getOption('valid_classes'),\n        valid_elements: getOption('valid_elements'),\n        valid_styles: getOption('valid_styles'),\n        verify_html: getOption('verify_html'),\n        padd_empty_block_inline_children: getOption('format_empty_lines')\n      });\n    };\n    const mkSerializerSettings = editor => {\n      const getOption = editor.options.get;\n      return {\n        ...mkParserSettings(editor),\n        ...mkSchemaSettings(editor),\n        ...removeUndefined({\n          remove_trailing_brs: getOption('remove_trailing_brs'),\n          pad_empty_with_br: getOption('pad_empty_with_br'),\n          url_converter: getOption('url_converter'),\n          url_converter_scope: getOption('url_converter_scope'),\n          element_format: getOption('element_format'),\n          entities: getOption('entities'),\n          entity_encoding: getOption('entity_encoding'),\n          indent: getOption('indent'),\n          indent_after: getOption('indent_after'),\n          indent_before: getOption('indent_before')\n        })\n      };\n    };\n    const createParser = editor => {\n      const parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', (nodes, name) => {\n        const dom = editor.dom;\n        const internalName = 'data-mce-' + name;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (shouldPreserveCData(editor)) {\n        parser.addNodeFilter('#cdata', nodes => {\n          var _a;\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode((_a = node.value) !== null && _a !== void 0 ? _a : '') + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', nodes => {\n        let i = nodes.length;\n        const nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          const node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1));\n          }\n        }\n      });\n      return parser;\n    };\n    const autoFocus = editor => {\n      const autoFocus = getAutoFocus(editor);\n      if (autoFocus) {\n        Delay.setEditorTimeout(editor, () => {\n          let focusEditor;\n          if (autoFocus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(autoFocus);\n          }\n          if (focusEditor && !focusEditor.destroyed) {\n            focusEditor.focus();\n            focusEditor.selection.scrollIntoView();\n          }\n        }, 100);\n      }\n    };\n    const moveSelectionToFirstCaretPosition = editor => {\n      const root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(pos => {\n          const node = pos.getNode();\n          const caretPos = isTable$2(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    const initEditor = editor => {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      const initInstanceCallback = getInitInstanceCallback(editor);\n      if (isFunction(initInstanceCallback)) {\n        initInstanceCallback.call(editor, editor);\n      }\n      autoFocus(editor);\n    };\n    const getStyleSheetLoader$1 = editor => editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    const makeStylesheetLoadingPromises = (editor, css, framedFonts) => {\n      const {\n        pass: bundledCss,\n        fail: normalCss\n      } = partition$2(css, name => tinymce.Resource.has(toContentSkinResourceName(name)));\n      const bundledPromises = bundledCss.map(url => {\n        const css = tinymce.Resource.get(toContentSkinResourceName(url));\n        if (isString(css)) {\n          return Promise.resolve(getStyleSheetLoader$1(editor).loadRawCss(url, css));\n        }\n        return Promise.resolve();\n      });\n      const promises = [\n        ...bundledPromises,\n        getStyleSheetLoader$1(editor).loadAll(normalCss)\n      ];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([editor.ui.styleSheetLoader.loadAll(framedFonts)]);\n      }\n    };\n    const loadContentCss = editor => {\n      const styleSheetLoader = getStyleSheetLoader$1(editor);\n      const fontCss = getFontCss(editor);\n      const css = editor.contentCSS;\n      const removeCss = () => {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      const loaded = () => {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        let contentCssText = '';\n        Tools.each(editor.contentStyles, style => {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      const allStylesheets = Promise.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      const contentStyle = getContentStyle(editor);\n      if (contentStyle) {\n        appendStyle(editor, contentStyle);\n      }\n      return allStylesheets;\n    };\n    const preInit = editor => {\n      const doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!shouldBrowserSpellcheck(editor)) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      const directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      const protect = getProtect(editor);\n      if (protect) {\n        editor.on('BeforeSetContent', e => {\n          Tools.each(protect, pattern => {\n            e.content = e.content.replace(pattern, str => {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', () => {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', e => {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    const loadInitialContent = editor => {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    const initEditorWithInitialContent = editor => {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    const startProgress = editor => {\n      let canceled = false;\n      const progressTimeout = setTimeout(() => {\n        if (!canceled) {\n          editor.setProgressState(true);\n        }\n      }, 500);\n      return () => {\n        clearTimeout(progressTimeout);\n        canceled = true;\n        editor.setProgressState(false);\n      };\n    };\n    const contentBodyLoaded = editor => {\n      const targetElm = editor.getElement();\n      let doc = editor.getDoc();\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      const body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = isReadOnly$1(editor);\n      editor._editableRoot = hasEditableRoot$1(editor);\n      if (!editor.readonly && editor.hasEditableRoot()) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = 'true';\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: editor.inline,\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: e => {\n          editor.dispatch('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$p(editor);\n      setup$6(editor);\n      setup$n(editor);\n      if (!isRtc(editor)) {\n        setup$5(editor);\n        setup$1(editor);\n      }\n      const caret = setup$b(editor);\n      setup$q(editor, caret);\n      setup$o(editor);\n      setup$r(editor);\n      setup$7(editor);\n      const setupRtcThunk = setup$t(editor);\n      preInit(editor);\n      validateEditorLicenseKey(editor);\n      setupRtcThunk.fold(() => {\n        const cancelProgress = startProgress(editor);\n        loadContentCss(editor).then(() => {\n          initEditorWithInitialContent(editor);\n          cancelProgress();\n        });\n      }, setupRtc => {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(() => {\n          setupRtc().then(_rtcMode => {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n            bindEvents(editor);\n          }, err => {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n            bindEvents(editor);\n          });\n        });\n      });\n    };\n\n    const filter = always;\n    const bind = (element, event, handler) => bind$2(element, event, filter, handler);\n\n    const DOM$5 = DOMUtils.DOM;\n    const createIframeElement = (id, title, customAttrs, tabindex) => {\n      const iframe = SugarElement.fromTag('iframe');\n      tabindex.each(t => set$3(iframe, 'tabindex', t));\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title\n      });\n      add$2(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    const getIframeHtml = editor => {\n      let iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      const bodyId = getBodyId(editor);\n      const bodyClass = getBodyClass(editor);\n      const translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + `<body id=\"${ bodyId }\" class=\"mce-content-body ${ bodyClass }\" data-id=\"${ editor.id }\" aria-label=\"${ translatedAriaText }\">` + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    const createIframe = (editor, boxInfo) => {\n      const iframeTitle = editor.translate('Rich Text Area');\n      const tabindex = getOpt(SugarElement.fromDom(editor.getElement()), 'tabindex').bind(toInt);\n      const ifr = createIframeElement(editor.id, iframeTitle, getIframeAttrs(editor), tabindex).dom;\n      ifr.onload = () => {\n        ifr.onload = null;\n        editor.dispatch('load');\n      };\n      editor.contentAreaContainer = boxInfo.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(boxInfo.iframeContainer, ifr);\n    };\n    const setupIframeBody = editor => {\n      const iframe = editor.iframeElement;\n      const ready = () => {\n        editor.contentDocument = iframe.contentDocument;\n        contentBodyLoaded(editor);\n      };\n      if (shouldUseDocumentWrite(editor) || Env.browser.isFirefox()) {\n        const doc = editor.getDoc();\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n        ready();\n      } else {\n        const binder = bind(SugarElement.fromDom(iframe), 'load', () => {\n          binder.unbind();\n          ready();\n        });\n        iframe.srcdoc = editor.iframeHTML;\n      }\n    };\n    const init$1 = (editor, boxInfo) => {\n      createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        boxInfo.editorContainer.style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      editor.getElement().style.visibility = editor.orgVisibility;\n      setupIframeBody(editor);\n    };\n\n    const DOM$4 = DOMUtils.DOM;\n    const initPlugin = (editor, initializedPlugins, plugin) => {\n      const Plugin = PluginManager.get(plugin);\n      const pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          const pluginInstance = Plugin(editor, pluginUrl) || {};\n          editor.plugins[plugin] = pluginInstance;\n          if (isFunction(pluginInstance.init)) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    const trimLegacyPrefix = name => {\n      return name.replace(/^\\-/, '');\n    };\n    const initPlugins = editor => {\n      const initializedPlugins = [];\n      each$e(getPlugins(editor), name => {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    const initIcons = editor => {\n      const iconPackName = Tools.trim(getIconPackName(editor));\n      const currentIcons = editor.ui.registry.getAll().icons;\n      const loadIcons = {\n        ...IconManager.get('default').icons,\n        ...IconManager.get(iconPackName).icons\n      };\n      each$d(loadIcons, (svgData, icon) => {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    const initTheme = editor => {\n      const theme = getTheme(editor);\n      if (isString(theme)) {\n        const Theme = ThemeManager.get(theme);\n        editor.theme = Theme(editor, ThemeManager.urls[theme]) || {};\n        if (isFunction(editor.theme.init)) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''));\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    const initModel = editor => {\n      const model = getModel(editor);\n      const Model = ModelManager.get(model);\n      editor.model = Model(editor, ModelManager.urls[model]);\n    };\n    const renderFromLoadedTheme = editor => {\n      const render = editor.theme.renderUI;\n      return render ? render() : renderThemeFalse(editor);\n    };\n    const renderFromThemeFunc = editor => {\n      const elm = editor.getElement();\n      const theme = getTheme(editor);\n      const info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    const createThemeFalseResult = (element, iframe) => {\n      return {\n        editorContainer: element,\n        iframeContainer: iframe,\n        api: {}\n      };\n    };\n    const renderThemeFalseIframe = targetElement => {\n      const iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer, iframeContainer);\n    };\n    const renderThemeFalse = editor => {\n      const targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    const renderThemeUi = editor => {\n      const elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    const augmentEditorUiApi = (editor, api) => {\n      const uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        isEnabled: Optional.from(api.isEnabled).getOr(always),\n        setEnabled: state => {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.setEnabled).each(f => f(state));\n          }\n        }\n      };\n      editor.ui = {\n        ...editor.ui,\n        ...uiApiFacade\n      };\n    };\n    const init = async editor => {\n      editor.dispatch('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initModel(editor);\n      initPlugins(editor);\n      const renderInfo = await renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      editor.editorContainer = renderInfo.editorContainer;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        contentBodyLoaded(editor);\n      } else {\n        init$1(editor, {\n          editorContainer: renderInfo.editorContainer,\n          iframeContainer: renderInfo.iframeContainer\n        });\n      }\n    };\n\n    const DOM$3 = DOMUtils.DOM;\n    const hasSkipLoadPrefix = name => name.charAt(0) === '-';\n    const loadLanguage = (scriptLoader, editor) => {\n      const languageCode = getLanguageCode(editor);\n      const languageUrl = getLanguageUrl(editor);\n      if (!I18n.hasCode(languageCode) && languageCode !== 'en') {\n        const url = isNotEmpty(languageUrl) ? languageUrl : `${ editor.editorManager.baseURL }/langs/${ languageCode }.js`;\n        scriptLoader.add(url).catch(() => {\n          languageLoadError(editor, url, languageCode);\n        });\n      }\n    };\n    const loadTheme = (editor, suffix) => {\n      const theme = getTheme(editor);\n      if (isString(theme) && !hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n        const themeUrl = getThemeUrl(editor);\n        const url = themeUrl ? editor.documentBaseURI.toAbsolute(themeUrl) : `themes/${ theme }/theme${ suffix }.js`;\n        ThemeManager.load(theme, url).catch(() => {\n          themeLoadError(editor, url, theme);\n        });\n      }\n    };\n    const loadModel = (editor, suffix) => {\n      const model = getModel(editor);\n      if (model !== 'plugin' && !has$2(ModelManager.urls, model)) {\n        const modelUrl = getModelUrl(editor);\n        const url = isString(modelUrl) ? editor.documentBaseURI.toAbsolute(modelUrl) : `models/${ model }/model${ suffix }.js`;\n        ModelManager.load(model, url).catch(() => {\n          modelLoadError(editor, url, model);\n        });\n      }\n    };\n    const getIconsUrlMetaFromUrl = editor => Optional.from(getIconsUrl(editor)).filter(isNotEmpty).map(url => ({\n      url,\n      name: Optional.none()\n    }));\n    const getIconsUrlMetaFromName = (editor, name, suffix) => Optional.from(name).filter(name => isNotEmpty(name) && !IconManager.has(name)).map(name => ({\n      url: `${ editor.editorManager.baseURL }/icons/${ name }/icons${ suffix }.js`,\n      name: Optional.some(name)\n    }));\n    const loadIcons = (scriptLoader, editor, suffix) => {\n      const defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      const customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(() => getIconsUrlMetaFromName(editor, getIconPackName(editor), ''));\n      each$e(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), urlMeta => {\n        scriptLoader.add(urlMeta.url).catch(() => {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    const loadPlugins = (editor, suffix) => {\n      const loadPlugin = (name, url) => {\n        PluginManager.load(name, url).catch(() => {\n          pluginLoadError(editor, url, name);\n        });\n      };\n      each$d(getExternalPlugins$1(editor), (url, name) => {\n        loadPlugin(name, url);\n        editor.options.set('plugins', getPlugins(editor).concat(name));\n      });\n      each$e(getPlugins(editor), plugin => {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin] && !hasSkipLoadPrefix(plugin)) {\n          loadPlugin(plugin, `plugins/${ plugin }/plugin${ suffix }.js`);\n        }\n      });\n    };\n    const isThemeLoaded = editor => {\n      const theme = getTheme(editor);\n      return !isString(theme) || isNonNullable(ThemeManager.get(theme));\n    };\n    const isModelLoaded = editor => {\n      const model = getModel(editor);\n      return isNonNullable(ModelManager.get(model));\n    };\n    const loadScripts = (editor, suffix) => {\n      const scriptLoader = ScriptLoader.ScriptLoader;\n      const initEditor = () => {\n        if (!editor.removed && isThemeLoaded(editor) && isModelLoaded(editor)) {\n          init(editor);\n        }\n      };\n      loadTheme(editor, suffix);\n      loadModel(editor, suffix);\n      loadLanguage(scriptLoader, editor);\n      loadIcons(scriptLoader, editor, suffix);\n      loadPlugins(editor, suffix);\n      scriptLoader.loadQueue().then(initEditor, initEditor);\n    };\n    const getStyleSheetLoader = (element, editor) => instance.forElement(element, {\n      contentCssCors: hasContentCssCors(editor),\n      referrerPolicy: getReferrerPolicy(editor)\n    });\n    const render = editor => {\n      const id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      const readyHandler = () => {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      const element = SugarElement.fromDom(editor.getElement());\n      const snapshot = clone$4(element);\n      editor.on('remove', () => {\n        eachr(element.dom.attributes, attr => remove$9(element, attr.name));\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline$1(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      const form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = e => {\n          editor.dispatch(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', () => {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = () => {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', e => {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', () => {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = () => {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    const setEditableRoot = (editor, state) => {\n      if (editor._editableRoot !== state) {\n        editor._editableRoot = state;\n        if (!editor.readonly) {\n          editor.getBody().contentEditable = String(editor.hasEditableRoot());\n          editor.nodeChanged();\n        }\n        fireEditableRootStateChange(editor, state);\n      }\n    };\n    const hasEditableRoot = editor => editor._editableRoot;\n\n    const sectionResult = (sections, settings) => ({\n      sections: constant(sections),\n      options: constant(settings)\n    });\n    const deviceDetection = detect$1().deviceType;\n    const isPhone = deviceDetection.isPhone();\n    const isTablet = deviceDetection.isTablet();\n    const normalizePlugins = plugins => {\n      if (isNullable(plugins)) {\n        return [];\n      } else {\n        const pluginNames = isArray$1(plugins) ? plugins : plugins.split(/[ ,]/);\n        const trimmedPlugins = map$3(pluginNames, trim$4);\n        return filter$5(trimmedPlugins, isNotEmpty);\n      }\n    };\n    const extractSections = (keys, options) => {\n      const result = bifilter(options, (value, key) => {\n        return contains$2(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    const getSection = (sectionResult, name, defaults = {}) => {\n      const sections = sectionResult.sections();\n      const sectionOptions = get$a(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionOptions);\n    };\n    const hasSection = (sectionResult, name) => {\n      return has$2(sectionResult.sections(), name);\n    };\n    const getSectionConfig = (sectionResult, name) => {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    const getMobileOverrideOptions = (mobileOptions, isPhone) => {\n      const defaultMobileOptions = {\n        table_grid: false,\n        object_resizing: false,\n        resize: false,\n        toolbar_mode: get$a(mobileOptions, 'toolbar_mode').getOr('scrolling'),\n        toolbar_sticky: false\n      };\n      const defaultPhoneOptions = { menubar: false };\n      return {\n        ...defaultMobileOptions,\n        ...isPhone ? defaultPhoneOptions : {}\n      };\n    };\n    const getExternalPlugins = (overrideOptions, options) => {\n      var _a;\n      const userDefinedExternalPlugins = (_a = options.external_plugins) !== null && _a !== void 0 ? _a : {};\n      if (overrideOptions && overrideOptions.external_plugins) {\n        return Tools.extend({}, overrideOptions.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    const combinePlugins = (forcedPlugins, plugins) => [\n      ...normalizePlugins(forcedPlugins),\n      ...normalizePlugins(plugins)\n    ];\n    const getPlatformPlugins = (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) => {\n      if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    const processPlugins = (isMobileDevice, sectionResult, defaultOverrideOptions, options) => {\n      const forcedPlugins = normalizePlugins(defaultOverrideOptions.forced_plugins);\n      const desktopPlugins = normalizePlugins(options.plugins);\n      const mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      const mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      const platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      const combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(options, {\n        forced_plugins: forcedPlugins,\n        plugins: combinedPlugins\n      });\n    };\n    const isOnMobile = (isMobileDevice, sectionResult) => {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    const combineOptions = (isMobileDevice, isPhone, defaultOptions, defaultOverrideOptions, options) => {\n      var _a;\n      const deviceOverrideOptions = isMobileDevice ? { mobile: getMobileOverrideOptions((_a = options.mobile) !== null && _a !== void 0 ? _a : {}, isPhone) } : {};\n      const sectionResult = extractSections(['mobile'], deepMerge(deviceOverrideOptions, options));\n      const extendedOptions = Tools.extend(defaultOptions, defaultOverrideOptions, sectionResult.options(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, { external_plugins: getExternalPlugins(defaultOverrideOptions, sectionResult.options()) });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideOptions, extendedOptions);\n    };\n    const normalizeOptions = (defaultOverrideOptions, options) => combineOptions(isPhone || isTablet, isPhone, options, defaultOverrideOptions, options);\n\n    const addVisual = (editor, elm) => addVisual$1(editor, elm);\n\n    const registerExecCommands$2 = editor => {\n      const toggleFormat = (name, value) => {\n        editor.formatter.toggle(name, value);\n        editor.nodeChanged();\n      };\n      const toggleAlign = align => () => {\n        each$e('left,center,right,justify'.split(','), name => {\n          if (align !== name) {\n            editor.formatter.remove('align' + name);\n          }\n        });\n        if (align !== 'none') {\n          toggleFormat('align' + align);\n        }\n      };\n      editor.editorCommands.addCommands({\n        JustifyLeft: toggleAlign('left'),\n        JustifyCenter: toggleAlign('center'),\n        JustifyRight: toggleAlign('right'),\n        JustifyFull: toggleAlign('justify'),\n        JustifyNone: toggleAlign('none')\n      });\n    };\n    const registerQueryStateCommands = editor => {\n      const alignStates = name => () => {\n        const selection = editor.selection;\n        const nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n        return exists(nodes, node => isNonNullable(editor.formatter.matchNode(node, name)));\n      };\n      editor.editorCommands.addCommands({\n        JustifyLeft: alignStates('alignleft'),\n        JustifyCenter: alignStates('aligncenter'),\n        JustifyRight: alignStates('alignright'),\n        JustifyFull: alignStates('alignjustify')\n      }, 'state');\n    };\n    const registerCommands$a = editor => {\n      registerExecCommands$2(editor);\n      registerQueryStateCommands(editor);\n    };\n\n    const registerCommands$9 = editor => {\n      editor.editorCommands.addCommands({\n        'Cut,Copy,Paste': command => {\n          const doc = editor.getDoc();\n          let failed;\n          try {\n            doc.execCommand(command);\n          } catch (ex) {\n            failed = true;\n          }\n          if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n            failed = true;\n          }\n          if (failed || !doc.queryCommandSupported(command)) {\n            let msg = editor.translate(`Your browser doesn't support direct access to the clipboard. ` + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n            if (Env.os.isMacOS() || Env.os.isiOS()) {\n              msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n            }\n            editor.notificationManager.open({\n              text: msg,\n              type: 'error'\n            });\n          }\n        }\n      });\n    };\n\n    const trimOrPadLeftRight = (dom, rng, html, schema) => {\n      const root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng), schema)) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng), schema)) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    const processValue$1 = value => {\n      if (typeof value !== 'string') {\n        const details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    const trimOrPad = (editor, value) => {\n      const selection = editor.selection;\n      const dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        return trimOrPadLeftRight(dom, selection.getRng(), value, editor.schema);\n      } else {\n        return value;\n      }\n    };\n    const insertAtCaret = (editor, value) => {\n      if (editor.selection.isEditable()) {\n        const {content, details} = processValue$1(value);\n        preProcessSetContent(editor, {\n          ...details,\n          content: trimOrPad(editor, content),\n          format: 'html',\n          set: false,\n          selection: true\n        }).each(args => {\n          const insertedContent = insertContent$1(editor, args.content, details);\n          postProcessSetContent(editor, insertedContent, args);\n          editor.addVisual();\n        });\n      }\n    };\n\n    const registerCommands$8 = editor => {\n      editor.editorCommands.addCommands({\n        mceCleanup: () => {\n          const bm = editor.selection.getBookmark();\n          editor.setContent(editor.getContent());\n          editor.selection.moveToBookmark(bm);\n        },\n        insertImage: (_command, _ui, value) => {\n          insertAtCaret(editor, editor.dom.createHTML('img', { src: value }));\n        },\n        insertHorizontalRule: () => {\n          editor.execCommand('mceInsertContent', false, '<hr>');\n        },\n        insertText: (_command, _ui, value) => {\n          insertAtCaret(editor, editor.dom.encode(value));\n        },\n        insertHTML: (_command, _ui, value) => {\n          insertAtCaret(editor, value);\n        },\n        mceInsertContent: (_command, _ui, value) => {\n          insertAtCaret(editor, value);\n        },\n        mceSetContent: (_command, _ui, value) => {\n          editor.setContent(value);\n        },\n        mceReplaceContent: (_command, _ui, value) => {\n          editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n        },\n        mceNewDocument: () => {\n          editor.setContent(getNewDocumentContent(editor));\n        }\n      });\n    };\n\n    const legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    const isFont = isTag('font');\n    const getSpecifiedFontProp = (propName, rootElm, elm) => {\n      const getProperty = elm => getRaw(elm, propName).orThunk(() => {\n        if (isFont(elm)) {\n          return get$a(legacyPropNames, propName).bind(legacyPropName => getOpt(elm, legacyPropName));\n        } else {\n          return Optional.none();\n        }\n      });\n      const isRoot = elm => eq(SugarElement.fromDom(rootElm), elm);\n      return closest$1(SugarElement.fromDom(elm), elm => getProperty(elm), isRoot);\n    };\n    const normalizeFontFamily = fontFamily => fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    const getComputedFontProp = (propName, elm) => Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    const getFontProp = propName => (rootElm, elm) => Optional.from(elm).map(SugarElement.fromDom).filter(isElement$7).bind(element => getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom))).getOr('');\n    const getFontSize = getFontProp('font-size');\n    const getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    const findFirstCaretElement = editor => firstPositionIn(editor.getBody()).bind(caret => {\n      const container = caret.container();\n      return Optional.from(isText$b(container) ? container.parentNode : container);\n    });\n    const getCaretElement = editor => Optional.from(editor.selection.getRng()).bind(rng => {\n      const root = editor.getBody();\n      const atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n      return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n    });\n    const bindRange = (editor, binder) => getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$7).bind(binder);\n    const mapRange = (editor, mapper) => bindRange(editor, compose1(Optional.some, mapper));\n\n    const fromFontSizeNumber = (editor, value) => {\n      if (/^[0-9.]+$/.test(value)) {\n        const fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          const fontSizes = getFontStyleValues(editor);\n          const fontClasses = getFontSizeClasses(editor);\n          if (fontClasses.length > 0) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    const normalizeFontNames = font => {\n      const fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, font => {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, `'`))) {\n          return `'${ font }'`;\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    const fontNameAction = (editor, value) => {\n      const font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    const fontNameQuery = editor => mapRange(editor, elm => getFontFamily(editor.getBody(), elm.dom)).getOr('');\n    const fontSizeAction = (editor, value) => {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    const fontSizeQuery = editor => mapRange(editor, elm => getFontSize(editor.getBody(), elm.dom)).getOr('');\n\n    const lineHeightQuery = editor => mapRange(editor, elm => {\n      const root = SugarElement.fromDom(editor.getBody());\n      const specifiedStyle = closest$1(elm, elm => getRaw(elm, 'line-height'), curry(eq, root));\n      const computedStyle = () => {\n        const lineHeight = parseFloat(get$7(elm, 'line-height'));\n        const fontSize = parseFloat(get$7(elm, 'font-size'));\n        return String(lineHeight / fontSize);\n      };\n      return specifiedStyle.getOrThunk(computedStyle);\n    }).getOr('');\n    const lineHeightAction = (editor, lineHeight) => {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    const registerExecCommands$1 = editor => {\n      const toggleFormat = (name, value) => {\n        editor.formatter.toggle(name, value);\n        editor.nodeChanged();\n      };\n      editor.editorCommands.addCommands({\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': command => {\n          toggleFormat(command);\n        },\n        'ForeColor,HiliteColor': (command, _ui, value) => {\n          toggleFormat(command, { value });\n        },\n        'BackColor': (_command, _ui, value) => {\n          toggleFormat('hilitecolor', { value });\n        },\n        'FontName': (_command, _ui, value) => {\n          fontNameAction(editor, value);\n        },\n        'FontSize': (_command, _ui, value) => {\n          fontSizeAction(editor, value);\n        },\n        'LineHeight': (_command, _ui, value) => {\n          lineHeightAction(editor, value);\n        },\n        'Lang': (command, _ui, lang) => {\n          var _a;\n          toggleFormat(command, {\n            value: lang.code,\n            customValue: (_a = lang.customCode) !== null && _a !== void 0 ? _a : null\n          });\n        },\n        'RemoveFormat': command => {\n          editor.formatter.remove(command);\n        },\n        'mceBlockQuote': () => {\n          toggleFormat('blockquote');\n        },\n        'FormatBlock': (_command, _ui, value) => {\n          toggleFormat(isString(value) ? value : 'p');\n        },\n        'mceToggleFormat': (_command, _ui, value) => {\n          toggleFormat(value);\n        }\n      });\n    };\n    const registerQueryValueCommands = editor => {\n      const isFormatMatch = name => editor.formatter.match(name);\n      editor.editorCommands.addCommands({\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': command => isFormatMatch(command),\n        'mceBlockQuote': () => isFormatMatch('blockquote')\n      }, 'state');\n      editor.editorCommands.addQueryValueHandler('FontName', () => fontNameQuery(editor));\n      editor.editorCommands.addQueryValueHandler('FontSize', () => fontSizeQuery(editor));\n      editor.editorCommands.addQueryValueHandler('LineHeight', () => lineHeightQuery(editor));\n    };\n    const registerCommands$7 = editor => {\n      registerExecCommands$1(editor);\n      registerQueryValueCommands(editor);\n    };\n\n    const registerCommands$6 = editor => {\n      editor.editorCommands.addCommands({\n        mceAddUndoLevel: () => {\n          editor.undoManager.add();\n        },\n        mceEndUndoLevel: () => {\n          editor.undoManager.add();\n        },\n        Undo: () => {\n          editor.undoManager.undo();\n        },\n        Redo: () => {\n          editor.undoManager.redo();\n        }\n      });\n    };\n\n    const registerCommands$5 = editor => {\n      editor.editorCommands.addCommands({\n        Indent: () => {\n          indent(editor);\n        },\n        Outdent: () => {\n          outdent(editor);\n        }\n      });\n      editor.editorCommands.addCommands({ Outdent: () => canOutdent(editor) }, 'state');\n    };\n\n    const registerCommands$4 = editor => {\n      const applyLinkToSelection = (_command, _ui, value) => {\n        const linkDetails = isString(value) ? { href: value } : value;\n        const anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n        if (isObject(linkDetails) && isString(linkDetails.href)) {\n          linkDetails.href = linkDetails.href.replace(/ /g, '%20');\n          if (!anchor || !linkDetails.href) {\n            editor.formatter.remove('link');\n          }\n          if (linkDetails.href) {\n            editor.formatter.apply('link', linkDetails, anchor);\n          }\n        }\n      };\n      editor.editorCommands.addCommands({\n        unlink: () => {\n          if (editor.selection.isEditable()) {\n            if (editor.selection.isCollapsed()) {\n              const elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          }\n        },\n        mceInsertLink: applyLinkToSelection,\n        createLink: applyLinkToSelection\n      });\n    };\n\n    const getTopParentBlock = (editor, node, root, container) => {\n      const dom = editor.dom;\n      const selector = node => dom.isBlock(node) && node.parentElement === root;\n      const topParentBlock = selector(node) ? node : dom.getParent(container, selector, root);\n      return Optional.from(topParentBlock).map(SugarElement.fromDom);\n    };\n    const insert = (editor, before) => {\n      const dom = editor.dom;\n      const rng = editor.selection.getRng();\n      const node = before ? editor.selection.getStart() : editor.selection.getEnd();\n      const container = before ? rng.startContainer : rng.endContainer;\n      const root = getEditableRoot(dom, container);\n      if (!root || !root.isContentEditable) {\n        return;\n      }\n      const insertFn = before ? before$3 : after$4;\n      const newBlockName = getForcedRootBlock(editor);\n      getTopParentBlock(editor, node, root, container).each(parentBlock => {\n        const newBlock = createNewBlock(editor, container, parentBlock.dom, root, false, newBlockName);\n        insertFn(parentBlock, SugarElement.fromDom(newBlock));\n        editor.selection.setCursorLocation(newBlock, 0);\n        editor.dispatch('NewBlock', { newBlock });\n        fireInputEvent(editor, 'insertParagraph');\n      });\n    };\n    const insertBefore = editor => insert(editor, true);\n    const insertAfter = editor => insert(editor, false);\n\n    const registerCommands$3 = editor => {\n      editor.editorCommands.addCommands({\n        InsertNewBlockBefore: () => {\n          insertBefore(editor);\n        },\n        InsertNewBlockAfter: () => {\n          insertAfter(editor);\n        }\n      });\n    };\n\n    const registerCommands$2 = editor => {\n      editor.editorCommands.addCommands({\n        insertParagraph: () => {\n          insertBreak(blockbreak, editor);\n        },\n        mceInsertNewLine: (_command, _ui, value) => {\n          insert$1(editor, value);\n        },\n        InsertLineBreak: (_command, _ui, _value) => {\n          insertBreak(linebreak, editor);\n        }\n      });\n    };\n\n    const registerCommands$1 = editor => {\n      editor.editorCommands.addCommands({\n        mceSelectNodeDepth: (_command, _ui, value) => {\n          let counter = 0;\n          editor.dom.getParent(editor.selection.getNode(), node => {\n            if (isElement$6(node) && counter++ === value) {\n              editor.selection.select(node);\n              return false;\n            } else {\n              return true;\n            }\n          }, editor.getBody());\n        },\n        mceSelectNode: (_command, _ui, value) => {\n          editor.selection.select(value);\n        },\n        selectAll: () => {\n          const editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$3);\n          if (editingHost) {\n            const rng = editor.dom.createRng();\n            rng.selectNodeContents(editingHost);\n            editor.selection.setRng(rng);\n          }\n        }\n      });\n    };\n\n    const registerExecCommands = editor => {\n      editor.editorCommands.addCommands({\n        mceRemoveNode: (_command, _ui, value) => {\n          const node = value !== null && value !== void 0 ? value : editor.selection.getNode();\n          if (node !== editor.getBody()) {\n            const bm = editor.selection.getBookmark();\n            editor.dom.remove(node, true);\n            editor.selection.moveToBookmark(bm);\n          }\n        },\n        mcePrint: () => {\n          editor.getWin().print();\n        },\n        mceFocus: (_command, _ui, value) => {\n          focus(editor, value === true);\n        },\n        mceToggleVisualAid: () => {\n          editor.hasVisual = !editor.hasVisual;\n          editor.addVisual();\n        }\n      });\n    };\n    const registerCommands = editor => {\n      registerCommands$a(editor);\n      registerCommands$9(editor);\n      registerCommands$6(editor);\n      registerCommands$1(editor);\n      registerCommands$8(editor);\n      registerCommands$4(editor);\n      registerCommands$5(editor);\n      registerCommands$3(editor);\n      registerCommands$2(editor);\n      registerCommands$7(editor);\n      registerExecCommands(editor);\n    };\n\n    const selectionSafeCommands = ['toggleview'];\n    const isSelectionSafeCommand = command => contains$2(selectionSafeCommands, command.toLowerCase());\n    class EditorCommands {\n      constructor(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n      }\n      execCommand(command, ui = false, value, args) {\n        const editor = this.editor;\n        const lowerCaseCommand = command.toLowerCase();\n        const skipFocus = args === null || args === void 0 ? void 0 : args.skip_focus;\n        if (editor.removed) {\n          return false;\n        }\n        if (lowerCaseCommand !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(lowerCaseCommand) && !skipFocus) {\n            editor.focus();\n          } else {\n            restore(editor);\n          }\n        }\n        const eventArgs = editor.dispatch('BeforeExecCommand', {\n          command,\n          ui,\n          value\n        });\n        if (eventArgs.isDefaultPrevented()) {\n          return false;\n        }\n        const func = this.commands.exec[lowerCaseCommand];\n        if (isFunction(func)) {\n          func(lowerCaseCommand, ui, value);\n          editor.dispatch('ExecCommand', {\n            command,\n            ui,\n            value\n          });\n          return true;\n        }\n        return false;\n      }\n      queryCommandState(command) {\n        if (!isSelectionSafeCommand(command) && this.editor.quirks.isHidden() || this.editor.removed) {\n          return false;\n        }\n        const lowerCaseCommand = command.toLowerCase();\n        const func = this.commands.state[lowerCaseCommand];\n        if (isFunction(func)) {\n          return func(lowerCaseCommand);\n        }\n        return false;\n      }\n      queryCommandValue(command) {\n        if (!isSelectionSafeCommand(command) && this.editor.quirks.isHidden() || this.editor.removed) {\n          return '';\n        }\n        const lowerCaseCommand = command.toLowerCase();\n        const func = this.commands.value[lowerCaseCommand];\n        if (isFunction(func)) {\n          return func(lowerCaseCommand);\n        }\n        return '';\n      }\n      addCommands(commandList, type = 'exec') {\n        const commands = this.commands;\n        each$d(commandList, (callback, command) => {\n          each$e(command.toLowerCase().split(','), command => {\n            commands[type][command] = callback;\n          });\n        });\n      }\n      addCommand(command, callback, scope) {\n        const lowerCaseCommand = command.toLowerCase();\n        this.commands.exec[lowerCaseCommand] = (_command, ui, value) => callback.call(scope !== null && scope !== void 0 ? scope : this.editor, ui, value);\n      }\n      queryCommandSupported(command) {\n        const lowerCaseCommand = command.toLowerCase();\n        if (this.commands.exec[lowerCaseCommand]) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n      addQueryStateHandler(command, callback, scope) {\n        this.commands.state[command.toLowerCase()] = () => callback.call(scope !== null && scope !== void 0 ? scope : this.editor);\n      }\n      addQueryValueHandler(command, callback, scope) {\n        this.commands.value[command.toLowerCase()] = () => callback.call(scope !== null && scope !== void 0 ? scope : this.editor);\n      }\n    }\n\n    const internalContentEditableAttr = 'data-mce-contenteditable';\n    const toggleClass = (elm, cls, state) => {\n      if (has(elm, cls) && !state) {\n        remove$6(elm, cls);\n      } else if (state) {\n        add$2(elm, cls);\n      }\n    };\n    const setEditorCommandState = (editor, cmd, state) => {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    const setContentEditable = (elm, state) => {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    const switchOffContentEditableTrue = elm => {\n      each$e(descendants(elm, '*[contenteditable=\"true\"]'), elm => {\n        set$3(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    const switchOnContentEditableTrue = elm => {\n      each$e(descendants(elm, `*[${ internalContentEditableAttr }=\"true\"]`), elm => {\n        remove$9(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    const removeFakeSelection = editor => {\n      Optional.from(editor.selection.getNode()).each(elm => {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    const restoreFakeSelection = editor => {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    const toggleReadOnly = (editor, state) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        if (editor.hasEditableRoot()) {\n          setContentEditable(body, true);\n        }\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    const isReadOnly = editor => editor.readonly;\n    const registerFilters = editor => {\n      editor.parser.addAttributeFilter('contenteditable', nodes => {\n        if (isReadOnly(editor)) {\n          each$e(nodes, node => {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, nodes => {\n        if (isReadOnly(editor)) {\n          each$e(nodes, node => {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    const registerReadOnlyContentFilters = editor => {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', () => {\n          registerFilters(editor);\n        });\n      }\n    };\n    const isClickEvent = e => e.type === 'click';\n    const allowedEvents = ['copy'];\n    const isReadOnlyAllowedEvent = e => contains$2(allowedEvents, e.type);\n    const getAnchorHrefOpt = (editor, elm) => {\n      const isRoot = elm => eq(elm, SugarElement.fromDom(editor.getBody()));\n      return closest$3(elm, 'a', isRoot).bind(a => getOpt(a, 'href'));\n    };\n    const processReadonlyEvents = (editor, e) => {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        const elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(href => {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            const targetEl = editor.dom.select(`${ href },[name=\"${ removeLeading(href, '#') }\"]`);\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      } else if (isReadOnlyAllowedEvent(e)) {\n        editor.dispatch(e.type, e);\n      }\n    };\n    const registerReadOnlySelectionBlockers = editor => {\n      editor.on('ShowCaret', e => {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', e => {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    const nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    class EventDispatcher {\n      static isNative(name) {\n        return !!nativeEvents[name.toLowerCase()];\n      }\n      constructor(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      fire(name, args) {\n        return this.dispatch(name, args);\n      }\n      dispatch(name, args) {\n        const lcName = name.toLowerCase();\n        const event = normalize$3(lcName, args !== null && args !== void 0 ? args : {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        const handlers = this.bindings[lcName];\n        if (handlers) {\n          for (let i = 0, l = handlers.length; i < l; i++) {\n            const callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      }\n      on(name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          const wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          const names = name.toLowerCase().split(' ');\n          let i = names.length;\n          while (i--) {\n            const currentName = names[i];\n            let handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = [\n                wrappedCallback,\n                ...handlers\n              ];\n            } else {\n              handlers = [\n                ...handlers,\n                wrappedCallback\n              ];\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      }\n      off(name, callback) {\n        if (name) {\n          const names = name.toLowerCase().split(' ');\n          let i = names.length;\n          while (i--) {\n            const currentName = names[i];\n            let handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$d(this.bindings, (_value, bindingName) => {\n                this.toggleEvent(bindingName, false);\n                delete this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                const filteredHandlers = partition$2(handlers, handler => handler.func === callback);\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$e(filteredHandlers.pass, handler => {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$d(this.bindings, (_value, name) => {\n            this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      }\n      once(name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      }\n      has(name) {\n        name = name.toLowerCase();\n        const binding = this.bindings[name];\n        return !(!binding || binding.length === 0);\n      }\n    }\n\n    const getEventDispatcher = obj => {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: (name, state) => {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    const Observable = {\n      fire(name, args, bubble) {\n        return this.dispatch(name, args, bubble);\n      },\n      dispatch(name, args, bubble) {\n        const self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return normalize$3(name.toLowerCase(), args !== null && args !== void 0 ? args : {}, self);\n        }\n        const dispatcherArgs = getEventDispatcher(self).dispatch(name, args);\n        if (bubble !== false && self.parent) {\n          let parent = self.parent();\n          while (parent && !dispatcherArgs.isPropagationStopped()) {\n            parent.dispatch(name, dispatcherArgs, false);\n            parent = parent.parent ? parent.parent() : undefined;\n          }\n        }\n        return dispatcherArgs;\n      },\n      on(name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off(name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once(name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners(name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    const DOM$2 = DOMUtils.DOM;\n    let customEventRootDelegates;\n    const getEventTarget = (editor, eventName) => {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      const eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    const isListening = editor => !editor.hidden && !isReadOnly(editor);\n    const fireEvent = (editor, eventName, e) => {\n      if (isListening(editor)) {\n        editor.dispatch(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    const bindEventDelegate = (editor, eventName) => {\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      const eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', () => {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$d(customEventRootDelegates, (_value, name) => {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        const delegate = e => {\n          const target = e.target;\n          const editors = editor.editorManager.get();\n          let i = editors.length;\n          while (i--) {\n            const body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        const delegate = e => {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    const EditorObservable = {\n      ...Observable,\n      bindPendingEventDelegates() {\n        const self = this;\n        Tools.each(self._pendingNativeEvents, name => {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent(name, state) {\n        const self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized && self.delegates) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents() {\n        const self = this;\n        const body = self.getBody();\n        const dom = self.dom;\n        if (self.delegates) {\n          each$d(self.delegates, (value, name) => {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    };\n\n    const stringListProcessor = value => {\n      if (isString(value)) {\n        return {\n          value: value.split(/[ ,]/),\n          valid: true\n        };\n      } else if (isArrayOf(value, isString)) {\n        return {\n          value,\n          valid: true\n        };\n      } else {\n        return {\n          valid: false,\n          message: `The value must be a string[] or a comma/space separated string.`\n        };\n      }\n    };\n    const getBuiltInProcessor = type => {\n      const validator = (() => {\n        switch (type) {\n        case 'array':\n          return isArray$1;\n        case 'boolean':\n          return isBoolean;\n        case 'function':\n          return isFunction;\n        case 'number':\n          return isNumber;\n        case 'object':\n          return isObject;\n        case 'string':\n          return isString;\n        case 'string[]':\n          return stringListProcessor;\n        case 'object[]':\n          return val => isArrayOf(val, isObject);\n        case 'regexp':\n          return val => is$4(val, RegExp);\n        default:\n          return always;\n        }\n      })();\n      return value => processValue(value, validator, `The value must be a ${ type }.`);\n    };\n    const isBuiltInSpec = spec => isString(spec.processor);\n    const getErrorMessage = (message, result) => {\n      const additionalText = isEmpty$3(result.message) ? '' : `. ${ result.message }`;\n      return message + additionalText;\n    };\n    const isValidResult = result => result.valid;\n    const processValue = (value, processor, message = '') => {\n      const result = processor(value);\n      if (isBoolean(result)) {\n        return result ? {\n          value: value,\n          valid: true\n        } : {\n          valid: false,\n          message\n        };\n      } else {\n        return result;\n      }\n    };\n    const processDefaultValue = (name, defaultValue, processor) => {\n      if (!isUndefined(defaultValue)) {\n        const result = processValue(defaultValue, processor);\n        if (isValidResult(result)) {\n          return result.value;\n        } else {\n          console.error(getErrorMessage(`Invalid default value passed for the \"${ name }\" option`, result));\n        }\n      }\n      return undefined;\n    };\n    const create$5 = (editor, initialOptions) => {\n      const registry = {};\n      const values = {};\n      const setValue = (name, value, processor) => {\n        const result = processValue(value, processor);\n        if (isValidResult(result)) {\n          values[name] = result.value;\n          return true;\n        } else {\n          console.warn(getErrorMessage(`Invalid value passed for the ${ name } option`, result));\n          return false;\n        }\n      };\n      const register = (name, spec) => {\n        const processor = isBuiltInSpec(spec) ? getBuiltInProcessor(spec.processor) : spec.processor;\n        const defaultValue = processDefaultValue(name, spec.default, processor);\n        registry[name] = {\n          ...spec,\n          default: defaultValue,\n          processor\n        };\n        const initValue = get$a(values, name).orThunk(() => get$a(initialOptions, name));\n        initValue.each(value => setValue(name, value, processor));\n      };\n      const isRegistered = name => has$2(registry, name);\n      const get = name => get$a(values, name).orThunk(() => get$a(registry, name).map(spec => spec.default)).getOrUndefined();\n      const set = (name, value) => {\n        if (!isRegistered(name)) {\n          console.warn(`\"${ name }\" is not a registered option. Ensure the option has been registered before setting a value.`);\n          return false;\n        } else {\n          const spec = registry[name];\n          if (spec.immutable) {\n            console.error(`\"${ name }\" is an immutable option and cannot be updated`);\n            return false;\n          } else {\n            return setValue(name, value, spec.processor);\n          }\n        }\n      };\n      const unset = name => {\n        const registered = isRegistered(name);\n        if (registered) {\n          delete values[name];\n        }\n        return registered;\n      };\n      const isSet = name => has$2(values, name);\n      return {\n        register,\n        isRegistered,\n        get,\n        set,\n        unset,\n        isSet\n      };\n    };\n\n    const defaultModes = [\n      'design',\n      'readonly'\n    ];\n    const switchToMode = (editor, activeMode, availableModes, mode) => {\n      const oldMode = availableModes[activeMode.get()];\n      const newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error(`problem while activating editor mode ${ mode }:`, e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    const setMode = (editor, availableModes, activeMode, mode) => {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error(`Editor mode '${ mode }' is invalid`);\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', () => switchToMode(editor, activeMode, availableModes, mode));\n      }\n    };\n    const registerMode = (availableModes, mode, api) => {\n      if (contains$2(defaultModes, mode)) {\n        throw new Error(`Cannot override default mode ${ mode }`);\n      }\n      return {\n        ...availableModes,\n        [mode]: {\n          ...api,\n          deactivate: () => {\n            try {\n              api.deactivate();\n            } catch (e) {\n              console.error(`problem while deactivating editor mode ${ mode }:`, e);\n            }\n          }\n        }\n      };\n    };\n\n    const create$4 = editor => {\n      const activeMode = Cell('design');\n      const availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: () => isReadOnly(editor),\n        set: mode => setMode(editor, availableModes.get(), activeMode, mode),\n        get: () => activeMode.get(),\n        register: (mode, api) => {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    const each$2 = Tools.each, explode = Tools.explode;\n    const keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    const modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    const isModifier = key => key in modifierNames;\n    const parseShortcut = pattern => {\n      const shortcut = {};\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      each$2(explode(pattern.toLowerCase(), '+'), value => {\n        if (isModifier(value)) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      const id = [shortcut.keyCode];\n      let key;\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (isMac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (isMac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    class Shortcuts {\n      constructor(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        const self = this;\n        editor.on('keyup keypress keydown', e => {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$2(self.shortcuts, shortcut => {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      add(pattern, desc, cmdFunc, scope) {\n        const self = this;\n        const func = self.normalizeCommandFunc(cmdFunc);\n        each$2(explode(Tools.trim(pattern)), pattern => {\n          const shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      }\n      remove(pattern) {\n        const shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      }\n      normalizeCommandFunc(cmdFunc) {\n        const self = this;\n        const cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return () => {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return () => {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      }\n      createShortcut(pattern, desc, cmdFunc, scope) {\n        const shortcuts = Tools.map(explode(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      }\n      hasModifier(e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      }\n      isFunctionKey(e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      }\n      matchShortcut(e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      }\n      executeShortcutAction(shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      }\n    }\n\n    const create$3 = () => {\n      const buttons = {};\n      const menuItems = {};\n      const popups = {};\n      const icons = {};\n      const contextMenus = {};\n      const contextToolbars = {};\n      const sidebars = {};\n      const views = {};\n      const add = (collection, type) => (name, spec) => {\n        collection[name.toLowerCase()] = {\n          ...spec,\n          type\n        };\n      };\n      const addIcon = (name, svgData) => icons[name.toLowerCase()] = svgData;\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addView: add(views, 'views'),\n        addIcon,\n        getAll: () => ({\n          buttons,\n          menuItems,\n          icons,\n          popups,\n          contextMenus,\n          contextToolbars,\n          sidebars,\n          views\n        })\n      };\n    };\n\n    const registry = () => {\n      const bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        addView: bridge.addView,\n        getAll: bridge.getAll\n      };\n    };\n\n    const DOM$1 = DOMUtils.DOM;\n    const extend = Tools.extend, each$1 = Tools.each;\n    class Editor {\n      constructor(id, options, editorManager) {\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.composing = false;\n        this.destroyed = false;\n        this.hasHiddenInput = false;\n        this.iframeElement = null;\n        this.initialized = false;\n        this.readonly = false;\n        this.removed = false;\n        this.startContent = '';\n        this._pendingNativeEvents = [];\n        this._skinLoaded = false;\n        this._editableRoot = true;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend(this, EditorObservable);\n        const self = this;\n        this.id = id;\n        this.hidden = false;\n        const normalizedOptions = normalizeOptions(editorManager.defaultOptions, options);\n        this.options = create$5(self, normalizedOptions);\n        register$7(self);\n        const getOption = this.options.get;\n        if (getOption('deprecation_warnings')) {\n          logWarnings(options, normalizedOptions);\n        }\n        const suffix = getOption('suffix');\n        if (suffix) {\n          editorManager.suffix = suffix;\n        }\n        this.suffix = editorManager.suffix;\n        const baseUrl = getOption('base_url');\n        if (baseUrl) {\n          editorManager._setBaseUrl(baseUrl);\n        }\n        this.baseUri = editorManager.baseURI;\n        const referrerPolicy = getReferrerPolicy(self);\n        if (referrerPolicy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(referrerPolicy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(referrerPolicy);\n        }\n        const contentCssCors = hasContentCssCors(self);\n        if (isNonNullable(contentCssCors)) {\n          DOMUtils.DOM.styleSheetLoader._setContentCssCors(contentCssCors);\n        }\n        AddOnManager.languageLoad = getOption('language_load');\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(getDocumentBaseUrl(self), { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = isInline$1(self);\n        this.hasVisual = isVisualAidsEnabled(self);\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        registerCommands(this);\n        const cacheSuffix = getOption('cache_suffix');\n        if (cacheSuffix) {\n          Env.cacheSuffix = cacheSuffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          setEnabled: noop,\n          isEnabled: always\n        };\n        this.mode = create$4(self);\n        editorManager.dispatch('SetupEditor', { editor: this });\n        const setupCallback = getSetupCallback(self);\n        if (isFunction(setupCallback)) {\n          setupCallback.call(self, self);\n        }\n      }\n      render() {\n        render(this);\n      }\n      focus(skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      }\n      hasFocus() {\n        return hasFocus(this);\n      }\n      translate(text) {\n        return I18n.translate(text);\n      }\n      getParam(name, defaultVal, type) {\n        const options = this.options;\n        if (!options.isRegistered(name)) {\n          if (isNonNullable(type)) {\n            options.register(name, {\n              processor: type,\n              default: defaultVal\n            });\n          } else {\n            options.register(name, {\n              processor: always,\n              default: defaultVal\n            });\n          }\n        }\n        return !options.isSet(name) && !isUndefined(defaultVal) ? defaultVal : options.get(name);\n      }\n      hasPlugin(name, loaded) {\n        const hasPlugin = contains$2(getPlugins(this), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      }\n      nodeChanged(args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      }\n      addCommand(name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      }\n      addQueryStateHandler(name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      }\n      addQueryValueHandler(name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      }\n      addShortcut(pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      }\n      execCommand(cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      }\n      queryCommandState(cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      }\n      queryCommandValue(cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      }\n      queryCommandSupported(cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      }\n      show() {\n        const self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.dispatch('show');\n        }\n      }\n      hide() {\n        const self = this;\n        if (!self.hidden) {\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.dispatch('hide');\n        }\n      }\n      isHidden() {\n        return this.hidden;\n      }\n      setProgressState(state, time) {\n        this.dispatch('ProgressState', {\n          state,\n          time\n        });\n      }\n      load(args = {}) {\n        const self = this;\n        const elm = self.getElement();\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          const loadArgs = {\n            ...args,\n            load: true\n          };\n          const value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          const html = self.setContent(value, loadArgs);\n          if (!loadArgs.no_events) {\n            self.dispatch('LoadContent', {\n              ...loadArgs,\n              element: elm\n            });\n          }\n          return html;\n        } else {\n          return '';\n        }\n      }\n      save(args = {}) {\n        const self = this;\n        let elm = self.getElement();\n        if (!elm || !self.initialized || self.removed) {\n          return '';\n        }\n        const getArgs = {\n          ...args,\n          save: true,\n          element: elm\n        };\n        let html = self.getContent(getArgs);\n        const saveArgs = {\n          ...getArgs,\n          content: html\n        };\n        if (!saveArgs.no_events) {\n          self.dispatch('SaveContent', saveArgs);\n        }\n        if (saveArgs.format === 'raw') {\n          self.dispatch('RawSaveContent', saveArgs);\n        }\n        html = saveArgs.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          const form = DOM$1.getParent(self.id, 'form');\n          if (form) {\n            each$1(form.elements, elm => {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              } else {\n                return true;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        saveArgs.element = getArgs.element = elm = null;\n        if (saveArgs.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      }\n      setContent(content, args) {\n        return setContent(this, content, args);\n      }\n      getContent(args) {\n        return getContent(this, args);\n      }\n      insertContent(content, args) {\n        if (args) {\n          content = extend({ content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      }\n      resetContent(initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      }\n      isDirty() {\n        return !this.isNotDirty;\n      }\n      setDirty(state) {\n        const oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.dispatch('dirty');\n        }\n      }\n      getContainer() {\n        const self = this;\n        if (!self.container) {\n          self.container = self.editorContainer || DOM$1.get(self.id + '_parent');\n        }\n        return self.container;\n      }\n      getContentAreaContainer() {\n        return this.contentAreaContainer;\n      }\n      getElement() {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      }\n      getWin() {\n        const self = this;\n        if (!self.contentWindow) {\n          const elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      }\n      getDoc() {\n        const self = this;\n        if (!self.contentDocument) {\n          const win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      }\n      getBody() {\n        var _a, _b;\n        const doc = this.getDoc();\n        return (_b = (_a = this.bodyElement) !== null && _a !== void 0 ? _a : doc === null || doc === void 0 ? void 0 : doc.body) !== null && _b !== void 0 ? _b : null;\n      }\n      convertURL(url, name, elm) {\n        const self = this, getOption = self.options.get;\n        const urlConverterCallback = getUrlConverterCallback(self);\n        if (isFunction(urlConverterCallback)) {\n          return urlConverterCallback.call(self, url, elm, true, name);\n        }\n        if (!getOption('convert_urls') || elm === 'link' || isObject(elm) && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        const urlObject = new URI(url);\n        if (urlObject.protocol !== 'http' && urlObject.protocol !== 'https' && urlObject.protocol !== '') {\n          return url;\n        }\n        if (getOption('relative_urls')) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, getOption('remove_script_host'));\n        return url;\n      }\n      addVisual(elm) {\n        addVisual(this, elm);\n      }\n      setEditableRoot(state) {\n        setEditableRoot(this, state);\n      }\n      hasEditableRoot() {\n        return hasEditableRoot(this);\n      }\n      remove() {\n        remove$1(this);\n      }\n      destroy(automatic) {\n        destroy(this, automatic);\n      }\n      uploadImages() {\n        return this.editorUpload.uploadImages();\n      }\n      _scanForImages() {\n        return this.editorUpload.scanForImages();\n      }\n    }\n\n    const DOM = DOMUtils.DOM;\n    const each = Tools.each;\n    let boundGlobalEvents = false;\n    let beforeUnloadDelegate;\n    let editors = [];\n    const globalEventDelegate = e => {\n      const type = e.type;\n      each(EditorManager.get(), editor => {\n        switch (type) {\n        case 'scroll':\n          editor.dispatch('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.dispatch('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    const toggleGlobalEvents = state => {\n      if (state !== boundGlobalEvents) {\n        const DOM = DOMUtils.DOM;\n        if (state) {\n          DOM.bind(window, 'resize', globalEventDelegate);\n          DOM.bind(window, 'scroll', globalEventDelegate);\n        } else {\n          DOM.unbind(window, 'resize', globalEventDelegate);\n          DOM.unbind(window, 'scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    const removeEditorFromList = targetEditor => {\n      const oldEditors = editors;\n      editors = filter$5(editors, editor => {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    const purgeDestroyedEditor = editor => {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n      }\n    };\n    const isQuirksMode = document.compatMode !== 'CSS1Compat';\n    const EditorManager = {\n      ...Observable,\n      baseURI: null,\n      baseURL: null,\n      defaultOptions: {},\n      documentBaseURL: null,\n      suffix: null,\n      majorVersion: '7',\n      minorVersion: '0.0',\n      releaseDate: '2024-03-20',\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      setup() {\n        const self = this;\n        let baseURL = '';\n        let suffix = '';\n        let documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        const preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          const scripts = document.getElementsByTagName('script');\n          for (let i = 0; i < scripts.length; i++) {\n            const src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            const srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            const src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$w(self);\n      },\n      overrideDefaults(defaultOptions) {\n        const baseUrl = defaultOptions.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        const suffix = defaultOptions.suffix;\n        if (suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultOptions = defaultOptions;\n        const pluginBaseUrls = defaultOptions.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$d(pluginBaseUrls, (pluginBaseUrl, pluginName) => {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init(options) {\n        const self = this;\n        let result;\n        const invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        const isInvalidInlineTarget = (options, elm) => options.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        const createId = elm => {\n          let id = elm.id;\n          if (!id) {\n            id = get$a(elm, 'name').filter(name => !DOM.get(name)).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        const execCallback = name => {\n          const callback = options[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        const findTargets = options => {\n          if (Env.browser.isIE() || Env.browser.isEdge()) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          } else if (isString(options.selector)) {\n            return DOM.select(options.selector);\n          } else if (isNonNullable(options.target)) {\n            return [options.target];\n          } else {\n            return [];\n          }\n        };\n        let provideResults = editors => {\n          result = editors;\n        };\n        const initEditors = () => {\n          let initCount = 0;\n          const editors = [];\n          let targets;\n          const createEditor = (id, options, targetElm) => {\n            const editor = new Editor(id, options, self);\n            editors.push(editor);\n            editor.on('init', () => {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = unique$1(findTargets(options));\n          Tools.each(targets, elm => {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, elm => {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each(targets, elm => {\n              if (isInvalidInlineTarget(options, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), options, elm);\n              }\n            });\n          }\n        };\n        DOM.bind(window, 'ready', initEditors);\n        return new Promise(resolve => {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = editors => {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get(id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find$2(editors, editor => {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add(editor) {\n        const self = this;\n        const existingEditor = self.get(editor.id);\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (existingEditor === null) {\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.dispatch('AddEditor', { editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = e => {\n            const event = self.dispatch('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor(id, options) {\n        return this.add(new Editor(id, options, this));\n      },\n      remove(selector) {\n        const self = this;\n        let editor;\n        if (!selector) {\n          for (let i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each(DOM.select(selector), elm => {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.dispatch('RemoveEditor', { editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand(cmd, ui, value) {\n        var _a;\n        const self = this;\n        const editorId = isObject(value) ? (_a = value.id) !== null && _a !== void 0 ? _a : value.index : value;\n        switch (cmd) {\n        case 'mceAddEditor': {\n            if (!self.get(editorId)) {\n              const editorOptions = value.options;\n              new Editor(editorId, editorOptions, self).render();\n            }\n            return true;\n          }\n        case 'mceRemoveEditor': {\n            const editor = self.get(editorId);\n            if (editor) {\n              editor.remove();\n            }\n            return true;\n          }\n        case 'mceToggleEditor': {\n            const editor = self.get(editorId);\n            if (!editor) {\n              self.execCommand('mceAddEditor', false, value);\n              return true;\n            }\n            if (editor.isHidden()) {\n              editor.show();\n            } else {\n              editor.hide();\n            }\n            return true;\n          }\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: () => {\n        each(editors, editor => {\n          editor.save();\n        });\n      },\n      addI18n: (code, items) => {\n        I18n.add(code, items);\n      },\n      translate: text => {\n        return I18n.translate(text);\n      },\n      setActive(editor) {\n        const activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.dispatch('deactivate', { relatedTarget: editor });\n          }\n          editor.dispatch('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl(baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    };\n    EditorManager.setup();\n\n    const setup = () => {\n      const dataValue = value$2();\n      const FakeClipboardItem = items => ({\n        items,\n        types: keys(items),\n        getType: type => get$a(items, type).getOrUndefined()\n      });\n      const write = data => {\n        dataValue.set(data);\n      };\n      const read = () => dataValue.get().getOrUndefined();\n      const clear = dataValue.clear;\n      return {\n        FakeClipboardItem,\n        write,\n        read,\n        clear\n      };\n    };\n    const FakeClipboard = setup();\n\n    const min = Math.min, max = Math.max, round = Math.round;\n    const relativePosition = (rect, targetRect, rel) => {\n      let x = targetRect.x;\n      let y = targetRect.y;\n      const w = rect.w;\n      const h = rect.h;\n      const targetW = targetRect.w;\n      const targetH = targetRect.h;\n      const relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    const findBestRelativePosition = (rect, targetRect, constrainRect, rels) => {\n      for (let i = 0; i < rels.length; i++) {\n        const pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    const inflate = (rect, w, h) => {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    const intersect = (rect, cropRect) => {\n      const x1 = max(rect.x, cropRect.x);\n      const y1 = max(rect.y, cropRect.y);\n      const x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      const y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    const clamp = (rect, clampRect, fixedSize) => {\n      let x1 = rect.x;\n      let y1 = rect.y;\n      let x2 = rect.x + rect.w;\n      let y2 = rect.y + rect.h;\n      const cx2 = clampRect.x + clampRect.w;\n      const cy2 = clampRect.y + clampRect.h;\n      const underflowX1 = max(0, clampRect.x - x1);\n      const underflowY1 = max(0, clampRect.y - y1);\n      const overflowX2 = max(0, x2 - cx2);\n      const overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    const create$2 = (x, y, w, h) => {\n      return {\n        x,\n        y,\n        w,\n        h\n      };\n    };\n    const fromClientRect = clientRect => {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    const Rect = {\n      inflate,\n      relativePosition,\n      findBestRelativePosition,\n      intersect,\n      clamp,\n      create: create$2,\n      fromClientRect\n    };\n\n    const awaiter = (resolveCb, rejectCb, timeout = 1000) => {\n      let done = false;\n      let timer = null;\n      const complete = completer => (...args) => {\n        if (!done) {\n          done = true;\n          if (timer !== null) {\n            clearTimeout(timer);\n            timer = null;\n          }\n          completer.apply(null, args);\n        }\n      };\n      const resolve = complete(resolveCb);\n      const reject = complete(rejectCb);\n      const start = (...args) => {\n        if (!done && timer === null) {\n          timer = setTimeout(() => reject.apply(null, args), timeout);\n        }\n      };\n      return {\n        start,\n        resolve,\n        reject\n      };\n    };\n    const create$1 = () => {\n      const tasks = {};\n      const resultFns = {};\n      const resources = {};\n      const load = (id, url) => {\n        const loadErrMsg = `Script at URL \"${ url }\" failed to load`;\n        const runErrMsg = `Script at URL \"${ url }\" did not call \\`tinymce.Resource.add('${ id }', data)\\` within 1 second`;\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          const task = new Promise((resolve, reject) => {\n            const waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url).then(() => waiter.start(runErrMsg), () => waiter.reject(loadErrMsg));\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      const add = (id, data) => {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = Promise.resolve(data);\n        resources[id] = data;\n      };\n      const has = id => {\n        return id in resources;\n      };\n      const unload = id => {\n        delete tasks[id];\n        delete resources[id];\n      };\n      const get = id => resources[id];\n      return {\n        load,\n        add,\n        has,\n        get,\n        unload\n      };\n    };\n    const Resource = create$1();\n\n    const create = () => (() => {\n      let data = {};\n      let keys = [];\n      const storage = {\n        getItem: key => {\n          const item = data[key];\n          return item ? item : null;\n        },\n        setItem: (key, value) => {\n          keys.push(key);\n          data[key] = String(value);\n        },\n        key: index => {\n          return keys[index];\n        },\n        removeItem: key => {\n          keys = keys.filter(k => k === key);\n          delete data[key];\n        },\n        clear: () => {\n          keys = [];\n          data = {};\n        },\n        length: 0\n      };\n      Object.defineProperty(storage, 'length', {\n        get: () => keys.length,\n        configurable: false,\n        enumerable: false\n      });\n      return storage;\n    })();\n\n    let localStorage;\n    try {\n      const test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    const publicApi = {\n      geom: { Rect },\n      util: {\n        Delay,\n        Tools,\n        VK,\n        URI,\n        EventDispatcher,\n        Observable,\n        I18n,\n        LocalStorage,\n        ImageUploader\n      },\n      dom: {\n        EventUtils,\n        TreeWalker: DomTreeWalker,\n        TextSeeker,\n        DOMUtils,\n        ScriptLoader,\n        RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader,\n        ControlSelection,\n        BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles,\n        Entities,\n        Node: AstNode,\n        Schema,\n        DomParser,\n        Writer,\n        Serializer: HtmlSerializer\n      },\n      Env,\n      AddOnManager,\n      Annotator,\n      Formatter,\n      UndoManager,\n      EditorCommands,\n      WindowManager,\n      NotificationManager,\n      EditorObservable,\n      Shortcuts,\n      Editor,\n      FocusManager,\n      EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager,\n      ThemeManager,\n      ModelManager,\n      IconManager,\n      Resource,\n      FakeClipboard,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      walk: Tools.walk,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix\n    };\n    const tinymce$1 = Tools.extend(EditorManager, publicApi);\n\n    const exportToModuleLoaders = tinymce => {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    const exportToWindowGlobal = tinymce => {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce$1);\n    exportToModuleLoaders(tinymce$1);\n\n})();\n"],"names":["tinymce","IconManager","add","icons","global$5","util","Tools","resolve","isType","type","value","x","t","Array","isArray","o","v","constructor","String","prototype","isPrototypeOf","_a","name","typeOf","isSimpleType","isString","isObject","isNull","a","isBoolean","isNonNullable","isNullable","isFunction","isArrayOf","pred","i","len","length","noop","tripleEquals","b","Optional","tag","this","static","singletonNone","fold","onNone","onSome","isSome","isNone","map","mapper","some","none","bind","binder","exists","predicate","forall","filter","getOr","replacement","or","getOrThunk","thunk","orThunk","getOrDie","message","Error","getOrNull","getOrUndefined","each","worker","toArray","toString","nativeIndexOf","indexOf","nativePush","push","flatten","xs","r","apply","findMap","arr","f","is","lhs","rhs","comparator","left","cat","someIf","option","editor","options","get","assumeExternalTargets","hasContextToolbar","getLinkList","getDefaultLinkTarget","getDefaultLinkProtocol","getTargetList","getRelList","getLinkClassList","shouldShowLinkTitle","allowUnsafeLinkTarget","useQuickLink","global$4","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","undefined","menu","items","sanitizeWith","extracter","from","ListOptions","label","keys","Object","hasOwnProperty","has","obj","key","call","global$3","global$2","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","collapsed","contents","cloneContents","firstChild","walker","elements","current","next","hasProtocol","url","test","_b","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","getLinksInSelection","selection","getRng","getNode","isImageFigure","dom","select","getParent","isInAnchor","getAnchorText","anchorElm","getContent","format","innerText","textContent","replace","getLinks$1","grep","hasLinks","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","anchor","hasAttribute","nodeType","className","linkDomMutation","attachState","data","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","applyLinkOverrides","acc","each$1","getLinkAttrs","undoManager","transact","attach","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","focus","setAttribs","updateLink","unwrapOptions","class","cls","onTrue","onFalse","props","k","internalFilter","_k","link","sanitizedData","getOption","uriOptions","allow_html_data_urls","allow_script_urls","allow_svg_data_urls","isDomSafe","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","findTextByValue","catalog","hasNonNullableKey","isListGroup","DialogChanges","initialData","linkCatalog","persistentData","onCatalogChange","change","catalogs","fieldName","persistentText","hasPersistentText","meta","getDelta","onChange","getData","getTitleFromUrlChange","onUrlChange","ts","rawIndexOf","global$1","tryEmailTransform","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","AnchorListOptions","anchorNodes","anchors","id","ClassListOptions","parseJson","JSON","parse","err","RelOptions","initialTarget","isTargetBlank","safeRelExtractor","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","extractor","convertURL","linkList","Promise","fetch","then","res","ok","reject","output","optItems","LinkListOptions","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open$1","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","transform","callback","setEditorTimeout","windowManager","confirm","state","delayedConfirm","DialogConfirms","pData","handleSubmit","settings","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","picker_text","buttons","primary","newData","setData","makeDialog","spec","open","global","getLink","getSelectedLink","getStart","gotoLink","targetEl","scrollIntoView","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","openDialog","dialog","gotoSelectedLink","toggleState","toggler","on","off","toggleLinkState","updateState","setActive","mode","isReadOnly","setEnabled","isEditable","toggleLinkMenuState","toggleGotoLinkState","isCollapsed","hasExactlyOneLinkInSelection","toggleUnlinkState","parents","updateEnabled","hasLinks$1","e","registerOption","register","processor","valid","default","register$1","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","shortcut","addButton","setupButtons","addMenuItem","setupMenuItems","addContextMenu","update","element","setupContextMenu","onSetupLink","buttonApi","addContextForm","launch","initValue","commands","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","setupContextToolbars","metaKeyPressed","preventDefault","isDefaultPrevented","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","_ui","dispatch","toolbarKey","addShortcut","setup","getPrototypeOf$2","getPrototypeOf","hasProto","isType$1","proto","eq$1","isPlainObject","is$2","isUndefined","isNumber","noarg","compose","fa","fb","args","constant$1","identity","curry","fn","initialArgs","restArgs","all","not","die","msg","apply$1","never","always","nativeSlice","slice","contains$2","range$2","num","chunk$1","array","s","map$2","partition$3","pass","fail","filter$2","foldr","eachr","foldl","find$5","until","findUntil","findIndex$1","bind$3","reverse","difference","a1","a2","mapToObject","pure$2","copy","get$h","head","last$1","map$1","tupleMap","tuple","objAcc","filter$1","mapToArray","find$4","values","get$g","has$2","is$1","lift2","oa","ob","mapFrom","checkRange","str","substr","start","removeLeading","prefix","startsWith","numChars","substring","removeFromStart","contains$1","end","idx","endsWith","suffix","trim$1","isNotEmpty","isEmpty","isSupported$1","style","getPropertyValue","fromDom","SugarElement","html","scope","div","innerHTML","hasChildNodes","childNodes","console","error","createTextNode","Global","Function","p","parts","path$1","getPrototypeOf$1","actual","unsafe","getOrDie$1","sandHTMLElement","name$3","type$1","isHTMLElement","isElement$1","isText","isDocument","isDocumentFragment","isTag","selector","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","one","base","querySelector","eq","e1","e2","contains","d1","d2","owner$4","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","parentElement","offsetParent","children","child$2","index","cs","spot","offset","leaf","isShadowRoot","host","supported","Element","attachShadow","Node","getRootNode","isSupported","getContentContainer","getShadowRoot","getShadowHost","inBody","doc","fbc","fab","rawSet","setAttribute","set$9","setAll$1","get$f","getOpt","has$1","remove$7","removeAttribute","internalSet","property","setProperty","internalRemove","removeProperty","set$8","setAll","css","setOptions","get$e","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue$1","remove$6","reflow","offsetWidth","Dimension","getOffset","parseFloat","aggregate","properties","parseInt","isNaN","set","h","match","getOuter","max","cumulativeInclusions","api$2","getBoundingClientRect","height","offsetHeight","get$d","getOuter$2","r$1","top","translate","y","SugarPosition","firstDefinedOrZero","absolute$3","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport$1","box","boxPosition","api$1","get$c","getOuter$1","cached","called","unknown$3","nu$d","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$3","unknown","detect$3","candidates","userAgent","candidate","search","normalVersionRegex","checkContains","uastring","browsers","brand","oses","PlatformInfo","edge","chromium","opera","firefox","safari","nu$c","version","isBrowser","isEdge","isChromium","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","macos","solaris","freebsd","chromeos","nu$b","isOS","isWindows","isiOS","isAndroid","isMacOS","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","mediaMatch","query","matchMedia","platform","userAgentDataOpt","browser","userAgentData","brands","uaBrand","lcBrand","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","PlatformDetection","navigator","detect$1","fromRawEvent$1","rawEvent","event","el","shadowRoot","isOpenShadowHost","composed","composedPath","getOriginalEventTarget","stop","stopPropagation","prevent","kill","mkEvent","clientX","clientY","handler","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","before$1","marker","after$2","sibling","nextSibling","append$2","prepend$1","append$1","empty","rogue","remove$5","get$b","_DOC","to","scrollTo","bounds$1","width","right","bottom","getBounds$3","_win","scroll","visualViewport","get$a","clientWidth","clientHeight","Math","pageLeft","pageTop","getDocument","walkUp","navigation","view","owner","rest","Navigation","freeze","__proto__","frameElement","find$2","path","d","paths","pathTo","frames","loc","bounds","box$1","xy","w","absolute$2","position","constrain","constraint","min","global$a","value$4","applyHelper","constHelper","outputHelper","inner","_onError","onValue","isValue","isError","Result","mapError","toOptional","error$1","onError","_onValue","fromOption","optional","SimpleResultType","fold$1","stype","serror","svalue","Value","SimpleResult","field$2","newKey","presence","prop","ifField","ifCustom","instantiator","baseMerge","merger","objects","ret","j","curObject","deepMerge","old","merge$1","defaultedThunk","fallbackThunk","process","defaulted$1","fallback","mergeWithThunk","baseThunk","ResultCombine","partitions","results","errors","formatObj","input","stringify","nu$a","getErrorInfo","value$3","validator","extract","custom","anyValue$1","fallbackAccess","bundle","extractField","field","av","bundleAsOption","optValue","ov","missingRequired","requiredAccess","optionAccess","optionDefaultedAccess","result","valueThunk","getDelegate","getSetKeys","objOfOnly","fields","delegate","objOf","fieldNames","extra","unsupported","unsupportedFields","success","extractFields","fieldStrings","_okey","_presence","_instantiator","arrOf","oneOf","rawF","setOf$1","keys$1","validatedKeys","validateKeys","validKeys","vk","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","postMessageable","choose$2","branches","missingKey","chosen","ch","branch","missingBranch","vp","chooseFrom","valueOf","setOf","asRaw","errs","extraction","errInfo","formatError","asRawOrDie$1","es","formatErrors","choose$1","thunkOf","desc","_desc","getP","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredFunction","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option$3","optionOf","optionNumber","optionString","optionStringEnum","optionFunction","optionArrayOf","optionObjOf","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","Cell","initial","Adt","cases","constructors","adt","acase","count","argLength","foldArgs","branchKeys","reqKey","log","params","bothErrors","firstError","secondError","bothValues","wrap$1","wrap$2","wrapAll","keyvalues","kv","wrapAll$1","ensureIsRoot","isRoot","ancestor$2","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","can","abort","run","nu$9","constant","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","tap","focus$4","postBlur","postPaste","receive","execute$5","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","externalElementScroll","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","getSystem","triggerEvent","derive$2","configs","run$1","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","get$9","set$6","content","docDom","fragment","createDocumentFragment","contentElements","fromHtml$1","clone$1","isDeep","cloneNode","clone","shallow","container","getHtml","events$i","originator","isRecursive","warn","DefaultEvents","events","unique","generate$6","time","Date","getTime","random","floor","prefix$1","idAttr$1","idAttr","writeOnly","defineProperty","writable","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","debugInfo","triggerFocus","triggerEscape","broadcast","broadcastOn","broadcastEvent","build","buildOrPatch","addToWorld","removeFromWorld","addToGui","removeFromGui","isConnected","singleton$1","cleanParameters","parameters","markAsExtraApi","extraName","endIndex","openBracketIndex","toFunctionAnnotation","premadeTag","premade$1","comp","getPremade","makeApi","apiFunction","markAsSketchApi","getApis","NoState","init","nu$8","readState","byInnerKey","indexKey","chain","nu$7","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","nameToHandlers","behaviours","behaviour","handlers","fuse","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","all$2","any","fuse$1","c","missingOrderError","combineGroups","byEventName","objs","partition$1","mergeValues","consolidate","assembled","rawHandler","read$2","assemble","purpose","uncurried","baseBehaviour","schema$z","toEvents","read","attr","supports","classList","get$8","add$3","clazz","add$4","remove$3","remove$4","add$2","cleanClass","remove$2","add$1","remove$1","get$7","getNative","get$6","set$5","ensureInDom","child","obsoleted","obs","patchChildrenWith","builtChildren","currentChildren","patchSpecChild","oldObsoleted","childComp","newObs","oldTag","determineObsoleted","diffKeyValueSet","newObj","oldObj","newKeys","oldKeys","toRemove","toSet","bifilter","renderToDom","definition","optObsoleted","innerHtml","domChildren","hasMixedChildren","isPremade","existingAttributes","clone$2","attrsToSet","attrsToRemove","existingStyles","stylesToSet","stylesToRemove","existingClasses","classesToRemove","classesToAdd","nodes","patchDomChildren","valueElement","updateValue","reconcileToDom","attemptPatch","subject","introduceToDom","generate$4","me","getBehaviours$2","validated","optBlobThunk","blob","config","generateFrom$1","generateFrom","build$2","getMe","systemApi","toInfo","bBlob","bList","bData","getBehaviours$3","getData$2","modDefinition","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine$2","defnA","mod","getDomDefinition","baseEvents","behaviourEvents","groupByEvents","combine$1","getEvents","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","children$1","subs","text$2","external$1","extSpec","uids","userSpec","specEvents","build$1","buildSubcomponents","completeSpec","buildFromSpec","isSketchSpec$1","premade","ClosestOrAncestor","ancestor","ancestor$1","closest$3","closest$2","child$1","descendant","closest$1","attribute","manager","ariaId","isPartOf$1","queryElem","dep","find$1","isAriaPartOf","EventConfiguration","eventConfig","monitorEvent","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","outcome","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","processEvent","menuFields","itemFields","itemSchema$3","_initSize","tieredMenuMarkers","markers$1","required","onPresenceHandler","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","restriction","adt$a","southeast","southwest","northeast","northwest","south","north","east","west","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","clamp","restrictions","dir","getRestriction","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","eastEdgeX$1","west$2","westEdgeX$1","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","apiName","bName","markAsBehaviourApi","wrapApi","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$4","create$5","modeSchema","createModes","modes","createModes$1","branchKey","Receiving","ActivePosition","posConfig","useFixed","focus$3","preventScroll","blur$1","blur","hasFocus","root","activeElement","active$1","preserve$1","refocus","focused","descend","descendant$1","oldFocus","newFocus","NuPositionCss","toPx","applyPositionCss","toOptions","adt$9","relative","fixed","positionWithDirection","posName","decision","decisionRect","rect","decisionX","decisionY","decisionRight","decisionBottom","reposition","origin","toBox","viewport","optBounds","pos","translate$2","outerScroll","relative$1","fixed$1","placementAttribute","getPlacement","adt$8","fit","nofit","attempt","bubbleOffset","adjustedBounds","applyRestriction","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","newX","newY","originInBounds","sizeInBounds","visibleW","visibleH","boundsX","boundsY","boundsRight","boundsBottom","determinePosition","fits","fittedBox","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcReposition","isPartlyVisible","maxWidth","maxHeight","upAvailable","downAvailable","middle","cataVertical","westAvailable","eastAvailable","cataHorizontal","calcMaxSizes","classesOn","classesOff","layout","testY","singleton","doRevoke","clear","isSet","unbindable","value$2","bind$2","capture","capture$1","fromRawEvent","timerAttr","applyTransitionCss","transition","lastPlacement","shouldTransition","placer","shouldApplyTransitionCss","hasAll","isTransitioning$1","intermediatePosition","intermediateCssOptions","intermediate","round","toFixed","equals","hasChanges","timerId","clearTimeout","transitionEnd","transitionCancel","timer","isSourceTransition","pseudoElement","propertyName","transitionDone","transitionStart","duration","times","delay","dur","getTransitionDuration","requestAnimationFrame","setTimeout","setupTransitionListeners","startTransitioning","setMaxHeight","absMax","setMax$1","anchored","available","expandable$1","defaultOr","dephault","go","anchorBox","elementBox","panelWidth","panelHeight","attemptBestFit","isVisible","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","bestNext","attempts","preference","positionCss","position$2","setPlacement$1","setPlacement","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","insetNortheast","insetNorthwest","insetNorth","insetSoutheast","insetSouthwest","insetSouth","insetEast","insetWest","nu$4","onDirection","isLtr","isRtl","getDirection","AttributeValue","Attribute","isBottomToTopDir","BottomToTop","schema$y","get$5","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","MakeshiftAnchor","adt$7","screen","absolute","point","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$1","getRootPoint","frame","frameOwner","compOwner","getBox","pointed","calcNewAnchor","optBox","rootPoint","topLeft","onRelative","onFixed","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","NodeAnchor","nodeBox","SimRange","soffset","finish","foffset","adt$6","before","after","Situ","situ","adt$5","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","range","relativeToNative","finishSitu","createRange","setStart","setStartAfter","setEndBefore","setEnd","setFinish","exactToNative","toRect","adt$4","fromRange","startOffset","endOffset","asLtrRange","ranges","getRanges","rev","doDiagnose","diagnose","ancestors","rawParent","descendants","querySelectorAll","all$3","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","focusNode","makeRange","same","anchorOffset","focusOffset","getFirstRect","rects","getClientRects","getFirstRect$1","nodeValue","NodeValue","descendOnce","last","get$4","descendOnce$1","isSimRange","getAnchorSelection","getSelection","getNativeSelection","sel","getExact","modStart","modFinish","SelectionAnchor","selectionBox","optRect","getBounds$2","getBounds$1","zeroWidth$1","rawRect","selectionRect","cell","firstCell","lastCell","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","TransitionSchema","PositionSchema","PlacementSchema","positionWithinBounds","posState","placee","placementSpec","optWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","getFixedOrigin","getRelativeOrigin","anchoring","getBounds","newState","lastPlace","overrideOptions","simple","place","vis","PositionApis","getMode","pConfig","_pState","reset","reset$2","Positioning","fireDetaching","fireAttaching","virtualAttach","virtualDetach","attach$1","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemWith","attachSystemAfter","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","onOpen","close$1","onClose","isOpen$1","_sandbox","_sConfig","isOpen","cloak","_sState","sink","cssKey","newValue","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","isPartOf","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","isExtraPart","fireEventInstead","fe","schema$w","receivingChannel","doReposition","onLoad$5","repConfig","repState","onLoad","onUnload$2","onUnload","RepresentApis","setValue","ActiveRepresenting","resetOnDom","_se","memory$1","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","memory","manual","setValue$2","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","forbidden","forbid","_v","get$3","dump","augment","SketchBehaviours","_placeholder","adt$3","single","multiple","isSubstituted","substitute","compSpec","placeholders","uiType","newSpec","subPlaceholder","scan","req","childSpecs","substituted","valuesThunk","preprocessor","single$2","placeholder","adt$2","external","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$2","convert","adtConstructor","partSchema","PartType","asCommon","combine","partSpec","partValidated","defaults","generate$3","np","g","doGenerateOne","pname","generateOne$1","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","components$1","ps","ph","replacements","_","used","oneReplace","substituteAll","substitutePlaces","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","generateOne","asRawOrDie","partSchemas","partUidsSchemas","baseS","composite$1","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","rawConfig","extraApis","configFields","single$1","composite","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","find","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disabled","disable","enable","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight","isHighlighted","onHighlight","queryTarget","getFirst","_hState","itemClass","getLast","getDelta$2","selected","dest","getCandidates","HighlightApis","dehighlightAll","dehighlight","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","getByIndex","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift$1","isControl","isNotShift","rule","classification","reportFocusShifting","prevFocus","n","dom$2","focusee","highlights","FocusInsideModes","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$2","cyclicField","tabbingConfig","visibilitySelector","findCurrent","focusManager","_tabbingState","tabstops","visibles","firstTabstop","findInitial","cycle","tabstop","stopIndex","useTabstopAt","isTabstop","cyclic","goFromTabstop","goBackwards","navigate","goForwards","onEnter","onEscape","isFirstChild","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","execute","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid$1","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","flatgrid","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locateVisible","locate","findIndex","withGrid","numCols","address","newIndex","row","column","cycleHorizontal$1","oldRow","oldColumn","colsInRow","newColumn","cycleVertical$1","newRow","newCol","schema$u","focusIn$3","gridConfig","_gridState","first","doMove$2","gridState","identified","handleTab","captureTab","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","findCurrent$1","getKeyupRules$4","FlatgridType","getNewIndex","tryNewIndex","isDisabledButton","horizontalWithoutCycles","prevIndex","oldCandidate","onNewIndex","horizontal","_oldCandidate","schema$t","execute$2","flowConfig","focusIn$2","_state","getInitial","moveLeft$2","cycles","moveRight$2","doMove$1","flowState","executeOnMove","getKeyupRules$3","FlowType","_flowState","westMovers","allowHorizontal","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$s","focusIn$1","matrixConfig","previousSelector","selectors","doMove","ifCycle","ifMove","inRow","cellsInRow","allRows","rows","toMatrix","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","getKeydownRules$1","menuState","moveOnTab","getKeyupRules$1","MenuType","schema$q","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","execution","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","withoutReuse","newSpecs","buildNewChildren","detachChildren$1","newChildren","deleted","replaceChildren","withReuse","existingComps","specs","patchSpecChildren","deletedComp","virtualReplaceChildren","virtualReplace","replacee","replaceeIndex","childSpec","insert","appendAt","_replaceConfig","replaceAt","replaceConfig","replaceState","replacer","reuseDom","ReplaceApis","append","appendee","prepend","prependee","removee","foundChild","replaceBy","replaceePred","Replacing","eventHandlers","events$d","focus$2","focusConfig","ignore","onFocus","FocusApis","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","set$2","toggleConfig","initialState","toggleClass","updateClass","ariaInfo","aria","updateAriaState","onToggled","toggle$2","ToggleApis","toggle","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$a","optAction","hoverEvent","focusEvent","toggledEvent","onHover","onFocus$1","hover","focus$1","toggled","getItemRole","toggling","exclusive","schema$p","hasSubmenu","itemBehaviours","tConfig","_value","getTogglingSpec","ignoreFocus","schema$o","owner$2","parts$h","schema$n","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$2","separator","parts$g","itemInfo","builder","unit","fakeFocus","markers","schema$m","grid","movementInfo","rowSelector","Menu","_spec","_externals","menuBehaviours","selectedItem","checkedRadioItems","ele","deselectOtherRadioItems","role","trace","byItem","byMenu","triggerItem","triggerMenu","extractPreparedMenu","prep","LayeredState","expansions","menus","directory","getPreparedMenu","menuValue","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","menuItems","menuPaths","_triggerItem","generate$2","expand","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","getItemByValue","extraPath","revPath","menuIndex","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggerData","onMenuItemHighlightedEvent","onMenuItemDehighlightedEvent","HighlightOnOpen","collapseItem$1","tieredMenu","HighlightMenuAndItem","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","submenuParentItems","layeredState","getItemValue","toDirectory","_container","_menuName","setActiveMenu","setActiveMenuAndItem","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","ExpandHighlightDecision","expandRight","HighlightSubmenu","activeMenuPrep","nbMenu","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","componentMap","primaryName","makeSketch","menuComp","buildMenus","onOpenMenu","highlightOnOpen","HighlightJustMenu","tmenuComp","se","onHighlightItem","onDehighlightItem","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","maybeActivePrimary","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","collapseItem","InlineView","showWithinBounds","thing","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","global$9","Button","lookupAttr","buttonBehaviours","fromHtml","getAttrs","record","isSketchSpec","anyInSystem","asSpec","entries","setPrototypeOf","isFrozen","getOwnPropertyDescriptor","seal","create$1","construct","Reflect","fun","thisValue","Func","arrayForEach","unapply","forEach","arrayPop","pop","arrayPush","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","RegExp","typeErrorCreate","func","TypeError","_len2","arguments","_key2","thisArg","_len","_key","addToSet","transformCaseFunc","_transformCaseFunc","l","lcElement","object","newObject","lookupGetter","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text$1","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","EXPRESSIONS","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","createPolicy","ATTR_NAME","policyName","createScriptURL","scriptUrl","purify","createDOMPurify","DOMPurify","removed","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","getElementsByTagName","importNode","hooks","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","TRUSTED_TYPES_POLICY","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","namespaceURI","parentTagName","Boolean","_forceRemove","_removeAttribute","getAttributeNode","_initDocument","dirty","leadingWhitespace","dirtyPayload","parseFromString","createDocument","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isClobbered","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","allowedTags","firstElementChild","_basicCustomElementTest","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","forceKeepAttr","getAttributeType","setAttributeNS","_sanitizeShadowDOM","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","sanitizeHtmlString","global$8","rtlTransform","defaultIconName","defaultIcon","getIconName","rtlName","addToEnd","ensureTrailing","lookupIcon","get$2","iconProvider","addFocusableBehaviour","renderIcon$3","iconName","fallbackIcon","rtlIconClasses","needsRtlTransform","iconHtml","render$3","notificationIconMap","warning","Notification","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","banner","iconChoices","level","memButton","notificationIconSpec","iconNames","renderFirst","ToolbarMode$1","ToolbarLocation$1","global$7","global$6","ToolbarMode","ToolbarLocation","option$2","wrapOptional","register$e","stringOrFalseProcessor","stringOrNumberProcessor","getElement","DOM","getStyle","auto","inline","getHeightOption","getWidthOption","getMinWidthOption","getMinHeightOption","getMaxWidthOption","getMaxHeightOption","getUserStyleFormats","shouldMergeStyleFormats","shouldAutoHideStyleFormats","getContentLanguages","getRemovedMenuItems","getToolbarMode","getToolbarGroups","getToolbarLocation","fixedContainerSelector","fixedToolbarContainerTarget","isToolbarPersist","getStickyToolbarOffset","getMenubar","getToolbar","getFilePickerCallback","getFilePickerValidatorHandler","getFontSizeInputDefaultUnit","getFilePickerTypes","useTypeaheadUrls","getAnchorTop","getAnchorBottom","isDraggableModal$1","useStatusBar","useElementPath","useBranding","getResize","getPasteAsText","getSidebarShow","promotionEnabled","useHelpAccessibility","getDefaultFontStack","isSkinDisabled","isMenubarEnabled","getSkinUrl","skinUrl","documentBaseURI","skin","baseURL","getSkinUrlOption","getLineHeightFormats","isToolbarEnabled","toolbar","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsOption","toolbars","toolbarArray","isToolbarLocationBottom","fixedContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","isSplitUiMode","Options","isDraggableModal","ItemResponse","ItemResponse$1","navClass","selectableClass","presetClasses","normal","color","tickedClass","iconClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","menuClasses","dom$1","columns","schema$l","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","inputAttributes","inputStyles","inputClasses","Input","refetchTriggerEvent","redirectMenuItemInteractionEvent","findWithinSandbox","sandboxComp","inputElem","findWithinMenu","saveState","inputComp","fetchPattern","selectionStart","selectionEnd","renderMenuSearcher","handleByBrowser","handleByHighlightedItem","eventData","interactionEvent","eventType","customSearcherEventsName","i18n","searchResultsClass","augmentWithAria","chunk","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","insertItemsPlaceholder","initItems","onItem","rawItems","enrichedItems","_item","forCollection","_hasIcons","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_menuLayout","structure","createPartialMenuWithAlloyItems","menuLayout","menuType","forSwatch","searchMode","searchField","ariaControlsSearchResults","forCollectionWithSearchField","forCollectionWithSearchResults","forToolbar","name$1","value$1","fetch$1","getSubmenuItems","onItemAction","optionalName","optionalText","optionalIcon","optionalTooltip","optionalLabel","optionalShortcut","optionalSelect","borderless","enabled","defaultedColumns","defaultedMeta","defaultedOnAction","defaultedType","generatedName","namePrefix","separatorMenuItemSchema","autocompleterItemSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","inserttable","colorswatch","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","abs","ceil","SimpleBehaviours","namedEvents","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","ImmediateHideTooltipEvent","ImmediateShowTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","getTooltip","ActiveTooltipping","tooltipConfig","clearTooltip","clearTimer","show","isShowing","popup","tooltipDom","tooltipComponents","setTooltip","resetTimer","delayForShow","delayForHide","TooltippingSchema","TooltippingState","Tooltipping","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiRefs","readonly","mainUi","outerContainer","motherships","mothership","uiMotherships","m","setupReadonlyModeSwitch","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersBackstage","optComponents","buildData","convertText","isMac","alt","ctrl","shift","access","updated","segment","renderIcon$2","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","ariaLabel","domTitle","renderItemStructure","renderIcons","providerBackstage","iconSvg","iconContent","al","baseDom","colorClass","getDom","renderColorStructure","iconSpec","leftIcon","checkmark","checkMark","textRender","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipText","tooltipWorker","getSink","_tooltip","providers","tooltips","replaceText","matchText","encoded","encodeText","escapedMatchRegex","escape","render$2","extras","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","shouldHighlight","cardText","highlightOn","parts$f","hexColour","normalizeHex","shorthandRegex","longformRegex","isHexString","hex","toUpperCase","toHex","fromRgba","rgbaColour","red","green","blue","round$1","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","longForm","hexString","getLongForm","splitForm","exec","extractValues","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireResizeContent","fireTextColorChange","fireResolveName","composeUnbinders","onSetupEditableToggle","onSetupEvent","onSetupStateToggle","unbindEditableToogle","unbindFormatToggle","boundFormatChangeCallback","formatter","binding","formatChanged","initialized","once","onSetupFormatToggle","handleEvent","onActionToggleFormat$1","rawItem","onActionExecCommand","command","cacheStorage","getCacheForId","storageId","currentData","getItem","legacyDefault","setItem","storage","storageString","localstorage","cache","splice","unshift","ColorCache","addColor","hsvColour","fromRgb","minRGB","maxRGB","hsvToHex","anyToHex","fromString$1","canvas","canvasContext","getContext","clearRect","fillStyle","fillRect","getImageData","foregroundId","backgroundId","mapColors","colorMap","colors","option$1","fallbackColor","getColors$2","calcCols","sqrt","defaultCols","calculatedCols","getColorCols$1","hasCustomColors$1","getDefaultForegroundColor","getDefaultBackgroundColor","getCurrentColor","cssRgbValue","getAdditionalColors","hasCustom","applyColor","onChoice","colorPickerDialog","colorOpt","getColors$1","getCurrentColors","getFetch$1","setIconColor","splitButtonApi","newColor","setIconFill","select$1","optCurrentHex","getToolTipText","lastColor","tooltipPrefix","colorText","registerTextColorButton","addSplitButton","_splitButtonApi","registerTextColorMenuItem","addNestedMenuItem","fancytype","initData","storageKey","isValid","colorpicker","_api","details","alert","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","optTooltipping","isActive","isEnabled","renderChoiceItem","deriveMenuMovement","menuMarkers","cellOverEvent","cellExecuteEvent","makeCell","col","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","backstage","getCellLabel","shared","makeAnnouncementText","makeCells","emptyLabelText","memLabel","selectedRow","selectedColumn","selectCells","useCustomColors","allowCustomColors","colorinput","hasCustomColors","getColors","getColorItems","getColorCols","widgetSpec","separator$3","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","getExistingCoupled","getExisting","CouplingSchema","CouplingState","coupled","lookupCoupled","coupledName","Coupling","nu$3","baseFn","callbacks","nCallback","isReady","cb","LazyValue","pure","errorReporter","make$5","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","partType$1","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","processed","futureData","fetcher","getLazySink","tdata","openF","_onOpenSync","_highlightOnOpen","togglePopup","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaControls","sandboxClasses","sandboxBehaviours","matchWidth","useMinWidth","buttonWidth","set$7","FocusEvent","sandboxFields","schema$k","parts$e","Dropdown","switchToMenu","togglePopup$1","dropdownComp","HighlightNone","refetch","triggerExecute","dropdownBehaviours","updateAriaOnHighlight","activeMenuComp","setActiveDescendant","resultsElem","controlledId","updateAriaOnDehighlight","getSearchPattern","FocusMode","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","downwardsCaret","renderSubmenuCaret","underlinePath","translatedTooltip","nested","createToggleMenuItem","toggle$1","createSeparatorMenuItem","createFancyMenuItem","render","fancy","createAutocompleteItems","createCardMenuItem","card","createAutocompleterItem","tooltipString","autocomplete","createPartialMenu","createItem","itemHasIcon","identifyMenuLayout","createTieredDataFrom","partialMenu","rangeToSimRange","Autocompleter","autocompleterId","processingAction","activeState","activeRange","autocompleter","cancelIfNecessary","isMenuOpen","hideIfNecessary","editorBody","ariaOwnsAttr","getMenu","updateDisplay","lookupData","combinedItems","choices","itemMeta","autocompleterApi","reload","fetchOptions","BUBBLE_TO_SANDBOX","getCombinedItems","ld","focusMode","ContentFocus","createInlineMenuFrom","display","cloneAutocompleterToEditorDoc","docElm","getDoc","newElm","deep","border","clip","overflow","padding","redirectKeyToItem","stopImmediatePropagation","isProcessingAction","queryCommandState","AutocompleterEditorEvents","nonScrollingOverflows","isScrollingOverflowValue","isScroller","overflowX","overflowY","detectWhenSplitUiMode","popupSinkElem","ancestorsScrollers","scrollers","getBoundsFrom","sc","scrollableBoxes","constraints","constrainByMany","closest","DelayedFunction","ref","cancel","schedule","getTouch","touches","setup$d","rawSettings","stopBackspace","tapEvent","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","monitor","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","isDangerous","onFocusIn","focusoutTimeout","onFocusOut","derive","rawTarget","adt$1","stopped","resume","complete","doTriggerHandler","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerOnUntilStopped","Registry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","EventRegistry","unregister","tagId","readOrTag","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","listeners","_logger","fromExternal","listener","destroy","schema$j","parts$d","excludeFactory","exclude$1","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel$3","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","getComponents","htmlLines","itemText","getIcon","mapItemName","encodeAllRaw","ariaElements","isAriaElement","markValid","invalidConfig","getRoot","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","onValidate","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","Unselecting","unselectable","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","isShift","SliderParts","getValueFromEvent","spectrum","sliderChangeEvent","getEventSource","isTouchEvent$2","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","useMultiplier","stepSize","speedMultiplier","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xyValue","fireSliderChange$3","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","findValueOfOffset$1","handleMovement$2","xValue","moveBy$2","findPositionOfValue$1","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","setToMin","setToMax","findValueOfOffset","findPositionOfValue","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$1","handleMovement$1","yValue","moveBy$1","findOffsetOfValue","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange","sliderValue","handleMovement","isVerticalMovement","moveBy","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","choose","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","changeValue","getInitialValue","onInit","resetToMin","resetToMax","fieldsUpdate","sliderUpdate","paletteUpdate","owner$1","schema$i","getPartName$1","make$4","formBehaviours","form","resPs","resPThunk","pName","wrapper","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","getClass","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","rgbFormSketcher","setValueRgb","onInvalidInput","onValidInput","isHexInputEvent","onValidHex","hexField","copyRgbToHex","onValidRgb","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","makeFactory","colourPickerSketcher","rgbForm","onInvalidHex","sbPalette","spectrumPart","setColour","ctx","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_thumb","_slider","setHue","_apis","setPaletteHue","setThumb","setPaletteThumb","paletteFactory","paletteRgba","paletteHue","memSlider","sliderFactory","memPalette","memRgb","updatePalette","_hex","palette","updateFields","updateSlider","hueDegreesToSlider","updatePaletteThumb","runUpdates","updates","hexToHsv","onFieldsUpdate","oldHue","newHsv","newHex","onPaletteUpdate","hueSliderToDegrees","oldRgb","oldHsv","onSliderUpdate","ComposingConfigs","processors","memento","mem","rawProcessors","other","rawValue","postprocess","withComp","optInitialValue","getter","setter","withElement","english","isOldCustomEditor","rate","throttle","beforeObject","afterObject","craftWithClasses","outline","craft","containerClasses","triggerTab","targetComp","isPseudoStop","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","dialogFocusShiftedChannel","isSafariOrFirefox","isElementScrollAtBottom","scrollHeight","scrollToY","writeValue","iframeElement","fallbackFn","iframe","contentDocument","lastScrollTop","isScrollAtBottom","getScrollingElement","scrollAfterWrite","contentWindow","writeValueThrottler","interval","newArgs","tempArgs","adaptable","internalToolbarButtonExecute","commonButtonDisplayEvent","toolbarButtonEventOrder","forceInitialSize","renderIcon$1","iconsProvider","renderIconFromPack$1","renderReplaceableIconFromPack","renderLabel$1","updateMenuText","updateMenuIcon","renderCommonDropdown","btnName","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","ariaLabelAttribute","fixWidthBehaviourName","customEventsName","memDropdown","searchable","searcherComp","focusSearchField","displayIcon","originalSandboxComp","optSearcherState","newSandboxComp","searcherState","restoreState","handleRefetchTrigger","getActiveMenuItemFrom","activeItem","retargetAndDispatchWith","handleRedirectToMenuItem","itemCompCausingCollapse","nowActiveMenuComp","isSeparator$2","separator$2","realItems","isMenuItemReference","unwrapReferences","isExpandingMenuItem","itemWithValue","generateValueIfRequired","submenuItems","getFromExpandingItem","mainMenuSearchMode","searchSettings","getSearchModeForField","mainMenu","submenuSearchMode","getSearchModeForResults","submenus","isSingleListItem","dataAttribute","fetchItems","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","firstOption","opt","selectedIndex","schema$h","coupledPart","selfName","otherName","lock","onLockedChange","parts$c","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","pTextField","extraClasses2","flex","maximized","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","openClass","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isTransitioning","toggleGrow","immediateGrow","onGrown","ActiveSliding","SlidingSchema","Sliding","getMenuButtonApi","setText","setIcon","renderMenuButton","tabstopping","fetchContext","pattern","getFetch","getButton","getMenuItemAction","orig","getMenuItemSetup","renderLabel","leafLabelEventsId","renderLeafLabel","onLeafAction","visible","treeId","selectedId","internalMenuButton","btn","button","isLeftArrowKey","code","isRightArrowKey","dirComp","dirLabelElement","directoryLabelEventsId","renderDirectoryLabel","noChildren","renderIcon","toggleExpandChildren","directoryEle","directoryComp","willExpand","parentDirElement","parentDirLabelElement","renderDirectoryChildren","expandedIds","renderDirectory","labelTabstopping","directoryEventsId","expandedIdsCell","childrenVisible","includes","_cmp","childrenComp","treeEventsId","ActiveStreaming","streamConfig","streamState","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","itemExecute","schema$g","parts$b","_tmenu","previewing","lazyTypeaheadComp","selectsOver","inputDisplay","getDisplayText","setSelectionToEnd","attemptSelectOver","selectOverTextInInput","populateFromBrowse","_menu","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","getActiveMenu","typeaheadCustomEvents","responseTime","minChars","previousValue","pv","sandboxIsOpen","typeaheadComp","_typeaheadComp","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","timeout","errorThunk","timedOut","FutureResult","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","calculateClassesFromButtonType","buttonType","renderButtonSpec","translatedText","optTooltip","renderButton$1","buttonSpec","getAction","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","isNormalFooterButtonSpec","isToggleButtonSpec","optMemIcon","memIcon","tooltipAttributes","buttonTypeClasses","showIconAndText","translatedTextComponed","iconButtonSpec","newIcon","renderToggleButton","separator$1","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","errorId","set$1","get$1","make$2","dialogData","factories","bar","interpreter","renderBar","collection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel$2","baseClass","opaqueClass","transparent","containerBorderedClass","srcdoc","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","setSrcdocValue","getDynamicSource","streamContent","renderIFrame","iframeSpec","renderDialogButton","checkbox","toggleCheckboxHandler","makeIcon","memIcons","renderCheckbox","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","valueOpt","colorButton","_field","renderColorInput","colourPickerFactory","translate$1","memPicker","picker","valOpt","renderColorPicker","dropzone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","file","filterByExtension","memInput","accept","renderDropZone","renderGrid","listbox","initialItem","sketchSpec","listBoxWrap","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","converter","ratioEvent","translatedLabel","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","optCurrent","optOther","value1","value2","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","ratioSizeConversion","scale","makeRatioConverter","renderSizeInput","renderSlider","urlinput","urlBackstage","updateHistory","urlEntry","addToHistory","typeaheadSpec","fileType","urlInputValue","getLinkInformation","history","historyTargets","getHistory","getItems","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","trimmedValue","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","focusBehaviour","onFocusFn","ta","scriptId","ea","cvalue","ed","htmlpanel","renderHtmlPanel","imagepreview","cachedData","memImage","memContainer","fakeValidatedData","zoom","cachedWidth","cachedHeight","translatedData","z","applyFramePositioning","panel","panelW","panelH","zoomToFit","imageWidth","imageHeight","calculateImagePosition","imageComponent","image","loaded","naturalWidth","naturalHeight","renderImagePreview","renderTd","header","renderTable","tree","onToggleExpand","defaultExpandedIds","selectedIdCell","defaultSelectedId","renderTree","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","interpretWithoutForm","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip","bubbleAlignments$2","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getInlineBottomDialogAnchor","lazyBottomAnchorBar","getBannerAnchor","getCursorAnchor","bodyElement","selectedCells","getSelectedCells","selectionTableCellRange","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","inlineBottomDialog","cursor","isNestedFormat","isFormatReference","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","registeredUserFormats","registerFormats","registerCustomFormats","processBasic","isSelectedFor","getPreviewFor","getStylePreview","register$a","doEnrich","newItems","getStyleItems","enrichMenu","enrichSupported","isSeparator$1","formatName","newItem","enrichCustom","TooltipsBackstage","numActiveTooltips","tooltipDelay","hasContentEditableState","isElement","contentEditable","isContentEditableTrue","isContentEditableFalse","getElementText","isValidAnchor","isHeader","tempNode","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","hasTitle","LinkTargets","elms","getTargetElements","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getTextSetting","UrlInputBackstage","pickerTypes","optFileTypes","_picker","types","getPickerTypes","getPickerSetting","entry","parts$a","partType","schema$f","itemsPart","parts$9","CustomList","_external","shell","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","schema$e","parts$8","Toolbar","toolbarBehaviours","setGroups","groups","setup$a","isDocked$2","getBehaviours$1","StaticHeader","isDocked","getBehaviours","getOffsetParent","offsetParent$1","getOrigin","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isTopCompletelyVisible","isBottomCompletelyVisible","forceTopPosition","winBox","leftX","location","topY","forceBottomPosition","bottomY","getDockedLeftPosition","getPrior","getInitialPos","priorY","optScrollEnv","scrollEnv","scrollElmTop","currentScrollTop","getXYForRestoring","storePrior","getXYForSaving","setInitialPos","revertToOriginal","clearInitialPos","morph","offsetBox","scrollDelta","_left","_top","_right","_bottom","tryDecisionToFixedMorph","tryMorph","isVisibleForModes","getModes","tryMorphToOriginal","tryMorphToOriginalOrUpdateFixed","tryDockingPosition","tryMorphToFixed","morphToStatic","setDocked","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","applyFixedMorph","refresh$3","lazyViewport","applyMorph","refreshInternal","calculateMorphToOriginal","staticOrAbsoluteMorph","resetInternal","forceDockWithDecision","getDecision","storePriorIfNone","forceDockWith","forceDockToTop","forceDockToBottom","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","initialBounds","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","isDockedMode","updateIframeContentFlow","parentElem","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","headerHeight","boxHeight","topBound","constrainedBounds","constrainedBoundsY","headerElem","focusedElem","ownerDoc","activeElm","restoreFocus","rootElm","findFocusedElem","boundsWithoutOffset","getDockingMode","StickyHeader","lazyHeader","isPositionedAtTop","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","SilverMenubar","setMenus","newMenus","internal","activeButton","hoveredButton","activeComp","hoveredComp","prev","schema$d","getPartName","make$1","getSlotNames","onSlot","def","slot","doShowing","hideSlot","hideSlots","onSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","bridged","createSidebar","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","updateSidebarRoleOnToggle","sidebar","sidebarState","whichSidebar","fixSize","autoSize","BlockingApis","block","getBusySpec","blockerBehaviours","blockSpec","blocker","isBlocked","onBlock","blockWith","unblock","onUnblock","blockingConfig","blockingState","BlockingSchema","Blocking","focusBusyComponent","throbber","setup$7","lazyThrobber","throbberState","stealFocus","isFocusEvent","targetElm","editorManager","tabIndexAttr","dataTabIndexAttr","tabIndex","toggleEditorTabIndex","_root","_behaviours","getBusySpec$1","throbberFocus","busyComp","toggleThrobber","fireAfterProgressState","within","withinWidth","apportion","total","parray","toUnit","setGroups$1","storedGroups","bGroups","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","overflows","overflower","divide","tryFit","fitLast","fitAll","partition","schema$c","schema$b","parts$7","expandable","setMax","schema$a","parts$6","toggledClass","shouldSkipFocus","toolbarSandbox","bounder","FloatingToolbarButton","skipFocus","makeSandbox","toggleWithoutFocusing","schema$9","parts$5","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","schema$8","parts$4","onClosed","onOpened","toggleToolbar","overf","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarBehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","moreDrawerData","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","baseButtonFields","schemaWithoutGroupButton","togglebutton","groupFields","viewButtonSchema","viewSchema","renderViewButton","isToggleButton","optTranslatedText","optTranslatedTextComponed","ariaLabelAttributes","optIconSpec","hasIconAndText","renderButton","deviceDetection","View","hasGroups","endButtons","btnspec","renderButtonsGroup","getPane","getOnShow","_comp","viewConfig","getOnHide","makeViews","viewConfigs","internalViewConfig","pane","makeSlotContainer","getCurrentName","runOnPaneWithInstanceApi","onCallback","ViewWrapper","setViews","whichView","toggleView","showMainView","hideMainView","optCurrentSlotName","isTogglingCurrentView","hideContainer","showContainer","runOnShow","prevName","runOnHide","views","editorCont","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","sliding","floating","toolbarFactory","onToolbarToggled","lazyToolbar","lazyMoreButton","partHeader","sticky","partPromotion","partSocket","partSidebar","partThrobber","partViewWrapper","partEditorContainer","OuterContainer","toolbarDrawerOpenState","getSocket","setSidebar","showSidebar","configKey","toggleSidebar","getHeader","setToolbar","renderedGroups","setToolbars","mToolbar","renderedToolbars","refreshToolbar","toggleToolbarDrawer","toggleToolbarDrawerWithoutFocusing","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","removedMenuItems","itemName","removedMenuItem","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadRawCss","unloadRawCss","loadUiSkins","async","skinUiCss","Resource","loadShadowDomUiSkins","shadowDomSkinCss","loadSkin","isInline","skinResourceIdentifier","contentCSS","skinContentCss","loadUrlSkin","done","_skinLoaded","fireSkinLoaded$1","fireSkinLoaded","fireSkinLoadError$1","fireSkinLoadError","makeTooltipText","labelWithPlaceholder","generateSelectItems","generateItem","response","invalid","si","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","textUpdateEventName","getComponent","Delimiter","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","getTooltipPlaceholder$4","fallbackAlignment","alignMenuItems","getSpec$4","_format","alignment","fireAlignTextUpdate","canApply","findNearest","getStyles","getTooltipPlaceholder$3","fallbackFormat","getSpec$3","parseStyle","getCssText","fireBlocksTextUpdate","getTooltipPlaceholder$2","systemFont","systemStackFonts","splitFonts","fontFamily","fonts","font","matchesStack","getSpec$2","getMatchingValue","getFirstFont","queryCommandValue","userStack","matchOpt","isSystemFontStack","fireFontFamilyTextUpdate","unsupportedLength","decimalDigits","exponentPart","unsignedDecimalLiteral","dot","accepted","unitRaw","check","isUnit","Keys","tab","enter","backspace","delete","up","down","space","home","pageUp","pageDown","getTooltipPlaceholder$1","fallbackFontSize","legacyFontSizes","keywordFontSizes","toPt","fontSize","precision","factor","pow","toLegacy","getSpec$1","pt","legacy","Space","fireFontSizeTextUpdate","getTooltipPlaceholder","getSpec","getFormatItems","flattenedItems","tooltipLabel","fireStylesTextUpdate","schema$7","arrowPart","arrow","buttonPart","splitDropdown","parts$3","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","optIcon","optText","renderCommonToolbarButton","specialisation","_d","itemApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","defaultToolbar","renderFromBridge","bridgeBuilder","renderToolbarButton","renderToolbarToggleButton","menubutton","splitbutton","buttonComp","_c","renderSplitButton","grouptoolbarbutton","getAll","TopToBottom","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","bespokeButtons","fontsize","fontsizeinput","currentComp","updateInputValue","customEvents","fromInput","focusBack","alloyComp","getNewValue","lenghtDelta","oldStart","oldEnd","decrease","increase","goToParent","focusInput","makeStepperButton","editorOffCellStepButton","altExecuting","memMinus","memPlus","buttonNode","wrapperComp","createBespokeNumberInput","skip_focus","updateFunction","parsedText","defaultUnit","em","cm","in","pc","rem","getConfigFromUnit","isValidValue","fireFontSizeInputTextUpdate","getNumberInputSpec","fontfamily","blocks","toolbarConfig","prefixes","toolbarGroups","filteredItemGroups","subItem","removeUnusedDefaults","strToolbar","groupsStrings","convertStringToolbar","isToolbarGroupSettingArray","createToolbar","toolbarItem","extractFrom","lookupButton","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","popupUi","dialogUi","attachUiMotherships","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","fireScrollContent","elementLoad","setupEvents$1","socket","limit","unbinder","addQueryValueHandler","nodeChanged","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getWidth","baseWidth","minWidth","InlineHeader","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","stickyAction","bodyMargin","isOuterContainerWidthRestored","targetBounds","getOffsetParent$1","widthProperties","toolbarWidth","availableWidth","baseProperties","topValue","updateChromePosition","doUpdateMode","fc","currentMode","newMode","toolbarHeight","docHeight","calcMode","setDockingMode","verticalDir","addClass","removeClass","updateMode","getTargetPosAndBounds","Inline","toolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","lastScrollX","updateUi","newScrollX","_args","setupEvents","hideContextToolbarEvent","runOnExecute","getFormApi","ContextForm","findPrimary","mementos","renderContextToggleButton","renderContextButton","asSpecs","compInSystem","isVerticalOverlap","threshold","getSelectionBounds","leaf$1","getRangeRect","bodyPos","getContextToolbarBounds","toolbarType","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","getHorizontalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","bubbleAlignments$1","inset","anchorOverrides","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","lastElement","isEntireElementSelected","currentPosition","isReposition","preservePosition","getAnchorSpec$2","mobile","smartInsetLayout","getInsetLayouts","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","contextForm","registerForm","contextToolbar","registerToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","register$9","registryContextToolbars","lastTrigger","lastContextPosition","currentWidth","newWidth","newContents","oldContents","forwardContents","renderContextToolbar","canLaunchToolbar","isContextMenuOpen","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","getAnchorElementBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","allButtons","buildContextToolbarGroups","buildContextFormGroups","launchContext","launchContextToolbar","anchorLayout","getAnchorLayout","isSameLaunchElement","isDragging","scopes","rootElem","startNode","isOutsideRoot","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchStartNode","ancestorElem","findPosition","filterByPositionForAncestorNode","matchAncestor","lookup$1","_e","registerController","getMenuItems","getOptions","hash","oldApi","unbindWatcher","watcher","setCurrent","addMenuButton","onToolbarSetup","onMenuSetup","register$7","normalise","lineHeightSpec","customCode","customValue","lang","languageSpec","onSetupOutdentState","makeSetupHandler","pasteAsText","pastePlainTextToggleHandler","onActionToggleFormat","register$3","_idx","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems$2","onSetupUndoRedoState","onSetupVisualAidState","hasVisual","setup$6","cmd","register$8","createAlignMenu","createFontFamilyMenu","createStylesMenu","createBlocksMenu","createFontSizeMenu","register$6","registerMenuItems$1","registerButtons","register$2","applyFormat","removeFormat","registerCommands","fallbackColorForeground","fallbackColorBackground","lastForeColor","lastBackColor","register$c","registerToolbarButton","addToggleMenuItem","registerMenuItems","registerButtons$2","register$5","register$4","patchPipeConfig","shouldNeverUseNative","getAvoidOverlapSelector","getContextMenu","contextMenus","contextMenu","isTouchEvent$1","getPointAnchor","pageX","pageY","fromPageXY","containerPos","getPos","dx","dy","transpose","transposeContentAreaContainer","fromClientXY","getSelectionAnchor","getAnchorSpec$1","anchorType","getNodeAnchor","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","initAndShow","highlightImmediately","getAnchorSpec","openiOS","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","rngRect","isTouchWithinSelection","makeContextItem","commonMenuItem","commonItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","isTouchEvent","pointerType","getSelectedElement","setup$5","setContextMenuState","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAnchorType","selectedElement","sections","allItems","generateContextMenu","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","moveOrSnap","snapInfo","newCoord","snapsInfo","leftAttr","topAttr","getCoords","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","findMatchingSnap","snaps","sensor","inRange","coord1","coord2","withinRange","getSnapPoints","bestSnap","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","snapPin","snapTo$1","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","zIndex","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","getCurrentCoord","lift3","oc","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","currentCoord","optSnaps","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","deltaX","deltaY","snapping","onSensor","calcNewCoord","onDrag","dragBy","stopDrag","updateStartState","setStartData","MouseData","events$3","stop$1","delayDrop","dragApi","drop","forceDrop","init$3","schema$5","TouchData","getDataFrom","events$2","blockerSingleton","stopBlocking","init$2","mouse","mouseOrTouch","DraggingBranches","DragState","previous","dragEvent","nuData","calculateDelta","Dragging","dragger","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","domToSugar","otherCells","upOrLeftCells","downOrRightCells","renderElementPath","newPath","isPropagationStopped","updatePath","_btn","renderElement","ResizeTypes","resize","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","keyboardHandler","renderStatusbar","getTextComponents","shouldRenderHelp","shouldRenderElementPath","shouldRenderRightContainer","shortcutText","renderHelpAccessibility","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","renderRightContainer","flexStart","flexEnd","container3Columns","getTextComponentClasses","resizeHandler","None","Vertical","getResizeType","resizeLabel","_target","renderResizeHandler","getLazyMothership","setup$3","setupForTheme","lazyUiRefs","getUiMotherships","optDialogMothership","optPopupMothership","dm","pm","lazyGetInOuterOrDie","LazyUiReferences","lazyMothership","lazyDialogMothership","lazyPopupMothership","deviceClasses","isToolbarBottom","memAnchorBar","memBottomAnchorBar","lazyAnchorBar","backstages","lazySinks","contextMenuState","HeaderBackstage","settingsFormats","eventsFormats","replaceSettings","enriched","modifications","fromSettings","fromEvents","init$7","ColorInputBackstage","dialogSettings","DialogBackstage","commonBackstage","popupBackstage","dialogBackstage","init$6","renderMainUi","verticalDirAttributes","fireToggleToolbarDrawer","hasMultipleToolbar","hasToolbar","hasMenubar","shouldHavePromotion","promotion","hasAnyContents","menubarCollection","makeHeaderPart","sidebarContainer","viewWrapper","statusbar","editorComponents","isHidden","opacity","setEditorSize","parsedHeight","baseHeight","minHeight","getHeight","getHeightWithFallback","parsedWidth","getWidthWithFallback","popups","getMothership","dialogs","renderUI","isGridUiContainer","sinkSpec","reactiveWidthSpec","uiMothership","renderDialogUi","getPopupSinkBounds","renderPopupUi","reuseDialogUiForPopuUi","toolbarGroupButtonConfig","addGroupToolbarButton","sidebars","toolbarOpt","addQueryStateHandler","channel","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","loopEditor","relatedTarget","onWindowScroll","onWindowResize","onElementScroll","onEditorResize","onEditorProgress","onDismissPopups","gui","setup$b","handleToggle","setup$8","renderUIWithRefs","schema$2","basic","parts$2","dragBlockClass","getDragBounds","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","labelId","labelledBy","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","toggleButtonSpecFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","formComponentFields","formComponentWithLabelFields","checkboxFields","checkboxSchema","checkboxDataProcessor","collectionFields","collectionSchema","collectionDataProcessor","colorInputFields","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imagePreviewSchema","imagePreviewDataProcessor","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","sliderFields","sliderSchema","sliderInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","baseTreeItemFields","treeItemLeafSchema","treeItemDirectoryFields","treeItemDirectorySchema","treeItemSchema","treeFields","treeSchema","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","internalDialog","dataValidator","DialogManager","openUrl","redial","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","toValidValues","renderBodyPanel","memForm","formValue","TabButton","tabButtonBehaviours","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$1","Tabbar","tabbarBehaviours","selectedClass","Tabview","tabviewBehaviours","barPart","tabs","viewPart","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","setDataOnForm","oldTab","allTabs","tabMode","extraEvents","tabviewComp","heights","_tab","measureHeights","maxTabHeightOpt","getMaxHeight","oldHeight","newHeight","smartMode","_viewItems","oldName","tsection","renderBody","dialogId","contentId","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","titleId","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","fullscreenClass","largeDialogClass","mediumDialogClass","getDialogSizeClass","updateDialogSizeClass","dialogSizeClass","toggleFullscreen","currentSize","currentSizeClass","toggle$5","toggle$4","toggle$3","renderModalDialog","mapMenuButtons","menuItemStates","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","self","initDialog","getInstanceApi","withSpec","currentDialogInit","rootNode","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","renderFooter","initSpec","makeButton","lookupByName","buttonName","renderModalFooter","getCompByName","getFormWrapper","footerState","getDialogApi","doRedial","withRoot","instanceApi","valueComp","prevData","mergedData","newInternalData","dialogState","validateData$1","tabSection","getId","dialogInit","storedMenuButtons","renderInlineDialog","refreshDocking","dialogLabelId","dialogContentId","dialogSize","memHeader","renderInlineHeader","memBody","renderInlineBody","storagedMenuButtons","objOfCells","optMemFooter","renderInlineFooter","memFooter","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","bodySpec","renderIframeBody","currentDialog","initUrlDialog","iframeUri","base_uri","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","handleMessage","isCustomMessage","onMessage","iframeEle","iframeWin","postMessage","sendMessage","getUrlDialogApi","validateData","isAlertOrConfirmDialog","inlineAdditionalBehaviours","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$2","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$1","openModalDialog","internalInitialData","dialogSizeClasses","renderModalBody","modalAccess","outerForm","renderDialog","openInlineDialog","config$1","windowParams","inlineDialogComp","persistent","openBottomInlineDialog","contentAreaContainer","openModalUrlDialog","colorProcessor","colorColsProcessor","register$d","registerOptions","popupSinkBounds","renderModeUI","windowMgr","renderResult","getWindowManagerImpl","getNotificationManagerImpl","contentArea","win$1","closeCallback","notificationWrapper","notification","progressBar","thisNotification","notificationSpec","allNotifications","notificationManager","getNotifications","previousNotification","getEl","nodeAnchor","nuText","getArgs","NotificationManagerImpl","typeOf$1","eq$2","eqString","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","sort$1","eqSortedArray","q","eqAny","tx","isEquatableType","is$4","isArray$1","compose1","map$3","each$e","partition$2","filter$5","findUntil$1","findIndex$2","last$2","unique$1","isDuplicated","hasOwnProperty$1","each$d","filter$4","stringArray","isArrayLike","each$c","filter$3","reduce","iteratee","accumulator","unknown$2","blank","trim$4","lTrim","rTrim","isEmpty$3","toInt","radix","nu$2","nu$1","platform$4","platform$3","browser$3","os$1","windowsPhone","Env","transparentSrc","documentMode","cacheSuffix","canHaveCSP","whiteSpaceRegExp$1","trim$3","walk$4","delim","resolvedItems","hasOwn","extend","exts","ext","walk","_addCacheSuffix","resolve$2","isHTMLElement$1","isElement$7","isText$c","isDocument$2","isDocumentFragment$1","set$3","remove$9","clone$4","read$4","remove$8","fromDom$2","elementFromPoint","recurse","parents$1","prevSibling","previousSibling","prevSiblings","nextSiblings","lastChild","childNodesCount","getStyleContainer","getHead","ancestor$4","descendant$2","ancestor$3","isEditable$2","assumeEditable","isContentEditable","editable","getRaw$1","before$3","after$4","unwrap","fromDom$1","handle$1","intoView","alignToTop","scrollIntoViewIfNeeded","sibling$1","DomTreeWalker","prev2","findSibling","findPreviousNode","startName","siblingName","zeroWidth","nbsp","isZwsp$2","char","whiteSpaceRegExp","isWhitespaceText","isNewLineChar","normalize$4","tabSpaces","isStartOfContent","isEndOfContent","tabSpace","repeat","normalizedText","isCollapsibleWhitespace$1","pcIsSpace","isNewline","isNodeType","isRestrictedNode","isElement$6","matchNodeName","lowerCasedName","matchNodeNames","lowerCasedNames","matchStyleValues","computed","isBogus$1","isTable$2","isTextareaOrInput","isText$b","isCData","isPi","isComment","isDocument$1","isBr$6","isImg","isContentEditableTrue$3","isContentEditableFalse$b","isTableCell$3","isTableCellOrCaption","isMedia$2","isListItem$2","isDetails","isSummary$1","defaultOptionValues","skipBogus","includeZwsp","checkRootAsContent","isBookmark","isText$a","rootElement","whitespaceElements","getWhitespaceElements","hasWhitespacePreserveParent","isWhitespace$1","isZwsp$1","isContentNode","isContent","getNonEmptyElements","isNonEmptyElement$1","isNamedAnchor","hasNonEditableParent","isEmptyNode","opts","brCount","bogusValue","isEmpty$2","isContent$1","isNonHtmlElementRootName","isNonHtmlElementRoot","toScopeType","namespaceElements","transparentBlockAttr","makeSelectorFromSchemaMap","elementNames","ns","updateTransparent","blocksSelector","updateBlockStateOnChildren","transparentSelector","getTransparentElements","getBlockElements","trimEdge","leftSide","childPropertyName","splitInvalidChildren","transparentBlocks","blocksElements","isBlock","transparentBlock","parentBlock","invalidChildren","isValidChild","stateScope","parentElm","splitElm","beforeFragment","extractContents","afterFragment","split$2","updateChildren","isTransparentBlock","isTransparentInline","unwrapInvalidChildren","updateElement","isTransparentElement","hasBlockAttr","isTransparentElementName","isTransparentAstBlock","browser$2","firstElement","hasChild","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","addStyle","removeStyle","styleContainer","getOrCreateState","passed","failed","failure","urlWithSuffix","onload","onerror","linkElem","contentCssCors","referrerPolicy","styleElem","loadAll","urls","allSettled","reason","unloadAll","_setReferrerPolicy","_setContentCssCors","instance","WeakMap","forElement","referenceElement","rootDom","sl","create$c","isInlineContent","isBookmarkNode$2","isSpan","trimNode","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","itemList","chr","fromCharCode","entity","namedEntities","encodeRaw","encodeNumeric","charCodeAt","encodeNamed","entities","resolveEntities","Entities","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","charAt","nativeDecode","split$1","patternToRegExp","getGlobalAttributeSet","getElementSetsAsStrings","blockContent","phrasingContent","flowContent","getElementSets","toArr","cachedSets","getElementsPreset","parseValidChild","preset","mapCache","makeMap$2","each$b","extend$2","explode$2","createMap","defaultValue","extendWith","getTextRootBlockElements","getTextBlockElements","compileElementMap","Schema","patternElements","customElementsMap","specialElements","createLookupTable","schemaType","schemaItems","globalAttributes","addElement","attributesOrder","childNames","ni","allAttributes","addAttrs","schemaItem","video","audio","caption","script","makeSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whitespaceElementsMap","selfClosingElementsMap","voidElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","headings","textBlockElementsMap","blockElementsMap","textInlineElementsMap","transparentElementsMap","wrapBlockElementsMap","addValidElements","validElements","globalElement","hasPatternsRegExp","elementRuleRegExp","elementName","outputName","attrsPrefix","attrData","cloneAttributesInto","paddEmpty","removeEmpty","removeEmptyAttrs","targetElement","attrRuleRegExp","attrType","attrPrefix","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attrPattern","attributePatterns","parseValidElementsAttrDataIntoElement","aliasName","parseValidElementsRules","patternElement","setValidElements","addCustomElement","text_block_elements","block_elements","extends","cloneName","customRule","helper","isRegExp$1","deepCloneElementRule","processAttrName","globalAttrs","padEmpty","customElementChildren","processNodeName","processPreset","elmName","addCustomElements","customElements","customElementRegExp","parseCustomElementsRules","addCustomElementsFromString","addValidChildren","validChildren","childRuleRegExp","operation","prefixToOperation","validChild","parseValidChildrenRules","getElementRule","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getVoidElements","getSelfClosingElements","getMoveCaretBeforeOnEnterElements","getWrapBlockElements","getSpecialElements","attrPatterns","getCustomElements","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","th","tr","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","isWrapper","rgbaToHexString","Styles","urlOrStrRegExp","styleRegExp","trimRightRegExp","rgbaRegExp","encodingLookup","encodingItems","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","lastIndex","serialize","serializeStyles","elemName","validStyleList","styleList","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","clone$3","originalEvent","getModifierState","keyArg","getTargetRanges","normalize$3","fallbackTarget","srcElement","Event","initEvent","isNativeEvent","needsNormalizing","defaultPrevented","cancelBubble","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","removeEvent","fix","isMouseEvent","eventDoc","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","expando","hasFocusIn","callbackList","defaultNativeHandler","executeHandlers","namesList","nativeHandler","fakeName","eventMap","ci","newCallbackList","ex","fire","parentWindow","clean","each$a","internalStyleName","numericalCssMap","legacySetAttribute","camelCaseToHyphens","findNodeIndex","normalized","lastNodeType","updateInternalStyleAttr","applyStyle$1","$elm","cssName","cssValue","normalizedName","convertStyleToString","DOMUtils","addedStyles","counter","boundEvents","ownEvents","getElementById","_get","defaultVal","attrHooks","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","root_element","getPos$1","castOffsetParent","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getSize","collect","resolvedRoot","selectorVal","_findSib","context","setHTML","keepChildren","$node","oldElm","replaceChild","createRng","rv","boundTarget","boundName","boundFunc","getContentEditable","stdMode","boxModel","getViewPort","argWin","getRect","getPrev","outHtml","createFragment","frag","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","cssText","serializeStyle","styleElm","styleSheet","loadCSS","catch","hasClass","uniqueId","getOuterHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","nodeIndex","replacementElm","getContentEditableParent","isChildOf","dumpRng","keepValues","keep_values","keepUrlHook","sugarElm","setupAttrHooks","DOM$b","ScriptLoader","states","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","execCallbacks","processResults","failures","processQueue","nextQueuedItem","uniqueScripts","currentCode","getLanguageData","I18n","setCode","newCode","getCode","langData","lcNames","translation","firstIndex","getLangData","textStr","removeContext","isTokenised","$1","$2","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","isLoaded","loadLanguagePack","languages","language","waitFor","isAdded","requireLangPack","languageLoad","addOn","createUrl","baseUrl","resource","addOnUrl","urlString","lastIndexOf","PluginManager","ThemeManager","ModelManager","repeatable","intervalId","clearInterval","functionToRepeat","setInterval","first$1","annotation","dataAnnotation","dataAnnotationId","dataAnnotationActive","dataAnnotationClasses","dataAnnotationAttributes","isRoot$1","identify","annotationName","an","newStart","findMarkers","isBogusElement","findAll","nodesAlready","generate$1","shallow$1","deep$1","TextWalker","isBoundary","TextSeeker","isBlockBoundary","newOffset","backwards","forwards","lazyLookup","isBr$5","isTextBlock$2","isList","isListItem$1","isTableSection","isTableCell$2","isWsPreserveElement","createPaddingBr","br","fillWithPaddingBr","ZWSP$1","isZwsp","trim$2","isElement$5","isText$9","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","brs","lastBr","trimBogusBr","isRangeInCaretContainerBlock","round$2","toStart","isValidOverflow","rect1","rect2","isAbove$1","halfHeight","isBelow$1","distanceToRectEdgeFromXY","cx","cy","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","isContentEditableTrue$2","isContentEditableFalse$a","isBr$4","isText$8","isInvalidTextElement","isAtomicInline","isTable","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","isElement$4","isCaretCandidate$2","isBlock$2","isFloated","isValidElementCaretCandidate","isNotPre","isText$7","isBr$3","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","brNode","nbsp$1","getBrClientRect","ec","so","eo","newRng","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","getCaretPositionClientRects","toRange","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","trimEmptyTextNode$1","rangeInsertNode","insertNode","insertFragment","isText$6","isBogus","normalizedParent","equal","createPathItem","numTextFragments","normalizedNodeIndex","create$a","outputOffset","normalizedTextOffset","parentsUntil$1","resolve$1","resolvePathItem","nodeOffset","targetOffset","dataLen","findTextPosition","isContentEditableFalse$9","getPoint","trimmedOffset","getNormalizedTextOffset$1","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","forward","isForward","fakeCaret","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","getUndoBookmark","isInlinePattern","isBlockPattern","normalizePattern","formatOrCmd","onFormat","onCommand","trigger","commandValue","getBlockPatterns","getInlinePatterns","filterByTrigger","blockPatterns","hasBlockTrigger","fromRawPatterns","deviceDetection$1","DOM$a","isRegExp","stringOrObjectProcessor","bodyOptionProcessor","bodyObj","getHash","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre$1","getForcedRootBlock","getForcedRootBlockAttrs","getNewlineBehavior","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getIconPackName","getIconsUrl","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","getLanguageUrl","shouldIndentUseMargin","getIndentation","getContentCss","getContentStyle","getFontCss","getDirectionality","getInlineBoundarySelector","getObjectResizing","getResizeImgProportional","getPlaceholder","getEventRoot","getServiceMessage","getTheme","getThemeUrl","getModel","getModelUrl","isInlineBoundariesEnabled","getFormats","getPreviewStyles","canFormatEmptyLines","getFormatNoneditableSelector","getCustomUiSelector","isInline$1","hasHiddenInput","shouldPatchSubmit","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","getCustomUndoRedoLevels","shouldDisableNodeChange","isReadOnly$1","hasEditableRoot$1","hasContentCssCors","getPlugins","getExternalPlugins$1","shouldBlockUnsupportedDrop","isVisualAidsEnabled","getVisualAidsTableClass","getVisualAidsAnchorClass","getIframeAriaText","getSetupCallback","getInitInstanceCallback","getUrlConverterCallback","getAutoFocus","shouldBrowserSpellcheck","getProtect","shouldPasteBlockDrop","shouldPasteDataImages","getPastePreProcess","getPastePostProcess","getNewDocumentContent","getPasteWebkitStyles","shouldPasteRemoveWebKitStyles","shouldPasteMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getPasteTabSpaces","shouldAllowHtmlDataUrls","getTextPatterns","getTextPatternsLookup","getNonEditableClass","getEditableClass","getNonEditableRegExps","shouldPreserveCData","shouldHighlightOnFocus","shouldSanitizeXss","shouldUseDocumentWrite","getAllowedImageFileTypes","hasTableTabNavigation","getDetailsInitialState","getDetailsSerializedState","shouldSandboxIframes","getSandboxIframesExclusions","shouldConvertUnsafeEmbeds","getLicenseKey","getApiKey","isElement$3","isText$5","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","indexOf$1","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","isContentEditableFalse$8","isMedia$1","isTableCell$1","getAbsoluteClientRect","scrollX","scrollY","rootRect","FakeCaret","lastVisualCaret","cursorInterval","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","blockName","blockNode","insertBlock","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableTrue$1","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$2","isText$4","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","isCefOrCaretContainer","getParentBlock$3","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","before$2","normalizeRange","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","HDirection","isContentEditableFalse$6","isText$3","isBr$2","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID","isCaretNode","getParentCaretContainer","isIndexBookmark","isPathBookmark","isForwardBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","markerParent","otherMarker","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","getBookmark$2","resolvePaths","isStringPathBookmark","endPos","resolveCaretPositionBookmark","isIdBookmark","spos","epos","resolveId","selectNode","resolveIndex","isRangeBookmark","isBookmarkNode$1","isNbsp","isWhiteSpace","getRanges$1","getCellsFromElementOrRanges","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getClosestTable","getFirstChildren","getLastChildren","hasAllContentsSelected","getStartNode","getEndNode","endNode","moveEndPoint","hasAnyRanges","runOnRanges","fakeSelectionNodes","fakeNodeRng","fillBookmark","isNode","isElementNode$1","preserveSelection","shouldMoveStart","selectedNodeBeforeAction","isSelectedBeforeNodeNoneditable","moveStartToNearestText","selectedAttr","isElementDirectlySelected","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","allowSpaces","isWrappableNoneditable","baseDataSelector","formatNoneditableSelector","isWrapNoneditableTarget","replaceVars","vars","isEq$5","str1","normalizeStyleValue","strValue","getTextDecoration","decoration","getParents$2","isFormatPredicate","isInlineFormat","shouldExpandToSelector","isCaretContainerEmpty","getEmptyCaretContainers","isEmptyCaretFormatElement","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$3","exclude","firstNode","lastNode","collectSiblings","siblings","findEndPoint","walkBoundary","startPoint","endPoint","validBlocks","applyAnnotation","masterUId","decorate","directAnnotation","otherData","attributeNames","makeAnnotation","eDoc","master","annotate","newWrappers","finishWrapper","processElements","elems","processElement","wrapName","isZeroWidth","isAnnotation","processNodes","Annotator","annotations","getNames","create$b","dataAnnotation$1","identifyParserNode","removeDirectAnnotation","customAttrNames","customClasses","newClassList","serializer","addTempAttr","addAttributeFilter","setup$x","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","toggleActiveAttr","onNodeChange","fireNoAnnotation","fireCallbacks","addListener","setup$y","removeAnnotations","initialRng","hasFakeSelection","masterUid","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","removeAll","BookmarkManager","isXYWithinRange","containsXY","fireError","errorType","fireFormatApply","fireFormatRemove","fireSetContent","fireGetContent","fireAutocompleterUpdateActiveRange","firePastePlainTextToggle","VK","DELETE","ESC","SPACEBAR","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","elementSelectionAttr","resizeHandles","nw","ne","sw","ControlSelection","editableDoc","rootDocument","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","isImage","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTargets","isResizable","setSizeProp","setGhostElmSize","ghostElm","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","screenX","screenY","selectedElmX","selectedElmY","scrollWidth","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","handleElm","rowSelect","tableElm","createGhostElement","startDrag","throttledShowResizeRect","removeSelected","isChildOrEqual","updateResizeRect","composing","controlElm","disableGeckoResize","startElm","getEnd","availableSearch","caretPositionFromPoint","offsetNode","caretRangeFromPoint","cata","onBefore","onOn","onAfter","getStart$1","beforeSpecial","preprocessRelative","preprocessExact","fromElements","toNative","getDomRange","filtered","fromPoint","fromPoint$1","getAtPoint","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","newContainer","RangeUtils","rangeLike","newRange","normalize","normalizedRng","compareRanges","getCaretRangeFromPoint","excludeFromDescend","markerInfo","cleanupFun","withMarker","preserveWith","_s","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","createMarker$1","elementMarker","startElement","endElement","scrollToMarker","intoWindowIfNeeded","viewportBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","clamp$1","normalizeRng","isOrContains","isRngInRoot","nativeRangeToSelectionRange","bookmarkToNativeRng","newBookmark","shouldStore","FocusManager","isEditorUIElement","Delay","wrappedSetTimeout","setEditorInterval","wrappedSetInterval","documentFocusInHandler","DOM$9","isEditorContentAreaElement","isUIElement","customSelector","getActiveElement","registerEvents$1","throttledStore","mouseUpPage","registerPageMouseUp","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","toggleContentAreaOnFocus","focusedEditor","blurredEditor","activeEditor","unregisterDocumentEvents","normalizeSelection","getCollapsedNode","getFocusInElement","caretPos","focusBody","rawBody","hasInlineFocus","hasIframeFocus","hasEditorOrUiFocus","hasUiFocus","activateEditor","isEditableRange","getEndpointElement","real","skipEmptyTextNodes","processRanges","typeLookup","walk$2","isEmptyTextNode","isNonEmptyElement","AstNode","selfAttrs","cloneAttrs","selfAttr","refNode","whitespace","unescapedTextParents","containsZwsp","getTemporaryNodeSelector","tempAttrs","createZwspCommentWalker","createTreeWalker","FILTER_ACCEPT","FILTER_SKIP","createUnescapedZwspTextWalker","hasZwspComment","hasUnescapedZwspText","hasTemporaryNode","trimTemporaryNodes","getTemporaryNodes","emptyAllNodeValuesInWalker","curr","emptyZwspComments","emptyUnescapedZwspTexts","conditionalTrims","condition","trimmed","cloned","cleanupBogusElements","bogusElements","cleanupInputNames","inputs","getContentFromBody","getTempAttrs","offscreenDiv","getPlainTextContent","emptyRegExp","trimEmptyContents","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","HtmlSerializer","writer","sortedAttrs","elementRule","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","parentsUntil","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isBlock$1","isAtBeforeAfterBlockBoundary","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr$1","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","isSiblingCefBlock","needsToHaveNbsp","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToBeNbspLeft","isPrevCefBlock","isAfterCefBlock","needsToBeNbspRight","nextPos","isNextCefBlock","isBeforeCefBlock","needsToBeNbsp","isNbspAt","isWhiteSpaceAt","normalizeNbspAtStart","makeNbsp","firstPos","normalizeNbspAtEnd","lastPos","normalizeNbsps","hasNbsp","newText","chars","normalizeNbspMiddle","normalizeNbspInMiddleOfTextNode","normalize$1","replaceData","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition","setSelection$1","deleteElement$2","moveCaret","preserveEmptyCaret","afterDeletePos","rawNode","normalizedAfterDeletePos","afterDeletePosOpt","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","setCursorLocation","paddEmptyBlock","paddPos","strongRtl","isInlineTarget","hasStrongRtl","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","execCommandIgnoreInputEvents","inputBlocker","execNativeDeleteCommand","isTextBlockOrListItem","getParentBlock$2","isBeforeRoot","paddEmptyBody","moveSelection","no_selection","willDeleteLastPositionInElement","fromPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","freefallRtl","deleteRangeContents","deleteContents","lastBlock","additionalCleanupNodes","getTableCells","getTable$1","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","startIndex","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","optCellRng","getCellRng","isStartInTable","isEndInTable","isStartTableParentOfEndTable","isEndTableParentOfStartTable","isMultiTable","selectionInTableWithNestedTable","getTableDetailsFromRange","isSingleCellTable","isSingleCellTableContentSelected","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","cleanCells","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","getOutsideBlock","startInTable","emptyBlock","handleEmptyBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret$3","fromCell","deleteBetweenCells","deleteCaretCells","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete$a","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange$3","getContentEditableRoot$1","internalAttributesPrefixes","each$9","ElementUtils","internalAttributes","isAttributeInternal","attributeName","compare","attribs","compareObjects","obj1","obj2","isHeading","matchNode$1","nodeFilters","attributeFilters","nl","ai","runFilters","matchRecord","filteringAttributes","traverse","findMatchingNodes","paddEmptyNode","pad_empty_with_br","astNode","hasOnlyChild","nonEmptyElements","isPadded","findClosestEditingHost","editableNode","removeOrUnwrapInvalidNode","originalNodeParent","childNode","cleanInvalidNodes","onCreate","textBlockElements","nonSplittableElements","isSplittableElement","newParent","parentName","hasClosest","isSummary","commonAncestorContainer","newEndPos","normalizeBlockSelectionRange","isListFragment","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","newPosNode","findFirstIn","insertBefore$2","insertAfter$2","beforeRng","afterRng","getSplit","insertMiddle","mergeableWrappedElements","isTableCell","insertHtmlAtCaret","parser","merge","bookmarkHtml","preserve_zwsp","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","paste","isParentBlockLi","isPastingSingleElement","isWrappedElement","isPastingInTheSameBlockTag","isPastingInContentEditable","shouldPasteContentOnly","markFragmentElements","_selectionOverrides","showBlockCaretContainer","notHeadingsInSummary","markerNode","findMarkerNode","editingHost","toExtract","getNodeFilters","getAttributeFilters","no_events","validInsertion","textInlineElements","elementUtils","isNonInheritableStyle","hasInheritableStyles","reduceInlineTextElements","nextRng","parentEditableElm","isCell","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","lastChildPrevSibling","trimBlockTrailingBr","trimBrsFromTableCell","caretParent","updateCaret","isTreeNode","setEditorHtml","noSelection","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchedNode","matchNode","matchName","matchItems","matchAttributes","onmatch","expectedValue","isEmptyValue","match$2","ZWSP","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","parentsAfter","newCaretContainer","allBrs","getLastChildren$1","removeTrailingBr","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","formatNames","matchSimilar","isVariableValue","fieldValues","isVariableFormatName","matchAllOnNode","fmtName","otherFormatName","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","createCaretFormat","innerMost","replaceWithCaretFormat","isFormatElement","inlineElements","postProcessHooks","isPre","getSelectedBlocks","preBlocks","pre","hasPreSibling","pre1","pre2","sPre2","joinPre","listItemStyles","getExpandedListItemFormat","hasListStyles","isRngStartAtStartOfElement","isRngEndAtEndOfElement","isEditableListItem","getPartiallySelectedListItems","each$8","isElementNode","findElementSibling","mergeSiblingsNodes","isPrevEditable","isNextEditable","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$7","isEq$2","isChildOfInlineParent","lastIdx","normalizeTableSelection","isTableCellOrRow","wrapWithSiblings","rootBlockElm","forcedRootBlock","list_block","isMixedFormat","processFormatAttrOrStyle","removeEmptyStyleAttributeIfNeeded","removeStyles","compareNode","stylesModified","styleName","styleValue","normalizedStyleValue","remove_similar","removeNodeFormatInternal","ceFalseOverride","isColorFormatAndAnchor","preserveAttributes","preserve_attributes","attrsToPreserve","valueOut","removeNodeFormatFromClone","newName","removeFormat$1","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeFormatOnNode","removeNodeFormat","currentNodeMatches","textDecoration","isRemoveBookmarkNode","removeRngStyle","liFmt","removeListStyleFormats","removeFormatInternal","each$6","each$5","applyStyles","styleVal","applyFormatAction","setElementFormat","onformat","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","lastContentEditable","isWrappableNoneditableElm","contentEditableValue","isEditableDescendant","validBRParentElements","hasCaretNodeSibling","canFormatBR","isWrappingBlockFormat","isMatchingWrappingBlock","isValidBlockFormatForNode","isNonWrappingBlockFormat","canRenameBlock","isValidWrapNode","isCaret","isCorrectFormatForNode","canWrapNode","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","hasFontSize","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","parentTextDecoration","mergeTextDecorationsAndColor","inverseTagDescendants","mergeSubSup","wordcharRegex","applyCaretFormat","fake","getFullySelectedBlocks","getFullySelectedListItems","postProcess$1","applyFormat$1","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","withSimilar","withoutSimilar","withVars","explode$1","create$8","filters","addFilter","getFilters","removeFilter","newCallbacks","addFilters","domParser","convert_fonts_to_spans","fontSizes","addNodeFilter","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","convertToSTag","addStrikeFilter","parseDataUri","uri","base64Encoded","extractedData","extractBase64Data","decodeURIComponent","buildBlob","atob","Uint8Array","Blob","blobToDataUri","reader","FileReader","onloadend","readAsDataURL","count$1","processDataUri","dataUri","base64Only","generateBlobInfo","base64","btoa","createBlobInfo$1","blobCache","blobInfo","dataUriToBlobInfo","getByData","hostCaptureRegex","extractHost","ms","sandboxIframe","iframeNode","exclusions","isMimeType","mime","create$7","each$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","isInvalidUri","decodedUri","encodedUri","unescape","decodeUri","allowSvgDataUrls","blockSvgDataUris","URI","uriComponents","pathname","baseUri","isProtocolRelative","toAbsPath","urlMatch","userInfo","setPath","pathMatch","getURI","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","nb","normalizedPath","baseParts","pathParts","outPath","noProtoHost","filteredUrlAttrs","internalElementAttr","processNode","allow_conditional_comments","lcTagName","isInternalElement","bogus","hasNone","shallowAs","mutate","shouldKeepAttribute","isRequiredAttributeOfInternalElement","isBooleanAttribute","filterAttributes","setupPurify","namespaceTracker","purify$1","track","processAttr","sanitizeNamespaceElement","xlinkAttrs","extend$1","transferChildren","nativeParent","nsSanitizer","isSpecial","nativeChild","DomParser","nodeFilterRegistry","attributeFilterRegistry","defaultedSettings","root_name","sanitizer","peek","currentScope","createNamespaceTracker","sanitizeHtmlElement","mimeType","getPurifyConfig","_mimeType","getSanitizer","removeNodeFilter","removeAttributeFilter","isWrappableNode","blockElements","exports","rootName","isSpecialRoot","wrappedHtml","parseAndSanitizeWithContext","whitespacePre","whitespacePost","textRootBlockElements","allWhiteSpaceRegExp","startWhiteSpaceRegExp","endWhiteSpaceRegExp","hasWhitespaceParent","isAtEdgeOfBlock","neighbour","isRootContent","isLineBreakNode","isNodeEmpty","isTextRootBlockEmpty","isPaddedWithNbsp","whitespaceCleaner","invalidFinder","findInvalidChildren","matchFinder","preprocessors","postprocessors","traverseOrder","walkTree","topLevelChildren","otherChildren","rootBlockName","forced_root_block","getRootBlockName","rootBlockNode","rootBlock","forced_root_block_attrs","addRootBlocks","addNoOpener","appendRel","allow_unsafe_link_target","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","blobUri","registerBase64ImageFilter","sandbox_iframes","sandboxIframesExclusions","sandbox_iframes_exclusions","convert_unsafe_embeds","sandboxIframes","getEmbedType","embed","createSafeEmbed","inline_styles","withSerializedContent","fireEvent","parserSettings","serializedContent","serializeContent","eventArgs","makeParserSettings","preProcessGetContent","fireBeforeGetContent","postProcessGetContent","processedEventArgs","preProcessSetContent","fireBeforeSetContent","postProcessSetContent","tableModel","tableRow","cellPosition","getSpan","cellExists","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getWrapElements","commonAnchorContainer","wrapElements","listWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","getFullySelectedListWrappers","allWrappers","directListWrappers","emptyFragment","getTableFragment","selectedTableCells","getParentTable","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","subTable","subsection","sectionedTableModel","read$3","innerElm","getFragmentFromRange","getSelectionFragment","isCollapsibleWhitespace","getInnerText","bin","getOuterHtml","fragments","diff","insertAt","removeAt","applyDiff","vDown","vUp","buildScript","start1","end1","start2","end2","getMiddleSnake","diag","i2","buildSnake","snake","lazyTempDocument","createFromEditor","hasIframes","beforeBookmark","applyToEditor","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","bindEvents","beforeChange","beforeChange$1","currentLevel","newLevel","lastLevel","bm","customUndoRedoLevels","setDirty","addUndoLevel$1","undo","undo$1","redo","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","transact$1","ignore$1","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","rawElm","registeredFormatListeners","formatChangeItems","toAppendTo","addListeners","removeListeners","formatChangedInternal","getContentInternal","trimmedHtml","setContentTree","padd","forcedRootBlockName","setContentString","setContentInternal","addVisual","matchedElm","addVisualInternal","defaultedArgs","getInner","setupArgs$3","updatedArgs","parentBlockOpt","contextNodeName","getContextNodeName","rangeContentClone","nonRenderedText","parentBlockText","textIndex","getTextContent","tmpElm","getSerializedContent","extractSelectedContent","getSelectedContentInternal","addDecoration","removeDecoration","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","SelectorChanged","setupArgs$2","cleanedContent","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","isValidRange","removeAllRanges","addRange","setBaseAndExtent","anchorRange","focusRange","getSelectedContent","getContent$1","bookmarkManager","compareEndPoints","fakeSelectedElements","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","controlSelection","htmlParser","DomSerializerImpl","remove_trailing_brs","internalName","hasChildren","preserve_cdata","lastParent","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","firePreProcess","preProcess$1","process$1","getHtmlFromNode","isBr","brNode1","brNode2","trimTrailingBr","parseHtml","serializeNode","outArgs","firePostProcess","postProcess","toHtml","addRules","setRules","DomSerializer","domSerializer","setupArgs","setContent$2","removedOptions","deprecatedOptions","removedPlugins","deprecatedPlugins","getMatchingOptions","searchingFor","settingNames","setting","getRemovedOptions","getDeprecatedOptions","getMatchingPlugins","pluginNames","plugin","getRemovedPlugins","getDeprecatedPlugins","getPluginDescription","replacedWith","DOM$8","safeDestroy","iconPack","CreateIconManager","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","NotificationManager","notifications","getImplementation","theme","unimplemented","getTopNotification","closeNotification","otherNotification","isEditorAttachedToDom","addNotification","serviceMessage","registerEvents","WindowManager","WindowManagerImpl","funcBind","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","fireOpenEvent","addDialog","windowManagerImpl","displayNotification","displayError","logError","createLoadError","initError","toContentSkinResourceName","transformToUrls","cssLinks","contentCssFile","isBundledCssSkinName","isContentCssSkinName","ImageScanner","uploadStatus","cachedPromises","images","getAllImages","isUploaded","promises","imageSrc","imageInfo","newPromise","invalidDataUri","getByUri","uriType","blobUriToBlob","imageToBlobInfo","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","Uploader","pendingPromises","defaultHandler","xhr","XMLHttpRequest","withCredentials","credentials","upload","onprogress","json","responseText","path1","path2","basePath","FormData","filename","send","uploadHandler","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","pendingUploadBlobInfo","uploadBlobInfo","uploadBlobs","createUploader","EditorUpload","toBlobInfo","rnd","seed","URL","createObjectURL","findFirst","cachedBlobInfo","removeByUri","revokeObjectURL","BlobCache","uploader","imageScanner","urlFilters","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","shouldDispatchChange","filteredResult","uploadInfo","replaceImageUriInView","uploadError","uploadUri","sugarElement","parentOpt","isEmptyForPadding","addPaddingToEmpty","dispatchChange","uploadImagesAuto","isValidDataUriImage","imgElm","resultItem","replaceBlobUris","editorUpload","source_view","genericBase","cellBase","cellFormats","tablecellbackgroundcolor","tablecellverticalalign","tablecellbordercolor","borderColor","tablecellclass","tableclass","tablecellborderstyle","borderStyle","tablecellborderwidth","borderWidth","each$3","isPreviewItem","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parentSiblings","parseSelectorItem","$0","$3","$4","previewCss","previewStyles","removeVars","previewFrag","previewElm","rawParentFontSize","parentFontSize","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","textAlign","float","marginLeft","marginRight","aligncenter","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","strike","forecolor","hilitecolor","fontname","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","removeformat","FormatRegistry","formatChangeState","setup$s","disableCaretContainer","setup$v","nodeOrRange","setup$u","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","isMeta","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","blockBoundary","getBlockPosition","containerElm","blockPosition","getClosestHost","extractChildren","getChildrenUntilBlockBoundary","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","isEmptyBefore","sidelongBlockMerge","getInlineToBlockDescendants","newFromBlockDescendants","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$9","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","hasSameHost","isEditable$1","isValidBlock","hasValidBlocks","readFromRange","isRawNodeInTable","deleteRange$2","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$8","_forward","showCaret","getNodeRange","renderRangeCaret","caretPositionNode","caretPositionBeforeNode","ceRoot","renderCaretAtRange","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$7","getNextPosFn","isBeforeFn","nextCaretPosition","normalizedNextCaretPosition","deleteBoundaryText","getEdgeCefPosition","atStart","isCefAtEdgeSelected","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$6","backspaceDeleteRange","backspaceDelete$5","deleteCaret$2","isText$2","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertBefore$1","insertAfter$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","moveRel","modify","BreakType","walk$1","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","isAtFirstLine","isAtLastLine","getClosestPositionAbove","getClosestPositionBelow","isContentEditableFalse$5","distanceToRectLeft$1","distanceToRectRight$1","findClosestClientRect","oldClientRect","oldDistance","newDistance","getNodeClientRects","toArrayWithNode","VDirection","walkUntil","isAboveFn","isBeflowFn","targetClientRect","upUntil","Up","downUntil","Down","getLastClientRect","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","positionsUntil","closestNextLineRect","getLineEndPoint","lineInfo","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","findLocation","getPositionFromRange","findLocationTraverse","findLocation$1","move$3","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","isInlineTarget$1","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","caretValue","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$4","rescope","toPosition","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","getParentsUntil","hasOnlyOneChild","getFormatNodes","parentInlines","isFormatElement$1","getFormatNodesAtStart","getParentInlines","deleteCaret$1","hasMultipleChildren","getParentInlinesUntilMultichildInline","deleteLastPosition","createCaretFormatAtStart","isBrInEmptyElement","createCaretFormatAtStart$1","rangeStartsAtTextContainer","requiresDeleteRangeOverride","rangeStartsAtStartOfTextContainer","startParent","rangeStartParentIsFormatElement","endParent","isEqualNode","rangeStartAndEndHaveSameParent","rangeEndsAtEndOfEndContainer","rangeEndsAtEndOfStartContainer","rangeEndsAfterEndOfStartContainer","rangeEndsAtOrAfterEndOfStartContainer","backspaceDelete$3","updateFormats","missingFormats","updateCaretFormat","deleteRange$1","refreshCaret","hasAncestorInlineCaret","hasAncestorInlineCaretAtStart","requiresRefreshCaretOverride","deleteElement","backspaceDelete$2","isNearMedia","deleteCaret","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","indentUnit","indentValue","parsedValue","indentElement","outdent","backspaceDelete$1","findAction","setup$q","deleteCommand","execNativeForwardDeleteCommand","forwardDeleteCommand","isBlockElement","isValidTarget","shouldRemoveTextNode","createRootBlock","rootNodeName","hasBlockParent","restoreSelection","insertEmptyLine","checkClassName","replaceMatchWithSpan","prevChar","findStartTagIndex","blockCaretContainer","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$4","exitPreBlock","getVisualCaretPosition$1","newBlock","textBlock","createTextBlock","moveH$2","moveToCeFalseHorizontally","getHorizontalRange","flipDirection","moveV$4","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","selectToEndPoint","curRng","isTarget","moveV$3","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","moveV$2","summary","move$2","baseKeyPattern","matchesEvent","defaultPatterns","match$1","executeWithDelayedAction","defaultDelayedPatterns","matchDelayed","moveH$1","moveV$1","moveToLineEndPoint","CellLocation","filterFirstLayer","isEligible","elementsWithCursorPosition","isCursorPosition","isContentEditableFalse$3","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","getTable","insertFn","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","mover","moveH","moveV","tabGo","_current","getCellFirstCursorPosition","tabForward","tabBackward","rootElements","tags","clearSelectedCells","DOM$7","alwaysNext","textBefore","scanLeft","scanRight","repeatLeft","isWhitespace","stripTrigger","initRange","includeWhitespace","buffer","firstChar","findTrigger","toLast","isText$1","toLeaf","lookupWithContext","getDatabase","database","startText","autocompleters","lookupByTrigger","_element","isPreviousCharContent","isStartOfWord","ac","maxResults","autocompleterSchema","createAutocompleter","triggers","datasetValues","dv","setup$k","activeAutocompleter","uiActive","fireAutocompleterEnd","getAutocompleters","newContext","getTriggerContext","doLookup","lookupInfo","matchLength","commenceIfNecessary","fireAutocompleterUpdate","fireAutocompleterStart","readActiveRange","selRange","innerRange","outerRange","startComparison","Range","endComparison","isRangeInsideOrEqual","editorCommands","setupEditorInput","emptyNodeContents","isEntireNodeSelected","getParentDetailsElementAtPos","isInDetailsElement","setCaretToPosition","moveCaretToDetailsPos","shouldPreventDeleteIntoDetails","granularity","parentDetailsAtCaret","inEmptyParentBlock","isFirstBlock","isLastBlock","parentDetailsAtNewPos","shouldPreventDeleteSummaryAction","detailElements","detailsElements","startInSummary","startSummary","endInSummary","isPartiallySelectedDetailsElements","startDetails","endDetails","isPartialDelete","isCaretInTheEndOf","isCaretAtEndOfSummary","isCaretInLastPositionInBody","isCaretInTheBeginningOf","isCaretAtStartOfSummary","isCaretInFirstPositionInBody","backspaceDelete","getDetailsElements","shouldPreventDeleteAction","applySelection","appendAllChildNodes","handleDeleteActionSafari","createAndFireInputEvent","specifics","isComposing","currentTarget","eventPhase","AT_TARGET","originalTarget","explicitOriginalTarget","isTrusted","cancelable","InputEvent","fireInputEvent","fireBeforeInputEvent","platform$2","isMacOSOriOS","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getEditableRoot","editableRoot","getParentBlock$1","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","createNewBlock","keepStyles","newBlockName","parentBlockName","hasParent","isListBlock","isListItem","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","blockbreak","isAfterLastNodeInContainer","isCef","collapsedAndCef","createNewBlock$1","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","optionValue","shouldEndContainer","parentList","isWithinNonEditableList","startNodeName","startNodeParent","wrapSelfAndSiblingsInDefaultBlock","isAtDetailsEdge","isLastEmptyBlockInDetails","getDetailsRoot","insertNewLine","containerParent","parentBlockStyles","tmpRng","hasFirstChild","previousChildren","insert$4","parentBlockParent","isNearChildren","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","fakeEventName","moveSelectionToBr","brElm","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","linebreak","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","matchesSelector","newLineAction","shouldBlockNewLine","_shiftKey","shouldBlockNewLine$1","inListBlock","requiredState","isListItemParentBlock","inBlock","getParentBlockName","inCefBlock","inPreBlock","shouldPutBrInPre","inBrContext","shouldInsertBr","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","isInRootWithEmptyOrCEF","isCefOpt","predicates","insertBreak","execEditorDeleteCommand","insert$1","logicalAction","platform$1","isIOSSafari","handleEnterKeyEvent","isPageUpDown","setNodeChangeBlocker","blocked","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","setSelection","insertSpaceOrNbspAtSelection","locationToCaretPosition","checkPos","insertInlineBoundarySpaceOrNbsp","insertSpaceInSummaryAtSelectionOnFirefox","domUtils","insertSpaceOrNbspAtPosition","tableTabNavigation","setup$e","setup$m","executeKeydownOverride$4","setup$l","isBackspaceKeydown","unmodifiedGranularity","getModifiedGranularity","isWord","applyAction","executeKeydownOverride$3","executeKeyupOverride","setup$j","iOSSafariKeydownBookmark","koreanCharRegex","isCaretAfterKoreanCharacter","iOSSafariKeydownOverride","iOSSafariKeyupOverride","setup$i","executeKeydownOverride$1","normalizeNbspsInEditor","setup$g","executeKeydownOverride","setup$c","executeKeydownOverride$2","setup$h","executeKeyupAction","setup$f","NodeChange","lastPath","nativeRng","fakeRng","isSameElementPath","currentPath","imageId","eventId","mkSetEventFn","transfer","setDragstartEvent","setDropEvent","setDragendEvent","isInDragStartEvent","modeId","mkSetModeFn","setMode$1","setReadWriteMode","setReadOnlyMode","setProtectedMode","checkMode","expectedMode","isInReadWriteMode","isInProtectedMode","validDropEffects","validEffectAlloweds","createDataTransfer","dataTransferImpl","DataTransfer","dropEffect","effectAllowed","effect","allowed","itemsImpl","normalizeItems","setDragImage","imageData","clearData","setHtmlData","internalHtmlMime","internalMark","mark","isMarked","pasteBinDefaultContent","isPasteBin","isDefaultPasteBinContent","trimHtml","s1","s2","processResult","cancelled","pasteHtml$1","isAbsoluteUrl","linkSelection","pasteHtmlFn","insertImage","isImageUrl","createImage","createIdGenerator","createPasteDataTransfer","doPaste","shouldSimulateInputEvent","preProcessArgs","firePastePreProcess","filteredContent","preProcess","tempBody","postProcessArgs","firePastePostProcess","postProcessFilter","filterContent","doPasteAction","smartInsertContent","pasteHtml","internalFlag","unmark","pasteText","encodedText","rootTag","rootAttrs","tagOpen","openContainer","tagClose","paragraphs","toBlockElements","getDataTransferItems","contentType","hasContentType","clipboardContent","hasHtmlOrText","pasteImageData","clipboardData","kind","getAsFile","allowedExtensions","extension","lowerExt","mimeOverrides","jpg","jpe","jfi","jif","jfif","pjpeg","pjp","getImageMimeType","getImagesFromDataTransfer","fileResults","imageItem","existingBlobInfo","useFileName","extractFilename","createBlobInfo","pasteImage","insertClipboardContent","plainTextMode","isInternal","isPlainTextHtml","isPlainText","isAbsoluteUrl$1","voidElements","ignoreElements","registerEventsAndFilters","pasteBin","pasteFormat","keyboardPastePlainTextState","isKeyboardPasteEvent","isBrokenAndroidClipboardEvent","getLastRng","registerEventHandlers","isWebKitFakeUrl","isDataUri","isPasteInsert","registerDataImageFilter","setClipboardData","setHtml5Clipboard","contenteditable","offscreenRange","selectNodeContents","hasSelectedContent","isTableSelection","getCaretRangeFromEvent","setFocusedRange","rgbRegExp","rgbToHex","removeWebKitStyles","webKitStylesOption","webKitStyles","outputStyles","compareInput","outputStyle","draggingInternallyState","lastRngCell","pasteBinElm","create$6","pasteBinClone","copyAndRemove","toElm","fromElm","pasteBinClones","dirtyWrappers","cleanWrapper","PasteBin","filterFunc","addPreProcessFilter","togglePlainTextPaste","setup$9","hasImage","dropContent","plainTextContent","isPlainTextFileUrl","internalContent","needsInternalDrop","parentTransparent","needsCustomInternalDrop","isInternalDrop","trimmedContent","hasNoSummary","brokenDetailElements","setupSummaryDeleteByDragFix","isContentEditableFalse$2","getClosestCef","findEdgeCaretCandidate","onTripleClickSelect","startRng","clickNode","getClosestScope","cef","findClosestBlockRange","FakeCaretPosition","distanceToRectLeft","distanceToRectRight","splitRectsPerAxis","prevRect","boundingClientRectFromRects","isInsideY","boundingRect","vertical","r1","r2","overlap","overlapY","collidesY","isOverlapping","horizontalDistance","_y","closestChildCaretCandidateNodeRect","findCloserTextNode","caretCandidateRect","findClosestCaretCandidateNodeRect","distance","sortedRects","sndClosest","tryFindSecondBestTextNode","horizontalRects","verticalRects","above","below","closestFakeCaretCandidate","prevScope","childNodesWithoutGhost","uncheckedChildren","newScope","traverseUp","closestCaretCandidateNodeRect","Before","After","clientInfo","getAbsolutePosition","getTargetProps","makeDragEvent","dataTransferForDispatch","originalMode","getDragImage","getEvent","setEvent","cloneDataTransfer","makeDataTransferCopyForDragEvent","timeStamp","BUBBLING_PHASE","CAPTURING_PHASE","NONE","movementX","movementY","offsetX","offsetY","initUIEvent","makeDndEvent","makeDndEventFromMouseEvent","isContentEditableFalse$1","createGhost","clonedElm","boxSizing","scrollEditor","amount","behavior","scrollRight","scrollUp","scrollDown","removeElement","dispatchDragEvent","throttledPlaceCaretAt","caretInfo","state_","dragging","mouseEventOriginatedFromWithinTheEditor","targetPos","relX","applyRelPos","calculatePosition","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","ghost","bodyElm","mouseY","mouseX","outerMouseY","outerMouseX","moveGhost","stopDragging","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","isDraggable","elmPos","relY","dragHandler","dropHandler","dragElement","isValidDropTarget","getRawTarget","dropTarget","removeElementWithPadding","getHtmlData","dragEndHandler","getContentEditableRoot","SelectionOverrides","realSelectionId","isFakeSelectionTargetElement","isWithinCaretContainer","isRangeInCaretContainer","normalizeVoidElementSelection","setElementSelection","afterNode","targetClone","realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","transposedPoint","isInsideElementContentArea","isXYInContentArea","closestContentEditable","isFakeSelectionElement","preventFileDrop","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","renderFocusCaret","getNormalizedTextOffset","generatePath","generatePathRange","resolvePath","nodePath","resolvePathRange","cleanEmptyNodes","deleteRng","getParentBlock","resolveFromDynamicPatterns","patternSet","beforeText","dynamicPatterns","dynamicPatternsLookup","inlinePatterns","getBeforeText","newMarker","rangeFromMarker","createMarker","markerPrefix","pathRange","textEnd","textStart","startParentNode","removeMarker","isReplacementPattern","findPatternStartFromSpot","startPattern","patternContent","searchText","startEndIndex","startPatternIndex","nextSpot","findPattern$3","normalizedMatches","endPathRng","endRng","resultsOpt","findPatternsRec","remainingPatterns","requireGap","startRange","findPatternStart","startPathRng","generatePathRangeFromRange","endSpot","patternsWithoutCurrent","applyPattern$2","patternRange","findPatterns$2","matchesWithSortedPatterns","hasSameMatches","sortedMatch","getBestMatches","applyMatches$2","matchesWithMarkers","matchesWithEnds","endMarker","startMarker","addMarkers","markerRange","applyReplacementPattern","markerEndRange","markerStartRange","patternMarker","applyPatternWithContent","stripPattern$1","textAfter","createApplyPattern","stripPattern","formatSet","isBlockFormatName","findPattern$2","sortedPatterns","sortPatterns","createFindPatterns","findPattern","skipFullMatch","applyPattern$1","findPattern$1","findPatterns$1","applyPattern","findPatterns","checkKeyEvent","codes","charCodes","keyCodes","getPatternSet","createPatternSet","hasDynamicPatterns","hasTextPatternsLookup","dynamicPatternSet","inlineMatches","blockMatches","getMatches$1","insert$5","applyMatches$1","handleEnter","getMatches","applyMatches","handleBlockPatternOnSpace","handleInlineTrigger","handleInlineKey","charCode","Quirks","isGecko","isWebKit","setEditorCommandState","selectAll","documentElementEditingFocus","selectControlElements","visualAidsAnchorClass","disableBackspaceIntoATable","setGeckoEditingOptions","showBrokenImageIcon","contentStyles","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","refreshContentEditable","serializeRng","allRng","allContentsSelected","emptyEditorWhenDeleting","isAllContentSelected","getAttributeApplyFunction","setAttributeNode","isSelectionAcrossElements","removeStylesWhenDeletingAcrossBlockElements","DOM$6","getRootName","removeUndefined","mkParserSettings","mkSchemaSettings","getStyleSheetLoader$1","loadContentCss","fontCss","removeCss","contentCssText","allStylesheets","framedFonts","bundledCss","normalCss","bundledPromises","makeStylesheetLoadingPromises","contentStyle","appendStyle","initEditorWithInitialContent","startContent","loadInitialContent","bindPendingEventDelegates","fireInit","moveSelectionToFirstCaretPosition","initInstanceCallback","autoFocus","focusEditor","destroyed","initEditor","contentBodyLoaded","_editableRoot","hasEditableRoot","createParser","mkSerializerSettings","annotator","_nodeChangeDispatcher","debounceLongpress","setup$p","preventSummaryToggle","initialStateOption","serializedStateOption","filterDetails","contentEditableAttrName","editClass","nonEditClass","hasEditClass","hasNonEditClass","nonEditableRegExps","convertRegExpsToNonEditable","setup$n","setup$o","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isVisuallyEmpty","firePlaceholderToggle","setup$r","setupRtcThunk","editorCast","rtcPlugin","getRtcSetup","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_node","_similar","_rfl","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","setup$t","firePreInit","spellcheck","quirks","firePostRender","directionality","protect","preInit","licenseKey","isGplKey","isValidGeneratedKey","validateLicenseKey","validateEditorLicenseKey","cancelProgress","canceled","progressTimeout","setProgressState","startProgress","setupRtc","_rtcMode","DOM$5","DOM$4","createThemeFalseResult","renderThemeFalse","renderThemeFalseIframe","iconPackName","currentIcons","loadIcons","svgData","addIcon","initIcons","Theme","documentBaseUrl","initTheme","Model","initModel","initializedPlugins","Plugin","pluginUrl","pluginInstance","pluginInitError","initPlugin","trimLegacyPrefix","initPlugins","renderInfo","orgDisplay","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeUi","uiApiFacade","augmentEditorUiApi","getContentCssUrls","getFontCssUrls","appendContentCssFromSettings","boxInfo","iframeTitle","ifr","customAttrs","frameBorder","allowTransparency","createIframeElement","iframeHTML","bodyId","bodyClass","translatedAriaText","getIframeHtml","createIframe","hidden","orgVisibility","ready","setupIframeBody","init$1","DOM$3","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","isThemeLoaded","isModelLoaded","themeUrl","themeLoadError","loadTheme","modelUrl","modelLoadError","loadModel","languageCode","languageUrl","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrlMetaFromUrl","urlMeta","iconsLoadError","loadPlugin","pluginLoadError","loadPlugins","normalizePlugins","trimmedPlugins","extractSections","hasSection","sectionResult","getMobileOverrideOptions","mobileOptions","table_grid","object_resizing","toolbar_mode","toolbar_sticky","getExternalPlugins","userDefinedExternalPlugins","external_plugins","combineOptions","isMobileDevice","defaultOptions","defaultOverrideOptions","deviceOverrideOptions","extendedOptions","isOnMobile","sectionOptions","getSection","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","platformPlugins","mobilePlugins","getPlatformPlugins","combinedPlugins","combinePlugins","processPlugins","registerCommands$a","toggleAlign","addCommands","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","JustifyNone","registerExecCommands$2","alignStates","registerQueryStateCommands","trimOrPad","trimOrPadLeftRight","insertAtCaret","processValue$1","insertedContent","insertContent$1","legacyPropNames","isFont","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","getCaretElement","bindRange","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","topParentBlock","getTopParentBlock","queryCommandEnabled","queryCommandSupported","registerCommands$9","mceAddUndoLevel","mceEndUndoLevel","Undo","Redo","registerCommands$6","mceSelectNodeDepth","_command","mceSelectNode","registerCommands$1","mceCleanup","insertHorizontalRule","insertText","insertHTML","mceInsertContent","mceSetContent","mceReplaceContent","mceNewDocument","registerCommands$8","applyLinkToSelection","linkDetails","mceInsertLink","registerCommands$4","Indent","Outdent","registerCommands$5","InsertNewBlockBefore","InsertNewBlockAfter","registerCommands$3","insertParagraph","mceInsertNewLine","InsertLineBreak","registerCommands$2","fontNameAction","fontSizeAction","lineHeightAction","registerExecCommands$1","isFormatMatch","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","registerQueryValueCommands","registerCommands$7","mceRemoveNode","mcePrint","print","mceFocus","bookmarkRng","contentEditableHost","getContentEditableHost","mceToggleVisualAid","registerExecCommands","selectionSafeCommands","isSelectionSafeCommand","EditorCommands","lowerCaseCommand","commandList","internalContentEditableAttr","setContentEditable","registerFilters","allowedEvents","nativeEvents","EventDispatcher","bindings","toggleEvent","beforeFire","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","isNative","toggleNativeEvent","Observable","dispatcherArgs","DOM$2","customEventRootDelegates","getEventTarget","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","isReadOnlyAllowedEvent","processReadonlyEvents","bindEventDelegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","stringListProcessor","getErrorMessage","isValidResult","processValue","defaultModes","switchToMode","activeMode","availableModes","oldMode","activate","deactivate","editorReadOnly","removeFakeSelection","restoreFakeSelection","toggleReadOnly","fireSwitchMode","each$2","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","isModifier","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","cmdFunc","normalizeCommandFunc","createShortcut","bridge","addAutocompleter","addContextToolbar","addSidebar","addView","create$3","DOM$1","Editor","loadedCSS","isNotDirty","documentBaseURL","normalizedOptions","normalizeOptions","initialOptions","isRegistered","isBuiltInSpec","getBuiltInProcessor","processDefaultValue","immutable","unset","registered","lookupFn","rawPatterns","_ctx","rawOptions","hasRemovedPlugins","hasRemovedOptions","isLegacyMobileTheme","listJoiner","themesMessage","pluginsMessage","optionsMessage","logRemovedWarnings","hasDeprecatedPlugins","hasDeprecatedOptions","logDeprecatedWarnings","logWarnings","_setBaseUrl","baseURI","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","setMode","registerMode","setupCallback","getStyleSheetLoader","formEventDelegate","resetContent","_mceOldSubmit","triggerSave","isEncodingXml","save","_beforeUnload","set_dirty","getParam","loadArgs","saveArgs","is_removing","setupArgs$1","getContent$2","initialContent","oldState","urlConverterCallback","urlObject","addVisual$1","setEditableRoot","fireEditableRootStateChange","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","beforeUnloadDelegate","boundGlobalEvents","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","tinyMCEPreInit","srcScript","overrideDefaults","base_url","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","pluginName","invalidInlineTargets","provideResults","initEditors","initCount","execCallback","findTargets","isInvalidInlineTarget","createEditor","createId","existingEditor","editorId","editorOptions","addI18n","FakeClipboard","dataValue","FakeClipboardItem","getType","relativePosition","targetW","targetH","relChars","Rect","inflate","findBestRelativePosition","constrainRect","intersect","cropRect","x1","y1","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","tasks","resultFns","resources","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","awaiter","localStorage","removeItem","publicApi","geom","LocalStorage","ImageUploader","showNotification","TreeWalker","Serializer","Selection","tinymce$1","tinyMCE","exportToWindowGlobal","module","exportToModuleLoaders"],"sourceRoot":""}